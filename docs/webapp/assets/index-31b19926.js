var Vp=Object.defineProperty;var jp=(e,t,n)=>t in e?Vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>(jp(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function kl(e,t){const n=Object.create(null),i=e.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function _e(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=kt(i)?Xp(i):_e(i);if(s)for(const o in s)t[o]=s[o]}return t}else{if(kt(e))return e;if(ut(e))return e}}const Kp=/;(?![^(]*\))/g,qp=/:([^]+)/,Yp=/\/\*.*?\*\//gs;function Xp(e){const t={};return e.replace(Yp,"").split(Kp).forEach(n=>{if(n){const i=n.split(qp);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ze(e){let t="";if(kt(e))t=e;else if(Ce(e))for(let n=0;n<e.length;n++){const i=Ze(e[n]);i&&(t+=i+" ")}else if(ut(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Jp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qp=kl(Jp);function od(e){return!!e||e===""}const I=e=>kt(e)?e:e==null?"":Ce(e)||ut(e)&&(e.toString===cd||!Ne(e.toString))?JSON.stringify(e,rd,2):String(e),rd=(e,t)=>t&&t.__v_isRef?rd(e,t.value):ji(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:ad(t)?{[`Set(${t.size})`]:[...t.values()]}:ut(t)&&!Ce(t)&&!ud(t)?String(t):t,ct={},Vi=[],gn=()=>{},Zp=()=>!1,eg=/^on[^a-z]/,Lr=e=>eg.test(e),Pl=e=>e.startsWith("onUpdate:"),Gt=Object.assign,Al=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},tg=Object.prototype.hasOwnProperty,Ve=(e,t)=>tg.call(e,t),Ce=Array.isArray,ji=e=>Br(e)==="[object Map]",ad=e=>Br(e)==="[object Set]",Ne=e=>typeof e=="function",kt=e=>typeof e=="string",Tl=e=>typeof e=="symbol",ut=e=>e!==null&&typeof e=="object",ld=e=>ut(e)&&Ne(e.then)&&Ne(e.catch),cd=Object.prototype.toString,Br=e=>cd.call(e),ng=e=>Br(e).slice(8,-1),ud=e=>Br(e)==="[object Object]",Cl=e=>kt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Bo=kl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},ig=/-(\w)/g,Cn=Dr(e=>e.replace(ig,(t,n)=>n?n.toUpperCase():"")),sg=/\B([A-Z])/g,rs=Dr(e=>e.replace(sg,"-$1").toLowerCase()),Fr=Dr(e=>e.charAt(0).toUpperCase()+e.slice(1)),ia=Dr(e=>e?`on${Fr(e)}`:""),Us=(e,t)=>!Object.is(e,t),sa=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ir=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},og=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Sc;const rg=()=>Sc||(Sc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let hn;class ag{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=hn,!t&&hn&&(this.index=(hn.scopes||(hn.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=hn;try{return hn=this,t()}finally{hn=n}}}on(){hn=this}off(){hn=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function lg(e,t=hn){t&&t.active&&t.effects.push(e)}function cg(){return hn}const Ml=e=>{const t=new Set(e);return t.w=0,t.n=0,t},hd=e=>(e.w&si)>0,dd=e=>(e.n&si)>0,ug=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=si},hg=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const s=t[i];hd(s)&&!dd(s)?s.delete(e):t[n++]=s,s.w&=~si,s.n&=~si}t.length=n}},Ha=new WeakMap;let _s=0,si=1;const Ua=30;let dn;const Ai=Symbol(""),za=Symbol("");class xl{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,lg(this,i)}run(){if(!this.active)return this.fn();let t=dn,n=Zn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=dn,dn=this,Zn=!0,si=1<<++_s,_s<=Ua?ug(this):wc(this),this.fn()}finally{_s<=Ua&&hg(this),si=1<<--_s,dn=this.parent,Zn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){dn===this?this.deferStop=!0:this.active&&(wc(this),this.onStop&&this.onStop(),this.active=!1)}}function wc(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Zn=!0;const fd=[];function as(){fd.push(Zn),Zn=!1}function ls(){const e=fd.pop();Zn=e===void 0?!0:e}function Yt(e,t,n){if(Zn&&dn){let i=Ha.get(e);i||Ha.set(e,i=new Map);let s=i.get(n);s||i.set(n,s=Ml()),pd(s)}}function pd(e,t){let n=!1;_s<=Ua?dd(e)||(e.n|=si,n=!hd(e)):n=!e.has(dn),n&&(e.add(dn),dn.deps.push(e))}function zn(e,t,n,i,s,o){const r=Ha.get(e);if(!r)return;let a=[];if(t==="clear")a=[...r.values()];else if(n==="length"&&Ce(e)){const l=Number(i);r.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(r.get(n)),t){case"add":Ce(e)?Cl(n)&&a.push(r.get("length")):(a.push(r.get(Ai)),ji(e)&&a.push(r.get(za)));break;case"delete":Ce(e)||(a.push(r.get(Ai)),ji(e)&&a.push(r.get(za)));break;case"set":ji(e)&&a.push(r.get(Ai));break}if(a.length===1)a[0]&&Ga(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Ga(Ml(l))}}function Ga(e,t){const n=Ce(e)?e:[...e];for(const i of n)i.computed&&Ec(i);for(const i of n)i.computed||Ec(i)}function Ec(e,t){(e!==dn||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const dg=kl("__proto__,__v_isRef,__isVue"),gd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tl)),fg=Rl(),pg=Rl(!1,!0),gg=Rl(!0),Ic=mg();function mg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=qe(this);for(let o=0,r=this.length;o<r;o++)Yt(i,"get",o+"");const s=i[t](...n);return s===-1||s===!1?i[t](...n.map(qe)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){as();const i=qe(this)[t].apply(this,n);return ls(),i}}),e}function bg(e){const t=qe(this);return Yt(t,"has",e),t.hasOwnProperty(e)}function Rl(e=!1,t=!1){return function(i,s,o){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&o===(e?t?Ng:vd:t?_d:yd).get(i))return i;const r=Ce(i);if(!e){if(r&&Ve(Ic,s))return Reflect.get(Ic,s,o);if(s==="hasOwnProperty")return bg}const a=Reflect.get(i,s,o);return(Tl(s)?gd.has(s):dg(s))||(e||Yt(i,"get",s),t)?a:Lt(a)?r&&Cl(s)?a:a.value:ut(a)?e?Sd(a):yn(a):a}}const yg=md(),_g=md(!0);function md(e=!1){return function(n,i,s,o){let r=n[i];if(es(r)&&Lt(r)&&!Lt(s))return!1;if(!e&&(!sr(s)&&!es(s)&&(r=qe(r),s=qe(s)),!Ce(n)&&Lt(r)&&!Lt(s)))return r.value=s,!0;const a=Ce(n)&&Cl(i)?Number(i)<n.length:Ve(n,i),l=Reflect.set(n,i,s,o);return n===qe(o)&&(a?Us(s,r)&&zn(n,"set",i,s):zn(n,"add",i,s)),l}}function vg(e,t){const n=Ve(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&zn(e,"delete",t,void 0),i}function Sg(e,t){const n=Reflect.has(e,t);return(!Tl(t)||!gd.has(t))&&Yt(e,"has",t),n}function wg(e){return Yt(e,"iterate",Ce(e)?"length":Ai),Reflect.ownKeys(e)}const bd={get:fg,set:yg,deleteProperty:vg,has:Sg,ownKeys:wg},Eg={get:gg,set(e,t){return!0},deleteProperty(e,t){return!0}},Ig=Gt({},bd,{get:pg,set:_g}),Nl=e=>e,$r=e=>Reflect.getPrototypeOf(e);function uo(e,t,n=!1,i=!1){e=e.__v_raw;const s=qe(e),o=qe(t);n||(t!==o&&Yt(s,"get",t),Yt(s,"get",o));const{has:r}=$r(s),a=i?Nl:n?Bl:zs;if(r.call(s,t))return a(e.get(t));if(r.call(s,o))return a(e.get(o));e!==s&&e.get(t)}function ho(e,t=!1){const n=this.__v_raw,i=qe(n),s=qe(e);return t||(e!==s&&Yt(i,"has",e),Yt(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function fo(e,t=!1){return e=e.__v_raw,!t&&Yt(qe(e),"iterate",Ai),Reflect.get(e,"size",e)}function kc(e){e=qe(e);const t=qe(this);return $r(t).has.call(t,e)||(t.add(e),zn(t,"add",e,e)),this}function Pc(e,t){t=qe(t);const n=qe(this),{has:i,get:s}=$r(n);let o=i.call(n,e);o||(e=qe(e),o=i.call(n,e));const r=s.call(n,e);return n.set(e,t),o?Us(t,r)&&zn(n,"set",e,t):zn(n,"add",e,t),this}function Ac(e){const t=qe(this),{has:n,get:i}=$r(t);let s=n.call(t,e);s||(e=qe(e),s=n.call(t,e)),i&&i.call(t,e);const o=t.delete(e);return s&&zn(t,"delete",e,void 0),o}function Tc(){const e=qe(this),t=e.size!==0,n=e.clear();return t&&zn(e,"clear",void 0,void 0),n}function po(e,t){return function(i,s){const o=this,r=o.__v_raw,a=qe(r),l=t?Nl:e?Bl:zs;return!e&&Yt(a,"iterate",Ai),r.forEach((c,u)=>i.call(s,l(c),l(u),o))}}function go(e,t,n){return function(...i){const s=this.__v_raw,o=qe(s),r=ji(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=s[e](...i),u=n?Nl:t?Bl:zs;return!t&&Yt(o,"iterate",l?za:Ai),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:a?[u(h[0]),u(h[1])]:u(h),done:p}},[Symbol.iterator](){return this}}}}function jn(e){return function(...t){return e==="delete"?!1:this}}function kg(){const e={get(o){return uo(this,o)},get size(){return fo(this)},has:ho,add:kc,set:Pc,delete:Ac,clear:Tc,forEach:po(!1,!1)},t={get(o){return uo(this,o,!1,!0)},get size(){return fo(this)},has:ho,add:kc,set:Pc,delete:Ac,clear:Tc,forEach:po(!1,!0)},n={get(o){return uo(this,o,!0)},get size(){return fo(this,!0)},has(o){return ho.call(this,o,!0)},add:jn("add"),set:jn("set"),delete:jn("delete"),clear:jn("clear"),forEach:po(!0,!1)},i={get(o){return uo(this,o,!0,!0)},get size(){return fo(this,!0)},has(o){return ho.call(this,o,!0)},add:jn("add"),set:jn("set"),delete:jn("delete"),clear:jn("clear"),forEach:po(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=go(o,!1,!1),n[o]=go(o,!0,!1),t[o]=go(o,!1,!0),i[o]=go(o,!0,!0)}),[e,n,t,i]}const[Pg,Ag,Tg,Cg]=kg();function Ol(e,t){const n=t?e?Cg:Tg:e?Ag:Pg;return(i,s,o)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(Ve(n,s)&&s in i?n:i,s,o)}const Mg={get:Ol(!1,!1)},xg={get:Ol(!1,!0)},Rg={get:Ol(!0,!1)},yd=new WeakMap,_d=new WeakMap,vd=new WeakMap,Ng=new WeakMap;function Og(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lg(e){return e.__v_skip||!Object.isExtensible(e)?0:Og(ng(e))}function yn(e){return es(e)?e:Ll(e,!1,bd,Mg,yd)}function Bg(e){return Ll(e,!1,Ig,xg,_d)}function Sd(e){return Ll(e,!0,Eg,Rg,vd)}function Ll(e,t,n,i,s){if(!ut(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=s.get(e);if(o)return o;const r=Lg(e);if(r===0)return e;const a=new Proxy(e,r===2?i:n);return s.set(e,a),a}function Ki(e){return es(e)?Ki(e.__v_raw):!!(e&&e.__v_isReactive)}function es(e){return!!(e&&e.__v_isReadonly)}function sr(e){return!!(e&&e.__v_isShallow)}function wd(e){return Ki(e)||es(e)}function qe(e){const t=e&&e.__v_raw;return t?qe(t):e}function Ed(e){return ir(e,"__v_skip",!0),e}const zs=e=>ut(e)?yn(e):e,Bl=e=>ut(e)?Sd(e):e;function Id(e){Zn&&dn&&(e=qe(e),pd(e.dep||(e.dep=Ml())))}function kd(e,t){e=qe(e);const n=e.dep;n&&Ga(n)}function Lt(e){return!!(e&&e.__v_isRef===!0)}function H(e){return Dg(e,!1)}function Dg(e,t){return Lt(e)?e:new Fg(e,t)}class Fg{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:qe(t),this._value=n?t:zs(t)}get value(){return Id(this),this._value}set value(t){const n=this.__v_isShallow||sr(t)||es(t);t=n?t:qe(t),Us(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:zs(t),kd(this))}}function $g(e){return Lt(e)?e.value:e}const Hg={get:(e,t,n)=>$g(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return Lt(s)&&!Lt(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function Pd(e){return Ki(e)?e:new Proxy(e,Hg)}var Ad;class Ug{constructor(t,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[Ad]=!1,this._dirty=!0,this.effect=new xl(t,()=>{this._dirty||(this._dirty=!0,kd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=qe(this);return Id(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Ad="__v_isReadonly";function zg(e,t,n=!1){let i,s;const o=Ne(e);return o?(i=e,s=gn):(i=e.get,s=e.set),new Ug(i,s,o||!s,n)}function ei(e,t,n,i){let s;try{s=i?e(...i):e()}catch(o){Hr(o,t,n)}return s}function mn(e,t,n,i){if(Ne(e)){const o=ei(e,t,n,i);return o&&ld(o)&&o.catch(r=>{Hr(r,t,n)}),o}const s=[];for(let o=0;o<e.length;o++)s.push(mn(e[o],t,n,i));return s}function Hr(e,t,n,i=!0){const s=t?t.vnode:null;if(t){let o=t.parent;const r=t.proxy,a=n;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,r,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){ei(l,null,10,[e,r,a]);return}}Gg(e,n,s,i)}function Gg(e,t,n,i=!0){console.error(e)}let Gs=!1,Wa=!1;const Nt=[];let In=0;const qi=[];let Ln=null,wi=0;const Td=Promise.resolve();let Dl=null;function Wg(e){const t=Dl||Td;return e?t.then(this?e.bind(this):e):t}function Vg(e){let t=In+1,n=Nt.length;for(;t<n;){const i=t+n>>>1;Ws(Nt[i])<e?t=i+1:n=i}return t}function Fl(e){(!Nt.length||!Nt.includes(e,Gs&&e.allowRecurse?In+1:In))&&(e.id==null?Nt.push(e):Nt.splice(Vg(e.id),0,e),Cd())}function Cd(){!Gs&&!Wa&&(Wa=!0,Dl=Td.then(xd))}function jg(e){const t=Nt.indexOf(e);t>In&&Nt.splice(t,1)}function Kg(e){Ce(e)?qi.push(...e):(!Ln||!Ln.includes(e,e.allowRecurse?wi+1:wi))&&qi.push(e),Cd()}function Cc(e,t=Gs?In+1:0){for(;t<Nt.length;t++){const n=Nt[t];n&&n.pre&&(Nt.splice(t,1),t--,n())}}function Md(e){if(qi.length){const t=[...new Set(qi)];if(qi.length=0,Ln){Ln.push(...t);return}for(Ln=t,Ln.sort((n,i)=>Ws(n)-Ws(i)),wi=0;wi<Ln.length;wi++)Ln[wi]();Ln=null,wi=0}}const Ws=e=>e.id==null?1/0:e.id,qg=(e,t)=>{const n=Ws(e)-Ws(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function xd(e){Wa=!1,Gs=!0,Nt.sort(qg);const t=gn;try{for(In=0;In<Nt.length;In++){const n=Nt[In];n&&n.active!==!1&&ei(n,null,14)}}finally{In=0,Nt.length=0,Md(),Gs=!1,Dl=null,(Nt.length||qi.length)&&xd()}}function Yg(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||ct;let s=n;const o=t.startsWith("update:"),r=o&&t.slice(7);if(r&&r in i){const u=`${r==="modelValue"?"model":r}Modifiers`,{number:h,trim:p}=i[u]||ct;p&&(s=n.map(g=>kt(g)?g.trim():g)),h&&(s=n.map(og))}let a,l=i[a=ia(t)]||i[a=ia(Cn(t))];!l&&o&&(l=i[a=ia(rs(t))]),l&&mn(l,e,6,s);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,mn(c,e,6,s)}}function Rd(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const o=e.emits;let r={},a=!1;if(!Ne(e)){const l=c=>{const u=Rd(c,t,!0);u&&(a=!0,Gt(r,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(ut(e)&&i.set(e,null),null):(Ce(o)?o.forEach(l=>r[l]=null):Gt(r,o),ut(e)&&i.set(e,r),r)}function Ur(e,t){return!e||!Lr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ve(e,t[0].toLowerCase()+t.slice(1))||Ve(e,rs(t))||Ve(e,t))}let zt=null,zr=null;function or(e){const t=zt;return zt=e,zr=e&&e.type.__scopeId||null,t}function cs(e){zr=e}function us(){zr=null}function wn(e,t=zt,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&Fc(-1);const o=or(t);let r;try{r=e(...s)}finally{or(o),i._d&&Fc(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function oa(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:p,setupState:g,ctx:y,inheritAttrs:b}=e;let v,_;const E=or(e);try{if(n.shapeFlag&4){const k=s||i;v=En(u.call(k,k,h,o,g,p,y)),_=l}else{const k=t;v=En(k.length>1?k(o,{attrs:l,slots:a,emit:c}):k(o,null)),_=t.props?l:Xg(l)}}catch(k){Ms.length=0,Hr(k,e,1),v=K(oi)}let w=v;if(_&&b!==!1){const k=Object.keys(_),{shapeFlag:A}=w;k.length&&A&7&&(r&&k.some(Pl)&&(_=Jg(_,r)),w=ts(w,_))}return n.dirs&&(w=ts(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),v=w,or(E),v}const Xg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Lr(n))&&((t||(t={}))[n]=e[n]);return t},Jg=(e,t)=>{const n={};for(const i in e)(!Pl(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function Qg(e,t,n){const{props:i,children:s,component:o}=e,{props:r,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Mc(i,r,c):!!r;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const p=u[h];if(r[p]!==i[p]&&!Ur(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===r?!1:i?r?Mc(i,r,c):!0:!!r;return!1}function Mc(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const o=i[s];if(t[o]!==e[o]&&!Ur(n,o))return!0}return!1}function Zg({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const em=e=>e.__isSuspense;function tm(e,t){t&&t.pendingBranch?Ce(e)?t.effects.push(...e):t.effects.push(e):Kg(e)}function nm(e,t){if(vt){let n=vt.provides;const i=vt.parent&&vt.parent.provides;i===n&&(n=vt.provides=Object.create(i)),n[e]=t}}function Do(e,t,n=!1){const i=vt||zt;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Ne(t)?t.call(i.proxy):t}}const mo={};function ti(e,t,n){return Nd(e,t,n)}function Nd(e,t,{immediate:n,deep:i,flush:s,onTrack:o,onTrigger:r}=ct){const a=cg()===(vt==null?void 0:vt.scope)?vt:null;let l,c=!1,u=!1;if(Lt(e)?(l=()=>e.value,c=sr(e)):Ki(e)?(l=()=>e,i=!0):Ce(e)?(u=!0,c=e.some(w=>Ki(w)||sr(w)),l=()=>e.map(w=>{if(Lt(w))return w.value;if(Ki(w))return zi(w);if(Ne(w))return ei(w,a,2)})):Ne(e)?t?l=()=>ei(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),mn(e,a,3,[p])}:l=gn,t&&i){const w=l;l=()=>zi(w())}let h,p=w=>{h=_.onStop=()=>{ei(w,a,4)}},g;if(js)if(p=gn,t?n&&mn(t,a,3,[l(),u?[]:void 0,p]):l(),s==="sync"){const w=jm();g=w.__watcherHandles||(w.__watcherHandles=[])}else return gn;let y=u?new Array(e.length).fill(mo):mo;const b=()=>{if(_.active)if(t){const w=_.run();(i||c||(u?w.some((k,A)=>Us(k,y[A])):Us(w,y)))&&(h&&h(),mn(t,a,3,[w,y===mo?void 0:u&&y[0]===mo?[]:y,p]),y=w)}else _.run()};b.allowRecurse=!!t;let v;s==="sync"?v=b:s==="post"?v=()=>jt(b,a&&a.suspense):(b.pre=!0,a&&(b.id=a.uid),v=()=>Fl(b));const _=new xl(l,v);t?n?b():y=_.run():s==="post"?jt(_.run.bind(_),a&&a.suspense):_.run();const E=()=>{_.stop(),a&&a.scope&&Al(a.scope.effects,_)};return g&&g.push(E),E}function im(e,t,n){const i=this.proxy,s=kt(e)?e.includes(".")?Od(i,e):()=>i[e]:e.bind(i,i);let o;Ne(t)?o=t:(o=t.handler,n=t);const r=vt;ns(this);const a=Nd(s,o.bind(i),n);return r?ns(r):Ti(),a}function Od(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function zi(e,t){if(!ut(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Lt(e))zi(e.value,t);else if(Ce(e))for(let n=0;n<e.length;n++)zi(e[n],t);else if(ad(e)||ji(e))e.forEach(n=>{zi(n,t)});else if(ud(e))for(const n in e)zi(e[n],t);return e}function ze(e){return Ne(e)?{setup:e,name:e.name}:e}const Ts=e=>!!e.type.__asyncLoader,Ld=e=>e.type.__isKeepAlive;function sm(e,t){Bd(e,"a",t)}function om(e,t){Bd(e,"da",t)}function Bd(e,t,n=vt){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Gr(t,i,n),n){let s=n.parent;for(;s&&s.parent;)Ld(s.parent.vnode)&&rm(i,t,n,s),s=s.parent}}function rm(e,t,n,i){const s=Gr(t,e,i,!0);oo(()=>{Al(i[t],s)},n)}function Gr(e,t,n=vt,i=!1){if(n){const s=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;as(),ns(n);const a=mn(t,n,e,r);return Ti(),ls(),a});return i?s.unshift(o):s.push(o),o}}const Gn=e=>(t,n=vt)=>(!js||e==="sp")&&Gr(e,(...i)=>t(...i),n),am=Gn("bm"),nt=Gn("m"),Dd=Gn("bu"),hs=Gn("u"),Ft=Gn("bum"),oo=Gn("um"),lm=Gn("sp"),cm=Gn("rtg"),um=Gn("rtc");function hm(e,t=vt){Gr("ec",e,t)}function hi(e,t,n,i){const s=e.dirs,o=t&&t.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[i];l&&(as(),mn(l,n,8,[e.el,a,e,t]),ls())}}const Fd="components";function ge(e,t){return fm(Fd,e,!0,t)||e}const dm=Symbol();function fm(e,t,n=!0,i=!1){const s=zt||vt;if(s){const o=s.type;if(e===Fd){const a=zm(o,!1);if(a&&(a===t||a===Cn(t)||a===Fr(Cn(t))))return o}const r=xc(s[e]||o[e],t)||xc(s.appContext[e],t);return!r&&i?o:r}}function xc(e,t){return e&&(e[t]||e[Cn(t)]||e[Fr(Cn(t))])}function Ue(e,t,n,i){let s;const o=n&&n[i];if(Ce(e)||kt(e)){s=new Array(e.length);for(let r=0,a=e.length;r<a;r++)s[r]=t(e[r],r,void 0,o&&o[r])}else if(typeof e=="number"){s=new Array(e);for(let r=0;r<e;r++)s[r]=t(r+1,r,void 0,o&&o[r])}else if(ut(e))if(e[Symbol.iterator])s=Array.from(e,(r,a)=>t(r,a,void 0,o&&o[a]));else{const r=Object.keys(e);s=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];s[a]=t(e[c],c,a,o&&o[a])}}else s=[];return n&&(n[i]=s),s}function Va(e,t,n={},i,s){if(zt.isCE||zt.parent&&Ts(zt.parent)&&zt.parent.isCE)return t!=="default"&&(n.name=t),K("slot",n,i&&i());let o=e[t];o&&o._c&&(o._d=!1),M();const r=o&&$d(o(n)),a=He(ke,{key:n.key||r&&r.key||`_${t}`},r||(i?i():[]),r&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function $d(e){return e.some(t=>ar(t)?!(t.type===oi||t.type===ke&&!$d(t.children)):!0)?e:null}const ja=e=>e?Xd(e)?zl(e)||e.proxy:ja(e.parent):null,Cs=Gt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ja(e.parent),$root:e=>ja(e.root),$emit:e=>e.emit,$options:e=>$l(e),$forceUpdate:e=>e.f||(e.f=()=>Fl(e.update)),$nextTick:e=>e.n||(e.n=Wg.bind(e.proxy)),$watch:e=>im.bind(e)}),ra=(e,t)=>e!==ct&&!e.__isScriptSetup&&Ve(e,t),pm={get({_:e},t){const{ctx:n,setupState:i,data:s,props:o,accessCache:r,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const g=r[t];if(g!==void 0)switch(g){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return o[t]}else{if(ra(i,t))return r[t]=1,i[t];if(s!==ct&&Ve(s,t))return r[t]=2,s[t];if((c=e.propsOptions[0])&&Ve(c,t))return r[t]=3,o[t];if(n!==ct&&Ve(n,t))return r[t]=4,n[t];Ka&&(r[t]=0)}}const u=Cs[t];let h,p;if(u)return t==="$attrs"&&Yt(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==ct&&Ve(n,t))return r[t]=4,n[t];if(p=l.config.globalProperties,Ve(p,t))return p[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:o}=e;return ra(s,t)?(s[t]=n,!0):i!==ct&&Ve(i,t)?(i[t]=n,!0):Ve(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:o}},r){let a;return!!n[r]||e!==ct&&Ve(e,r)||ra(t,r)||(a=o[0])&&Ve(a,r)||Ve(i,r)||Ve(Cs,r)||Ve(s.config.globalProperties,r)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ve(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Ka=!0;function gm(e){const t=$l(e),n=e.proxy,i=e.ctx;Ka=!1,t.beforeCreate&&Rc(t.beforeCreate,e,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:p,beforeUpdate:g,updated:y,activated:b,deactivated:v,beforeDestroy:_,beforeUnmount:E,destroyed:w,unmounted:k,render:A,renderTracked:O,renderTriggered:G,errorCaptured:W,serverPrefetch:Z,expose:Y,inheritAttrs:Q,components:ye,directives:de,filters:Le}=t;if(c&&mm(c,i,null,e.appContext.config.unwrapInjectedRef),r)for(const ne in r){const re=r[ne];Ne(re)&&(i[ne]=re.bind(n))}if(s){const ne=s.call(n,n);ut(ne)&&(e.data=yn(ne))}if(Ka=!0,o)for(const ne in o){const re=o[ne],oe=Ne(re)?re.bind(n,n):Ne(re.get)?re.get.bind(n,n):gn,Oe=!Ne(re)&&Ne(re.set)?re.set.bind(n):gn,Pe=Ae({get:oe,set:Oe});Object.defineProperty(i,ne,{enumerable:!0,configurable:!0,get:()=>Pe.value,set:me=>Pe.value=me})}if(a)for(const ne in a)Hd(a[ne],i,n,ne);if(l){const ne=Ne(l)?l.call(n):l;Reflect.ownKeys(ne).forEach(re=>{nm(re,ne[re])})}u&&Rc(u,e,"c");function Ee(ne,re){Ce(re)?re.forEach(oe=>ne(oe.bind(n))):re&&ne(re.bind(n))}if(Ee(am,h),Ee(nt,p),Ee(Dd,g),Ee(hs,y),Ee(sm,b),Ee(om,v),Ee(hm,W),Ee(um,O),Ee(cm,G),Ee(Ft,E),Ee(oo,k),Ee(lm,Z),Ce(Y))if(Y.length){const ne=e.exposed||(e.exposed={});Y.forEach(re=>{Object.defineProperty(ne,re,{get:()=>n[re],set:oe=>n[re]=oe})})}else e.exposed||(e.exposed={});A&&e.render===gn&&(e.render=A),Q!=null&&(e.inheritAttrs=Q),ye&&(e.components=ye),de&&(e.directives=de)}function mm(e,t,n=gn,i=!1){Ce(e)&&(e=qa(e));for(const s in e){const o=e[s];let r;ut(o)?"default"in o?r=Do(o.from||s,o.default,!0):r=Do(o.from||s):r=Do(o),Lt(r)&&i?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[s]=r}}function Rc(e,t,n){mn(Ce(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Hd(e,t,n,i){const s=i.includes(".")?Od(n,i):()=>n[i];if(kt(e)){const o=t[e];Ne(o)&&ti(s,o)}else if(Ne(e))ti(s,e.bind(n));else if(ut(e))if(Ce(e))e.forEach(o=>Hd(o,t,n,i));else{const o=Ne(e.handler)?e.handler.bind(n):t[e.handler];Ne(o)&&ti(s,o,e)}}function $l(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!s.length&&!n&&!i?l=t:(l={},s.length&&s.forEach(c=>rr(l,c,r,!0)),rr(l,t,r)),ut(t)&&o.set(t,l),l}function rr(e,t,n,i=!1){const{mixins:s,extends:o}=t;o&&rr(e,o,n,!0),s&&s.forEach(r=>rr(e,r,n,!0));for(const r in t)if(!(i&&r==="expose")){const a=bm[r]||n&&n[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const bm={data:Nc,props:_i,emits:_i,methods:_i,computed:_i,beforeCreate:$t,created:$t,beforeMount:$t,mounted:$t,beforeUpdate:$t,updated:$t,beforeDestroy:$t,beforeUnmount:$t,destroyed:$t,unmounted:$t,activated:$t,deactivated:$t,errorCaptured:$t,serverPrefetch:$t,components:_i,directives:_i,watch:_m,provide:Nc,inject:ym};function Nc(e,t){return t?e?function(){return Gt(Ne(e)?e.call(this,this):e,Ne(t)?t.call(this,this):t)}:t:e}function ym(e,t){return _i(qa(e),qa(t))}function qa(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function $t(e,t){return e?[...new Set([].concat(e,t))]:t}function _i(e,t){return e?Gt(Gt(Object.create(null),e),t):t}function _m(e,t){if(!e)return t;if(!t)return e;const n=Gt(Object.create(null),e);for(const i in t)n[i]=$t(e[i],t[i]);return n}function vm(e,t,n,i=!1){const s={},o={};ir(o,Vr,1),e.propsDefaults=Object.create(null),Ud(e,t,s,o);for(const r in e.propsOptions[0])r in s||(s[r]=void 0);n?e.props=i?s:Bg(s):e.type.props?e.props=s:e.props=o,e.attrs=o}function Sm(e,t,n,i){const{props:s,attrs:o,vnode:{patchFlag:r}}=e,a=qe(s),[l]=e.propsOptions;let c=!1;if((i||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let p=u[h];if(Ur(e.emitsOptions,p))continue;const g=t[p];if(l)if(Ve(o,p))g!==o[p]&&(o[p]=g,c=!0);else{const y=Cn(p);s[y]=Ya(l,a,y,g,e,!1)}else g!==o[p]&&(o[p]=g,c=!0)}}}else{Ud(e,t,s,o)&&(c=!0);let u;for(const h in a)(!t||!Ve(t,h)&&((u=rs(h))===h||!Ve(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Ya(l,a,h,void 0,e,!0)):delete s[h]);if(o!==a)for(const h in o)(!t||!Ve(t,h))&&(delete o[h],c=!0)}c&&zn(e,"set","$attrs")}function Ud(e,t,n,i){const[s,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(Bo(l))continue;const c=t[l];let u;s&&Ve(s,u=Cn(l))?!o||!o.includes(u)?n[u]=c:(a||(a={}))[u]=c:Ur(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,r=!0)}if(o){const l=qe(n),c=a||ct;for(let u=0;u<o.length;u++){const h=o[u];n[h]=Ya(s,l,h,c[h],e,!Ve(c,h))}}return r}function Ya(e,t,n,i,s,o){const r=e[n];if(r!=null){const a=Ve(r,"default");if(a&&i===void 0){const l=r.default;if(r.type!==Function&&Ne(l)){const{propsDefaults:c}=s;n in c?i=c[n]:(ns(s),i=c[n]=l.call(null,t),Ti())}else i=l}r[0]&&(o&&!a?i=!1:r[1]&&(i===""||i===rs(n))&&(i=!0))}return i}function zd(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const o=e.props,r={},a=[];let l=!1;if(!Ne(e)){const u=h=>{l=!0;const[p,g]=zd(h,t,!0);Gt(r,p),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return ut(e)&&i.set(e,Vi),Vi;if(Ce(o))for(let u=0;u<o.length;u++){const h=Cn(o[u]);Oc(h)&&(r[h]=ct)}else if(o)for(const u in o){const h=Cn(u);if(Oc(h)){const p=o[u],g=r[h]=Ce(p)||Ne(p)?{type:p}:Object.assign({},p);if(g){const y=Dc(Boolean,g.type),b=Dc(String,g.type);g[0]=y>-1,g[1]=b<0||y<b,(y>-1||Ve(g,"default"))&&a.push(h)}}}const c=[r,a];return ut(e)&&i.set(e,c),c}function Oc(e){return e[0]!=="$"}function Lc(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Bc(e,t){return Lc(e)===Lc(t)}function Dc(e,t){return Ce(t)?t.findIndex(n=>Bc(n,e)):Ne(t)&&Bc(t,e)?0:-1}const Gd=e=>e[0]==="_"||e==="$stable",Hl=e=>Ce(e)?e.map(En):[En(e)],wm=(e,t,n)=>{if(t._n)return t;const i=wn((...s)=>Hl(t(...s)),n);return i._c=!1,i},Wd=(e,t,n)=>{const i=e._ctx;for(const s in e){if(Gd(s))continue;const o=e[s];if(Ne(o))t[s]=wm(s,o,i);else if(o!=null){const r=Hl(o);t[s]=()=>r}}},Vd=(e,t)=>{const n=Hl(t);e.slots.default=()=>n},Em=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=qe(t),ir(t,"_",n)):Wd(t,e.slots={})}else e.slots={},t&&Vd(e,t);ir(e.slots,Vr,1)},Im=(e,t,n)=>{const{vnode:i,slots:s}=e;let o=!0,r=ct;if(i.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:(Gt(s,t),!n&&a===1&&delete s._):(o=!t.$stable,Wd(t,s)),r=t}else t&&(Vd(e,t),r={default:1});if(o)for(const a in s)!Gd(a)&&!(a in r)&&delete s[a]};function jd(){return{app:null,config:{isNativeTag:Zp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let km=0;function Pm(e,t){return function(i,s=null){Ne(i)||(i=Object.assign({},i)),s!=null&&!ut(s)&&(s=null);const o=jd(),r=new Set;let a=!1;const l=o.app={_uid:km++,_component:i,_props:s,_container:null,_context:o,_instance:null,version:Km,get config(){return o.config},set config(c){},use(c,...u){return r.has(c)||(c&&Ne(c.install)?(r.add(c),c.install(l,...u)):Ne(c)&&(r.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,h){if(!a){const p=K(i,s);return p.appContext=o,u&&t?t(p,c):e(p,c,h),a=!0,l._container=c,c.__vue_app__=l,zl(p.component)||p.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l}};return l}}function Xa(e,t,n,i,s=!1){if(Ce(e)){e.forEach((p,g)=>Xa(p,t&&(Ce(t)?t[g]:t),n,i,s));return}if(Ts(i)&&!s)return;const o=i.shapeFlag&4?zl(i.component)||i.component.proxy:i.el,r=s?null:o,{i:a,r:l}=e,c=t&&t.r,u=a.refs===ct?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(kt(c)?(u[c]=null,Ve(h,c)&&(h[c]=null)):Lt(c)&&(c.value=null)),Ne(l))ei(l,a,12,[r,u]);else{const p=kt(l),g=Lt(l);if(p||g){const y=()=>{if(e.f){const b=p?Ve(h,l)?h[l]:u[l]:l.value;s?Ce(b)&&Al(b,o):Ce(b)?b.includes(o)||b.push(o):p?(u[l]=[o],Ve(h,l)&&(h[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else p?(u[l]=r,Ve(h,l)&&(h[l]=r)):g&&(l.value=r,e.k&&(u[e.k]=r))};r?(y.id=-1,jt(y,n)):y()}}}const jt=tm;function Am(e){return Tm(e)}function Tm(e,t){const n=rg();n.__VUE__=!0;const{insert:i,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:p,setScopeId:g=gn,insertStaticContent:y}=e,b=(T,R,F,j=null,q=null,ee=null,ae=!1,te=null,se=!!R.dynamicChildren)=>{if(T===R)return;T&&!ds(T,R)&&(j=wt(T),me(T,q,ee,!0),T=null),R.patchFlag===-2&&(se=!1,R.dynamicChildren=null);const{type:X,ref:he,shapeFlag:fe}=R;switch(X){case Wr:v(T,R,F,j);break;case oi:_(T,R,F,j);break;case aa:T==null&&E(R,F,j,ae);break;case ke:ye(T,R,F,j,q,ee,ae,te,se);break;default:fe&1?A(T,R,F,j,q,ee,ae,te,se):fe&6?de(T,R,F,j,q,ee,ae,te,se):(fe&64||fe&128)&&X.process(T,R,F,j,q,ee,ae,te,se,bt)}he!=null&&q&&Xa(he,T&&T.ref,ee,R||T,!R)},v=(T,R,F,j)=>{if(T==null)i(R.el=a(R.children),F,j);else{const q=R.el=T.el;R.children!==T.children&&c(q,R.children)}},_=(T,R,F,j)=>{T==null?i(R.el=l(R.children||""),F,j):R.el=T.el},E=(T,R,F,j)=>{[T.el,T.anchor]=y(T.children,R,F,j,T.el,T.anchor)},w=({el:T,anchor:R},F,j)=>{let q;for(;T&&T!==R;)q=p(T),i(T,F,j),T=q;i(R,F,j)},k=({el:T,anchor:R})=>{let F;for(;T&&T!==R;)F=p(T),s(T),T=F;s(R)},A=(T,R,F,j,q,ee,ae,te,se)=>{ae=ae||R.type==="svg",T==null?O(R,F,j,q,ee,ae,te,se):Z(T,R,q,ee,ae,te,se)},O=(T,R,F,j,q,ee,ae,te)=>{let se,X;const{type:he,props:fe,shapeFlag:be,transition:ve,dirs:Re}=T;if(se=T.el=r(T.type,ee,fe&&fe.is,fe),be&8?u(se,T.children):be&16&&W(T.children,se,null,j,q,ee&&he!=="foreignObject",ae,te),Re&&hi(T,null,j,"created"),G(se,T,T.scopeId,ae,j),fe){for(const f in fe)f!=="value"&&!Bo(f)&&o(se,f,null,fe[f],ee,T.children,j,q,Ye);"value"in fe&&o(se,"value",null,fe.value),(X=fe.onVnodeBeforeMount)&&_n(X,j,T)}Re&&hi(T,null,j,"beforeMount");const S=(!q||q&&!q.pendingBranch)&&ve&&!ve.persisted;S&&ve.beforeEnter(se),i(se,R,F),((X=fe&&fe.onVnodeMounted)||S||Re)&&jt(()=>{X&&_n(X,j,T),S&&ve.enter(se),Re&&hi(T,null,j,"mounted")},q)},G=(T,R,F,j,q)=>{if(F&&g(T,F),j)for(let ee=0;ee<j.length;ee++)g(T,j[ee]);if(q){let ee=q.subTree;if(R===ee){const ae=q.vnode;G(T,ae,ae.scopeId,ae.slotScopeIds,q.parent)}}},W=(T,R,F,j,q,ee,ae,te,se=0)=>{for(let X=se;X<T.length;X++){const he=T[X]=te?Kn(T[X]):En(T[X]);b(null,he,R,F,j,q,ee,ae,te)}},Z=(T,R,F,j,q,ee,ae)=>{const te=R.el=T.el;let{patchFlag:se,dynamicChildren:X,dirs:he}=R;se|=T.patchFlag&16;const fe=T.props||ct,be=R.props||ct;let ve;F&&di(F,!1),(ve=be.onVnodeBeforeUpdate)&&_n(ve,F,R,T),he&&hi(R,T,F,"beforeUpdate"),F&&di(F,!0);const Re=q&&R.type!=="foreignObject";if(X?Y(T.dynamicChildren,X,te,F,j,Re,ee):ae||re(T,R,te,null,F,j,Re,ee,!1),se>0){if(se&16)Q(te,R,fe,be,F,j,q);else if(se&2&&fe.class!==be.class&&o(te,"class",null,be.class,q),se&4&&o(te,"style",fe.style,be.style,q),se&8){const S=R.dynamicProps;for(let f=0;f<S.length;f++){const m=S[f],P=fe[m],x=be[m];(x!==P||m==="value")&&o(te,m,P,x,q,T.children,F,j,Ye)}}se&1&&T.children!==R.children&&u(te,R.children)}else!ae&&X==null&&Q(te,R,fe,be,F,j,q);((ve=be.onVnodeUpdated)||he)&&jt(()=>{ve&&_n(ve,F,R,T),he&&hi(R,T,F,"updated")},j)},Y=(T,R,F,j,q,ee,ae)=>{for(let te=0;te<R.length;te++){const se=T[te],X=R[te],he=se.el&&(se.type===ke||!ds(se,X)||se.shapeFlag&70)?h(se.el):F;b(se,X,he,null,j,q,ee,ae,!0)}},Q=(T,R,F,j,q,ee,ae)=>{if(F!==j){if(F!==ct)for(const te in F)!Bo(te)&&!(te in j)&&o(T,te,F[te],null,ae,R.children,q,ee,Ye);for(const te in j){if(Bo(te))continue;const se=j[te],X=F[te];se!==X&&te!=="value"&&o(T,te,X,se,ae,R.children,q,ee,Ye)}"value"in j&&o(T,"value",F.value,j.value)}},ye=(T,R,F,j,q,ee,ae,te,se)=>{const X=R.el=T?T.el:a(""),he=R.anchor=T?T.anchor:a("");let{patchFlag:fe,dynamicChildren:be,slotScopeIds:ve}=R;ve&&(te=te?te.concat(ve):ve),T==null?(i(X,F,j),i(he,F,j),W(R.children,F,he,q,ee,ae,te,se)):fe>0&&fe&64&&be&&T.dynamicChildren?(Y(T.dynamicChildren,be,F,q,ee,ae,te),(R.key!=null||q&&R===q.subTree)&&Kd(T,R,!0)):re(T,R,F,he,q,ee,ae,te,se)},de=(T,R,F,j,q,ee,ae,te,se)=>{R.slotScopeIds=te,T==null?R.shapeFlag&512?q.ctx.activate(R,F,j,ae,se):Le(R,F,j,q,ee,ae,se):Ie(T,R,se)},Le=(T,R,F,j,q,ee,ae)=>{const te=T.component=Dm(T,j,q);if(Ld(T)&&(te.ctx.renderer=bt),Fm(te),te.asyncDep){if(q&&q.registerDep(te,Ee),!T.el){const se=te.subTree=K(oi);_(null,se,R,F)}return}Ee(te,T,R,F,q,ee,ae)},Ie=(T,R,F)=>{const j=R.component=T.component;if(Qg(T,R,F))if(j.asyncDep&&!j.asyncResolved){ne(j,R,F);return}else j.next=R,jg(j.update),j.update();else R.el=T.el,j.vnode=R},Ee=(T,R,F,j,q,ee,ae)=>{const te=()=>{if(T.isMounted){let{next:he,bu:fe,u:be,parent:ve,vnode:Re}=T,S=he,f;di(T,!1),he?(he.el=Re.el,ne(T,he,ae)):he=Re,fe&&sa(fe),(f=he.props&&he.props.onVnodeBeforeUpdate)&&_n(f,ve,he,Re),di(T,!0);const m=oa(T),P=T.subTree;T.subTree=m,b(P,m,h(P.el),wt(P),T,q,ee),he.el=m.el,S===null&&Zg(T,m.el),be&&jt(be,q),(f=he.props&&he.props.onVnodeUpdated)&&jt(()=>_n(f,ve,he,Re),q)}else{let he;const{el:fe,props:be}=R,{bm:ve,m:Re,parent:S}=T,f=Ts(R);if(di(T,!1),ve&&sa(ve),!f&&(he=be&&be.onVnodeBeforeMount)&&_n(he,S,R),di(T,!0),fe&&sn){const m=()=>{T.subTree=oa(T),sn(fe,T.subTree,T,q,null)};f?R.type.__asyncLoader().then(()=>!T.isUnmounted&&m()):m()}else{const m=T.subTree=oa(T);b(null,m,F,j,T,q,ee),R.el=m.el}if(Re&&jt(Re,q),!f&&(he=be&&be.onVnodeMounted)){const m=R;jt(()=>_n(he,S,m),q)}(R.shapeFlag&256||S&&Ts(S.vnode)&&S.vnode.shapeFlag&256)&&T.a&&jt(T.a,q),T.isMounted=!0,R=F=j=null}},se=T.effect=new xl(te,()=>Fl(X),T.scope),X=T.update=()=>se.run();X.id=T.uid,di(T,!0),X()},ne=(T,R,F)=>{R.component=T;const j=T.vnode.props;T.vnode=R,T.next=null,Sm(T,R.props,j,F),Im(T,R.children,F),as(),Cc(),ls()},re=(T,R,F,j,q,ee,ae,te,se=!1)=>{const X=T&&T.children,he=T?T.shapeFlag:0,fe=R.children,{patchFlag:be,shapeFlag:ve}=R;if(be>0){if(be&128){Oe(X,fe,F,j,q,ee,ae,te,se);return}else if(be&256){oe(X,fe,F,j,q,ee,ae,te,se);return}}ve&8?(he&16&&Ye(X,q,ee),fe!==X&&u(F,fe)):he&16?ve&16?Oe(X,fe,F,j,q,ee,ae,te,se):Ye(X,q,ee,!0):(he&8&&u(F,""),ve&16&&W(fe,F,j,q,ee,ae,te,se))},oe=(T,R,F,j,q,ee,ae,te,se)=>{T=T||Vi,R=R||Vi;const X=T.length,he=R.length,fe=Math.min(X,he);let be;for(be=0;be<fe;be++){const ve=R[be]=se?Kn(R[be]):En(R[be]);b(T[be],ve,F,null,q,ee,ae,te,se)}X>he?Ye(T,q,ee,!0,!1,fe):W(R,F,j,q,ee,ae,te,se,fe)},Oe=(T,R,F,j,q,ee,ae,te,se)=>{let X=0;const he=R.length;let fe=T.length-1,be=he-1;for(;X<=fe&&X<=be;){const ve=T[X],Re=R[X]=se?Kn(R[X]):En(R[X]);if(ds(ve,Re))b(ve,Re,F,null,q,ee,ae,te,se);else break;X++}for(;X<=fe&&X<=be;){const ve=T[fe],Re=R[be]=se?Kn(R[be]):En(R[be]);if(ds(ve,Re))b(ve,Re,F,null,q,ee,ae,te,se);else break;fe--,be--}if(X>fe){if(X<=be){const ve=be+1,Re=ve<he?R[ve].el:j;for(;X<=be;)b(null,R[X]=se?Kn(R[X]):En(R[X]),F,Re,q,ee,ae,te,se),X++}}else if(X>be)for(;X<=fe;)me(T[X],q,ee,!0),X++;else{const ve=X,Re=X,S=new Map;for(X=Re;X<=be;X++){const Be=R[X]=se?Kn(R[X]):En(R[X]);Be.key!=null&&S.set(Be.key,X)}let f,m=0;const P=be-Re+1;let x=!1,L=0;const z=new Array(P);for(X=0;X<P;X++)z[X]=0;for(X=ve;X<=fe;X++){const Be=T[X];if(m>=P){me(Be,q,ee,!0);continue}let Fe;if(Be.key!=null)Fe=S.get(Be.key);else for(f=Re;f<=be;f++)if(z[f-Re]===0&&ds(Be,R[f])){Fe=f;break}Fe===void 0?me(Be,q,ee,!0):(z[Fe-Re]=X+1,Fe>=L?L=Fe:x=!0,b(Be,R[Fe],F,null,q,ee,ae,te,se),m++)}const Me=x?Cm(z):Vi;for(f=Me.length-1,X=P-1;X>=0;X--){const Be=Re+X,Fe=R[Be],st=Be+1<he?R[Be+1].el:j;z[X]===0?b(null,Fe,F,st,q,ee,ae,te,se):x&&(f<0||X!==Me[f]?Pe(Fe,F,st,2):f--)}}},Pe=(T,R,F,j,q=null)=>{const{el:ee,type:ae,transition:te,children:se,shapeFlag:X}=T;if(X&6){Pe(T.component.subTree,R,F,j);return}if(X&128){T.suspense.move(R,F,j);return}if(X&64){ae.move(T,R,F,bt);return}if(ae===ke){i(ee,R,F);for(let fe=0;fe<se.length;fe++)Pe(se[fe],R,F,j);i(T.anchor,R,F);return}if(ae===aa){w(T,R,F);return}if(j!==2&&X&1&&te)if(j===0)te.beforeEnter(ee),i(ee,R,F),jt(()=>te.enter(ee),q);else{const{leave:fe,delayLeave:be,afterLeave:ve}=te,Re=()=>i(ee,R,F),S=()=>{fe(ee,()=>{Re(),ve&&ve()})};be?be(ee,Re,S):S()}else i(ee,R,F)},me=(T,R,F,j=!1,q=!1)=>{const{type:ee,props:ae,ref:te,children:se,dynamicChildren:X,shapeFlag:he,patchFlag:fe,dirs:be}=T;if(te!=null&&Xa(te,null,F,T,!0),he&256){R.ctx.deactivate(T);return}const ve=he&1&&be,Re=!Ts(T);let S;if(Re&&(S=ae&&ae.onVnodeBeforeUnmount)&&_n(S,R,T),he&6)mt(T.component,F,j);else{if(he&128){T.suspense.unmount(F,j);return}ve&&hi(T,null,R,"beforeUnmount"),he&64?T.type.remove(T,R,F,q,bt,j):X&&(ee!==ke||fe>0&&fe&64)?Ye(X,R,F,!1,!0):(ee===ke&&fe&384||!q&&he&16)&&Ye(se,R,F),j&&it(T)}(Re&&(S=ae&&ae.onVnodeUnmounted)||ve)&&jt(()=>{S&&_n(S,R,T),ve&&hi(T,null,R,"unmounted")},F)},it=T=>{const{type:R,el:F,anchor:j,transition:q}=T;if(R===ke){lt(F,j);return}if(R===aa){k(T);return}const ee=()=>{s(F),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(T.shapeFlag&1&&q&&!q.persisted){const{leave:ae,delayLeave:te}=q,se=()=>ae(F,ee);te?te(T.el,ee,se):se()}else ee()},lt=(T,R)=>{let F;for(;T!==R;)F=p(T),s(T),T=F;s(R)},mt=(T,R,F)=>{const{bum:j,scope:q,update:ee,subTree:ae,um:te}=T;j&&sa(j),q.stop(),ee&&(ee.active=!1,me(ae,T,R,F)),te&&jt(te,R),jt(()=>{T.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Ye=(T,R,F,j=!1,q=!1,ee=0)=>{for(let ae=ee;ae<T.length;ae++)me(T[ae],R,F,j,q)},wt=T=>T.shapeFlag&6?wt(T.component.subTree):T.shapeFlag&128?T.suspense.next():p(T.anchor||T.el),Ke=(T,R,F)=>{T==null?R._vnode&&me(R._vnode,null,null,!0):b(R._vnode||null,T,R,null,null,null,F),Cc(),Md(),R._vnode=T},bt={p:b,um:me,m:Pe,r:it,mt:Le,mc:W,pc:re,pbc:Y,n:wt,o:e};let xe,sn;return t&&([xe,sn]=t(bt)),{render:Ke,hydrate:xe,createApp:Pm(Ke,xe)}}function di({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Kd(e,t,n=!1){const i=e.children,s=t.children;if(Ce(i)&&Ce(s))for(let o=0;o<i.length;o++){const r=i[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=Kn(s[o]),a.el=r.el),n||Kd(r,a)),a.type===Wr&&(a.el=r.el)}}function Cm(e){const t=e.slice(),n=[0];let i,s,o,r,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(s=n[n.length-1],e[s]<c){t[i]=s,n.push(i);continue}for(o=0,r=n.length-1;o<r;)a=o+r>>1,e[n[a]]<c?o=a+1:r=a;c<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}for(o=n.length,r=n[o-1];o-- >0;)n[o]=r,r=t[r];return n}const Mm=e=>e.__isTeleport,ke=Symbol(void 0),Wr=Symbol(void 0),oi=Symbol(void 0),aa=Symbol(void 0),Ms=[];let fn=null;function M(e=!1){Ms.push(fn=e?null:[])}function xm(){Ms.pop(),fn=Ms[Ms.length-1]||null}let Vs=1;function Fc(e){Vs+=e}function qd(e){return e.dynamicChildren=Vs>0?fn||Vi:null,xm(),Vs>0&&fn&&fn.push(e),e}function N(e,t,n,i,s,o){return qd(d(e,t,n,i,s,o,!0))}function He(e,t,n,i,s){return qd(K(e,t,n,i,s,!0))}function ar(e){return e?e.__v_isVNode===!0:!1}function ds(e,t){return e.type===t.type&&e.key===t.key}const Vr="__vInternal",Yd=({key:e})=>e??null,Fo=({ref:e,ref_key:t,ref_for:n})=>e!=null?kt(e)||Lt(e)||Ne(e)?{i:zt,r:e,k:t,f:!!n}:e:null;function d(e,t=null,n=null,i=0,s=null,o=e===ke?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yd(t),ref:t&&Fo(t),scopeId:zr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:zt};return a?(Ul(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=kt(n)?8:16),Vs>0&&!r&&fn&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&fn.push(l),l}const K=Rm;function Rm(e,t=null,n=null,i=0,s=null,o=!1){if((!e||e===dm)&&(e=oi),ar(e)){const a=ts(e,t,!0);return n&&Ul(a,n),Vs>0&&!o&&fn&&(a.shapeFlag&6?fn[fn.indexOf(e)]=a:fn.push(a)),a.patchFlag|=-2,a}if(Gm(e)&&(e=e.__vccOpts),t){t=Nm(t);let{class:a,style:l}=t;a&&!kt(a)&&(t.class=Ze(a)),ut(l)&&(wd(l)&&!Ce(l)&&(l=Gt({},l)),t.style=_e(l))}const r=kt(e)?1:em(e)?128:Mm(e)?64:ut(e)?4:Ne(e)?2:0;return d(e,t,n,i,s,r,o,!0)}function Nm(e){return e?wd(e)||Vr in e?Gt({},e):e:null}function ts(e,t,n=!1){const{props:i,ref:s,patchFlag:o,children:r}=e,a=t?Om(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Yd(a),ref:t&&t.ref?n&&s?Ce(s)?s.concat(Fo(t)):[s,Fo(t)]:Fo(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ke?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ts(e.ssContent),ssFallback:e.ssFallback&&ts(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ro(e=" ",t=0){return K(Wr,null,e,t)}function ie(e="",t=!1){return t?(M(),He(oi,null,e)):K(oi,null,e)}function En(e){return e==null||typeof e=="boolean"?K(oi):Ce(e)?K(ke,null,e.slice()):typeof e=="object"?Kn(e):K(Wr,null,String(e))}function Kn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ts(e)}function Ul(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Ce(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Ul(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Vr in t)?t._ctx=zt:s===3&&zt&&(zt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ne(t)?(t={default:t,_ctx:zt},n=32):(t=String(t),i&64?(n=16,t=[ro(t)]):n=8);e.children=t,e.shapeFlag|=n}function Om(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Ze([t.class,i.class]));else if(s==="style")t.style=_e([t.style,i.style]);else if(Lr(s)){const o=t[s],r=i[s];r&&o!==r&&!(Ce(o)&&o.includes(r))&&(t[s]=o?[].concat(o,r):r)}else s!==""&&(t[s]=i[s])}return t}function _n(e,t,n,i=null){mn(e,t,7,[n,i])}const Lm=jd();let Bm=0;function Dm(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||Lm,o={uid:Bm++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ag(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zd(i,s),emitsOptions:Rd(i,s),emit:null,emitted:null,propsDefaults:ct,inheritAttrs:i.inheritAttrs,ctx:ct,data:ct,props:ct,attrs:ct,slots:ct,refs:ct,setupState:ct,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Yg.bind(null,o),e.ce&&e.ce(o),o}let vt=null;const ns=e=>{vt=e,e.scope.on()},Ti=()=>{vt&&vt.scope.off(),vt=null};function Xd(e){return e.vnode.shapeFlag&4}let js=!1;function Fm(e,t=!1){js=t;const{props:n,children:i}=e.vnode,s=Xd(e);vm(e,n,s,t),Em(e,i);const o=s?$m(e,t):void 0;return js=!1,o}function $m(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ed(new Proxy(e.ctx,pm));const{setup:i}=n;if(i){const s=e.setupContext=i.length>1?Um(e):null;ns(e),as();const o=ei(i,e,0,[e.props,s]);if(ls(),Ti(),ld(o)){if(o.then(Ti,Ti),t)return o.then(r=>{$c(e,r,t)}).catch(r=>{Hr(r,e,0)});e.asyncDep=o}else $c(e,o,t)}else Jd(e,t)}function $c(e,t,n){Ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ut(t)&&(e.setupState=Pd(t)),Jd(e,n)}let Hc;function Jd(e,t,n){const i=e.type;if(!e.render){if(!t&&Hc&&!i.render){const s=i.template||$l(e).template;if(s){const{isCustomElement:o,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Gt(Gt({isCustomElement:o,delimiters:a},r),l);i.render=Hc(s,c)}}e.render=i.render||gn}ns(e),as(),gm(e),ls(),Ti()}function Hm(e){return new Proxy(e.attrs,{get(t,n){return Yt(e,"get","$attrs"),t[n]}})}function Um(e){const t=i=>{e.exposed=i||{}};let n;return{get attrs(){return n||(n=Hm(e))},slots:e.slots,emit:e.emit,expose:t}}function zl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Pd(Ed(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Cs)return Cs[n](e)},has(t,n){return n in t||n in Cs}}))}function zm(e,t=!0){return Ne(e)?e.displayName||e.name:e.name||t&&e.__name}function Gm(e){return Ne(e)&&"__vccOpts"in e}const Ae=(e,t)=>zg(e,t,js);function Wm(e,t,n){const i=arguments.length;return i===2?ut(t)&&!Ce(t)?ar(t)?K(e,null,[t]):K(e,t):K(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ar(n)&&(n=[n]),K(e,t,n))}const Vm=Symbol(""),jm=()=>Do(Vm),Km="3.2.47",qm="http://www.w3.org/2000/svg",Ei=typeof document<"u"?document:null,Uc=Ei&&Ei.createElement("template"),Ym={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t?Ei.createElementNS(qm,e):Ei.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>Ei.createTextNode(e),createComment:e=>Ei.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ei.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,o){const r=n?n.previousSibling:t.lastChild;if(s&&(s===o||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{Uc.innerHTML=i?`<svg>${e}</svg>`:e;const a=Uc.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Xm(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Jm(e,t,n){const i=e.style,s=kt(n);if(n&&!s){if(t&&!kt(t))for(const o in t)n[o]==null&&Ja(i,o,"");for(const o in n)Ja(i,o,n[o])}else{const o=i.display;s?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=o)}}const zc=/\s*!important$/;function Ja(e,t,n){if(Ce(n))n.forEach(i=>Ja(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Qm(e,t);zc.test(n)?e.setProperty(rs(i),n.replace(zc,""),"important"):e[i]=n}}const Gc=["Webkit","Moz","ms"],la={};function Qm(e,t){const n=la[t];if(n)return n;let i=Cn(t);if(i!=="filter"&&i in e)return la[t]=i;i=Fr(i);for(let s=0;s<Gc.length;s++){const o=Gc[s]+i;if(o in e)return la[t]=o}return t}const Wc="http://www.w3.org/1999/xlink";function Zm(e,t,n,i,s){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Wc,t.slice(6,t.length)):e.setAttributeNS(Wc,t,n);else{const o=Qp(t);n==null||o&&!od(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function e0(e,t,n,i,s,o,r){if(t==="innerHTML"||t==="textContent"){i&&r(i,s,o),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n??"";(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=od(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(t)}function t0(e,t,n,i){e.addEventListener(t,n,i)}function n0(e,t,n,i){e.removeEventListener(t,n,i)}function i0(e,t,n,i,s=null){const o=e._vei||(e._vei={}),r=o[t];if(i&&r)r.value=i;else{const[a,l]=s0(t);if(i){const c=o[t]=a0(i,s);t0(e,a,c,l)}else r&&(n0(e,a,r,l),o[t]=void 0)}}const Vc=/(?:Once|Passive|Capture)$/;function s0(e){let t;if(Vc.test(e)){t={};let i;for(;i=e.match(Vc);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):rs(e.slice(2)),t]}let ca=0;const o0=Promise.resolve(),r0=()=>ca||(o0.then(()=>ca=0),ca=Date.now());function a0(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;mn(l0(i,n.value),t,5,[i])};return n.value=e,n.attached=r0(),n}function l0(e,t){if(Ce(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const jc=/^on[a-z]/,c0=(e,t,n,i,s=!1,o,r,a,l)=>{t==="class"?Xm(e,i,s):t==="style"?Jm(e,n,i):Lr(t)?Pl(t)||i0(e,t,n,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):u0(e,t,i,s))?e0(e,t,i,o,r,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Zm(e,t,i,s))};function u0(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&jc.test(t)&&Ne(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||jc.test(t)&&kt(n)?!1:t in e}const h0=Gt({patchProp:c0},Ym);let Kc;function d0(){return Kc||(Kc=Am(h0))}const f0=(...e)=>{const t=d0().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=p0(i);if(!s)return;const o=t._component;!Ne(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const r=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},t};function p0(e){return kt(e)?document.querySelector(e):e}function lr(e,t){return(e?qc(e):"")+qc(t)}function qc(e){return e+(e.endsWith(`
`)?"":`
`)}function Qd(e){return e instanceof Error?e.message:e instanceof Object?JSON.stringify(e):String(e)}function Yc(e,t,n){return t===0?"0%":(e/t*100).toFixed(n)+"%"}function g0(e){switch(e%100){case 11:case 12:case 13:return e+"th"}switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}function cr(e,t){const n=e.toLowerCase();return t.every(i=>n.includes(i.toLowerCase()))}var Ri=(e=>(e.JA="ja",e.EN="en",e))(Ri||{});const Qa={electronShogi:"Electron",clear:"",open:"",saveOverwrite:"",newRecord:"",newRecordWithBrackets:"",openRecord:"",saveRecord:"",saveRecordAs:"",openAutoSavingDirectory:"",exportPositionImage:"",positionImage:"",close:"",quit:"",editing:"",copyAsKIF:"KIF",copyAsCSA:"CSA",copyAsUSI:"USI",copyAsSFEN:"SFEN",paste:"",copyRecord:"",asKIF:"KIF",asCSA:"CSA",asUSIUntilCurrentMove:"USI()",asUSIAll:"USI()",copyPositionAsSFEN:"(SFEN)",pasteRecordOrPosition:"",appendSpecialMove:"",deleteMoves:"",view:"",toggleFullScreen:"",defaultFontSize:"",largerFontSize:"",smallerFontSize:"",settings:"",config:"",debug:"",toggleDevTools:"",openAppDirectory:"",openSettingDirectory:"",openLogDirectory:"",help:"",openWebSite:"Web",howToUse:"",checkForUpdates:"",game:"",player:"",selectFromHistory:"",noHistory:"",saveHistory:"",version:"",gameProgress:"",allGamesCompleted:"",gameEnded:"",offlineGame:"",csaOnlineGame:"CSA",csaProtocolOnlineGame:"CSA",csaProtocolV121:"CSA1.2.1 ",csaProtocolV121WithPVComment:"CSA1.2.1 ",hostToConnect:"",portNumber:"",password:"",showPassword:"",logout:"",displayGameResults:"",interrupt:"",stopGame:"",resign:"",draw:"",impass:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:"",winByDeclaration:"",declareWinning:"",research:"",startResearch:"",endResearch:"",recordAnalysis:"",analysis:"",analyze:"",stopAnalysis:"",setupPosition:"",startPositionSetup:"",completePositionSetup:"",changeTurn:"",initializePosition:"",appSettings:"",language:"",theme:"",standard:"",standardGreen:"",green:"",cherryBlossom:"",customImage:"",autumn:"",snow:"",dark:"",piece:"",singleKanjiPiece:"",singleKanjiGothicPiece:"",singleKanjiDarkPiece:"",singleKanjiGothicDarkPiece:"",backgroundImage:"",board:"",pieceStand:"",lightWoodyTexture:"",warmWoodTexture:"",regin:"",displayFileAndRank:"",displayLeftControls:"",displayRightControls:"",tabViewStyle:"",oneColumn:"1",twoColumns:"2",sounds:"",pieceLoudness:"",clockLoudness:"",clockPitch:"",clockSoundTarget:"",anyTurn:"",onlyHumanTurn:"",newlineCharacter:"",old90sMac:"90Mac",autoSavingDirectory:"",select:"",usiProtocol:"USI",translateOptionName:"",functionalOnJapaneseOnly:"",maxStartupTime:"",forDevelopers:"",enableAppLog:"",enableUSILog:"USI",enableCSALog:"CSA",logLevel:"",engineSettings:"",flipBoard:"",file:"",recordFile:"",executableFile:"",imageFile:"",remove:"",deleteMove:"",recordProperties:"",comments:"",moveComments:"",searchLog:"",pv:"",mateShort:"",displayPVShort:"",evaluation:"",eval:"",estimatedWinRate:"",evaluationAndEstimatedWinRate:"",swapEachTurnChange:"",alwaysSenteIsPositive:"",signOfEvaluation:"",winRateCoefficient:"",hideTabView:"",expandTabView:"",sente:"",senteOrShitate:"",gote:"",goteOrUwate:"",swapSenteGote:"",currentPosition:"",time:"",enableEngineTimeout:"",others:"",nextTurn:"",elapsedTime:"",elapsed:"",rank:"",depth:"",searchEngine:"",ponder:"(Ponder)",numberOfThreads:"",multiPV:"PV",startPosition:"",maxMoves:"",gameRepetition:"",autoRelogin:"",swapTurnWhenGameRepetition:"1",outputComments:"",saveRecordAutomatically:"",adjustBoardToHumanPlayer:"",adjustBoardAutomatically:"",startGame:"",startCriteria:"",endCriteria:"",endCriteria1Move:"",outputSettings:"",noOutputs:"",insertCommentToTop:"",appendCommentToBottom:"",overwrite:"",fromPrefix:"",fromSuffix:"",toPrefix:"",toSuffix:"",plySuffix:"",hoursSuffix:"",minutesSuffix:"",secondsSuffix:"",engineManagement:"",engineName:"",author:"",enginePath:"",openDirectory:"",displayName:"",invoke:"",resetToEngineDefaultValues:"",defaultValue:"",noEngineRegistered:"",duplicate:"",add:"",recommended:"",import:"",saveAndClose:"",save:"",saveAs:"",cancel:"",back:"",name:"",prediction:"",best:"",nodes:"Node",hashUsage:"Hash",nonHandicap:"",lanceHandicap:"",rightLanceHandicap:"",bishopHandicap:"",rookHandicap:"",rookLanceHandicap:"",twoPiecesHandicap:"",fourPiecesHandicap:"",sixPiecesHandicap:"",eightPiecesHandicap:"",tsumeShogi:"",doubleKingTsumeShogi:"",startDateTime:"",endDateTime:"",gameDate:"",tournament:"",strategy:"",gameTitle:"",timeLimit:"",place:"",postedOn:"",note:"",senteShortName:"",goteShortName:"",opusNo:"",opusName:"",publishedBy:"",publishedOn:"",source:"",numberOfMoves:"",integrity:"",recordCategory:"",award:"",filterByOptionName:"",filterByEngineName:"",bookStyle:"",gameStyle:"",none:"",bgCover:"1",bgContain:"",bgTile:"",typeCustomTitleHere:"",inBrowserLogsOutputToConsoleAndIgnoreThisSetting:"",shouldRestartToApplyLogSettings:"",canOpenLogDirectoryFromMenu:"-",hasNoOldLogCleanUpFeature:"",processingPleaseWait:"",importingFollowingRecordOrPosition:"()",supportsKIFCSAUSI:"KIF/CSA/SFEN",plesePasteRecordIntoTextArea:"",desktopVersionPastesAutomatically:"",someLogsDisabled:"",logsRecommendedForCSAProtocol:"CSA",pleaseEnableLogsAndRestart:"",notSendPVOnStandardCSAProtocol:"CSA",sendPVDoNotUseOnWCSC:"FloodgateWCSC",csaProtocolSendPlaintextPassword:"CSA",passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable:"OS",pleaseUncheckSaveHistoryIfNotWantSave:"",csaProtocolSendPlaintextPasswordRegardlessOfHistory:"CSA",areYouSureWantToQuitGames:"",areYouSureWantToRequestQuit:"",areYouSureWantToClearRecord:"",areYouSureWantToDiscardPosition:"",youCanNotCloseAppWhileCSAOnlineGame:"CSA",fileExtensionNotSupported:"",errorOccuredWhileDisconnectingFromCSAServer:"CSA",failedToConnectToCSAServer:"CSA",disconnectedFromCSAServer:"CSA",csaServerLoginDenied:"CSA",thisFeatureNotAvailableOnWebApp:"Web",failedToSendGoCommand:"go",failedToSendPonderCommand:"ponder",failedToSendStopCommand:"stop",failedToSaveRecord:"",failedToParseSFEN:"SFEN",failedToDetectRecordFormat:"",unknownFileExtension:"",emptyRecordInput:"",invalidPieceName:"",invalidTurn:"",invalidMove:"",invalidMoveNumber:"",invalidDestination:"",pieceNotExists:"",invalidLine:"",invalidHandicap:"",invalidBoard:"",invalidHandPiece:"",invalidUSI:"USI",backgroundImageFileNotSelected:"",boardImageFileNotSelected:"",pieceStandImageFileNotSelected:"",pieceVolumeMustBe0To100Percent:"0%100%",clockVolumeMustBe0To100Percent:"0%100%",clockPitchMustBe220To880Hz:"220Hz880Hz",engineTimeoutMustBe1To300Seconds:"1300",coefficientInSigmoidMustBeGreaterThan0:"0",errorsOccurred:e=>`${e} `,between:(e,t)=>`${e}  ${t} `,addNthEngine:e=>`${e} `,copyOf:e=>`${e} `,keepLatest:e=>`${e}`,areYouSureWantToDeleteFollowingMove:e=>`${e}`,failedToOpenDirectory:e=>`: ${e}`,unexpectedEventSenderPleaseReport(e){return` [${e}]`},unexpectedHTTPMethodPleaseReport(e){return`HTTP [${e}]`},unexpectedRequestURLPleaseReport(e){return`URL [${e}]`},noResponseFromEnginePleaseExtendTimeout(e){return`${e}`}},m0={electronShogi:"Electron Shogi",clear:"Clear",open:"Open",saveOverwrite:"Overwrite",newRecord:"New Record",newRecordWithBrackets:"(New Record)",openRecord:"Open Record",saveRecord:"Save Record",saveRecordAs:"Save Record As",openAutoSavingDirectory:"Open Auto-Saving Directory",exportPositionImage:"Export Position Image",positionImage:"Position Image",close:"Close",quit:"Quit",editing:"Edit",copyAsKIF:"Copy (KIF)",copyAsCSA:"Copy (CSA)",copyAsUSI:"Copy (USI)",copyAsSFEN:"Copy (SFEN)",paste:"Paste",copyRecord:"Copy Record",asKIF:"as KIF",asCSA:"as CSA",asUSIUntilCurrentMove:"as USI (until current move)",asUSIAll:"as USI (all)",copyPositionAsSFEN:"Copy Position (as SFEN)",pasteRecordOrPosition:"Paste Record/Position",appendSpecialMove:"Append Special Move",deleteMoves:"Delete Current Move and Following Moves",view:"View",toggleFullScreen:"Toggle Full Screen",defaultFontSize:"Default Font Size",largerFontSize:"Larger Font Size",smallerFontSize:"Smaller Font Size",settings:"Settings",config:"Config",debug:"Debug",toggleDevTools:"Toggle Developer Tools",openAppDirectory:"Open App Directory",openSettingDirectory:"Open Setting Directory",openLogDirectory:"Open Log Directory",help:"Help",openWebSite:"Open Web Site",howToUse:"How to Use",checkForUpdates:"Check for Updates",game:"Game",player:"Player",selectFromHistory:"Select from History",noHistory:"Empty",saveHistory:"Save History",version:"Version",gameProgress:"Game Progress",allGamesCompleted:"All Games Completed",gameEnded:"Game Ended",offlineGame:"Offline Game",csaOnlineGame:"CSA Online Game",csaProtocolOnlineGame:"Online Game (CSA Protocol)",csaProtocolV121:"CSA Protocol 1.2.1 Standard",csaProtocolV121WithPVComment:"CSA Protocol 1.2.1 with PV Comment",hostToConnect:"Hostname",portNumber:"Port",password:"Password",showPassword:"Show Password",logout:"Logout",displayGameResults:"Display Results",interrupt:"Stop",stopGame:"Stop",resign:"Resign",draw:"Draw",impass:"Impass",repetitionDraw:"Repetition Draw",mate:"Mate",timeout:"Timeout",foulWin:"Foul Win",foulLose:"Foul Lose",enteringOfKing:"Entering of King",winByDefault:"Win by Default",loseByDefault:"Lose by Default",winByDeclaration:"Win by Declaration",declareWinning:"Declare Winning",research:"Research",startResearch:"Start Research",endResearch:"End Research",recordAnalysis:"Record Analysis",analysis:"Analyze",analyze:"Analyze",stopAnalysis:"Stop Analysis",setupPosition:"Setup Position",startPositionSetup:"Start Position Setup",completePositionSetup:"Complete Setup",changeTurn:"Change Turn",initializePosition:"Initialize Position",appSettings:"Preferences",language:"Languages",theme:"Theme",standard:"Standard",standardGreen:"Standard (Green)",green:"Green",cherryBlossom:"Cherry Blossom",customImage:"Custom Image",autumn:"Autumn",snow:"Snow",dark:"Dark",piece:"Piece",singleKanjiPiece:"Single Kanji",singleKanjiGothicPiece:"Single Kanji (Gothic)",singleKanjiDarkPiece:"Single Kanji (Dark)",singleKanjiGothicDarkPiece:"Single Kanji (Gothic, Dark)",backgroundImage:"Background Image",board:"Board Image",pieceStand:"Piece Stand",lightWoodyTexture:"Woody Texture (Light)",warmWoodTexture:"Woody Texture (Warm)",regin:"Regin",displayFileAndRank:"Display File & Rank",displayLeftControls:"Display Left Controls",displayRightControls:"Display Right Controls",tabViewStyle:"Tab View Style",oneColumn:"1 Column",twoColumns:"2 Columns",sounds:"Sounds",pieceLoudness:"Piece Loudness",clockLoudness:"Clock Loudness",clockPitch:"Clock Pitch",clockSoundTarget:"Clock Sound Target",anyTurn:"Any",onlyHumanTurn:"Human",newlineCharacter:"Newline Character",old90sMac:"90's Mac",autoSavingDirectory:"Auto-Saving Directory",select:"Select",usiProtocol:"USI Protocol",translateOptionName:"Translate Option Name",functionalOnJapaneseOnly:"Functional on Japanese Only",maxStartupTime:"Max Startup Time",forDevelopers:"For Developers",enableAppLog:"Enable App Log",enableUSILog:"Enable USI Log",enableCSALog:"Enable CSA Log",logLevel:"Log Level",engineSettings:"Engine Settings",flipBoard:"Flip Board",file:"File",recordFile:"Record File",executableFile:"Executable",imageFile:"Image",remove:"Remove",deleteMove:"Delete Move",recordProperties:"Record Properties",comments:"Comments",moveComments:"Move Comments",searchLog:"Search Log",pv:"PV",mateShort:"M",displayPVShort:"Play",evaluation:"Evaluation",eval:"Eval",estimatedWinRate:"Estimated Win Rate",evaluationAndEstimatedWinRate:"Evaluation & Estimated Win Rate",swapEachTurnChange:"Swap Each Turn Change",alwaysSenteIsPositive:"Always Sente is Positive",signOfEvaluation:"Sign of Evaluation",winRateCoefficient:"Win Rate Coefficient",hideTabView:"Hide",expandTabView:"Expand Tab View",sente:"Sente",senteOrShitate:"Sente (Shitate)",gote:"Gote",goteOrUwate:"Gote (Uwate)",swapSenteGote:"Swap Sente/Gote",currentPosition:"Current Position",time:"Time",enableEngineTimeout:"Enable Engine Timeout",others:"Others",nextTurn:"Next Move",elapsedTime:"Elapsed Time",elapsed:"Elapsed",rank:"Rank",depth:"Depth",searchEngine:"Search Engine",ponder:"Ponder",numberOfThreads:"Threads",multiPV:"Multi PV",startPosition:"Position",maxMoves:"Max Moves",gameRepetition:"Repeat",autoRelogin:"Auto Re-Login",swapTurnWhenGameRepetition:"Swap Turns When Repeat",outputComments:"Output Comments",saveRecordAutomatically:"Save Record Automatically",adjustBoardToHumanPlayer:"Adjust Board to Human Player",adjustBoardAutomatically:"Adjust Board Automatically",startGame:"Start Game",startCriteria:"Start Criteria",endCriteria:"End Criteria",endCriteria1Move:"End Criteria for 1 Move",outputSettings:"Output Settings",noOutputs:"No Outputs",insertCommentToTop:"Insert to Top",appendCommentToBottom:"Append to Bottom",overwrite:"Overwrite",fromPrefix:"from",fromSuffix:"",toPrefix:"to",toSuffix:"",plySuffix:"th move",hoursSuffix:"h",minutesSuffix:"min",secondsSuffix:"sec",engineManagement:"Engine Management",engineName:"Engine Name",author:"Author",enginePath:"Engine Path",openDirectory:"Open Directory",displayName:"Display Name",invoke:"Invoke",resetToEngineDefaultValues:"Reset to default values",defaultValue:"Default Value",noEngineRegistered:"No engine",duplicate:"Copy",add:"Add",recommended:"Recommended",import:"Import",saveAndClose:"Save & Close",save:"Save",saveAs:"Save As",cancel:"Cancel",back:"Back",name:"Name",prediction:"Prediction",best:"Best",nodes:"Nodes",hashUsage:"Hash Usage",nonHandicap:"Non-Handicap",lanceHandicap:"Lance Handicap",rightLanceHandicap:"Right Lance Handicap",bishopHandicap:"Bishop Handicap",rookHandicap:"Rook Handicap",rookLanceHandicap:"Rook-Lance Handicap",twoPiecesHandicap:"2 Pieces Handicap",fourPiecesHandicap:"4 Pieces Handicap",sixPiecesHandicap:"6 Pieces Handicap",eightPiecesHandicap:"8 Pieces Handicap",tsumeShogi:"Tsume Shogi",doubleKingTsumeShogi:"2-Kings Tsume Shogi",startDateTime:"Start",endDateTime:"End",gameDate:"Date",tournament:"Tournament",strategy:"Strategy",gameTitle:"Title",timeLimit:"Time Limit",place:"Place",postedOn:"Posted On",note:"Note",senteShortName:"Sente(short)",goteShortName:"Gote(short)",opusNo:"Opus No.",opusName:"Opus Name",publishedBy:"Published By",publishedOn:"Published On",source:"Source",numberOfMoves:"Number of Moves",integrity:"Integrity",recordCategory:"Category",award:"Award",filterByOptionName:"Filter by Option Name",filterByEngineName:"Filter by Engine Name",bookStyle:"Book Style",gameStyle:"Game Style",none:"None",bgCover:"Cover",bgContain:"Contain",bgTile:"Tile",typeCustomTitleHere:"Type custom title here",inBrowserLogsOutputToConsoleAndIgnoreThisSetting:"*In web browser version, it will output logs to console and ignore this setting.",shouldRestartToApplyLogSettings:"*You should restart this app to apply log settings.",canOpenLogDirectoryFromMenu:'*You can open log directory from "Debug" - "Open Log Directory" menu.',hasNoOldLogCleanUpFeature:"*This app has no clean-up feature. Please remove old logs manually.",processingPleaseWait:"Processing, please wait.",importingFollowingRecordOrPosition:"Importing the following record(or position).",supportsKIFCSAUSI:"*Supports KIF, CSA, USI.",plesePasteRecordIntoTextArea:"*Please paste record data into the text area.",desktopVersionPastesAutomatically:"*In desktop version, it will paste automatically from clipboard.",someLogsDisabled:"Some log settings are disabled.",logsRecommendedForCSAProtocol:"Log settings are recommended for CSA protocol.",pleaseEnableLogsAndRestart:"Please enable log settings and restart this app.",notSendPVOnStandardCSAProtocol:"Client do not send PV on standard CSA protocol.",sendPVDoNotUseOnWCSC:"Client send PV by floodgate extension. Do not use on WCSC.",csaProtocolSendPlaintextPassword:"On CSA protocol, client send plaintext password.",passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable:"Password will saved as plaintext because OS side encryption is not available.",pleaseUncheckSaveHistoryIfNotWantSave:"Please uncheck Save History, if you don't want to save.",csaProtocolSendPlaintextPasswordRegardlessOfHistory:"On CSA protocol, client send plaintext password regardless of history.",areYouSureWantToQuitGames:"Are you sure you want to quit games?",areYouSureWantToRequestQuit:"You have possibility to be loser. Are you sure you want to request quit?",areYouSureWantToClearRecord:"Are you sure you want to clear record?",areYouSureWantToDiscardPosition:"Are you sure you want to discard the position?",youCanNotCloseAppWhileCSAOnlineGame:"You can not close app while CSA online game.",fileExtensionNotSupported:"File extension is not supported.",errorOccuredWhileDisconnectingFromCSAServer:"An error occured while disconnecting from CSA server.",failedToConnectToCSAServer:"Failed to connect to CSA server.",disconnectedFromCSAServer:"Disconnected from CSA server.",csaServerLoginDenied:"CSA server login denied.",thisFeatureNotAvailableOnWebApp:"This feature is not available on web app.",failedToSendGoCommand:"Failed to send go-command.",failedToSendPonderCommand:"Failed to send ponder-command.",failedToSendStopCommand:"Failed to send stop-command.",failedToSaveRecord:"Failed to save record.",failedToParseSFEN:"Failed to parse SFEN.",failedToDetectRecordFormat:"Failed to detect record format.",unknownFileExtension:"Unknown file extension.",emptyRecordInput:"Empty record input.",invalidPieceName:"Invalid piece name",invalidTurn:"Invalid turn",invalidMove:"Invalid move",invalidMoveNumber:"Invalid move number",invalidDestination:"Invalid destination",pieceNotExists:"Piece not exists",invalidLine:"Invalid line",invalidHandicap:"Invalid handicap",invalidBoard:"Invalid board",invalidHandPiece:"Invalid hand piece",invalidUSI:"Invalid USI",backgroundImageFileNotSelected:"Background image file is not selected.",boardImageFileNotSelected:"Board image file is not selected.",pieceStandImageFileNotSelected:"Piece stand image file is not selected.",pieceVolumeMustBe0To100Percent:"Piece volume must be 0% to 100%.",clockVolumeMustBe0To100Percent:"Clock volume must be 0% to 100%.",clockPitchMustBe220To880Hz:"Clock pitch must be 220Hz to 880Hz.",engineTimeoutMustBe1To300Seconds:"Engine timeout must be 1 to 300 seconds.",coefficientInSigmoidMustBeGreaterThan0:"Coefficient in sigmoid must be greater than 0.",errorsOccurred:e=>e>=2?`${e} errors have occurred.`:`${e} error has occurred.`,between:(e,t)=>`between ${e} and ${t}`,addNthEngine:e=>`Add ${g0(e)} engine`,copyOf:e=>`${e} (copy)`,keepLatest:e=>`keep latest ${e}`,areYouSureWantToDeleteFollowingMove:e=>`Are you sure you want to delete ${e}th move and the following move?`,failedToOpenDirectory:e=>`Failed to open directory of the file: ${e}`,unexpectedEventSenderPleaseReport(e){return`Unexpected event sender. Please report this error message to developer. [${e}]`},unexpectedHTTPMethodPleaseReport(e){return`Unexpected HTTP method. Please report this error message to developer. [${e}]`},unexpectedRequestURLPleaseReport(e){return`Unexpected request URL. Please report this error message to developer. [${e}]`},noResponseFromEnginePleaseExtendTimeout(e){return`No response from engine while ${e} seconds. Please extend timeout at app settings, if your engine is slow.`}},U=Qa;function b0(e){switch(e){case Ri.JA:return Qa;case Ri.EN:return m0;default:return Qa}}function y0(e){Object.entries(b0(e)).forEach(([t,n])=>{U[t]=n})}const _0={USI_Ponder:"",Ponder:"",USI_Hash:"",Hash:"",Clear_Hash:"",Threads:"",NumberOfThreads:"",thread_num_per_gpu:"GPU",ThreadIdOffset:"ID",MultiPV:"PV",BookFile:"",Book_File:"",Book_Enable:"",BookEvalDiff:"",book_file_name:"",use_book:"",BookPvMoves:"PV",TinyBook:"",BookMoves:"",BookMaxPly:"",BookIgnoreRate:"",RandomBookSelect:"",IgnoreBookPly:"",DepthLimit:"",NarrowBook:"",WriteDebugLog:"",Write_Debug_Log:"",ResignValue:"",ResignScore:"",PvInterval:"PV",NodesLimit:"",USI_OwnBook:"",OwnBook:"",EvalDir:"",Eval_Dir:"",EvalFile:"",EvalHash:"",Eval_Hash:"",EvalSaveDir:"",EvalShare:"",BookDir:"",Stochastic_Ponder:"",MinimumThinkingTime:"",Minimum_Thinking_Time:"",MinThinkingTime:"",MaxMovesToDraw:"",SlowMover:"",Slow_Mover:"",OutputFailLHPV:"Fail Low/High",NetworkDelay:"",NetworkDelay2:"2",FV_SCALE:"",UseBook:"",MaxDepth:"",MarginMs:"",Time_Margin:"",ByoyomiMargin:"",Byoyomi_Margin:"",byoyomi_margin:"",Move_Overhead:"",FischerMargin:"",SuddenDeathMargin:"",Snappy:"",EnteringKingRule:"",Do_YoTsume_Search:"",gpu_num:"GPU",ConsiderationMode:"",ConsiderBookMoveCount:"",GenerateAllLegalMoves:"",DrawScore:"",DrawValue:"",DrawValueBlack:"",DrawValueWhite:"",LargePageEnable:"LargePage",SkillLevel:"",Skill_Level:""},$o={};function v0(e){switch(e){case Ri.JA:return _0;case Ri.EN:return{};default:return{}}}function S0(e){Object.keys($o).forEach(t=>{delete $o[t]}),Object.entries(v0(e)).forEach(([t,n])=>{$o[t]=n})}class jr extends Error{constructor(t){super(`Invalid piece name: ${t}`),this.data=t,this.name="InvalidPieceNameError"}}class Zd extends Error{constructor(t){super(`Invalid turn: ${t}`),this.data=t,this.name="InvalidTurnError"}}class Ks extends Error{constructor(t){super(`Invalid move: ${t}`),this.data=t,this.name="InvalidMoveError"}}class ef extends Error{constructor(t){super(`Invalid move number: ${t}`),this.data=t,this.name="InvalidMoveNumberError"}}class tf extends Error{constructor(t){super(`Invalid destination: ${t}`),this.data=t,this.name="InvalidDestinationError"}}class Za extends Error{constructor(t){super(`Piece not exists: ${t}`),this.data=t,this.name="PieceNotExistsError"}}class Gl extends Error{constructor(t){super(`Invalid line: ${t}`),this.data=t,this.name="InvalidLineError"}}class nf extends Error{constructor(t){super(`Invalid handicap: ${t}`),this.data=t,this.name="InvalidHandicapError"}}class el extends Error{constructor(t){super(`Invalid board: ${t}`),this.data=t,this.name="InvalidBoardError"}}class sf extends Error{constructor(t){super(`Invalid hand piece: ${t}`),this.data=t,this.name="InvalidHandPieceError"}}class vs extends Error{constructor(t){super(`Invalid USI: ${t}`),this.data=t,this.name="InvalidUSIError"}}var D=(e=>(e.BLACK="black",e.WHITE="white",e))(D||{});function Rt(e){return e==="black"?"white":"black"}function w0(e){return e==="black"?"b":"w"}function E0(e){return e==="b"||e==="w"}function I0(e){return e==="b"?"black":"white"}var B=(e=>(e.PAWN="pawn",e.LANCE="lance",e.KNIGHT="knight",e.SILVER="silver",e.GOLD="gold",e.BISHOP="bishop",e.ROOK="rook",e.KING="king",e.PROM_PAWN="promPawn",e.PROM_LANCE="promLance",e.PROM_KNIGHT="promKnight",e.PROM_SILVER="promSilver",e.HORSE="horse",e.DRAGON="dragon",e))(B||{});const k0=["pawn","lance","knight","silver","gold","bishop","rook"],P0={pawn:!0,lance:!0,knight:!0,silver:!0,gold:!1,bishop:!0,rook:!0,king:!1,promPawn:!1,promLance:!1,promKnight:!1,promSilver:!1,horse:!1,dragon:!1},of={pawn:"promPawn",lance:"promLance",knight:"promKnight",silver:"promSilver",bishop:"horse",rook:"dragon"};function A0(e){return of[e]||e}const T0={promPawn:"pawn",promLance:"lance",promKnight:"knight",promSilver:"silver",horse:"bishop",dragon:"rook"},rf={pawn:"P",lance:"L",knight:"N",silver:"S",gold:"G",bishop:"B",rook:"R",king:"K",promPawn:"+P",promLance:"+L",promKnight:"+N",promSilver:"+S",horse:"+B",dragon:"+R"};function C0(e){return rf[e]}const M0={pawn:"p",lance:"l",knight:"n",silver:"s",gold:"g",bishop:"b",rook:"r",king:"k",promPawn:"+p",promLance:"+l",promKnight:"+n",promSilver:"+s",horse:"+b",dragon:"+r"},Xc={P:"pawn",L:"lance",N:"knight",S:"silver",G:"gold",B:"bishop",R:"rook",K:"king","+P":"promPawn","+L":"promLance","+N":"promKnight","+S":"promSilver","+B":"horse","+R":"dragon",p:"pawn",l:"lance",n:"knight",s:"silver",g:"gold",b:"bishop",r:"rook",k:"king","+p":"promPawn","+l":"promLance","+n":"promKnight","+s":"promSilver","+b":"horse","+r":"dragon"},x0={P:D.BLACK,L:D.BLACK,N:D.BLACK,S:D.BLACK,G:D.BLACK,B:D.BLACK,R:D.BLACK,K:D.BLACK,"+P":D.BLACK,"+L":D.BLACK,"+N":D.BLACK,"+S":D.BLACK,"+B":D.BLACK,"+R":D.BLACK,p:D.WHITE,l:D.WHITE,n:D.WHITE,s:D.WHITE,g:D.WHITE,b:D.WHITE,r:D.WHITE,k:D.WHITE,"+p":D.WHITE,"+l":D.WHITE,"+n":D.WHITE,"+s":D.WHITE,"+b":D.WHITE,"+r":D.WHITE},Wt=new Map;Wt.set("pawn",{type:"promPawn",reverseColor:!1});Wt.set("lance",{type:"promLance",reverseColor:!1});Wt.set("knight",{type:"promKnight",reverseColor:!1});Wt.set("silver",{type:"promSilver",reverseColor:!1});Wt.set("gold",{type:"gold",reverseColor:!0});Wt.set("bishop",{type:"horse",reverseColor:!1});Wt.set("rook",{type:"dragon",reverseColor:!1});Wt.set("king",{type:"king",reverseColor:!0});Wt.set("promPawn",{type:"pawn",reverseColor:!0});Wt.set("promLance",{type:"lance",reverseColor:!0});Wt.set("promKnight",{type:"knight",reverseColor:!0});Wt.set("promSilver",{type:"silver",reverseColor:!0});Wt.set("horse",{type:"bishop",reverseColor:!0});Wt.set("dragon",{type:"rook",reverseColor:!0});class ue{constructor(t,n){this.color=t,this.type=n}black(){return this.withColor(D.BLACK)}white(){return this.withColor(D.WHITE)}withColor(t){return new ue(t,this.type)}equals(t){return this.type===t.type&&this.color===t.color}promoted(){const t=of[this.type];return new ue(this.color,t||this.type)}unpromoted(){const t=T0[this.type];return new ue(this.color,t||this.type)}isPromotable(){return!!P0[this.type]}rotate(){const t=Wt.get(this.type),n=new ue(this.color,t?t.type:this.type);return t&&t.reverseColor&&(n.color=Rt(this.color)),n}get id(){return this.color+"_"+this.type}get sfen(){switch(this.color){default:case D.BLACK:return rf[this.type];case D.WHITE:return M0[this.type]}}static isValidSFEN(t){return!!Xc[t]}static newBySFEN(t){const n=Xc[t];if(!n)return null;const i=x0[t];return i?new ue(i,n):null}}var Ht=(e=>(e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right",e.LEFT_UP="left_up",e.RIGHT_UP="right_up",e.LEFT_DOWN="left_down",e.RIGHT_DOWN="right_down",e.LEFT_UP_KNIGHT="left_up_knight",e.RIGHT_UP_KNIGHT="right_up_knight",e.LEFT_DOWN_KNIGHT="left_down_knight",e.RIGHT_DOWN_KNIGHT="right_down_knight",e))(Ht||{});const R0={up:"down",down:"up",left:"right",right:"left",left_up:"right_down",right_up:"left_down",left_down:"right_up",right_down:"left_up",left_up_knight:"right_down_knight",right_up_knight:"left_down_knight",left_down_knight:"right_up_knight",right_down_knight:"left_up_knight"};function ur(e){return R0[e]}const N0=["up","down","left","right","left_up","right_up","left_down","right_down","left_up_knight","right_up_knight","left_down_knight","right_down_knight"];var qs=(e=>(e.SHORT="short",e.LONG="long",e))(qs||{});const af={black:{pawn:{up:"short"},lance:{up:"long"},knight:{left_up_knight:"short",right_up_knight:"short"},silver:{left_up:"short",up:"short",right_up:"short",left_down:"short",right_down:"short"},gold:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},bishop:{left_up:"long",right_up:"long",left_down:"long",right_down:"long"},rook:{up:"long",left:"long",right:"long",down:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promLance:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promKnight:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promSilver:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},horse:{left_up:"long",right_up:"long",left_down:"long",right_down:"long",up:"short",left:"short",right:"short",down:"short"},dragon:{up:"long",left:"long",right:"long",down:"long",left_up:"short",right_up:"short",left_down:"short",right_down:"short"}},white:{pawn:{down:"short"},lance:{down:"long"},knight:{left_down_knight:"short",right_down_knight:"short"},silver:{left_down:"short",down:"short",right_down:"short",left_up:"short",right_up:"short"},gold:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},bishop:{left_down:"long",right_down:"long",left_up:"long",right_up:"long"},rook:{down:"long",left:"long",right:"long",up:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promLance:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promKnight:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promSilver:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},horse:{left_down:"long",right_down:"long",left_up:"long",right_up:"long",down:"short",left:"short",right:"short",up:"short"},dragon:{down:"long",left:"long",right:"long",up:"long",left_down:"short",right_down:"short",left_up:"short",right_up:"short"}}};function O0(e){return Object.keys(af[e.color][e.type])}function lf(e,t){return af[e.color][e.type][t]}const L0={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},left_up:{x:-1,y:-1},right_up:{x:1,y:-1},left_down:{x:-1,y:1},right_down:{x:1,y:1},left_up_knight:{x:-1,y:-2},right_up_knight:{x:1,y:-2},left_down_knight:{x:-1,y:2},right_down_knight:{x:1,y:2}};function cf(e,t){if(e===1&&t===-2)return{direction:"right_up_knight",distance:1,ok:!0};if(e===-1&&t===-2)return{direction:"left_up_knight",distance:1,ok:!0};if(e===1&&t===2)return{direction:"right_down_knight",distance:1,ok:!0};if(e===-1&&t===2)return{direction:"left_down_knight",distance:1,ok:!0};if(e!==0&&t!==0&&Math.abs(e)!==Math.abs(t))return{direction:"",distance:0,ok:!1};let n=e,i=t,s=0;return n!==0&&(s=Math.abs(n),n/=s),i!==0&&(s=Math.abs(i),i/=s),n===-1&&i===-1?{direction:"left_up",distance:s,ok:!0}:n===0&&i===-1?{direction:"up",distance:s,ok:!0}:n===1&&i===-1?{direction:"right_up",distance:s,ok:!0}:n===-1&&i===0?{direction:"left",distance:s,ok:!0}:n===1&&i===0?{direction:"right",distance:s,ok:!0}:n===-1&&i===1?{direction:"left_down",distance:s,ok:!0}:n===0&&i===1?{direction:"down",distance:s,ok:!0}:n===1&&i===1?{direction:"right_down",distance:s,ok:!0}:{direction:"",distance:0,ok:!1}}var Ci=(e=>(e.UP="up",e.NONE="none",e.DOWN="down",e))(Ci||{});function Ho(e){switch(e){case"up":case"left_up":case"right_up":case"left_up_knight":case"right_up_knight":return"up";case"down":case"left_down":case"right_down":case"left_down_knight":case"right_down_knight":return"down";default:return"none"}}var Zt=(e=>(e.LEFT="left",e.NONE="none",e.RIGHT="right",e))(Zt||{});function Uo(e){switch(e){case"left":case"left_up":case"left_down":case"left_up_knight":case"left_down_knight":return"left";case"right":case"right_up":case"right_down":case"right_up_knight":case"right_down_knight":return"right";default:return"none"}}function B0(e){switch(e){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}function D0(e){switch(e){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;case"i":return 9;default:return null}}const F0=["a","b","c","d","e","f","g","h","i"],Et=class{constructor(t,n){this.file=t,this.rank=n}get x(){return 9-this.file}get y(){return this.rank-1}get index(){return this.y*9+this.x}get opposite(){return new Et(10-this.file,10-this.rank)}neighbor(t,n){switch(t){case Ht.UP:return new Et(this.file,this.rank-1);case Ht.DOWN:return new Et(this.file,this.rank+1);case Ht.LEFT:return new Et(this.file+1,this.rank);case Ht.RIGHT:return new Et(this.file-1,this.rank);case Ht.LEFT_UP:return new Et(this.file+1,this.rank-1);case Ht.RIGHT_UP:return new Et(this.file-1,this.rank-1);case Ht.LEFT_DOWN:return new Et(this.file+1,this.rank+1);case Ht.RIGHT_DOWN:return new Et(this.file-1,this.rank+1);case Ht.LEFT_UP_KNIGHT:return new Et(this.file+1,this.rank-2);case Ht.RIGHT_UP_KNIGHT:return new Et(this.file-1,this.rank-2);case Ht.LEFT_DOWN_KNIGHT:return new Et(this.file+1,this.rank+2);case Ht.RIGHT_DOWN_KNIGHT:return new Et(this.file-1,this.rank+2)}const i=t,s=n;return new Et(this.file-i,this.rank+s)}directionTo(t){return cf(t.x-this.x,t.y-this.y).direction}get valid(){return this.file>=1&&this.file<=9&&this.rank>=1&&this.rank<=9}equals(t){return!!t&&this.file===t.file&&this.rank===t.rank}static newByXY(t,n){return new Et(9-t,n+1)}static newByIndex(t){return new Et(9-t%9,Math.trunc(t/9)+1)}get sfen(){return this.file+F0[this.rank-1]}static parseSFENSquare(t){const n=B0(t[0]),i=D0(t[1]);return!n||!i?null:new Et(n,i)}};let $=Et;C($,"all",[]);for(let e=0;e<81;e+=1)$.all.push($.newByIndex(e));class ot{constructor(t,n,i,s,o,r){this.from=t,this.to=n,this.promote=i,this.color=s,this.pieceType=o,this.capturedPieceType=r}equals(t){return t?(this.from instanceof $&&t.from instanceof $&&this.from.equals(t.from)||!(this.from instanceof $)&&!(t.from instanceof $)&&this.from===t.from)&&this.to.equals(t.to)&&this.promote===t.promote&&this.color===t.color&&this.pieceType===t.pieceType&&this.capturedPieceType===t.capturedPieceType:!1}withPromote(){return new ot(this.from,this.to,!0,this.color,this.pieceType,this.capturedPieceType)}get usi(){let t="";return this.from instanceof $?t+=this.from.sfen:t+=C0(this.from)+"*",t+=this.to.sfen,this.promote&&(t+="+"),t}}function uf(e){let t;if(e[1]==="*"){const s=ue.newBySFEN(e[0]);if(!s)return null;t=s.type}else{const s=$.parseSFENSquare(e);if(!s)return null;t=s}const n=$.parseSFENSquare(e.substring(2));if(!n)return null;const i=e.length>=5&&e[4]==="+";return{from:t,to:n,promote:i}}var we=(e=>(e.STANDARD="standard",e.EMPTY="empty",e.HANDICAP_LANCE="handicapLance",e.HANDICAP_RIGHT_LANCE="handicapRightLance",e.HANDICAP_BISHOP="handicapBishop",e.HANDICAP_ROOK="handicapRook",e.HANDICAP_ROOK_LANCE="handicapRookLance",e.HANDICAP_2PIECES="handicap2Pieces",e.HANDICAP_4PIECES="handicap4Pieces",e.HANDICAP_6PIECES="handicap6Pieces",e.HANDICAP_8PIECES="handicap8Pieces",e.TSUME_SHOGI="tsumeShogi",e.TSUME_SHOGI_2KINGS="tsumeShogi2Kings",e))(we||{});function Jc(e){switch(e){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}class hr{constructor(){C(this,"squares");this.squares=new Array;for(let t=0;t<81;t+=1)this.squares.push(null);this.reset("standard")}at(t){return this.squares[t.index]}set(t,n){this.squares[t.index]=n}swap(t,n){const i=this.squares[t.index];this.squares[t.index]=this.squares[n.index],this.squares[n.index]=i}remove(t){const n=this.squares[t.index];return this.squares[t.index]=null,n}listNonEmptySquares(){return $.all.filter(t=>this.squares[t.index])}listSquaresByColor(t){return $.all.filter(n=>{const i=this.squares[n.index];return i&&i.color===t})}listSquaresByPiece(t){return $.all.filter(n=>{const i=this.squares[n.index];return i&&t.equals(i)})}clear(){$.all.forEach(t=>{this.squares[t.index]=null})}reset(t){if(this.clear(),t!=="empty"&&(this.squares[new $(5,1).index]=new ue(D.WHITE,B.KING),t!=="tsumeShogi"&&(this.squares[new $(5,9).index]=new ue(D.BLACK,B.KING),t!=="tsumeShogi2Kings")))switch(this.squares[new $(2,8).index]=new ue(D.BLACK,B.ROOK),this.squares[new $(8,2).index]=new ue(D.WHITE,B.ROOK),this.squares[new $(8,8).index]=new ue(D.BLACK,B.BISHOP),this.squares[new $(2,2).index]=new ue(D.WHITE,B.BISHOP),this.squares[new $(4,9).index]=new ue(D.BLACK,B.GOLD),this.squares[new $(6,9).index]=new ue(D.BLACK,B.GOLD),this.squares[new $(6,1).index]=new ue(D.WHITE,B.GOLD),this.squares[new $(4,1).index]=new ue(D.WHITE,B.GOLD),this.squares[new $(3,9).index]=new ue(D.BLACK,B.SILVER),this.squares[new $(7,9).index]=new ue(D.BLACK,B.SILVER),this.squares[new $(7,1).index]=new ue(D.WHITE,B.SILVER),this.squares[new $(3,1).index]=new ue(D.WHITE,B.SILVER),this.squares[new $(2,9).index]=new ue(D.BLACK,B.KNIGHT),this.squares[new $(8,9).index]=new ue(D.BLACK,B.KNIGHT),this.squares[new $(8,1).index]=new ue(D.WHITE,B.KNIGHT),this.squares[new $(2,1).index]=new ue(D.WHITE,B.KNIGHT),this.squares[new $(1,9).index]=new ue(D.BLACK,B.LANCE),this.squares[new $(9,9).index]=new ue(D.BLACK,B.LANCE),this.squares[new $(9,1).index]=new ue(D.WHITE,B.LANCE),this.squares[new $(1,1).index]=new ue(D.WHITE,B.LANCE),this.squares[new $(1,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(2,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(3,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(4,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(5,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(6,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(7,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(8,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(9,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(1,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(2,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(3,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(4,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(5,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(6,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(7,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(8,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(9,3).index]=new ue(D.WHITE,B.PAWN),t){default:case"standard":return;case"handicapLance":this.squares[new $(1,1).index]=null;return;case"handicapRightLance":this.squares[new $(9,1).index]=null;return;case"handicapBishop":this.squares[new $(2,2).index]=null;return;case"handicapRook":this.squares[new $(8,2).index]=null;return;case"handicapRookLance":this.squares[new $(8,2).index]=null,this.squares[new $(1,1).index]=null;return;case"handicap2Pieces":this.squares[new $(8,2).index]=null,this.squares[new $(2,2).index]=null;return;case"handicap4Pieces":this.squares[new $(8,2).index]=null,this.squares[new $(2,2).index]=null,this.squares[new $(1,1).index]=null,this.squares[new $(9,1).index]=null;return;case"handicap6Pieces":this.squares[new $(8,2).index]=null,this.squares[new $(2,2).index]=null,this.squares[new $(1,1).index]=null,this.squares[new $(2,1).index]=null,this.squares[new $(8,1).index]=null,this.squares[new $(9,1).index]=null;return;case"handicap8Pieces":this.squares[new $(8,2).index]=null,this.squares[new $(2,2).index]=null,this.squares[new $(1,1).index]=null,this.squares[new $(2,1).index]=null,this.squares[new $(3,1).index]=null,this.squares[new $(7,1).index]=null,this.squares[new $(8,1).index]=null,this.squares[new $(9,1).index]=null;return}}get sfen(){let t="",n=0;for(let i=0;i<9;i+=1){for(let s=0;s<9;s+=1){const o=this.at($.newByXY(s,i));o?(n&&(t+=n,n=0),t+=o.sfen):n+=1}n&&(t+=n,n=0),i!==8&&(t+="/")}return t}resetBySFEN(t){if(!hr.isValidSFEN(t))return!1;this.clear();const n=t.split("/");for(let i=0;i<9;i+=1){let s=0;for(let o=0;o<n[i].length;o+=1){let r=n[i][o];r==="+"&&(o+=1,r+=n[i][o]);const a=Jc(r);a?s+=a:(this.set($.newByXY(s,i),ue.newBySFEN(r)),s+=1)}}return!0}findKing(t){const n=new ue(t,B.KING);return $.all.find(i=>{const s=this.at(i);if(s&&n.equals(s))return!0})}hasPower(t,n,i){return!!N0.find(s=>{let o=0;for(let r=t.neighbor(s);r.valid&&(o+=1,!(i&&i.filled&&r.equals(i.filled)));r=r.neighbor(s)){if(i&&i.ignore&&r.equals(i.ignore))continue;const a=this.at(r);if(a){if(a.color!==n)return!1;const l=ur(s),c=lf(a,l);return c===qs.LONG||c===qs.SHORT&&o===1}}return!1})}isChecked(t,n){const i=this.findKing(t);return i?this.hasPower(i,Rt(t),{filled:n&&n.filled,ignore:n&&n.ignore}):!1}static isValidSFEN(t){const n=t.split("/");if(n.length!==9)return!1;for(let i=0;i<9;i+=1){let s=0;for(let o=0;o<n[i].length;o+=1){let r=n[i][o];r==="+"&&(o+=1,r+=n[i][o]);const a=Jc(r);if(a)s+=a;else if(ue.isValidSFEN(r))s+=1;else return!1}if(s!==9)return!1}return!0}copyFrom(t){$.all.forEach(n=>{this.squares[n.index]=t.at(n)})}}function fi(e,t){return e===0?"":(e!==1?e:"")+t.sfen}class an{constructor(){C(this,"pieces");this.pieces=new Map,this.pieces.set(B.PAWN,0),this.pieces.set(B.LANCE,0),this.pieces.set(B.KNIGHT,0),this.pieces.set(B.SILVER,0),this.pieces.set(B.GOLD,0),this.pieces.set(B.BISHOP,0),this.pieces.set(B.ROOK,0)}get counts(){return[{type:B.ROOK,count:this.count(B.ROOK)},{type:B.BISHOP,count:this.count(B.BISHOP)},{type:B.GOLD,count:this.count(B.GOLD)},{type:B.SILVER,count:this.count(B.SILVER)},{type:B.KNIGHT,count:this.count(B.KNIGHT)},{type:B.LANCE,count:this.count(B.LANCE)},{type:B.PAWN,count:this.count(B.PAWN)}]}count(t){return this.pieces.get(t)}set(t,n){this.pieces.set(t,n)}add(t,n){let i=this.pieces.get(t);return i+=n,this.pieces.set(t,i),i}reduce(t,n){let i=this.pieces.get(t);return i-=n,this.pieces.set(t,i),i}forEach(t){t(B.PAWN,this.pieces.get(B.PAWN)),t(B.LANCE,this.pieces.get(B.LANCE)),t(B.KNIGHT,this.pieces.get(B.KNIGHT)),t(B.SILVER,this.pieces.get(B.SILVER)),t(B.GOLD,this.pieces.get(B.GOLD)),t(B.BISHOP,this.pieces.get(B.BISHOP)),t(B.ROOK,this.pieces.get(B.ROOK))}get sfenBlack(){return this.formatSFEN(D.BLACK)}get sfenWhite(){return this.formatSFEN(D.WHITE)}formatSFEN(t){let n="";return n+=fi(this.count(B.ROOK),new ue(t,B.ROOK)),n+=fi(this.count(B.BISHOP),new ue(t,B.BISHOP)),n+=fi(this.count(B.GOLD),new ue(t,B.GOLD)),n+=fi(this.count(B.SILVER),new ue(t,B.SILVER)),n+=fi(this.count(B.KNIGHT),new ue(t,B.KNIGHT)),n+=fi(this.count(B.LANCE),new ue(t,B.LANCE)),n+=fi(this.count(B.PAWN),new ue(t,B.PAWN)),n===""?"-":n}static formatSFEN(t,n){const i=t.sfenBlack,s=n.sfenWhite;return i==="-"&&s==="-"?"-":s==="-"?i:i==="-"?s:i+s}static isValidSFEN(t){return t==="-"?!0:!!t.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)}static parseSFEN(t){if(t==="-")return{black:new an,white:new an};if(!t.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/))return null;const n=t.match(/([0-9]*[PLNSGBRplnsgbr])/g),i=new an,s=new an;for(let o=0;o<n.length;o+=1){const r=n[o];let a=1;r.length>=2&&(a=Number(r.substring(0,r.length-1)));const l=ue.newBySFEN(r[r.length-1]);l.color===D.BLACK?i.add(l.type,a):s.add(l.type,a)}return{black:i,white:s}}copyFrom(t){t.pieces.forEach((n,i)=>{this.pieces.set(i,n)})}}const $0={black:{pawn:{1:!0},lance:{1:!0},knight:{1:!0,2:!0}},white:{pawn:{9:!0},lance:{9:!0},knight:{9:!0,8:!0}}};function Qc(e,t,n){const i=$0[e][t];return i?i[n]:!1}function dr(e,t){return e===D.BLACK?t<=3:t>=7}function H0(e,t,n){for(let i=1;i<=9;i+=1){const s=t.at(new $(n,i));if(s&&s.type===B.PAWN&&s.color===e)return!0}return!1}class Ot{constructor(){C(this,"_board",new hr);C(this,"_color",D.BLACK);C(this,"_blackHand",new an);C(this,"_whiteHand",new an)}get board(){return this._board}get color(){return this._color}get blackHand(){return this._blackHand}get whiteHand(){return this._whiteHand}reset(t){switch(this._board.reset(t),this._blackHand=new an,this._whiteHand=new an,t){case we.STANDARD:case we.EMPTY:case we.TSUME_SHOGI:case we.TSUME_SHOGI_2KINGS:this._color=D.BLACK;break;case we.HANDICAP_LANCE:case we.HANDICAP_RIGHT_LANCE:case we.HANDICAP_BISHOP:case we.HANDICAP_ROOK:case we.HANDICAP_ROOK_LANCE:case we.HANDICAP_2PIECES:case we.HANDICAP_4PIECES:case we.HANDICAP_6PIECES:case we.HANDICAP_8PIECES:this._color=D.WHITE;break}(t===we.TSUME_SHOGI||t===we.TSUME_SHOGI_2KINGS)&&(this._whiteHand.set(B.PAWN,18),this._whiteHand.set(B.LANCE,4),this._whiteHand.set(B.KNIGHT,4),this._whiteHand.set(B.SILVER,4),this._whiteHand.set(B.GOLD,4),this._whiteHand.set(B.BISHOP,2),this._whiteHand.set(B.ROOK,2))}hand(t){return this._hand(t)}_hand(t){return t===D.BLACK?this._blackHand:this._whiteHand}get checked(){return this._board.isChecked(this.color)}createMove(t,n){let i;if(t instanceof $){const o=this._board.at(t);if(!o)return null;i=o.type}else i=t;const s=this._board.at(n);return new ot(t,n,!1,this.color,i,s?s.type:null)}createMoveByUSI(t){const n=uf(t);if(!n)return null;let i=this.createMove(n.from,n.to);return i?(n.promote&&(i=i.withPromote()),i):null}isPawnDropMate(t){if(t.from instanceof $||t.pieceType!==B.PAWN)return!1;const n=t.to.neighbor(t.color===D.BLACK?Ht.UP:Ht.DOWN),i=this.board.at(n);return!i||i.type!==B.KING||i.color===t.color||O0(i).find(o=>{const r=n.neighbor(o);if(!r.valid)return!1;const a=this.board.at(r);return a&&a.color==i.color?!1:!this.board.hasPower(r,t.color,{filled:t.to})})?!1:!this.board.listSquaresByColor(i.color).find(o=>!o.equals(n)&&this.isMovable(o,t.to)&&!this.board.isChecked(i.color,{filled:t.to,ignore:o}))}listAttackersByPiece(t,n){return this.board.listSquaresByPiece(n).filter(i=>this.isMovable(i,t))}isValidMove(t){if(t.from instanceof $){const n=this._board.at(t.from);if(!n||n.color!==this.color||!this.isMovable(t.from,t.to))return!1;const i=this._board.at(t.to);if(i&&i.color===this.color)return!1;if(t.promote){if(!n.isPromotable()||!dr(this.color,t.from.rank)&&!dr(this.color,t.to.rank))return!1}else if(Qc(this.color,n.type,t.to.rank))return!1;if(t.pieceType!==B.KING?this._board.isChecked(this.color,{filled:t.to,ignore:t.from}):this._board.hasPower(t.to,Rt(this.color),{ignore:t.from}))return!1}else if(t.promote||t.color!==this.color||this.hand(this.color).count(t.from)===0||this._board.at(t.to)||Qc(this.color,t.from,t.to.rank)||t.from===B.PAWN&&H0(this.color,this._board,t.to.file)||this._board.isChecked(this.color,{filled:t.to})||this.isPawnDropMate(t))return!1;return!0}doMove(t,n){if(!(n&&n.ignoreValidation)&&!this.isValidMove(t))return!1;if(t.from instanceof $){const i=this._board.at(t.from),s=this._board.at(t.to);this._board.remove(t.from),this._board.set(t.to,t.promote?i.promoted():i),s&&s.type!==B.KING&&this._hand(this.color).add(s.unpromoted().type,1)}else this._hand(this.color).reduce(t.from,1),this._board.set(t.to,new ue(this.color,t.from));return this._color=Rt(this.color),!0}undoMove(t){if(this._color=Rt(this.color),t.from instanceof $)if(this._board.set(t.from,new ue(this.color,t.pieceType)),t.capturedPieceType){const n=new ue(Rt(this.color),t.capturedPieceType);this._board.set(t.to,n),n.type!==B.KING&&this._hand(this.color).reduce(n.unpromoted().type,1)}else this._board.remove(t.to);else this._hand(this.color).add(t.from,1),this._board.remove(t.to)}isValidEditing(t,n){if(t instanceof $){const i=this._board.at(t);if(!i)return!1;if(n instanceof $){if(t.equals(n))return!1}else if(i.type===B.KING)return!1}else{if(!t.color||this.hand(t.color).count(t.type)===0)return!1;if(n instanceof $){if(this._board.at(n))return!1}else if(t.color===n)return!1}return!0}edit(t){if(t.move){if(!this.isValidEditing(t.move.from,t.move.to))return!1;if(!(t.move.from instanceof $))this._hand(t.move.from.color).reduce(t.move.from.type,1),t.move.to instanceof $?this._board.set(t.move.to,t.move.from):this._hand(t.move.to).add(t.move.from.type,1);else if(t.move.to instanceof $)this._board.swap(t.move.from,t.move.to);else{const n=this._board.remove(t.move.from);this._hand(t.move.to).add(n.unpromoted().type,1)}}if(t.rotate){const n=this._board.at(t.rotate);n&&this._board.set(t.rotate,n.rotate())}return!0}get sfen(){return this.getSFEN(1)}getSFEN(t){let n=`${this._board.sfen} ${w0(this.color)} `;return n+=an.formatSFEN(this._blackHand,this._whiteHand),n+=" "+t,n}resetBySFEN(t){if(!Ot.isValidSFEN(t))return!1;const n=t.split(" ");n[0]==="sfen"&&n.shift(),this._board.resetBySFEN(n[0]),this._color=I0(n[1]);const i=an.parseSFEN(n[2]);return this._blackHand=i.black,this._whiteHand=i.white,!0}setColor(t){this._color=t}static isValidSFEN(t){const n=t.split(" ");return n.length===5&&n[0]==="sfen"&&n.shift(),!(n.length!==4||!hr.isValidSFEN(n[0])||!E0(n[1])||!an.isValidSFEN(n[2])||!n[3].match(/[0-9]+/))}static newBySFEN(t){const n=new Ot;return n.resetBySFEN(t)?n:null}isMovable(t,n){const i=n.x-t.x,s=n.y-t.y,{direction:o,distance:r,ok:a}=cf(i,s);if(!a)return!1;const l=this._board.at(t);if(!l)return!1;switch(lf(l,o)){default:return!1;case qs.SHORT:return r===1;case qs.LONG:{const c=L0[o];for(let u=t.neighbor(c.x,c.y);u.valid;u=u.neighbor(c.x,c.y)){if(u.equals(n))return!0;if(this._board.at(u))return!1}return!1}}}copyFrom(t){this._board.copyFrom(t._board),this._color=t.color,this._blackHand.copyFrom(t._blackHand),this._whiteHand.copyFrom(t._whiteHand)}clone(){const t=new Ot;return t.copyFrom(this),t}}function U0(e){const t={pawn:0,lance:0,knight:0,silver:0,gold:0,bishop:0,rook:0,king:0,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0};return $.all.forEach(n=>{const i=e.board.at(n);i&&(t[i.type]+=1)}),e.blackHand.forEach((n,i)=>{t[n]+=i}),e.whiteHand.forEach((n,i)=>{t[n]+=i}),t}function z0(e){const t=U0(e);return{pawn:18-t.pawn-t.promPawn,lance:4-t.lance-t.promLance,knight:4-t.knight-t.promKnight,silver:4-t.silver-t.promSilver,gold:4-t.gold,bishop:2-t.bishop-t.horse,rook:2-t.rook-t.dragon,king:2-t.king,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0}}const G0={"":1,"":2,"":3,"":4,"":5,"":6,"":7,"":8,"":9},W0={:1,:2,:3,:4,:5,:6,:7,:8,:9,:10,:11,:12,:13,:14,:15,:16,:17,:18},V0={1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},j0={:B.KING,:B.KING,:B.ROOK,:B.DRAGON,:B.DRAGON,:B.BISHOP,:B.HORSE,:B.GOLD,:B.SILVER,:B.PROM_SILVER,:B.PROM_SILVER,:B.KNIGHT,:B.PROM_KNIGHT,:B.PROM_KNIGHT,:B.LANCE,:B.PROM_LANCE,:B.PROM_LANCE,:B.PAWN,:B.PROM_PAWN};function hf(e){return G0[e]}function Kr(e){return W0[e]}function fr(e){return V0[e]}function qr(e){return j0[e]}const df=["","","","","","","","","","","","","","","","","",""],K0=["","","","","","","","",""];function q0(e){return df[e-1]}function ff(e){return K0[e-1]}function Wl(e){return df[e-1]}const Y0={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""};function pf(e){return Y0[e]}const X0={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""};function tl(e){return X0[e]}const J0={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:""};function gf(e){return J0[e]}function Ni(e,t,n){let i="";switch(t.color){case D.BLACK:i+=n!=null&&n.compatible?"":"";break;case D.WHITE:i+=n!=null&&n.compatible?"":"";break}n!=null&&n.prev&&n.prev.to.equals(t.to)?i+="":(i+=ff(t.to.file),i+=Wl(t.to.rank)),i+=pf(t.pieceType);const s=new ue(t.color,t.pieceType),o=e.listAttackersByPiece(t.to,s).filter(r=>!(t.from instanceof $)||!r.equals(t.from));if(t.from instanceof $){let r=t.from.directionTo(t.to);r=t.color===D.BLACK?r:ur(r);const a=Ho(r),l=Uo(r),c=o.map(g=>{const y=g.directionTo(t.to);return t.color===D.BLACK?y:ur(y)}),u=c.filter(g=>Uo(g)==l).map(g=>Ho(g)),h=c.filter(g=>Ho(g)==a).map(g=>Uo(g));let p=!1;if(h.length)if(t.pieceType===B.HORSE||t.pieceType===B.DRAGON)l===Zt.LEFT||l===Zt.NONE&&h[0]===Zt.RIGHT?i+="":(l===Zt.RIGHT||l===Zt.NONE&&h[0]===Zt.LEFT)&&(i+="");else switch(l){case Zt.LEFT:i+="";break;case Zt.NONE:i+="",p=!0;break;case Zt.RIGHT:i+="";break}if(!p&&(u.length||!h.length&&o.length))switch(a){case Ci.DOWN:i+="";break;case Ci.NONE:i+="";break;case Ci.UP:i+="";break}t.promote?i+="":t.from instanceof $&&s.isPromotable()&&(dr(t.color,t.from.rank)||dr(t.color,t.to.rank))&&(i+="")}else o.length&&(i+="");return i}function Q0(e,t){let n="",i;const s=e.clone();for(const o of t)n+=`${Ni(s,o,{prev:i,compatible:!0})}`,s.doMove(o,{ignoreValidation:!0}),i=o;return n}const Z0=/^[]?([][]|)(||||||||||||||||||)(|||)(|||)(|||)(\([1-9][1-9]\)|)/;function eb(e,t){const n=t.replaceAll(/[\s\u3000]/g,""),i=[];let s=0;for(let a=1;a<=n.length;a++){const l=n[a];(!l||l===""||l===""||l===""||l==="")&&(i.push(n.substring(s,a)),s=a)}const o=e.clone(),r=[];for(const a of i){const l=Z0.exec(a);if(!l)break;const c=l[1],u=qr(l[2]),h=l[3],p=l[4],g=l[5],y=l[6];let b;if(c.startsWith(""))b=r[r.length-1].to;else{const E=hf(c[0]),w=Kr(c[1]);b=new $(E,w)}let v;if(g==="")v=u;else if(y){const E=fr(y[1]),w=fr(y[2]);v=new $(E,w)}else{const E=o.listAttackersByPiece(b,new ue(o.color,u)).filter(w=>{let k=w.directionTo(b);k=o.color===D.BLACK?k:ur(k);const A=Ho(k),O=Uo(k);return!(p.indexOf("")>=0&&A!==Ci.DOWN||p.indexOf("")>=0&&A!==Ci.NONE||p.indexOf("")>=0&&A!==Ci.UP||h.indexOf("")>=0&&O!==Zt.RIGHT||h.indexOf("")>=0&&O!==Zt.NONE||h.indexOf("")>=0&&O!==Zt.LEFT)});if(E.length===1)v=E[0];else if(E.length===0&&o.hand(o.color).count(u)!==0)v=u;else break}let _=o.createMove(v,b);if(!_||(g===""&&(_=_.withPromote()),!o.doMove(_,{ignoreValidation:!0})))break;r.push(_)}return r}function mf(e){return yf(Math.floor(e/1e3))}function bf(e){return _f(Math.floor(e/1e3))}function yf(e){const t=Math.floor(e/3600),n=Math.floor((e-t*3600)/60),i=e%60;return t+":"+String(n).padStart(2,"0")+":"+String(i).padStart(2,"0")}function _f(e){const t=Math.floor(e/60),n=e%60;return String(t).padStart(2," ")+":"+String(n).padStart(2,"0")}var J=(e=>(e.TITLE="title",e.BLACK_NAME="blackName",e.WHITE_NAME="whiteName",e.START_DATETIME="startDatetime",e.END_DATETIME="endDatetime",e.DATE="date",e.TOURNAMENT="tournament",e.STRATEGY="strategy",e.TIME_LIMIT="timeLimit",e.TIME_SPENT="timeSpent",e.PLACE="place",e.POSTED_ON="postedOn",e.NOTE="note",e.BLACK_SHORT_NAME="blackShortName",e.WHITE_SHORT_NAME="whiteShortName",e.OPUS_NO="opusNo",e.OPUS_NAME="opusName",e.AUTHOR="author",e.PUBLISHED_BY="publishedBy",e.PUBLISHED_AT="publishedAt",e.SOURCE="source",e.LENGTH="length",e.INTEGRITY="integrity",e.CATEGORY="category",e.AWARD="award",e))(J||{});class pr{constructor(){C(this,"standard",new Map);C(this,"custom",new Map)}get standardMetadataKeys(){return this.standard.keys()}getStandardMetadata(t){return this.standard.get(t)}setStandardMetadata(t,n){n?this.standard.set(t,n):this.standard.delete(t)}get customMetadataKeys(){return this.custom.keys()}getCustomMetadata(t){return this.custom.get(t)}setCustomMetadata(t,n){n?this.custom.set(t,n):this.custom.delete(t)}}var ce=(e=>(e.START="start",e.INTERRUPT="interrupt",e.RESIGN="resign",e.IMPASS="impass",e.DRAW="draw",e.REPETITION_DRAW="repetitionDraw",e.MATE="mate",e.TIMEOUT="timeout",e.FOUL_WIN="foulWin",e.FOUL_LOSE="foulLose",e.ENTERING_OF_KING="enteringOfKing",e.WIN_BY_DEFAULT="winByDefault",e.LOSE_BY_DEFAULT="loseByDefault",e))(ce||{});class Gi{constructor(t,n,i,s,o,r,a,l){C(this,"next",null);C(this,"branch",null);C(this,"comment","");C(this,"customData");C(this,"elapsedMs",0);C(this,"totalElapsedMs",0);this.number=t,this.prev=n,this.branchIndex=i,this.activeBranch=s,this.nextColor=o,this.move=r,this.isCheck=a,this.displayText=l}get timeText(){const t=bf(this.elapsedMs),n=mf(this.totalElapsedMs);return`${t} / ${n}`}get hasBranch(){return!!this.prev&&!!this.prev.next&&!!this.prev.next.branch}get isFirstBranch(){return!this.prev||this.prev.next===this}get isLastMove(){if(!this.next)return!0;for(let t=this.next;t;t=t.branch)if(t.move instanceof ot)return!1;return!0}updateTotalElapsedMs(){this.totalElapsedMs=this.elapsedMs,this.prev&&this.prev.prev&&(this.totalElapsedMs+=this.prev.prev.totalElapsedMs)}setElapsedMs(t){this.elapsedMs=t,this.updateTotalElapsedMs();let n=this.next;const i=[];for(;n;)n.updateTotalElapsedMs(),n.branch&&i.push(n.branch),n.next?n=n.next:n=i.pop()||null}static newRootEntry(t){return new Gi(0,null,0,!0,t,"start",!1,"")}}class Ct{constructor(t){C(this,"metadata");C(this,"_initialPosition");C(this,"_position");C(this,"_first");C(this,"_current");C(this,"repetitionCounts",{});C(this,"repetitionStart",{});C(this,"onChangePosition",()=>{});this.metadata=new pr,this._initialPosition=t?t.clone():new Ot,this._position=this.initialPosition.clone(),this._first=Gi.newRootEntry(this._initialPosition.color),this._current=this._first,this.incrementRepetition()}get initialPosition(){return this._initialPosition}get position(){return this._position}get first(){return this._first}get current(){return this._current}get moves(){const t=this.movesBefore;for(let n=this._current.next;n;n=n.next){for(;!n.activeBranch;)n=n.branch;t.push(n)}return t}get movesBefore(){return this._movesBefore}get _movesBefore(){const t=new Array;t.unshift(this._current);for(let n=this._current.prev;n;n=n.prev)t.unshift(n);return t}get length(){let t=this._current.number;for(let n=this._current.next;n;n=n.next){for(;!n.activeBranch;)n=n.branch;t=n.number}return t}get branchBegin(){return this._current.prev?this._current.prev.next:this._current}clear(t){this.metadata=new pr,t&&(this._initialPosition=t.clone()),this._position=this.initialPosition.clone(),this._first=Gi.newRootEntry(this._initialPosition.color),this._current=this._first,this.repetitionCounts={},this.repetitionStart={},this.incrementRepetition(),this.onChangePosition()}goBack(){return this._goBack()?(this.onChangePosition(),!0):!1}_goBack(){return this._current.prev?(this._current.move instanceof ot&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=this._current.prev,!0):!1}goForward(){return this._goForward()?(this.onChangePosition(),!0):!1}_goForward(){if(this._current.next){for(this._current=this._current.next;!this._current.activeBranch;)this._current=this._current.branch;return this._current.move instanceof ot&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),!0}return!1}goto(t){for(;t<this._current.number&&this._goBack(););for(;t>this._current.number&&this._goForward(););this.onChangePosition()}resetAllBranchSelection(){this._forEach(t=>{t.activeBranch=t.isFirstBranch})}switchBranchByIndex(t){if(this.current.branchIndex===t)return!0;if(!this._current.prev)return!1;let n=!1;for(let i=this._current.prev.next;i;i=i.branch)i.branchIndex===t?(i.activeBranch=!0,this._current.move instanceof ot&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=i,this._current.move instanceof ot&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),n=!0):i.activeBranch=!1;return n&&this.onChangePosition(),n}append(t,n){const i=this.current.move instanceof ot?this.current.move:void 0,s=t instanceof ot?Ni(this.position,t,{prev:i}):gf(t);let o=!1;if(t instanceof ot){if(!this._position.doMove(t,n))return!1;this.incrementRepetition(),o=this.position.checked}if(this._current!==this.first&&!(this._current.move instanceof ot)&&this.goBack(),!this._current.next)return this._current.next=new Gi(this._current.number+1,this._current,0,!0,this.position.color,t,o,s),this._current=this._current.next,this._current.setElapsedMs(0),this.onChangePosition(),!0;let r;for(r=this._current.next;r;r=r.branch)r.activeBranch=!1;let a=this._current.next;for(r=this._current.next;r;r=r.branch){if(r.move instanceof ot&&t instanceof ot&&t.equals(r.move)||t===r.move)return this._current=r,this._current.activeBranch=!0,this.onChangePosition(),!0;a=r}return this._current=new Gi(this._current.number+1,this._current,a.branchIndex+1,!0,this.position.color,t,o,s),this._current.setElapsedMs(0),a.branch=this._current,this.onChangePosition(),!0}swapWithNextBranch(){return this._current.branch?Ct.swapWithPreviousBranch(this._current.branch):!1}swapWithPreviousBranch(){return Ct.swapWithPreviousBranch(this._current)}static swapWithPreviousBranch(t){const n=t.prev;if(!n||!n.next||n.next==t)return!1;if(n.next.branch===t){const i=n.next;return i.branch=t.branch,t.branch=i,n.next=t,[t.branchIndex,i.branchIndex]=[i.branchIndex,t.branchIndex],!0}for(let i=n.next;i.branch;i=i.branch)if(i.branch.branch===t){const s=i.branch;return s.branch=t.branch,t.branch=s,i.branch=t,[t.branchIndex,s.branchIndex]=[s.branchIndex,t.branchIndex],!0}return!1}removeCurrentMove(){const t=this._current;if(!this.goBack()){this._current.next=null;return}if(this._current.next===t)this._current.next=t.branch;else for(let i=this._current.next;i;i=i.branch)if(i.branch===t){i.branch=t.branch;break}let n=0;for(let i=this._current.next;i;i=i.branch)i.branchIndex=n,n+=1;this._current.next&&(this._current.next.activeBranch=!0),this.onChangePosition()}removeNextMove(){this._current.next=null}incrementRepetition(){const t=this.position.sfen;this.repetitionCounts[t]?this.repetitionCounts[t]+=1:(this.repetitionCounts[t]=1,this.repetitionStart[t]=this.current.number)}decrementRepetition(){const t=this.position.sfen;this.repetitionCounts[t]-=1,this.repetitionCounts[t]===0&&(delete this.repetitionCounts[t],delete this.repetitionStart[t])}get repetition(){return this.repetitionCounts[this.position.sfen]>=4}get perpetualCheck(){if(!this.repetition)return null;const t=this.position.sfen,n=this.repetitionStart[t];let i=!0,s=!0,o=this.position.color;for(let r=this.current;r.number>=n;r=r.prev)o=Rt(o),!r.isCheck&&(o===D.BLACK?i=!1:s=!1);return i?D.BLACK:s?D.WHITE:null}get usi(){let t="position sfen "+this.initialPosition.sfen+" moves";return this.movesBefore.forEach(n=>{n.move instanceof ot&&(t+=" "+n.move.usi)}),t}get usiAll(){let t=this.usi;for(let n=this._current.next;n;n=n.next){for(;!n.activeBranch;)n=n.branch;n.move instanceof ot&&(t+=" "+n.move.usi)}return t}get sfen(){return this.position.getSFEN(this._current.number+1)}forEach(t){this._forEach(t)}_forEach(t){let n=this._first;const i=[];for(;n;)t(n),n.branch&&i.push(n.branch),n.next?n=n.next:n=i.pop()||null}on(t,n){switch(t){case"changePosition":this.onChangePosition=n;break}}static newByUSI(t){const n="position startpos ",i="position sfen ",s="startpos ",o="sfen ",r="moves ";return t.startsWith(n)?Ct.newByUSIFromMoves(new Ot,t.slice(n.length)):t.startsWith(i)?Ct.newByUSIFromSFEN(t.slice(i.length)):t.startsWith(s)?Ct.newByUSIFromMoves(new Ot,t.slice(s.length)):t.startsWith(o)?Ct.newByUSIFromSFEN(t.slice(o.length)):t.startsWith(r)?Ct.newByUSIFromMoves(new Ot,t):new vs(t)}static newByUSIFromSFEN(t){const n=t.split(" ");if(n.length<4)return new vs(t);const i=Ot.newBySFEN(n.slice(0,4).join(" "));return i?Ct.newByUSIFromMoves(i,n.slice(4).join(" ")):new vs(t)}static newByUSIFromMoves(t,n){const i=new Ct(t);if(n.length===0)return i;const s=n.split(" ");if(s[0]!=="moves")return new vs(n);for(let o=1;o<s.length;o++){const r=uf(s[o]);if(!r)break;let a=i.position.createMove(r.from,r.to);if(!a)return new Ks(s[o]);r.promote&&(a=a.withPromote()),i.append(a,{ignoreValidation:!0})}return i}}const tb={:J.BLACK_NAME,:J.WHITE_NAME,:J.START_DATETIME,:J.END_DATETIME,:J.DATE,:J.TOURNAMENT,:J.STRATEGY,:J.TITLE,:J.TIME_LIMIT,:J.TIME_SPENT,:J.PLACE,:J.POSTED_ON,:J.NOTE,:J.BLACK_SHORT_NAME,:J.WHITE_SHORT_NAME,:J.OPUS_NO,:J.OPUS_NAME,:J.AUTHOR,:J.PUBLISHED_BY,:J.PUBLISHED_AT,:J.SOURCE,:J.LENGTH,:J.INTEGRITY,:J.CATEGORY,:J.AWARD},nb={blackName:"",whiteName:"",startDatetime:"",endDatetime:"",date:"",tournament:"",strategy:"",title:"",timeLimit:"",timeSpent:"",place:"",postedOn:"",note:"",blackShortName:"",whiteShortName:"",opusNo:"",opusName:"",author:"",publishedBy:"",publishedAt:"",source:"",length:"",integrity:"",category:"",award:""},Zc=[{prefix:/^#/,type:0,removePrefix:!1,isPosition:!1},{prefix:/^/,type:2,removePrefix:!0,isPosition:!0},{prefix:/^/,type:3,removePrefix:!0,isPosition:!0},{prefix:/^/,type:4,removePrefix:!0,isPosition:!0},{prefix:/^\|/,type:5,removePrefix:!1,isPosition:!0},{prefix:/^/,type:6,removePrefix:!1,isPosition:!0},{prefix:/^/,type:7,removePrefix:!1,isPosition:!0},{prefix:/^ *[0-9]+ +/,type:8,removePrefix:!1,isPosition:!1},{prefix:/^\*/,type:9,removePrefix:!0,isPosition:!1}];function ib(e){for(let n=0;n<Zc.length;n++){const i=Zc[n],s=e.match(i.prefix);if(s){const o=i.removePrefix?s[0].length:0;return{type:i.type,data:e.substring(o),isPosition:i.isPosition,metadataKey:""}}}const t=e.match(/^[^ ]+/);if(t){const n=t[0];return{type:1,data:e.substring(n.length),isPosition:!1,metadataKey:n.substring(0,n.length-1)}}return{type:10,data:e,isPosition:!1,metadataKey:""}}function sb(e,t){switch(t.trim()){case"":e.reset(we.STANDARD);return;case"":e.reset(we.HANDICAP_LANCE);return;case"":e.reset(we.HANDICAP_RIGHT_LANCE);return;case"":e.reset(we.HANDICAP_BISHOP);return;case"":e.reset(we.HANDICAP_ROOK);return;case"":e.reset(we.HANDICAP_ROOK_LANCE);return;case"":e.reset(we.HANDICAP_2PIECES);return;case"":e.reset(we.HANDICAP_4PIECES);return;case"":e.reset(we.HANDICAP_6PIECES);return;case"":e.reset(we.HANDICAP_8PIECES);return;case"":e.reset(we.EMPTY);return}return new nf(t)}const ob={:ce.INTERRUPT,:ce.RESIGN,:ce.IMPASS,:ce.REPETITION_DRAW,:ce.MATE,:ce.TIMEOUT,:ce.FOUL_WIN,:ce.FOUL_LOSE,:ce.ENTERING_OF_KING,:ce.WIN_BY_DEFAULT,:ce.LOSE_BY_DEFAULT},rb=/^ *([0-9]+) +[]?([][]|\u3000*)(||||||||||||||||||)\u3000*(?)(|\([1-9][1-9]\)) *(.*)$/,ab=/\( *([0-9]+):([0-9]+)\/[0-9: ]*\)/,lb=/^ *([0-9]+) +(||||||||||) *(.*)$/;function cb(e,t){if(t.length<21)return new el(t);const n=t[20],i=Kr(n);if(!i)return new el(t);for(let s=0;s<9;s+=1){const o=9-s,r=new $(o,i),a=s*2+1,l=t[a+1],c=qr(l);if(!c){e.remove(r);continue}const u=t[a]!=="v"?D.BLACK:D.WHITE;e.set(r,new ue(u,c))}}function eu(e,t){const n=t.split(/[ ]/);for(const i of n){if(!i||i==="")continue;const s=i[0],o=i.substring(1),r=qr(s),a=Kr(o)||1;if(!r)return new sf(i);e.add(r,a)}}function tu(e,t){const n=ab.exec(t);if(n){const i=n[1],s=n[2],o=Number.parseInt(i)*60+Number.parseInt(s);e.current.setElapsedMs(o*1e3)}}function ub(e,t){let n=lb.exec(t);if(n){const p=Number(n[1]),g=ob[n[2]],y=n[3];e.goto(p-1),e.append(g,{ignoreValidation:!0}),tu(e,y);return}if(n=rb.exec(t),!n)return new Ks(t);const i=Number(n[1]),s=n[2],o=n[3],r=n[4],a=n[5],l=n[6];if(i===0)return new ef(t);e.goto(i-1);let c,u;if(s.startsWith("")){if(!(e.current.move instanceof ot))return new tf(t);c=e.current.move.to}else{const p=hf(s[0]),g=Kr(s[1]);c=new $(p,g)}if(a==="")u=qr(o);else{const p=fr(a[1]),g=fr(a[2]);u=new $(p,g)}let h=e.position.createMove(u,c);if(!h)return new Ks(t);r===""&&(h=h.withPromote()),e.append(h,{ignoreValidation:!0}),tu(e,l)}function nu(e){const t=new pr,n=new Ct,i=e.split(/\r?\n/),s=new Ot;let o="",r=!1;for(const a of i){if(a==="")continue;const l=ib(a);if(r&&l.isPosition)return new Gl(a);let c;switch(l.type){case 1:{const u=tb[l.metadataKey];u?t.setStandardMetadata(u,l.data):t.setCustomMetadata(l.metadataKey,l.data);break}case 2:c=sb(s,l.data);break;case 3:c=eu(s.blackHand,l.data);break;case 4:c=eu(s.whiteHand,l.data);break;case 5:c=cb(s.board,l.data);break;case 6:s.setColor(D.BLACK);break;case 7:s.setColor(D.WHITE);break;case 8:r||(n.clear(s),n.first.comment=o,r=!0),c=ub(n,l.data);break;case 9:r?n.current.comment=lr(n.current.comment,l.data):o=lr(o,l.data);break}if(c)return c}return r||(n.clear(s),n.first.comment=o),n.goto(0),n.resetAllBranchSelection(),n.metadata=t,n}const hb={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:""};function db(e,t){let n="";const i=t.returnCode?t.returnCode:`
`;for(const s of e.standardMetadataKeys)n+=nb[s]+""+e.getStandardMetadata(s)+i;for(const s of e.customMetadataKeys)n+=s+""+e.getCustomMetadata(s)+i;return n}function fb(e,t){let n="";const i=t.returnCode?t.returnCode:`
`;n+=""+iu(e.whiteHand)+i,n+="          "+i,n+="+---------------------------+"+i;for(let s=0;s<9;s++){n+="|";for(let o=0;o<9;o++){const r=$.newByXY(o,s),a=e.board.at(r);a?a.color===D.BLACK?n+=" "+tl(a.type):n+="v"+tl(a.type):n+=" "}n+="|"+Wl(s+1)+i}return n+="+---------------------------+"+i,n+=""+iu(e.blackHand)+i,e.color===D.BLACK?n+=""+i:n+=""+i,n}function pb(e){let t="";return t+=ff(e.to.file),t+=Wl(e.to.rank),t+=pf(e.pieceType),e.promote&&(t+=""),e.from instanceof $?t+="("+e.from.file+e.from.rank+")":t+="",t}function iu(e){let t="";return e.forEach((n,i)=>{i>=1&&(t+=tl(n),i>=2&&(t+=q0(i)),t+="")}),t}function vf(e,t){let n="";const i=t.returnCode?t.returnCode:`
`;return n+="# KIF Generated by Electron Shogi"+i,n+=db(e.metadata,t),n+=fb(e.initialPosition,t),n+="---------------"+i,e.forEach(s=>{if(s.number!==0){s.isFirstBranch||(n+=i,n+=""+s.number+""+i),n+=s.number+" ",s.move instanceof ot?n+=pb(s.move):n+=hb[s.move];const o=bf(s.elapsedMs),r=mf(s.totalElapsedMs);n+=` (${o}/${r})`,s.isFirstBranch&&s.hasBranch&&(n+="+"),n+=i}if(s.comment.length!==0){const o=s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment;n+="*"+o.replaceAll(`
`,i+"*")+i}}),n}const bo=[{pattern:/^V/,type:0,sectionType:0},{pattern:/^'\*(.+)$/,type:1,sectionType:2},{pattern:/^'(.+)$/,type:2,sectionType:2},{pattern:/^N\+(.+)$/,type:3,sectionType:0},{pattern:/^N-(.+)$/,type:4,sectionType:0},{pattern:/^\$([^:]+):(.+)$/,type:5,sectionType:0},{pattern:/^PI([1-9]{2}[A-Z]{2})*$/,type:6,sectionType:0},{pattern:/^P[1-9]( \* |[-+][A-Z][A-Z]){9}$/,type:7,sectionType:0},{pattern:/^P[-+]([0-9]{2}[A-Z]{2})*/,type:8,sectionType:0},{pattern:/^[-+]$/,type:9,sectionType:0},{pattern:/^[-+][0-9]{4}[A-Z]{2}/,type:10,sectionType:1},{pattern:/^%[-+A-Z_]+/,type:11,sectionType:1},{pattern:/^T([0-9]+)/,type:12,sectionType:1}];function gb(e){const t=[],n=e.match(/^['N$]/)?[e]:e.split(",");for(const i of n)for(let s=0;s<bo.length;s++){const o=bo[s].pattern.exec(i);if(o){t.push({type:bo[s].type,line:i,args:o.slice(1),sectionType:bo[s].sectionType});break}}return t}const mb={EVENT:J.TITLE,SITE:J.PLACE,START_TIME:J.START_DATETIME,END_TIME:J.END_DATETIME,TIME_LIMIT:J.TIME_LIMIT,OPENING:J.STRATEGY},Vl={FU:B.PAWN,KY:B.LANCE,KE:B.KNIGHT,GI:B.SILVER,KI:B.GOLD,KA:B.BISHOP,HI:B.ROOK,OU:B.KING,TO:B.PROM_PAWN,NY:B.PROM_LANCE,NK:B.PROM_KNIGHT,NG:B.PROM_SILVER,UM:B.HORSE,RY:B.DRAGON};function bb(e,t){t.reset(we.STANDARD);for(let n=2;n+4<=e.length;n+=4){const i=Number(e[n]),s=Number(e[n+1]);t.board.remove(new $(i,s))}}function yb(e,t){const n=Number(e[1]);for(let i=0;i<9;i+=1){const s=9-i,o=i*3+2,r=e.slice(o,o+3);if(r[0]===" ")continue;const a=r[0]==="+"?D.BLACK:D.WHITE,l=Vl[r.slice(1)];if(!l)return new jr(r);t.board.set(new $(s,n),new ue(a,l))}}function _b(e,t){const n=e[1]==="+"?D.BLACK:D.WHITE;for(let i=2;i+4<=e.length;i+=4){const s=e.slice(i,i+4);if(s==="00AL"){const l=z0(t);n===D.BLACK?t.blackHand.forEach(c=>{t.blackHand.add(c,l[c])}):t.whiteHand.forEach(c=>{t.whiteHand.add(c,l[c])});return}const o=Number(s[0]),r=Number(s[1]),a=Vl[s.slice(2)];if(!a)return new jr(s);o!==0&&r!==0?t.board.set(new $(o,r),new ue(n,a)):n===D.BLACK?t.blackHand.add(a,1):t.whiteHand.add(a,1)}}function Sf(e,t){if((e[0]==="+"?D.BLACK:D.WHITE)!=t.color)return new Zd(e);const i=Number(e[1]),s=Number(e[2]),o=Number(e[3]),r=Number(e[4]),a=Vl[e.slice(5,7)];if(!a)return new jr(e);const l=i===0&&s===0?a:new $(i,s),c=new $(o,r);let u=t.createMove(l,c);if(!u)return new Ks(e);if(l instanceof $){const h=t.board.at(l);if(!h)return new Za(e);if(h.type!==a)if(h.promoted().type===a)u=u.withPromote();else return new Za(e)}return u}function vb(e){switch(e){case"%CHUDAN":return ce.INTERRUPT;case"%TORYO":return ce.RESIGN;case"%JISHOGI":return ce.IMPASS;case"%HIKIWAKE":return ce.DRAW;case"%SENNICHITE":return ce.REPETITION_DRAW;case"%TSUMI":return ce.MATE;case"%TIME_UP":return ce.TIMEOUT;case"%ILLEGAL_MOVE":return ce.FOUL_LOSE;case"%KACHI":return ce.ENTERING_OF_KING}}function Sb(e,t){return Sf(t,e)}function su(e){const t=new pr,n=new Ct,i=new Ot;i.reset(we.EMPTY);let s="",o=!1;const r=e.replace(/\r?\n\/(\r?\n[\s\S]*)?$/,"").split(/\r?\n/);for(const a of r)for(const l of gb(a)){if(l.sectionType===0&&o||l.sectionType===1&&!o)return new Gl(l.line);switch(l.type){case 0:break;case 1:o?n.current.comment=lr(n.current.comment,l.args[0]):s=lr(s,l.args[0]);break;case 2:break;case 3:t.setStandardMetadata(J.BLACK_NAME,l.args[0]);break;case 4:t.setStandardMetadata(J.WHITE_NAME,l.args[0]);break;case 5:{const c=mb[l.args[0]];c?t.setStandardMetadata(c,l.args[1]):t.setCustomMetadata(l.args[0],l.args[1]);break}case 6:bb(l.line,i);break;case 7:{const c=yb(l.line,i);if(c)return c;break}case 8:{const c=_b(l.line,i);if(c)return c;break}case 9:l.line[0]==="+"?i.setColor(D.BLACK):i.setColor(D.WHITE),n.clear(i),n.first.comment=s,o=!0;break;case 10:{const c=Sf(l.line,n.position);if(c instanceof Error)return c;n.append(c,{ignoreValidation:!0});break}case 11:{const c=vb(l.line);c&&n.append(c,{ignoreValidation:!0});break}case 12:n.current.setElapsedMs(Number(l.args[0])*1e3);break}}return o||(n.clear(i),n.first.comment=s),n.goto(0),n.resetAllBranchSelection(),n.metadata=t,n}function wb(e,t){let n="";const i=t.returnCode?t.returnCode:`
`,s=e.getStandardMetadata(J.BLACK_NAME)||e.getStandardMetadata(J.BLACK_SHORT_NAME);s&&(n+="N+"+s+i);const o=e.getStandardMetadata(J.WHITE_NAME)||e.getStandardMetadata(J.WHITE_SHORT_NAME);o&&(n+="N-"+o+i);const r=e.getStandardMetadata(J.TOURNAMENT)||e.getStandardMetadata(J.TITLE)||e.getStandardMetadata(J.OPUS_NAME)||e.getStandardMetadata(J.PUBLISHED_BY);r&&(n+="$EVENT:"+r+i);const a=e.getStandardMetadata(J.PLACE);a&&(n+="$SITE:"+a+i);const l=e.getStandardMetadata(J.START_DATETIME)||e.getStandardMetadata(J.DATE);l&&(n+="$START_TIME:"+l.slice(10)+i);const c=e.getStandardMetadata(J.DATE);c&&(n+="$END_TIME:"+c.slice(10)+i);const u=e.getStandardMetadata(J.STRATEGY);return u&&(n+="$OPENING:"+u+i),n}const gr={king:"OU",rook:"HI",dragon:"RY",bishop:"KA",horse:"UM",gold:"KI",silver:"GI",promSilver:"NG",knight:"KE",promKnight:"NK",lance:"KY",promLance:"NY",pawn:"FU",promPawn:"TO"};function ou(e){let t="";return e.forEach((n,i)=>{for(let s=0;s<i;s++)t+="00"+gr[n]}),t}function Eb(e,t){let n="";const i=t.returnCode?t.returnCode:`
`;for(let s=1;s<=9;s+=1){n+="P"+s;for(let o=9;o>=1;o-=1){const r=e.board.at(new $(o,s));r?r.color===D.BLACK?n+="+"+gr[r.type]:n+="-"+gr[r.type]:n+=" * "}n+=i}return n+="P+"+ou(e.blackHand)+i,n+="P-"+ou(e.whiteHand)+i,n+=(e.color===D.BLACK?"+":"-")+i,n}function ru(e){return e instanceof $?`${e.file}${e.rank}`:"00"}function wf(e){return(e.color===D.BLACK?"+":"-")+ru(e.from)+ru(e.to)+gr[e.promote?A0(e.pieceType):e.pieceType]}function Ib(e){switch(e){case ce.INTERRUPT:return"%CHUDAN";case ce.RESIGN:return"%TORYO";case ce.IMPASS:return"%JISHOGI";case ce.DRAW:return"%HIKIWAKE";case ce.REPETITION_DRAW:return"%SENNICHITE";case ce.MATE:return"%TSUMI";case ce.TIMEOUT:return"%TIME_UP";case ce.FOUL_LOSE:return"%ILLEGAL_MOVE";case ce.ENTERING_OF_KING:return"%KACHI"}}function au(e){return wf(e)}function Ef(e,t){let n="";const i=t.returnCode?t.returnCode:`
`;return n+="' CSA Generated by Electron Shogi"+i,n+="V2.2"+i,n+=wb(e.metadata,t),n+=Eb(e.initialPosition,t),e.moves.forEach(s=>{if(s.number===0)return;let o;s.move instanceof ot?o=wf(s.move):o=Ib(s.move),o&&(n+=o+i,n+="T"+Math.floor(s.elapsedMs/1e3)+i),s.comment&&(s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment).split(`
`).forEach(a=>{n+="'*"+a+i})}),n}var Wi=(e=>(e[e.USI=0]="USI",e[e.SFEN=1]="SFEN",e[e.KIF=2]="KIF",e[e.CSA=3]="CSA",e))(Wi||{});function kb(e){if(e.startsWith("position sfen ")||e.startsWith("position startpos ")||e.startsWith("sfen ")||e.startsWith("startpos ")||e.startsWith("moves "))return 0;if(Ot.isValidSFEN(e))return 1;const t=/(^|\n)[#0-9]/g,n=/(^|,|\n)[-+$%'VNPT]/g,i=e.match(t),s=e.match(n),o=i?i.length:0,r=s?s.length:0;return o>=r?2:3}function lu(e){return e instanceof jr?new Error(`${U.invalidPieceName}: ${e.data}`):e instanceof Zd?new Error(`${U.invalidTurn}: ${e.data}`):e instanceof Ks?new Error(`${U.invalidMove}: ${e.data}`):e instanceof ef?new Error(`${U.invalidMoveNumber}: ${e.data}`):e instanceof tf?new Error(`${U.invalidDestination}: ${e.data}`):e instanceof Za?new Error(`${U.pieceNotExists}: ${e.data}`):e instanceof Gl?new Error(`${U.invalidLine}: ${e.data}`):e instanceof nf?new Error(`${U.invalidHandicap}: ${e.data}`):e instanceof el?new Error(`${U.invalidBoard}: ${e.data}`):e instanceof sf?new Error(`${U.invalidHandPiece}: ${e.data}`):e instanceof vs?new Error(`${U.invalidUSI}: ${e.data}`):e}function Pb(e){switch(e){case J.BLACK_NAME:return U.sente;case J.WHITE_NAME:return U.gote;case J.START_DATETIME:return U.startDateTime;case J.END_DATETIME:return U.endDateTime;case J.DATE:return U.gameDate;case J.TOURNAMENT:return U.tournament;case J.STRATEGY:return U.strategy;case J.TITLE:return U.gameTitle;case J.TIME_LIMIT:return U.timeLimit;case J.TIME_SPENT:return U.elapsedTime;case J.PLACE:return U.place;case J.POSTED_ON:return U.postedOn;case J.NOTE:return U.note;case J.BLACK_SHORT_NAME:return U.senteShortName;case J.WHITE_SHORT_NAME:return U.goteShortName;case J.OPUS_NO:return U.opusNo;case J.OPUS_NAME:return U.opusName;case J.AUTHOR:return U.author;case J.PUBLISHED_BY:return U.publishedBy;case J.PUBLISHED_AT:return U.publishedOn;case J.SOURCE:return U.source;case J.LENGTH:return U.numberOfMoves;case J.INTEGRITY:return U.integrity;case J.CATEGORY:return U.recordCategory;case J.AWARD:return U.award}}function Ab(e){y0(e),S0(e)}class St{constructor(t,n){this.width=t,this.height=n}add(t){return new St(this.width+t.width,this.height+t.height)}reduce(t){return new St(this.width-t.width,this.height-t.height)}}class Tb{constructor(t,n,i,s){C(this,"x");C(this,"y");C(this,"width");C(this,"height");if(n&&i&&s)this.x=t,this.y=n,this.width=i,this.height=s;else{const o=JSON.parse(t);this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height}}get json(){return JSON.stringify({x:this.x,y:this.y,width:this.width,height:this.height})}}var _t=(e=>(e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e))(_t||{}),jl=(e=>(e.STANDARD="standard",e.CHERRY_BLOSSOM="cherry-blossom",e.AUTUMN="autumn",e.SNOW="snow",e.DARK="dark",e))(jl||{}),qn=(e=>(e.NONE="none",e.COVER="cover",e.CONTAIN="contain",e.TILE="tile",e))(qn||{}),ki=(e=>(e.HITOMOJI="hitomoji",e.HITOMOJI_DARK="hitomojiDark",e.HITOMOJI_GOTHIC="hitomojiGothic",e.HITOMOJI_GOTHIC_DARK="hitomojiGothicDark",e))(ki||{}),Mt=(e=>(e.LIGHT="light",e.WARM="warm",e.RESIN="resin",e.RESIN2="resin2",e.RESIN3="resin3",e.DARK="dark",e.GREEN="green",e.CHERRY_BLOSSOM="cherry-blossom",e.CUSTOM_IMAGE="custom-image",e))(Mt||{}),kn=(e=>(e.STANDARD="standard",e.DARK="dark",e.GREEN="green",e.CHERRY_BLOSSOM="cherry-blossom",e.CUSTOM_IMAGE="custom-image",e))(kn||{}),xs=(e=>(e.NONE="none",e.STANDARD="standard",e))(xs||{}),Rs=(e=>(e.NONE="none",e.STANDARD="standard",e))(Rs||{}),Ns=(e=>(e.NONE="none",e.STANDARD="standard",e))(Ns||{}),mr=(e=>(e.SINGLE="single",e.DOUBLE="double",e))(mr||{}),Ut=(e=>(e.RECORD_INFO="recordInfo",e.COMMENT="comment",e.SEARCH="search",e.PV="pv",e.CHART="chart",e.PERCENTAGE_CHART="percentageChart",e.INVISIBLE="invisible",e))(Ut||{}),Kl=(e=>(e.BLACK="black",e.EACH="each",e))(Kl||{}),nl=(e=>(e.ALL="all",e.ONLY_USER="onlyUser",e))(nl||{}),If=(e=>(e.BOOK="book",e.GAME="game",e))(If||{});function Cb(e,t){const n={...e,...t};switch(n.tabPaneType){case"double":switch(n.tab){case"comment":n.tab="recordInfo";break;case"chart":case"percentageChart":n.tab="pv";break}break}return e.topPaneHeightPercentage!==0&&e.topPaneHeightPercentage!==100&&(n.topPanePreviousHeightPercentage=e.topPaneHeightPercentage),Mb(n)||n}function il(e){return{language:Ri.JA,thema:"standard",backgroundImageType:"none",pieceImage:"hitomoji",boardImage:"resin2",pieceStandImage:"standard",boardLabelType:"standard",leftSideControlType:"standard",rightSideControlType:"standard",pieceVolume:30,clockVolume:30,clockPitch:500,clockSoundTarget:"onlyUser",boardFlipping:!1,tabPaneType:"double",tab:"recordInfo",tab2:"comment",topPaneHeightPercentage:60,topPanePreviousHeightPercentage:60,bottomLeftPaneWidthPercentage:60,returnCode:(e==null?void 0:e.returnCode)||`\r
`,autoSaveDirectory:(e==null?void 0:e.autoSaveDirectory)||"",translateEngineOptionName:!0,engineTimeoutSeconds:10,evaluationViewFrom:"each",coefficientInSigmoid:600,badMoveLevelThreshold1:5,badMoveLevelThreshold2:10,badMoveLevelThreshold3:20,badMoveLevelThreshold4:50,showElapsedTimeInRecordView:!0,showCommentInRecordView:!0,enableAppLog:!1,enableUSILog:!1,enableCSALog:!1,logLevel:_t.INFO,positionImageStyle:"book",positionImageSize:500,positionImageHeader:"",lastRecordFilePath:"",lastUSIEngineFilePath:"",lastImageExportFilePath:"",lastOtherFilePath:""}}function Mb(e){if(e.backgroundImageType!=="none"&&!e.backgroundImageFileURL)return new Error(U.backgroundImageFileNotSelected);if(e.boardImage==="custom-image"&&!e.boardImageFileURL)return new Error(U.boardImageFileNotSelected);if(e.pieceStandImage==="custom-image"&&!e.pieceStandImageFileURL)return new Error(U.pieceStandImageFileNotSelected);if(e.pieceVolume<0||e.pieceVolume>100)return new Error(U.pieceVolumeMustBe0To100Percent);if(e.clockVolume<0||e.clockVolume>100)return new Error(U.clockVolumeMustBe0To100Percent);if(e.clockPitch<220||e.clockPitch>880)return new Error(U.clockPitchMustBe220To880Hz);if(e.engineTimeoutSeconds<1||e.engineTimeoutSeconds>300)return new Error(U.engineTimeoutMustBe1To300Seconds);if(e.coefficientInSigmoid<=0)return new Error(U.coefficientInSigmoidMustBeGreaterThan0);if(e.badMoveLevelThreshold1<1||e.badMoveLevelThreshold1>100)return new Error("1%100%");if(e.badMoveLevelThreshold2<1||e.badMoveLevelThreshold2>100)return new Error("1%100%");if(e.badMoveLevelThreshold3<1||e.badMoveLevelThreshold3>100)return new Error("1%100%");if(e.badMoveLevelThreshold4<1||e.badMoveLevelThreshold4>100)return new Error("1%100%");if(e.badMoveLevelThreshold1>=e.badMoveLevelThreshold2)return new Error("");if(e.badMoveLevelThreshold2>=e.badMoveLevelThreshold3)return new Error("");if(e.badMoveLevelThreshold3>=e.badMoveLevelThreshold4)return new Error("")}const cu={};function Ui(e){if(cu[e])return;const t=document.createElement("img");t.src=e,cu[e]=t}const le={frame:{width:1471,height:959},board:{x:296.5,y:0,width:878,height:960,squreWidth:94.8,squreHeight:104,leftSquarePadding:12,topSquarePadding:12.2,leftPiecePadding:17.5,topPiecePadding:18.5,highlight:{selected:{"background-color":"#0088ff",opacity:"0.8"},lastMoveTo:{"background-color":"#44cc44",opacity:"0.8"},lastMoveFrom:{"background-color":"#44cc44",opacity:"0.4"}}},label:{fontSize:24},piece:{width:88,height:93},hand:{black:{x:1184,y:600},white:{x:0,y:0},width:288,height:360,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"}}},turn:{black:{x:1184,y:425},white:{x:0,y:492},width:288,height:45,fontSize:32},playerName:{black:{x:1184,y:480},white:{x:0,y:370},width:288,height:45,fontSize:25},clock:{black:{x:1184,y:535},white:{x:0,y:425},width:288,height:55,fontSize:40},control:{left:{x:0,y:547,width:288,height:412,fontSize:26},right:{x:1184,y:0,width:288,height:412,fontSize:26}}},uu={[ki.HITOMOJI]:{black:{pawn:"./piece/hitomoji/black_pawn.png",lance:"./piece/hitomoji/black_lance.png",knight:"./piece/hitomoji/black_knight.png",silver:"./piece/hitomoji/black_silver.png",gold:"./piece/hitomoji/black_gold.png",bishop:"./piece/hitomoji/black_bishop.png",rook:"./piece/hitomoji/black_rook.png",king:"./piece/hitomoji/black_king.png",king2:"./piece/hitomoji/black_king2.png",promPawn:"./piece/hitomoji/black_prom_pawn.png",promLance:"./piece/hitomoji/black_prom_lance.png",promKnight:"./piece/hitomoji/black_prom_knight.png",promSilver:"./piece/hitomoji/black_prom_silver.png",horse:"./piece/hitomoji/black_horse.png",dragon:"./piece/hitomoji/black_dragon.png"},white:{pawn:"./piece/hitomoji/white_pawn.png",lance:"./piece/hitomoji/white_lance.png",knight:"./piece/hitomoji/white_knight.png",silver:"./piece/hitomoji/white_silver.png",gold:"./piece/hitomoji/white_gold.png",bishop:"./piece/hitomoji/white_bishop.png",rook:"./piece/hitomoji/white_rook.png",king:"./piece/hitomoji/white_king.png",king2:"./piece/hitomoji/white_king2.png",promPawn:"./piece/hitomoji/white_prom_pawn.png",promLance:"./piece/hitomoji/white_prom_lance.png",promKnight:"./piece/hitomoji/white_prom_knight.png",promSilver:"./piece/hitomoji/white_prom_silver.png",horse:"./piece/hitomoji/white_horse.png",dragon:"./piece/hitomoji/white_dragon.png"}},[ki.HITOMOJI_DARK]:{black:{pawn:"./piece/hitomoji_dark/black_pawn.png",lance:"./piece/hitomoji_dark/black_lance.png",knight:"./piece/hitomoji_dark/black_knight.png",silver:"./piece/hitomoji_dark/black_silver.png",gold:"./piece/hitomoji_dark/black_gold.png",bishop:"./piece/hitomoji_dark/black_bishop.png",rook:"./piece/hitomoji_dark/black_rook.png",king:"./piece/hitomoji_dark/black_king.png",king2:"./piece/hitomoji_dark/black_king2.png",promPawn:"./piece/hitomoji_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_dark/black_prom_silver.png",horse:"./piece/hitomoji_dark/black_horse.png",dragon:"./piece/hitomoji_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_dark/white_pawn.png",lance:"./piece/hitomoji_dark/white_lance.png",knight:"./piece/hitomoji_dark/white_knight.png",silver:"./piece/hitomoji_dark/white_silver.png",gold:"./piece/hitomoji_dark/white_gold.png",bishop:"./piece/hitomoji_dark/white_bishop.png",rook:"./piece/hitomoji_dark/white_rook.png",king:"./piece/hitomoji_dark/white_king.png",king2:"./piece/hitomoji_dark/white_king2.png",promPawn:"./piece/hitomoji_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_dark/white_prom_silver.png",horse:"./piece/hitomoji_dark/white_horse.png",dragon:"./piece/hitomoji_dark/white_dragon.png"}},[ki.HITOMOJI_GOTHIC]:{black:{pawn:"./piece/hitomoji_gothic/black_pawn.png",lance:"./piece/hitomoji_gothic/black_lance.png",knight:"./piece/hitomoji_gothic/black_knight.png",silver:"./piece/hitomoji_gothic/black_silver.png",gold:"./piece/hitomoji_gothic/black_gold.png",bishop:"./piece/hitomoji_gothic/black_bishop.png",rook:"./piece/hitomoji_gothic/black_rook.png",king:"./piece/hitomoji_gothic/black_king.png",king2:"./piece/hitomoji_gothic/black_king2.png",promPawn:"./piece/hitomoji_gothic/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic/black_prom_silver.png",horse:"./piece/hitomoji_gothic/black_horse.png",dragon:"./piece/hitomoji_gothic/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic/white_pawn.png",lance:"./piece/hitomoji_gothic/white_lance.png",knight:"./piece/hitomoji_gothic/white_knight.png",silver:"./piece/hitomoji_gothic/white_silver.png",gold:"./piece/hitomoji_gothic/white_gold.png",bishop:"./piece/hitomoji_gothic/white_bishop.png",rook:"./piece/hitomoji_gothic/white_rook.png",king:"./piece/hitomoji_gothic/white_king.png",king2:"./piece/hitomoji_gothic/white_king2.png",promPawn:"./piece/hitomoji_gothic/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic/white_prom_silver.png",horse:"./piece/hitomoji_gothic/white_horse.png",dragon:"./piece/hitomoji_gothic/white_dragon.png"}},[ki.HITOMOJI_GOTHIC_DARK]:{black:{pawn:"./piece/hitomoji_gothic_dark/black_pawn.png",lance:"./piece/hitomoji_gothic_dark/black_lance.png",knight:"./piece/hitomoji_gothic_dark/black_knight.png",silver:"./piece/hitomoji_gothic_dark/black_silver.png",gold:"./piece/hitomoji_gothic_dark/black_gold.png",bishop:"./piece/hitomoji_gothic_dark/black_bishop.png",rook:"./piece/hitomoji_gothic_dark/black_rook.png",king:"./piece/hitomoji_gothic_dark/black_king.png",king2:"./piece/hitomoji_gothic_dark/black_king2.png",promPawn:"./piece/hitomoji_gothic_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/black_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/black_horse.png",dragon:"./piece/hitomoji_gothic_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic_dark/white_pawn.png",lance:"./piece/hitomoji_gothic_dark/white_lance.png",knight:"./piece/hitomoji_gothic_dark/white_knight.png",silver:"./piece/hitomoji_gothic_dark/white_silver.png",gold:"./piece/hitomoji_gothic_dark/white_gold.png",bishop:"./piece/hitomoji_gothic_dark/white_bishop.png",rook:"./piece/hitomoji_gothic_dark/white_rook.png",king:"./piece/hitomoji_gothic_dark/white_king.png",king2:"./piece/hitomoji_gothic_dark/white_king2.png",promPawn:"./piece/hitomoji_gothic_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/white_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/white_horse.png",dragon:"./piece/hitomoji_gothic_dark/white_dragon.png"}}};function xb(e){switch(e){default:return"./board/grid.svg";case Mt.DARK:return"./board/grid_white.svg"}}function Rb(e,t){switch(e){case Mt.LIGHT:return"./board/wood_light.png";case Mt.WARM:return"./board/wood_warm.png";case Mt.CUSTOM_IMAGE:return t||null}return null}const Nb={[Mt.LIGHT]:"rgba(0, 0, 0, 0)",[Mt.WARM]:"rgba(0, 0, 0, 0)",[Mt.RESIN]:"#d69b00",[Mt.RESIN2]:"#efbf63",[Mt.RESIN3]:"#ad7624",[Mt.DARK]:"#333333",[Mt.GREEN]:"#598459",[Mt.CHERRY_BLOSSOM]:"#ecb6b6",[Mt.CUSTOM_IMAGE]:"rgba(0, 0, 0, 0)"};function Ob(e,t){switch(e){case kn.CUSTOM_IMAGE:return t||null}return null}const Lb={[kn.STANDARD]:"#8b4513",[kn.DARK]:"#333333",[kn.GREEN]:"#527a52",[kn.CHERRY_BLOSSOM]:"#e8a9a9",[kn.CUSTOM_IMAGE]:"rgba(0, 0, 0, 0)"},Bb={black:{pawn:{row:3,column:0,width:2},lance:{row:2,column:0,width:1},knight:{row:2,column:1,width:1},silver:{row:1,column:0,width:1},gold:{row:1,column:1,width:1},bishop:{row:0,column:0,width:1},rook:{row:0,column:1,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}},white:{pawn:{row:0,column:0,width:2},lance:{row:1,column:1,width:1},knight:{row:1,column:0,width:1},silver:{row:2,column:1,width:1},gold:{row:2,column:0,width:1},bishop:{row:3,column:1,width:1},rook:{row:3,column:0,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}}},Db={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};class Fb{constructor(t,n,i,s,o,r){C(this,"pieceImages");C(this,"boardGridImage");C(this,"boardTextureImage");C(this,"pieceStandImage");this.boardImageType=n,this.pieceStandImageType=i,this.boardLabelType=s,this.pieceImages=uu[t]||uu[ki.HITOMOJI],this.boardGridImage=xb(n),this.boardTextureImage=Rb(n,o),this.pieceStandImage=Ob(i,r)}preload(){Ui(this.boardGridImage),this.boardTextureImage&&Ui(this.boardTextureImage),this.pieceStandImage&&Ui(this.pieceStandImage),Object.values(this.pieceImages.black).forEach(Ui),Object.values(this.pieceImages.white).forEach(Ui)}build(t,n,i,s,o,r){let a=t.width/le.frame.width;le.frame.height*a>t.height&&(a=t.height/le.frame.height);const l=()=>{const ne=le.frame.height*a,re=le.frame.width*a;return{style:{height:ne+"px",width:re+"px"},size:new St(re,ne)}},c=()=>{const ne=le.board.x*a,re=le.board.y*a,oe=le.board.width*a,Oe=le.board.height*a,me={"background-color":Nb[this.boardImageType],left:ne+"px",top:re+"px",height:Oe+"px",width:oe+"px"};return{gridImagePath:this.boardGridImage,textureImagePath:this.boardTextureImage,x:ne,y:re,style:me}},u=ne=>{const re=[];if(this.boardLabelType==xs.NONE)return re;const oe=le.label.fontSize*a,Oe=oe*.1,Pe={color:"black","font-size":oe+"px","font-weight":"bold","text-shadow":`${Oe}px ${Oe}px  ${Oe}px white`};for(let me=1;me<=9;me++){const it=ne.x-oe*.5+(r?0:le.board.width)*a+le.board.leftPiecePadding*.5*a*(r?1:-1),lt=ne.y-oe*.5+(le.board.topSquarePadding+((r?10-me:me)-.5)*le.board.squreHeight)*a;re.push({id:"rank"+me,character:Db[me],style:{left:it+"px",top:lt+"px",...Pe}})}for(let me=1;me<=9;me++){const it=ne.x-oe*.5+(le.board.leftPiecePadding+(9.5-(r?10-me:me))*le.board.squreWidth)*a,lt=ne.y-oe*.6+(r?le.board.height:0)*a+le.board.topSquarePadding*.7*a*(r?-1:1);re.push({id:"file"+me,character:String(me),style:{left:it+"px",top:lt+"px",...Pe}})}return re},h=ne=>{const re=[];return n.board.listNonEmptySquares().forEach(oe=>{const Oe=n.board.at(oe),Pe=Oe.id+oe.index,me=r?Rt(Oe.color):Oe.color,it=Oe.type==B.KING&&Oe.color==D.BLACK?"king2":Oe.type,lt=this.pieceImages[me][it],mt=ne.x+(le.board.leftPiecePadding+le.board.squreWidth*(r?oe.opposite:oe).x)*a,Ye=ne.y+(le.board.topPiecePadding+le.board.squreHeight*(r?oe.opposite:oe).y)*a,wt=le.piece.width*a,Ke=le.piece.height*a;re.push({id:Pe,imagePath:lt,style:{left:mt+"px",top:Ye+"px",width:wt+"px",height:Ke+"px"}})}),re},p=ne=>{const re=[];return $.all.forEach(oe=>{const Oe=oe.index,{file:Pe}=oe,{rank:me}=oe,it=ne.x+(le.board.leftSquarePadding+le.board.squreWidth*(r?oe.opposite:oe).x)*a,lt=ne.y+(le.board.topSquarePadding+le.board.squreHeight*(r?oe.opposite:oe).y)*a,mt=le.board.squreWidth*a,Ye=le.board.squreHeight*a,wt={left:it+"px",top:lt+"px",width:mt+"px",height:Ye+"px"};let Ke=wt;i&&oe.equals(i.to)&&(Ke={...Ke,...le.board.highlight.lastMoveTo}),i&&i.from instanceof $&&oe.equals(i.from)&&(Ke={...Ke,...le.board.highlight.lastMoveFrom}),s instanceof $&&s.equals(oe)&&(Ke={...Ke,...le.board.highlight.selected}),re.push({id:Oe,file:Pe,rank:me,style:wt,backgroundStyle:Ke})}),re},g=(ne,re)=>{const oe=r?Rt(ne):ne,Oe=Lb[this.pieceStandImageType],Pe=le.hand[oe].x*a,me=le.hand[oe].y*a,it=le.hand.width*a,lt=le.hand.height*a,mt={"background-color":Oe,left:Pe+"px",top:me+"px",width:it+"px",height:lt+"px"},Ye=[],wt=[];return k0.forEach(Ke=>{const bt=re.count(Ke),xe=Bb[oe][Ke],sn=le.hand.width/2*xe.width*a,T=le.hand.height/4*a,R=sn*xe.column,F=T*xe.row,j=le.piece.width*a,q=le.piece.height*a,ee=Math.max(sn-j*bt,0)/(bt*2),ae=(sn-j-ee*2)/Math.max(bt-1,1);for(let he=bt-1;he>=0;he-=1){const fe=Ke+he,be=this.pieceImages[oe][Ke],ve=R+ee+ae*he,Re=F;Ye.push({id:fe,imagePath:be,style:{left:ve+"px",top:Re+"px",width:j+"px",height:q+"px"}})}const te=Ke,se={left:R+"px",top:F+"px",width:sn+"px",height:T+"px"};let X=se;s&&s instanceof ue&&s.color===ne&&s.type===Ke&&(X={...X,...le.hand.highlight.selected}),wt.push({id:te,type:Ke,style:se,backgroundStyle:X})}),{textureImagePath:this.pieceStandImage,style:mt,pieces:Ye,pointers:wt}},y=(ne,re)=>{if(!re)return null;const oe=r?Rt(re.color):re.color,Oe=r?re.to.opposite:re.to,Pe=new ue(oe,re.pieceType),me=Pe.promoted(),it=Pe.unpromoted(),lt=this.pieceImages[oe][me.type],mt=this.pieceImages[oe][it.type],Ye=ne.x+(le.board.leftSquarePadding+le.board.squreWidth*(Oe.x===0?0:Oe.x===8?7:Oe.x-.5))*a,wt=ne.y+(le.board.topSquarePadding+le.board.squreHeight*Oe.y)*a,Ke=le.board.squreWidth*2*a,bt=le.board.squreHeight*a,xe={left:Ye+"px",top:wt+"px",width:Ke+"px",height:bt+"px","font-size":bt/4+"px"};return{promoteImagePath:lt,notPromoteImagePath:mt,style:xe}},b=()=>{const ne=n.color,re=r?Rt(ne):ne,oe=2;return{style:{left:le.turn[re].x*a-oe+"px",top:le.turn[re].y*a-oe+"px",width:le.turn.width*a-oe+"px",height:le.turn.height*a-oe+"px","font-size":le.turn.fontSize*a+"px","border-radius":le.turn.height*a*.4+"px","border-width":oe+"px","border-style":"solid"}}},v=ne=>{const re=r?Rt(ne):ne;return{style:{left:le.playerName[re].x*a+"px",top:le.playerName[re].y*a+"px",width:le.playerName.width*a+"px",height:le.playerName.height*a+"px","font-size":le.playerName.fontSize*a+"px"}}},_=ne=>{const re=r?Rt(ne):ne;return{style:{left:le.clock[re].x*a+"px",top:le.clock[re].y*a+"px",width:le.clock.width*a+"px",height:le.clock.height*a+"px","font-size":le.clock.fontSize*a+"px"}}},E=()=>({left:{style:{left:le.control.left.x*a+"px",top:le.control.left.y*a+"px",width:le.control.left.width*a+"px",height:le.control.left.height*a+"px","font-size":le.control.left.fontSize*a+"px"}},right:{style:{left:le.control.right.x*a+"px",top:le.control.right.y*a+"px",width:le.control.right.width*a+"px",height:le.control.right.height*a+"px","font-size":le.control.right.fontSize*a+"px"}}}),w=l(),k=c(),A=u(k),O=h(k),G=p(k),W=g(D.BLACK,n.hand(D.BLACK)),Z=g(D.WHITE,n.hand(D.WHITE)),Y=y(k,o),Q=b(),ye=v(D.BLACK),de=v(D.WHITE),Le=_(D.BLACK),Ie=_(D.WHITE),Ee=E();return{frame:w,board:k,labels:A,piece:O,square:G,blackHand:W,whiteHand:Z,promotion:Y,turn:Q,blackPlayerName:ye,whitePlayerName:de,blackClock:Le,whiteClock:Ie,control:Ee}}}const $b=ze({name:"BoardView",props:{pieceImageType:{type:String,required:!0},boardImageType:{type:String,required:!0},customBoardImageUrl:{type:String,required:!1,default:void 0},pieceStandImageType:{type:String,required:!0},customPieceStandImageUrl:{type:String,required:!1,default:void 0},boardLabelType:{type:String,required:!0},maxSize:{type:St,required:!0},position:{type:Object,required:!0},lastMove:{type:Object,required:!1,default:null},flip:{type:Boolean,required:!1},allowEdit:{type:Boolean,required:!1},allowMove:{type:Boolean,required:!1},blackPlayerName:{type:String,required:!1,default:""},whitePlayerName:{type:String,required:!1,default:""},blackPlayerTime:{type:Number,required:!1,default:void 0},blackPlayerByoyomi:{type:Number,required:!1,default:void 0},whitePlayerTime:{type:Number,required:!1,default:void 0},whitePlayerByoyomi:{type:Number,required:!1,default:void 0},nextMoveLabel:{type:String,required:!1,default:""}},emits:["resize","move","edit"],setup(e,t){const n=yn({pointer:null,reservedMove:null}),i=()=>{n.pointer=null,n.reservedMove=null};ti([()=>e.position,()=>e.allowEdit,()=>e.allowMove],()=>{i()});const s=()=>{i()},o=(w,k,A)=>{const O=n.pointer;if(i(),!(w instanceof $&&O instanceof $&&w.equals(O))&&!(w instanceof ue&&O instanceof ue&&w.equals(O))){if(O){const G=O,W=w instanceof $?w:w.color;if(e.allowEdit&&e.position.isValidEditing(G,W)){t.emit("edit",{move:{from:O,to:W}});return}if(e.allowMove&&w instanceof $){const Z=O instanceof $?O:O.type,Y=w,Q=e.position.createMove(Z,Y);if(!Q)return;const ye=e.position.isValidMove(Q),de=e.position.isValidMove(Q.withPromote());if(ye&&de){n.reservedMove=Q;return}if(ye){t.emit("move",Q);return}if(de){t.emit("move",Q.withPromote());return}}}!e.allowMove&&!e.allowEdit||k||!e.allowEdit&&A!==e.position.color||(n.pointer=w)}},r=(w,k,A)=>{w.stopPropagation(),w.preventDefault();const O=new $(k,A),G=e.position.board.at(O);o(O,!G,G==null?void 0:G.color)},a=(w,k,A)=>{w.stopPropagation(),w.preventDefault();const O=e.position.hand(k).count(A)===0;o(new ue(k,A),O,k)},l=(w,k,A)=>{w.stopPropagation(),w.preventDefault(),i();const O=new $(k,A);e.allowEdit&&e.position.board.at(O)&&t.emit("edit",{rotate:O})},c=w=>{w.stopPropagation(),w.preventDefault();const k=n.reservedMove;i(),k&&e.position.isValidMove(k.withPromote())&&t.emit("move",k.withPromote())},u=w=>{w.stopPropagation(),w.preventDefault();const k=n.reservedMove;i(),k&&e.position.isValidMove(k)&&t.emit("move",k)},h=Ae(()=>{const w=new Fb(e.pieceImageType,e.boardImageType,e.pieceStandImageType,e.boardLabelType,e.customBoardImageUrl,e.customPieceStandImageUrl);return w.preload(),w}),p=Ae(()=>{const w=h.value.build(e.maxSize,e.position,e.lastMove,n.pointer,n.reservedMove,e.flip);return t.emit("resize",w.frame.size),w}),g=(w,k)=>w?yf(w):k!==void 0?""+k:"0:00:00",y=(w,k)=>{if(!w&&!k)return"normal";const A=(w||0)+(k||0);return A<=5?"danger":A<=10?"warning":"normal"},b=Ae(()=>g(e.blackPlayerTime,e.blackPlayerByoyomi)),v=Ae(()=>y(e.blackPlayerTime,e.blackPlayerByoyomi)),_=Ae(()=>g(e.whitePlayerTime,e.whitePlayerByoyomi)),E=Ae(()=>y(e.whitePlayerTime,e.whitePlayerByoyomi));return{clickFrame:s,clickSquare:r,clickHand:a,clickSquareR:l,clickPromote:c,clickNotPromote:u,layout:p,blackPlayerTimeText:b,blackPlayerTimeSeverity:v,whitePlayerTimeText:_,whitePlayerTimeSeverity:E,Color:D}}});const Ge=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},Hb=["src"],Ub=["src"],zb={class:"player-name-text"},Gb={class:"clock-text"},Wb={class:"player-name-text"},Vb={class:"clock-text"},jb=["src"],Kb=["onClick","onContextmenu"],qb=["src"],Yb=["src"],Xb=["onClick"],Jb=["src"],Qb=["src"],Zb=["onClick"],e1=["src"],t1=["src"];function n1(e,t,n,i,s,o){return M(),N("div",null,[d("div",{class:"frame",style:_e(e.layout.frame.style),onClick:t[2]||(t[2]=r=>e.clickFrame())},[e.layout.board.textureImagePath?(M(),N("div",{key:0,style:_e(e.layout.board.style)},[d("img",{class:"full",src:e.layout.board.textureImagePath},null,8,Hb)],4)):ie("",!0),d("div",{style:_e(e.layout.board.style)},[d("img",{class:"full",src:e.layout.board.gridImagePath},null,8,Ub)],4),d("div",{class:Ze(["player-name",{active:e.position.color=="black"}]),style:_e(e.layout.blackPlayerName.style)},[d("span",zb,""+I(e.blackPlayerName),1)],6),d("div",{class:Ze(["clock",e.blackPlayerTimeSeverity]),style:_e(e.layout.blackClock.style)},[d("span",Gb,I(e.blackPlayerTimeText),1)],6),d("div",{class:Ze(["player-name",{active:e.position.color=="white"}]),style:_e(e.layout.whitePlayerName.style)},[d("span",Wb,""+I(e.whitePlayerName),1)],6),d("div",{class:Ze(["clock",e.whitePlayerTimeSeverity]),style:_e(e.layout.whiteClock.style)},[d("span",Vb,I(e.whitePlayerTimeText),1)],6),(M(!0),N(ke,null,Ue(e.layout.square,r=>(M(),N("div",{key:r.id,style:_e(r.backgroundStyle)},null,4))),128)),(M(!0),N(ke,null,Ue(e.layout.piece,r=>(M(),N("div",{key:r.id,style:_e(r.style)},[d("img",{class:"full",src:r.imagePath},null,8,jb)],4))),128)),(M(!0),N(ke,null,Ue(e.layout.labels,r=>(M(),N("div",{key:r.id,style:_e(r.style)},I(r.character),5))),128)),(M(!0),N(ke,null,Ue(e.layout.square,r=>(M(),N("div",{key:r.id,style:_e(r.style),onClick:a=>e.clickSquare(a,r.file,r.rank),onContextmenu:a=>e.clickSquareR(a,r.file,r.rank)},null,44,Kb))),128)),e.layout.blackHand.textureImagePath?(M(),N("div",{key:1,style:_e(e.layout.blackHand.style)},[d("img",{class:"full",src:e.layout.blackHand.textureImagePath},null,8,qb)],4)):ie("",!0),d("div",{class:"hand",style:_e(e.layout.blackHand.style)},[(M(!0),N(ke,null,Ue(e.layout.blackHand.pointers,r=>(M(),N("div",{key:r.id,style:_e(r.backgroundStyle)},null,4))),128)),(M(!0),N(ke,null,Ue(e.layout.blackHand.pieces,r=>(M(),N("div",{key:r.id,style:_e(r.style)},[d("img",{class:"full",src:r.imagePath},null,8,Yb)],4))),128)),(M(!0),N(ke,null,Ue(e.layout.blackHand.pointers,r=>(M(),N("div",{key:r.id,style:_e(r.style),onClick:a=>e.clickHand(a,e.Color.BLACK,r.type)},null,12,Xb))),128))],4),e.layout.whiteHand.textureImagePath?(M(),N("div",{key:2,style:_e(e.layout.whiteHand.style)},[d("img",{class:"full",src:e.layout.whiteHand.textureImagePath},null,8,Jb)],4)):ie("",!0),d("div",{class:"hand",style:_e(e.layout.whiteHand.style)},[(M(!0),N(ke,null,Ue(e.layout.whiteHand.pointers,r=>(M(),N("div",{key:r.id,style:_e(r.backgroundStyle)},null,4))),128)),(M(!0),N(ke,null,Ue(e.layout.whiteHand.pieces,r=>(M(),N("div",{key:r.id,style:_e(r.style)},[d("img",{class:"full",src:r.imagePath},null,8,Qb)],4))),128)),(M(!0),N(ke,null,Ue(e.layout.whiteHand.pointers,r=>(M(),N("div",{key:r.id,style:_e(r.style),onClick:a=>e.clickHand(a,e.Color.WHITE,r.type)},null,12,Zb))),128))],4),e.layout.promotion?(M(),N("div",{key:3,class:"promotion-selector",style:_e(e.layout.promotion.style)},[d("div",{class:"select-button promote",onClick:t[0]||(t[0]=r=>e.clickPromote(r))},[d("img",{class:"full",src:e.layout.promotion.promoteImagePath},null,8,e1)]),d("div",{class:"select-button not-promote",onClick:t[1]||(t[1]=r=>e.clickNotPromote(r))},[d("img",{class:"full",src:e.layout.promotion.notPromoteImagePath},null,8,t1)])],4)):ie("",!0),d("div",{class:"turn",style:_e(e.layout.turn.style)},I(e.nextMoveLabel),5),d("div",{style:_e(e.layout.control.left.style)},[Va(e.$slots,"left-control",{},void 0,!0)],4),d("div",{style:_e(e.layout.control.right.style)},[Va(e.$slots,"right-control",{},void 0,!0)],4)],4)])}const ql=Ge($b,[["render",n1],["__scopeId","data-v-ca01764d"]]),nn="es://human",Yl="es://usi-engine/";function Pn(e){return e.startsWith(Yl)}function kf(){const e=Date.now(),t=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16);return Yl+`${e}/${t}`}const i1=Object.freeze(Object.defineProperty({__proto__:null,ES_HUMAN:nn,ES_USI_ENGINE:Yl,isUSIEngine:Pn,issueEngineURI:kf},Symbol.toStringTag,{value:"Module"})),Pf="USI_Ponder",s1="USI_MultiPV",o1="Threads",r1="NumberOfThreads",a1="MultiPV";function Ii(e){if(e){if(e.value!==void 0)return e.value;if(e.default!==void 0)return e.type==="string"&&e.default==="<empty>"?"":e.default}}function Af(){return{uri:"",name:"",defaultName:"",author:"",path:"",options:{}}}function l1(e){const t=JSON.parse(JSON.stringify(e));return t.uri=kf(),t.name=U.copyOf(t.name),t}function c1(e,t){e.uri=t.uri,e.name=t.name,Object.keys(t.options).forEach(n=>{e.options[n]&&(e.options[n].value=t.options[n].value)})}class Wn{constructor(t){C(this,"engines",{});if(t){const n=JSON.parse(t);for(const i in n.engines)Pn(i)&&(this.engines[i]={...Af(),...n.engines[i],uri:i})}}hasEngine(t){return!!this.engines[t]}addEngine(t){this.engines[t.uri]=t}updateEngine(t){return this.engines[t.uri]?(this.engines[t.uri]=t,!0):!1}removeEngine(t){return this.engines[t]?(delete this.engines[t],!0):!1}getEngine(t){return this.engines[t]}get engineList(){return Object.values(this.engines).sort((t,n)=>t.name!==n.name?t.name>n.name?1:-1:t.defaultName!==n.defaultName?t.defaultName>n.defaultName?1:-1:t.uri>n.uri?1:-1)}get json(){return JSON.stringify(this)}get jsonWithIndent(){return JSON.stringify(this,void 0,2)}getClone(){return new Wn(this.json)}}function u1(){return{enableNumber:!1,number:20}}function h1(){return{enableNumber:!1,number:100}}function d1(){return{maxSeconds:5}}var $n=(e=>(e.NONE="none",e.INSERT="insert",e.APPEND="append",e.OVERWRITE="overwrite",e))($n||{});function br(){return{startCriteria:u1(),endCriteria:h1(),perMoveCriteria:d1(),commentBehavior:"insert"}}function hu(){return{name:"",uri:nn}}function yr(){return{black:hu(),white:hu(),timeLimit:{timeSeconds:0,byoyomi:30,increment:0},enableEngineTimeout:!1,humanIsFront:!0,enableComment:!0,enableAutoSave:!0,repeat:1,swapPlayers:!1,maxMoves:1e3}}function Tf(e){if(e.timeLimit.timeSeconds===0&&e.timeLimit.byoyomi===0)return new Error("0");if(e.timeLimit.byoyomi!==0&&e.timeLimit.increment!==0)return new Error("")}function f1(e){const t=Tf(e);if(t)return t;if(e.enableAutoSave)return new Error("Web")}function sl(){return{}}function p1(e){if(!e.usi)return new Error("");for(const t of e.secondaries||[])if(!t.usi)return new Error("")}const g1={async getRecordPathFromProcArg(){return""},updateAppState(){},openExplorer(){},async showOpenRecordDialog(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async openRecord(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async showSaveRecordDialog(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async saveRecord(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async showSelectFileDialog(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async showSelectDirectoryDialog(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async showSelectImageDialog(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async exportCaptureAsPNG(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async exportCaptureAsJPEG(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async loadAppSetting(){const e=localStorage.getItem("appSetting");return JSON.stringify(e?{...il(),...JSON.parse(e)}:il())},async saveAppSetting(e){localStorage.setItem("appSetting",e)},async loadResearchSetting(){const e=localStorage.getItem("researchSetting");return JSON.stringify(e?{...sl(),...JSON.parse(e)}:sl())},async saveResearchSetting(e){localStorage.setItem("researchSetting",e)},async loadAnalysisSetting(){const e=localStorage.getItem("analysisSetting");return JSON.stringify(e?{...br(),...JSON.parse(e)}:br())},async saveAnalysisSetting(e){localStorage.setItem("analysisSetting",e)},async loadGameSetting(){const e=localStorage.getItem("gameSetting");return JSON.stringify(e?{...yr(),...JSON.parse(e)}:yr())},async saveGameSetting(e){localStorage.setItem("gameSetting",e)},async loadCSAGameSettingHistory(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async saveCSAGameSettingHistory(e){localStorage.setItem("csaGameSettingHistory",e)},async loadUSIEngineSetting(){return new Wn().json},async saveUSIEngineSetting(){},async showSelectUSIEngineDialog(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async getUSIEngineInfo(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async sendUSISetOption(){},async usiLaunch(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async usiGo(){},async usiGoPonder(){},async usiPonderHit(){},async usiGoInfinite(){},async usiStop(){},async usiGameover(){},async usiQuit(){},async csaLogin(){throw new Error(U.thisFeatureNotAvailableOnWebApp)},async csaLogout(){},async csaAgree(){},async csaMove(){},async csaResign(){},async csaWin(){},async csaStop(){},async isEncryptionAvailable(){return!1},log(e,t){switch(e){case _t.DEBUG:console.debug(t);break;case _t.INFO:console.log(t);break;case _t.WARN:console.warn(t);break;case _t.ERROR:console.error(t);break}},onSendError(){},onMenuEvent(){},onUSIBestMove(){},onUSIInfo(){},onUSIPonderInfo(){},onCSAGameSummary(){},onCSAReject(){},onCSAStart(){},onCSAMove(){},onCSAGameResult(){},onCSAClose(){}};function Xl(){return window}const Cf=Xl().electronShogi||{},We=Xl().electronShogiAPI||g1,pe={...We,exportCaptureAsPNG(e){return We.exportCaptureAsPNG(e.json)},exportCaptureAsJPEG(e){return We.exportCaptureAsJPEG(e.json)},async loadAppSetting(){return JSON.parse(await We.loadAppSetting())},saveAppSetting(e){return We.saveAppSetting(JSON.stringify(e))},async loadResearchSetting(){return JSON.parse(await We.loadResearchSetting())},saveResearchSetting(e){return We.saveResearchSetting(JSON.stringify(e))},async loadAnalysisSetting(){return JSON.parse(await We.loadAnalysisSetting())},saveAnalysisSetting(e){return We.saveAnalysisSetting(JSON.stringify(e))},async loadGameSetting(){return JSON.parse(await We.loadGameSetting())},saveGameSetting(e){return We.saveGameSetting(JSON.stringify(e))},async loadCSAGameSettingHistory(){return JSON.parse(await We.loadCSAGameSettingHistory())},saveCSAGameSettingHistory(e){return We.saveCSAGameSettingHistory(JSON.stringify(e))},async loadUSIEngineSetting(){return new Wn(await We.loadUSIEngineSetting())},saveUSIEngineSetting(e){return We.saveUSIEngineSetting(e.json)},async getUSIEngineInfo(e,t){return JSON.parse(await We.getUSIEngineInfo(e,t))},usiLaunch(e,t){return We.usiLaunch(JSON.stringify(e),t)},usiGo(e,t,n,i,s){return We.usiGo(e,t,JSON.stringify(n),i,s)},usiGoPonder(e,t,n,i,s){return We.usiGoPonder(e,t,JSON.stringify(n),i,s)},csaLogin(e){return We.csaLogin(JSON.stringify(e))}};function _r(){return!!Xl().electronShogiAPI}let Os;function Mf(e){if(Os)return;const t=(e==null?void 0:e.type)||"sine",n=(e==null?void 0:e.frequency)||440,i=(e==null?void 0:e.volume)||2,s=new AudioContext,o=s.createOscillator(),r=s.createGain();o.connect(r),r.connect(s.destination),o.type=t,o.frequency.value=n,r.gain.value=i*.005,o.onended=()=>{r.disconnect(s.destination),o.disconnect(r)},o.start(s.currentTime),e!=null&&e.time&&o.stop(s.currentTime+e.time),e!=null&&e.time||(Os=o)}function m1(e){Mf({type:"sine",frequency:e.frequency,time:.1,volume:e.volume})}function b1(e){Mf({type:"sine",frequency:e.frequency,volume:e.volume})}function du(){Os&&(Os.stop(),Os=void 0)}let ua;function ha(e){const t=Date.now();if(ua&&t<ua+200)return;const n=new Audio("sound/piece.mp3");n.volume=e*.01,n.play(),ua=t}function xf(e){return(e||new Date).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})}function fu(e){return(e||new Date).toLocaleTimeString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function y1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(t,s);return new o}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),n}var vr={},_1={get exports(){return vr},set exports(e){vr=e}},Jl={},Yr={};Yr.byteLength=w1;Yr.toByteArray=I1;Yr.fromByteArray=A1;var An=[],rn=[],v1=typeof Uint8Array<"u"?Uint8Array:Array,da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Di=0,S1=da.length;Di<S1;++Di)An[Di]=da[Di],rn[da.charCodeAt(Di)]=Di;rn["-".charCodeAt(0)]=62;rn["_".charCodeAt(0)]=63;function Rf(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var i=n===t?0:4-n%4;return[n,i]}function w1(e){var t=Rf(e),n=t[0],i=t[1];return(n+i)*3/4-i}function E1(e,t,n){return(t+n)*3/4-n}function I1(e){var t,n=Rf(e),i=n[0],s=n[1],o=new v1(E1(e,i,s)),r=0,a=s>0?i-4:i,l;for(l=0;l<a;l+=4)t=rn[e.charCodeAt(l)]<<18|rn[e.charCodeAt(l+1)]<<12|rn[e.charCodeAt(l+2)]<<6|rn[e.charCodeAt(l+3)],o[r++]=t>>16&255,o[r++]=t>>8&255,o[r++]=t&255;return s===2&&(t=rn[e.charCodeAt(l)]<<2|rn[e.charCodeAt(l+1)]>>4,o[r++]=t&255),s===1&&(t=rn[e.charCodeAt(l)]<<10|rn[e.charCodeAt(l+1)]<<4|rn[e.charCodeAt(l+2)]>>2,o[r++]=t>>8&255,o[r++]=t&255),o}function k1(e){return An[e>>18&63]+An[e>>12&63]+An[e>>6&63]+An[e&63]}function P1(e,t,n){for(var i,s=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),s.push(k1(i));return s.join("")}function A1(e){for(var t,n=e.length,i=n%3,s=[],o=16383,r=0,a=n-i;r<a;r+=o)s.push(P1(e,r,r+o>a?a:r+o));return i===1?(t=e[n-1],s.push(An[t>>2]+An[t<<4&63]+"==")):i===2&&(t=(e[n-2]<<8)+e[n-1],s.push(An[t>>10]+An[t>>4&63]+An[t<<2&63]+"=")),s.join("")}var Ql={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ql.read=function(e,t,n,i,s){var o,r,a=s*8-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?s-1:0,p=n?-1:1,g=e[t+h];for(h+=p,o=g&(1<<-u)-1,g>>=-u,u+=a;u>0;o=o*256+e[t+h],h+=p,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=i;u>0;r=r*256+e[t+h],h+=p,u-=8);if(o===0)o=1-c;else{if(o===l)return r?NaN:(g?-1:1)*(1/0);r=r+Math.pow(2,i),o=o-c}return(g?-1:1)*r*Math.pow(2,o-i)};Ql.write=function(e,t,n,i,s,o){var r,a,l,c=o*8-s-1,u=(1<<c)-1,h=u>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=i?0:o-1,y=i?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),r+h>=1?t+=p/l:t+=p*Math.pow(2,1-h),t*l>=2&&(r++,l/=2),r+h>=u?(a=0,r=u):r+h>=1?(a=(t*l-1)*Math.pow(2,s),r=r+h):(a=t*Math.pow(2,h-1)*Math.pow(2,s),r=0));s>=8;e[n+g]=a&255,g+=y,a/=256,s-=8);for(r=r<<s|a,c+=s;c>0;e[n+g]=r&255,g+=y,r/=256,c-=8);e[n+g-y]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Yr,n=Ql,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const S=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(S,f),S.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function r(S){if(S>s)throw new RangeError('The value "'+S+'" is invalid for option "size"');const f=new Uint8Array(S);return Object.setPrototypeOf(f,a.prototype),f}function a(S,f,m){if(typeof S=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(S)}return l(S,f,m)}a.poolSize=8192;function l(S,f,m){if(typeof S=="string")return p(S,f);if(ArrayBuffer.isView(S))return y(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(he(S,ArrayBuffer)||S&&he(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(he(S,SharedArrayBuffer)||S&&he(S.buffer,SharedArrayBuffer)))return b(S,f,m);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const P=S.valueOf&&S.valueOf();if(P!=null&&P!==S)return a.from(P,f,m);const x=v(S);if(x)return x;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return a.from(S[Symbol.toPrimitive]("string"),f,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}a.from=function(S,f,m){return l(S,f,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function u(S,f,m){return c(S),S<=0?r(S):f!==void 0?typeof m=="string"?r(S).fill(f,m):r(S).fill(f):r(S)}a.alloc=function(S,f,m){return u(S,f,m)};function h(S){return c(S),r(S<0?0:_(S)|0)}a.allocUnsafe=function(S){return h(S)},a.allocUnsafeSlow=function(S){return h(S)};function p(S,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const m=w(S,f)|0;let P=r(m);const x=P.write(S,f);return x!==m&&(P=P.slice(0,x)),P}function g(S){const f=S.length<0?0:_(S.length)|0,m=r(f);for(let P=0;P<f;P+=1)m[P]=S[P]&255;return m}function y(S){if(he(S,Uint8Array)){const f=new Uint8Array(S);return b(f.buffer,f.byteOffset,f.byteLength)}return g(S)}function b(S,f,m){if(f<0||S.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<f+(m||0))throw new RangeError('"length" is outside of buffer bounds');let P;return f===void 0&&m===void 0?P=new Uint8Array(S):m===void 0?P=new Uint8Array(S,f):P=new Uint8Array(S,f,m),Object.setPrototypeOf(P,a.prototype),P}function v(S){if(a.isBuffer(S)){const f=_(S.length)|0,m=r(f);return m.length===0||S.copy(m,0,0,f),m}if(S.length!==void 0)return typeof S.length!="number"||fe(S.length)?r(0):g(S);if(S.type==="Buffer"&&Array.isArray(S.data))return g(S.data)}function _(S){if(S>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return S|0}function E(S){return+S!=S&&(S=0),a.alloc(+S)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,m){if(he(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),he(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(f)||!a.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===m)return 0;let P=f.length,x=m.length;for(let L=0,z=Math.min(P,x);L<z;++L)if(f[L]!==m[L]){P=f[L],x=m[L];break}return P<x?-1:x<P?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,m){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);let P;if(m===void 0)for(m=0,P=0;P<f.length;++P)m+=f[P].length;const x=a.allocUnsafe(m);let L=0;for(P=0;P<f.length;++P){let z=f[P];if(he(z,Uint8Array))L+z.length>x.length?(a.isBuffer(z)||(z=a.from(z)),z.copy(x,L)):Uint8Array.prototype.set.call(x,z,L);else if(a.isBuffer(z))z.copy(x,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=z.length}return x};function w(S,f){if(a.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||he(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const m=S.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&m===0)return 0;let x=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return ee(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return se(S).length;default:if(x)return P?-1:ee(S).length;f=(""+f).toLowerCase(),x=!0}}a.byteLength=w;function k(S,f,m){let P=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,f>>>=0,m<=f))return"";for(S||(S="utf8");;)switch(S){case"hex":return oe(this,f,m);case"utf8":case"utf-8":return Le(this,f,m);case"ascii":return ne(this,f,m);case"latin1":case"binary":return re(this,f,m);case"base64":return de(this,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,f,m);default:if(P)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),P=!0}}a.prototype._isBuffer=!0;function A(S,f,m){const P=S[f];S[f]=S[m],S[m]=P}a.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<f;m+=2)A(this,m,m+1);return this},a.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<f;m+=4)A(this,m,m+3),A(this,m+1,m+2);return this},a.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<f;m+=8)A(this,m,m+7),A(this,m+1,m+6),A(this,m+2,m+5),A(this,m+3,m+4);return this},a.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?Le(this,0,f):k.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){let f="";const m=e.INSPECT_MAX_BYTES;return f=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(f+=" ... "),"<Buffer "+f+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(f,m,P,x,L){if(he(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(m===void 0&&(m=0),P===void 0&&(P=f?f.length:0),x===void 0&&(x=0),L===void 0&&(L=this.length),m<0||P>f.length||x<0||L>this.length)throw new RangeError("out of range index");if(x>=L&&m>=P)return 0;if(x>=L)return-1;if(m>=P)return 1;if(m>>>=0,P>>>=0,x>>>=0,L>>>=0,this===f)return 0;let z=L-x,Me=P-m;const Be=Math.min(z,Me),Fe=this.slice(x,L),st=f.slice(m,P);for(let Je=0;Je<Be;++Je)if(Fe[Je]!==st[Je]){z=Fe[Je],Me=st[Je];break}return z<Me?-1:Me<z?1:0};function O(S,f,m,P,x){if(S.length===0)return-1;if(typeof m=="string"?(P=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,fe(m)&&(m=x?0:S.length-1),m<0&&(m=S.length+m),m>=S.length){if(x)return-1;m=S.length-1}else if(m<0)if(x)m=0;else return-1;if(typeof f=="string"&&(f=a.from(f,P)),a.isBuffer(f))return f.length===0?-1:G(S,f,m,P,x);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(S,f,m):Uint8Array.prototype.lastIndexOf.call(S,f,m):G(S,[f],m,P,x);throw new TypeError("val must be string, number or Buffer")}function G(S,f,m,P,x){let L=1,z=S.length,Me=f.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(S.length<2||f.length<2)return-1;L=2,z/=2,Me/=2,m/=2}function Be(st,Je){return L===1?st[Je]:st.readUInt16BE(Je*L)}let Fe;if(x){let st=-1;for(Fe=m;Fe<z;Fe++)if(Be(S,Fe)===Be(f,st===-1?0:Fe-st)){if(st===-1&&(st=Fe),Fe-st+1===Me)return st*L}else st!==-1&&(Fe-=Fe-st),st=-1}else for(m+Me>z&&(m=z-Me),Fe=m;Fe>=0;Fe--){let st=!0;for(let Je=0;Je<Me;Je++)if(Be(S,Fe+Je)!==Be(f,Je)){st=!1;break}if(st)return Fe}return-1}a.prototype.includes=function(f,m,P){return this.indexOf(f,m,P)!==-1},a.prototype.indexOf=function(f,m,P){return O(this,f,m,P,!0)},a.prototype.lastIndexOf=function(f,m,P){return O(this,f,m,P,!1)};function W(S,f,m,P){m=Number(m)||0;const x=S.length-m;P?(P=Number(P),P>x&&(P=x)):P=x;const L=f.length;P>L/2&&(P=L/2);let z;for(z=0;z<P;++z){const Me=parseInt(f.substr(z*2,2),16);if(fe(Me))return z;S[m+z]=Me}return z}function Z(S,f,m,P){return X(ee(f,S.length-m),S,m,P)}function Y(S,f,m,P){return X(ae(f),S,m,P)}function Q(S,f,m,P){return X(se(f),S,m,P)}function ye(S,f,m,P){return X(te(f,S.length-m),S,m,P)}a.prototype.write=function(f,m,P,x){if(m===void 0)x="utf8",P=this.length,m=0;else if(P===void 0&&typeof m=="string")x=m,P=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(P)?(P=P>>>0,x===void 0&&(x="utf8")):(x=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-m;if((P===void 0||P>L)&&(P=L),f.length>0&&(P<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");let z=!1;for(;;)switch(x){case"hex":return W(this,f,m,P);case"utf8":case"utf-8":return Z(this,f,m,P);case"ascii":case"latin1":case"binary":return Y(this,f,m,P);case"base64":return Q(this,f,m,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,f,m,P);default:if(z)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function de(S,f,m){return f===0&&m===S.length?t.fromByteArray(S):t.fromByteArray(S.slice(f,m))}function Le(S,f,m){m=Math.min(S.length,m);const P=[];let x=f;for(;x<m;){const L=S[x];let z=null,Me=L>239?4:L>223?3:L>191?2:1;if(x+Me<=m){let Be,Fe,st,Je;switch(Me){case 1:L<128&&(z=L);break;case 2:Be=S[x+1],(Be&192)===128&&(Je=(L&31)<<6|Be&63,Je>127&&(z=Je));break;case 3:Be=S[x+1],Fe=S[x+2],(Be&192)===128&&(Fe&192)===128&&(Je=(L&15)<<12|(Be&63)<<6|Fe&63,Je>2047&&(Je<55296||Je>57343)&&(z=Je));break;case 4:Be=S[x+1],Fe=S[x+2],st=S[x+3],(Be&192)===128&&(Fe&192)===128&&(st&192)===128&&(Je=(L&15)<<18|(Be&63)<<12|(Fe&63)<<6|st&63,Je>65535&&Je<1114112&&(z=Je))}}z===null?(z=65533,Me=1):z>65535&&(z-=65536,P.push(z>>>10&1023|55296),z=56320|z&1023),P.push(z),x+=Me}return Ee(P)}const Ie=4096;function Ee(S){const f=S.length;if(f<=Ie)return String.fromCharCode.apply(String,S);let m="",P=0;for(;P<f;)m+=String.fromCharCode.apply(String,S.slice(P,P+=Ie));return m}function ne(S,f,m){let P="";m=Math.min(S.length,m);for(let x=f;x<m;++x)P+=String.fromCharCode(S[x]&127);return P}function re(S,f,m){let P="";m=Math.min(S.length,m);for(let x=f;x<m;++x)P+=String.fromCharCode(S[x]);return P}function oe(S,f,m){const P=S.length;(!f||f<0)&&(f=0),(!m||m<0||m>P)&&(m=P);let x="";for(let L=f;L<m;++L)x+=be[S[L]];return x}function Oe(S,f,m){const P=S.slice(f,m);let x="";for(let L=0;L<P.length-1;L+=2)x+=String.fromCharCode(P[L]+P[L+1]*256);return x}a.prototype.slice=function(f,m){const P=this.length;f=~~f,m=m===void 0?P:~~m,f<0?(f+=P,f<0&&(f=0)):f>P&&(f=P),m<0?(m+=P,m<0&&(m=0)):m>P&&(m=P),m<f&&(m=f);const x=this.subarray(f,m);return Object.setPrototypeOf(x,a.prototype),x};function Pe(S,f,m){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+f>m)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,m,P){f=f>>>0,m=m>>>0,P||Pe(f,m,this.length);let x=this[f],L=1,z=0;for(;++z<m&&(L*=256);)x+=this[f+z]*L;return x},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,m,P){f=f>>>0,m=m>>>0,P||Pe(f,m,this.length);let x=this[f+--m],L=1;for(;m>0&&(L*=256);)x+=this[f+--m]*L;return x},a.prototype.readUint8=a.prototype.readUInt8=function(f,m){return f=f>>>0,m||Pe(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,m){return f=f>>>0,m||Pe(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,m){return f=f>>>0,m||Pe(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,m){return f=f>>>0,m||Pe(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,m){return f=f>>>0,m||Pe(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readBigUInt64LE=ve(function(f){f=f>>>0,R(f,"offset");const m=this[f],P=this[f+7];(m===void 0||P===void 0)&&F(f,this.length-8);const x=m+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,L=this[++f]+this[++f]*2**8+this[++f]*2**16+P*2**24;return BigInt(x)+(BigInt(L)<<BigInt(32))}),a.prototype.readBigUInt64BE=ve(function(f){f=f>>>0,R(f,"offset");const m=this[f],P=this[f+7];(m===void 0||P===void 0)&&F(f,this.length-8);const x=m*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],L=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+P;return(BigInt(x)<<BigInt(32))+BigInt(L)}),a.prototype.readIntLE=function(f,m,P){f=f>>>0,m=m>>>0,P||Pe(f,m,this.length);let x=this[f],L=1,z=0;for(;++z<m&&(L*=256);)x+=this[f+z]*L;return L*=128,x>=L&&(x-=Math.pow(2,8*m)),x},a.prototype.readIntBE=function(f,m,P){f=f>>>0,m=m>>>0,P||Pe(f,m,this.length);let x=m,L=1,z=this[f+--x];for(;x>0&&(L*=256);)z+=this[f+--x]*L;return L*=128,z>=L&&(z-=Math.pow(2,8*m)),z},a.prototype.readInt8=function(f,m){return f=f>>>0,m||Pe(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,m){f=f>>>0,m||Pe(f,2,this.length);const P=this[f]|this[f+1]<<8;return P&32768?P|4294901760:P},a.prototype.readInt16BE=function(f,m){f=f>>>0,m||Pe(f,2,this.length);const P=this[f+1]|this[f]<<8;return P&32768?P|4294901760:P},a.prototype.readInt32LE=function(f,m){return f=f>>>0,m||Pe(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,m){return f=f>>>0,m||Pe(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readBigInt64LE=ve(function(f){f=f>>>0,R(f,"offset");const m=this[f],P=this[f+7];(m===void 0||P===void 0)&&F(f,this.length-8);const x=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(P<<24);return(BigInt(x)<<BigInt(32))+BigInt(m+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),a.prototype.readBigInt64BE=ve(function(f){f=f>>>0,R(f,"offset");const m=this[f],P=this[f+7];(m===void 0||P===void 0)&&F(f,this.length-8);const x=(m<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(x)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+P)}),a.prototype.readFloatLE=function(f,m){return f=f>>>0,m||Pe(f,4,this.length),n.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,m){return f=f>>>0,m||Pe(f,4,this.length),n.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,m){return f=f>>>0,m||Pe(f,8,this.length),n.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,m){return f=f>>>0,m||Pe(f,8,this.length),n.read(this,f,!1,52,8)};function me(S,f,m,P,x,L){if(!a.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>x||f<L)throw new RangeError('"value" argument is out of bounds');if(m+P>S.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,m,P,x){if(f=+f,m=m>>>0,P=P>>>0,!x){const Me=Math.pow(2,8*P)-1;me(this,f,m,P,Me,0)}let L=1,z=0;for(this[m]=f&255;++z<P&&(L*=256);)this[m+z]=f/L&255;return m+P},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,m,P,x){if(f=+f,m=m>>>0,P=P>>>0,!x){const Me=Math.pow(2,8*P)-1;me(this,f,m,P,Me,0)}let L=P-1,z=1;for(this[m+L]=f&255;--L>=0&&(z*=256);)this[m+L]=f/z&255;return m+P},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,1,255,0),this[m]=f&255,m+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,2,65535,0),this[m]=f&255,this[m+1]=f>>>8,m+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,2,65535,0),this[m]=f>>>8,this[m+1]=f&255,m+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,4,4294967295,0),this[m+3]=f>>>24,this[m+2]=f>>>16,this[m+1]=f>>>8,this[m]=f&255,m+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,4,4294967295,0),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=f&255,m+4};function it(S,f,m,P,x){T(f,P,x,S,m,7);let L=Number(f&BigInt(4294967295));S[m++]=L,L=L>>8,S[m++]=L,L=L>>8,S[m++]=L,L=L>>8,S[m++]=L;let z=Number(f>>BigInt(32)&BigInt(4294967295));return S[m++]=z,z=z>>8,S[m++]=z,z=z>>8,S[m++]=z,z=z>>8,S[m++]=z,m}function lt(S,f,m,P,x){T(f,P,x,S,m,7);let L=Number(f&BigInt(4294967295));S[m+7]=L,L=L>>8,S[m+6]=L,L=L>>8,S[m+5]=L,L=L>>8,S[m+4]=L;let z=Number(f>>BigInt(32)&BigInt(4294967295));return S[m+3]=z,z=z>>8,S[m+2]=z,z=z>>8,S[m+1]=z,z=z>>8,S[m]=z,m+8}a.prototype.writeBigUInt64LE=ve(function(f,m=0){return it(this,f,m,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ve(function(f,m=0){return lt(this,f,m,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(f,m,P,x){if(f=+f,m=m>>>0,!x){const Be=Math.pow(2,8*P-1);me(this,f,m,P,Be-1,-Be)}let L=0,z=1,Me=0;for(this[m]=f&255;++L<P&&(z*=256);)f<0&&Me===0&&this[m+L-1]!==0&&(Me=1),this[m+L]=(f/z>>0)-Me&255;return m+P},a.prototype.writeIntBE=function(f,m,P,x){if(f=+f,m=m>>>0,!x){const Be=Math.pow(2,8*P-1);me(this,f,m,P,Be-1,-Be)}let L=P-1,z=1,Me=0;for(this[m+L]=f&255;--L>=0&&(z*=256);)f<0&&Me===0&&this[m+L+1]!==0&&(Me=1),this[m+L]=(f/z>>0)-Me&255;return m+P},a.prototype.writeInt8=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,1,127,-128),f<0&&(f=255+f+1),this[m]=f&255,m+1},a.prototype.writeInt16LE=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,2,32767,-32768),this[m]=f&255,this[m+1]=f>>>8,m+2},a.prototype.writeInt16BE=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,2,32767,-32768),this[m]=f>>>8,this[m+1]=f&255,m+2},a.prototype.writeInt32LE=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,4,2147483647,-2147483648),this[m]=f&255,this[m+1]=f>>>8,this[m+2]=f>>>16,this[m+3]=f>>>24,m+4},a.prototype.writeInt32BE=function(f,m,P){return f=+f,m=m>>>0,P||me(this,f,m,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=f&255,m+4},a.prototype.writeBigInt64LE=ve(function(f,m=0){return it(this,f,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ve(function(f,m=0){return lt(this,f,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mt(S,f,m,P,x,L){if(m+P>S.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Ye(S,f,m,P,x){return f=+f,m=m>>>0,x||mt(S,f,m,4),n.write(S,f,m,P,23,4),m+4}a.prototype.writeFloatLE=function(f,m,P){return Ye(this,f,m,!0,P)},a.prototype.writeFloatBE=function(f,m,P){return Ye(this,f,m,!1,P)};function wt(S,f,m,P,x){return f=+f,m=m>>>0,x||mt(S,f,m,8),n.write(S,f,m,P,52,8),m+8}a.prototype.writeDoubleLE=function(f,m,P){return wt(this,f,m,!0,P)},a.prototype.writeDoubleBE=function(f,m,P){return wt(this,f,m,!1,P)},a.prototype.copy=function(f,m,P,x){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(P||(P=0),!x&&x!==0&&(x=this.length),m>=f.length&&(m=f.length),m||(m=0),x>0&&x<P&&(x=P),x===P||f.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),f.length-m<x-P&&(x=f.length-m+P);const L=x-P;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,P,x):Uint8Array.prototype.set.call(f,this.subarray(P,x),m),L},a.prototype.fill=function(f,m,P,x){if(typeof f=="string"){if(typeof m=="string"?(x=m,m=0,P=this.length):typeof P=="string"&&(x=P,P=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(f.length===1){const z=f.charCodeAt(0);(x==="utf8"&&z<128||x==="latin1")&&(f=z)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(m<0||this.length<m||this.length<P)throw new RangeError("Out of range index");if(P<=m)return this;m=m>>>0,P=P===void 0?this.length:P>>>0,f||(f=0);let L;if(typeof f=="number")for(L=m;L<P;++L)this[L]=f;else{const z=a.isBuffer(f)?f:a.from(f,x),Me=z.length;if(Me===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(L=0;L<P-m;++L)this[L+m]=z[L%Me]}return this};const Ke={};function bt(S,f,m){Ke[S]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(x){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:x,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}bt("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),bt("ERR_INVALID_ARG_TYPE",function(S,f){return`The "${S}" argument must be of type number. Received type ${typeof f}`},TypeError),bt("ERR_OUT_OF_RANGE",function(S,f,m){let P=`The value of "${S}" is out of range.`,x=m;return Number.isInteger(m)&&Math.abs(m)>2**32?x=xe(String(m)):typeof m=="bigint"&&(x=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(x=xe(x)),x+="n"),P+=` It must be ${f}. Received ${x}`,P},RangeError);function xe(S){let f="",m=S.length;const P=S[0]==="-"?1:0;for(;m>=P+4;m-=3)f=`_${S.slice(m-3,m)}${f}`;return`${S.slice(0,m)}${f}`}function sn(S,f,m){R(f,"offset"),(S[f]===void 0||S[f+m]===void 0)&&F(f,S.length-(m+1))}function T(S,f,m,P,x,L){if(S>m||S<f){const z=typeof f=="bigint"?"n":"";let Me;throw L>3?f===0||f===BigInt(0)?Me=`>= 0${z} and < 2${z} ** ${(L+1)*8}${z}`:Me=`>= -(2${z} ** ${(L+1)*8-1}${z}) and < 2 ** ${(L+1)*8-1}${z}`:Me=`>= ${f}${z} and <= ${m}${z}`,new Ke.ERR_OUT_OF_RANGE("value",Me,S)}sn(P,x,L)}function R(S,f){if(typeof S!="number")throw new Ke.ERR_INVALID_ARG_TYPE(f,"number",S)}function F(S,f,m){throw Math.floor(S)!==S?(R(S,m),new Ke.ERR_OUT_OF_RANGE(m||"offset","an integer",S)):f<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE(m||"offset",`>= ${m?1:0} and <= ${f}`,S)}const j=/[^+/0-9A-Za-z-_]/g;function q(S){if(S=S.split("=")[0],S=S.trim().replace(j,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function ee(S,f){f=f||1/0;let m;const P=S.length;let x=null;const L=[];for(let z=0;z<P;++z){if(m=S.charCodeAt(z),m>55295&&m<57344){if(!x){if(m>56319){(f-=3)>-1&&L.push(239,191,189);continue}else if(z+1===P){(f-=3)>-1&&L.push(239,191,189);continue}x=m;continue}if(m<56320){(f-=3)>-1&&L.push(239,191,189),x=m;continue}m=(x-55296<<10|m-56320)+65536}else x&&(f-=3)>-1&&L.push(239,191,189);if(x=null,m<128){if((f-=1)<0)break;L.push(m)}else if(m<2048){if((f-=2)<0)break;L.push(m>>6|192,m&63|128)}else if(m<65536){if((f-=3)<0)break;L.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((f-=4)<0)break;L.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return L}function ae(S){const f=[];for(let m=0;m<S.length;++m)f.push(S.charCodeAt(m)&255);return f}function te(S,f){let m,P,x;const L=[];for(let z=0;z<S.length&&!((f-=2)<0);++z)m=S.charCodeAt(z),P=m>>8,x=m%256,L.push(x),L.push(P);return L}function se(S){return t.toByteArray(q(S))}function X(S,f,m,P){let x;for(x=0;x<P&&!(x+m>=f.length||x>=S.length);++x)f[x+m]=S[x];return x}function he(S,f){return S instanceof f||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===f.name}function fe(S){return S!==S}const be=function(){const S="0123456789abcdef",f=new Array(256);for(let m=0;m<16;++m){const P=m*16;for(let x=0;x<16;++x)f[P+x]=S[m]+S[x]}return f}();function ve(S){return typeof BigInt>"u"?Re:S}function Re(){throw new Error("BigInt not supported")}})(Jl);var zo=Jl,Yi=zo.Buffer,ln={},cn;for(cn in zo)zo.hasOwnProperty(cn)&&(cn==="SlowBuffer"||cn==="Buffer"||(ln[cn]=zo[cn]));var Xi=ln.Buffer={};for(cn in Yi)Yi.hasOwnProperty(cn)&&(cn==="allocUnsafe"||cn==="allocUnsafeSlow"||(Xi[cn]=Yi[cn]));ln.Buffer.prototype=Yi.prototype;(!Xi.from||Xi.from===Uint8Array.from)&&(Xi.from=function(e,t,n){if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&typeof e.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return Yi(e,t,n)});Xi.alloc||(Xi.alloc=function(e,t,n){if(typeof e!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=Yi(e);return!t||t.length===0?i.fill(0):typeof n=="string"?i.fill(t,n):i.fill(t),i});if(!ln.kStringMaxLength)try{ln.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}ln.constants||(ln.constants={MAX_LENGTH:ln.kMaxLength},ln.kStringMaxLength&&(ln.constants.MAX_STRING_LENGTH=ln.kStringMaxLength));var li=ln,Zl={},Nf="\uFEFF";Zl.PrependBOM=ec;function ec(e,t){this.encoder=e,this.addBOM=!0}ec.prototype.write=function(e){return this.addBOM&&(e=Nf+e,this.addBOM=!1),this.encoder.write(e)};ec.prototype.end=function(){return this.encoder.end()};Zl.StripBOM=tc;function tc(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}tc.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t||(t[0]===Nf&&(t=t.slice(1),typeof this.options.stripBOM=="function"&&this.options.stripBOM()),this.pass=!0),t};tc.prototype.end=function(){return this.decoder.end()};var fa={},pa={},Ls={},T1={get exports(){return Ls},set exports(e){Ls=e}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var pu;function C1(){return pu||(pu=1,function(e,t){var n=Jl,i=n.Buffer;function s(r,a){for(var l in r)a[l]=r[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o);function o(r,a,l){return i(r,a,l)}o.prototype=Object.create(i.prototype),s(i,o),o.from=function(r,a,l){if(typeof r=="number")throw new TypeError("Argument must not be a number");return i(r,a,l)},o.alloc=function(r,a,l){if(typeof r!="number")throw new TypeError("Argument must be a number");var c=i(r);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},o.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return i(r)},o.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(r)}}(T1,Ls)),Ls}var gu;function M1(){if(gu)return pa;gu=1;var e=C1().Buffer,t=e.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(_){if(!_)return"utf8";for(var E;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(E)return;_=(""+_).toLowerCase(),E=!0}}function i(_){var E=n(_);if(typeof E!="string"&&(e.isEncoding===t||!t(_)))throw new Error("Unknown encoding: "+_);return E||_}pa.StringDecoder=s;function s(_){this.encoding=i(_);var E;switch(this.encoding){case"utf16le":this.text=h,this.end=p,E=4;break;case"utf8":this.fillLast=l,E=4;break;case"base64":this.text=g,this.end=y,E=3;break;default:this.write=b,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(E)}s.prototype.write=function(_){if(_.length===0)return"";var E,w;if(this.lastNeed){if(E=this.fillLast(_),E===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<_.length?E?E+this.text(_,w):this.text(_,w):E||""},s.prototype.end=u,s.prototype.text=c,s.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function o(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function r(_,E,w){var k=E.length-1;if(k<w)return 0;var A=o(E[k]);return A>=0?(A>0&&(_.lastNeed=A-1),A):--k<w||A===-2?0:(A=o(E[k]),A>=0?(A>0&&(_.lastNeed=A-2),A):--k<w||A===-2?0:(A=o(E[k]),A>=0?(A>0&&(A===2?A=0:_.lastNeed=A-3),A):0))}function a(_,E,w){if((E[0]&192)!==128)return _.lastNeed=0,"";if(_.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return _.lastNeed=1,"";if(_.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return _.lastNeed=2,""}}function l(_){var E=this.lastTotal-this.lastNeed,w=a(this,_);if(w!==void 0)return w;if(this.lastNeed<=_.length)return _.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,E,0,_.length),this.lastNeed-=_.length}function c(_,E){var w=r(this,_,E);if(!this.lastNeed)return _.toString("utf8",E);this.lastTotal=w;var k=_.length-(w-this.lastNeed);return _.copy(this.lastChar,0,k),_.toString("utf8",E,k)}function u(_){var E=_&&_.length?this.write(_):"";return this.lastNeed?E+"":E}function h(_,E){if((_.length-E)%2===0){var w=_.toString("utf16le",E);if(w){var k=w.charCodeAt(w.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",E,_.length-1)}function p(_){var E=_&&_.length?this.write(_):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,w)}return E}function g(_,E){var w=(_.length-E)%3;return w===0?_.toString("base64",E):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",E,_.length-w))}function y(_){var E=_&&_.length?this.write(_):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function b(_){return _.toString(this.encoding)}function v(_){return _&&_.length?this.write(_):""}return pa}var ga,mu;function x1(){if(mu)return ga;mu=1;var e=li.Buffer;ga={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:t};function t(l,c){this.enc=l.encodingName,this.bomAware=l.bomAware,this.enc==="base64"?this.encoder=o:this.enc==="cesu8"&&(this.enc="utf8",this.encoder=r,e.from("eda0bdedb2a9","hex").toString()!==""&&(this.decoder=a,this.defaultCharUnicode=c.defaultCharUnicode))}t.prototype.encoder=s,t.prototype.decoder=i;var n=M1().StringDecoder;n.prototype.end||(n.prototype.end=function(){});function i(l,c){this.decoder=new n(c.enc)}i.prototype.write=function(l){return e.isBuffer(l)||(l=e.from(l)),this.decoder.write(l)},i.prototype.end=function(){return this.decoder.end()};function s(l,c){this.enc=c.enc}s.prototype.write=function(l){return e.from(l,this.enc)},s.prototype.end=function(){};function o(l,c){this.prevStr=""}o.prototype.write=function(l){l=this.prevStr+l;var c=l.length-l.length%4;return this.prevStr=l.slice(c),l=l.slice(0,c),e.from(l,"base64")},o.prototype.end=function(){return e.from(this.prevStr,"base64")};function r(l,c){}r.prototype.write=function(l){for(var c=e.alloc(l.length*3),u=0,h=0;h<l.length;h++){var p=l.charCodeAt(h);p<128?c[u++]=p:p<2048?(c[u++]=192+(p>>>6),c[u++]=128+(p&63)):(c[u++]=224+(p>>>12),c[u++]=128+(p>>>6&63),c[u++]=128+(p&63))}return c.slice(0,u)},r.prototype.end=function(){};function a(l,c){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=c.defaultCharUnicode}return a.prototype.write=function(l){for(var c=this.acc,u=this.contBytes,h=this.accBytes,p="",g=0;g<l.length;g++){var y=l[g];(y&192)!==128?(u>0&&(p+=this.defaultCharUnicode,u=0),y<128?p+=String.fromCharCode(y):y<224?(c=y&31,u=1,h=1):y<240?(c=y&15,u=2,h=1):p+=this.defaultCharUnicode):u>0?(c=c<<6|y&63,u--,h++,u===0&&(h===2&&c<128&&c>0?p+=this.defaultCharUnicode:h===3&&c<2048?p+=this.defaultCharUnicode:p+=String.fromCharCode(c))):p+=this.defaultCharUnicode}return this.acc=c,this.contBytes=u,this.accBytes=h,p},a.prototype.end=function(){var l=0;return this.contBytes>0&&(l+=this.defaultCharUnicode),l},ga}var Mn={},bu;function R1(){if(bu)return Mn;bu=1;var e=li.Buffer;Mn._utf32=t;function t(c,u){this.iconv=u,this.bomAware=!0,this.isLE=c.isLE}Mn.utf32le={type:"_utf32",isLE:!0},Mn.utf32be={type:"_utf32",isLE:!1},Mn.ucs4le="utf32le",Mn.ucs4be="utf32be",t.prototype.encoder=n,t.prototype.decoder=i;function n(c,u){this.isLE=u.isLE,this.highSurrogate=0}n.prototype.write=function(c){for(var u=e.from(c,"ucs2"),h=e.alloc(u.length*2),p=this.isLE?h.writeUInt32LE:h.writeUInt32BE,g=0,y=0;y<u.length;y+=2){var b=u.readUInt16LE(y),v=55296<=b&&b<56320,_=56320<=b&&b<57344;if(this.highSurrogate)if(v||!_)p.call(h,this.highSurrogate,g),g+=4;else{var E=(this.highSurrogate-55296<<10|b-56320)+65536;p.call(h,E,g),g+=4,this.highSurrogate=0;continue}v?this.highSurrogate=b:(p.call(h,b,g),g+=4,this.highSurrogate=0)}return g<h.length&&(h=h.slice(0,g)),h},n.prototype.end=function(){if(this.highSurrogate){var c=e.alloc(4);return this.isLE?c.writeUInt32LE(this.highSurrogate,0):c.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,c}};function i(c,u){this.isLE=u.isLE,this.badChar=u.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}i.prototype.write=function(c){if(c.length===0)return"";var u=0,h=0,p=e.alloc(c.length+4),g=0,y=this.isLE,b=this.overflow,v=this.badChar;if(b.length>0){for(;u<c.length&&b.length<4;u++)b.push(c[u]);b.length===4&&(y?h=b[u]|b[u+1]<<8|b[u+2]<<16|b[u+3]<<24:h=b[u+3]|b[u+2]<<8|b[u+1]<<16|b[u]<<24,b.length=0,g=s(p,g,h,v))}for(;u<c.length-3;u+=4)y?h=c[u]|c[u+1]<<8|c[u+2]<<16|c[u+3]<<24:h=c[u+3]|c[u+2]<<8|c[u+1]<<16|c[u]<<24,g=s(p,g,h,v);for(;u<c.length;u++)b.push(c[u]);return p.slice(0,g).toString("ucs2")};function s(c,u,h,p){if((h<0||h>1114111)&&(h=p),h>=65536){h-=65536;var g=55296|h>>10;c[u++]=g&255,c[u++]=g>>8;var h=56320|h&1023}return c[u++]=h&255,c[u++]=h>>8,u}i.prototype.end=function(){this.overflow.length=0},Mn.utf32=o,Mn.ucs4="utf32";function o(c,u){this.iconv=u}o.prototype.encoder=r,o.prototype.decoder=a;function r(c,u){c=c||{},c.addBOM===void 0&&(c.addBOM=!0),this.encoder=u.iconv.getEncoder(c.defaultEncoding||"utf-32le",c)}r.prototype.write=function(c){return this.encoder.write(c)},r.prototype.end=function(){return this.encoder.end()};function a(c,u){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=c||{},this.iconv=u.iconv}a.prototype.write=function(c){if(!this.decoder){if(this.initialBufs.push(c),this.initialBufsLen+=c.length,this.initialBufsLen<32)return"";var u=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(u,this.options);for(var h="",p=0;p<this.initialBufs.length;p++)h+=this.decoder.write(this.initialBufs[p]);return this.initialBufs.length=this.initialBufsLen=0,h}return this.decoder.write(c)},a.prototype.end=function(){if(!this.decoder){var c=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);var p=this.decoder.end();return p&&(u+=p),this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.end()};function l(c,u){var h=[],p=0,g=0,y=0,b=0,v=0;e:for(var _=0;_<c.length;_++)for(var E=c[_],w=0;w<E.length;w++)if(h.push(E[w]),h.length===4){if(p===0){if(h[0]===255&&h[1]===254&&h[2]===0&&h[3]===0)return"utf-32le";if(h[0]===0&&h[1]===0&&h[2]===254&&h[3]===255)return"utf-32be"}if((h[0]!==0||h[1]>16)&&y++,(h[3]!==0||h[2]>16)&&g++,h[0]===0&&h[1]===0&&(h[2]!==0||h[3]!==0)&&v++,(h[0]!==0||h[1]!==0)&&h[2]===0&&h[3]===0&&b++,h.length=0,p++,p>=100)break e}return v-y>b-g?"utf-32be":v-y<b-g?"utf-32le":u||"utf-32le"}return Mn}var yo={},yu;function N1(){if(yu)return yo;yu=1;var e=li.Buffer;yo.utf16be=t;function t(){}t.prototype.encoder=n,t.prototype.decoder=i,t.prototype.bomAware=!0;function n(){}n.prototype.write=function(l){for(var c=e.from(l,"ucs2"),u=0;u<c.length;u+=2){var h=c[u];c[u]=c[u+1],c[u+1]=h}return c},n.prototype.end=function(){};function i(){this.overflowByte=-1}i.prototype.write=function(l){if(l.length==0)return"";var c=e.alloc(l.length+1),u=0,h=0;for(this.overflowByte!==-1&&(c[0]=l[0],c[1]=this.overflowByte,u=1,h=2);u<l.length-1;u+=2,h+=2)c[h]=l[u+1],c[h+1]=l[u];return this.overflowByte=u==l.length-1?l[l.length-1]:-1,c.slice(0,h).toString("ucs2")},i.prototype.end=function(){this.overflowByte=-1},yo.utf16=s;function s(l,c){this.iconv=c}s.prototype.encoder=o,s.prototype.decoder=r;function o(l,c){l=l||{},l.addBOM===void 0&&(l.addBOM=!0),this.encoder=c.iconv.getEncoder("utf-16le",l)}o.prototype.write=function(l){return this.encoder.write(l)},o.prototype.end=function(){return this.encoder.end()};function r(l,c){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=l||{},this.iconv=c.iconv}r.prototype.write=function(l){if(!this.decoder){if(this.initialBufs.push(l),this.initialBufsLen+=l.length,this.initialBufsLen<16)return"";var c=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);return this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.write(l)},r.prototype.end=function(){if(!this.decoder){var l=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(l,this.options);for(var c="",u=0;u<this.initialBufs.length;u++)c+=this.decoder.write(this.initialBufs[u]);var h=this.decoder.end();return h&&(c+=h),this.initialBufs.length=this.initialBufsLen=0,c}return this.decoder.end()};function a(l,c){var u=[],h=0,p=0,g=0;e:for(var y=0;y<l.length;y++)for(var b=l[y],v=0;v<b.length;v++)if(u.push(b[v]),u.length===2){if(h===0){if(u[0]===255&&u[1]===254)return"utf-16le";if(u[0]===254&&u[1]===255)return"utf-16be"}if(u[0]===0&&u[1]!==0&&g++,u[0]!==0&&u[1]===0&&p++,u.length=0,h++,h>=100)break e}return g>p?"utf-16be":g<p?"utf-16le":c||"utf-16le"}return yo}var fs={},_u;function O1(){if(_u)return fs;_u=1;var e=li.Buffer;fs.utf7=t,fs.unicode11utf7="utf7";function t(b,v){this.iconv=v}t.prototype.encoder=i,t.prototype.decoder=s,t.prototype.bomAware=!0;var n=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function i(b,v){this.iconv=v.iconv}i.prototype.write=function(b){return e.from(b.replace(n,function(v){return"+"+(v==="+"?"":this.iconv.encode(v,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},i.prototype.end=function(){};function s(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}for(var o=/[A-Za-z0-9\/+]/,r=[],a=0;a<256;a++)r[a]=o.test(String.fromCharCode(a));var l="+".charCodeAt(0),c="-".charCodeAt(0),u="&".charCodeAt(0);s.prototype.write=function(b){for(var v="",_=0,E=this.inBase64,w=this.base64Accum,k=0;k<b.length;k++)if(!E)b[k]==l&&(v+=this.iconv.decode(b.slice(_,k),"ascii"),_=k+1,E=!0);else if(!r[b[k]]){if(k==_&&b[k]==c)v+="+";else{var A=w+this.iconv.decode(b.slice(_,k),"ascii");v+=this.iconv.decode(e.from(A,"base64"),"utf16-be")}b[k]!=c&&k--,_=k+1,E=!1,w=""}if(!E)v+=this.iconv.decode(b.slice(_),"ascii");else{var A=w+this.iconv.decode(b.slice(_),"ascii"),O=A.length-A.length%8;w=A.slice(O),A=A.slice(0,O),v+=this.iconv.decode(e.from(A,"base64"),"utf16-be")}return this.inBase64=E,this.base64Accum=w,v},s.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(e.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},fs.utf7imap=h;function h(b,v){this.iconv=v}h.prototype.encoder=p,h.prototype.decoder=g,h.prototype.bomAware=!0;function p(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=e.alloc(6),this.base64AccumIdx=0}p.prototype.write=function(b){for(var v=this.inBase64,_=this.base64Accum,E=this.base64AccumIdx,w=e.alloc(b.length*5+10),k=0,A=0;A<b.length;A++){var O=b.charCodeAt(A);32<=O&&O<=126?(v&&(E>0&&(k+=w.write(_.slice(0,E).toString("base64").replace(/\//g,",").replace(/=+$/,""),k),E=0),w[k++]=c,v=!1),v||(w[k++]=O,O===u&&(w[k++]=c))):(v||(w[k++]=u,v=!0),v&&(_[E++]=O>>8,_[E++]=O&255,E==_.length&&(k+=w.write(_.toString("base64").replace(/\//g,","),k),E=0)))}return this.inBase64=v,this.base64AccumIdx=E,w.slice(0,k)},p.prototype.end=function(){var b=e.alloc(10),v=0;return this.inBase64&&(this.base64AccumIdx>0&&(v+=b.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),v),this.base64AccumIdx=0),b[v++]=c,this.inBase64=!1),b.slice(0,v)};function g(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}var y=r.slice();return y[",".charCodeAt(0)]=!0,g.prototype.write=function(b){for(var v="",_=0,E=this.inBase64,w=this.base64Accum,k=0;k<b.length;k++)if(!E)b[k]==u&&(v+=this.iconv.decode(b.slice(_,k),"ascii"),_=k+1,E=!0);else if(!y[b[k]]){if(k==_&&b[k]==c)v+="&";else{var A=w+this.iconv.decode(b.slice(_,k),"ascii").replace(/,/g,"/");v+=this.iconv.decode(e.from(A,"base64"),"utf16-be")}b[k]!=c&&k--,_=k+1,E=!1,w=""}if(!E)v+=this.iconv.decode(b.slice(_),"ascii");else{var A=w+this.iconv.decode(b.slice(_),"ascii").replace(/,/g,"/"),O=A.length-A.length%8;w=A.slice(O),A=A.slice(0,O),v+=this.iconv.decode(e.from(A,"base64"),"utf16-be")}return this.inBase64=E,this.base64Accum=w,v},g.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(e.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},fs}var ma={},vu;function L1(){if(vu)return ma;vu=1;var e=li.Buffer;ma._sbcs=t;function t(s,o){if(!s)throw new Error("SBCS codec is called without the data.");if(!s.chars||s.chars.length!==128&&s.chars.length!==256)throw new Error("Encoding '"+s.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(s.chars.length===128){for(var r="",a=0;a<128;a++)r+=String.fromCharCode(a);s.chars=r+s.chars}this.decodeBuf=e.from(s.chars,"ucs2");for(var l=e.alloc(65536,o.defaultCharSingleByte.charCodeAt(0)),a=0;a<s.chars.length;a++)l[s.chars.charCodeAt(a)]=a;this.encodeBuf=l}t.prototype.encoder=n,t.prototype.decoder=i;function n(s,o){this.encodeBuf=o.encodeBuf}n.prototype.write=function(s){for(var o=e.alloc(s.length),r=0;r<s.length;r++)o[r]=this.encodeBuf[s.charCodeAt(r)];return o},n.prototype.end=function(){};function i(s,o){this.decodeBuf=o.decodeBuf}return i.prototype.write=function(s){for(var o=this.decodeBuf,r=e.alloc(s.length*2),a=0,l=0,c=0;c<s.length;c++)a=s[c]*2,l=c*2,r[l]=o[a],r[l+1]=o[a+1];return r.toString("ucs2")},i.prototype.end=function(){},ma}var ba,Su;function B1(){return Su||(Su=1,ba={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}),ba}var ya,wu;function D1(){return wu||(wu=1,ya={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},iso646cn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}`},iso646jp:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_\`abcdefghijklmnopqrstuvwxyz{|}`},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}),ya}var _a={},Eu;function F1(){if(Eu)return _a;Eu=1;var e=li.Buffer;_a._dbcs=l;for(var t=-1,n=-2,i=-10,s=-1e3,o=new Array(256),r=-1,a=0;a<256;a++)o[a]=t;function l(p,g){if(this.encodingName=p.encodingName,!p)throw new Error("DBCS codec is called without the data.");if(!p.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var y=p.table();this.decodeTables=[],this.decodeTables[0]=o.slice(0),this.decodeTableSeq=[];for(var b=0;b<y.length;b++)this._addDecodeChunk(y[b]);if(typeof p.gb18030=="function"){this.gb18030=p.gb18030();var v=this.decodeTables.length;this.decodeTables.push(o.slice(0));var _=this.decodeTables.length;this.decodeTables.push(o.slice(0));for(var E=this.decodeTables[0],b=129;b<=254;b++)for(var w=this.decodeTables[s-E[b]],k=48;k<=57;k++){if(w[k]===t)w[k]=s-v;else if(w[k]>s)throw new Error("gb18030 decode tables conflict at byte 2");for(var A=this.decodeTables[s-w[k]],O=129;O<=254;O++){if(A[O]===t)A[O]=s-_;else{if(A[O]===s-_)continue;if(A[O]>s)throw new Error("gb18030 decode tables conflict at byte 3")}for(var G=this.decodeTables[s-A[O]],W=48;W<=57;W++)G[W]===t&&(G[W]=n)}}}this.defaultCharUnicode=g.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var Z={};if(p.encodeSkipVals)for(var b=0;b<p.encodeSkipVals.length;b++){var Y=p.encodeSkipVals[b];if(typeof Y=="number")Z[Y]=!0;else for(var k=Y.from;k<=Y.to;k++)Z[k]=!0}if(this._fillEncodeTable(0,0,Z),p.encodeAdd)for(var Q in p.encodeAdd)Object.prototype.hasOwnProperty.call(p.encodeAdd,Q)&&this._setEncodeChar(Q.charCodeAt(0),p.encodeAdd[Q]);this.defCharSB=this.encodeTable[0][g.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===t&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===t&&(this.defCharSB="?".charCodeAt(0))}l.prototype.encoder=c,l.prototype.decoder=u,l.prototype._getDecodeTrieNode=function(p){for(var g=[];p>0;p>>>=8)g.push(p&255);g.length==0&&g.push(0);for(var y=this.decodeTables[0],b=g.length-1;b>0;b--){var v=y[g[b]];if(v==t)y[g[b]]=s-this.decodeTables.length,this.decodeTables.push(y=o.slice(0));else if(v<=s)y=this.decodeTables[s-v];else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+p.toString(16))}return y},l.prototype._addDecodeChunk=function(p){var g=parseInt(p[0],16),y=this._getDecodeTrieNode(g);g=g&255;for(var b=1;b<p.length;b++){var v=p[b];if(typeof v=="string")for(var _=0;_<v.length;){var E=v.charCodeAt(_++);if(55296<=E&&E<56320){var w=v.charCodeAt(_++);if(56320<=w&&w<57344)y[g++]=65536+(E-55296)*1024+(w-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+p[0])}else if(4080<E&&E<=4095){for(var k=4095-E+2,A=[],O=0;O<k;O++)A.push(v.charCodeAt(_++));y[g++]=i-this.decodeTableSeq.length,this.decodeTableSeq.push(A)}else y[g++]=E}else if(typeof v=="number")for(var G=y[g-1]+1,_=0;_<v;_++)y[g++]=G++;else throw new Error("Incorrect type '"+typeof v+"' given in "+this.encodingName+" at chunk "+p[0])}if(g>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+p[0]+": too long"+g)},l.prototype._getEncodeBucket=function(p){var g=p>>8;return this.encodeTable[g]===void 0&&(this.encodeTable[g]=o.slice(0)),this.encodeTable[g]},l.prototype._setEncodeChar=function(p,g){var y=this._getEncodeBucket(p),b=p&255;y[b]<=i?this.encodeTableSeq[i-y[b]][r]=g:y[b]==t&&(y[b]=g)},l.prototype._setEncodeSequence=function(p,g){var y=p[0],b=this._getEncodeBucket(y),v=y&255,_;b[v]<=i?_=this.encodeTableSeq[i-b[v]]:(_={},b[v]!==t&&(_[r]=b[v]),b[v]=i-this.encodeTableSeq.length,this.encodeTableSeq.push(_));for(var E=1;E<p.length-1;E++){var w=_[y];typeof w=="object"?_=w:(_=_[y]={},w!==void 0&&(_[r]=w))}y=p[p.length-1],_[y]=g},l.prototype._fillEncodeTable=function(p,g,y){for(var b=this.decodeTables[p],v=!1,_={},E=0;E<256;E++){var w=b[E],k=g+E;if(!y[k])if(w>=0)this._setEncodeChar(w,k),v=!0;else if(w<=s){var A=s-w;if(!_[A]){var O=k<<8>>>0;this._fillEncodeTable(A,O,y)?v=!0:_[A]=!0}}else w<=i&&(this._setEncodeSequence(this.decodeTableSeq[i-w],k),v=!0)}return v};function c(p,g){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=g.encodeTable,this.encodeTableSeq=g.encodeTableSeq,this.defaultCharSingleByte=g.defCharSB,this.gb18030=g.gb18030}c.prototype.write=function(p){for(var g=e.alloc(p.length*(this.gb18030?4:3)),y=this.leadSurrogate,b=this.seqObj,v=-1,_=0,E=0;;){if(v===-1){if(_==p.length)break;var w=p.charCodeAt(_++)}else{var w=v;v=-1}if(55296<=w&&w<57344)if(w<56320)if(y===-1){y=w;continue}else y=w,w=t;else y!==-1?(w=65536+(y-55296)*1024+(w-56320),y=-1):w=t;else y!==-1&&(v=w,w=t,y=-1);var k=t;if(b!==void 0&&w!=t){var A=b[w];if(typeof A=="object"){b=A;continue}else typeof A=="number"?k=A:A==null&&(A=b[r],A!==void 0&&(k=A,v=w));b=void 0}else if(w>=0){var O=this.encodeTable[w>>8];if(O!==void 0&&(k=O[w&255]),k<=i){b=this.encodeTableSeq[i-k];continue}if(k==t&&this.gb18030){var G=h(this.gb18030.uChars,w);if(G!=-1){var k=this.gb18030.gbChars[G]+(w-this.gb18030.uChars[G]);g[E++]=129+Math.floor(k/12600),k=k%12600,g[E++]=48+Math.floor(k/1260),k=k%1260,g[E++]=129+Math.floor(k/10),k=k%10,g[E++]=48+k;continue}}}k===t&&(k=this.defaultCharSingleByte),k<256?g[E++]=k:k<65536?(g[E++]=k>>8,g[E++]=k&255):k<16777216?(g[E++]=k>>16,g[E++]=k>>8&255,g[E++]=k&255):(g[E++]=k>>>24,g[E++]=k>>>16&255,g[E++]=k>>>8&255,g[E++]=k&255)}return this.seqObj=b,this.leadSurrogate=y,g.slice(0,E)},c.prototype.end=function(){if(!(this.leadSurrogate===-1&&this.seqObj===void 0)){var p=e.alloc(10),g=0;if(this.seqObj){var y=this.seqObj[r];y!==void 0&&(y<256?p[g++]=y:(p[g++]=y>>8,p[g++]=y&255)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(p[g++]=this.defaultCharSingleByte,this.leadSurrogate=-1),p.slice(0,g)}},c.prototype.findIdx=h;function u(p,g){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=g.decodeTables,this.decodeTableSeq=g.decodeTableSeq,this.defaultCharUnicode=g.defaultCharUnicode,this.gb18030=g.gb18030}u.prototype.write=function(p){for(var g=e.alloc(p.length*2),y=this.nodeIdx,b=this.prevBytes,v=this.prevBytes.length,_=-this.prevBytes.length,E,w=0,k=0;w<p.length;w++){var A=w>=0?p[w]:b[w+v],E=this.decodeTables[y][A];if(!(E>=0))if(E===t)E=this.defaultCharUnicode.charCodeAt(0),w=_;else if(E===n){if(w>=3)var O=(p[w-3]-129)*12600+(p[w-2]-48)*1260+(p[w-1]-129)*10+(A-48);else var O=(b[w-3+v]-129)*12600+((w-2>=0?p[w-2]:b[w-2+v])-48)*1260+((w-1>=0?p[w-1]:b[w-1+v])-129)*10+(A-48);var G=h(this.gb18030.gbChars,O);E=this.gb18030.uChars[G]+O-this.gb18030.gbChars[G]}else if(E<=s){y=s-E;continue}else if(E<=i){for(var W=this.decodeTableSeq[i-E],Z=0;Z<W.length-1;Z++)E=W[Z],g[k++]=E&255,g[k++]=E>>8;E=W[W.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+E+" at "+y+"/"+A);if(E>=65536){E-=65536;var Y=55296|E>>10;g[k++]=Y&255,g[k++]=Y>>8,E=56320|E&1023}g[k++]=E&255,g[k++]=E>>8,y=0,_=w+1}return this.nodeIdx=y,this.prevBytes=_>=0?Array.prototype.slice.call(p,_):b.slice(_+v).concat(Array.prototype.slice.call(p)),g.slice(0,k).toString("ucs2")},u.prototype.end=function(){for(var p="";this.prevBytes.length>0;){p+=this.defaultCharUnicode;var g=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,g.length>0&&(p+=this.write(g))}return this.prevBytes=[],this.nodeIdx=0,p};function h(p,g){if(p[0]>g)return-1;for(var y=0,b=p.length;y<b-1;){var v=y+(b-y+1>>1);p[v]<=g?y=v:b=v}return y}return _a}const $1=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]],H1=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]],va=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]],Iu=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]],U1=[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],z1=[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3],G1={uChars:U1,gbChars:z1},W1=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]],ku=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]],V1=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];var Sa,Pu;function j1(){return Pu||(Pu=1,Sa={shiftjis:{type:"_dbcs",table:function(){return $1},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return H1},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return va}},gbk:{type:"_dbcs",table:function(){return va.concat(Iu)}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return va.concat(Iu)},gb18030:function(){return G1},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return W1}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return ku}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return ku.concat(V1)},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}),Sa}var Au;function K1(){return Au||(Au=1,function(e){for(var t=[x1(),R1(),N1(),O1(),L1(),B1(),D1(),F1(),j1()],n=0;n<t.length;n++){var i=t[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}}(fa)),fa}var wa,Tu;function q1(){if(Tu)return wa;Tu=1;var e=li.Buffer;return wa=function(t){var n=t.Transform;function i(o,r){this.conv=o,r=r||{},r.decodeStrings=!1,n.call(this,r)}i.prototype=Object.create(n.prototype,{constructor:{value:i}}),i.prototype._transform=function(o,r,a){if(typeof o!="string")return a(new Error("Iconv encoding stream needs strings as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l),a()}catch(c){a(c)}},i.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r),o()}catch(a){o(a)}},i.prototype.collect=function(o){var r=[];return this.on("error",o),this.on("data",function(a){r.push(a)}),this.on("end",function(){o(null,e.concat(r))}),this};function s(o,r){this.conv=o,r=r||{},r.encoding=this.encoding="utf8",n.call(this,r)}return s.prototype=Object.create(n.prototype,{constructor:{value:s}}),s.prototype._transform=function(o,r,a){if(!e.isBuffer(o)&&!(o instanceof Uint8Array))return a(new Error("Iconv decoding stream needs buffers as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l,this.encoding),a()}catch(c){a(c)}},s.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r,this.encoding),o()}catch(a){o(a)}},s.prototype.collect=function(o){var r="";return this.on("error",o),this.on("data",function(a){r+=a}),this.on("end",function(){o(null,r)}),this},{IconvLiteEncoderStream:i,IconvLiteDecoderStream:s}},wa}const Y1={},X1=Object.freeze(Object.defineProperty({__proto__:null,default:Y1},Symbol.toStringTag,{value:"Module"})),J1=y1(X1);(function(e){var t=li.Buffer,n=Zl,i=e.exports;i.encodings=null,i.defaultCharUnicode="",i.defaultCharSingleByte="?",i.encode=function(r,a,l){r=""+(r||"");var c=i.getEncoder(a,l),u=c.write(r),h=c.end();return h&&h.length>0?t.concat([u,h]):u},i.decode=function(r,a,l){typeof r=="string"&&(i.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),i.skipDecodeWarning=!0),r=t.from(""+(r||""),"binary"));var c=i.getDecoder(a,l),u=c.write(r),h=c.end();return h?u+h:u},i.encodingExists=function(r){try{return i.getCodec(r),!0}catch{return!1}},i.toEncoding=i.encode,i.fromEncoding=i.decode,i._codecDataCache={},i.getCodec=function(r){i.encodings||(i.encodings=K1());for(var a=i._canonicalizeEncoding(r),l={};;){var c=i._codecDataCache[a];if(c)return c;var u=i.encodings[a];switch(typeof u){case"string":a=u;break;case"object":for(var h in u)l[h]=u[h];l.encodingName||(l.encodingName=a),a=u.type;break;case"function":return l.encodingName||(l.encodingName=a),c=new u(l,i),i._codecDataCache[l.encodingName]=c,c;default:throw new Error("Encoding not recognized: '"+r+"' (searched as: '"+a+"')")}}},i._canonicalizeEncoding=function(o){return(""+o).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},i.getEncoder=function(r,a){var l=i.getCodec(r),c=new l.encoder(a,l);return l.bomAware&&a&&a.addBOM&&(c=new n.PrependBOM(c,a)),c},i.getDecoder=function(r,a){var l=i.getCodec(r),c=new l.decoder(a,l);return l.bomAware&&!(a&&a.stripBOM===!1)&&(c=new n.StripBOM(c,a)),c},i.enableStreamingAPI=function(r){if(!i.supportsStreams){var a=q1()(r);i.IconvLiteEncoderStream=a.IconvLiteEncoderStream,i.IconvLiteDecoderStream=a.IconvLiteDecoderStream,i.encodeStream=function(c,u){return new i.IconvLiteEncoderStream(i.getEncoder(c,u),u)},i.decodeStream=function(c,u){return new i.IconvLiteDecoderStream(i.getDecoder(c,u),u)},i.supportsStreams=!0}};var s;try{s=J1}catch{}s&&s.Transform?i.enableStreamingAPI(s):i.encodeStream=i.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}})(_1);function Q1(e){return e>=1500?"":e>=600?"":e>=400?"":e>=200?"":e>=-200?"":e>=-400?"":e>=-600?"":e>=-1500?"":""}function ol(e,t){return 100/(1+Math.exp(-e/t))}var qt=(e=>(e[e.PLAYER=0]="PLAYER",e[e.OPPONENT=1]="OPPONENT",e[e.RESEARCHER=2]="RESEARCHER",e[e.RESEARCHER_2=3]="RESEARCHER_2",e[e.RESEARCHER_3=4]="RESEARCHER_3",e[e.RESEARCHER_4=5]="RESEARCHER_4",e))(qt||{});function Z1(e){const t=/^\*=([+-]?[.0-9]+)/.exec(e);return t?Number(t[1]):void 0}function ey(e){const t=/^#=([+-]?[.0-9]+)/.exec(e);return t?Number(t[1]):void 0}function ty(e){const t=/^\* *([+-]?[.0-9]+)/.exec(e);return t?Number(t[1]):void 0}function Cu(e){e.forEach(t=>{const n=t.customData||{},i=t.comment.split(`
`);for(const s of i){const o=Z1(s)||ty(s);o!==void 0&&(n.playerSearchInfo={usi:e.usi,score:o});const r=ey(s);r!==void 0&&(n.researchInfo={usi:e.usi,score:r})}t.customData=n})}function ny(e){switch(e){case 0:return"*";default:return"#"}}function iy(e,t,n){const i=ny(t);let s="";return n.mate&&(s+=`${Math.abs(n.mate)}
`),n.score!==void 0&&(s+=Q1(n.score)+`
`,s+=`${i}=${n.score}
`),n.pv&&n.pv.length!==0&&(s+=`${i}=${Q0(e,n.pv)}
`),s}function sy(e,t){return t.split(`
`).filter(n=>n.match(/^[#*]=/)).map(n=>eb(e,n.split("=",2)[1]))}function oy(e){return _f(e.timeSeconds)+"+"+String(e.byoyomi).padStart(2,"0")}class ry{constructor(){C(this,"_record",new Ct);C(this,"_recordFilePath");C(this,"onChangeFilePath",()=>{});C(this,"onChangePosition",()=>{});this.setupRecordHandler()}get record(){return this._record}get recordFilePath(){return this._recordFilePath}updateRecordFilePath(t){this._recordFilePath=t,this.onChangeFilePath(t)}clearRecordFilePath(){this._recordFilePath=void 0,this.onChangeFilePath()}reset(t){if(t){const n=new Ot;n.reset(t),this._record.clear(n)}else this._record.clear();this.clearRecordFilePath()}resetByCurrentPosition(){this._record.clear(this._record.position),this.clearRecordFilePath()}importRecord(t,n){let i;switch(n||(n=kb(t)),n){case Wi.SFEN:{const s=Ot.newBySFEN(t);i=s?new Ct(s):new Error(U.failedToParseSFEN);break}case Wi.USI:i=Ct.newByUSI(t);break;case Wi.KIF:i=nu(t);break;case Wi.CSA:i=su(t);break;default:i=new Error(U.failedToDetectRecordFormat);break}if(i instanceof Error)return lu(i);this._record=i,this.setupRecordHandler(),this.clearRecordFilePath(),Cu(this._record)}importRecordFromBuffer(t,n){let i;if(n.match(/\.kif$/)||n.match(/\.kifu$/)){const s=n.match(/\.kif$/)?vr.decode(t,"Shift_JIS"):new TextDecoder().decode(t);i=nu(s)}else n.match(/\.csa$/)?i=su(new TextDecoder().decode(t)):i=new Error(`${U.unknownFileExtension}: ${n}`);if(i instanceof Error)return lu(i);this._record=i,this.setupRecordHandler(),this.updateRecordFilePath(n),Cu(this._record)}exportRecordAsBuffer(t,n){let i;if(t.match(/\.kif$/)||t.match(/\.kifu$/)){const s=vf(this.record,n);i=t.match(/\.kif$/)?vr.encode(s,"Shift_JIS"):new TextEncoder().encode(s)}else if(t.match(/\.csa$/))i=new TextEncoder().encode(Ef(this.record,n));else return new Error(`${U.unknownFileExtension}: ${t}`);return this.updateRecordFilePath(t),i}swapNextTurn(){const t=this.record.position.clone();t.setColor(Rt(t.color)),this._record.clear(t),this.clearRecordFilePath()}changePosition(t){const n=this.record.position.clone();n.edit(t),this._record.clear(n),this.clearRecordFilePath()}changePly(t){this._record.goto(t)}changeBranch(t){return this._record.switchBranchByIndex(t)}swapWithNextBranch(){return this._record.swapWithNextBranch()}swapWithPreviousBranch(){return this._record.swapWithPreviousBranch()}removeCurrentMove(){this._record.removeCurrentMove()}removeNextMove(){this._record.removeNextMove()}updateComment(t){this._record.current.comment=t}appendComment(t,n){if(!t)return;const i=this._record.current.comment,s=this.record.current.comment?`
`:"";switch(n){case $n.NONE:break;case $n.INSERT:this._record.current.comment=t+s+i;break;case $n.APPEND:this._record.current.comment=i+s+t;break;case $n.OVERWRITE:this._record.current.comment=t;break}}appendSearchComment(t,n,i,s){const o=iy(this.record.position,t,n);this.appendComment((s?s+`
`:"")+o,i)}get inCommentPVs(){return sy(this.record.position,this.record.current.comment)}setGameStartMetadata(t){t.gameTitle&&this._record.metadata.setStandardMetadata(J.TITLE,t.gameTitle),t.blackName&&this._record.metadata.setStandardMetadata(J.BLACK_NAME,t.blackName),t.whiteName&&this._record.metadata.setStandardMetadata(J.WHITE_NAME,t.whiteName),this._record.metadata.setStandardMetadata(J.DATE,xf()),this._record.metadata.setStandardMetadata(J.START_DATETIME,fu()),t.timeLimit&&this._record.metadata.setStandardMetadata(J.TIME_LIMIT,oy(t.timeLimit))}setGameEndMetadata(){this._record.metadata.setStandardMetadata(J.END_DATETIME,fu())}updateSearchInfo(t,n){var s,o,r,a;const i=this.record.current.customData||{};switch(t){case 0:i.playerSearchInfo=n;break;case 1:i.opponentSearchInfo=n;break;case 2:(n.depth||0)>=(((s=i.researchInfo)==null?void 0:s.depth)||0)&&(i.researchInfo=n);break;case 3:(n.depth||0)>=(((o=i.researchInfo2)==null?void 0:o.depth)||0)&&(i.researchInfo2=n);break;case 4:(n.depth||0)>=(((r=i.researchInfo3)==null?void 0:r.depth)||0)&&(i.researchInfo3=n);break;case 5:(n.depth||0)>=(((a=i.researchInfo4)==null?void 0:a.depth)||0)&&(i.researchInfo4=n);break}this._record.current.customData=i}appendMove(t){return this._record.append(t.move,t.moveOption)?(t.elapsedMs!==void 0&&this._record.current.setElapsedMs(t.elapsedMs),!0):!1}updateStandardMetadata(t){this._record.metadata.setStandardMetadata(t.key,t.value)}on(t,n){switch(t){case"changeFilePath":this.onChangeFilePath=n;break;case"changePosition":this.onChangePosition=n,this.setupRecordHandler();break}}setupRecordHandler(){this._record.on("changePosition",this.onChangePosition)}}class ay{constructor(){C(this,"searchHandler")}isEngine(){return!1}async startSearch(t,n,i,s,o){this.searchHandler=o}async startPonder(){}async stop(){}async gameover(){}async close(){this.searchHandler=void 0}doMove(t){const n=this.searchHandler;this.searchHandler=void 0,n&&n.onMove(t)}resign(){const t=this.searchHandler;this.searchHandler=void 0,t&&t.onResign()}win(){const t=this.searchHandler;this.searchHandler=void 0,t&&t.onWin()}}const Ji=new ay;function ly(e,t){const n=[],i=e.clone();for(const s of t){const o=i.createMoveByUSI(s);if(!o||!i.doMove(o))break;n.push(o)}return n}class nc{constructor(t,n,i){C(this,"sessionID",0);C(this,"usi");C(this,"position");C(this,"searchHandler");C(this,"ponder");C(this,"inPonder",!1);C(this,"info");C(this,"usiInfoTimeout");this.setting=t,this.timeoutSeconds=n,this.onSearchInfo=i}async launch(){this.sessionID=await pe.usiLaunch(this.setting,this.timeoutSeconds),Sr[this.sessionID]=this}isEngine(){return!0}async startSearch(t,n,i,s,o){this.searchHandler=o,this.usi=t.usi,this.position=t.position.clone(),this.inPonder&&this.ponder===this.usi?pe.usiPonderHit(this.sessionID):(this.info=void 0,await pe.usiGo(this.sessionID,this.usi,n,i,s)),this.inPonder=!1,this.ponder=void 0}async startPonder(t,n,i,s){const o=t.usi;if(!this.ponder||!this.ponder.startsWith(o)||Ii(this.setting.options[Pf])!=="true")return;this.searchHandler=void 0,this.usi=this.ponder,this.position=t.position.clone();const a=this.position.createMoveByUSI(this.ponder.slice(o.length+1));a&&(this.position.doMove(a),this.info=void 0,this.inPonder=!0,await pe.usiGoPonder(this.sessionID,this.ponder,n,i,s))}async startResearch(t){this.searchHandler=void 0,this.usi=t.usi,this.info=void 0,this.position=t.position.clone(),await pe.usiGoInfinite(this.sessionID,t.usi)}async stop(){await pe.usiStop(this.sessionID)}async gameover(t){await pe.usiGameover(this.sessionID,t)}async close(){this.searchHandler=void 0,await pe.usiQuit(this.sessionID),delete Sr[this.sessionID]}onBestMove(t,n,i){const s=this.searchHandler;if(this.searchHandler=void 0,!s||!this.position||t!==this.usi)return;if(n==="resign"){s.onResign();return}if(n==="win"){s.onWin();return}const o=this.position.createMoveByUSI(n);if(!o){s.onError(":"+n),s.onResign();return}if(this.ponder=i&&`${t} ${n} ${i}`,this.flushUSIInfo(),this.info&&this.info.pv&&this.info.pv.length>=1&&this.info.pv[0].equals(o)){const r={...this.info,pv:this.info.pv.slice(1)};s.onMove(o,r)}else s.onMove(o)}onUSIInfo(t,n){if(t!==this.usi||!this.position||n.multipv&&n.multipv!==1)return;const i=this.position.color===D.BLACK?1:-1,s=n.pv&&n.pv.length>=1?n.pv:n.currmove?[n.currmove]:void 0,o={usi:t,depth:n.depth,score:n.scoreCP&&n.scoreCP*i,mate:n.scoreMate&&n.scoreMate*i,pv:s&&ly(this.position,s)};this.updateUSIInfo(o)}updateUSIInfo(t){this.info=t,!this.usiInfoTimeout&&(this.usiInfoTimeout=window.setTimeout(()=>{this.flushUSIInfo()},500))}flushUSIInfo(){this.usiInfoTimeout&&(clearTimeout(this.usiInfoTimeout),this.usiInfoTimeout=void 0),this.onSearchInfo&&this.info&&this.onSearchInfo(this.info)}}const Sr={};function cy(e,t,n,i){const s=Sr[e];s&&s.onBestMove(t,n,i)}function Mu(e,t,n){const i=Sr[e];i&&i.onUSIInfo(t,n)}function wr(e){return{async build(t,n){if(t.uri===nn)return Ji;if(Pn(t.uri)&&t.usi){const i=new nc(t.usi,e??10,n);return await i.launch(),i}throw new Error("defaultPlayerBuilder#build: URI: "+t.uri)}}}var Fn=(e=>(e.WIN="win",e.LOSE="lose",e.DRAW="draw",e))(Fn||{});function xu(e,t){return{player1:{name:e,win:0},player2:{name:t,win:0},draw:0,invalid:0,total:0}}class uy{constructor(t,n,i){C(this,"state");C(this,"_setting");C(this,"startPly",0);C(this,"repeat",0);C(this,"blackPlayer");C(this,"whitePlayer");C(this,"playerBuilder",wr());C(this,"_results",xu("",""));C(this,"lastEventID");C(this,"onSaveRecord",()=>{});C(this,"onGameNext",()=>{});C(this,"onGameEnd",()=>{});C(this,"onPieceBeat",()=>{});C(this,"onBeepShort",()=>{});C(this,"onBeepUnlimited",()=>{});C(this,"onStopBeep",()=>{});C(this,"onError",()=>{});this.recordManager=t,this.blackClock=n,this.whiteClock=i,this.state="idle",this._setting=yr(),this.lastEventID=0}on(t,n){switch(t){case"saveRecord":this.onSaveRecord=n;break;case"gameNext":this.onGameNext=n;break;case"gameEnd":this.onGameEnd=n;break;case"pieceBeat":this.onPieceBeat=n;break;case"beepShort":this.onBeepShort=n;break;case"beepUnlimited":this.onBeepUnlimited=n;break;case"stopBeep":this.onStopBeep=n;break;case"error":this.onError=n;break}return this}get setting(){return this._setting}get results(){return this._results}async startGame(t,n){if(this.state!=="idle")throw Error("GameManager#startGame: ");this._setting=t,this.playerBuilder=n,this.repeat=0,t.startPosition||(this.startPly=this.recordManager.record.current.number),this._results=xu(t.black.name,t.white.name),await this.nextGame()}async nextGame(){this.repeat++,this.setting.startPosition?this.recordManager.reset(this.setting.startPosition):this.recordManager.record.current.number!==this.startPly&&(this.recordManager.changePly(this.startPly),this.recordManager.removeNextMove()),this.recordManager.setGameStartMetadata({gameTitle:this.setting.repeat>=2?` ${this.repeat}/${this.setting.repeat}`:void 0,blackName:this.setting.black.name,whiteName:this.setting.white.name,timeLimit:this.setting.timeLimit});const t={timeMs:this.setting.timeLimit.timeSeconds*1e3,byoyomi:this.setting.timeLimit.byoyomi,increment:this.setting.timeLimit.increment,onBeepShort:()=>this.onBeepShort(),onBeepUnlimited:()=>this.onBeepUnlimited(),onStopBeep:()=>this.onStopBeep()};this.blackClock.setup({...t,onTimeout:()=>{this.timeout(D.BLACK)}}),this.whiteClock.setup({...t,onTimeout:()=>{this.timeout(D.WHITE)}});try{this.blackPlayer=await this.playerBuilder.build(this.setting.black,n=>this.recordManager.updateSearchInfo(qt.OPPONENT,n)),this.whitePlayer=await this.playerBuilder.build(this.setting.white,n=>this.recordManager.updateSearchInfo(qt.OPPONENT,n))}catch(n){try{await this.closePlayers()}catch(i){this.onError(i)}throw n}this.state="active",this.onGameNext(),setTimeout(()=>this.nextMove())}nextMove(){if(this.state!=="active")return;if(this._setting.maxMoves&&this.recordManager.record.current.number>=this._setting.maxMoves){this.endGame(ce.IMPASS);return}this.getActiveClock().start();const t=this.recordManager.record.position.color,n=this.getPlayer(t),i=this.getPlayer(Rt(t));if(!n||!i){this.onError(new Error("GameManager#nextMove: "));return}const s=this.issueEventID();n.startSearch(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs,{onMove:(o,r)=>this.onMove(s,o,r),onResign:()=>this.onResign(s),onWin:()=>this.onWin(s),onError:o=>this.onError(o)}).catch(o=>{this.onError(new Error(`GameManager#nextMove: ${U.failedToSendGoCommand}: ${o}`))}),i.startPonder(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs).catch(o=>{this.onError(new Error(`GameManager#nextMove: ${U.failedToSendPonderCommand}: ${o}`))})}onMove(t,n,i){if(t!==this.lastEventID){pe.log(_t.ERROR,"GameManager#onMove: event ID already disabled");return}if(this.state!=="active"){pe.log(_t.ERROR,"GameManager#onMove: invalid state: "+this.state);return}if(!this.recordManager.record.position.isValidMove(n)){this.onError(": "+Ni(this.recordManager.record.position,n)),this.endGame(ce.FOUL_LOSE);return}this.getActiveClock().stop(),this.recordManager.appendMove({move:n,moveOption:{ignoreValidation:!0},elapsedMs:this.getActiveClock().elapsedMs}),i&&this.recordManager.updateSearchInfo(qt.PLAYER,i),i&&this.setting.enableComment&&this.recordManager.appendSearchComment(qt.PLAYER,i,$n.APPEND),this.onPieceBeat();const s=this.recordManager.record.perpetualCheck;if(s)if(s===this.recordManager.record.position.color){this.endGame(ce.FOUL_LOSE);return}else{this.endGame(ce.FOUL_WIN);return}else if(this.recordManager.record.repetition){this.endGame(ce.REPETITION_DRAW);return}this.nextMove()}onResign(t){if(t!==this.lastEventID){pe.log(_t.ERROR,"GameManager#onResign: event ID already disabled");return}if(this.state!=="active"){pe.log(_t.ERROR,"GameManager#onResign: invalid state: "+this.state);return}this.endGame(ce.RESIGN)}onWin(t){if(t!==this.lastEventID){pe.log(_t.ERROR,"GameManager#onWin: event ID already disabled");return}if(this.state!=="active"){pe.log(_t.ERROR,"GameManager#onWin: invalid state: "+this.state);return}this.endGame(ce.ENTERING_OF_KING)}timeout(t){this.onStopBeep();const n=this.getPlayer(t);if(n&&n.isEngine()&&!this.setting.enableEngineTimeout){n.stop().catch(i=>{this.onError(new Error(`GameManager#timeout: ${U.failedToSendStopCommand}: ${i}`))});return}this.endGame(ce.TIMEOUT)}endGame(t){if(this.state!=="active"&&this.state!=="pending")return;this.state="bussy";const n=this.recordManager.record.position.color;Promise.resolve().then(()=>this.sendGameResults(n,t)).then(()=>this.closePlayers()).then(()=>{if(this.getActiveClock().pause(),this.recordManager.appendMove({move:t,elapsedMs:this.getActiveClock().elapsedMs}),this.recordManager.setGameEndMetadata(),this.addGameResults(n,t),this.state="idle",this._setting.enableAutoSave&&this.onSaveRecord(),t===ce.INTERRUPT||this.repeat>=this.setting.repeat){this.onGameEnd(this.results,t);return}this.setting.swapPlayers&&this.swapPlayers(),this.nextGame().catch(s=>{this.onError(s)})}).catch(i=>{this.onError(i),this.state="pending"})}addGameResults(t,n){switch(Ea(t,D.BLACK,n)){case Fn.WIN:this._results.player1.win++;break;case Fn.LOSE:this._results.player2.win++;break;case Fn.DRAW:this._results.draw++;break;default:this._results.invalid++;break}this._results.total++}swapPlayers(){this._setting={...this.setting,black:this.setting.white,white:this.setting.black},this._results={...this.results,player1:this.results.player2,player2:this.results.player1}}async sendGameResults(t,n){if(this.blackPlayer){const i=Ea(t,D.BLACK,n);i&&await this.blackPlayer.gameover(i)}if(this.whitePlayer){const i=Ea(t,D.WHITE,n);i&&await this.whitePlayer.gameover(i)}}async closePlayers(){this.blackPlayer&&(await this.blackPlayer.close(),this.blackPlayer=void 0),this.whitePlayer&&(await this.whitePlayer.close(),this.whitePlayer=void 0)}getPlayer(t){switch(t){case D.BLACK:return this.blackPlayer;case D.WHITE:return this.whitePlayer}}getActiveClock(){switch(this.recordManager.record.position.color){case D.BLACK:return this.blackClock;case D.WHITE:return this.whiteClock}}issueEventID(){return this.lastEventID+=1,this.lastEventID}}function Ea(e,t,n){switch(n){case ce.FOUL_WIN:case ce.ENTERING_OF_KING:return e==t?Fn.WIN:Fn.LOSE;case ce.RESIGN:case ce.MATE:case ce.TIMEOUT:case ce.FOUL_LOSE:return e==t?Fn.LOSE:Fn.WIN;case ce.IMPASS:case ce.REPETITION_DRAW:return Fn.DRAW}return null}function Ru(e){let t=hy(e);const n=e.getStandardMetadata(J.TITLE)||e.getStandardMetadata(J.TOURNAMENT)||e.getStandardMetadata(J.OPUS_NAME)||e.getStandardMetadata(J.OPUS_NO)||e.getStandardMetadata(J.PLACE)||e.getStandardMetadata(J.POSTED_ON)||e.getStandardMetadata(J.AUTHOR);n&&(t+="_"+n);const i=e.getStandardMetadata(J.BLACK_NAME)||e.getStandardMetadata(J.BLACK_SHORT_NAME);i&&(t+="_"+i);const s=e.getStandardMetadata(J.WHITE_NAME)||e.getStandardMetadata(J.WHITE_SHORT_NAME);return s&&(t+="_"+s),t.trim().replaceAll("/","_").replaceAll("\\","_")+".kif"}function hy(e){const t=e.getStandardMetadata(J.START_DATETIME)||e.getStandardMetadata(J.DATE);return t?t.trim().replaceAll(" ","_").replaceAll("/","").replaceAll(":",""):xf().replaceAll("/","")}class dy{constructor(){C(this,"count",0)}get isBussy(){return this.count!==0}retain(){this.count+=1}release(){this.count-=1}}function fy(e,t){const n=e.clone();let i,s="";for(const o of t){const r=n.createMoveByUSI(o);if(!r)break;s+=Ni(n,r,{prev:i}),n.doMove(r,{ignoreValidation:!0}),i=r}return s}class Of{constructor(t,n){C(this,"sfen","");C(this,"nodes");C(this,"nps");C(this,"iterates",[]);C(this,"hashfull");C(this,"currentMove");C(this,"currentMoveText");C(this,"ponderMove");this.sessionID=t,this.name=n}get latestIteration(){const t=[],n=new Set,i=new Set;for(const s of this.iterates){const o=s.pv?s.pv[0]:void 0;!n.has(s.multiPV)&&!i.has(o)&&(t.push(s),n.add(s.multiPV),i.add(o))}return t.sort((s,o)=>(s.multiPV||1)-(o.multiPV||1))}update(t,n,i){this.sfen!==t&&(this.sfen=t,this.nodes=void 0,this.nps=void 0,this.iterates=[],this.hashfull=void 0,this.currentMove=void 0,this.currentMoveText=void 0,this.ponderMove=void 0);const s=Ot.newBySFEN(t);if(!s)return;const o={position:t,color:s.color};if(n.depth!==void 0&&(o.depth=n.depth),n.seldepth!==void 0&&(o.selectiveDepth=n.seldepth),n.timeMs!==void 0&&(o.timeMs=n.timeMs),n.nodes!==void 0&&(this.nodes=n.nodes),n.pv&&(o.pv=n.pv,o.text=fy(s,n.pv)),n.multipv!==void 0&&(o.multiPV=n.multipv),n.scoreCP!==void 0&&(o.score=n.scoreCP),n.scoreMate!==void 0&&(o.scoreMate=n.scoreMate),n.lowerbound!==void 0&&(o.lowerBound=n.lowerbound),n.upperbound!==void 0&&(o.upperBound=n.upperbound),n.currmove!==void 0){this.currentMove=n.currmove;const r=s.createMoveByUSI(n.currmove);r&&(this.currentMoveText=Ni(s,r))}n.hashfullPerMill!==void 0&&(this.hashfull=n.hashfullPerMill/1e3),n.nps!==void 0&&(this.nps=n.nps),n.string&&(o.text=n.string),Object.keys(o).length!==0&&(n.nodes!==void 0&&(o.nodes=n.nodes),this.iterates.unshift(o)),this.ponderMove=i&&Ni(s,i)}}class py{constructor(){C(this,"_sessions",[]);C(this,"updateQueue",[]);C(this,"timeoutHandle")}get sessions(){return this._sessions}clear(){this._sessions=[],this.updateQueue=[],this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}update(t,n,i,s,o){this.updateQueue.push({sessionID:t,sfen:n.sfen,name:i,info:s,ponderMove:o}),this.timeoutHandle||(this.timeoutHandle=window.setTimeout(()=>{this.dequeue()},500))}dequeue(){for(const t of this.updateQueue)this._update(t);this.updateQueue=[],this.timeoutHandle=void 0}_update(t){let n=this._sessions.find(i=>i.sessionID===t.sessionID);n||(n=this.addSession(t.sessionID,t.name)),n.update(t.sfen,t.info,t.ponderMove)}addSession(t,n){const i=new Of(t,n);return this.sessions.push(i),this.sessions.sort((s,o)=>s.sessionID-o.sessionID),i}}var V=(e=>(e.NORMAL="normal",e.PASTE_DIALOG="pasteDialog",e.POSITION_EDITING="positionEditing",e.EXPORT_POSITION_IMAGE_DIALOG="exportBoardImageDialog",e.GAME_DIALOG="gameDialog",e.GAME="game",e.CSA_GAME_DIALOG="csaGameDialog",e.CSA_GAME="csaGame",e.RESEARCH="research",e.RESEARCH_DIALOG="researchDialog",e.ANALYSIS="analysis",e.ANALYSIS_DIALOG="analysisDialog",e.USI_ENGINE_SETTING_DIALOG="usiEngineSettingDialog",e))(V||{});class gy{constructor(){C(this,"_queue",[])}get message(){return this._queue[0]}get hasMessage(){return this._queue.length!==0}enqueue(t){this._queue.push(t)}dequeue(){this._queue.shift()}}class my{constructor(){C(this,"errorCounts",{})}get errors(){return Object.entries(this.errorCounts).sort(([t],[n])=>t<n?-1:t>n?1:0).map(([t,n])=>({message:t,count:n}))}get hasError(){return!!Object.keys(this.errorCounts).length}add(t){const n=t instanceof Error?t.message:""+t,i=this.errorCounts[n]||0;this.errorCounts[n]=i+1}clear(){this.errorCounts={}}}class by{constructor(){C(this,"setting",il())}get raw(){return this.setting}get language(){return this.setting.language}get thema(){return this.setting.thema}get pieceImage(){return this.setting.pieceImage}get backgroundImageType(){return this.setting.backgroundImageType}get backgroundImageFileURL(){return this.setting.backgroundImageFileURL}get boardImage(){return this.setting.boardImage}get boardImageFileURL(){return this.setting.boardImageFileURL}get pieceStandImage(){return this.setting.pieceStandImage}get pieceStandImageFileURL(){return this.setting.pieceStandImageFileURL}get boardLabelType(){return this.setting.boardLabelType}get leftSideControlType(){return this.setting.leftSideControlType}get rightSideControlType(){return this.setting.rightSideControlType}get pieceVolume(){return this.setting.pieceVolume}get clockVolume(){return this.setting.clockVolume}get clockPitch(){return this.setting.clockPitch}get clockSoundTarget(){return this.setting.clockSoundTarget}get boardFlipping(){return this.setting.boardFlipping}get tabPaneType(){return this.setting.tabPaneType}get tab(){return this.setting.tab}get tab2(){return this.setting.tab2}get topPaneHeightPercentage(){return this.setting.topPaneHeightPercentage}get topPanePreviousHeightPercentage(){return this.setting.topPanePreviousHeightPercentage}get bottomLeftPaneWidthPercentage(){return this.setting.bottomLeftPaneWidthPercentage}get returnCode(){return this.setting.returnCode}get autoSaveDirectory(){return this.setting.autoSaveDirectory}get translateEngineOptionName(){return this.setting.translateEngineOptionName}get engineTimeoutSeconds(){return this.setting.engineTimeoutSeconds}get evaluationViewFrom(){return this.setting.evaluationViewFrom}get coefficientInSigmoid(){return this.setting.coefficientInSigmoid}get badMoveLevelThreshold1(){return this.setting.badMoveLevelThreshold1}get badMoveLevelThreshold2(){return this.setting.badMoveLevelThreshold2}get badMoveLevelThreshold3(){return this.setting.badMoveLevelThreshold3}get badMoveLevelThreshold4(){return this.setting.badMoveLevelThreshold4}get showElapsedTimeInRecordView(){return this.setting.showElapsedTimeInRecordView}get showCommentInRecordView(){return this.setting.showCommentInRecordView}get enableAppLog(){return this.setting.enableAppLog}get enableUSILog(){return this.setting.enableUSILog}get enableCSALog(){return this.setting.enableCSALog}get logLevel(){return this.setting.logLevel}get positionImageStyle(){return this.setting.positionImageStyle}get positionImageSize(){return this.setting.positionImageSize}get positionImageHeader(){return this.setting.positionImageHeader}get lastRecordFilePath(){return this.setting.lastRecordFilePath}get lastUSIEngineFilePath(){return this.setting.lastUSIEngineFilePath}get lastImageExportFilePath(){return this.setting.lastImageExportFilePath}get lastOtherFilePath(){return this.setting.lastOtherFilePath}async loadAppSetting(){this.setting=await pe.loadAppSetting()}async updateAppSetting(t){const n=Cb(this.setting,t);if(n instanceof Error)throw n;await pe.saveAppSetting(n),this.setting=n}flipBoard(){this.setting.boardFlipping=!this.setting.boardFlipping,pe.saveAppSetting(this.setting)}}function yy(){return yn(new by)}let Ia;function $e(){return Ia||(Ia=yy()),Ia}class _y{constructor(t){C(this,"researcher");C(this,"setting",br());C(this,"number");C(this,"actualMove");C(this,"lastSearchInfo");C(this,"searchInfo");C(this,"timerHandle");C(this,"onFinish",()=>{});C(this,"onError",()=>{});this.recordManager=t}on(t,n){switch(t){case"finish":this.onFinish=n;break;case"error":this.onError=n;break}return this}async start(t){if(!t.usi)throw new Error("");await this.setupEngine(t.usi),this.setting=t,this.number=void 0,this.actualMove=void 0,this.lastSearchInfo=void 0,this.searchInfo=void 0,setTimeout(()=>this.next())}close(){this.clearTimer(),this.closeEngine().catch(t=>{this.onError(t)})}async setupEngine(t){if(this.researcher)throw new Error("AnalysisManager#setupEngine: ");const n=$e(),i=new nc(t,n.engineTimeoutSeconds,this.updateSearchInfo.bind(this));await i.launch(),this.researcher=i}async closeEngine(){this.researcher&&(await this.researcher.close(),this.researcher=void 0)}next(){if(this.clearTimer(),!this.researcher){this.onError(new Error("")),this.finish();return}if(this.lastSearchInfo=this.searchInfo,this.searchInfo=void 0,this.number!==void 0?this.number=this.number+1:this.setting.startCriteria.enableNumber?this.number=this.setting.startCriteria.number-1:this.number=0,this.setting.endCriteria.enableNumber&&this.number>=this.setting.endCriteria.number){this.finish();return}this.recordManager.changePly(this.number);const t=this.recordManager.record;if(t.current.number!==this.number){this.finish();return}if(!t.current.next&&!(t.current.move instanceof ot)){this.finish();return}this.actualMove=t.current.move instanceof ot?t.current.move:void 0,this.setTimer(),this.researcher.startResearch(t).catch(n=>{this.onError(n)})}finish(){this.onFinish(),this.close()}setTimer(){this.timerHandle=window.setTimeout(()=>{this.onResult(),this.next()},this.setting.perMoveCriteria.maxSeconds*1e3)}clearTimer(){this.timerHandle&&(clearTimeout(this.timerHandle),this.timerHandle=void 0)}onResult(){if(!this.searchInfo||!this.lastSearchInfo)return;const t=this.recordManager.record,i=Rt(t.position.color)===D.BLACK?1:-1,s=this.searchInfo.score!==void 0?this.searchInfo.score*i:void 0,o=this.searchInfo.score!==void 0&&this.lastSearchInfo.score!==void 0?(this.searchInfo.score-this.lastSearchInfo.score)*i:void 0,r=this.actualMove&&this.lastSearchInfo.pv?this.actualMove.equals(this.lastSearchInfo.pv[0]):void 0,a=$e();let l="";if(o!==void 0&&s!==void 0&&!r){const c=vy(s-o,s,a);c&&(l=`${c}`)}this.recordManager.appendSearchComment(qt.RESEARCHER,this.searchInfo,this.setting.commentBehavior,l)}updateSearchInfo(t){this.recordManager.updateSearchInfo(qt.RESEARCHER,t),this.searchInfo=t}}function vy(e,t,n){const i=ol(e,n.coefficientInSigmoid)-ol(t,n.coefficientInSigmoid);return i>=n.badMoveLevelThreshold4?"":i>=n.badMoveLevelThreshold3?"":i>=n.badMoveLevelThreshold2?"":i>=n.badMoveLevelThreshold1?"":null}function Sy(){return{id:"",myColor:D.BLACK,toMove:D.BLACK,position:"",timeUnitMs:1e3,totalTime:0,byoyomi:0,delay:0,increment:0}}var Rn=(e=>(e.UNKNOWN="unknown",e.RESIGN="resign",e.SENNICHITE="sennichite",e.OUTE_SENNICHITE="oute_sennichite",e.ILLEGAL_MOVE="illegal_move",e.ILLEGAL_ACTION="illegal_action",e.TIME_UP="time_up",e.JISHOGI="jishogi",e.MAX_MOVES="max_moves",e))(Rn||{}),Go=(e=>(e.WIN="win",e.LOSE="lose",e.DRAW="draw",e.CENSORED="censored",e.CHUDAN="chudan",e))(Go||{}),Ys=(e=>(e.V121="v121",e.V121_FLOODGATE="v121_floodgate",e))(Ys||{});function Lf(){return{protocolVersion:"v121",host:"localhost",port:4081,id:"",password:""}}function wy(){return{player:{name:"",uri:nn},server:Lf(),autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function Ey(e){if(e.server.protocolVersion!=="v121"&&e.server.protocolVersion!=="v121_floodgate")return new Error("");if(e.server.host==="")return new Error("");if(e.server.port<0||e.server.port>65535)return new Error("");if(e.server.id==="")return new Error("ID")}function Iy(){return{player:{name:"",uri:nn},serverHistory:[],autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function ky(e,t){var n;return{player:e.player,server:((n=e.serverHistory)==null?void 0:n.length)>t?e.serverHistory[t]:Lf(),autoFlip:e.autoFlip,enableComment:e.enableComment,enableAutoSave:e.enableAutoSave,repeat:e.repeat,autoRelogin:e.autoRelogin}}const Bf=10;function Py(e,t){const n=[t.server];for(const i of e.serverHistory)if((i.protocolVersion!==t.server.protocolVersion||i.host!==t.server.host||i.port!==t.server.port||i.id!==t.server.id||i.password!==t.server.password)&&n.push(i),n.length===Bf)break;return{player:t.player,serverHistory:n,autoFlip:t.autoFlip,enableComment:t.enableComment,enableAutoSave:t.enableAutoSave,repeat:t.repeat,autoRelogin:t.autoRelogin}}const Df=10;var ni=(e=>(e[e.OFFLINE=0]="OFFLINE",e[e.WAITING_LOGIN=1]="WAITING_LOGIN",e[e.LOGIN_FAILED=2]="LOGIN_FAILED",e[e.LOGIN_RETRY_INTERVAL=3]="LOGIN_RETRY_INTERVAL",e[e.READY=4]="READY",e[e.GAME=5]="GAME",e))(ni||{});class Ay{constructor(t,n,i){C(this,"_state",0);C(this,"_setting",wy());C(this,"sessionID",0);C(this,"stopRequested",!1);C(this,"repeat",0);C(this,"player");C(this,"gameSummary",Sy());C(this,"searchInfo");C(this,"playerBuilder",wr());C(this,"retryTimer");C(this,"onSaveRecord",()=>{});C(this,"onGameNext",()=>{});C(this,"onGameEnd",()=>{});C(this,"onFlipBoard",()=>{});C(this,"onPieceBeat",()=>{});C(this,"onBeepShort",()=>{});C(this,"onBeepUnlimited",()=>{});C(this,"onStopBeep",()=>{});C(this,"onError",()=>{});this.recordManager=t,this.blackClock=n,this.whiteClock=i}on(t,n){switch(t){case"saveRecord":this.onSaveRecord=n;break;case"gameNext":this.onGameNext=n;break;case"gameEnd":this.onGameEnd=n;break;case"flipBoard":this.onFlipBoard=n;break;case"pieceBeat":this.onPieceBeat=n;break;case"beepShort":this.onBeepShort=n;break;case"beepUnlimited":this.onBeepUnlimited=n;break;case"stopBeep":this.onStopBeep=n;break;case"error":this.onError=n;break}return this}get state(){return this._state}get setting(){return this._setting}get isMyTurn(){return this.recordManager.record.position.color===this.gameSummary.myColor}login(t,n){return this.sessionID?Promise.reject(new Error("CSAGameManager#start: session already exists")):this._state!==0?Promise.reject(new Error("CSAGameManager#start: unexpected state")):(this._setting=t,this.playerBuilder=n,this.repeat=0,this.relogin())}async relogin(){this._state=1;try{this.player=await this.playerBuilder.build(this._setting.player,n=>this.recordManager.updateSearchInfo(qt.OPPONENT,n));const t=await pe.csaLogin(this._setting.server);this.sessionID=t,this._state=4,Ty(this.sessionID,this),this.onGameNext()}catch(t){throw this._state=2,this.close(1),t}}stop(){this.sessionID&&(this.stopRequested=!0,pe.csaStop(this.sessionID))}logout(){this.close(0)}close(t){if(!(this._state===0||this._state===1)){if(this.stopRequested&&(t=0,this.stopRequested=!1),this.sessionID&&(Cy(this.sessionID),pe.csaLogout(this.sessionID).catch(this.onError),this.sessionID=0),this.player&&(this.player.close().catch(this.onError),this.player=void 0),this.blackClock.stop(),this.whiteClock.stop(),this._state=0,this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=void 0),t===0||this.repeat>=this.setting.repeat){this.onGameEnd();return}t===2?this.relogin().catch(this.onError):(this._state=3,this.retryTimer=setTimeout(()=>this.relogin().catch(this.onError),Df*1e3))}}onGameSummary(t){this.gameSummary=t,pe.csaAgree(this.sessionID,this.gameSummary.id)}onReject(){this.close(1)}onStart(t){this.repeat++,this.recordManager.importRecord(this.gameSummary.position,Wi.CSA),this.recordManager.setGameStartMetadata({gameTitle:this.gameSummary.id,blackName:this.gameSummary.blackPlayerName,whiteName:this.gameSummary.whitePlayerName,timeLimit:{timeSeconds:this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,increment:this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3}}),this.setting.autoFlip&&this.onFlipBoard&&this.onFlipBoard(this.gameSummary.myColor===D.WHITE),this._state=5,this.next(t)}onMove(t,n){const i=this.isMyTurn,s=Sb(this.recordManager.record.position,t);if(s instanceof Error){this.onError(`CSAGameManager#onMove:  [${t}]: ${s.message}`);return}this.recordManager.appendMove({move:s,moveOption:{ignoreValidation:!0},elapsedMs:this.parseElapsedMs(t)}),i&&this.searchInfo&&this.recordManager.updateSearchInfo(qt.PLAYER,this.searchInfo),i&&this.searchInfo&&this.setting.enableComment&&this.recordManager.appendSearchComment(qt.PLAYER,this.searchInfo,$n.APPEND),this.onPieceBeat(),this.next(n)}parseElapsedMs(t){const n=/^.*,T([0-9]+)$/.exec(t);return n?Number(parseInt(n[1]))*this.gameSummary.timeUnitMs:0}onGameResult(t,n){this.recordManager.appendMove({move:this.gameResultToSpecialMove(t,n)}),this.setting.enableAutoSave&&this.onSaveRecord(),this.close(2)}gameResultToSpecialMove(t,n){const i=this.recordManager.record.position.color;switch(t){case Rn.RESIGN:return ce.RESIGN;case Rn.SENNICHITE:return ce.REPETITION_DRAW;case Rn.OUTE_SENNICHITE:case Rn.ILLEGAL_MOVE:case Rn.ILLEGAL_ACTION:switch(n){case Go.WIN:return i===this.gameSummary.myColor?ce.FOUL_WIN:ce.FOUL_LOSE;case Go.LOSE:return i===this.gameSummary.myColor?ce.FOUL_LOSE:ce.FOUL_WIN}break;case Rn.TIME_UP:return ce.TIMEOUT;case Rn.JISHOGI:return ce.ENTERING_OF_KING;case Rn.MAX_MOVES:return ce.IMPASS}return n===Go.DRAW?ce.DRAW:ce.INTERRUPT}onClose(){this.close(this.setting.autoRelogin?1:0)}next(t){this.blackClock.stop(),this.whiteClock.stop(),this.syncClock(t),this.startClock(),this.recordManager.record.position.color===this.gameSummary.myColor?this.startSearch(t):this.startPonder()}syncClock(t){const n={byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,onBeepShort:()=>this.onBeepShort(),onBeepUnlimited:()=>this.onBeepUnlimited(),onStopBeep:()=>this.onStopBeep()};this.blackClock.setup({...n,timeMs:t.black.time*this.gameSummary.timeUnitMs}),this.whiteClock.setup({...n,timeMs:t.white.time*this.gameSummary.timeUnitMs})}startClock(){this.recordManager.record.position.color===D.BLACK?this.blackClock.start():this.whiteClock.start()}startSearch(t){if(!this.player){this.onError("CSAGameManager#startSearch: player is not initialized");return}this.player.startSearch(this.recordManager.record,this.buildTimeLimitSetting(),t.black.time*this.gameSummary.timeUnitMs,t.white.time*this.gameSummary.timeUnitMs,{onMove:this.onPlayerMove.bind(this),onResign:this.onPlayerResign.bind(this),onWin:this.onPlayerWin.bind(this),onError:this.onPlayerError.bind(this)}).catch(n=>{this.onError(new Error(`CSAGameManager#next: ${U.failedToSendGoCommand}: ${n}`))})}startPonder(){if(!this.player){this.onError("CSAGameManager#startPonder: player is not initialized");return}this.player.startPonder(this.recordManager.record,this.buildTimeLimitSetting(),this.blackClock.timeMs,this.whiteClock.timeMs).catch(t=>{this.onError(new Error(`CSAGameManager#next: ${U.failedToSendPonderCommand}: ${t}`))})}buildTimeLimitSetting(){const t=this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,n=this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,i=this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3;return{timeSeconds:t,byoyomi:n,increment:i}}onPlayerMove(t,n){this.searchInfo=n;let i,s;switch(this._setting.server.protocolVersion){case Ys.V121:break;case Ys.V121_FLOODGATE:if(i=n==null?void 0:n.score,n!=null&&n.pv)for(const o of n.pv)s=s?s+" ":"",s+=au(o);break}pe.csaMove(this.sessionID,au(t),i,s)}onPlayerResign(){pe.csaResign(this.sessionID)}onPlayerWin(){pe.csaWin(this.sessionID)}onPlayerError(t){this.onError(t)}}const ci={};function Ty(e,t){ci[e]=t}function Cy(e){delete ci[e]}function My(e,t){const n=ci[e];n&&n.onGameSummary(t)}function xy(e){const t=ci[e];t&&t.onReject()}function Ry(e,t){const n=ci[e];n&&n.onStart(t)}function Ny(e,t,n){const i=ci[e];i&&i.onMove(t,n)}function Oy(e,t,n){const i=ci[e];i&&i.onGameResult(t,n)}function Ly(e){const t=ci[e];t&&t.onClose()}class Nu{constructor(){C(this,"setting",{timeMs:0,byoyomi:0,increment:0});C(this,"_timeMs",0);C(this,"_byoyomi",0);C(this,"_elapsedMs",0);C(this,"timerHandle",0);C(this,"timerStart",0);C(this,"lastTimeMs",0)}setup(t){this.setting=t,this._timeMs=t.timeMs||0,this._byoyomi=t.byoyomi||0,this._elapsedMs=0}get time(){return Math.ceil(this._timeMs/1e3)}get timeMs(){return this._timeMs}get byoyomi(){return this._byoyomi}get elapsedMs(){return this._elapsedMs}start(){this.clearTimer(),this.timerStart=Date.now(),this.lastTimeMs=this._timeMs,this._byoyomi=this.setting.byoyomi||0,this._elapsedMs=0,this.timerHandle=window.setInterval(()=>{const t=this.timeMs,n=this.byoyomi;this._elapsedMs=Date.now()-this.timerStart;const i=this.lastTimeMs-this._elapsedMs;if(i>=0?this._timeMs=i:(this._timeMs=0,this._byoyomi=Math.max(Math.ceil((this.setting.byoyomi||0)+i/1e3),0)),this.timeMs===0&&this.byoyomi===0){this.timeout();return}this.fireBeep(t,n)},100)}fireBeep(t,n){let i=Math.ceil(this.timeMs/1e3),s=Math.ceil(t/1e3);if(!(i!==0&&this.byoyomi!==0)){if(i===0&&s!==0){this.setting.onBeepShort&&this.setting.onBeepShort();return}this.byoyomi!==0&&(i=this.byoyomi,s=n),i!==s&&(i<=5?this.setting.onBeepUnlimited&&this.setting.onBeepUnlimited():(i<=10||i===20||i===30||i===60)&&this.setting.onBeepShort&&this.setting.onBeepShort())}}pause(){this.clearTimer()}stop(){this.clearTimer(),this.incrementTime()}timeout(){this.clearTimer(),this.setting.onTimeout&&this.setting.onTimeout()}clearTimer(){this.timerHandle&&(window.clearInterval(this.timerHandle),this.timerHandle=0),this.setting.onStopBeep&&this.setting.onStopBeep()}incrementTime(){this._timeMs+=(this.setting.increment||0)*1e3}}function By(e){switch(e){case 0:return qt.RESEARCHER;case 1:return qt.RESEARCHER_2;case 2:return qt.RESEARCHER_3;case 3:return qt.RESEARCHER_4;default:return}}class Dy{constructor(){C(this,"engines",[]);C(this,"onUpdateSearchInfo")}on(t,n){switch(t){case"updateSearchInfo":this.onUpdateSearchInfo=n}}async launch(t){var s;if(t.usi===void 0)throw new Error("ResearchManager#launch: USI");for(const o of t.secondaries||[])if(o.usi===void 0)throw new Error("ResearchManager#launch: USI");if(this.engines.length>0)throw new Error("ResearchManager#launch: ");const n=$e(),i=[t.usi,...((s=t.secondaries)==null?void 0:s.map(o=>o.usi))||[]].filter(o=>!!o);this.engines=i.map((o,r)=>{const a=By(r);return new nc(o,n.engineTimeoutSeconds,l=>{this.onUpdateSearchInfo&&a!==void 0&&this.onUpdateSearchInfo(a,l)})});try{await Promise.all(this.engines.map(o=>o.launch()))}catch(o){throw this.close(),o}}updatePosition(t){this.engines.forEach(n=>n.startResearch(t))}async close(){await Promise.allSettled(this.engines.map(t=>t.close())),this.engines=[]}}function Ou(e){const t=e.total-e.invalid;return[{type:"list",items:[{text:e.player1.name,children:[`: ${e.player1.win}`,`: ${Yc(e.player1.win,t,1)}`]},{text:e.player2.name,children:[`: ${e.player2.win}`,`: ${Yc(e.player2.win,t,1)}`]},{text:`: ${e.draw}`},{text:`: ${t}`},{text:`: ${e.invalid}`}]}]}class Fy{constructor(){C(this,"onChangeFilePath",[]);C(this,"_bussy",new dy);C(this,"_message",new gy);C(this,"_error",new my);C(this,"recordManager",new ry);C(this,"_appState",V.NORMAL);C(this,"_isAppSettingDialogVisible",!1);C(this,"_confirmation");C(this,"usiMonitor",new py);C(this,"blackClock",new Nu);C(this,"whiteClock",new Nu);C(this,"gameManager",new uy(this.recordManager,this.blackClock,this.whiteClock));C(this,"csaGameManager",new Ay(this.recordManager,this.blackClock,this.whiteClock));C(this,"researchManager",new Dy);C(this,"analysisManager",new _y(this.recordManager));C(this,"_reactive");this.recordManager.on("changeFilePath",i=>{for(const s of this.onChangeFilePath)s(i)}),this.recordManager.on("changePosition",()=>{this.onUpdatePosition()});const t=yn(this),n=$e();this.gameManager.on("saveRecord",t.onSaveRecord.bind(t)).on("gameNext",t.onGameNext.bind(t)).on("gameEnd",t.onGameEnd.bind(t)).on("pieceBeat",()=>ha(n.pieceVolume)).on("beepShort",this.onBeepShort.bind(this)).on("beepUnlimited",this.onBeepUnlimited.bind(this)).on("stopBeep",du).on("error",t.pushError.bind(t)),this.csaGameManager.on("saveRecord",t.onSaveRecord.bind(t)).on("gameNext",t.onGameNext.bind(t)).on("gameEnd",t.onCSAGameEnd.bind(t)).on("flipBoard",t.onFlipBoard.bind(t)).on("pieceBeat",()=>ha(n.pieceVolume)).on("beepShort",this.onBeepShort.bind(this)).on("beepUnlimited",this.onBeepUnlimited.bind(this)).on("stopBeep",du).on("error",t.pushError.bind(t)),this.researchManager.on("updateSearchInfo",this.onUpdateSearchInfo.bind(t)),this.analysisManager.on("finish",this.onFinish.bind(t)).on("error",this.pushError.bind(t)),this._reactive=t}addListener(t,n){switch(t){case"changeFilePath":this.onChangeFilePath.push(n);break}return this}get reactive(){return this._reactive}get isBussy(){return this._bussy.isBussy}retainBussyState(){return this._bussy.retain()}releaseBussyState(){return this._bussy.release()}get message(){return this._message.message}get hasMessage(){return this._message.hasMessage}enqueueMessage(t){this._message.enqueue(t)}dequeueMessage(){this._message.dequeue()}get errors(){return this._error.errors}get hasError(){return this._error.hasError}pushError(t){pe.log(_t.ERROR,Qd(t)),this._error.add(t)}clearErrors(){this._error.clear()}get record(){return this.recordManager.record}get recordFilePath(){return this.recordManager.recordFilePath}get inCommentPVs(){return this.recordManager.inCommentPVs}updateStandardRecordMetadata(t){this.recordManager.updateStandardMetadata(t)}get appState(){return this._appState}get confirmation(){var t;return(t=this._confirmation)==null?void 0:t.message}showConfirmation(t){this._confirmation&&pe.log(_t.WARN,`Store#showConfirmation:  appState=${this.appState} currentMessage=${this._confirmation.message} newMessage=${t.message}`),this._confirmation={...t,appState:this.appState}}confirmationOk(){if(!this._confirmation)return;const t=this._confirmation;if(this._confirmation=void 0,this.appState!==t.appState){this.pushError("");return}t.onOk&&t.onOk()}confirmationCancel(){this._confirmation=void 0}showPasteDialog(){this.appState===V.NORMAL&&(this._appState=V.PASTE_DIALOG)}showGameDialog(){this.appState===V.NORMAL&&(this._appState=V.GAME_DIALOG)}showCSAGameDialog(){this.appState===V.NORMAL&&(this._appState=V.CSA_GAME_DIALOG)}showResearchDialog(){this.appState===V.NORMAL&&(this._appState=V.RESEARCH_DIALOG)}showAnalysisDialog(){this.appState===V.NORMAL&&(this._appState=V.ANALYSIS_DIALOG)}showUsiEngineManagementDialog(){this.appState===V.NORMAL&&(this._appState=V.USI_ENGINE_SETTING_DIALOG)}showExportBoardImageDialog(){this.appState===V.NORMAL&&(this._appState=V.EXPORT_POSITION_IMAGE_DIALOG)}destroyModalDialog(){(this.appState===V.PASTE_DIALOG||this.appState===V.GAME_DIALOG||this.appState===V.CSA_GAME_DIALOG||this.appState===V.RESEARCH_DIALOG||this.appState===V.ANALYSIS_DIALOG||this.appState===V.USI_ENGINE_SETTING_DIALOG||this.appState===V.EXPORT_POSITION_IMAGE_DIALOG)&&(this._appState=V.NORMAL)}closeModalDialog(){this.isBussy||this.destroyModalDialog()}get isAppSettingDialogVisible(){return this._isAppSettingDialogVisible}showAppSettingDialog(){this._isAppSettingDialogVisible=!0}closeAppSettingDialog(){this._isAppSettingDialogVisible=!1}get usiMonitors(){return this.usiMonitor.sessions}updateUSIInfo(t,n,i,s){this.recordManager.record.usi===n&&this.usiMonitor.update(t,this.recordManager.record.position,i,s)}updateUSIPonderInfo(t,n,i,s){const o=Ct.newByUSI(n);if(o instanceof Error){pe.log(_t.ERROR,`invalid USI: ${n} (updateUSIPonderInfo)`);return}const r=o.current.move;r instanceof ot&&this.usiMonitor.update(t,o.position,i,s,r)}get blackTime(){return this.blackClock.time}get blackByoyomi(){return this.blackClock.byoyomi}get whiteTime(){return this.whiteClock.time}get whiteByoyomi(){return this.whiteClock.byoyomi}startGame(t){this.appState!==V.GAME_DIALOG||this.isBussy||(this.retainBussyState(),pe.saveGameSetting(t).then(()=>{this.initializeDisplaySettingForGame(t);const n=$e(),i=wr(n.engineTimeoutSeconds);return this.gameManager.startGame(t,i)}).then(()=>this._appState=V.GAME).catch(n=>{this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()}))}get gameSetting(){return this.gameManager.setting}get gameResults(){return this.gameManager.results}get csaGameState(){return this.csaGameManager.state}loginCSAGame(t,n){this.appState!==V.CSA_GAME_DIALOG||this.isBussy||(this.retainBussyState(),Promise.resolve().then(async()=>{if(n.saveHistory){const i=await pe.loadCSAGameSettingHistory(),s=Py(i,t);await pe.saveCSAGameSettingHistory(s)}}).then(()=>{const i=$e(),s=wr(i.engineTimeoutSeconds);return this.csaGameManager.login(t,s)}).then(()=>this._appState=V.CSA_GAME).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}cancelCSAGame(){if(this.appState===V.CSA_GAME){if(this.csaGameManager.state===ni.GAME){this.pushError("");return}this.csaGameManager.logout(),this._appState=V.NORMAL}}initializeDisplaySettingForGame(t){if(t.humanIsFront){const n=$e();let i=n.boardFlipping;t.black.uri===nn&&t.white.uri!==nn?i=!1:t.black.uri!==nn&&t.white.uri===nn&&(i=!0),i!==n.boardFlipping&&n.flipBoard()}}stopGame(){switch(this.appState){case V.GAME:this.gameManager.setting.repeat>=2?this.showConfirmation({message:U.areYouSureWantToQuitGames,onOk:()=>this.gameManager.endGame(ce.INTERRUPT)}):this.gameManager.endGame(ce.INTERRUPT);break;case V.CSA_GAME:this.showConfirmation({message:U.areYouSureWantToRequestQuit,onOk:()=>this.csaGameManager.stop()});break}}showGameResults(){if(this.appState!==V.GAME)return;const t=this.gameManager.results;this.enqueueMessage({text:U.gameProgress,attachments:Ou(t)})}onGameNext(){this.usiMonitor.clear()}onGameEnd(t,n){this.appState===V.GAME&&(t&&t.total>=2?this.enqueueMessage({text:U.allGamesCompleted,attachments:Ou(t)}):n&&this.enqueueMessage({text:`${U.gameEnded}${gf(n)})`}),this._appState=V.NORMAL)}onCSAGameEnd(){this.appState===V.CSA_GAME&&(this._appState=V.NORMAL)}onFlipBoard(t){$e().boardFlipping!==t&&$e().flipBoard()}onSaveRecord(){const t=Ru(this.recordManager.record.metadata),i=`${$e().autoSaveDirectory}/${t}`;this.saveRecordByPath(i).catch(s=>{this.pushError(`: ${s}`)})}onBeepShort(){const t=$e();t.clockSoundTarget===nl.ONLY_USER&&!this.isMovableByUser||m1({frequency:t.clockPitch,volume:t.clockVolume})}onBeepUnlimited(){const t=$e();t.clockSoundTarget===nl.ONLY_USER&&!this.isMovableByUser||b1({frequency:t.clockPitch,volume:t.clockVolume})}doMove(t){if(this.appState!==V.NORMAL&&this.appState!==V.RESEARCH||!this.recordManager.appendMove({move:t}))return;const n=$e();ha(n.pieceVolume)}onFinish(){this.appState===V.ANALYSIS&&(this._message.enqueue({text:""}),this._appState=V.NORMAL)}startResearch(t){if(!(this.appState!==V.RESEARCH_DIALOG||this.isBussy)){if(this.retainBussyState(),!t.usi){this.pushError(new Error(""));return}pe.saveResearchSetting(t).then(()=>this.researchManager.launch(t)).then(()=>{this._appState=V.RESEARCH,this.usiMonitor.clear(),this.onUpdatePosition();const n=$e();n.tab!==Ut.SEARCH&&n.tab!==Ut.PV&&n.tab!==Ut.CHART&&n.tab!==Ut.PERCENTAGE_CHART&&$e().updateAppSetting({tab:Ut.PV})}).catch(n=>{this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()})}}stopResearch(){this.appState===V.RESEARCH&&(this.researchManager.close(),this._appState=V.NORMAL)}onUpdateSearchInfo(t,n){this.recordManager.updateSearchInfo(t,n)}startAnalysis(t){this.appState!==V.ANALYSIS_DIALOG||this.isBussy||(this.retainBussyState(),pe.saveAnalysisSetting(t).then(()=>this.analysisManager.start(t)).then(()=>{this._appState=V.ANALYSIS,this.usiMonitor.clear()}).catch(n=>{this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()}))}stopAnalysis(){this.appState===V.ANALYSIS&&(this.analysisManager.close(),this._appState=V.NORMAL)}onUpdatePosition(){this.researchManager&&this.researchManager.updatePosition(this.recordManager.record)}resetRecord(){this.appState==V.NORMAL&&this.showConfirmation({message:U.areYouSureWantToClearRecord,onOk:()=>{this.recordManager.reset()}})}updateRecordComment(t){this.recordManager.updateComment(t)}insertSpecialMove(t){this.appState!==V.NORMAL&&this.appState!==V.RESEARCH||this.recordManager.appendMove({move:t})}startPositionEditing(){this.appState===V.NORMAL&&this.showConfirmation({message:U.areYouSureWantToClearRecord,onOk:()=>{this._appState=V.POSITION_EDITING,this.recordManager.resetByCurrentPosition()}})}endPositionEditing(){this.appState===V.POSITION_EDITING&&(this._appState=V.NORMAL)}initializePosition(t){this.appState==V.POSITION_EDITING&&this.showConfirmation({message:U.areYouSureWantToDiscardPosition,onOk:()=>{this.recordManager.reset(t)}})}changeTurn(){this.appState==V.POSITION_EDITING&&this.recordManager.swapNextTurn()}editPosition(t){this.appState===V.POSITION_EDITING&&this.recordManager.changePosition(t)}changePly(t){(this.appState===V.NORMAL||this.appState===V.RESEARCH)&&this.recordManager.changePly(t)}changeBranch(t){(this.appState===V.NORMAL||this.appState===V.RESEARCH)&&this.recordManager.changeBranch(t)}swapWithNextBranch(){return this.recordManager.swapWithNextBranch()}swapWithPreviousBranch(){return this.recordManager.swapWithPreviousBranch()}removeCurrentMove(){if(!(this.appState!==V.NORMAL&&this.appState!==V.RESEARCH)){if(this.recordManager.record.current.isLastMove){this.recordManager.removeCurrentMove();return}this.showConfirmation({message:U.areYouSureWantToDeleteFollowingMove(this.recordManager.record.current.number),onOk:()=>{this.recordManager.removeCurrentMove()}})}}copyRecordKIF(){const t=$e(),n=vf(this.recordManager.record,{returnCode:t.returnCode});navigator.clipboard.writeText(n)}copyRecordCSA(){const t=$e(),n=Ef(this.recordManager.record,{returnCode:t.returnCode});navigator.clipboard.writeText(n)}copyRecordUSIBefore(){const t=this.recordManager.record.usi;navigator.clipboard.writeText(t)}copyRecordUSIAll(){const t=this.recordManager.record.usiAll;navigator.clipboard.writeText(t)}copyBoardSFEN(){const t=this.recordManager.record.sfen;navigator.clipboard.writeText(t)}pasteRecord(t){if(this.appState!==V.NORMAL)return;const n=this.recordManager.importRecord(t);if(n){this.pushError(n);return}}openRecord(t){this.appState!==V.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>t||pe.showOpenRecordDialog()).then(n=>{if(n)return pe.openRecord(n).then(i=>{const s=this.recordManager.importRecordFromBuffer(i,n);return s&&Promise.reject(s)})}).catch(n=>{this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()}))}saveRecord(t){this.appState!==V.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>{const n=this.recordManager.recordFilePath;if(t!=null&&t.overwrite&&n)return n;const i=Ru(this.recordManager.record.metadata);return pe.showSaveRecordDialog(i)}).then(n=>{if(n)return this.saveRecordByPath(n)}).catch(n=>{this.pushError(n)}).finally(()=>{this.releaseBussyState()}))}async saveRecordByPath(t){const n=$e(),i=this.recordManager.exportRecordAsBuffer(t,{returnCode:n.returnCode});if(i instanceof Error)throw i;this.retainBussyState();try{await pe.saveRecord(t,i)}catch(s){throw new Error(`${U.failedToSaveRecord}: ${s}`)}finally{this.releaseBussyState()}}get isMovableByUser(){switch(this.appState){case V.NORMAL:case V.RESEARCH:return!0;case V.GAME:return(this.recordManager.record.position.color===D.BLACK?this.gameManager.setting.black.uri:this.gameManager.setting.white.uri)===nn;case V.CSA_GAME:return this.csaGameManager.isMyTurn&&this.csaGameManager.setting.player.uri===nn}return!1}}function $y(){return new Fy().reactive}let ka;function et(){return ka||(ka=$y()),ka}var Qe=(e=>(e.BUSSY="bussy",e.ERROR="error",e.INFO="info",e.GAME="game",e.INTERNET="internet",e.STOP="stop",e.RESIGN="resign",e.RESEARCH="research",e.END="end",e.QUIZ="quiz",e.EDIT="edit",e.CHECK="check",e.SWAP="swap",e.SWAP_H="swap_h",e.SETTINGS="settings",e.ENGINE_SETTINGS="engineSettings",e.FLIP="flip",e.FILE="file",e.OPEN="open",e.SAVE="save",e.SAVE_AS="saveAs",e.PASTE="paste",e.COPY="copy",e.DELETE="delete",e.COMMENT="comment",e.BRAIN="brain",e.PV="pv",e.CHART="chart",e.PERCENT="percent",e.ARROW_DROP="arrowDrop",e.ARROW_UP="arrowUp",e.FIRST="first",e.BACK="back",e.NEXT="next",e.LAST="last",e.QUESTION="question",e.ANALYSIS="analysis",e.DESCRIPTION="description",e.PLAY="play",e.CLOSE="close",e.CALL="call",e.SCORE="score",e.GRID="grid",e))(Qe||{});const Ff={bussy:"icon/hourglass_empty_white_24dp.svg",error:"icon/error_outline_white_24dp.svg",info:"icon/info_white_24dp.svg",game:"icon/sports_esports_white_24dp.svg",internet:"icon/language_FILL0_wght400_GRAD0_opsz48.svg",stop:"icon/block_white_24dp.svg",resign:"icon/flag_white_24dp.svg",research:"icon/science_white_24dp.svg",end:"icon/do_disturb_on_white_24dp.svg",quiz:"icon/quiz_FILL0_wght400_GRAD0_opsz48.svg",edit:"icon/app_registration_white_24dp.svg",check:"icon/check_circle_white_24dp.svg",swap:"icon/swap_vert_white_24dp.svg",swap_h:"icon/swap_horiz_white_24dp.svg",settings:"icon/settings_white_24dp.svg",engineSettings:"icon/settings_input_component_white_24dp.svg",flip:"icon/flip_camera_android_white_24dp.svg",file:"icon/draft_FILL0_wght400_GRAD0_opsz48.svg",open:"icon/file_open_FILL0_wght400_GRAD0_opsz48.svg",save:"icon/save_FILL0_wght400_GRAD0_opsz48.svg",saveAs:"icon/save_as_FILL0_wght400_GRAD0_opsz48.svg",paste:"icon/content_paste_white_24dp.svg",copy:"icon/content_copy_white_24dp.svg",delete:"icon/backspace_white_24dp.svg",comment:"icon/edit_note_white_24dp.svg",brain:"icon/psychology_white_24dp.svg",pv:"icon/manage_search_FILL0_wght400_GRAD0_opsz48.svg",chart:"icon/show_chart_white_24dp.svg",percent:"icon/percent_white_24dp.svg",arrowDrop:"icon/arrow_drop_down_white_24dp.svg",arrowUp:"icon/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg",first:"icon/first_page_white_24dp.svg",back:"icon/chevron_left_white_24dp.svg",next:"icon/chevron_right_white_24dp.svg",last:"icon/last_page_white_24dp.svg",question:"icon/help_white_24dp.svg",analysis:"icon/query_stats_white_24dp.svg",description:"icon/description_white_24dp.svg",play:"icon/play_arrow_FILL1_wght400_GRAD0_opsz48.svg",close:"icon/close_FILL0_wght400_GRAD0_opsz48.svg",call:"icon/record_voice_over_FILL0_wght400_GRAD0_opsz48.svg",score:"icon/scoreboard_FILL0_wght400_GRAD0_opsz48.svg",grid:"icon/grid_on_FILL0_wght400_GRAD0_opsz48.svg"};Object.values(Ff).forEach(e=>{Ui(e)});const Hy=ze({name:"Icon",props:{icon:{type:String,required:!0}},setup(e){return{source:Ff[e.icon]}}}),Uy=["src"];function zy(e,t,n,i,s,o){return M(),N("img",{class:"icon",src:e.source,draggable:"false"},null,8,Uy)}const Tt=Ge(Hy,[["render",zy]]);function Pt(e,t){e.addEventListener("cancel",n=>{n.preventDefault(),n.stopPropagation(),t&&t()}),e.addEventListener("copy",n=>{n.stopPropagation()}),e.addEventListener("paste",n=>{n.stopPropagation()}),e.showModal()}function _o(e){return document.getElementById(e)}const Gy=ze({name:"GameMenu",components:{Icon:Tt},emits:["close"],setup(e,t){const n=et(),i=H(null),s=()=>{t.emit("close")};return nt(()=>{Pt(i.value,s)}),{t:U,dialog:i,IconType:Qe,onClose:s,onLocalGame:()=>{n.showGameDialog(),t.emit("close")},onCSAGame:()=>{n.showCSAGameDialog(),t.emit("close")}}}}),Wy={ref:"dialog",class:"menu"},Vy={class:"groups"},jy={class:"group"},Ky={class:"label"},qy={class:"group"},Yy={class:"label"},Xy={class:"label"};function Jy(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",null,[d("dialog",Wy,[d("div",Vy,[d("div",jy,[d("button",{class:"close",onClick:t[0]||(t[0]=(...a)=>e.onClose&&e.onClose(...a))},[K(r,{icon:e.IconType.CLOSE},null,8,["icon"]),d("div",Ky,I(e.t.back),1)])]),d("div",qy,[d("button",{onClick:t[1]||(t[1]=(...a)=>e.onLocalGame&&e.onLocalGame(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",Yy,I(e.t.offlineGame),1)]),d("button",{onClick:t[2]||(t[2]=(...a)=>e.onCSAGame&&e.onCSAGame(...a))},[K(r,{icon:e.IconType.INTERNET},null,8,["icon"]),d("div",Xy,I(e.t.csaOnlineGame),1)])])])],512)])}const Qy=Ge(Gy,[["render",Jy]]),Zy=ze({name:"FileMenu",components:{Icon:Tt},emits:["close"],setup(e,t){const n=et(),i=H(null),s=()=>{t.emit("close")};nt(()=>{Pt(i.value,s)});const o=()=>{n.resetRecord(),t.emit("close")},r=()=>{n.openRecord(),t.emit("close")},a=()=>{n.saveRecord({overwrite:!0}),t.emit("close")},l=()=>{n.saveRecord(),t.emit("close")},c=()=>{n.showExportBoardImageDialog(),t.emit("close")},u=()=>{n.copyRecordKIF(),t.emit("close")},h=()=>{n.copyRecordCSA(),t.emit("close")},p=()=>{n.copyRecordUSIAll(),t.emit("close")},g=()=>{n.copyBoardSFEN(),t.emit("close")},y=()=>{n.showPasteDialog(),t.emit("close")},b=Ae(()=>({newFile:n.appState===V.NORMAL,open:n.appState===V.NORMAL,save:n.appState===V.NORMAL,saveAs:n.appState===V.NORMAL,exportImage:n.appState===V.NORMAL,paste:n.appState===V.NORMAL}));return{t:U,dialog:i,IconType:Qe,onClose:s,onNewFile:o,onOpen:r,onSave:a,onSaveAs:l,onExportImage:c,onCopyKIF:u,onCopyCSA:h,onCopyUSI:p,onCopySFEN:g,onPaste:y,states:b}}}),e_={ref:"dialog",class:"menu"},t_={class:"groups"},n_={class:"group"},i_={class:"label"},s_={class:"group"},o_=["disabled"],r_={class:"label"},a_=["disabled"],l_={class:"label"},c_=["disabled"],u_={class:"label"},h_=["disabled"],d_={class:"label"},f_=["disabled"],p_={class:"label"},g_={class:"group"},m_={class:"label"},b_={class:"label"},y_={class:"label"},__={class:"label"},v_=["disabled"],S_={class:"label"};function w_(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",null,[d("dialog",e_,[d("div",t_,[d("div",n_,[d("button",{class:"close",onClick:t[0]||(t[0]=(...a)=>e.onClose&&e.onClose(...a))},[K(r,{icon:e.IconType.CLOSE},null,8,["icon"]),d("div",i_,I(e.t.back),1)])]),d("div",s_,[d("button",{disabled:!e.states.newFile,onClick:t[1]||(t[1]=(...a)=>e.onNewFile&&e.onNewFile(...a))},[K(r,{icon:e.IconType.FILE},null,8,["icon"]),d("div",r_,I(e.t.clear),1)],8,o_),d("button",{disabled:!e.states.open,onClick:t[2]||(t[2]=(...a)=>e.onOpen&&e.onOpen(...a))},[K(r,{icon:e.IconType.OPEN},null,8,["icon"]),d("div",l_,I(e.t.open),1)],8,a_),d("button",{disabled:!e.states.save,onClick:t[3]||(t[3]=(...a)=>e.onSave&&e.onSave(...a))},[K(r,{icon:e.IconType.SAVE},null,8,["icon"]),d("div",u_,I(e.t.saveOverwrite),1)],8,c_),d("button",{disabled:!e.states.saveAs,onClick:t[4]||(t[4]=(...a)=>e.onSaveAs&&e.onSaveAs(...a))},[K(r,{icon:e.IconType.SAVE_AS},null,8,["icon"]),d("div",d_,I(e.t.saveAs),1)],8,h_),d("button",{disabled:!e.states.exportImage,onClick:t[5]||(t[5]=(...a)=>e.onExportImage&&e.onExportImage(...a))},[K(r,{icon:e.IconType.GRID},null,8,["icon"]),d("div",p_,I(e.t.positionImage),1)],8,f_)]),d("div",g_,[d("button",{onClick:t[6]||(t[6]=(...a)=>e.onCopyKIF&&e.onCopyKIF(...a))},[K(r,{icon:e.IconType.COPY},null,8,["icon"]),d("div",m_,I(e.t.copyAsKIF),1)]),d("button",{onClick:t[7]||(t[7]=(...a)=>e.onCopyCSA&&e.onCopyCSA(...a))},[K(r,{icon:e.IconType.COPY},null,8,["icon"]),d("div",b_,I(e.t.copyAsCSA),1)]),d("button",{onClick:t[8]||(t[8]=(...a)=>e.onCopyUSI&&e.onCopyUSI(...a))},[K(r,{icon:e.IconType.COPY},null,8,["icon"]),d("div",y_,I(e.t.copyAsUSI),1)]),d("button",{onClick:t[9]||(t[9]=(...a)=>e.onCopySFEN&&e.onCopySFEN(...a))},[K(r,{icon:e.IconType.COPY},null,8,["icon"]),d("div",__,I(e.t.copyAsSFEN),1)]),d("button",{disabled:!e.states.paste,onClick:t[10]||(t[10]=(...a)=>e.onPaste&&e.onPaste(...a))},[K(r,{icon:e.IconType.PASTE},null,8,["icon"]),d("div",S_,I(e.t.paste),1)],8,v_)])])],512)])}const E_=Ge(Zy,[["render",w_]]),I_=ze({name:"InitialPositionMenu",components:{Icon:Tt},emits:["close"],setup(e,t){const n=et(),i=H(null),s=()=>{t.emit("close")};return nt(()=>{Pt(i.value,s)}),{t:U,dialog:i,IconType:Qe,onClose:s,onStandard:()=>{n.initializePosition(we.STANDARD),t.emit("close")},onHandicapLance:()=>{n.initializePosition(we.HANDICAP_LANCE),t.emit("close")},onHandicapRightLance:()=>{n.initializePosition(we.HANDICAP_RIGHT_LANCE),t.emit("close")},onHandicapBishop:()=>{n.initializePosition(we.HANDICAP_BISHOP),t.emit("close")},onHandicapRook:()=>{n.initializePosition(we.HANDICAP_ROOK),t.emit("close")},onHandicapRookLance:()=>{n.initializePosition(we.HANDICAP_ROOK_LANCE),t.emit("close")},onHandicap2Pieces:()=>{n.initializePosition(we.HANDICAP_2PIECES),t.emit("close")},onHandicap4Pieces:()=>{n.initializePosition(we.HANDICAP_4PIECES),t.emit("close")},onHandicap6Pieces:()=>{n.initializePosition(we.HANDICAP_6PIECES),t.emit("close")},onHandicap8Pieces:()=>{n.initializePosition(we.HANDICAP_8PIECES),t.emit("close")},onTsumeShogi:()=>{n.initializePosition(we.TSUME_SHOGI),t.emit("close")},onTsumeShogi2Kings:()=>{n.initializePosition(we.TSUME_SHOGI_2KINGS),t.emit("close")}}}}),k_={ref:"dialog",class:"menu"},P_={class:"groups"},A_={class:"group"},T_={class:"label"},C_={class:"group"},M_={class:"label"},x_={class:"label"},R_={class:"label"},N_={class:"label"},O_={class:"label"},L_={class:"label"},B_={class:"label"},D_={class:"label"},F_={class:"label"},$_={class:"label"},H_={class:"label"},U_={class:"label"};function z_(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",null,[d("dialog",k_,[d("div",P_,[d("div",A_,[d("button",{class:"close",onClick:t[0]||(t[0]=(...a)=>e.onClose&&e.onClose(...a))},[K(r,{icon:e.IconType.CLOSE},null,8,["icon"]),d("div",T_,I(e.t.back),1)])]),d("div",C_,[d("button",{onClick:t[1]||(t[1]=(...a)=>e.onStandard&&e.onStandard(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",M_,I(e.t.nonHandicap),1)]),d("button",{onClick:t[2]||(t[2]=(...a)=>e.onHandicapLance&&e.onHandicapLance(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",x_,I(e.t.lanceHandicap),1)]),d("button",{onClick:t[3]||(t[3]=(...a)=>e.onHandicapRightLance&&e.onHandicapRightLance(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",R_,I(e.t.rightLanceHandicap),1)]),d("button",{onClick:t[4]||(t[4]=(...a)=>e.onHandicapBishop&&e.onHandicapBishop(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",N_,I(e.t.bishopHandicap),1)]),d("button",{onClick:t[5]||(t[5]=(...a)=>e.onHandicapRook&&e.onHandicapRook(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",O_,I(e.t.rookHandicap),1)]),d("button",{onClick:t[6]||(t[6]=(...a)=>e.onHandicapRookLance&&e.onHandicapRookLance(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",L_,I(e.t.rookLanceHandicap),1)]),d("button",{onClick:t[7]||(t[7]=(...a)=>e.onHandicap2Pieces&&e.onHandicap2Pieces(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",B_,I(e.t.twoPiecesHandicap),1)]),d("button",{onClick:t[8]||(t[8]=(...a)=>e.onHandicap4Pieces&&e.onHandicap4Pieces(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",D_,I(e.t.fourPiecesHandicap),1)]),d("button",{onClick:t[9]||(t[9]=(...a)=>e.onHandicap6Pieces&&e.onHandicap6Pieces(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",F_,I(e.t.sixPiecesHandicap),1)]),d("button",{onClick:t[10]||(t[10]=(...a)=>e.onHandicap8Pieces&&e.onHandicap8Pieces(...a))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("div",$_,I(e.t.eightPiecesHandicap),1)]),d("button",{onClick:t[11]||(t[11]=(...a)=>e.onTsumeShogi&&e.onTsumeShogi(...a))},[K(r,{icon:e.IconType.QUIZ},null,8,["icon"]),d("div",H_,I(e.t.tsumeShogi),1)]),d("button",{onClick:t[12]||(t[12]=(...a)=>e.onTsumeShogi2Kings&&e.onTsumeShogi2Kings(...a))},[K(r,{icon:e.IconType.QUIZ},null,8,["icon"]),d("div",U_,I(e.t.doubleKingTsumeShogi),1)])])])],512)])}const G_=Ge(I_,[["render",z_]]);class rl{constructor(t){this.children=[],this.parent=t}delete(t){const n=this.children.indexOf(t);return n===-1?!1:(this.children=this.children.slice(0,n).concat(this.children.slice(n+1)),this.children.length===0&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class Er{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let n=this;for(let i=0;i<t.length;i+=1){const s=t[i];let o=n.get(s);if(i===t.length-1)return o instanceof Er&&(n.delete(o),o=null),o||(o=new rl(n),n.children[s]=o),o;o instanceof rl&&(o=null),o||(o=new Er(n),n.children[s]=o),n=o}return n}delete(t){for(const n in this.children)if(this.children[n]===t){const s=delete this.children[n];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),s}return!1}}function al(e){if(!(e instanceof HTMLElement))return!1;const t=e.nodeName.toLowerCase(),n=(e.getAttribute("type")||"").toLowerCase();return t==="select"||t==="textarea"||t==="input"&&n!=="submit"&&n!=="reset"&&n!=="checkbox"&&n!=="radio"&&n!=="file"||e.isContentEditable}function W_(e,t){const n=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:t}});e.dispatchEvent(n)&&(al(e)?e.focus():e.click())}function V_(e){const t=[];let n=[""],i=!1;for(let s=0;s<e.length;s++){if(i&&e[s]===","){t.push(n),n=[""],i=!1;continue}if(e[s]===" "){n.push(""),i=!1;continue}else e[s]==="+"?i=!1:i=!0;n[n.length-1]+=e[s]}return t.push(n),t.map(s=>s.filter(o=>o!=="")).filter(s=>s.length>0)}function Lu(e){const{ctrlKey:t,altKey:n,metaKey:i,key:s}=e,o=[],r=[t,n,i,j_(e)];for(const[a,l]of r.entries())l&&o.push(Bu[a]);return Bu.includes(s)||o.push(s),o.join("+")}const Bu=["Control","Alt","Meta","Shift"];function j_(e){const{shiftKey:t,code:n,key:i}=e;return t&&!(n.startsWith("Key")&&i.toUpperCase()===i)}const Xs=new Er,$f=new WeakMap;let ll=Xs,Wo=null,cl=[];function Pa(){cl=[],Wo=null,ll=Xs}function Hf(e){if(e.defaultPrevented||!(e.target instanceof Node))return;if(al(e.target)){const n=e.target;if(!n.id||!n.ownerDocument.querySelector(`[data-hotkey-scope="${n.id}"]`))return}Wo!=null&&window.clearTimeout(Wo),Wo=window.setTimeout(Pa,1500);const t=ll.get(Lu(e));if(!t){Pa();return}if(cl.push(Lu(e)),ll=t,t instanceof rl){const n=e.target;let i=!1,s;const o=al(n);for(let r=t.children.length-1;r>=0;r-=1){s=t.children[r];const a=s.getAttribute("data-hotkey-scope");if(!o&&!a||o&&n.id===a){i=!0;break}}s&&i&&(W_(s,cl),e.preventDefault()),Pa()}}function K_(e,t){Object.keys(Xs.children).length===0&&document.addEventListener("keydown",Hf);const i=V_(t||e.getAttribute("data-hotkey")||"").map(s=>Xs.insert(s).add(e));$f.set(e,i)}function q_(e){const t=$f.get(e);if(t&&t.length)for(const n of t)n&&n.delete(e);Object.keys(Xs.children).length===0&&document.removeEventListener("keydown",Hf)}function Ir(e){for(const t of e.querySelectorAll("[data-hotkey]"))K_(t)}function kr(e){for(const t of e.querySelectorAll("[data-hotkey]"))q_(t)}const Qi=[],en=[];function Ss(e){en.length===0&&Ir(e),Qi.push(e)}function ws(e){en.length===0&&kr(e);for(let t=0;t<Qi.length;t++)if(Qi[t]===e){Qi.splice(t,1);break}}function Xt(e){if(en.length===0)for(const t of Qi)kr(t);else kr(en[en.length-1]);Ir(e),en.push(e)}function Jt(e){for(let t=0;t<en.length;t++)if(en[t]===e){en.splice(t,1),t===en.length&&kr(e);break}if(en.length===0)for(const t of Qi)Ir(t);else Ir(en[en.length-1])}const Y_=ze({name:"BoardPane",components:{BoardView:ql,Icon:Tt,GameMenu:Qy,FileMenu:E_,InitialPositionMenu:G_},props:{maxSize:{type:St,required:!0}},emits:["resize"],setup(e,t){const n=et(),i=$e(),s=H(),o=H(),r=H(!1),a=H(!1),l=H(!1);nt(()=>{Ss(s.value),Ss(o.value)}),hs(()=>{Ss(s.value),Ss(o.value)}),Dd(()=>{ws(s.value),ws(o.value)}),Ft(()=>{ws(s.value),ws(o.value)});const c=oe=>{t.emit("resize",oe)},u=oe=>{n.appState===V.GAME||n.appState===V.CSA_GAME?Ji.doMove(oe):n.doMove(oe)},h=oe=>{n.editPosition(oe)},p=()=>{r.value=!0},g=()=>{n.showGameResults()},y=()=>{n.stopGame()},b=()=>{Ji.win()},v=()=>{Ji.resign()},_=()=>{n.showResearchDialog()},E=()=>{n.stopResearch()},w=()=>{n.showAnalysisDialog()},k=()=>{n.stopAnalysis()},A=()=>{n.startPositionEditing()},O=()=>{n.endPositionEditing()},G=()=>{l.value=!0},W=()=>{n.changeTurn()},Z=()=>{n.showAppSettingDialog()},Y=()=>{n.showUsiEngineManagementDialog()},Q=()=>{i.flipBoard()},ye=()=>{a.value=!0},de=()=>{n.removeCurrentMove()},Le=Ae(()=>{const oe=n.record.current.move;return oe instanceof ot?oe:void 0}),Ie=Ae(()=>n.record.metadata.getStandardMetadata(J.BLACK_NAME)||U.sente),Ee=Ae(()=>n.record.metadata.getStandardMetadata(J.WHITE_NAME)||U.gote),ne=Ae(()=>{if(n.appState===V.GAME||n.csaGameState===ni.GAME)return{black:{time:n.blackTime,byoyomi:n.blackByoyomi},white:{time:n.whiteTime,byoyomi:n.whiteByoyomi}}}),re=Ae(()=>({game:n.appState===V.NORMAL,showGameResults:n.appState===V.GAME&&n.gameSetting.repeat>=2,stop:n.appState===V.GAME||n.appState===V.CSA_GAME,win:n.appState===V.CSA_GAME&&n.isMovableByUser,resign:(n.appState===V.GAME||n.appState===V.CSA_GAME)&&n.isMovableByUser,research:n.appState===V.NORMAL,endResearch:n.appState===V.RESEARCH,analysis:n.appState===V.NORMAL,endAnalysis:n.appState===V.ANALYSIS,startEditPosition:n.appState===V.NORMAL,endEditPosition:n.appState===V.POSITION_EDITING,initPosition:n.appState===V.POSITION_EDITING,removeCurrentMove:n.appState===V.NORMAL||n.appState===V.RESEARCH,engineSettings:n.appState===V.NORMAL}));return{t:U,store:n,rightControl:s,leftControl:o,isGameMenuVisible:r,isFileMenuVisible:a,isInitialPositionMenuVisible:l,appSetting:i,lastMove:Le,blackPlayerName:Ie,whitePlayerName:Ee,clock:ne,controlStates:re,onResize:c,onMove:u,onEdit:h,onGame:p,onShowGameResults:g,onStop:y,onWin:b,onResign:v,onResearch:_,onEndResearch:E,onAnalysis:w,onEndAnalysis:k,onStartEditPosition:A,onEndEditPosition:O,onInitPosition:G,onChangeTurn:W,onOpenAppSettings:Z,onOpenEngineSettings:Y,onFlip:Q,onFileAction:ye,onRemoveCurrentMove:de,IconType:Qe,AppState:V,RightSideControlType:Ns,LeftSideControlType:Rs}}});const X_=["disabled"],J_=["disabled"];function Q_(e,t,n,i,s,o){var h,p,g,y;const r=ge("Icon"),a=ge("BoardView"),l=ge("GameMenu"),c=ge("FileMenu"),u=ge("InitialPositionMenu");return M(),N("div",null,[K(a,{"piece-image-type":e.appSetting.pieceImage,"board-image-type":e.appSetting.boardImage,"piece-stand-image-type":e.appSetting.pieceStandImage,"board-label-type":e.appSetting.boardLabelType,"custom-board-image-url":e.appSetting.boardImageFileURL,"custom-piece-stand-image-url":e.appSetting.pieceStandImageFileURL,"max-size":e.maxSize,position:e.store.record.position,"last-move":e.lastMove,flip:e.appSetting.boardFlipping,"allow-move":e.store.isMovableByUser,"allow-edit":e.store.appState===e.AppState.POSITION_EDITING,"black-player-name":e.blackPlayerName,"white-player-name":e.whitePlayerName,"black-player-time":(h=e.clock)==null?void 0:h.black.time,"black-player-byoyomi":(p=e.clock)==null?void 0:p.black.byoyomi,"white-player-time":(g=e.clock)==null?void 0:g.white.time,"white-player-byoyomi":(y=e.clock)==null?void 0:y.white.byoyomi,"next-move-label":e.t.nextTurn,onResize:e.onResize,onMove:e.onMove,onEdit:e.onEdit},{"right-control":wn(()=>[d("div",{ref:"rightControl",class:Ze(["full column top-control",{hidden:e.appSetting.rightSideControlType===e.RightSideControlType.NONE}])},[e.controlStates.game?(M(),N("button",{key:0,class:"control-item",onClick:t[0]||(t[0]=(...b)=>e.onGame&&e.onGame(...b))},[K(r,{icon:e.IconType.GAME},null,8,["icon"]),d("span",null,I(e.t.game),1)])):ie("",!0),e.controlStates.showGameResults?(M(),N("button",{key:1,class:"control-item",onClick:t[1]||(t[1]=(...b)=>e.onShowGameResults&&e.onShowGameResults(...b))},[K(r,{icon:e.IconType.SCORE},null,8,["icon"]),d("span",null,I(e.t.displayGameResults),1)])):ie("",!0),e.controlStates.stop?(M(),N("button",{key:2,class:"control-item","data-hotkey":"Escape",onClick:t[2]||(t[2]=(...b)=>e.onStop&&e.onStop(...b))},[K(r,{icon:e.IconType.STOP},null,8,["icon"]),d("span",null,I(e.t.stopGame),1)])):ie("",!0),e.controlStates.win?(M(),N("button",{key:3,class:"control-item",onClick:t[3]||(t[3]=(...b)=>e.onWin&&e.onWin(...b))},[K(r,{icon:e.IconType.CALL},null,8,["icon"]),d("span",null,I(e.t.declareWinning),1)])):ie("",!0),e.controlStates.resign?(M(),N("button",{key:4,class:"control-item",onClick:t[4]||(t[4]=(...b)=>e.onResign&&e.onResign(...b))},[K(r,{icon:e.IconType.RESIGN},null,8,["icon"]),d("span",null,I(e.t.resign),1)])):ie("",!0),e.controlStates.research?(M(),N("button",{key:5,class:"control-item","data-hotkey":"Control+r",onClick:t[5]||(t[5]=(...b)=>e.onResearch&&e.onResearch(...b))},[K(r,{icon:e.IconType.RESEARCH},null,8,["icon"]),d("span",null,I(e.t.research),1)])):ie("",!0),e.controlStates.endResearch?(M(),N("button",{key:6,class:"control-item","data-hotkey":"Escape",onClick:t[6]||(t[6]=(...b)=>e.onEndResearch&&e.onEndResearch(...b))},[K(r,{icon:e.IconType.END},null,8,["icon"]),d("span",null,I(e.t.endResearch),1)])):ie("",!0),e.controlStates.analysis?(M(),N("button",{key:7,class:"control-item","data-hotkey":"Control+a",onClick:t[7]||(t[7]=(...b)=>e.onAnalysis&&e.onAnalysis(...b))},[K(r,{icon:e.IconType.ANALYSIS},null,8,["icon"]),d("span",null,I(e.t.analysis),1)])):ie("",!0),e.controlStates.endAnalysis?(M(),N("button",{key:8,class:"control-item","data-hotkey":"Escape",onClick:t[8]||(t[8]=(...b)=>e.onEndAnalysis&&e.onEndAnalysis(...b))},[K(r,{icon:e.IconType.STOP},null,8,["icon"]),d("span",null,I(e.t.stopAnalysis),1)])):ie("",!0),e.controlStates.startEditPosition?(M(),N("button",{key:9,class:"control-item",onClick:t[9]||(t[9]=(...b)=>e.onStartEditPosition&&e.onStartEditPosition(...b))},[K(r,{icon:e.IconType.EDIT},null,8,["icon"]),d("span",null,I(e.t.setupPosition),1)])):ie("",!0),e.controlStates.endEditPosition?(M(),N("button",{key:10,class:"control-item",onClick:t[10]||(t[10]=(...b)=>e.onEndEditPosition&&e.onEndEditPosition(...b))},[K(r,{icon:e.IconType.CHECK},null,8,["icon"]),d("span",null,I(e.t.completePositionSetup),1)])):ie("",!0),e.controlStates.initPosition?(M(),N("button",{key:11,class:"control-item",onClick:t[11]||(t[11]=(...b)=>e.onChangeTurn&&e.onChangeTurn(...b))},[K(r,{icon:e.IconType.SWAP},null,8,["icon"]),d("span",null,I(e.t.changeTurn),1)])):ie("",!0),e.controlStates.initPosition?(M(),N("button",{key:12,class:"control-item",onClick:t[12]||(t[12]=(...b)=>e.onInitPosition&&e.onInitPosition(...b))},[d("span",null,I(e.t.initializePosition),1)])):ie("",!0)],2)]),"left-control":wn(()=>[d("div",{ref:"leftControl",class:Ze(["full column reverse bottom-control",{hidden:e.appSetting.leftSideControlType===e.LeftSideControlType.NONE}])},[d("button",{class:"control-item","data-hotkey":"Control+,",onClick:t[13]||(t[13]=(...b)=>e.onOpenAppSettings&&e.onOpenAppSettings(...b))},[K(r,{icon:e.IconType.SETTINGS},null,8,["icon"]),d("span",null,I(e.t.appSettings),1)]),d("button",{class:"control-item","data-hotkey":"Control+.",disabled:!e.controlStates.engineSettings,onClick:t[14]||(t[14]=(...b)=>e.onOpenEngineSettings&&e.onOpenEngineSettings(...b))},[K(r,{icon:e.IconType.ENGINE_SETTINGS},null,8,["icon"]),d("span",null,I(e.t.engineSettings),1)],8,X_),d("button",{class:"control-item","data-hotkey":"Control+t",onClick:t[15]||(t[15]=(...b)=>e.onFlip&&e.onFlip(...b))},[K(r,{icon:e.IconType.FLIP},null,8,["icon"]),d("span",null,I(e.t.flipBoard),1)]),d("button",{class:"control-item",onClick:t[16]||(t[16]=(...b)=>e.onFileAction&&e.onFileAction(...b))},[K(r,{icon:e.IconType.FILE},null,8,["icon"]),d("span",null,I(e.t.file),1)]),d("button",{class:"control-item","data-hotkey":"Control+d",disabled:!e.controlStates.removeCurrentMove,onClick:t[17]||(t[17]=(...b)=>e.onRemoveCurrentMove&&e.onRemoveCurrentMove(...b))},[K(r,{icon:e.IconType.DELETE},null,8,["icon"]),d("span",null,I(e.t.deleteMove),1)],8,J_)],2)]),_:1},8,["piece-image-type","board-image-type","piece-stand-image-type","board-label-type","custom-board-image-url","custom-piece-stand-image-url","max-size","position","last-move","flip","allow-move","allow-edit","black-player-name","white-player-name","black-player-time","black-player-byoyomi","white-player-time","white-player-byoyomi","next-move-label","onResize","onMove","onEdit"]),e.isGameMenuVisible?(M(),He(l,{key:0,onClose:t[18]||(t[18]=b=>e.isGameMenuVisible=!1)})):ie("",!0),e.isFileMenuVisible?(M(),He(c,{key:1,onClose:t[19]||(t[19]=b=>e.isFileMenuVisible=!1)})):ie("",!0),e.isInitialPositionMenuVisible?(M(),He(u,{key:2,onClose:t[20]||(t[20]=b=>e.isInitialPositionMenuVisible=!1)})):ie("",!0)])}const Z_=Ge(Y_,[["render",Q_],["__scopeId","data-v-f1493a52"]]),ev=ze({name:"RecordView",components:{Icon:Tt},props:{record:{type:Object,required:!0},operational:{type:Boolean,required:!1},showElapsedTime:{type:Boolean,required:!1},showComment:{type:Boolean,required:!1}},emits:["goBegin","goBack","goForward","goEnd","selectMove","selectBranch","swapWithPreviousBranch","swapWithNextBranch"],setup(e,t){const n=H(null),i=H(null),s=()=>{e.operational&&t.emit("goBegin")},o=()=>{e.operational&&t.emit("goBack")},r=()=>{e.operational&&t.emit("goForward")},a=()=>{e.operational&&t.emit("goEnd")},l=y=>{e.operational&&t.emit("selectMove",Number(y))},c=y=>{e.operational&&t.emit("selectBranch",Number(y))},u=()=>{e.operational&&t.emit("swapWithPreviousBranch")},h=()=>{e.operational&&t.emit("swapWithNextBranch")},p=Ae(()=>{const y=[];return e.record.moves.forEach(b=>{y.push({number:b.number,text:b.displayText,time:b.number!=0?b.timeText:"",hasBranch:b.hasBranch,comment:b.comment,selected:b===e.record.current})}),y}),g=Ae(()=>{if(!e.record.branchBegin.branch)return null;const y=[];let b;for(b=e.record.branchBegin;b&&b.move;b=b.branch)y.push({index:y.length,text:b.displayText,comment:b.comment,selected:b.activeBranch});return y});return hs(()=>{n.value.childNodes.forEach(v=>{v instanceof HTMLElement&&v.classList.contains("selected")&&v.scrollIntoView({behavior:"auto",block:"nearest"})}),i.value.childNodes.forEach(v=>{v instanceof HTMLElement&&v.classList.contains("selected")&&v.scrollIntoView({behavior:"auto",block:"nearest"})})}),{moves:p,branches:g,moveList:n,branchList:i,goBegin:s,goBack:o,goForward:r,goEnd:a,changeNumber:l,changeBranch:c,swapWithPreviousBranch:u,swapWithNextBranch:h,IconType:Qe}}});const tv={class:"full column record-view"},nv={class:"row control"},iv=["disabled"],sv=["disabled"],ov=["disabled"],rv=["disabled"],av={ref:"moveList",class:"move-list"},lv=["value","onClick"],cv={class:"move-number"},uv={class:"move-text"},hv={key:0,class:"move-time"},dv={key:1,class:"move-comment"},fv={class:"row branch-list-area"},pv={ref:"branchList",class:"branch-list"},gv=["value","onClick"],mv={class:"move-text"},bv={key:0,class:"move-comment"},yv={class:"column branch-list-control"},_v=["disabled"],vv=["disabled"];function Sv(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",tv,[d("div",nv,[d("button",{disabled:!e.operational,"data-hotkey":"ArrowLeft",onClick:t[0]||(t[0]=a=>e.goBegin())},[K(r,{icon:e.IconType.FIRST},null,8,["icon"])],8,iv),d("button",{disabled:!e.operational,"data-hotkey":"ArrowUp",onClick:t[1]||(t[1]=a=>e.goBack())},[K(r,{icon:e.IconType.BACK},null,8,["icon"])],8,sv),d("button",{disabled:!e.operational,"data-hotkey":"ArrowDown",onClick:t[2]||(t[2]=a=>e.goForward())},[K(r,{icon:e.IconType.NEXT},null,8,["icon"])],8,ov),d("button",{disabled:!e.operational,"data-hotkey":"ArrowRight",onClick:t[3]||(t[3]=a=>e.goEnd())},[K(r,{icon:e.IconType.LAST},null,8,["icon"])],8,rv)]),d("div",av,[(M(!0),N(ke,null,Ue(e.moves,a=>(M(),N("div",{key:a.number,class:Ze(["row move-element",{"has-branch":a.hasBranch,selected:a.selected}]),value:a.number,onClick:l=>e.changeNumber(a.number)},[d("div",cv,I(a.number!==0?a.number:""),1),d("div",uv,I(a.text),1),e.showElapsedTime?(M(),N("div",hv,I(a.time),1)):ie("",!0),e.showComment?(M(),N("div",dv,I(a.comment),1)):ie("",!0)],10,lv))),128))],512),d("div",fv,[d("div",pv,[(M(!0),N(ke,null,Ue(e.branches,a=>(M(),N("div",{key:a.index,class:Ze(["row move-element",{selected:a.selected}]),value:a.index,onClick:l=>e.changeBranch(a.index)},[d("div",mv,I(a.text),1),e.showComment?(M(),N("div",bv,I(a.comment),1)):ie("",!0)],10,gv))),128))],512),d("div",yv,[d("button",{disabled:!e.operational,onClick:t[4]||(t[4]=a=>e.swapWithPreviousBranch())},[K(r,{icon:e.IconType.ARROW_UP},null,8,["icon"])],8,_v),d("button",{disabled:!e.operational,onClick:t[5]||(t[5]=a=>e.swapWithNextBranch())},[K(r,{icon:e.IconType.ARROW_DROP},null,8,["icon"])],8,vv)])])])}const wv=Ge(ev,[["render",Sv],["__scopeId","data-v-0aa9e075"]]),Ev=200,Iv=ze({name:"RecordPane",components:{RecordView:wv},setup(){const e=et(),t=$e(),n=H();nt(()=>{Ss(n.value)}),oo(()=>{ws(n.value)});const i=b=>{e.changePly(b)},s=()=>{i(0)},o=()=>{i(e.record.current.number-1)},r=()=>{i(e.record.current.number+1)},a=()=>{i(Number.MAX_SAFE_INTEGER)},l=b=>{i(b)},c=b=>{e.changeBranch(b)},u=()=>{e.swapWithPreviousBranch()},h=()=>{e.swapWithNextBranch()},p=b=>{const v=b.target;t.updateAppSetting({showElapsedTimeInRecordView:v.checked})},g=b=>{const v=b.target;t.updateAppSetting({showCommentInRecordView:v.checked})},y=Ae(()=>e.appState===V.NORMAL||e.appState===V.RESEARCH);return{t:U,store:e,appSetting:t,root:n,isRecordOperational:y,goBegin:s,goBack:o,goForward:r,goEnd:a,selectMove:l,selectBranch:c,swapWithPreviousBranch:u,swapWithNextBranch:h,onToggleElapsedTime:p,onToggleComment:g}}});const kv={ref:"root",class:"full column record-pane"},Pv={class:"record"},Av={class:"row options"},Tv={class:"option"},Cv=["checked"],Mv={for:"show-elapsed-time"},xv={class:"option"},Rv=["checked"],Nv={for:"show-comment"};function Ov(e,t,n,i,s,o){const r=ge("RecordView");return M(),N("div",kv,[d("div",Pv,[K(r,{record:e.store.record,operational:e.isRecordOperational,"show-comment":e.appSetting.showCommentInRecordView,"show-elapsed-time":e.appSetting.showElapsedTimeInRecordView,onGoBegin:e.goBegin,onGoBack:e.goBack,onGoForward:e.goForward,onGoEnd:e.goEnd,onSelectMove:e.selectMove,onSelectBranch:e.selectBranch,onSwapWithPreviousBranch:e.swapWithPreviousBranch,onSwapWithNextBranch:e.swapWithNextBranch},null,8,["record","operational","show-comment","show-elapsed-time","onGoBegin","onGoBack","onGoForward","onGoEnd","onSelectMove","onSelectBranch","onSwapWithPreviousBranch","onSwapWithNextBranch"])]),d("div",Av,[d("div",Tv,[d("input",{id:"show-elapsed-time",type:"checkbox",checked:e.appSetting.showElapsedTimeInRecordView,onChange:t[0]||(t[0]=(...a)=>e.onToggleElapsedTime&&e.onToggleElapsedTime(...a))},null,40,Cv),d("label",Mv,I(e.t.elapsedTime),1)]),d("div",xv,[d("input",{id:"show-comment",type:"checkbox",checked:e.appSetting.showCommentInRecordView,onChange:t[1]||(t[1]=(...a)=>e.onToggleComment&&e.onToggleComment(...a))},null,40,Rv),d("label",Nv,I(e.t.comments),1)])])],512)}const Lv=Ge(Iv,[["render",Ov],["__scopeId","data-v-f622670b"]]),Bv=ze({name:"PVPreviewDialog",components:{BoardView:ql,Icon:Tt},props:{position:{type:String,required:!0},pv:{type:Array,required:!0},infos:{type:Array,default:[],required:!1}},emits:["close"],setup(e,t){const n=$e(),i=H(null),s=yn(new St(0,0)),o=yn(new Ct),r=H(n.boardFlipping),a=()=>{s.width=window.innerWidth*.8,s.height=window.innerHeight*.8-80},l=()=>{const _=Ot.newBySFEN(e.position);if(_){o.clear(_);for(const E of e.pv){const w=o.position.createMoveByUSI(E);if(!w)break;o.append(w,{ignoreValidation:!0})}o.goto(1)}};nt(async()=>{a(),l(),window.addEventListener("resize",a),Pt(i.value),Xt(i.value)}),Ft(()=>{window.removeEventListener("resize",a),Jt(i.value)}),ti([()=>e.position,()=>e.pv],()=>{l(),Pt(i.value)});const c=()=>{t.emit("close")},u=()=>{o.goto(0)},h=()=>{o.goto(Number.MAX_SAFE_INTEGER)},p=()=>{o.goBack()},g=()=>{o.goForward()},y=()=>{r.value=!r.value},b=Ae(()=>o.current.move instanceof ot?o.current.move:null),v=Ae(()=>o.moves.slice(1).map(_=>({text:_.displayText,selected:_.number===o.current.number})));return{dialog:i,appSetting:n,record:o,lastMove:b,maxSize:s,flip:r,displayPV:v,close:c,goBegin:u,goEnd:h,goBack:p,goForward:g,doFlip:y,IconType:Qe}}});const Dv={ref:"dialog"},Fv={class:"full column"},$v={class:"row control-row"},Hv={class:"row control-row"},Uv={class:"row control-row"},zv={class:"informations"},Gv={class:"information"};function Wv(e,t,n,i,s,o){const r=ge("Icon"),a=ge("BoardView");return M(),N("div",null,[d("dialog",Dv,[K(a,{class:"board","piece-image-type":e.appSetting.pieceImage,"board-image-type":e.appSetting.boardImage,"piece-stand-image-type":e.appSetting.pieceStandImage,"board-label-type":e.appSetting.boardLabelType,"custom-board-image-url":e.appSetting.boardImageFileURL,"custom-piece-stand-image-url":e.appSetting.pieceStandImageFileURL,"max-size":e.maxSize,position:e.record.position,"last-move":e.lastMove,flip:e.flip},{"right-control":wn(()=>[d("div",Fv,[d("div",$v,[d("button",{class:"control-item","data-hotkey":"Control+t",onClick:t[0]||(t[0]=(...l)=>e.doFlip&&e.doFlip(...l))},[K(r,{icon:e.IconType.FLIP},null,8,["icon"])]),d("button",{class:"control-item",autofocus:"","data-hotkey":"Escape",onClick:t[1]||(t[1]=(...l)=>e.close&&e.close(...l))},[K(r,{icon:e.IconType.CLOSE},null,8,["icon"])])]),d("div",Hv,[d("button",{class:"control-item","data-hotkey":"ArrowLeft",onClick:t[2]||(t[2]=(...l)=>e.goBegin&&e.goBegin(...l))},[K(r,{icon:e.IconType.FIRST},null,8,["icon"])]),d("button",{class:"control-item","data-hotkey":"ArrowRight",onClick:t[3]||(t[3]=(...l)=>e.goEnd&&e.goEnd(...l))},[K(r,{icon:e.IconType.LAST},null,8,["icon"])])]),d("div",Uv,[d("button",{class:"control-item","data-hotkey":"ArrowUp",onClick:t[4]||(t[4]=(...l)=>e.goBack&&e.goBack(...l))},[K(r,{icon:e.IconType.BACK},null,8,["icon"])]),d("button",{class:"control-item","data-hotkey":"ArrowDown",onClick:t[5]||(t[5]=(...l)=>e.goForward&&e.goForward(...l))},[K(r,{icon:e.IconType.NEXT},null,8,["icon"])])])])]),_:1},8,["piece-image-type","board-image-type","piece-stand-image-type","board-label-type","custom-board-image-url","custom-piece-stand-image-url","max-size","position","last-move","flip"]),d("div",zv,[(M(!0),N(ke,null,Ue(e.infos,(l,c)=>(M(),N("div",{key:c,class:"information"},I(l),1))),128)),d("div",Gv,[(M(!0),N(ke,null,Ue(e.displayPV,(l,c)=>(M(),N("span",{key:c},[d("span",{class:Ze(["move-element",{selected:l.selected}])},""+I(l.text)+"",3)]))),128))])])],512)])}const Uf=Ge(Bv,[["render",Wv],["__scopeId","data-v-3b519192"]]),Vv=ze({name:"RecordComment",components:{Icon:Tt,PVPreviewDialog:Uf},setup(){const e=et(),t=Ae(()=>e.appState!=V.NORMAL&&e.appState!=V.RESEARCH),n=H(null),i=Ae(()=>e.record.current.comment),s=Ae(()=>e.inCommentPVs),o=H(null),r=c=>{const u=c.target.value;e.updateRecordComment(u)},a=c=>{o.value={position:e.record.position.sfen,pv:c.map(u=>u.usi)}},l=()=>{o.value=null};return nt(()=>{n.value.addEventListener("copy",c=>{c.stopPropagation()}),n.value.addEventListener("paste",c=>{c.stopPropagation()})}),{t:U,IconType:Qe,comment:i,pvs:s,textarea:n,readonly:t,preview:o,change:r,play:a,closePreview:l}}});const jv={class:"full column"},Kv=["value","readonly"],qv={key:0,class:"row play-buttons"},Yv=["onClick"];function Xv(e,t,n,i,s,o){const r=ge("Icon"),a=ge("PVPreviewDialog");return M(),N("div",null,[d("div",jv,[d("textarea",{ref:"textarea",class:"text",value:e.comment,readonly:e.readonly,onInput:t[0]||(t[0]=(...l)=>e.change&&e.change(...l))},null,40,Kv),e.pvs.length!==0?(M(),N("div",qv,[(M(!0),N(ke,null,Ue(e.pvs,(l,c)=>(M(),N("button",{key:c,class:"play",onClick:u=>e.play(l)},[K(r,{icon:e.IconType.PLAY},null,8,["icon"]),d("span",null,I(e.t.pv)+I(e.pvs.length>=2?" "+(c+1):""),1)],8,Yv))),128))])):ie("",!0)]),e.preview?(M(),He(a,{key:0,position:e.preview.position,pv:e.preview.pv,onClose:e.closePreview},null,8,["position","pv","onClose"])):ie("",!0)])}const Jv=Ge(Vv,[["render",Xv],["__scopeId","data-v-12eb4da3"]]),Qv=ze({name:"EngineAnalyticsElement",components:{Icon:Tt,PVPreviewDialog:Uf},props:{historyMode:{type:Boolean,required:!0},name:{type:String,required:!0},info:{type:Of,required:!0},height:{type:Number,required:!0}},setup:e=>{const t=Ae(()=>{if(!e.historyMode)return!1;for(const a of e.info.iterates)if(a.multiPV&&a.multiPV!==1)return!0;return!1}),n=H(null),i=Ae(()=>$e().evaluationViewFrom),s=(a,l,c)=>c===Kl.EACH||l==D.BLACK?a:-a;return{t:U,IconType:Qe,enableHighlight:t,preview:n,evaluationViewFrom:i,getDisplayScore:s,showPreview:a=>{const l=[];a.depth!==void 0&&l.push(`=${a.depth}`),a.selectiveDepth!==void 0&&l.push(`=${a.selectiveDepth}`),a.score&&(l.push(`=${s(a.score,a.color,i.value)}`),a.lowerBound&&l.push(""),a.upperBound&&l.push("")),a.scoreMate&&l.push(`=${s(a.scoreMate,a.color,i.value)}`),a.multiPV&&l.push(`=${a.multiPV}`),n.value={position:a.position,pv:a.pv||[],infos:[l.join(" / ")]}},closePreview:()=>{n.value=null}}}});const Zv=e=>(cs("data-v-b92e186f"),e=e(),us(),e),eS={class:"full column root"},tS={class:"row headers"},nS={class:"header"},iS={class:"label"},sS={class:"value"},oS={class:"header"},rS={class:"label"},aS={class:"value"},lS={class:"header"},cS={class:"label"},uS={class:"value"},hS={class:"header"},dS=Zv(()=>d("span",{class:"label"},"NPS: ",-1)),fS={class:"value"},pS={class:"header"},gS={class:"label"},mS={class:"value"},bS={class:"header"},yS={class:"label"},_S={class:"value"},vS={class:"row list-header"},SS={class:"list-column time"},wS={class:"list-column multipv-index"},ES={class:"list-column depth"},IS={class:"list-column nodes"},kS={class:"list-column score"},PS={class:"list-column time"},AS={class:"list-column multipv-index"},TS={class:"list-column depth"},CS={class:"list-column nodes"},MS={class:"list-column score"},xS={class:"list-column score-flag"},RS={class:"list-column text"},NS=["onClick"];function OS(e,t,n,i,s,o){const r=ge("Icon"),a=ge("PVPreviewDialog");return M(),N("div",null,[d("div",eS,[d("div",tS,[d("div",nS,[d("span",iS,I(e.t.name)+": ",1),d("span",sS,I(e.name),1)]),d("div",oS,[d("span",rS,I(e.t.prediction)+": ",1),d("span",aS,I(e.info.ponderMove?e.info.ponderMove:"---"),1)]),d("div",lS,[d("span",cS,I(e.t.best)+": ",1),d("span",uS,I(e.info.currentMoveText||"---"),1)]),d("div",hS,[dS,d("span",fS,I(e.info.nps||"---"),1)]),d("div",pS,[d("span",gS,I(e.t.nodes)+": ",1),d("span",mS,I(e.info.nodes||"---"),1)]),d("div",bS,[d("span",yS,I(e.t.hashUsage)+": ",1),d("span",_S,I(e.info.hashfull?(e.info.hashfull*100).toFixed(1):"---")+" % ",1)])]),d("div",vS,[d("div",SS,I(e.t.elapsed),1),d("div",wS,I(e.t.rank),1),d("div",ES,I(e.t.depth),1),d("div",IS,I(e.t.nodes),1),d("div",kS,I(e.t.eval),1)]),d("div",{class:"list",style:_e({height:`${e.height-37}px`})},[(M(!0),N(ke,null,Ue(e.historyMode?e.info.iterates:e.info.latestIteration,(l,c)=>(M(),N("div",{key:c,class:Ze(["row list-item",{highlight:e.enableHighlight&&l.multiPV===1}])},[d("div",PS,I(l.timeMs?(l.timeMs/1e3).toFixed(1)+"s":""),1),d("div",AS,I(l.multiPV||""),1),d("div",TS,I(l.depth)+I(l.selectiveDepth&&l.depth?"/":"")+I(l.selectiveDepth),1),d("div",CS,I(l.nodes),1),d("div",MS,I(l.scoreMate?e.getDisplayScore(l.scoreMate,l.color,e.evaluationViewFrom):l.score?e.getDisplayScore(l.score,l.color,e.evaluationViewFrom):""),1),d("div",xS,I(l.lowerBound?"++":"")+" "+I(l.upperBound?"--":"")+" "+I(l.scoreMate?e.t.mateShort:""),1),d("div",RS,[l.pv&&l.pv.length!==0&&l.text?(M(),N("button",{key:0,onClick:u=>e.showPreview(l)},[K(r,{icon:e.IconType.PLAY},null,8,["icon"]),d("span",null,I(e.t.displayPVShort),1)],8,NS)):ie("",!0),ro(" "+I(l.text),1)])],2))),128))],4),e.preview?(M(),He(a,{key:0,position:e.preview.position,pv:e.preview.pv,infos:e.preview.infos,onClose:e.closePreview},null,8,["position","pv","infos","onClose"])):ie("",!0)])])}const LS=Ge(Qv,[["render",OS],["__scopeId","data-v-b92e186f"]]),BS=ze({name:"EngineAnalytics",components:{EngineAnalyticsElement:LS},props:{size:{type:St,required:!0},historyMode:{type:Boolean,required:!0}},setup(e){const t=et(),n=Ae(()=>{const i=t.usiMonitors.length;return i!==0?e.size.height/i:0});return{store:t,elementHeight:n}}}),DS={class:"full column"};function FS(e,t,n,i,s,o){const r=ge("EngineAnalyticsElement");return M(),N("div",null,[d("div",DS,[(M(!0),N(ke,null,Ue(e.store.usiMonitors,a=>(M(),He(r,{key:a.sessionID,"history-mode":e.historyMode,name:a.name,info:a,height:e.elementHeight},null,8,["history-mode","name","info","height"]))),128))])])}const $S=Ge(BS,[["render",FS]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function ao(e){return e+.5|0}const Yn=(e,t,n)=>Math.max(Math.min(e,n),t);function Es(e){return Yn(ao(e*2.55),0,255)}function ii(e){return Yn(ao(e*255),0,255)}function Bn(e){return Yn(ao(e/2.55)/100,0,1)}function Du(e){return Yn(ao(e*100),0,100)}const on={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ul=[..."0123456789ABCDEF"],HS=e=>ul[e&15],US=e=>ul[(e&240)>>4]+ul[e&15],vo=e=>(e&240)>>4===(e&15),zS=e=>vo(e.r)&&vo(e.g)&&vo(e.b)&&vo(e.a);function GS(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&on[e[1]]*17,g:255&on[e[2]]*17,b:255&on[e[3]]*17,a:t===5?on[e[4]]*17:255}:(t===7||t===9)&&(n={r:on[e[1]]<<4|on[e[2]],g:on[e[3]]<<4|on[e[4]],b:on[e[5]]<<4|on[e[6]],a:t===9?on[e[7]]<<4|on[e[8]]:255})),n}const WS=(e,t)=>e<255?t(e):"";function VS(e){var t=zS(e)?HS:US;return e?"#"+t(e.r)+t(e.g)+t(e.b)+WS(e.a,t):void 0}const jS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function zf(e,t,n){const i=t*Math.min(n,1-n),s=(o,r=(o+e/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function KS(e,t,n){const i=(s,o=(s+e/60)%6)=>n-n*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function qS(e,t,n){const i=zf(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function YS(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}function ic(e){const n=e.r/255,i=e.g/255,s=e.b/255,o=Math.max(n,i,s),r=Math.min(n,i,s),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=YS(n,i,s,u,o),l=l*60+.5),[l|0,c||0,a]}function sc(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(ii)}function oc(e,t,n){return sc(zf,e,t,n)}function XS(e,t,n){return sc(qS,e,t,n)}function JS(e,t,n){return sc(KS,e,t,n)}function Gf(e){return(e%360+360)%360}function QS(e){const t=jS.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Es(+t[5]):ii(+t[5]));const s=Gf(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?i=XS(s,o,r):t[1]==="hsv"?i=JS(s,o,r):i=oc(s,o,r),{r:i[0],g:i[1],b:i[2],a:n}}function ZS(e,t){var n=ic(e);n[0]=Gf(n[0]+t),n=oc(n),e.r=n[0],e.g=n[1],e.b=n[2]}function ew(e){if(!e)return;const t=ic(e),n=t[0],i=Du(t[1]),s=Du(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${Bn(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Fu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$u={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tw(){const e={},t=Object.keys($u),n=Object.keys(Fu);let i,s,o,r,a;for(i=0;i<t.length;i++){for(r=a=t[i],s=0;s<n.length;s++)o=n[s],a=a.replace(o,Fu[o]);o=parseInt($u[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}let So;function nw(e){So||(So=tw(),So.transparent=[0,0,0,0]);const t=So[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const iw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function sw(e){const t=iw.exec(e);let n=255,i,s,o;if(t){if(t[7]!==i){const r=+t[7];n=t[8]?Es(r):Yn(r*255,0,255)}return i=+t[1],s=+t[3],o=+t[5],i=255&(t[2]?Es(i):Yn(i,0,255)),s=255&(t[4]?Es(s):Yn(s,0,255)),o=255&(t[6]?Es(o):Yn(o,0,255)),{r:i,g:s,b:o,a:n}}}function ow(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Bn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Aa=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Fi=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function rw(e,t,n){const i=Fi(Bn(e.r)),s=Fi(Bn(e.g)),o=Fi(Bn(e.b));return{r:ii(Aa(i+n*(Fi(Bn(t.r))-i))),g:ii(Aa(s+n*(Fi(Bn(t.g))-s))),b:ii(Aa(o+n*(Fi(Bn(t.b))-o))),a:e.a+n*(t.a-e.a)}}function wo(e,t,n){if(e){let i=ic(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=oc(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Wf(e,t){return e&&Object.assign(t||{},e)}function Hu(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ii(e[3]))):(t=Wf(e,{r:0,g:0,b:0,a:1}),t.a=ii(t.a)),t}function aw(e){return e.charAt(0)==="r"?sw(e):QS(e)}class Js{constructor(t){if(t instanceof Js)return t;const n=typeof t;let i;n==="object"?i=Hu(t):n==="string"&&(i=GS(t)||nw(t)||aw(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Wf(this._rgb);return t&&(t.a=Bn(t.a)),t}set rgb(t){this._rgb=Hu(t)}rgbString(){return this._valid?ow(this._rgb):void 0}hexString(){return this._valid?VS(this._rgb):void 0}hslString(){return this._valid?ew(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,s=t.rgb;let o;const r=n===o?.5:n,a=2*r-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,i.r=255&c*i.r+o*s.r+.5,i.g=255&c*i.g+o*s.g+.5,i.b=255&c*i.b+o*s.b+.5,i.a=r*i.a+(1-r)*s.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=rw(this._rgb,t._rgb,n)),this}clone(){return new Js(this.rgb)}alpha(t){return this._rgb.a=ii(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=ao(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return wo(this._rgb,2,t),this}darken(t){return wo(this._rgb,2,-t),this}saturate(t){return wo(this._rgb,1,t),this}desaturate(t){return wo(this._rgb,1,-t),this}rotate(t){return ZS(this._rgb,t),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function xn(){}const lw=(()=>{let e=0;return()=>e++})();function je(e){return e===null||typeof e>"u"}function rt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function De(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function dt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Qt(e,t){return dt(e)?e:t}function Te(e,t){return typeof e>"u"?t:e}const cw=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Vf=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function tt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Xe(e,t,n,i){let s,o,r;if(rt(e))if(o=e.length,i)for(s=o-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<o;s++)t.call(n,e[s],s);else if(De(e))for(r=Object.keys(e),o=r.length,s=0;s<o;s++)t.call(n,e[r[s]],r[s])}function Pr(e,t){let n,i,s,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],o=t[n],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Ar(e){if(rt(e))return e.map(Ar);if(De(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=Ar(e[n[s]]);return t}return e}function jf(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function uw(e,t,n,i){if(!jf(e))return;const s=t[e],o=n[e];De(s)&&De(o)?Qs(s,o,i):t[e]=Ar(o)}function Qs(e,t,n){const i=rt(t)?t:[t],s=i.length;if(!De(e))return e;n=n||{};const o=n.merger||uw;let r;for(let a=0;a<s;++a){if(r=i[a],!De(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],e,r,n)}return e}function Bs(e,t){return Qs(e,t,{merger:hw})}function hw(e,t,n){if(!jf(e))return;const i=t[e],s=n[e];De(i)&&De(s)?Bs(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ar(s))}const Uu={"":e=>e,x:e=>e.x,y:e=>e.y};function dw(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function fw(e){const t=dw(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function ri(e,t){return(Uu[t]||(Uu[t]=fw(t)))(e)}function rc(e){return e.charAt(0).toUpperCase()+e.slice(1)}const un=e=>typeof e<"u",ai=e=>typeof e=="function",zu=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function pw(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ht=Math.PI,at=2*ht,gw=at+ht,Tr=Number.POSITIVE_INFINITY,mw=ht/180,ft=ht/2,pi=ht/4,Gu=ht*2/3,Xn=Math.log10,Tn=Math.sign;function Ds(e,t,n){return Math.abs(e-t)<n}function Wu(e){const t=Math.round(e);e=Ds(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Xn(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function bw(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((s,o)=>s-o).pop(),t}function is(e){return!isNaN(parseFloat(e))&&isFinite(e)}function yw(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Kf(e,t,n){let i,s,o;for(i=0,s=e.length;i<s;i++)o=e[i][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function pn(e){return e*(ht/180)}function ac(e){return e*(180/ht)}function Vu(e){if(!dt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function qf(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*ht&&(o+=at),{angle:o,distance:s}}function hl(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function _w(e,t){return(e-t+gw)%at-ht}function tn(e){return(e%at+at)%at}function Zs(e,t,n,i){const s=tn(e),o=tn(t),r=tn(n),a=tn(o-s),l=tn(r-s),c=tn(s-o),u=tn(s-r);return s===o||s===r||i&&o===r||a>l&&c<u}function At(e,t,n){return Math.max(t,Math.min(n,e))}function vw(e){return At(e,-32768,32767)}function Hn(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function lc(e,t,n){n=n||(r=>e[r]<t);let i=e.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,n(o)?s=o:i=o;return{lo:s,hi:i}}const Un=(e,t,n,i)=>lc(e,n,i?s=>{const o=e[s][t];return o<n||o===n&&e[s+1][t]===n}:s=>e[s][t]<n),Sw=(e,t,n)=>lc(e,n,i=>e[i][t]>=n);function ww(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)i++;for(;s>i&&e[s-1]>n;)s--;return i>0||s<e.length?e.slice(i,s):e}const Yf=["push","pop","shift","splice","unshift"];function Ew(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Yf.forEach(n=>{const i="_onData"+rc(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),r}})})}function ju(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(Yf.forEach(o=>{delete e[o]}),delete e._chartjs)}function Xf(e){const t=new Set;let n,i;for(n=0,i=e.length;n<i;++n)t.add(e[n]);return t.size===i?e:Array.from(t)}const Jf=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Qf(e,t){let n=[],i=!1;return function(...s){n=s,i||(i=!0,Jf.call(window,()=>{i=!1,e.apply(t,n)}))}}function Iw(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const cc=e=>e==="start"?"left":e==="end"?"right":"center",xt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,kw=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function Zf(e,t,n){const i=t.length;let s=0,o=i;if(e._sorted){const{iScale:r,_parsed:a}=e,l=r.axis,{min:c,max:u,minDefined:h,maxDefined:p}=r.getUserBounds();h&&(s=At(Math.min(Un(a,r.axis,c).lo,n?i:Un(t,l,r.getPixelForValue(c)).lo),0,i-1)),p?o=At(Math.max(Un(a,r.axis,u,!0).hi+1,n?0:Un(t,l,r.getPixelForValue(u),!0).hi+1),s,i)-s:o=i-s}return{start:s,count:o}}function ep(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),o}const Eo=e=>e===0||e===1,Ku=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*at/n)),qu=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*at/n)+1,Fs={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ft)+1,easeOutSine:e=>Math.sin(e*ft),easeInOutSine:e=>-.5*(Math.cos(ht*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Eo(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Eo(e)?e:Ku(e,.075,.3),easeOutElastic:e=>Eo(e)?e:qu(e,.075,.3),easeInOutElastic(e){return Eo(e)?e:e<.5?.5*Ku(e*2,.1125,.45):.5+.5*qu(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Fs.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Fs.easeInBounce(e*2)*.5:Fs.easeOutBounce(e*2-1)*.5+.5};function tp(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Yu(e){return tp(e)?e:new Js(e)}function Ta(e){return tp(e)?e:new Js(e).saturate(.5).darken(.1).hexString()}const Pw=["x","y","borderWidth","radius","tension"],Aw=["color","borderColor","backgroundColor"];function Tw(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Aw},numbers:{type:"number",properties:Pw}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Cw(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Xu=new Map;function Mw(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Xu.get(n);return i||(i=new Intl.NumberFormat(e,t),Xu.set(n,i)),i}function lo(e,t,n){return Mw(t,n).format(e)}const np={values(e){return rt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let s,o=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=xw(e,n)}const r=Xn(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),lo(e,i,l)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Xn(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?np.numeric.call(this,e,t,n):""}};function xw(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var Xr={formatters:np};function Rw(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Oi=Object.create(null),dl=Object.create(null);function $s(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const o=n[i];e=e[o]||(e[o]=Object.create(null))}return e}function Ca(e,t,n){return typeof t=="string"?Qs($s(e,t),n):Qs($s(e,""),t)}class Nw{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Ta(s.backgroundColor),this.hoverBorderColor=(i,s)=>Ta(s.borderColor),this.hoverColor=(i,s)=>Ta(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Ca(this,t,n)}get(t){return $s(this,t)}describe(t,n){return Ca(dl,t,n)}override(t,n){return Ca(Oi,t,n)}route(t,n,i,s){const o=$s(this,t),r=$s(this,i),a="_"+n;Object.defineProperties(o,{[a]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=r[s];return De(l)?Object.assign({},c,l):Te(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var pt=new Nw({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Tw,Cw,Rw]);function Ow(e){return!e||je(e.size)||je(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Cr(e,t,n,i,s){let o=t[s];return o||(o=t[s]=e.measureText(s).width,n.push(s)),o>i&&(i=o),i}function Lw(e,t,n,i){i=i||{};let s=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},o=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let r=0;const a=n.length;let l,c,u,h,p;for(l=0;l<a;l++)if(h=n[l],h!=null&&rt(h)!==!0)r=Cr(e,s,o,r,h);else if(rt(h))for(c=0,u=h.length;c<u;c++)p=h[c],p!=null&&!rt(p)&&(r=Cr(e,s,o,r,p));e.restore();const g=o.length/2;if(g>n.length){for(l=0;l<g;l++)delete s[o[l]];o.splice(0,g)}return r}function gi(e,t,n){const i=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function Ju(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function fl(e,t,n,i){ip(e,t,n,i,null)}function ip(e,t,n,i,s){let o,r,a,l,c,u,h,p;const g=t.pointStyle,y=t.rotation,b=t.radius;let v=(y||0)*mw;if(g&&typeof g=="object"&&(o=g.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(v),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(b)||b<=0)){switch(e.beginPath(),g){default:s?e.ellipse(n,i,s/2,b,0,0,at):e.arc(n,i,b,0,at),e.closePath();break;case"triangle":u=s?s/2:b,e.moveTo(n+Math.sin(v)*u,i-Math.cos(v)*b),v+=Gu,e.lineTo(n+Math.sin(v)*u,i-Math.cos(v)*b),v+=Gu,e.lineTo(n+Math.sin(v)*u,i-Math.cos(v)*b),e.closePath();break;case"rectRounded":c=b*.516,l=b-c,r=Math.cos(v+pi)*l,h=Math.cos(v+pi)*(s?s/2-c:l),a=Math.sin(v+pi)*l,p=Math.sin(v+pi)*(s?s/2-c:l),e.arc(n-h,i-a,c,v-ht,v-ft),e.arc(n+p,i-r,c,v-ft,v),e.arc(n+h,i+a,c,v,v+ft),e.arc(n-p,i+r,c,v+ft,v+ht),e.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*b,u=s?s/2:l,e.rect(n-u,i-l,2*u,2*l);break}v+=pi;case"rectRot":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,p=Math.sin(v)*(s?s/2:b),e.moveTo(n-h,i-a),e.lineTo(n+p,i-r),e.lineTo(n+h,i+a),e.lineTo(n-p,i+r),e.closePath();break;case"crossRot":v+=pi;case"cross":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,p=Math.sin(v)*(s?s/2:b),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+p,i-r),e.lineTo(n-p,i+r);break;case"star":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,p=Math.sin(v)*(s?s/2:b),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+p,i-r),e.lineTo(n-p,i+r),v+=pi,h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,p=Math.sin(v)*(s?s/2:b),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+p,i-r),e.lineTo(n-p,i+r);break;case"line":r=s?s/2:Math.cos(v)*b,a=Math.sin(v)*b,e.moveTo(n-r,i-a),e.lineTo(n+r,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(v)*(s?s/2:b),i+Math.sin(v)*b);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function eo(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Jr(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Qr(e){e.restore()}function Bw(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const o=(t.x+n.x)/2;e.lineTo(o,t.y),e.lineTo(o,n.y)}else s==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Dw(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Li(e,t,n,i,s,o={}){const r=rt(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(e.save(),e.font=s.string,Fw(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Hw(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),je(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,n,i,o.maxWidth)),e.fillText(c,n,i,o.maxWidth),$w(e,n,i,c,o),i+=s.lineHeight;e.restore()}function Fw(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),je(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function $w(e,t,n,i,s){if(s.strikethrough||s.underline){const o=e.measureText(i),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(r,u),e.lineTo(a,u),e.stroke()}}function Hw(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function to(e,t){const{x:n,y:i,w:s,h:o,radius:r}=t;e.arc(n+r.topLeft,i+r.topLeft,r.topLeft,-ft,ht,!0),e.lineTo(n,i+o-r.bottomLeft),e.arc(n+r.bottomLeft,i+o-r.bottomLeft,r.bottomLeft,ht,ft,!0),e.lineTo(n+s-r.bottomRight,i+o),e.arc(n+s-r.bottomRight,i+o-r.bottomRight,r.bottomRight,ft,0,!0),e.lineTo(n+s,i+r.topRight),e.arc(n+s-r.topRight,i+r.topRight,r.topRight,0,-ft,!0),e.lineTo(n+r.topLeft,i)}const Uw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Gw(e,t){const n=(""+e).match(Uw);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Ww=e=>+e||0;function uc(e,t){const n={},i=De(t),s=i?Object.keys(t):t,o=De(e)?i?r=>Te(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of s)n[r]=Ww(o(r));return n}function sp(e){return uc(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Mi(e){return uc(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Dt(e){const t=sp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function It(e,t){e=e||{},t=t||pt.font;let n=Te(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=Te(e.style,t.style);i&&!(""+i).match(zw)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Te(e.family,t.family),lineHeight:Gw(Te(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Te(e.weight,t.weight),string:""};return s.string=Ow(s),s}function Is(e,t,n,i){let s=!0,o,r,a;for(o=0,r=e.length;o<r;++o)if(a=e[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),n!==void 0&&rt(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function Vw(e,t,n){const{min:i,max:s}=e,o=Vf(t,(s-i)/2),r=(a,l)=>n&&a===0?0:a+l;return{min:r(i,-Math.abs(o)),max:r(s,o)}}function ui(e,t){return Object.assign(Object.create(e),t)}function hc(e,t=[""],n=e,i,s=()=>e[0]){un(i)||(i=lp("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:i,_getTarget:s,override:r=>hc([r,...e],t,n,i)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete e[0][a],!0},get(r,a){return rp(r,a,()=>Zw(a,t,e,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(r,a){return Zu(r).includes(a)},ownKeys(r){return Zu(r)},set(r,a,l){const c=r._storage||(r._storage=s());return r[a]=c[a]=l,delete r._keys,!0}})}function ss(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:op(e,i),setContext:o=>ss(e,o,n,i),override:o=>ss(e.override(o),t,n,i)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return rp(o,r,()=>Kw(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function op(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:ai(n)?n:()=>n,isIndexable:ai(i)?i:()=>i}}const jw=(e,t)=>e?e+rc(t):t,dc=(e,t)=>De(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rp(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const i=n();return e[t]=i,i}function Kw(e,t,n){const{_proxy:i,_context:s,_subProxy:o,_descriptors:r}=e;let a=i[t];return ai(a)&&r.isScriptable(t)&&(a=qw(t,a,e,n)),rt(a)&&a.length&&(a=Yw(t,a,e,r.isIndexable)),dc(t,a)&&(a=ss(a,s,o&&o[t],r)),a}function qw(e,t,n,i){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(o,r||i),a.delete(e),dc(e,t)&&(t=fc(s._scopes,s,e,t)),t}function Yw(e,t,n,i){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=n;if(un(o.index)&&i(e))t=t[o.index%t.length];else if(De(t[0])){const l=t,c=s._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=fc(c,s,e,u);t.push(ss(h,o,r&&r[e],a))}}return t}function ap(e,t,n){return ai(e)?e(t,n):e}const Xw=(e,t)=>e===!0?t:typeof e=="string"?ri(t,e):void 0;function Jw(e,t,n,i,s){for(const o of t){const r=Xw(n,o);if(r){e.add(r);const a=ap(r._fallback,n,s);if(un(a)&&a!==n&&a!==i)return a}else if(r===!1&&un(i)&&n!==i)return null}return!1}function fc(e,t,n,i){const s=t._rootScopes,o=ap(t._fallback,n,i),r=[...e,...s],a=new Set;a.add(i);let l=Qu(a,r,n,o||n,i);return l===null||un(o)&&o!==n&&(l=Qu(a,r,o,l,i),l===null)?!1:hc(Array.from(a),[""],s,o,()=>Qw(t,n,i))}function Qu(e,t,n,i,s){for(;n;)n=Jw(e,t,n,i,s);return n}function Qw(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];return rt(s)&&De(n)?n:s||{}}function Zw(e,t,n,i){let s;for(const o of t)if(s=lp(jw(o,e),n),un(s))return dc(e,s)?fc(n,i,e,s):s}function lp(e,t){for(const n of t){if(!n)continue;const i=n[e];if(un(i))return i}}function Zu(e){let t=e._keys;return t||(t=e._keys=eE(e._scopes)),t}function eE(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function cp(e,t,n,i){const{iScale:s}=e,{key:o="r"}=this._parsing,r=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],r[a]={r:s.parse(ri(u,o),c)};return r}const tE=Number.EPSILON||1e-14,os=(e,t)=>t<e.length&&!e[t].skip&&e[t],up=e=>e==="x"?"y":"x";function nE(e,t,n,i){const s=e.skip?t:e,o=t,r=n.skip?t:n,a=hl(o,s),l=hl(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,p=i*u;return{previous:{x:o.x-h*(r.x-s.x),y:o.y-h*(r.y-s.y)},next:{x:o.x+p*(r.x-s.x),y:o.y+p*(r.y-s.y)}}}function iE(e,t,n){const i=e.length;let s,o,r,a,l,c=os(e,0);for(let u=0;u<i-1;++u)if(l=c,c=os(e,u+1),!(!l||!c)){if(Ds(t[u],0,tE)){n[u]=n[u+1]=0;continue}s=n[u]/t[u],o=n[u+1]/t[u],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),n[u]=s*r*t[u],n[u+1]=o*r*t[u])}}function sE(e,t,n="x"){const i=up(n),s=e.length;let o,r,a,l=os(e,0);for(let c=0;c<s;++c){if(r=a,a=l,l=os(e,c+1),!a)continue;const u=a[n],h=a[i];r&&(o=(u-r[n])/3,a[`cp1${n}`]=u-o,a[`cp1${i}`]=h-o*t[c]),l&&(o=(l[n]-u)/3,a[`cp2${n}`]=u+o,a[`cp2${i}`]=h+o*t[c])}}function oE(e,t="x"){const n=up(t),i=e.length,s=Array(i).fill(0),o=Array(i);let r,a,l,c=os(e,0);for(r=0;r<i;++r)if(a=l,l=c,c=os(e,r+1),!!l){if(c){const u=c[t]-l[t];s[r]=u!==0?(c[n]-l[n])/u:0}o[r]=a?c?Tn(s[r-1])!==Tn(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}iE(e,s,o),sE(e,o,t)}function Io(e,t,n){return Math.max(Math.min(e,n),t)}function rE(e,t){let n,i,s,o,r,a=eo(e[0],t);for(n=0,i=e.length;n<i;++n)r=o,o=a,a=n<i-1&&eo(e[n+1],t),o&&(s=e[n],r&&(s.cp1x=Io(s.cp1x,t.left,t.right),s.cp1y=Io(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Io(s.cp2x,t.left,t.right),s.cp2y=Io(s.cp2y,t.top,t.bottom)))}function aE(e,t,n,i,s){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")oE(e,s);else{let c=i?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=nE(c,a,e[Math.min(o+1,r-(i?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&rE(e,n)}function hp(){return typeof window<"u"&&typeof document<"u"}function pc(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Mr(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Zr=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function lE(e,t){return Zr(e).getPropertyValue(t)}const cE=["top","right","bottom","left"];function xi(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const o=cE[s];i[o]=parseFloat(e[t+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const uE=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function hE(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:o}=i;let r=!1,a,l;if(uE(s,o,e.target))a=s,l=o;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function vi(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=Zr(n),o=s.boxSizing==="border-box",r=xi(s,"padding"),a=xi(s,"border","width"),{x:l,y:c,box:u}=hE(e,n),h=r.left+(u&&a.left),p=r.top+(u&&a.top);let{width:g,height:y}=t;return o&&(g-=r.width+a.width,y-=r.height+a.height),{x:Math.round((l-h)/g*n.width/i),y:Math.round((c-p)/y*n.height/i)}}function dE(e,t,n){let i,s;if(t===void 0||n===void 0){const o=pc(e);if(!o)t=e.clientWidth,n=e.clientHeight;else{const r=o.getBoundingClientRect(),a=Zr(o),l=xi(a,"border","width"),c=xi(a,"padding");t=r.width-c.width-l.width,n=r.height-c.height-l.height,i=Mr(a.maxWidth,o,"clientWidth"),s=Mr(a.maxHeight,o,"clientHeight")}}return{width:t,height:n,maxWidth:i||Tr,maxHeight:s||Tr}}const ko=e=>Math.round(e*10)/10;function fE(e,t,n,i){const s=Zr(e),o=xi(s,"margin"),r=Mr(s.maxWidth,e,"clientWidth")||Tr,a=Mr(s.maxHeight,e,"clientHeight")||Tr,l=dE(e,t,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const p=xi(s,"border","width"),g=xi(s,"padding");c-=g.width+p.width,u-=g.height+p.height}return c=Math.max(0,c-o.width),u=Math.max(0,i?c/i:u-o.height),c=ko(Math.min(c,r,l.maxWidth)),u=ko(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ko(c/2)),(t!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=ko(Math.floor(u*i))),{width:c,height:u}}function eh(e,t,n){const i=t||1,s=Math.floor(e.height*i),o=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(n||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||r.height!==s||r.width!==o?(e.currentDevicePixelRatio=i,r.height=s,r.width=o,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const pE=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function th(e,t){const n=lE(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Si(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function gE(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function mE(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=Si(e,s,n),a=Si(s,o,n),l=Si(o,t,n),c=Si(r,a,n),u=Si(a,l,n);return Si(c,u,n)}const bE=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},yE=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Zi(e,t,n){return e?bE(t,n):yE()}function dp(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function fp(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function pp(e){return e==="angle"?{between:Zs,compare:_w,normalize:tn}:{between:Hn,compare:(t,n)=>t-n,normalize:t=>t}}function nh({start:e,end:t,count:n,loop:i,style:s}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:s}}function _E(e,t,n){const{property:i,start:s,end:o}=n,{between:r,normalize:a}=pp(i),l=t.length;let{start:c,end:u,loop:h}=e,p,g;if(h){for(c+=l,u+=l,p=0,g=l;p<g&&r(a(t[c%l][i]),s,o);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function gp(e,t,n){if(!n)return[e];const{property:i,start:s,end:o}=n,r=t.length,{compare:a,between:l,normalize:c}=pp(i),{start:u,end:h,loop:p,style:g}=_E(e,t,n),y=[];let b=!1,v=null,_,E,w;const k=()=>l(s,w,_)&&a(s,w)!==0,A=()=>a(o,_)===0||l(o,w,_),O=()=>b||k(),G=()=>!b||A();for(let W=u,Z=u;W<=h;++W)E=t[W%r],!E.skip&&(_=c(E[i]),_!==w&&(b=l(_,s,o),v===null&&O()&&(v=a(_,s)===0?W:Z),v!==null&&G()&&(y.push(nh({start:v,end:W,loop:p,count:r,style:g})),v=null),Z=W,w=_));return v!==null&&y.push(nh({start:v,end:h,loop:p,count:r,style:g})),y}function mp(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const o=gp(i[s],e.points,t);o.length&&n.push(...o)}return n}function vE(e,t,n,i){let s=0,o=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(o+=s);o>s&&e[o%t].skip;)o--;return o%=t,{start:s,end:o}}function SE(e,t,n,i){const s=e.length,o=[];let r=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%s];c.skip||c.stop?a.skip||(i=!1,o.push({start:t%s,end:(l-1)%s,loop:i}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%s,end:r%s,loop:i}),o}function wE(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const o=!!e._loop,{start:r,end:a}=vE(n,s,o,i);if(i===!0)return ih(e,[{start:r,end:a,loop:o}],n,t);const l=a<r?a+s:a,c=!!e._fullLoop&&r===0&&a===s-1;return ih(e,SE(n,r,l,c),n,t)}function ih(e,t,n,i){return!i||!i.setContext||!n?t:EE(e,t,n,i)}function EE(e,t,n,i){const s=e._chart.getContext(),o=sh(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=n.length,c=[];let u=o,h=t[0].start,p=h;function g(y,b,v,_){const E=a?-1:1;if(y!==b){for(y+=l;n[y%l].skip;)y-=E;for(;n[b%l].skip;)b+=E;y%l!==b%l&&(c.push({start:y%l,end:b%l,loop:v,style:_}),u=_,h=b%l)}}for(const y of t){h=a?h:y.start;let b=n[h%l],v;for(p=h+1;p<=y.end;p++){const _=n[p%l];v=sh(i.setContext(ui(s,{type:"segment",p0:b,p1:_,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:r}))),IE(v,u)&&g(h,p-1,y.loop,u),b=_,u=v}h<p-1&&g(h,p-1,y.loop,u)}return c}function sh(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function IE(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class kE{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,s){const o=n.listeners[s],r=n.duration;o.forEach(a=>a({chart:t,initial:n.initial,numSteps:r,currentStep:Math.min(i-n.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Jf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const o=i.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),o.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),n+=o.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Nn=new kE;const oh="transparent",PE={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=Yu(e||oh),s=i.valid&&Yu(t||oh);return s&&s.valid?s.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class AE{constructor(t,n,i,s){const o=n[i];s=Is([t.to,s,o,t.from]);const r=Is([t.from,o,s]);this._active=!0,this._fn=t.fn||PE[t.type||typeof r],this._easing=Fs[t.easing]||Fs.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Is([t.to,n,s,t.from]),this._from=Is([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=o;return}l=n/i%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class bp{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!De(t))return;const n=Object.keys(pt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!De(o))return;const r={};for(const a of n)r[a]=o[a];(rt(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,r)})})}_animateOptions(t,n){const i=n.options,s=CE(t,i);if(!s)return[];const o=this._createAnimations(s,i);return i.$shared&&TE(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,n){const i=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(n),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,n));continue}const u=n[c];let h=o[c];const p=i.get(c);if(h)if(p&&h.active()){h.update(p,u,a);continue}else h.cancel();if(!p||!p.duration){t[c]=u;continue}o[c]=h=new AE(p,t,c,u),s.push(h)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Nn.add(this._chart,i),!0}}function TE(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const o=e[i[s]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function CE(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function rh(e,t){const n=e&&e.options||{},i=n.reverse,s=n.min===void 0?t:0,o=n.max===void 0?t:0;return{start:i?o:s,end:i?s:o}}function ME(e,t,n){if(n===!1)return!1;const i=rh(e,n),s=rh(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function xE(e){let t,n,i,s;return De(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:e===!1}}function yp(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,o;for(s=0,o=i.length;s<o;++s)n.push(i[s].index);return n}function ah(e,t,n,i={}){const s=e.keys,o=i.mode==="single";let r,a,l,c;if(t!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===n){if(i.all)continue;break}c=e.values[l],dt(c)&&(o||t===0||Tn(t)===Tn(c))&&(t+=c)}return t}}function RE(e){const t=Object.keys(e),n=new Array(t.length);let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i],n[i]={x:o,y:e[o]};return n}function lh(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function NE(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function OE(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function LE(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function ch(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const o=e[s.index];if(n&&o>0||!n&&o<0)return s.index}return null}function uh(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:o,vScale:r,index:a}=i,l=o.axis,c=r.axis,u=NE(o,r,i),h=t.length;let p;for(let g=0;g<h;++g){const y=t[g],{[l]:b,[c]:v}=y,_=y._stacks||(y._stacks={});p=_[c]=LE(s,u,b),p[a]=v,p._top=ch(p,r,!0,i.type),p._bottom=ch(p,r,!1,i.type);const E=p._visualValues||(p._visualValues={});E[a]=v}}function Ma(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function BE(e,t){return ui(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function DE(e,t,n){return ui(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function ps(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const s of t){const o=s._stacks;if(!o||o[i]===void 0||o[i][n]===void 0)return;delete o[i][n],o[i]._visualValues!==void 0&&o[i]._visualValues[n]!==void 0&&delete o[i]._visualValues[n]}}}const xa=e=>e==="reset"||e==="none",hh=(e,t)=>t?e:Object.assign({},e),FE=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:yp(n,!0),values:null};class bn{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=lh(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ps(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,p,g,y)=>h==="x"?p:h==="r"?y:g,o=n.xAxisID=Te(i.xAxisID,Ma(t,"x")),r=n.yAxisID=Te(i.yAxisID,Ma(t,"y")),a=n.rAxisID=Te(i.rAxisID,Ma(t,"r")),l=n.indexAxis,c=n.iAxisID=s(l,o,r,a),u=n.vAxisID=s(l,r,o,a);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(r),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ju(this._data,this),t._stacked&&ps(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(De(n))this._data=RE(n);else if(i!==n){if(i){ju(i,this);const s=this._cachedMeta;ps(s),s._parsed=[]}n&&Object.isExtensible(n)&&Ew(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=n._stacked;n._stacked=lh(n.vScale,n),n.stack!==i.stack&&(s=!0,ps(n),n.stack=i.stack),this._resyncElements(t),(s||o!==n._stacked)&&uh(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:r}=i,a=o.axis;let l=t===0&&n===s.length?!0:i._sorted,c=t>0&&i._parsed[t-1],u,h,p;if(this._parsing===!1)i._parsed=s,i._sorted=!0,p=s;else{rt(s[t])?p=this.parseArrayData(i,s,t,n):De(s[t])?p=this.parseObjectData(i,s,t,n):p=this.parsePrimitiveData(i,s,t,n);const g=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+t]=h=p[u],l&&(g()&&(l=!1),c=h);i._sorted=l}r&&uh(this,p)}parsePrimitiveData(t,n,i,s){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,h=new Array(s);let p,g,y;for(p=0,g=s;p<g;++p)y=p+i,h[p]={[a]:u||o.parse(c[y],y),[l]:r.parse(n[y],y)};return h}parseArrayData(t,n,i,s){const{xScale:o,yScale:r}=t,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=n[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(t,n,i,s){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,p,g;for(u=0,h=s;u<h;++u)p=u+i,g=n[p],c[u]={x:o.parse(ri(g,a),p),y:r.parse(ri(g,l),p)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const s=this.chart,o=this._cachedMeta,r=n[t.axis],a={keys:yp(s,!0),values:n._stacks[t.axis]._visualValues};return ah(a,r,o.index,{mode:i})}updateRangeFromParsed(t,n,i,s){const o=i[n.axis];let r=o===null?NaN:o;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,r=ah(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,n){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,r=s.length,a=this._getOtherScale(t),l=FE(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=OE(a);let p,g;function y(){g=s[p];const b=g[a.axis];return!dt(g[t.axis])||u>b||h<b}for(p=0;p<r&&!(!y()&&(this.updateRangeFromParsed(c,t,g,l),o));++p);if(o){for(p=r-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,t,g,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let s,o,r;for(s=0,o=n.length;s<o;++s)r=n[s][t.axis],dt(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,s=n.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=xE(Te(this.options.clip,ME(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],o=n.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(t,o,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?r.push(h):h.draw(t,o))}for(u=0;u<r.length;++u)r[u].draw(t,o)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=DE(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=BE(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const s=n==="active",o=this._cachedDataOpts,r=t+"-"+n,a=o[r],l=this.enableOptionSharing&&un(i);if(a)return hh(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],p=c.getOptionScopes(this.getDataset(),u),g=Object.keys(pt.elements[t]),y=()=>this.getContext(i,s,n),b=c.resolveNamedOptions(p,g,y,h);return b.$shared&&(b.$shared=l,o[r]=Object.freeze(hh(b,l))),b}_resolveAnimations(t,n,i){const s=this.chart,o=this._cachedDataOpts,r=`animation-${n}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(p,this.getContext(t,i,n))}const c=new bp(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||xa(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),s=this._sharedOptions,o=this.getSharedOptions(i),r=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,i),{sharedOptions:o,includeOptions:r}}updateElement(t,n,i,s){xa(s)?Object.assign(t,i):this._resolveAnimations(n,s).update(t,i)}updateSharedOptions(t,n,i){t&&!xa(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,s){t.active=s;const o=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,o=n.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,n,i=!0){const s=this._cachedMeta,o=s.data,r=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=r;a--)c[a]=c[a-n]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,n),i&&this.updateElements(o,t,n,"reset")}updateElements(t,n,i,s){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,n);i._stacked&&ps(i,s)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,s]=t;this[n](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}C(bn,"defaults",{}),C(bn,"datasetElementType",null),C(bn,"dataElementType",null);function $E(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let s=0,o=n.length;s<o;s++)i=i.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=Xf(i.sort((s,o)=>s-o))}return e._cache.$bar}function HE(e){const t=e.iScale,n=$E(t,e.type);let i=t._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(un(a)&&(i=Math.min(i,Math.abs(r-a)||i)),a=r)};for(s=0,o=n.length;s<o;++s)r=t.getPixelForValue(n[s]),l();for(a=void 0,s=0,o=t.ticks.length;s<o;++s)r=t.getPixelForTick(s),l();return i}function UE(e,t,n,i){const s=n.barThickness;let o,r;return je(s)?(o=t.min*n.categoryPercentage,r=n.barPercentage):(o=s*i,r=1),{chunk:o/i,ratio:r,start:t.pixels[e]-o/2}}function zE(e,t,n,i){const s=t.pixels,o=s[e];let r=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/i,ratio:n.barPercentage,start:c}}function GE(e,t,n,i){const s=n.parse(e[0],i),o=n.parse(e[1],i),r=Math.min(s,o),a=Math.max(s,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function _p(e,t,n,i){return rt(e)?GE(e,t,n,i):t[n.axis]=n.parse(e,i),t}function dh(e,t,n,i){const s=e.iScale,o=e.vScale,r=s.getLabels(),a=s===o,l=[];let c,u,h,p;for(c=n,u=n+i;c<u;++c)p=t[c],h={},h[s.axis]=a||s.parse(r[c],c),l.push(_p(p,h,o,c));return l}function Ra(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function WE(e,t,n){return e!==0?Tn(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function VE(e){let t,n,i,s,o;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(s="end",o="start"):(s="start",o="end"),{start:n,end:i,reverse:t,top:s,bottom:o}}function jE(e,t,n,i){let s=t.borderSkipped;const o={};if(!s){e.borderSkipped=o;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=VE(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(o[fh(u,r,a,l)]=!0,s=c)),o[fh(s,r,a,l)]=!0,e.borderSkipped=o}function fh(e,t,n,i){return i?(e=KE(e,t,n),e=ph(e,n,t)):e=ph(e,t,n),e}function KE(e,t,n){return e===t?n:e===n?t:e}function ph(e,t,n){return e==="start"?t:e==="end"?n:e}function qE(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Vo extends bn{parsePrimitiveData(t,n,i,s){return dh(t,n,i,s)}parseArrayData(t,n,i,s){return dh(t,n,i,s)}parseObjectData(t,n,i,s){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let p,g,y,b;for(p=i,g=i+s;p<g;++p)b=n[p],y={},y[o.axis]=o.parse(ri(b,c),p),h.push(_p(ri(b,u),y,r,p));return h}updateRangeFromParsed(t,n,i,s){super.updateRangeFromParsed(t,n,i,s);const o=i._custom;o&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:s}=n,o=this.getParsed(t),r=o._custom,a=Ra(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,s);for(let g=n;g<n+i;g++){const y=this.getParsed(g),b=o||je(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),v=this._calculateBarIndexPixels(g,u),_=(y._stacks||{})[a.axis],E={horizontal:c,base:b.base,enableBorderRadius:!_||Ra(y._custom)||r===_._top||r===_._bottom,x:c?b.head:v.center,y:c?v.center:b.head,height:c?v.size:Math.abs(b.size),width:c?Math.abs(b.size):v.size};p&&(E.options=h||this.resolveDataElementOptions(g,t[g].active?"active":s));const w=E.options||t[g].options;jE(E,w,_,r),qE(E,w,u.ratio),this.updateElement(t[g],g,E,s)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=i.options.stacked,r=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(je(u)||isNaN(u))return!0};for(const l of s)if(!(n!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,i){const s=this._getStacks(t,i),o=n!==void 0?s.indexOf(n):-1;return o===-1?s.length-1:o}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,s=[];let o,r;for(o=0,r=n.data.length;o<r;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const a=t.barThickness;return{min:a||HE(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,u=Ra(c);let h=l[n.axis],p=0,g=i?this.applyStack(n,l,i):h,y,b;g!==h&&(p=g-h,g=h),u&&(h=c.barStart,g=c.barEnd-c.barStart,h!==0&&Tn(h)!==Tn(c.barEnd)&&(p=0),p+=h);const v=!je(o)&&!u?o:p;let _=n.getPixelForValue(v);if(this.chart.getDataVisibility(t)?y=n.getPixelForValue(p+g):y=_,b=y-_,Math.abs(b)<r){b=WE(b,n,a)*r,h===a&&(_-=b/2);const E=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),k=Math.min(E,w),A=Math.max(E,w);_=Math.max(Math.min(_,A),k),y=_+b,i&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(y)-n.getValueForPixel(_))}if(_===n.getPixelForValue(a)){const E=Tn(b)*n.getLineWidthForValue(a)/2;_+=E,b-=E}return{size:b,base:_,head:y,center:y+b/2}}_calculateBarIndexPixels(t,n){const i=n.scale,s=this.options,o=s.skipNull,r=Te(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=o?this._getStackCount(t):n.stackCount,u=s.barThickness==="flex"?zE(t,n,s,c):UE(t,n,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(r,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,s=i.length;let o=0;for(;o<s;++o)this.getParsed(o)[n.axis]!==null&&i[o].draw(this._ctx)}}C(Vo,"id","bar"),C(Vo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),C(Vo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class jo extends bn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,s){const o=super.parsePrimitiveData(t,n,i,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+i).radius;return o}parseArrayData(t,n,i,s){const o=super.parseArrayData(t,n,i,s);for(let r=0;r<o.length;r++){const a=n[i+r];o[r]._custom=Te(a[2],this.resolveDataElementOptions(r+i).radius)}return o}parseObjectData(t,n,i,s){const o=super.parseObjectData(t,n,i,s);for(let r=0;r<o.length;r++){const a=n[i+r];o[r]._custom=Te(a&&a.r&&+a.r,this.resolveDataElementOptions(r+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=n,r=this.getParsed(t),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:i[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,s){const o=s==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,s),u=r.axis,h=a.axis;for(let p=n;p<n+i;p++){const g=t[p],y=!o&&this.getParsed(p),b={},v=b[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(y[u]),_=b[h]=o?a.getBasePixel():a.getPixelForValue(y[h]);b.skip=isNaN(v)||isNaN(_),c&&(b.options=l||this.resolveDataElementOptions(p,g.active?"active":s),o&&(b.options.radius=0)),this.updateElement(g,p,b,s)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return n!=="active"&&(s.radius=0),s.radius+=Te(i&&i._custom,o),s}}C(jo,"id","bubble"),C(jo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),C(jo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function YE(e,t,n){let i=1,s=1,o=0,r=0;if(t<at){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),p=Math.sin(l),g=(w,k,A)=>Zs(w,a,l,!0)?1:Math.max(k,k*n,A,A*n),y=(w,k,A)=>Zs(w,a,l,!0)?-1:Math.min(k,k*n,A,A*n),b=g(0,c,h),v=g(ft,u,p),_=y(ht,c,h),E=y(ht+ft,u,p);i=(b-_)/2,s=(v-E)/2,o=-(b+_)/2,r=-(v+E)/2}return{ratioX:i,ratioY:s,offsetX:o,offsetY:r}}class Pi extends bn{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=l=>+i[l];if(De(i[t])){const{key:l="value"}=this._parsing;o=c=>+ri(i[c],l)}let r,a;for(r=t,a=t+n;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return pn(this.options.rotation-90)}_getCircumference(){return pn(this.options.circumference)}_getRotationExtents(){let t=at,n=-at;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),n=Math.max(n,o+r)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-r)/2,0),l=Math.min(cw(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:y,offsetY:b}=YE(h,u,l),v=(i.width-r)/p,_=(i.height-r)/g,E=Math.max(Math.min(v,_)/2,0),w=Vf(this.options.radius,E),k=Math.max(w*l,0),A=(w-k)/this._getVisibleDatasetWeightTotal();this.offsetX=y*w,this.offsetY=b*w,s.total=this.calculateTotal(),this.outerRadius=w-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,n){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/at)}updateElements(t,n,i,s){const o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,p=o&&c.animateScale,g=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(n,s);let _=this._getRotation(),E;for(E=0;E<n;++E)_+=this._circumference(E,o);for(E=n;E<n+i;++E){const w=this._circumference(E,o),k=t[E],A={x:u+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+w,circumference:w,outerRadius:y,innerRadius:g};v&&(A.options=b||this.resolveDataElementOptions(E,k.active?"active":s)),_+=w,this.updateElement(k,E,A,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,s;for(s=0;s<n.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?at*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=lo(n._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let n=0;const i=this.chart;let s,o,r,a,l;if(!t){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){r=i.getDatasetMeta(s),t=r.data,a=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,s=t.length;i<s;++i){const o=this.resolveDataElementOptions(i);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(Te(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}C(Pi,"id","doughnut"),C(Pi,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),C(Pi,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"}),C(Pi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return n.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class Ko extends bn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=n,r=this.chart._animationsDisabled;let{start:a,count:l}=Zf(n,s,r);this._drawStart=a,this._drawCount=l,ep(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,n,i,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),p=r.axis,g=a.axis,{spanGaps:y,segment:b}=this.options,v=is(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||s==="none",E=n+i,w=t.length;let k=n>0&&this.getParsed(n-1);for(let A=0;A<w;++A){const O=t[A],G=_?O:{};if(A<n||A>=E){G.skip=!0;continue}const W=this.getParsed(A),Z=je(W[g]),Y=G[p]=r.getPixelForValue(W[p],A),Q=G[g]=o||Z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,W,l):W[g],A);G.skip=isNaN(Y)||isNaN(Q)||Z,G.stop=A>0&&Math.abs(W[p]-k[p])>v,b&&(G.parsed=W,G.raw=c.data[A]),h&&(G.options=u||this.resolveDataElementOptions(A,O.active?"active":s)),_||this.updateElement(O,A,G,s),k=W}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}C(Ko,"id","line"),C(Ko,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),C(Ko,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Hs extends bn{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=lo(n._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,n,i,s){return cp.bind(this)(t,n,i,s)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,s=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(s/2,0),r=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),a=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,i,s){const o=s==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,p=c.getIndexAngle(0)-.5*ht;let g=p,y;const b=360/this.countVisibleElements();for(y=0;y<n;++y)g+=this._computeAngle(y,s,b);for(y=n;y<n+i;y++){const v=t[y];let _=g,E=g+this._computeAngle(y,s,b),w=r.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;g=E,o&&(l.animateScale&&(w=0),l.animateRotate&&(_=E=p));const k={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:_,endAngle:E,options:this.resolveDataElementOptions(y,v.active?"active":s)};this.updateElement(v,y,k,s)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?pn(this.resolveDataElementOptions(t,n).angle||i):0}}C(Hs,"id","polarArea"),C(Hs,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),C(Hs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return n.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class pl extends Pi{}C(pl,"id","pie"),C(pl,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class qo extends bn{getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,s){return cp.bind(this)(t,n,i,s)}update(t){const n=this._cachedMeta,i=n.dataset,s=n.data||[],o=n.iScale.getLabels();if(i.points=s,t!=="resize"){const r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,n,i,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let a=n;a<n+i;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:u.x,p=r?o.yCenter:u.y,g={x:h,y:p,angle:u.angle,skip:isNaN(h)||isNaN(p),options:c};this.updateElement(l,a,g,s)}}}C(qo,"id","radar"),C(qo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),C(qo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Yo extends bn{getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=n,r=this.getParsed(t),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,s=this.chart._animationsDisabled;let{start:o,count:r}=Zf(n,i,s);if(this._drawStart=o,this._drawCount=r,ep(n)&&(o=0,r=i.length),this.options.showLine){const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},t)}this.updateElements(i,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),h=this.getSharedOptions(u),p=this.includeOptions(s,h),g=r.axis,y=a.axis,{spanGaps:b,segment:v}=this.options,_=is(b)?b:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||s==="none";let w=n>0&&this.getParsed(n-1);for(let k=n;k<n+i;++k){const A=t[k],O=this.getParsed(k),G=E?A:{},W=je(O[y]),Z=G[g]=r.getPixelForValue(O[g],k),Y=G[y]=o||W?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[y],k);G.skip=isNaN(Z)||isNaN(Y)||W,G.stop=k>0&&Math.abs(O[g]-w[g])>_,v&&(G.parsed=O,G.raw=c.data[k]),p&&(G.options=h||this.resolveDataElementOptions(k,A.active?"active":s)),E||this.updateElement(A,k,G,s),w=O}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,r)/2}}C(Yo,"id","scatter"),C(Yo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),C(Yo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var XE=Object.freeze({__proto__:null,BarController:Vo,BubbleController:jo,DoughnutController:Pi,LineController:Ko,PolarAreaController:Hs,PieController:pl,RadarController:qo,ScatterController:Yo});function mi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class gc{static override(t){Object.assign(gc.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return mi()}parse(){return mi()}format(){return mi()}add(){return mi()}diff(){return mi()}startOf(){return mi()}endOf(){return mi()}}var JE={_date:gc};function QE(e,t,n,i){const{controller:s,data:o,_sorted:r}=e,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const l=a._reversePixels?Sw:Un;if(i){if(s._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(o,t,n-u),p=l(o,t,n+u);return{lo:h.lo,hi:p.hi}}}}else return l(o,t,n)}return{lo:0,hi:o.length-1}}function co(e,t,n,i,s){const o=e.getSortedVisibleDatasetMetas(),r=n[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:h,hi:p}=QE(o[a],t,r,s);for(let g=h;g<=p;++g){const y=u[g];y.skip||i(y,c,g)}}}function ZE(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,s){const o=t?Math.abs(i.x-s.x):0,r=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Na(e,t,n,i,s){const o=[];return!s&&!e.isPointInArea(t)||co(e,n,t,function(a,l,c){!s&&!eo(a,e.chartArea,0)||a.inRange(t.x,t.y,i)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function eI(e,t,n,i){let s=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],i),{angle:h}=qf(r,{x:t.x,y:t.y});Zs(h,c,u)&&s.push({element:r,datasetIndex:a,index:l})}return co(e,n,t,o),s}function tI(e,t,n,i,s,o){let r=[];const a=ZE(n);let l=Number.POSITIVE_INFINITY;function c(u,h,p){const g=u.inRange(t.x,t.y,s);if(i&&!g)return;const y=u.getCenterPoint(s);if(!(!!o||e.isPointInArea(y))&&!g)return;const v=a(t,y);v<l?(r=[{element:u,datasetIndex:h,index:p}],l=v):v===l&&r.push({element:u,datasetIndex:h,index:p})}return co(e,n,t,c),r}function Oa(e,t,n,i,s,o){return!o&&!e.isPointInArea(t)?[]:n==="r"&&!i?eI(e,t,n,s):tI(e,t,n,i,s,o)}function gh(e,t,n,i,s){const o=[],r=n==="x"?"inXRange":"inYRange";let a=!1;return co(e,n,t,(l,c,u)=>{l[r](t[n],s)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:o}var nI={evaluateInteractionItems:co,modes:{index(e,t,n,i){const s=vi(t,e),o=n.axis||"x",r=n.includeInvisible||!1,a=n.intersect?Na(e,s,o,i,r):Oa(e,s,o,!1,i,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,i){const s=vi(t,e),o=n.axis||"xy",r=n.includeInvisible||!1;let a=n.intersect?Na(e,s,o,i,r):Oa(e,s,o,!1,i,r);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,i){const s=vi(t,e),o=n.axis||"xy",r=n.includeInvisible||!1;return Na(e,s,o,i,r)},nearest(e,t,n,i){const s=vi(t,e),o=n.axis||"xy",r=n.includeInvisible||!1;return Oa(e,s,o,n.intersect,i,r)},x(e,t,n,i){const s=vi(t,e);return gh(e,s,"x",n.intersect,i)},y(e,t,n,i){const s=vi(t,e);return gh(e,s,"y",n.intersect,i)}}};const vp=["left","top","right","bottom"];function gs(e,t){return e.filter(n=>n.pos===t)}function mh(e,t){return e.filter(n=>vp.indexOf(n.pos)===-1&&n.box.axis===t)}function ms(e,t){return e.sort((n,i)=>{const s=t?i:n,o=t?n:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function iI(e){const t=[];let n,i,s,o,r,a;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:n,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function sI(e){const t={};for(const n of e){const{stack:i,pos:s,stackWeight:o}=n;if(!i||!vp.includes(s))continue;const r=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function oI(e,t){const n=sI(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&t.availableHeight)}return n}function rI(e){const t=iI(e),n=ms(t.filter(c=>c.box.fullSize),!0),i=ms(gs(t,"left"),!0),s=ms(gs(t,"right")),o=ms(gs(t,"top"),!0),r=ms(gs(t,"bottom")),a=mh(t,"x"),l=mh(t,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:gs(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function bh(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Sp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function aI(e,t,n,i){const{pos:s,box:o}=n,r=e.maxPadding;if(!De(s)){n.size&&(e[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?o.height:o.width),n.size=h.size/h.count,e[s]+=n.size}o.getPadding&&Sp(r,o.getPadding());const a=Math.max(0,t.outerWidth-bh(r,e,"left","right")),l=Math.max(0,t.outerHeight-bh(r,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function lI(e){const t=e.maxPadding;function n(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function cI(e,t){const n=t.maxPadding;function i(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],n[r])}),o}return i(e?["left","right"]:["top","bottom"])}function ks(e,t,n,i){const s=[];let o,r,a,l,c,u;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,cI(a.horizontal,t));const{same:h,other:p}=aI(t,n,a,i);c|=h&&s.length,u=u||p,l.fullSize||s.push(a)}return c&&ks(s,t,n,i)||u}function Po(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function yh(e,t,n,i){const s=n.padding;let{x:o,y:r}=t;for(const a of e){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,p=c.size||l.height;un(c.start)&&(r=c.start),l.fullSize?Po(l,s.left,r,n.outerWidth-s.right-s.left,p):Po(l,t.left+c.placed,r,h,p),c.start=r,c.placed+=h,r=l.bottom}else{const h=t.h*u,p=c.size||l.width;un(c.start)&&(o=c.start),l.fullSize?Po(l,o,s.top,p,n.outerHeight-s.bottom-s.top):Po(l,o,t.top+c.placed,p,h),c.start=o,c.placed+=h,o=l.right}}t.x=o,t.y=r}var Bt={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=Dt(e.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(n-s.height,0),a=rI(e.boxes),l=a.vertical,c=a.horizontal;Xe(e.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),p=Object.assign({},s);Sp(p,Dt(i));const g=Object.assign({maxPadding:p,w:o,h:r,x:s.left,y:s.top},s),y=oI(l.concat(c),h);ks(a.fullSize,g,h,y),ks(l,g,h,y),ks(c,g,h,y)&&ks(l,g,h,y),lI(g),yh(a.leftAndTop,g,h,y),g.x+=g.w,g.y+=g.h,yh(a.rightAndBottom,g,h,y),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Xe(a.chartArea,b=>{const v=b.box;Object.assign(v,e.chartArea),v.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class wp{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,s){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(t){return!0}updateConfig(t){}}class uI extends wp{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Xo="$chartjs",hI={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_h=e=>e===null||e==="";function dI(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[Xo]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_h(s)){const o=th(e,"width");o!==void 0&&(e.width=o)}if(_h(i))if(e.style.height==="")e.height=e.width/(t||2);else{const o=th(e,"height");o!==void 0&&(e.height=o)}return e}const Ep=pE?{passive:!0}:!1;function fI(e,t,n){e.addEventListener(t,n,Ep)}function pI(e,t,n){e.canvas.removeEventListener(t,n,Ep)}function gI(e,t){const n=hI[e.type]||e.type,{x:i,y:s}=vi(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:s!==void 0?s:null}}function xr(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function mI(e,t,n){const i=e.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||xr(a.addedNodes,i),r=r&&!xr(a.removedNodes,i);r&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function bI(e,t,n){const i=e.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||xr(a.removedNodes,i),r=r&&!xr(a.addedNodes,i);r&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const no=new Map;let vh=0;function Ip(){const e=window.devicePixelRatio;e!==vh&&(vh=e,no.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function yI(e,t){no.size||window.addEventListener("resize",Ip),no.set(e,t)}function _I(e){no.delete(e),no.size||window.removeEventListener("resize",Ip)}function vI(e,t,n){const i=e.canvas,s=i&&pc(i);if(!s)return;const o=Qf((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(s),yI(e,o),r}function La(e,t,n){n&&n.disconnect(),t==="resize"&&_I(e)}function SI(e,t,n){const i=e.canvas,s=Qf(o=>{e.ctx!==null&&n(gI(o,e))},e);return fI(i,t,s),s}class wI extends wp{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(dI(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[Xo])return!1;const i=n[Xo].initial;["height","width"].forEach(o=>{const r=i[o];je(r)?n.removeAttribute(o):n.setAttribute(o,r)});const s=i.style||{};return Object.keys(s).forEach(o=>{n.style[o]=s[o]}),n.width=n.width,delete n[Xo],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),r={attach:mI,detach:bI,resize:vI}[n]||SI;s[n]=r(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),s=i[n];if(!s)return;({attach:La,detach:La,resize:La}[n]||pI)(t,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,s){return fE(t,n,i,s)}isAttached(t){const n=pc(t);return!!(n&&n.isConnected)}}function EI(e){return!hp()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?uI:wI}var Lo;let Vn=(Lo=class{constructor(){C(this,"active",!1)}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return is(this.x)&&is(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const s={};return t.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}},C(Lo,"defaults",{}),C(Lo,"defaultRoutes"),Lo);function II(e,t){const n=e.options.ticks,i=kI(e),s=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?AI(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return TI(t,c,o,r/s),c;const u=PI(o,t,s);if(r>0){let h,p;const g=r>1?Math.round((l-a)/(r-1)):null;for(Ao(t,c,u,je(g)?0:a-g,a),h=0,p=r-1;h<p;h++)Ao(t,c,u,o[h],o[h+1]);return Ao(t,c,u,l,je(g)?t.length:l+g),c}return Ao(t,c,u),c}function kI(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}function PI(e,t,n){const i=CI(e),s=t.length/n;if(!i)return Math.max(s,1);const o=bw(i);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function AI(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function TI(e,t,n,i){let s=0,o=n[0],r;for(i=Math.ceil(i),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=n[s*i])}function Ao(e,t,n,i,s){const o=Te(i,0),r=Math.min(Te(s,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=o;u<0;)a++,u=Math.round(o+a*n);for(c=Math.max(o,0);c<r;c++)c===u&&(t.push(e[c]),a++,u=Math.round(o+a*n))}function CI(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const MI=e=>e==="left"?"right":e==="right"?"left":e,Sh=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,wh=(e,t)=>Math.min(t||e,e);function Eh(e,t){const n=[],i=e.length/t,s=e.length;let o=0;for(;o<s;o+=i)n.push(e[Math.floor(o)]);return n}function xI(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),o=e._startPixel,r=e._endPixel,a=1e-6;let l=e.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<o-a||l>r+a)))return l}function RI(e,t){Xe(e,n=>{const i=n.gc,s=i.length/2;let o;if(s>t){for(o=0;o<s;++o)delete n.data[i[o]];i.splice(0,s)}})}function bs(e){return e.drawTicks?e.tickLength:0}function Ih(e,t){if(!e.display)return 0;const n=It(e.font,t),i=Dt(e.padding);return(rt(e.text)?e.text.length:1)*n.lineHeight+i.height}function NI(e,t){return ui(e,{scale:t,type:"scale"})}function OI(e,t,n){return ui(e,{tick:n,index:t,type:"tick"})}function LI(e,t,n){let i=cc(e);return(n&&t!=="right"||!n&&t==="right")&&(i=MI(i)),i}function BI(e,t,n,i){const{top:s,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h=0,p,g,y;const b=r-s,v=a-o;if(e.isHorizontal()){if(g=xt(i,o,a),De(n)){const _=Object.keys(n)[0],E=n[_];y=u[_].getPixelForValue(E)+b-t}else n==="center"?y=(c.bottom+c.top)/2+b-t:y=Sh(e,n,t);p=a-o}else{if(De(n)){const _=Object.keys(n)[0],E=n[_];g=u[_].getPixelForValue(E)-v+t}else n==="center"?g=(c.left+c.right)/2-v+t:g=Sh(e,n,t);y=xt(i,r,s),h=n==="left"?-ft:ft}return{titleX:g,titleY:y,maxWidth:p,rotation:h}}class Bi extends Vn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return t=Qt(t,Number.POSITIVE_INFINITY),n=Qt(n,Number.NEGATIVE_INFINITY),i=Qt(i,Number.POSITIVE_INFINITY),s=Qt(s,Number.NEGATIVE_INFINITY),{min:Qt(t,i),max:Qt(n,s),minDefined:dt(t),maxDefined:dt(n)}}getMinMax(t){let{min:n,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),s||(n=Math.min(n,r.min)),o||(i=Math.max(i,r.max));return n=o&&n>i?i:n,i=s&&n>i?n:i,{min:Qt(n,Qt(i,n)),max:Qt(i,Qt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){tt(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Vw(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Eh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=II(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){tt(this.options.afterUpdate,[this])}beforeSetDimensions(){tt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){tt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),tt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){tt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,s,o;for(i=0,s=t.length;i<s;i++)o=t[i],o.label=tt(n.callback,[o.value,i,t],this)}afterTickToLabelConversion(){tt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){tt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=wh(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,o=n.maxRotation;let r=s,a,l,c;if(!this._isVisible()||!n.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,g=At(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/i:g/(i-1),h+6>a&&(a=g/(i-(t.offset?.5:1)),l=this.maxHeight-bs(t.grid)-n.padding-Ih(t.title,this.chart.options.font),c=Math.sqrt(h*h+p*p),r=ac(Math.min(Math.asin(At((u.highest.height+6)/a,-1,1)),Math.asin(At(l/c,-1,1))-Math.asin(At(p/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){tt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){tt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Ih(s,n.options.font);if(a?(t.width=this.maxWidth,t.height=bs(o)+l):(t.height=this.maxHeight,t.width=bs(o)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:p}=this._getLabelSizes(),g=i.padding*2,y=pn(this.labelRotation),b=Math.cos(y),v=Math.sin(y);if(a){const _=i.mirror?0:v*h.width+b*p.height;t.height=Math.min(this.maxHeight,t.height+_+g)}else{const _=i.mirror?0:b*h.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+_+g)}this._calculatePadding(c,u,v,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?c?(p=s*t.width,g=i*n.height):(p=i*t.height,g=s*n.width):o==="start"?g=n.width:o==="end"?p=t.width:o!=="inner"&&(p=t.width/2,g=n.width/2),this.paddingLeft=Math.max((p-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+r)*this.width/(this.width-h),0)}else{let u=n.height/2,h=t.height/2;o==="start"?(u=0,h=t.height):o==="end"&&(u=n.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){tt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)je(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Eh(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(n/wh(n,i));let c=0,u=0,h,p,g,y,b,v,_,E,w,k,A;for(h=0;h<n;h+=l){if(y=t[h].label,b=this._resolveTickFontOptions(h),s.font=v=b.string,_=o[v]=o[v]||{data:{},gc:[]},E=b.lineHeight,w=k=0,!je(y)&&!rt(y))w=Cr(s,_.data,_.gc,w,y),k=E;else if(rt(y))for(p=0,g=y.length;p<g;++p)A=y[p],!je(A)&&!rt(A)&&(w=Cr(s,_.data,_.gc,w,A),k+=E);r.push(w),a.push(k),c=Math.max(w,c),u=Math.max(k,u)}RI(o,n);const O=r.indexOf(c),G=a.indexOf(u),W=Z=>({width:r[Z]||0,height:a[Z]||0});return{first:W(0),last:W(n-1),widest:W(O),highest:W(G),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return vw(this._alignToPixels?gi(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=OI(this.getContext(),t,i))}return this.$context||(this.$context=NI(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=pn(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=bs(o),g=[],y=a.setContext(this.getContext()),b=y.display?y.width:0,v=b/2,_=function(Ee){return gi(i,Ee,b)};let E,w,k,A,O,G,W,Z,Y,Q,ye,de;if(r==="top")E=_(this.bottom),G=this.bottom-p,Z=E-v,Q=_(t.top)+v,de=t.bottom;else if(r==="bottom")E=_(this.top),Q=t.top,de=_(t.bottom)-v,G=E+v,Z=this.top+p;else if(r==="left")E=_(this.right),O=this.right-p,W=E-v,Y=_(t.left)+v,ye=t.right;else if(r==="right")E=_(this.left),Y=t.left,ye=_(t.right)-v,O=E+v,W=this.left+p;else if(n==="x"){if(r==="center")E=_((t.top+t.bottom)/2+.5);else if(De(r)){const Ee=Object.keys(r)[0],ne=r[Ee];E=_(this.chart.scales[Ee].getPixelForValue(ne))}Q=t.top,de=t.bottom,G=E+v,Z=G+p}else if(n==="y"){if(r==="center")E=_((t.left+t.right)/2);else if(De(r)){const Ee=Object.keys(r)[0],ne=r[Ee];E=_(this.chart.scales[Ee].getPixelForValue(ne))}O=E-v,W=O-p,Y=t.left,ye=t.right}const Le=Te(s.ticks.maxTicksLimit,h),Ie=Math.max(1,Math.ceil(h/Le));for(w=0;w<h;w+=Ie){const Ee=this.getContext(w),ne=o.setContext(Ee),re=a.setContext(Ee),oe=ne.lineWidth,Oe=ne.color,Pe=re.dash||[],me=re.dashOffset,it=ne.tickWidth,lt=ne.tickColor,mt=ne.tickBorderDash||[],Ye=ne.tickBorderDashOffset;k=xI(this,w,l),k!==void 0&&(A=gi(i,k,oe),c?O=W=Y=ye=A:G=Z=Q=de=A,g.push({tx1:O,ty1:G,tx2:W,ty2:Z,x1:Y,y1:Q,x2:ye,y2:de,width:oe,color:Oe,borderDash:Pe,borderDashOffset:me,tickWidth:it,tickColor:lt,tickBorderDash:mt,tickBorderDashOffset:Ye}))}return this._ticksLength=h,this._borderValue=E,g}_computeLabelItems(t){const n=this.axis,i=this.options,{position:s,ticks:o}=i,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=o,p=bs(i.grid),g=p+u,y=h?-u:g,b=-pn(this.labelRotation),v=[];let _,E,w,k,A,O,G,W,Z,Y,Q,ye,de="middle";if(s==="top")O=this.bottom-y,G=this._getXAxisLabelAlignment();else if(s==="bottom")O=this.top+y,G=this._getXAxisLabelAlignment();else if(s==="left"){const Ie=this._getYAxisLabelAlignment(p);G=Ie.textAlign,A=Ie.x}else if(s==="right"){const Ie=this._getYAxisLabelAlignment(p);G=Ie.textAlign,A=Ie.x}else if(n==="x"){if(s==="center")O=(t.top+t.bottom)/2+g;else if(De(s)){const Ie=Object.keys(s)[0],Ee=s[Ie];O=this.chart.scales[Ie].getPixelForValue(Ee)+g}G=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")A=(t.left+t.right)/2-g;else if(De(s)){const Ie=Object.keys(s)[0],Ee=s[Ie];A=this.chart.scales[Ie].getPixelForValue(Ee)}G=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?de="top":l==="end"&&(de="bottom"));const Le=this._getLabelSizes();for(_=0,E=a.length;_<E;++_){w=a[_],k=w.label;const Ie=o.setContext(this.getContext(_));W=this.getPixelForTick(_)+o.labelOffset,Z=this._resolveTickFontOptions(_),Y=Z.lineHeight,Q=rt(k)?k.length:1;const Ee=Q/2,ne=Ie.color,re=Ie.textStrokeColor,oe=Ie.textStrokeWidth;let Oe=G;r?(A=W,G==="inner"&&(_===E-1?Oe=this.options.reverse?"left":"right":_===0?Oe=this.options.reverse?"right":"left":Oe="center"),s==="top"?c==="near"||b!==0?ye=-Q*Y+Y/2:c==="center"?ye=-Le.highest.height/2-Ee*Y+Y:ye=-Le.highest.height+Y/2:c==="near"||b!==0?ye=Y/2:c==="center"?ye=Le.highest.height/2-Ee*Y:ye=Le.highest.height-Q*Y,h&&(ye*=-1),b!==0&&!Ie.showLabelBackdrop&&(A+=Y/2*Math.sin(b))):(O=W,ye=(1-Q)*Y/2);let Pe;if(Ie.showLabelBackdrop){const me=Dt(Ie.backdropPadding),it=Le.heights[_],lt=Le.widths[_];let mt=ye-me.top,Ye=0-me.left;switch(de){case"middle":mt-=it/2;break;case"bottom":mt-=it;break}switch(G){case"center":Ye-=lt/2;break;case"right":Ye-=lt;break}Pe={left:Ye,top:mt,width:lt+me.width,height:it+me.height,color:Ie.backdropColor}}v.push({label:k,font:Z,textOffset:ye,options:{rotation:b,color:ne,strokeColor:re,strokeWidth:oe,textAlign:Oe,textBaseline:de,translation:[A,O],backdrop:Pe}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-pn(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,u;return n==="left"?s?(u=this.right+o,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+o,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:s,width:o,height:r}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,s,o,r),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(o=0,r=s.length;o<r;++o){const l=s[o];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:s}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,p;this.isHorizontal()?(c=gi(t,this.left,r)-r/2,u=gi(t,this.right,a)+a/2,h=p=l):(h=gi(t,this.top,r)-r/2,p=gi(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Jr(i,s);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;Li(i,c,0,u,l,a)}s&&Qr(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const o=It(i.font),r=Dt(i.padding),a=i.align;let l=o.lineHeight/2;n==="bottom"||n==="center"||De(n)?(l+=r.bottom,rt(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:h,rotation:p}=BI(this,l,n,a);Li(t,i.text,0,0,o,{color:i.color,maxWidth:h,rotation:p,textAlign:LI(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=Te(t.grid&&t.grid.z,-1),s=Te(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Bi.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let o,r;for(o=0,r=n.length;o<r;++o){const a=n[o];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return It(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class To{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;$I(n)&&(i=this.register(n));const s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,DI(t,r,i),this.override&&pt.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,s=this.scope;i in n&&delete n[i],s&&i in pt[s]&&(delete pt[s][i],this.override&&delete Oi[i])}}function DI(e,t,n){const i=Qs(Object.create(null),[n?pt.get(n):{},pt.get(t),e.defaults]);pt.set(t,i),e.defaultRoutes&&FI(t,e.defaultRoutes),e.descriptors&&pt.describe(t,e.descriptors)}function FI(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),o=[e].concat(i).join("."),r=t[n].split("."),a=r.pop(),l=r.join(".");pt.route(o,s,l,a)})}function $I(e){return"id"in e&&"defaults"in e}class HI{constructor(){this.controllers=new To(bn,"datasets",!0),this.elements=new To(Vn,"elements"),this.plugins=new To(Object,"plugins"),this.scales=new To(Bi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(s=>{const o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):Xe(s,r=>{const a=i||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,n,i){const s=rc(t);tt(i["before"+s],[],i),n[t](i),tt(i["after"+s],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Sn=new HI;class UI{constructor(){this._init=[]}notify(t,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,n,i);return n==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,n,i,s){s=s||{};for(const o of t){const r=o.plugin,a=r[i],l=[n,s,o.options];if(tt(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){je(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,s=Te(i.options&&i.options.plugins,{}),o=zI(i);return s===!1&&!n?[]:WI(t,o,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),t,"stop"),this._notify(s(i,n),t,"start")}}function zI(e){const t={},n=[],i=Object.keys(Sn.plugins.items);for(let o=0;o<i.length;o++)n.push(Sn.getPlugin(i[o]));const s=e.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];n.indexOf(r)===-1&&(n.push(r),t[r.id]=!0)}return{plugins:n,localIds:t}}function GI(e,t){return!t&&e===!1?null:e===!0?{}:e}function WI(e,{plugins:t,localIds:n},i,s){const o=[],r=e.getContext();for(const a of t){const l=a.id,c=GI(i[l],s);c!==null&&o.push({plugin:a,options:VI(e.config,{plugin:a,local:n[l]},c,r)})}return o}function VI(e,{plugin:t,local:n},i,s){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(i,o);return n&&t.defaults&&r.push(t.defaults),e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gl(e,t){const n=pt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function jI(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function KI(e,t){return e===t?"_index_":"_value_"}function qI(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Rr(e,t){if(e==="x"||e==="y"||e==="r"||(e=t.axis||qI(t.position)||e.length>1&&Rr(e[0].toLowerCase(),t),e))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function YI(e,t){const n=Oi[e.type]||{scales:{}},i=t.scales||{},s=gl(e.type,t),o=Object.create(null);return Object.keys(i).forEach(r=>{const a=i[r];if(!De(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=Rr(r,a),c=KI(l,s),u=n.scales||{};o[r]=Bs(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,l=r.indexAxis||gl(a,t),u=(Oi[a]||{}).scales||{};Object.keys(u).forEach(h=>{const p=jI(h,l),g=r[p+"AxisID"]||p;o[g]=o[g]||Object.create(null),Bs(o[g],[{axis:p},i[g],u[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];Bs(a,[pt.scales[a.type],pt.scale])}),o}function kp(e){const t=e.options||(e.options={});t.plugins=Te(t.plugins,{}),t.scales=YI(e,t)}function Pp(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function XI(e){return e=e||{},e.data=Pp(e.data),kp(e),e}const kh=new Map,Ap=new Set;function Co(e,t){let n=kh.get(e);return n||(n=t(),kh.set(e,n),Ap.add(n)),n}const ys=(e,t,n)=>{const i=ri(t,n);i!==void 0&&e.add(i)};class JI{constructor(t){this._config=XI(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Pp(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),kp(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Co(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Co(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Co(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return Co(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let s=i.get(t);return(!s||n)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,n,i){const{options:s,type:o}=this,r=this._cachedScopes(t,i),a=r.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(h=>ys(l,t,h))),u.forEach(h=>ys(l,s,h)),u.forEach(h=>ys(l,Oi[o]||{},h)),u.forEach(h=>ys(l,pt,h)),u.forEach(h=>ys(l,dl,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Ap.has(n)&&r.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Oi[n]||{},pt.datasets[n]||{},{type:n},pt,dl]}resolveNamedOptions(t,n,i,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Ph(this._resolverCache,t,s);let l=r;if(ZI(r,n)){o.$shared=!1,i=ai(i)?i():i;const c=this.createResolver(t,i,a);l=ss(r,i,c)}for(const c of n)o[c]=l[c];return o}createResolver(t,n,i=[""],s){const{resolver:o}=Ph(this._resolverCache,t,i);return De(n)?ss(o,n,void 0,s):o}}function Ph(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let o=i.get(s);return o||(o={resolver:hc(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,o)),o}const QI=e=>De(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||ai(e[n]),!1);function ZI(e,t){const{isScriptable:n,isIndexable:i}=op(e);for(const s of t){const o=n(s),r=i(s),a=(r||o)&&e[s];if(o&&(ai(a)||QI(a))||r&&rt(a))return!0}return!1}var ek="4.2.1";const tk=["top","bottom","left","right","chartArea"];function Ah(e,t){return e==="top"||e==="bottom"||tk.indexOf(e)===-1&&t==="x"}function Th(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Ch(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),tt(n&&n.onComplete,[e],t)}function nk(e){const t=e.chart,n=t.options.animation;tt(n&&n.onProgress,[e],t)}function Tp(e){return hp()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Jo={},Mh=e=>{const t=Tp(e);return Object.values(Jo).filter(n=>n.canvas===t).pop()};function ik(e,t,n){const i=Object.keys(e);for(const s of i){const o=+s;if(o>=t){const r=e[s];delete e[s],(n>0||o>t)&&(e[o+n]=r)}}}function sk(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}function ok(e){const{xScale:t,yScale:n}=e;if(t&&n)return{left:t.left,right:t.right,top:n.top,bottom:n.bottom}}class Dn{static register(...t){Sn.add(...t),xh()}static unregister(...t){Sn.remove(...t),xh()}constructor(t,n){const i=this.config=new JI(n),s=Tp(t),o=Mh(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||EI(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=lw(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new UI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Iw(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Jo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Nn.listen(this,"complete",Ch),Nn.listen(this,"progress",nk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:s,_aspectRatio:o}=this;return je(t)?n&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Sn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():eh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ju(this.canvas,this.ctx),this}stop(){return Nn.stop(this),this}resize(t,n){Nn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,n,o),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,eh(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),tt(i.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Xe(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,s=Object.keys(i).reduce((r,a)=>(r[a]=!1,r),{});let o=[];n&&(o=o.concat(Object.keys(n).map(r=>{const a=n[r],l=Rr(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Xe(o,r=>{const a=r.options,l=a.id,c=Rr(l,a),u=Te(a.type,r.dtype);(a.position===void 0||Ah(a.position,c)!==Ah(r.dposition))&&(a.position=r.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const p=Sn.getScale(u);h=new p({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,t)}),Xe(s,(r,a)=>{r||delete i[a]}),Xe(i,r=>{Bt.configure(this,r,r.options),Bt.addBox(this,r)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(Th("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,s)=>{n.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const o=n[i];let r=this.getDatasetMeta(i);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=a,r.indexAxis=o.indexAxis||gl(a,this.options),r.order=o.order||0,r.index=i,r.label=""+o.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const l=Sn.getController(a),{datasetElementType:c,dataElementType:u}=pt.datasets[a];Object.assign(l,{dataElementType:Sn.getElement(u),datasetElementType:c&&Sn.getElement(c)}),r.controller=new l(this,i),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Xe(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),p=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(p),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),s||Xe(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Th("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Xe(this.scales,t=>{Bt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!zu(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of n){const r=i==="_removeElements"?-o:o;ik(t,s,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=i(0);for(let o=1;o<n;o++)if(!zu(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bt.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Xe(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ai(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Nn.has(this)?this.attached&&!Nn.running(this)&&Nn.start(this):(this.draw(),Ch({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let s,o;for(s=0,o=n.length;s<o;++s){const r=n[s];(!t||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i=t._clip,s=!i.disabled,o=ok(t)||this.chartArea,r={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Jr(n,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),t.controller.draw(),s&&Qr(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return eo(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,s){const o=nI.modes[n];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let s=i.filter(o=>o&&o._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=ui(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const s=i?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);un(n)?(o.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),r.update(o,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Nn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ju(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Jo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(o,r)=>{n.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Xe(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():r()}unbindEvents(){Xe(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Xe(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const s=i?"set":"remove";let o,r,a,l;for(n==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Pr(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const s=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(n,t),a=i?t:o(t,n);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const o=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:s=[],options:o}=this,r=n,a=this._getActiveElements(t,s,i,r),l=pw(t),c=sk(t,this._lastEvent,i,l);i&&(this._lastEvent=null,tt(o.onHover,[t,a,this],this),l&&tt(o.onClick,[t,a,this],this));const u=!Pr(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(t,n,i,s){if(t.type==="mouseout")return[];if(!i)return n;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}C(Dn,"defaults",pt),C(Dn,"instances",Jo),C(Dn,"overrides",Oi),C(Dn,"registry",Sn),C(Dn,"version",ek),C(Dn,"getChart",Mh);function xh(){return Xe(Dn.instances,e=>e._plugins.invalidate())}function rk(e,t,n){const{startAngle:i,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=t;let c=s/a;e.beginPath(),e.arc(o,r,a,i-c,n+c),l>s?(c=s/l,e.arc(o,r,l,n+c,i-c,!0)):e.arc(o,r,s,n+ft,i-ft),e.closePath(),e.clip()}function ak(e){return uc(e,["outerStart","outerEnd","innerStart","innerEnd"])}function lk(e,t,n,i){const s=ak(e.options.borderRadius),o=(n-t)/2,r=Math.min(o,i*t/2),a=l=>{const c=(n-Math.min(o,l))*i/2;return At(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:At(s.innerStart,0,r),innerEnd:At(s.innerEnd,0,r)}}function $i(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function Nr(e,t,n,i,s,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),p=u>0?u+i+n+c:0;let g=0;const y=s-l;if(i){const Ie=u>0?u-i:0,Ee=h>0?h-i:0,ne=(Ie+Ee)/2,re=ne!==0?y*ne/(ne+i):y;g=(y-re)/2}const b=Math.max(.001,y*h-n/ht)/h,v=(y-b)/2,_=l+v+g,E=s-v-g,{outerStart:w,outerEnd:k,innerStart:A,innerEnd:O}=lk(t,p,h,E-_),G=h-w,W=h-k,Z=_+w/G,Y=E-k/W,Q=p+A,ye=p+O,de=_+A/Q,Le=E-O/ye;if(e.beginPath(),o){const Ie=(Z+Y)/2;if(e.arc(r,a,h,Z,Ie),e.arc(r,a,h,Ie,Y),k>0){const oe=$i(W,Y,r,a);e.arc(oe.x,oe.y,k,Y,E+ft)}const Ee=$i(ye,E,r,a);if(e.lineTo(Ee.x,Ee.y),O>0){const oe=$i(ye,Le,r,a);e.arc(oe.x,oe.y,O,E+ft,Le+Math.PI)}const ne=(E-O/p+(_+A/p))/2;if(e.arc(r,a,p,E-O/p,ne,!0),e.arc(r,a,p,ne,_+A/p,!0),A>0){const oe=$i(Q,de,r,a);e.arc(oe.x,oe.y,A,de+Math.PI,_-ft)}const re=$i(G,_,r,a);if(e.lineTo(re.x,re.y),w>0){const oe=$i(G,Z,r,a);e.arc(oe.x,oe.y,w,_-ft,Z)}}else{e.moveTo(r,a);const Ie=Math.cos(Z)*h+r,Ee=Math.sin(Z)*h+a;e.lineTo(Ie,Ee);const ne=Math.cos(Y)*h+r,re=Math.sin(Y)*h+a;e.lineTo(ne,re)}e.closePath()}function ck(e,t,n,i,s){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){Nr(e,t,n,i,l,s);for(let c=0;c<o;++c)e.fill();isNaN(a)||(l=r+(a%at||at))}return Nr(e,t,n,i,l,s),e.fill(),l}function uk(e,t,n,i,s){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=l.borderAlign==="inner";if(!c)return;h?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(o){Nr(e,t,n,i,p,s);for(let g=0;g<o;++g)e.stroke();isNaN(a)||(p=r+(a%at||at))}h&&rk(e,t,p),o||(Nr(e,t,n,i,p,s),e.stroke())}class Qo extends Vn{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,i){const s=this.getProps(["x","y"],i),{angle:o,distance:r}=qf(s,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=this.options.spacing/2,y=Te(h,l-a)>=at||Zs(o,a,l),b=Hn(r,c+p,u+p);return y&&b}getCenterPoint(t){const{x:n,y:i,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(s+o)/2,h=(r+a+c+l)/2;return{x:n+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:i}=this,s=(n.offset||0)/4,o=(n.spacing||0)/2,r=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>at?Math.floor(i/at):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(ht,i||0)),c=s*l;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,ck(t,this,c,o,r),uk(t,this,c,o,r),t.restore()}}C(Qo,"id","arc"),C(Qo,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),C(Qo,"defaultRoutes",{backgroundColor:"backgroundColor"});function Cp(e,t,n=t){e.lineCap=Te(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Te(n.borderDash,t.borderDash)),e.lineDashOffset=Te(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Te(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Te(n.borderWidth,t.borderWidth),e.strokeStyle=Te(n.borderColor,t.borderColor)}function hk(e,t,n){e.lineTo(n.x,n.y)}function dk(e){return e.stepped?Bw:e.tension||e.cubicInterpolationMode==="monotone"?Dw:hk}function Mp(e,t,n={}){const i=e.length,{start:s=0,end:o=i-1}=n,{start:r,end:a}=t,l=Math.max(s,r),c=Math.min(o,a),u=s<r&&o<r||s>a&&o>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function fk(e,t,n,i){const{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:c}=Mp(s,n,i),u=dk(o);let{move:h=!0,reverse:p}=i||{},g,y,b;for(g=0;g<=c;++g)y=s[(a+(p?c-g:g))%r],!y.skip&&(h?(e.moveTo(y.x,y.y),h=!1):u(e,b,y,p,o.stepped),b=y);return l&&(y=s[(a+(p?c:0))%r],u(e,b,y,p,o.stepped)),!!l}function pk(e,t,n,i){const s=t.points,{count:o,start:r,ilen:a}=Mp(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,p,g,y,b,v,_;const E=k=>(r+(c?a-k:k))%o,w=()=>{b!==v&&(e.lineTo(u,v),e.lineTo(u,b),e.lineTo(u,_))};for(l&&(g=s[E(0)],e.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=s[E(p)],g.skip)continue;const k=g.x,A=g.y,O=k|0;O===y?(A<b?b=A:A>v&&(v=A),u=(h*u+k)/++h):(w(),e.lineTo(k,A),y=O,h=0,b=v=A),_=A}w()}function ml(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?pk:fk}function gk(e){return e.stepped?gE:e.tension||e.cubicInterpolationMode==="monotone"?mE:Si}function mk(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),Cp(e,t.options),e.stroke(s)}function bk(e,t,n,i){const{segments:s,options:o}=t,r=ml(t);for(const a of s)Cp(e,o,a.style),e.beginPath(),r(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const yk=typeof Path2D=="function";function _k(e,t,n,i){yk&&!t.options.segment?mk(e,t,n,i):bk(e,t,n,i)}class Jn extends Vn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;aE(this._points,i,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wE(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,s=t[n],o=this.points,r=mp(this,{property:n,start:s,end:s});if(!r.length)return;const a=[],l=gk(i);let c,u;for(c=0,u=r.length;c<u;++c){const{start:h,end:p}=r[c],g=o[h],y=o[p];if(g===y){a.push(g);continue}const b=Math.abs((s-g[n])/(y[n]-g[n])),v=l(g,y,b,i.stepped);v[n]=t[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(t,n,i){return ml(this)(t,this,n,i)}path(t,n,i){const s=this.segments,o=ml(this);let r=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)r&=o(t,this,a,{start:n,end:n+i-1});return!!r}draw(t,n,i,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),_k(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}C(Jn,"id","line"),C(Jn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),C(Jn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),C(Jn,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Rh(e,t,n,i){const s=e.options,{[n]:o}=e.getProps([n],i);return Math.abs(t-o)<s.radius+s.hitRadius}class Zo extends Vn{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,i){const s=this.options,{x:o,y:r}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(n-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,n){return Rh(this,t,"x",n)}inYRange(t,n){return Rh(this,t,"y",n)}getCenterPoint(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const i=n&&t.borderWidth||0;return(n+i)*2}draw(t,n){const i=this.options;this.skip||i.radius<.1||!eo(this,n,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,fl(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}C(Zo,"id","point"),C(Zo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),C(Zo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function xp(e,t){const{x:n,y:i,base:s,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=r/2,a=Math.min(n,s),l=Math.max(n,s),c=i-h,u=i+h):(h=o/2,a=n-h,l=n+h,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function Qn(e,t,n,i){return e?0:At(t,n,i)}function vk(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,o=sp(i);return{t:Qn(s.top,o.top,0,n),r:Qn(s.right,o.right,0,t),b:Qn(s.bottom,o.bottom,0,n),l:Qn(s.left,o.left,0,t)}}function Sk(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,o=Mi(s),r=Math.min(t,n),a=e.borderSkipped,l=i||De(s);return{topLeft:Qn(!l||a.top||a.left,o.topLeft,0,r),topRight:Qn(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Qn(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Qn(!l||a.bottom||a.right,o.bottomRight,0,r)}}function wk(e){const t=xp(e),n=t.right-t.left,i=t.bottom-t.top,s=vk(e,n/2,i/2),o=Sk(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Ba(e,t,n,i){const s=t===null,o=n===null,a=e&&!(s&&o)&&xp(e,i);return a&&(s||Hn(t,a.left,a.right))&&(o||Hn(n,a.top,a.bottom))}function Ek(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Ik(e,t){e.rect(t.x,t.y,t.w,t.h)}function Da(e,t,n={}){const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-i,r=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+o,h:e.h+r,radius:e.radius}}class er extends Vn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:o,outer:r}=wk(this),a=Ek(r.radius)?to:Ik;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,Da(r,n,o)),t.clip(),a(t,Da(o,-n,r)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Da(o,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,i){return Ba(this,t,n,i)}inXRange(t,n){return Ba(this,t,null,n)}inYRange(t,n){return Ba(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(n+s)/2:n,y:o?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}C(er,"id","bar"),C(er,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),C(er,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var kk=Object.freeze({__proto__:null,ArcElement:Qo,LineElement:Jn,PointElement:Zo,BarElement:er});const bl=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Nh=bl.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function Rp(e){return bl[e%bl.length]}function Np(e){return Nh[e%Nh.length]}function Pk(e,t){return e.borderColor=Rp(t),e.backgroundColor=Np(t),++t}function Ak(e,t){return e.backgroundColor=e.data.map(()=>Rp(t++)),t}function Tk(e,t){return e.backgroundColor=e.data.map(()=>Np(t++)),t}function Ck(e){let t=0;return(n,i)=>{const s=e.getDatasetMeta(i).controller;s instanceof Pi?t=Ak(n,t):s instanceof Hs?t=Tk(n,t):s&&(t=Pk(n,t))}}function Oh(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function Mk(e){return e&&(e.borderColor||e.backgroundColor)}var xk={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:s}=e.config,{elements:o}=s;if(!n.forceOverride&&(Oh(i)||Mk(s)||o&&Oh(o)))return;const r=Ck(e);i.forEach(r)}};function Rk(e,t,n,i,s){const o=s.samples||i;if(o>=n)return e.slice(t,t+n);const r=[],a=(n-2)/(o-2);let l=0;const c=t+n-1;let u=t,h,p,g,y,b;for(r[l++]=e[u],h=0;h<o-2;h++){let v=0,_=0,E;const w=Math.floor((h+1)*a)+1+t,k=Math.min(Math.floor((h+2)*a)+1,n)+t,A=k-w;for(E=w;E<k;E++)v+=e[E].x,_+=e[E].y;v/=A,_/=A;const O=Math.floor(h*a)+1+t,G=Math.min(Math.floor((h+1)*a)+1,n)+t,{x:W,y:Z}=e[u];for(g=y=-1,E=O;E<G;E++)y=.5*Math.abs((W-v)*(e[E].y-Z)-(W-e[E].x)*(_-Z)),y>g&&(g=y,p=e[E],b=E);r[l++]=p,u=b}return r[l++]=e[c],r}function Nk(e,t,n,i){let s=0,o=0,r,a,l,c,u,h,p,g,y,b;const v=[],_=t+n-1,E=e[t].x,k=e[_].x-E;for(r=t;r<t+n;++r){a=e[r],l=(a.x-E)/k*i,c=a.y;const A=l|0;if(A===u)c<y?(y=c,h=r):c>b&&(b=c,p=r),s=(o*s+a.x)/++o;else{const O=r-1;if(!je(h)&&!je(p)){const G=Math.min(h,p),W=Math.max(h,p);G!==g&&G!==O&&v.push({...e[G],x:s}),W!==g&&W!==O&&v.push({...e[W],x:s})}r>0&&O!==g&&v.push(e[O]),v.push(a),u=A,o=0,y=b=c,h=p=g=r}}return v}function Op(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Lh(e){e.data.datasets.forEach(t=>{Op(t)})}function Ok(e,t){const n=t.length;let i=0,s;const{iScale:o}=e,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(i=At(Un(t,o.axis,r).lo,0,n-1)),c?s=At(Un(t,o.axis,a).hi+1,i,n)-i:s=n-i,{start:i,count:s}}var Lk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){Lh(e);return}const i=e.width;e.data.datasets.forEach((s,o)=>{const{_data:r,indexAxis:a}=s,l=e.getDatasetMeta(o),c=r||s.data;if(Is([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=e.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:h,count:p}=Ok(l,c);const g=n.threshold||4*i;if(p<=g){Op(s);return}je(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let y;switch(n.algorithm){case"lttb":y=Rk(c,h,p,i,n);break;case"min-max":y=Nk(c,h,p,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=y})},destroy(e){Lh(e)}};function Bk(e,t,n){const i=e.segments,s=e.points,o=t.points,r=[];for(const a of i){let{start:l,end:c}=a;c=mc(l,c,s);const u=yl(n,s[l],s[c],a.loop);if(!t.segments){r.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=mp(t,u);for(const p of h){const g=yl(n,o[p.start],o[p.end],p.loop),y=gp(a,s,g);for(const b of y)r.push({source:b,target:p,start:{[n]:Bh(u,g,"start",Math.max)},end:{[n]:Bh(u,g,"end",Math.min)}})}}return r}function yl(e,t,n,i){if(i)return;let s=t[e],o=n[e];return e==="angle"&&(s=tn(s),o=tn(o)),{property:e,start:s,end:o}}function Dk(e,t){const{x:n=null,y:i=null}=e||{},s=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=mc(r,a,s);const l=s[r],c=s[a];i!==null?(o.push({x:l.x,y:i}),o.push({x:c.x,y:i})):n!==null&&(o.push({x:n,y:l.y}),o.push({x:n,y:c.y}))}),o}function mc(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Bh(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function Lp(e,t){let n=[],i=!1;return rt(e)?(i=!0,n=e):n=Dk(e,t),n.length?new Jn({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Dh(e){return e&&e.fill!==!1}function Fk(e,t,n){let s=e[t].fill;const o=[t];let r;if(!n)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!dt(s))return s;if(r=e[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function $k(e,t,n){const i=Gk(e);if(De(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return dt(s)&&Math.floor(s)===s?Hk(i[0],t,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Hk(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function Uk(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:De(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function zk(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:De(e)?i=e.value:i=t.getBaseValue(),i}function Gk(e){const t=e.options,n=t.fill;let i=Te(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Wk(e){const{scale:t,index:n,line:i}=e,s=[],o=i.segments,r=i.points,a=Vk(t,n);a.push(Lp({x:null,y:t.bottom},i));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)jk(s,r[u],a)}return new Jn({points:s,options:{}})}function Vk(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const o=i[s];if(o.index===t)break;o.hidden||n.unshift(o.dataset)}return n}function jk(e,t,n){const i=[];for(let s=0;s<n.length;s++){const o=n[s],{first:r,last:a,point:l}=Kk(o,t,"x");if(!(!l||r&&a)){if(r)i.unshift(l);else if(e.push(l),!a)break}}e.push(...i)}function Kk(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const s=i[n],o=e.segments,r=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],h=r[u.start][n],p=r[u.end][n];if(Hn(s,h,p)){a=s===h,l=s===p;break}}return{first:a,last:l,point:i}}class Bp{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:s,y:o,radius:r}=this;return n=n||{start:0,end:at},t.arc(s,o,r,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:s}=this,o=t.angle;return{x:n+Math.cos(o)*s,y:i+Math.sin(o)*s,angle:o}}}function qk(e){const{chart:t,fill:n,line:i}=e;if(dt(n))return Yk(t,n);if(n==="stack")return Wk(e);if(n==="shape")return!0;const s=Xk(e);return s instanceof Bp?s:Lp(s,i)}function Yk(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Xk(e){return(e.scale||{}).getPointPositionForValue?Qk(e):Jk(e)}function Jk(e){const{scale:t={},fill:n}=e,i=Uk(n,t);if(dt(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function Qk(e){const{scale:t,fill:n}=e,i=t.options,s=t.getLabels().length,o=i.reverse?t.max:t.min,r=zk(n,t,o),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,o);return new Bp({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,r));return a}function Fa(e,t,n){const i=qk(t),{line:s,scale:o,axis:r}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&s.points.length&&(Jr(e,n),Zk(e,{line:s,target:i,above:u,below:h,area:n,scale:o,axis:r}),Qr(e))}function Zk(e,t){const{line:n,target:i,above:s,below:o,area:r,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),l==="x"&&o!==s&&(Fh(e,i,r.top),$h(e,{line:n,target:i,color:s,scale:a,property:l}),e.restore(),e.save(),Fh(e,i,r.bottom)),$h(e,{line:n,target:i,color:o,scale:a,property:l}),e.restore()}function Fh(e,t,n){const{segments:i,points:s}=t;let o=!0,r=!1;e.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],h=s[mc(l,c,s)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,n),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function $h(e,t){const{line:n,target:i,property:s,color:o,scale:r}=t,a=Bk(n,i,s);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:p=o}={}}=l,g=i!==!0;e.save(),e.fillStyle=p,eP(e,r,g&&yl(s,u,h)),e.beginPath();const y=!!n.pathSegment(e,l);let b;if(g){y?e.closePath():Hh(e,i,h,s);const v=!!i.pathSegment(e,c,{move:y,reverse:!0});b=y&&v,b||Hh(e,i,u,s)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function eP(e,t,n){const{top:i,bottom:s}=t.chart.chartArea,{property:o,start:r,end:a}=n||{};o==="x"&&(e.beginPath(),e.rect(r,i,a-r,s-i),e.clip())}function Hh(e,t,n,i){const s=t.interpolate(n,i);s&&e.lineTo(s.x,s.y)}var tP={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,s=[];let o,r,a,l;for(r=0;r<i;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Jn&&(l={visible:e.isDatasetVisible(r),index:r,fill:$k(a,r,i),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<i;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=Fk(s,r,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=s.length-1;r>=0;--r){const a=s[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),i&&a.fill&&Fa(e.ctx,a,o))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const o=i[s].$filler;Dh(o)&&Fa(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!Dh(i)||n.drawTime!=="beforeDatasetDraw"||Fa(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Uh=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},nP=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class zh extends Vn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=tt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=It(i.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Uh(i,o);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=t;o.textAlign="left",o.textBaseline="middle";let p=-1,g=-u;return this.legendItems.forEach((y,b)=>{const v=i+n/2+o.measureText(y.text).width;(b===0||c[c.length-1]+v+2*a>r)&&(h+=u,c[c.length-(b>0?0:1)]=0,g+=u,p++),l[b]={left:0,top:g,row:p,width:v,height:s},c[c.length-1]+=v+a}),h}_fitCols(t,n,i,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-t;let h=a,p=0,g=0,y=0,b=0;return this.legendItems.forEach((v,_)=>{const{itemWidth:E,itemHeight:w}=iP(i,n,o,v,s);_>0&&g+w+2*a>u&&(h+=p+a,c.push({width:p,height:g}),y+=p+a,b++,p=g=0),l[_]={left:y,top:g,col:b,width:E,height:w},p=Math.max(p,E),g+=w+a}),h+=p,c.push({width:p,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:o}}=this,r=Zi(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=xt(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=xt(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=xt(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=xt(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Jr(t,this),this._draw(),Qr(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:s}=this,{align:o,labels:r}=t,a=pt.color,l=Zi(t.rtl,this.left,this.width),c=It(r.font),{padding:u}=r,h=c.size,p=h/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:y,boxHeight:b,itemHeight:v}=Uh(r,h),_=function(O,G,W){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;s.save();const Z=Te(W.lineWidth,1);if(s.fillStyle=Te(W.fillStyle,a),s.lineCap=Te(W.lineCap,"butt"),s.lineDashOffset=Te(W.lineDashOffset,0),s.lineJoin=Te(W.lineJoin,"miter"),s.lineWidth=Z,s.strokeStyle=Te(W.strokeStyle,a),s.setLineDash(Te(W.lineDash,[])),r.usePointStyle){const Y={radius:b*Math.SQRT2/2,pointStyle:W.pointStyle,rotation:W.rotation,borderWidth:Z},Q=l.xPlus(O,y/2),ye=G+p;ip(s,Y,Q,ye,r.pointStyleWidth&&y)}else{const Y=G+Math.max((h-b)/2,0),Q=l.leftForLtr(O,y),ye=Mi(W.borderRadius);s.beginPath(),Object.values(ye).some(de=>de!==0)?to(s,{x:Q,y:Y,w:y,h:b,radius:ye}):s.rect(Q,Y,y,b),s.fill(),Z!==0&&s.stroke()}s.restore()},E=function(O,G,W){Li(s,W.text,O,G+v/2,c,{strikethrough:W.hidden,textAlign:l.textAlign(W.textAlign)})},w=this.isHorizontal(),k=this._computeTitleHeight();w?g={x:xt(o,this.left+u,this.right-i[0]),y:this.top+u+k,line:0}:g={x:this.left+u,y:xt(o,this.top+k+u,this.bottom-n[0].height),line:0},dp(this.ctx,t.textDirection);const A=v+u;this.legendItems.forEach((O,G)=>{s.strokeStyle=O.fontColor,s.fillStyle=O.fontColor;const W=s.measureText(O.text).width,Z=l.textAlign(O.textAlign||(O.textAlign=r.textAlign)),Y=y+p+W;let Q=g.x,ye=g.y;l.setWidth(this.width),w?G>0&&Q+Y+u>this.right&&(ye=g.y+=A,g.line++,Q=g.x=xt(o,this.left+u,this.right-i[g.line])):G>0&&ye+A>this.bottom&&(Q=g.x=Q+n[g.line].width+u,g.line++,ye=g.y=xt(o,this.top+k+u,this.bottom-n[g.line].height));const de=l.x(Q);if(_(de,ye,O),Q=kw(Z,Q+y+p,w?Q+Y:this.right,t.rtl),E(l.x(Q),ye,O),w)g.x+=Y+u;else if(typeof O.text!="string"){const Le=c.lineHeight;g.y+=Dp(O,Le)}else g.y+=A}),fp(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=It(n.font),s=Dt(n.padding);if(!n.display)return;const o=Zi(t.rtl,this.left,this.width),r=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,h=xt(t.align,h,this.right-p);else{const y=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);u=c+xt(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const g=xt(a,h,h+p);r.textAlign=o.textAlign(cc(a)),r.textBaseline="middle",r.strokeStyle=n.color,r.fillStyle=n.color,r.font=i.string,Li(r,n.text,g,u,i)}_computeTitleHeight(){const t=this.options.title,n=It(t.font),i=Dt(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,s,o;if(Hn(t,this.left,this.right)&&Hn(n,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(s=o[i],Hn(t,s.left,s.left+s.width)&&Hn(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!rP(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=nP(s,i);s&&!o&&tt(n.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!o&&tt(n.onHover,[t,i,this],this)}else i&&tt(n.onClick,[t,i,this],this)}}function iP(e,t,n,i,s){const o=sP(i,e,t,n),r=oP(s,i,t.lineHeight);return{itemWidth:o,itemHeight:r}}function sP(e,t,n,i){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),t+n.size/2+i.measureText(s).width}function oP(e,t,n){let i=e;return typeof t.text!="string"&&(i=Dp(t,n)),i}function Dp(e,t){const n=e.text?e.text.length+.5:0;return t*n}function rP(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var aP={id:"legend",_element:zh,start(e,t,n){const i=e.legend=new zh({ctx:e.ctx,options:n,chart:e});Bt.configure(e,i,n),Bt.addBox(e,i)},stop(e){Bt.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Bt.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Dt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class bc extends Vn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=rt(i.text)?i.text.length:1;this._padding=Dt(i.padding);const o=s*It(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:s,right:o,options:r}=this,a=r.align;let l=0,c,u,h;return this.isHorizontal()?(u=xt(a,i,o),h=n+t,c=o-i):(r.position==="left"?(u=i+t,h=xt(a,s,n),l=ht*-.5):(u=o-t,h=xt(a,n,s),l=ht*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=It(n.font),o=i.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Li(t,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:cc(n.align),textBaseline:"middle",translation:[r,a]})}}function lP(e,t){const n=new bc({ctx:e.ctx,options:t,chart:e});Bt.configure(e,n,t),Bt.addBox(e,n),e.titleBlock=n}var cP={id:"title",_element:bc,start(e,t,n){lP(e,n)},stop(e){const t=e.titleBlock;Bt.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Bt.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mo=new WeakMap;var uP={id:"subtitle",start(e,t,n){const i=new bc({ctx:e.ctx,options:n,chart:e});Bt.configure(e,i,n),Bt.addBox(e,i),Mo.set(e,i)},stop(e){Bt.removeBox(e,Mo.get(e)),Mo.delete(e)},beforeUpdate(e,t,n){const i=Mo.get(e);Bt.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ps={average(e){if(!e.length)return!1;let t,n,i=0,s=0,o=0;for(t=0,n=e.length;t<n;++t){const r=e[t].element;if(r&&r.hasValue()){const a=r.tooltipPosition();i+=a.x,s+=a.y,++o}}return{x:i/o,y:s/o}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){const l=e[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=hl(t,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function vn(e,t){return t&&(rt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function On(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function hP(e,t){const{element:n,datasetIndex:i,index:s}=t,o=e.getDatasetMeta(i).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:e,label:r,parsed:o.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Gh(e,t){const n=e.chart.ctx,{body:i,footer:s,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=It(t.bodyFont),c=It(t.titleFont),u=It(t.footerFont),h=o.length,p=s.length,g=i.length,y=Dt(t.padding);let b=y.height,v=0,_=i.reduce((k,A)=>k+A.before.length+A.lines.length+A.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,h&&(b+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),_){const k=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=g*k+(_-g)*l.lineHeight+(_-1)*t.bodySpacing}p&&(b+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let E=0;const w=function(k){v=Math.max(v,n.measureText(k).width+E)};return n.save(),n.font=c.string,Xe(e.title,w),n.font=l.string,Xe(e.beforeBody.concat(e.afterBody),w),E=t.displayColors?r+2+t.boxPadding:0,Xe(i,k=>{Xe(k.before,w),Xe(k.lines,w),Xe(k.after,w)}),E=0,n.font=u.string,Xe(e.footer,w),n.restore(),v+=y.width,{width:v,height:b}}function dP(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function fP(e,t,n,i){const{x:s,width:o}=i,r=n.caretSize+n.caretPadding;if(e==="left"&&s+o+r>t.width||e==="right"&&s-o-r<0)return!0}function pP(e,t,n,i){const{x:s,width:o}=n,{width:r,chartArea:{left:a,right:l}}=e;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),fP(c,e,t,n)&&(c="center"),c}function Wh(e,t,n){const i=n.yAlign||t.yAlign||dP(e,n);return{xAlign:n.xAlign||t.xAlign||pP(e,t,n,i),yAlign:i}}function gP(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function mP(e,t,n){let{y:i,height:s}=e;return t==="top"?i+=n:t==="bottom"?i-=s+n:i-=s/2,i}function Vh(e,t,n,i){const{caretSize:s,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=n,c=s+o,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:g}=Mi(r);let y=gP(t,a);const b=mP(t,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+s:a==="right"&&(y+=Math.max(h,g)+s),{x:At(y,0,i.width-t.width),y:At(b,0,i.height-t.height)}}function xo(e,t,n){const i=Dt(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function jh(e){return vn([],On(e))}function bP(e,t,n){return ui(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Kh(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Fp={beforeTitle:xn,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:xn,beforeBody:xn,beforeLabel:xn,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return je(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:xn,afterBody:xn,beforeFooter:xn,footer:xn,afterFooter:xn};function Vt(e,t,n,i){const s=e[t].call(n,i);return typeof s>"u"?Fp[t].call(n,i):s}class _l extends Vn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,o=new bp(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=bP(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,s=Vt(i,"beforeTitle",this,t),o=Vt(i,"title",this,t),r=Vt(i,"afterTitle",this,t);let a=[];return a=vn(a,On(s)),a=vn(a,On(o)),a=vn(a,On(r)),a}getBeforeBody(t,n){return jh(Vt(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,s=[];return Xe(t,o=>{const r={before:[],lines:[],after:[]},a=Kh(i,o);vn(r.before,On(Vt(a,"beforeLabel",this,o))),vn(r.lines,Vt(a,"label",this,o)),vn(r.after,On(Vt(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,n){return jh(Vt(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,s=Vt(i,"beforeFooter",this,t),o=Vt(i,"footer",this,t),r=Vt(i,"afterFooter",this,t);let a=[];return a=vn(a,On(s)),a=vn(a,On(o)),a=vn(a,On(r)),a}_createItems(t){const n=this._active,i=this.chart.data,s=[],o=[],r=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(hP(this.chart,n[l]));return t.filter&&(a=a.filter((u,h,p)=>t.filter(u,h,p,i))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,i))),Xe(a,u=>{const h=Kh(t.callbacks,u);s.push(Vt(h,"labelColor",this,u)),o.push(Vt(h,"labelPointStyle",this,u)),r.push(Vt(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,n){const i=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=Ps[i.position].call(this,s,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const l=this._size=Gh(this,i),c=Object.assign({},a,l),u=Wh(this.chart,i,c),h=Vh(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,s){const o=this.getCaretPosition(t,i,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(t,n,i){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Mi(a),{x:p,y:g}=t,{width:y,height:b}=n;let v,_,E,w,k,A;return o==="center"?(k=g+b/2,s==="left"?(v=p,_=v-r,w=k+r,A=k-r):(v=p+y,_=v+r,w=k-r,A=k+r),E=v):(s==="left"?_=p+Math.max(l,u)+r:s==="right"?_=p+y-Math.max(c,h)-r:_=this.caretX,o==="top"?(w=g,k=w-r,v=_-r,E=_+r):(w=g+b,k=w+r,v=_+r,E=_-r),A=w),{x1:v,x2:_,x3:E,y1:w,y2:k,y3:A}}drawTitle(t,n,i){const s=this.title,o=s.length;let r,a,l;if(o){const c=Zi(i.rtl,this.x,this.width);for(t.x=xo(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",r=It(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=r.string,l=0;l<o;++l)n.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,n,i,s,o){const r=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c,boxPadding:u}=o,h=It(o.bodyFont),p=xo(this,"left",o),g=s.x(p),y=l<h.lineHeight?(h.lineHeight-l)/2:0,b=n.y+y;if(o.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(g,c)+c/2,E=b+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,fl(t,v,_,E),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,fl(t,v,_,E)}else{t.lineWidth=De(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const v=s.leftForLtr(g,c-u),_=s.leftForLtr(s.xPlus(g,1),c-u-2),E=Mi(r.borderRadius);Object.values(E).some(w=>w!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,to(t,{x:v,y:b,w:c,h:l,radius:E}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),to(t,{x:_,y:b+1,w:c-2,h:l-2,radius:E}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(v,b,c,l),t.strokeRect(v,b,c,l),t.fillStyle=r.backgroundColor,t.fillRect(_,b+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=It(i.bodyFont);let p=h.lineHeight,g=0;const y=Zi(i.rtl,this.x,this.width),b=function(W){n.fillText(W,y.x(t.x+g),t.y+p/2),t.y+=p+o},v=y.textAlign(r);let _,E,w,k,A,O,G;for(n.textAlign=r,n.textBaseline="middle",n.font=h.string,t.x=xo(this,v,i),n.fillStyle=i.bodyColor,Xe(this.beforeBody,b),g=a&&v!=="right"?r==="center"?c/2+u:c+2+u:0,k=0,O=s.length;k<O;++k){for(_=s[k],E=this.labelTextColors[k],n.fillStyle=E,Xe(_.before,b),w=_.lines,a&&w.length&&(this._drawColorBox(n,t,k,y,i),p=Math.max(h.lineHeight,l)),A=0,G=w.length;A<G;++A)b(w[A]),p=h.lineHeight;Xe(_.after,b)}g=0,p=h.lineHeight,Xe(this.afterBody,b),t.y-=o}drawFooter(t,n,i){const s=this.footer,o=s.length;let r,a;if(o){const l=Zi(i.rtl,this.x,this.width);for(t.x=xo(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",r=It(i.footerFont),n.fillStyle=i.footerColor,n.font=r.string,a=0;a<o;++a)n.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i.footerSpacing}}drawBackground(t,n,i,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:u}=i,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:y}=Mi(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),r==="top"&&this.drawCaret(t,n,i,s),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),r==="center"&&o==="right"&&this.drawCaret(t,n,i,s),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),r==="bottom"&&this.drawCaret(t,n,i,s),n.lineTo(a+g,l+u),n.quadraticCurveTo(a,l+u,a,l+u-g),r==="center"&&o==="left"&&this.drawCaret(t,n,i,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const r=Ps[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=Gh(this,t),l=Object.assign({},r,this._size),c=Wh(n,t,l),u=Vh(t,l,c,n);(s._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=Dt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,n),dp(t,n.textDirection),o.y+=r.top,this.drawTitle(o,t,n),this.drawBody(o,t,n),this.drawFooter(o,t,n),fp(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Pr(i,s),r=this._positionChanged(s,n);(o||r)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(t,o,n,i),a=this._positionChanged(r,t),l=n||!Pr(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,i,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return n;const r=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(t,n){const{caretX:i,caretY:s,options:o}=this,r=Ps[o.position].call(this,t,n);return r!==!1&&(i!==r.x||s!==r.y)}}C(_l,"positioners",Ps);var yP={id:"tooltip",_element:_l,positioners:Ps,afterInit(e,t,n){n&&(e.tooltip=new _l({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Fp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},_P=Object.freeze({__proto__:null,Colors:xk,Decimation:Lk,Filler:tP,Legend:aP,SubTitle:uP,Title:cP,Tooltip:yP});const vP=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function SP(e,t,n,i){const s=e.indexOf(t);if(s===-1)return vP(e,t,n,i);const o=e.lastIndexOf(t);return s!==o?n:s}const wP=(e,t)=>e===null?null:At(Math.round(e),0,t);function qh(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class vl extends Bi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:o}of n)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(je(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:SP(i,t,Te(n,t),this._addedLabels),wP(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=t===0&&n===o.length-1?o:o.slice(t,n+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=t;r<=n;r++)s.push({value:r});return s}getLabelForValue(t){return qh.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}C(vl,"id","category"),C(vl,"defaults",{ticks:{callback:qh}});function EP(e,t){const n=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:p}=e,g=o||1,y=u-1,{min:b,max:v}=t,_=!je(r),E=!je(a),w=!je(c),k=(v-b)/(h+1);let A=Wu((v-b)/y/g)*g,O,G,W,Z;if(A<1e-14&&!_&&!E)return[{value:b},{value:v}];Z=Math.ceil(v/A)-Math.floor(b/A),Z>y&&(A=Wu(Z*A/y/g)*g),je(l)||(O=Math.pow(10,l),A=Math.ceil(A*O)/O),s==="ticks"?(G=Math.floor(b/A)*A,W=Math.ceil(v/A)*A):(G=b,W=v),_&&E&&o&&yw((a-r)/o,A/1e3)?(Z=Math.round(Math.min((a-r)/A,u)),A=(a-r)/Z,G=r,W=a):w?(G=_?r:G,W=E?a:W,Z=c-1,A=(W-G)/Z):(Z=(W-G)/A,Ds(Z,Math.round(Z),A/1e3)?Z=Math.round(Z):Z=Math.ceil(Z));const Y=Math.max(Vu(A),Vu(G));O=Math.pow(10,je(l)?Y:l),G=Math.round(G*O)/O,W=Math.round(W*O)/O;let Q=0;for(_&&(p&&G!==r?(n.push({value:r}),G<r&&Q++,Ds(Math.round((G+Q*A)*O)/O,r,Yh(r,k,e))&&Q++):G<r&&Q++);Q<Z;++Q)n.push({value:Math.round((G+Q*A)*O)/O});return E&&p&&W!==a?n.length&&Ds(n[n.length-1].value,a,Yh(a,k,e))?n[n.length-1].value=a:n.push({value:a}):(!E||W===a)&&n.push({value:W}),n}function Yh(e,t,{horizontal:n,minRotation:i}){const s=pn(i),o=(n?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class Or extends Bi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return je(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=n?s:l,a=l=>o=i?o:l;if(t){const l=Tn(s),c=Tn(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,r=EP(s,o);return t.bounds==="ticks"&&Kf(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-n)/Math.max(t.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return lo(t,this.chart.options.locale,this.options.ticks.format)}}class Sl extends Or{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=dt(t)?t:0,this.max=dt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=pn(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}C(Sl,"id","linear"),C(Sl,"defaults",{ticks:{callback:Xr.formatters.numeric}});const io=e=>Math.floor(Xn(e)),bi=(e,t)=>Math.pow(10,io(e)+t);function Xh(e){return e/Math.pow(10,io(e))===1}function Jh(e,t,n){const i=Math.pow(10,n),s=Math.floor(e/i);return Math.ceil(t/i)-s}function IP(e,t){const n=t-e;let i=io(n);for(;Jh(e,t,i)>10;)i++;for(;Jh(e,t,i)<10;)i--;return Math.min(i,io(e))}function kP(e,{min:t,max:n}){t=Qt(e.min,t);const i=[],s=io(t);let o=IP(t,n),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((t-l)*r)/r,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,o)),p=Qt(e.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;p<n;)i.push({value:p,major:Xh(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),p=Math.round((l+u+h*Math.pow(10,o))*r)/r;const g=Qt(e.max,p);return i.push({value:g,major:Xh(g),significand:h}),i}class wl extends Bi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=Or.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return dt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=dt(t)?Math.max(0,t):null,this.max=dt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!dt(this._userMin)&&(this.min=t===bi(this.min,0)?bi(this.min,-1):bi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const o=a=>i=t?i:a,r=a=>s=n?s:a;i===s&&(i<=0?(o(1),r(10)):(o(bi(i,-1)),r(bi(s,1)))),i<=0&&o(bi(s,-1)),s<=0&&r(bi(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=kP(n,this);return t.bounds==="ticks"&&Kf(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":lo(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Xn(t),this._valueRange=Xn(this.max)-Xn(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Xn(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}C(wl,"id","logarithmic"),C(wl,"defaults",{ticks:{callback:Xr.formatters.logarithmic,major:{enabled:!0}}});function El(e){const t=e.ticks;if(t.display&&e.display){const n=Dt(t.backdropPadding);return Te(t.font&&t.font.size,pt.font.size)+n.height}return 0}function PP(e,t,n){return n=rt(n)?n:[n],{w:Lw(e,t.string,n),h:n.length*t.lineHeight}}function Qh(e,t,n,i,s){return e===i||e===s?{start:t-n/2,end:t+n/2}:e<i||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function AP(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],s=[],o=e._pointLabels.length,r=e.options.pointLabels,a=r.centerPointLabels?ht/o:0;for(let l=0;l<o;l++){const c=r.setContext(e.getPointLabelContext(l));s[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+s[l],a),h=It(c.font),p=PP(e.ctx,h,e._pointLabels[l]);i[l]=p;const g=tn(e.getIndexAngle(l)+a),y=Math.round(ac(g)),b=Qh(y,u.x,p.w,0,180),v=Qh(y,u.y,p.h,90,270);TP(n,t,g,b,v)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=CP(e,i,s)}function TP(e,t,n,i,s){const o=Math.abs(Math.sin(n)),r=Math.abs(Math.cos(n));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/o,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/r,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function CP(e,t,n){const i=[],s=e._pointLabels.length,o=e.options,r=El(o)/2,a=e.drawingArea,l=o.pointLabels.centerPointLabels?ht/s:0;for(let c=0;c<s;c++){const u=e.getPointPosition(c,a+r+n[c],l),h=Math.round(ac(tn(u.angle+ft))),p=t[c],g=RP(u.y,p.h,h),y=MP(h),b=xP(u.x,p.w,y);i.push({x:u.x,y:g,textAlign:y,left:b,top:g,right:b+p.w,bottom:g+p.h})}return i}function MP(e){return e===0||e===180?"center":e<180?"left":"right"}function xP(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function RP(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function NP(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let s=t-1;s>=0;s--){const o=i.setContext(e.getPointLabelContext(s)),r=It(o.font),{x:a,y:l,textAlign:c,left:u,top:h,right:p,bottom:g}=e._pointLabelItems[s],{backdropColor:y}=o;if(!je(y)){const b=Mi(o.borderRadius),v=Dt(o.backdropPadding);n.fillStyle=y;const _=u-v.left,E=h-v.top,w=p-u+v.width,k=g-h+v.height;Object.values(b).some(A=>A!==0)?(n.beginPath(),to(n,{x:_,y:E,w,h:k,radius:b}),n.fill()):n.fillRect(_,E,w,k)}Li(n,e._pointLabels[s],a,l+r.lineHeight/2,r,{color:o.color,textAlign:c,textBaseline:"middle"})}}function $p(e,t,n,i){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,at);else{let o=e.getPointPosition(0,t);s.moveTo(o.x,o.y);for(let r=1;r<i;r++)o=e.getPointPosition(r,t),s.lineTo(o.x,o.y)}}function OP(e,t,n,i,s){const o=e.ctx,r=t.circular,{color:a,lineWidth:l}=t;!r&&!i||!a||!l||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),$p(e,n,r,i),o.closePath(),o.stroke(),o.restore())}function LP(e,t,n){return ui(e,{label:n,index:t,type:"pointLabel"})}class As extends Or{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Dt(El(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=dt(t)&&!isNaN(t)?t:0,this.max=dt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/El(this.options))}generateTickLabels(t){Or.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const s=tt(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?AP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,s){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,s))}getIndexAngle(t){const n=at/(this._pointLabels.length||1),i=this.options.startAngle||0;return tn(t*n+pn(i))}getDistanceFromCenterForValue(t){if(je(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(je(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return LP(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const s=this.getIndexAngle(t)-ft+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:s,bottom:o}=this._pointLabelItems[t];return{left:n,top:i,right:s,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),$p(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:s,border:o}=n,r=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&NP(this,r),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const p=this.getContext(h),g=s.setContext(p),y=o.setContext(p);OP(this,g,l,r,y)}}),i.display){for(t.save(),a=r-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:p}=u;!p||!h||(t.lineWidth=p,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=It(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=Dt(c.backdropPadding);t.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}Li(t,a.label,0,-o,u,{color:c.color})}),t.restore()}drawTitle(){}}C(As,"id","radialLinear"),C(As,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Xr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),C(As,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),C(As,"descriptors",{angleLines:{_fallback:"grid"}});const ea={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kt=Object.keys(ea);function BP(e,t){return e-t}function Zh(e,t){if(je(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:o}=e._parseOpts;let r=t;return typeof i=="function"&&(r=i(r)),dt(r)||(r=typeof i=="string"?n.parse(r,i):n.parse(r)),r===null?null:(s&&(r=s==="week"&&(is(o)||o===!0)?n.startOf(r,"isoWeek",o):n.startOf(r,s)),+r)}function ed(e,t,n,i){const s=Kt.length;for(let o=Kt.indexOf(e);o<s-1;++o){const r=ea[Kt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((n-t)/(a*r.size))<=i)return Kt[o]}return Kt[s-1]}function DP(e,t,n,i,s){for(let o=Kt.length-1;o>=Kt.indexOf(n);o--){const r=Kt[o];if(ea[r].common&&e._adapter.diff(s,i,r)>=t-1)return r}return Kt[n?Kt.indexOf(n):0]}function FP(e){for(let t=Kt.indexOf(e)+1,n=Kt.length;t<n;++t)if(ea[Kt[t]].common)return Kt[t]}function td(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:s}=lc(n,t),o=n[i]>=t?n[i]:n[s];e[o]=!0}}function $P(e,t,n,i){const s=e._adapter,o=+s.startOf(t[0].value,i),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}function nd(e,t,n){const i=[],s={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,i.push({value:a,major:!1});return o===0||!n?i:$P(e,i,s,n)}class so extends Bi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),s=this._adapter=new JE._date(t.adapters.date);s.init(n),Bs(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Zh(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=dt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),o=dt(o)&&!isNaN(o)?o:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=ww(s,o,r);return this._unit=n.unit||(i.autoSkip?ed(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):DP(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:FP(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),nd(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;n=At(n,0,r),i=At(i,0,r),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,s=this.options,o=s.time,r=o.unit||ed(o.minUnit,n,i,this._getLabelCapacity(n)),a=Te(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=is(l)||l===!0,u={};let h=n,p,g;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":r),t.diff(i,n,r)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+r);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,g=0;p<i;p=+t.add(p,a,r),g++)td(u,p,y);return(p===i||s.bounds==="ticks"||g===1)&&td(u,p,y),Object.keys(u).sort((b,v)=>b-v).map(b=>+b)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,o=this._unit,r=n||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,n,i,s){const o=this.options,r=o.ticks.callback;if(r)return tt(r,[t,n,i],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],p=i[n],g=c&&h&&p&&p.major;return this._adapter.format(t,s||(g?h:u))}generateTickLabels(t){let n,i,s;for(n=0,i=t.length;n<i;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,s=pn(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*o+a*r,h:i*r+a*o}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,o=this._tickFormatFunction(t,0,nd(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)t.push(Zh(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Xf(t.sort(BP))}}C(so,"id","time"),C(so,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ro(e,t,n){let i=0,s=e.length-1,o,r,a,l;n?(t>=e[i].pos&&t<=e[s].pos&&({lo:i,hi:s}=Un(e,"pos",t)),{pos:o,time:a}=e[i],{pos:r,time:l}=e[s]):(t>=e[i].time&&t<=e[s].time&&({lo:i,hi:s}=Un(e,"time",t)),{time:o,pos:a}=e[i],{time:r,pos:l}=e[s]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class Il extends so{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ro(n,this.min),this._tableRange=Ro(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,s=[],o=[];let r,a,l,c,u;for(r=0,a=t.length;r<a;++r)c=t[r],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(r=0,a=s.length;r<a;++r)u=s[r+1],l=s[r-1],c=s[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ro(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return Ro(this._table,i*this._tableRange+this._minPos,!0)}}C(Il,"id","timeseries"),C(Il,"defaults",so.defaults);var HP=Object.freeze({__proto__:null,CategoryScale:vl,LinearScale:Sl,LogarithmicScale:wl,RadialLinearScale:As,TimeScale:so,TimeSeriesScale:Il});const UP=[XE,kk,_P,HP],id=1e6,yc=2e3,Hp=-yc;function zP(e){switch(e){case 0:return U.sente;case 1:return U.gote;case 2:return U.research;case 3:return U.research+"2";case 4:return U.research+"3";case 5:return U.research+"4"}}function GP(e,t){const n=e.customData;if(n)switch(t){case 0:return e.nextColor===D.BLACK?void 0:n.playerSearchInfo;case 1:return e.nextColor===D.WHITE?void 0:n.playerSearchInfo;case 2:return n.researchInfo;case 3:return n.researchInfo2;case 4:return n.researchInfo3;case 5:return n.researchInfo4}}function sd(e,t,n){const i=e.score!==void 0?e.score:e.mate!==void 0?e.mate>0?id:-id:void 0;if(i!==void 0)switch(t){case"raw":return Math.min(Math.max(i,Hp),yc);case"winRate":return ol(i,n)}}function WP(e){switch(e){default:return{main:"black",ticks:"dimgray",grid:"lightgray",head:"red",blackPlayer:"#1480C9",whitePlayer:"#FB7D00",researcher:"#349393",researcher2:"#FF1F4E",researcher3:"#6C22FF",researcher4:"#FFB912"};case jl.DARK:return{main:"white",ticks:"darkgray",grid:"dimgray",head:"red",blackPlayer:"#36A2EB",whitePlayer:"#FF9F40",researcher:"#4BC0C0",researcher2:"#FF6384",researcher3:"#9966FF",researcher4:"#FFCD56"}}}var Up=(e=>(e.RAW="raw",e.WIN_RATE="winRate",e))(Up||{});const VP=ze({name:"EvaluationChart",props:{size:{type:St,required:!0},type:{type:String,required:!0}},setup(e){const t=H(null),n=et();let i,s=yc,o=Hp;e.type==="winRate"&&(s=100,o=0);const r=(g,y,b,v)=>{const _=[],E=b.moves;for(const k of E){const A=GP(k,y);if(!A)continue;const O=sd(A,e.type,v.coefficientInSigmoid);O!==void 0&&_.push({x:k.number,y:O})}const w=E[E.length-1];if(y===0&&w.nextColor===D.BLACK||y===1&&w.nextColor===D.WHITE){const k=w.customData;if(k&&k.opponentSearchInfo){const A=sd(k.opponentSearchInfo,e.type,v.coefficientInSigmoid);A!==void 0&&_.push({x:w.number+1,y:A})}}return{label:zP(y),borderColor:g,data:_,showLine:!0}},a=(g,y)=>({label:U.currentPosition,borderColor:y.head,data:[{x:g.current.number,y:s},{x:g.current.number,y:o}],showLine:!0,pointBorderWidth:0,pointRadius:0}),l=(g,y,b)=>{const v=[{borderColor:b.blackPlayer,type:0},{borderColor:b.whitePlayer,type:1},{borderColor:b.researcher,type:2},{borderColor:b.researcher2,type:3},{borderColor:b.researcher3,type:4},{borderColor:b.researcher4,type:5}],_=[a(g,b)];for(const E of v){const w=r(E.borderColor,E.type,g,y);w.data.length>0&&_.push(w)}return _},c=(g,y)=>({x:{min:0,max:g.length+10,ticks:{color:y.ticks},grid:{color:y.grid}},y:{min:o,max:s,ticks:{color:y.ticks},grid:{color:y.grid}}}),u=(g,y)=>{const b=WP(y.thema);i.data.datasets=l(g,y,b),i.options.color=b.main,i.options.scales=c(g,b),i.update()},h=(g,y,b)=>{if(g.x===null)return;const v=b.scales.x.max-b.scales.x.min,_=b.scales.x.right-b.scales.x.left,E=(g.x-b.scales.x.left)/_*v+b.scales.x.min,w=Math.round(E);n.changePly(w)};nt(()=>{const g=$e(),b=t.value.getContext("2d");i=new Dn(b,{type:"scatter",data:{datasets:[]},options:{animation:{duration:0},responsive:!0,maintainAspectRatio:!1,events:["click"],onClick:h}}),i.draw(),u(n.record,g),ti(()=>[n.record,g],([v,_])=>u(v,_),{deep:!0})}),oo(()=>{i.destroy()});const p=Ae(()=>({height:`${e.size.height}px`,width:`${e.size.width}px`}));return{canvas:t,style:p}}});const jP={ref:"canvas",class:"full"};function KP(e,t,n,i,s,o){return M(),N("div",null,[d("div",{class:"full root",style:_e(e.style)},[d("canvas",jP,null,512)],4)])}const qP=Ge(VP,[["render",KP],["__scopeId","data-v-3369caa2"]]),YP=ze({name:"RecordComment",props:{size:{type:St,required:!0}},setup(){const e=H(null),t=et(),n=Ae(()=>Object.values(J).map(s=>{const o=t.record.metadata;return{key:s,displayName:Pb(s),value:o.getStandardMetadata(s)||""}}));return nt(()=>{e.value.addEventListener("copy",s=>{s.stopPropagation()}),e.value.addEventListener("paste",s=>{s.stopPropagation()})}),{t:U,root:e,store:t,list:n,change:(s,o)=>{const r=s.target;t.updateStandardRecordMetadata({key:o,value:r.value})}}}});const XP={class:"row element"},JP={class:"key"},QP={class:"value"},ZP={class:"key"},e8=["value","onInput"];function t8(e,t,n,i,s,o){return M(),N("div",null,[d("div",{ref:"root",class:"full column root",style:_e({height:`${e.size.height}px`})},[d("div",XP,[d("div",JP,I(e.t.file),1),d("div",QP,I(e.store.recordFilePath||e.t.newRecordWithBrackets),1)]),(M(!0),N(ke,null,Ue(e.list,r=>(M(),N("div",{key:r.key,class:"row element"},[d("div",ZP,I(r.displayName),1),d("input",{class:"value",value:r.value,onInput:a=>e.change(a,r.key)},null,40,e8)]))),128))],4)])}const n8=Ge(YP,[["render",t8],["__scopeId","data-v-97881235"]]),tr=30,i8=ze({name:"TabPane",components:{RecordComment:Jv,EngineAnalytics:$S,EvaluationChart:qP,RecordInfo:n8,Icon:Tt},props:{size:{type:St,required:!0},visibleTabs:{type:Array,required:!0},activeTab:{type:String,required:!0},displayMinimizeToggle:{type:Boolean,required:!1}},emits:["onChangeTab","onMinimize"],setup(e,{emit:t}){const n=r=>t("onChangeTab",r),i=()=>t("onMinimize"),s=Ae(()=>e.size.reduce(new St(0,tr))),o={[Ut.RECORD_INFO]:{title:U.recordProperties,icon:Qe.DESCRIPTION},[Ut.COMMENT]:{title:U.comments,icon:Qe.COMMENT},[Ut.SEARCH]:{title:U.searchLog,icon:Qe.BRAIN},[Ut.PV]:{title:U.pv,icon:Qe.PV},[Ut.CHART]:{title:U.evaluation,icon:Qe.CHART},[Ut.PERCENTAGE_CHART]:{title:U.estimatedWinRate,icon:Qe.PERCENT},[Ut.INVISIBLE]:{title:U.hideTabView,icon:Qe.ARROW_DROP}};return{t:U,contentSize:s,changeSelect:n,minimize:i,tabs:o,Tab:Ut,IconType:Qe,EvaluationChartType:Up}}});const s8={class:"row tabs"},o8=["onClick"],r8={class:"tab-contents"};function a8(e,t,n,i,s,o){const r=ge("Icon"),a=ge("RecordInfo"),l=ge("RecordComment"),c=ge("EngineAnalytics"),u=ge("EvaluationChart");return M(),N("div",null,[d("div",{class:"full column",style:_e({width:`${e.size.width}px`})},[d("div",s8,[(M(!0),N(ke,null,Ue(e.visibleTabs,h=>(M(),N("div",{key:h,class:Ze(["tab",{selected:e.activeTab===h}]),onClick:p=>e.changeSelect(h)},[K(r,{icon:e.tabs[h].icon},null,8,["icon"]),d("span",null,I(e.tabs[h].title),1)],10,o8))),128)),e.displayMinimizeToggle?(M(),N("div",{key:0,class:"tab end",onClick:t[0]||(t[0]=(...h)=>e.minimize&&e.minimize(...h))},[K(r,{icon:e.IconType.ARROW_DROP},null,8,["icon"]),d("span",null,I(e.t.hideTabView),1)])):ie("",!0)]),d("div",r8,[e.activeTab===e.Tab.RECORD_INFO?(M(),He(a,{key:0,class:"full tab-content",size:e.contentSize},null,8,["size"])):ie("",!0),e.activeTab===e.Tab.COMMENT?(M(),He(l,{key:1,class:"full tab-content"})):ie("",!0),e.activeTab===e.Tab.SEARCH?(M(),He(c,{key:2,class:"full tab-content",size:e.contentSize,"history-mode":!0},null,8,["size"])):ie("",!0),e.activeTab===e.Tab.PV?(M(),He(c,{key:3,class:"full tab-content",size:e.contentSize,"history-mode":!1},null,8,["size"])):ie("",!0),e.activeTab===e.Tab.CHART?(M(),He(u,{key:4,class:"full tab-content",size:e.contentSize,type:e.EvaluationChartType.RAW},null,8,["size","type"])):ie("",!0),e.activeTab===e.Tab.PERCENTAGE_CHART?(M(),He(u,{key:5,class:"full tab-content",size:e.contentSize,type:e.EvaluationChartType.WIN_RATE},null,8,["size","type"])):ie("",!0)])],4)])}const l8=Ge(i8,[["render",a8],["__scopeId","data-v-8ff24c58"]]);class nr{constructor(){C(this,"func");C(this,"timeout")}after(t,n){this.func=t,!this.timeout&&(this.timeout=setTimeout(this.invoke.bind(this),n))}invoke(){this.func&&this.func(),this.clear()}clear(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.func=void 0}}const c8={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[e.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let n=0;this.panes=this.panes.map((i,s)=>(i.size=s===t?i.max:i.min,s!==t&&(n+=i.min),i)),this.panes[t].size-=n,this.$emit("pane-maximize",this.panes[t]),this.$emit("resized",this.panes.map(i=>({min:i.min,max:i.max,size:i.size})))},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:n,clientY:i}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:n-t.left,y:i-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),e*100/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let n={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const i=0+(this.pushOtherPanes?0:n.prevPanesSize),s=100-(this.pushOtherPanes?0:n.nextPanesSize),o=Math.max(Math.min(this.getCurrentDragPercentage(e),s),i);let r=[t,t+1],a=this.panes[r[0]]||null,l=this.panes[r[1]]||null;const c=a.max<100&&o>=a.max+n.prevPanesSize,u=l.max<100&&o<=100-(l.max+this.sumNextPanesSize(t+1));if(c||u){c?(a.size=a.max,l.size=Math.max(100-a.max-n.prevPanesSize-n.nextPanesSize,0)):(a.size=Math.max(100-l.max-n.prevPanesSize-this.sumNextPanesSize(t+1),0),l.size=l.max);return}if(this.pushOtherPanes){const h=this.doPushOtherPanes(n,o);if(!h)return;({sums:n,panesToResize:r}=h),a=this.panes[r[0]]||null,l=this.panes[r[1]]||null}a!==null&&(a.size=Math.min(Math.max(o-n.prevPanesSize-n.prevReachedMinPanes,a.min),a.max)),l!==null&&(l.size=Math.min(Math.max(100-o-n.nextPanesSize-n.nextReachedMinPanes,l.min),l.max))},doPushOtherPanes(e,t){const n=this.touch.activeSplitter,i=[n,n+1];return t<e.prevPanesSize+this.panes[i[0]].min&&(i[0]=this.findPrevExpandedPane(n).index,e.prevReachedMinPanes=0,i[0]<n&&this.panes.forEach((s,o)=>{o>i[0]&&o<=n&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),e.prevPanesSize=this.sumPrevPanesSize(i[0]),i[0]===void 0)?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((s,o)=>{o>0&&o<=n&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),this.panes[i[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[i[1]].min&&(i[1]=this.findNextExpandedPane(n).index,e.nextReachedMinPanes=0,i[1]>n+1&&this.panes.forEach((s,o)=>{o>n&&o<i[1]&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),e.nextPanesSize=this.sumNextPanesSize(i[1]-1),i[1]===void 0)?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((s,o)=>{o<this.panesCount-1&&o>=n+1&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),this.panes[i[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:i}},sumPrevPanesSize(e){return this.panes.reduce((t,n,i)=>t+(i<e?n.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,n,i)=>t+(i>e+1?n.size:0),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find(t=>t.index<e&&t.size>t.min)||{}},findNextExpandedPane(e){return this.panes.find(t=>t.index>e+1&&t.size>t.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(e=>{const t=e.classList.contains("splitpanes__pane"),n=e.classList.contains("splitpanes__splitter");!t&&!n&&(e.parentNode.removeChild(e),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},addSplitter(e,t,n=!1){const i=e-1,s=document.createElement("div");s.classList.add("splitpanes__splitter"),n||(s.onmousedown=o=>this.onMouseDown(o,i),typeof window<"u"&&"ontouchstart"in window&&(s.ontouchstart=o=>this.onMouseDown(o,i)),s.onclick=o=>this.onSplitterClick(o,i+1)),this.dblClickSplitter&&(s.ondblclick=o=>this.onSplitterDblClick(o,i+1)),t.parentNode.insertBefore(s,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(n=>{n.className.includes("splitpanes__splitter")&&this.removeSplitter(n)});let t=0;e.forEach(n=>{n.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,n,!0):t&&this.addSplitter(t,n),t++)})},requestUpdate({target:e,...t}){const n=this.indexedPanes[e._.uid];Object.entries(t).forEach(([i,s])=>n[i]=s)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(s=>(s.className.includes("splitpanes__pane")&&t++,s===e.$el));const n=parseFloat(e.minSize),i=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._.uid,index:t,min:isNaN(n)?0:n,max:isNaN(i)?100:i,size:e.size===null?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((s,o)=>s.index=o),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(i=>i.id===e._.uid),n=this.panes.splice(t,1)[0];this.panes.forEach((i,s)=>i.index=s),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...n,index:t}}),this.$emit("pane-remove",{removed:n,panes:this.panes.map(i=>({min:i.min,max:i.max,size:i.size}))})})},resetPaneSizes(e={}){!e.addedPane&&!e.removedPane?this.initialPanesSizing():this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const e=100/this.panesCount;let t=0;const n=[],i=[];this.panes.forEach(s=>{s.size=Math.max(Math.min(e,s.max),s.min),t-=s.size,s.size>=s.max&&n.push(s.id),s.size<=s.min&&i.push(s.id)}),t>.1&&this.readjustSizes(t,n,i)},initialPanesSizing(){let e=100;const t=[],n=[];let i=0;this.panes.forEach(o=>{e-=o.size,o.size!==null&&i++,o.size>=o.max&&t.push(o.id),o.size<=o.min&&n.push(o.id)});let s=100;e>.1&&(this.panes.forEach(o=>{o.size===null&&(o.size=Math.max(Math.min(e/(this.panesCount-i),o.max),o.min)),s-=o.size}),s>.1&&this.readjustSizes(e,t,n))},equalizeAfterAddOrRemove({addedPane:e,removedPane:t}={}){let n=100/this.panesCount,i=0;const s=[],o=[];e&&e.givenSize!==null&&(n=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(r=>{i-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&o.push(r.id)}),!(Math.abs(i)<.1)&&(this.panes.forEach(r=>{e&&e.givenSize!==null&&e.id===r.id||(r.size=Math.max(Math.min(n,r.max),r.min)),i-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&o.push(r.id)}),i>.1&&this.readjustSizes(i,s,o))},readjustSizes(e,t,n){let i;e>0?i=e/(this.panesCount-t.length):i=e/(this.panesCount-n.length),this.panes.forEach((s,o)=>{if(e>0&&!t.includes(s.id)){const r=Math.max(Math.min(s.size+i,s.max),s.min),a=r-s.size;e-=a,s.size=r}else if(!n.includes(s.id)){const r=Math.max(Math.min(s.size+i,s.max),s.min),a=r-s.size;e-=a,s.size=r}s.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[s.id].size}%`})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((t,n)=>{t.ondblclick=e?i=>this.onSplitterDblClick(i,n):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return Wm("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},u8=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},h8={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}};function d8(e,t,n,i,s,o){return M(),N("div",{class:"splitpanes__pane",onClick:t[0]||(t[0]=r=>o.onPaneClick(r,e._.uid)),style:_e(e.style)},[Va(e.$slots,"default")],4)}const f8=u8(h8,[["render",d8]]);const Hi=8,yi=10,$a=100,p8=ze({name:"StandardLayout",components:{BoardPane:Z_,RecordPane:Lv,TabPane:l8,Splitpanes:c8,Pane:f8,Icon:Tt},setup(){const e=$e(),t=yn(new St(window.innerWidth,window.innerHeight)),n=H(e.topPaneHeightPercentage),i=H(e.bottomLeftPaneWidthPercentage),s=yn(new St(0,0)),o=new nr,r=()=>{o.after(()=>{t.width=window.innerWidth,t.height=window.innerHeight},$a)};nt(()=>{window.addEventListener("resize",r)}),oo(()=>{window.removeEventListener("resize",r)});const a=Y=>{s.width=Y.width,s.height=Y.height},l=Y=>{e.updateAppSetting(Y).catch(Q=>{pe.log(_t.WARN,"StandardLayout: failed to update app setting: "+Qd(Q))})},c=Y=>{l({tab:Y})},u=Y=>{l({tab2:Y})},h=()=>{n.value=100,l({topPaneHeightPercentage:100})},p=()=>{const Y=Math.min(e.topPanePreviousHeightPercentage,(t.height-tr*2-Hi)/t.height*100);n.value=Y,l({topPaneHeightPercentage:Y})},g=new nr,y=Y=>{const Q=Y[0].size;g.after(()=>{n.value=Q},$a)},b=Y=>{g.clear();const Q=Y[0].size;n.value=Q,l({topPaneHeightPercentage:Q})},v=new nr,_=Y=>{const Q=Y[0].size;v.after(()=>{i.value=Q},$a)},E=Y=>{v.clear();const Q=Y[0].size;i.value=Q,l({bottomLeftPaneWidthPercentage:Q})},w=Ae(()=>t.height*G.value/100>=tr),k=Ae(()=>new St(Math.max(t.width-Ev-yi*2,0),Math.max((t.height-Hi)*(n.value/100)-yi*2-(w.value?0:tr),0))),A=Ae(()=>({margin:`${yi}px`})),O=Ae(()=>{const Y=t.width-s.width-yi*3,Q=s.height;return{margin:`${yi}px ${yi}px ${yi}px 0`,width:`${Y}px`,height:`${Q}px`}}),G=Ae(()=>100-n.value),W=Ae(()=>new St(e.tabPaneType===mr.SINGLE?t.width:(t.width-Hi)*(i.value/100),(t.height-Hi)*(G.value/100))),Z=Ae(()=>new St((t.width-Hi)*(1-i.value/100),(t.height-Hi)*(G.value/100)));return{t:U,topPaneHeightPercentage:n,bottomPaneHeightPercentage:G,bottomLeftPaneWidthPercentage:i,isBottomPaneVisible:w,boardPaneMaxSize:k,boardPaneStyle:A,recordPaneStyle:O,tabPaneSize:W,tabPaneSize2:Z,appSetting:e,onBoardPaneResize:a,onChangeTab:c,onChangeTab2:u,onMinimizeTab:h,onUnhideTabView:p,onResizeMain:y,onResizedMain:b,onResizeBottom:_,onResizedBottom:E,TabPaneType:mr,Tab:Ut,IconType:Qe}}});const g8={class:"full column"},m8={class:"row top-pane-main"};function b8(e,t,n,i,s,o){const r=ge("BoardPane"),a=ge("RecordPane"),l=ge("Icon"),c=ge("Pane"),u=ge("TabPane"),h=ge("Splitpanes");return M(),N("div",null,[K(h,{class:"main-frame",horizontal:"","dbl-click-splitter":!1,onResize:e.onResizeMain,onResized:e.onResizedMain},{default:wn(()=>[K(c,{size:e.topPaneHeightPercentage},{default:wn(()=>[d("div",g8,[d("div",m8,[K(r,{style:_e(e.boardPaneStyle),"max-size":e.boardPaneMaxSize,onResize:e.onBoardPaneResize},null,8,["style","max-size","onResize"]),K(a,{class:"top-right-pane",style:_e(e.recordPaneStyle)},null,8,["style"])]),e.isBottomPaneVisible?ie("",!0):(M(),N("button",{key:0,class:"unhide-tabview-button",onClick:t[0]||(t[0]=(...p)=>e.onUnhideTabView&&e.onUnhideTabView(...p))},[K(l,{icon:e.IconType.ARROW_UP},null,8,["icon"]),d("span",null,I(e.t.expandTabView),1)]))])]),_:1},8,["size"]),K(c,{size:e.bottomPaneHeightPercentage},{default:wn(()=>[e.appSetting.tabPaneType===e.TabPaneType.SINGLE?(M(),He(u,{key:0,class:"tab-pane",size:e.tabPaneSize,"visible-tabs":[e.Tab.RECORD_INFO,e.Tab.COMMENT,e.Tab.SEARCH,e.Tab.PV,e.Tab.CHART,e.Tab.PERCENTAGE_CHART],"active-tab":e.appSetting.tab,"display-minimize-toggle":!0,onOnChangeTab:e.onChangeTab,onOnMinimize:e.onMinimizeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab","onOnMinimize"])):(M(),He(h,{key:1,class:"bottom-frame",vertical:"","dbl-click-splitter":!1,onResize:e.onResizeBottom,onResized:e.onResizedBottom},{default:wn(()=>[K(c,{size:e.bottomLeftPaneWidthPercentage},{default:wn(()=>[K(u,{class:"tab-pane",size:e.tabPaneSize,"visible-tabs":[e.Tab.RECORD_INFO,e.Tab.SEARCH,e.Tab.PV],"active-tab":e.appSetting.tab,onOnChangeTab:e.onChangeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab"])]),_:1},8,["size"]),K(c,null,{default:wn(()=>[K(u,{class:"tab-pane",size:e.tabPaneSize2,"visible-tabs":[e.Tab.COMMENT,e.Tab.CHART,e.Tab.PERCENTAGE_CHART],"active-tab":e.appSetting.tab2,"display-minimize-toggle":!0,onOnChangeTab:e.onChangeTab2,onOnMinimize:e.onMinimizeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab","onOnMinimize"])]),_:1})]),_:1},8,["onResize","onResized"]))]),_:1},8,["size"])]),_:1},8,["onResize","onResized"])])}const y8=Ge(p8,[["render",b8],["__scopeId","data-v-58f987e8"]]);function yt(e){let t=Number(e.value);return e.max&&(t=Math.min(t,Number(e.max))),e.min&&(t=Math.max(t,Number(e.min))),t}function No(e){return`USI_ENGINE_OPTION_DIALOG_OPTION_${e.name}`}const _8=ze({name:"USIEngineOptionDialog",props:{latestEngineSetting:{type:Object,required:!0},okButtonText:{type:String,required:!1,default:"OK"}},emits:["ok","cancel"],setup(e,t){const n=et(),i=$e(),s=H(null),o=H(null),r=H(null),a=H([]),l=H(Af());let c=!1,u=!1;n.retainBussyState(),nt(async()=>{Pt(s.value),Xt(s.value);try{const w=i.engineTimeoutSeconds;l.value=await pe.getUSIEngineInfo(e.latestEngineSetting.path,w),c1(l.value,e.latestEngineSetting),o.value.value=l.value.name,c=!0}catch(w){n.pushError(w),t.emit("cancel")}finally{n.releaseBussyState()}});const h=Ae(()=>Object.values(l.value.options).sort((w,k)=>w.order<k.order?-1:1).map(w=>{const k=a.value.length>0,A={...w,value:Ii(w),visible:!k};return i.translateEngineOptionName&&(A.displayName=$o[w.name]),k&&(A.visible=A.displayName&&cr(A.displayName,a.value)||cr(A.name,a.value)),A}));return hs(()=>{if(!(!c||u)){for(const w of h.value){const k=_o(No(w));k&&w.value!==void 0&&(k.value=w.value+"")}u=!0}}),Ft(()=>{Jt(s.value)}),{t:U,engine:l,dialog:s,engineNameInput:o,filter:r,filterWords:a,options:h,inputElementID:No,updateFilter:()=>{a.value=String(r.value.value).trim().split(/ +/).filter(w=>w)},openEngineDir:()=>{pe.openExplorer(l.value.path)},selectFile:async w=>{n.retainBussyState();try{const k=await pe.showSelectFileDialog(),A=_o(w);k&&A&&(A.value=k)}catch(k){n.pushError(k)}finally{n.releaseBussyState()}},sendOption:async w=>{n.retainBussyState();try{const k=i.engineTimeoutSeconds;await pe.sendUSISetOption(l.value.path,w,k)}catch(k){n.pushError(k)}finally{n.releaseBussyState()}},reset:()=>{o.value.value=l.value.defaultName;for(const w of h.value){const k=_o(No(w));k&&(l.value.options[w.name].default!==void 0?k.value=l.value.options[w.name].default+"":k.value="")}},ok:()=>{l.value.name=o.value.value;for(const w of h.value){const k=_o(No(w));k&&(l.value.options[w.name].value=k.value?w.type==="spin"?yt(k):k.value:void 0)}t.emit("ok",l.value)},cancel:()=>{t.emit("cancel")}}}});const zp=e=>(cs("data-v-acce19ee"),e=e(),us(),e),v8={ref:"dialog"},S8={class:"title"},w8={class:"form-group"},E8={class:"option-filter"},I8=["placeholder"],k8={class:"column option-list"},P8={class:"row option"},A8={class:"option-name"},T8={class:"option-unchangeable"},C8={class:"option-name"},M8={class:"option-unchangeable"},x8={class:"option-name"},R8={class:"option-unchangeable"},N8={class:"option-name"},O8={ref:"engineNameInput",class:"option-value-text",type:"text",name:"ElectronShogiEngineName"},L8={class:"option-name"},B8={key:0,class:"option-name-original"},D8=["id","min","max","name"],F8=["id","name"],$8=["id","name"],H8=["onClick"],U8=["id"],z8={value:""},G8=zp(()=>d("option",{value:"true"},"ON",-1)),W8=zp(()=>d("option",{value:"false"},"OFF",-1)),V8=["id"],j8={value:""},K8=["value"],q8=["onClick"],Y8={class:"main-buttons"};function X8(e,t,n,i,s,o){return M(),N("div",null,[d("dialog",v8,[d("div",S8,I(e.t.engineSettings),1),d("div",w8,[d("div",E8,[d("input",{ref:"filter",class:"filter",placeholder:e.t.filterByOptionName,onInput:t[0]||(t[0]=(...r)=>e.updateFilter&&e.updateFilter(...r))},null,40,I8)]),d("div",k8,[d("div",P8,[d("div",A8,I(e.t.engineName),1),d("div",T8,I(e.engine.defaultName),1)]),d("div",{class:Ze(["row option",{hidden:e.filterWords.length}])},[d("div",C8,I(e.t.author),1),d("div",M8,I(e.engine.author),1)],2),d("div",{class:Ze(["row option",{hidden:e.filterWords.length}])},[d("div",x8,I(e.t.enginePath),1),d("div",R8,[d("div",null,I(e.engine.path),1),d("button",{class:"thin",onClick:t[1]||(t[1]=(...r)=>e.openEngineDir&&e.openEngineDir(...r))},I(e.t.openDirectory),1)])],2),d("div",{class:Ze(["row option",{hidden:e.filterWords.length}])},[d("div",N8,I(e.t.displayName),1),d("input",O8,null,512)],2),(M(!0),N(ke,null,Ue(e.options,r=>(M(),N("div",{key:r.name,class:Ze(["row option",{hidden:!r.visible}])},[d("div",L8,[ro(I(r.displayName||r.name)+" ",1),r.displayName?(M(),N("span",B8,I(r.name),1)):ie("",!0)]),r.type==="spin"?(M(),N("input",{key:0,id:e.inputElementID(r),class:"option-value-number",type:"number",min:r.min,max:r.max,step:"1",name:r.name},null,8,D8)):ie("",!0),r.type==="string"?(M(),N("input",{key:1,id:e.inputElementID(r),class:"option-value-text",type:"text",name:r.name},null,8,F8)):ie("",!0),r.type==="filename"?(M(),N("input",{key:2,id:e.inputElementID(r),class:"option-value-filename",type:"text",name:r.name},null,8,$8)):ie("",!0),r.type==="filename"?(M(),N("button",{key:3,class:"thin",onClick:a=>e.selectFile(e.inputElementID(r))},I(e.t.select),9,H8)):ie("",!0),r.type==="check"?(M(),N("select",{key:4,id:e.inputElementID(r),class:"option-value-check"},[d("option",z8,I(e.t.defaultValue),1),G8,W8],8,U8)):ie("",!0),r.type==="combo"?(M(),N("select",{key:5,id:e.inputElementID(r),class:"option-value-combo"},[d("option",j8,I(e.t.defaultValue),1),(M(!0),N(ke,null,Ue(r.vars,a=>(M(),N("option",{key:a,value:a},I(a),9,K8))),128))],8,V8)):ie("",!0),r.type==="button"?(M(),N("button",{key:6,class:"thin",onClick:a=>e.sendOption(r.name)},I(e.t.invoke),9,q8)):ie("",!0)],2))),128))])]),d("button",{class:"wide",onClick:t[2]||(t[2]=r=>e.reset())},I(e.t.resetToEngineDefaultValues),1),d("div",Y8,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[3]||(t[3]=r=>e.ok())},I(e.okButtonText),1),d("button",{"data-hotkey":"Escape",onClick:t[4]||(t[4]=r=>e.cancel())},I(e.t.cancel),1)])],512)])}const Gp=Ge(_8,[["render",X8],["__scopeId","data-v-acce19ee"]]),J8=ze({name:"PlayerSelector",components:{Icon:Tt,USIEngineOptionDialog:Gp},props:{playerUri:{type:String,required:!0},containsHuman:{type:Boolean,default:!1},engineSettings:{type:Object,required:!0},displayPonderState:{type:Boolean,default:!1},displayThreadState:{type:Boolean,default:!1},displayMultiPvState:{type:Boolean,default:!1}},emits:["select-player","update-engine-setting"],setup(e,t){const n=et(),i=H(null),s=H(null),o=Ae(()=>{if(!Pn(e.playerUri))return null;const g=e.engineSettings.getEngine(e.playerUri);return g&&Ii(g.options[Pf])==="true"?"ON":"OFF"}),r=Ae(()=>{if(!Pn(e.playerUri))return null;const g=e.engineSettings.getEngine(e.playerUri);return g?Ii(g.options[o1])||Ii(g.options[r1]):null}),a=Ae(()=>{if(!Pn(e.playerUri))return null;const g=e.engineSettings.getEngine(e.playerUri);return g?Ii(g.options[s1])||Ii(g.options[a1]):null}),l=Ae(()=>Pn(e.playerUri));return{t:U,playerSelect:i,ponderState:o,threadState:r,multiPVState:a,isPlayerSettingEnabled:l,engineSettingDialog:s,onPlayerChange:()=>{t.emit("select-player",i.value.value)},openPlayerSetting:()=>{if(Pn(e.playerUri)){const g=e.engineSettings.getEngine(e.playerUri);if(!g){n.pushError("");return}s.value=g}},savePlayerSetting:async g=>{s.value=null;const y=e.engineSettings.getClone();y.updateEngine(g),n.retainBussyState();try{await pe.saveUSIEngineSetting(y),t.emit("update-engine-setting",y)}catch(b){n.pushError(b)}finally{n.releaseBussyState()}},closePlayerSetting:()=>{s.value=null},IconType:Qe,uri:i1}}});const Q8={class:"root"},Z8=["value"],eA=["value"],tA=["value"],nA={key:0,class:"row player-info"},iA={class:"player-info-key"},sA={class:"player-info-value"},oA={key:1,class:"row player-info"},rA={class:"player-info-key"},aA={class:"player-info-value"},lA={key:2,class:"row player-info"},cA={class:"player-info-key"},uA={class:"player-info-value"},hA=["disabled"];function dA(e,t,n,i,s,o){const r=ge("Icon"),a=ge("USIEngineOptionDialog");return M(),N(ke,null,[d("div",null,[d("div",Q8,[d("select",{ref:"playerSelect",class:"player-select",size:"1",value:e.playerUri,onChange:t[0]||(t[0]=(...l)=>e.onPlayerChange&&e.onPlayerChange(...l))},[e.containsHuman?(M(),N("option",{key:0,value:e.uri.ES_HUMAN},"",8,eA)):ie("",!0),(M(!0),N(ke,null,Ue(e.engineSettings.engineList,l=>(M(),N("option",{key:l.uri,value:l.uri},I(l.name),9,tA))),128))],40,Z8),e.displayPonderState?(M(),N("div",nA,[d("span",iA,I(e.t.ponder)+":",1),d("span",sA,I(e.ponderState||"---"),1)])):ie("",!0),e.displayThreadState?(M(),N("div",oA,[d("span",rA,I(e.t.numberOfThreads)+":",1),d("span",aA,I(e.threadState||"---"),1)])):ie("",!0),e.displayMultiPvState?(M(),N("div",lA,[d("span",cA,I(e.t.multiPV)+":",1),d("span",uA,I(e.multiPVState||"---"),1)])):ie("",!0),d("button",{class:"player-setting",disabled:!e.isPlayerSettingEnabled,onClick:t[1]||(t[1]=(...l)=>e.openPlayerSetting&&e.openPlayerSetting(...l))},[K(r,{icon:e.IconType.SETTINGS},null,8,["icon"]),d("span",null,I(e.t.settings),1)],8,hA)])]),e.engineSettingDialog?(M(),He(a,{key:0,"latest-engine-setting":e.engineSettingDialog,"ok-button-text":e.t.save,onOk:e.savePlayerSetting,onCancel:e.closePlayerSetting},null,8,["latest-engine-setting","ok-button-text","onOk","onCancel"])):ie("",!0)],64)}const ta=Ge(J8,[["render",dA],["__scopeId","data-v-4d59cf41"]]),fA=ze({name:"GameDialog",components:{Icon:Tt,PlayerSelector:ta},setup(){const e=et(),t=H(null),n=H(null),i=H(null),s=H(null),o=H(null),r=H(null),a=H(null),l=H(null),c=H(null),u=H(null),h=H(null),p=H(null),g=H(null),y=H(yr()),b=H(new Wn),v=H(""),_=H("");let E=!1,w=!1;e.retainBussyState(),nt(async()=>{try{y.value=await pe.loadGameSetting(),b.value=await pe.loadUSIEngineSetting(),v.value=y.value.black.uri,_.value=y.value.white.uri,Pt(t.value),Xt(t.value),E=!0}catch(Q){e.pushError(Q),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Ft(()=>{Jt(t.value)}),hs(()=>{!E||w||(n.value.value=Math.floor(y.value.timeLimit.timeSeconds/3600),i.value.value=Math.floor(y.value.timeLimit.timeSeconds/60)%60,s.value.value=y.value.timeLimit.byoyomi,o.value.value=y.value.timeLimit.increment,r.value.value=y.value.startPosition!==void 0?y.value.startPosition:"current",a.value.checked=y.value.enableEngineTimeout,l.value.value=y.value.maxMoves,c.value.checked=y.value.humanIsFront,u.value.value=y.value.repeat,h.value.checked=y.value.swapPlayers,p.value.checked=y.value.enableComment,g.value.checked=y.value.enableAutoSave,w=!0)});const k=Q=>{if(Pn(Q)&&b.value.hasEngine(Q)){const ye=b.value.getEngine(Q);return{name:ye.name,uri:Q,usi:ye}}return{name:"",uri:nn}};return{t:U,CommentBehavior:$n,dialog:t,hours:n,minutes:i,byoyomi:s,increment:o,startPosition:r,enableEngineTimeout:a,maxMoves:l,humanIsFront:c,repeat:u,swapPlayers:h,enableComment:p,enableAutoSave:g,engineSettings:b,blackPlayerURI:v,whitePlayerURI:_,onStart:()=>{const Q={black:k(v.value),white:k(_.value),timeLimit:{timeSeconds:(yt(n.value)*60+yt(i.value))*60,byoyomi:yt(s.value),increment:yt(o.value)},startPosition:r.value.value!=="current"?r.value.value:void 0,enableEngineTimeout:a.value.checked,maxMoves:yt(l.value),humanIsFront:c.value.checked,repeat:yt(u.value),swapPlayers:h.value.checked,enableComment:p.value.checked,enableAutoSave:g.value.checked},ye=_r()?Tf(Q):f1(Q);ye?e.pushError(ye):e.startGame(Q)},onCancel:()=>{e.closeModalDialog()},onUpdatePlayerSetting:Q=>{b.value=Q},onSelectBlackPlayer:Q=>{v.value=Q},onSelectWhitePlayer:Q=>{_.value=Q},onSwapColor:()=>{[v.value,_.value]=[_.value,v.value]},IconType:Qe}}});const _c=e=>(cs("data-v-f3e11491"),e=e(),us(),e),pA={ref:"dialog"},gA={class:"title"},mA={class:"form-group players"},bA={class:"row regular-interval"},yA={class:"player"},_A={class:"top-label"},vA={class:"player"},SA={class:"top-label"},wA={class:"players-control"},EA={class:"row regular-interval"},IA={class:"form-group time-limit"},kA={class:"top-label"},PA={class:"form-item"},AA=_c(()=>d("div",{class:"form-item-label"},"",-1)),TA={ref:"hours",class:"time",type:"number",min:"0",max:"99",step:"1"},CA={class:"form-item-unit"},MA={ref:"minutes",class:"time",type:"number",min:"0",max:"59",step:"1"},xA={class:"form-item-unit"},RA={class:"form-item"},NA=_c(()=>d("div",{class:"form-item-label"},"",-1)),OA={ref:"byoyomi",class:"time",type:"number",min:"0",max:"60",step:"1"},LA={class:"form-item-unit"},BA={class:"form-item"},DA=_c(()=>d("div",{class:"form-item-label"},"",-1)),FA={ref:"increment",class:"time",type:"number",min:"0",max:"99",step:"1"},$A={class:"form-item-unit"},HA={class:"form-item"},UA={id:"enable-engine-timeout",ref:"enableEngineTimeout",type:"checkbox"},zA={for:"enable-engine-timeout"},GA={class:"form-group others"},WA={class:"top-label"},VA={class:"form-item"},jA={class:"form-item-label"},KA={ref:"startPosition"},qA={value:"current"},YA={value:"standard"},XA={value:"handicapLance"},JA={value:"handicapRightLance"},QA={value:"handicapBishop"},ZA={value:"handicapRook"},eT={value:"handicapRookLance"},tT={value:"handicap2Pieces"},nT={value:"handicap4Pieces"},iT={value:"handicap6Pieces"},sT={value:"handicap8Pieces"},oT={class:"form-item"},rT={class:"form-item-label"},aT={ref:"maxMoves",class:"number",type:"number",min:"1"},lT={class:"form-item"},cT={class:"form-item-label"},uT={ref:"repeat",class:"number",type:"number",min:"1"},hT={class:"form-item"},dT={id:"swap-players",ref:"swapPlayers",type:"checkbox"},fT={for:"swap-players"},pT={class:"form-item"},gT={id:"enable-comment",ref:"enableComment",type:"checkbox"},mT={for:"enable-comment"},bT={class:"form-item"},yT={id:"enable-auto-save",ref:"enableAutoSave",type:"checkbox"},_T={for:"enable-auto-save"},vT={class:"form-item"},ST={id:"human-is-front",ref:"humanIsFront",type:"checkbox"},wT={for:"human-is-front"},ET={class:"main-buttons"};function IT(e,t,n,i,s,o){const r=ge("PlayerSelector"),a=ge("Icon");return M(),N("div",null,[d("dialog",pA,[d("div",gA,I(e.t.game),1),d("div",mA,[d("div",bA,[d("div",yA,[d("div",_A,I(e.t.senteOrShitate),1),K(r,{"player-uri":e.blackPlayerURI,"contains-human":!0,"engine-settings":e.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:e.onSelectBlackPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),d("div",vA,[d("div",SA,I(e.t.goteOrUwate),1),e.whitePlayerURI?(M(),He(r,{key:0,"player-uri":e.whitePlayerURI,"contains-human":!0,"engine-settings":e.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:e.onSelectWhitePlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])):ie("",!0)])]),d("div",wA,[d("button",{onClick:t[0]||(t[0]=(...l)=>e.onSwapColor&&e.onSwapColor(...l))},[K(a,{icon:e.IconType.SWAP_H},null,8,["icon"]),d("span",null,I(e.t.swapSenteGote),1)])])]),d("div",EA,[d("div",IA,[d("div",kA,I(e.t.time),1),d("div",PA,[AA,d("input",TA,null,512),d("div",CA,I(e.t.hoursSuffix),1),d("input",MA,null,512),d("div",xA,I(e.t.minutesSuffix),1)]),d("div",RA,[NA,d("input",OA,null,512),d("div",LA,I(e.t.secondsSuffix),1)]),d("div",BA,[DA,d("input",FA,null,512),d("div",$A,I(e.t.secondsSuffix),1)]),d("div",HA,[d("input",UA,null,512),d("label",zA,I(e.t.enableEngineTimeout),1)])]),d("div",GA,[d("div",WA,I(e.t.others),1),d("div",VA,[d("div",jA,I(e.t.startPosition),1),d("select",KA,[d("option",qA,I(e.t.currentPosition),1),d("option",YA,I(e.t.nonHandicap),1),d("option",XA,I(e.t.lanceHandicap),1),d("option",JA,I(e.t.rightLanceHandicap),1),d("option",QA,I(e.t.bishopHandicap),1),d("option",ZA,I(e.t.rookHandicap),1),d("option",eT,I(e.t.rookLanceHandicap),1),d("option",tT,I(e.t.twoPiecesHandicap),1),d("option",nT,I(e.t.fourPiecesHandicap),1),d("option",iT,I(e.t.sixPiecesHandicap),1),d("option",sT,I(e.t.eightPiecesHandicap),1)],512)]),d("div",oT,[d("div",rT,I(e.t.maxMoves),1),d("input",aT,null,512)]),d("div",lT,[d("div",cT,I(e.t.gameRepetition),1),d("input",uT,null,512)]),d("div",hT,[d("input",dT,null,512),d("label",fT,I(e.t.swapTurnWhenGameRepetition),1)]),d("div",pT,[d("input",gT,null,512),d("label",mT,I(e.t.outputComments),1)]),d("div",bT,[d("input",yT,null,512),d("label",_T,I(e.t.saveRecordAutomatically),1)]),d("div",vT,[d("input",ST,null,512),d("label",wT,I(e.t.adjustBoardToHumanPlayer),1)])])]),d("div",ET,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[1]||(t[1]=l=>e.onStart())},I(e.t.startGame),1),d("button",{"data-hotkey":"Escape",onClick:t[2]||(t[2]=l=>e.onCancel())},I(e.t.cancel),1)])],512)])}const kT=Ge(fA,[["render",IT],["__scopeId","data-v-f3e11491"]]),PT=ze({name:"CSAGameDialog",components:{PlayerSelector:ta},setup(){const e=et(),t=H(null),n=H(null),i=H(Ys.V121),s=H(null),o=H(null),r=H(null),a=H(null),l=H(null),c=H(null),u=H(null),h=H(null),p=H(null),g=H(null),y=H(!1),b=H(Iy()),v=H(new Wn),_=H("");let E=!1,w=!1;e.retainBussyState(),nt(async()=>{try{y.value=await pe.isEncryptionAvailable(),b.value=await pe.loadCSAGameSettingHistory(),v.value=await pe.loadUSIEngineSetting(),Pt(t.value),Xt(t.value),E=!0}catch(de){e.pushError(de),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Ft(()=>{Jt(t.value)}),hs(()=>{if(!E||w)return;const de=ky(b.value,0);n.value.value=i.value=de.server.protocolVersion,s.value.value=de.server.host,o.value.value=de.server.port,r.value.value=de.server.id,a.value.value=de.server.password,c.value.checked=de.enableComment,u.value.checked=de.enableAutoSave,h.value.value=de.repeat,p.value.checked=de.autoRelogin,g.value.checked=de.autoFlip,_.value=de.player.uri,w=!0});const k=de=>{if(Pn(de)&&v.value.hasEngine(de)){const Le=v.value.getEngine(de);return{name:Le.name,uri:de,usi:Le}}return{name:"",uri:nn}},A=()=>{const de={player:k(_.value),server:{protocolVersion:n.value.value,host:String(s.value.value||"").trim(),port:Number(o.value.value),id:String(r.value.value||""),password:String(a.value.value||"")},enableComment:c.value.checked,enableAutoSave:u.value.checked,repeat:yt(h.value),autoRelogin:p.value.checked,autoFlip:g.value.checked},Le=Ey(de);Le?e.pushError(Le):e.loginCSAGame(de,{saveHistory:l.value.checked})},O=()=>{e.closeModalDialog()},G=async de=>{v.value=de},W=de=>{_.value=de},Z=de=>{const Le=de.target;a.value.type=Le.checked?"text":"password"},Y=de=>{const Le=de.target,Ie=b.value.serverHistory[Number(Le.value)];Ie&&(n.value.value=Ie.protocolVersion,s.value.value=Ie.host,o.value.value=Ie.port,r.value.value=Ie.id,a.value.value=Ie.password)},Q=()=>{i.value=n.value.value},ye=Ae(()=>{const de=$e();return de.enableCSALog&&de.enableAppLog&&de.enableUSILog});return{t:U,CSAProtocolVersion:Ys,maxServerHistoryLenght:Bf,dialog:t,protocolVersion:n,host:s,port:o,id:r,password:a,saveHistory:l,enableComment:c,enableAutoSave:u,repeat:h,autoRelogin:p,autoFlip:g,engineSettings:v,playerURI:_,history:b,selectedProtocolVersion:i,onChangeProtocolVersion:Q,logEnabled:ye,isEncryptionAvailable:y,onStart:A,onCancel:O,onUpdatePlayerSetting:G,onSelectPlayer:W,onTogglePasswordVisibility:Z,onChangeHistory:Y,IconType:Qe}}});const na=e=>(cs("data-v-dea82c6c"),e=e(),us(),e),AT={ref:"dialog",class:"root"},TT={class:"title"},CT={class:"form-group scroll"},MT={key:0,class:"form-group warning"},xT={class:"note"},RT={class:"form-group"},NT={class:"form-group"},OT={class:"form-item"},LT={class:"form-item-label-wide"},BT={key:0,value:"0"},DT=["value"],FT=na(()=>d("hr",null,null,-1)),$T={class:"form-item"},HT={class:"form-item-label-wide"},UT=["value"],zT=["value"],GT={key:0,class:"form-group warning"},WT={class:"note"},VT={key:1,class:"form-group warning"},jT={class:"note"},KT={class:"form-item"},qT={class:"form-item-label-wide"},YT={ref:"host",class:"long-text",list:"csa-server-host",type:"text"},XT=na(()=>d("datalist",{id:"csa-server-host"},[d("option",{value:"gserver.computer-shogi.org"}),d("option",{value:"wdoor.c.u-tokyo.ac.jp"}),d("option",{value:"localhost"})],-1)),JT={class:"form-item"},QT={class:"form-item-label-wide"},ZT={ref:"port",class:"number",list:"csa-server-port-number",type:"number"},eC=na(()=>d("datalist",{id:"csa-server-port-number"},[d("option",{value:"4081"})],-1)),tC={class:"form-item"},nC=na(()=>d("div",{class:"form-item-label-wide"},"ID",-1)),iC={ref:"id",class:"long-text",type:"text"},sC={class:"form-item"},oC={class:"form-item-label-wide"},rC={ref:"password",class:"long-text",type:"password"},aC={class:"form-item"},lC={for:"show-password"},cC={class:"form-group warning"},uC={key:0,class:"note"},hC={key:1,class:"note"},dC={class:"form-item"},fC={id:"save-history",ref:"saveHistory",type:"checkbox",checked:""},pC={for:"save-history"},gC={class:"form-group"},mC={class:"form-item"},bC={class:"form-item-label-wide number"},yC={ref:"repeat",class:"number",type:"number",min:"1"},_C={class:"form-item"},vC={id:"auto-relogin",ref:"autoRelogin",type:"checkbox"},SC={for:"auto-relogin"},wC={class:"form-item"},EC={id:"enable-comment",ref:"enableComment",type:"checkbox"},IC={for:"enable-comment"},kC={class:"form-item"},PC={id:"enable-auto-save",ref:"enableAutoSave",type:"checkbox"},AC={for:"enable-auto-save"},TC={class:"form-item"},CC={id:"auto-flip",ref:"autoFlip",type:"checkbox"},MC={for:"auto-flip"},xC={class:"main-buttons"};function RC(e,t,n,i,s,o){const r=ge("PlayerSelector");return M(),N("div",null,[d("dialog",AT,[d("div",TT,I(e.t.csaProtocolOnlineGame),1),d("div",CT,[e.logEnabled?ie("",!0):(M(),N("div",MT,[d("div",xT,I(e.t.someLogsDisabled)+" "+I(e.t.logsRecommendedForCSAProtocol)+" "+I(e.t.pleaseEnableLogsAndRestart),1)])),d("div",RT,[d("div",null,I(e.t.player),1),K(r,{"player-uri":e.playerURI,"contains-human":!0,"engine-settings":e.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:e.onSelectPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),d("div",NT,[d("div",OT,[d("div",LT,I(e.t.selectFromHistory),1),d("select",{class:"long-text",value:"0",onChange:t[0]||(t[0]=(...a)=>e.onChangeHistory&&e.onChangeHistory(...a))},[e.history.serverHistory.length===0?(M(),N("option",BT,I(e.t.noHistory),1)):ie("",!0),(M(!0),N(ke,null,Ue(e.history.serverHistory,(a,l)=>(M(),N("option",{key:l,value:l},I(a.host)+":"+I(a.port)+" "+I(a.id),9,DT))),128))],32)]),FT,d("div",$T,[d("div",HT,I(e.t.version),1),d("select",{ref:"protocolVersion",class:"long-text",value:"CSA_v121",onChange:t[1]||(t[1]=(...a)=>e.onChangeProtocolVersion&&e.onChangeProtocolVersion(...a))},[d("option",{value:e.CSAProtocolVersion.V121},I(e.t.csaProtocolV121),9,UT),d("option",{value:e.CSAProtocolVersion.V121_FLOODGATE},I(e.t.csaProtocolV121WithPVComment),9,zT)],544)]),e.selectedProtocolVersion===e.CSAProtocolVersion.V121?(M(),N("div",GT,[d("div",WT,I(e.t.notSendPVOnStandardCSAProtocol),1)])):ie("",!0),e.selectedProtocolVersion===e.CSAProtocolVersion.V121_FLOODGATE?(M(),N("div",VT,[d("div",jT,I(e.t.sendPVDoNotUseOnWCSC),1)])):ie("",!0),d("div",KT,[d("div",qT,I(e.t.hostToConnect),1),d("input",YT,null,512),XT]),d("div",JT,[d("div",QT,I(e.t.portNumber),1),d("input",ZT,null,512),eC]),d("div",tC,[nC,d("input",iC,null,512)]),d("div",sC,[d("div",oC,I(e.t.password),1),d("input",rC,null,512)]),d("div",aC,[d("input",{id:"show-password",type:"checkbox",onChange:t[2]||(t[2]=(...a)=>e.onTogglePasswordVisibility&&e.onTogglePasswordVisibility(...a))},null,32),d("label",lC,I(e.t.showPassword),1)]),d("div",cC,[e.isEncryptionAvailable?(M(),N("div",uC,I(e.t.csaProtocolSendPlaintextPassword),1)):(M(),N("div",hC,I(e.t.passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable)+" "+I(e.t.pleaseUncheckSaveHistoryIfNotWantSave)+" "+I(e.t.csaProtocolSendPlaintextPasswordRegardlessOfHistory),1))]),d("div",dC,[d("input",fC,null,512),d("label",pC,I(e.t.saveHistory)+" ("+I(e.t.keepLatest(e.maxServerHistoryLenght))+") ",1)])]),d("div",gC,[d("div",mC,[d("div",bC,I(e.t.gameRepetition),1),d("input",yC,null,512)]),d("div",_C,[d("input",vC,null,512),d("label",SC,I(e.t.autoRelogin),1)]),d("div",wC,[d("input",EC,null,512),d("label",IC,I(e.t.outputComments),1)]),d("div",kC,[d("input",PC,null,512),d("label",AC,I(e.t.saveRecordAutomatically),1)]),d("div",TC,[d("input",CC,null,512),d("label",MC,I(e.t.adjustBoardAutomatically),1)])])]),d("div",xC,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[3]||(t[3]=a=>e.onStart())},I(e.t.startGame),1),d("button",{"data-hotkey":"Escape",onClick:t[4]||(t[4]=a=>e.onCancel())},I(e.t.cancel),1)])],512)])}const NC=Ge(PT,[["render",RC],["__scopeId","data-v-dea82c6c"]]),OC=ze({name:"ResearchDialog",components:{PlayerSelector:ta},setup(){const e=et(),t=H(null),n=H(sl()),i=H(new Wn),s=H(""),o=H([]);return e.retainBussyState(),nt(async()=>{var c,u;Pt(t.value),Xt(t.value);try{n.value=await pe.loadResearchSetting(),i.value=await pe.loadUSIEngineSetting(),s.value=((c=n.value.usi)==null?void 0:c.uri)||"",o.value=((u=n.value.secondaries)==null?void 0:u.map(h=>{var p;return((p=h.usi)==null?void 0:p.uri)||""}))||[]}catch(h){e.pushError(h),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Ft(()=>{Jt(t.value)}),{t:U,dialog:t,engineSettings:i,engineURI:s,secondaryEngineURIs:o,onStart:()=>{const c=i.value.getEngine(s.value),u=[];for(const g of o.value){const y=i.value.getEngine(g);u.push({usi:y})}const h={usi:c,secondaries:u},p=p1(h);if(p){e.pushError(p);return}e.startResearch(h)},onCancel:()=>{e.closeModalDialog()},onUpdatePlayerSetting:async c=>{i.value=c}}}});const LC={ref:"dialog",class:"root"},BC={class:"title"},DC={class:"form-group"},FC={class:"form-group"},$C=["onClick"],HC={class:"form-item center"},UC={class:"main-buttons"};function zC(e,t,n,i,s,o){const r=ge("PlayerSelector");return M(),N("div",null,[d("dialog",LC,[d("div",BC,I(e.t.research),1),d("div",DC,[d("div",FC,[K(r,{"player-uri":e.engineURI,"engine-settings":e.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:t[0]||(t[0]=a=>{e.engineURI=a})},null,8,["player-uri","engine-settings","onUpdateEngineSetting"])]),(M(!0),N(ke,null,Ue(e.secondaryEngineURIs,(a,l)=>(M(),N("div",{key:l,class:"form-group"},[K(r,{"player-uri":a,"engine-settings":e.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:c=>{e.secondaryEngineURIs[l]=c}},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"]),d("button",{class:"remove-button",onClick:c=>e.secondaryEngineURIs.splice(l,1)},I(e.t.remove),9,$C)]))),128)),d("div",HC,[d("button",{onClick:t[1]||(t[1]=a=>e.secondaryEngineURIs.push(""))},I(e.t.addNthEngine(e.secondaryEngineURIs.length+2)),1)])]),d("div",UC,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[2]||(t[2]=a=>e.onStart())},I(e.t.startResearch),1),d("button",{"data-hotkey":"Escape",onClick:t[3]||(t[3]=a=>e.onCancel())},I(e.t.cancel),1)])],512)])}const GC=Ge(OC,[["render",zC],["__scopeId","data-v-b466e36a"]]),WC=ze({name:"USIEngineManagementDialog",components:{USIEngineOptionDialog:Gp},setup(){const e=et(),t=H(null),n=H(null),i=H(new Wn),s=H(null),o=H([]);e.retainBussyState(),nt(async()=>{Pt(t.value),Xt(t.value);try{i.value=await pe.loadUSIEngineSetting()}catch(v){e.pushError(v),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Ft(()=>{Jt(t.value)});const r=Ae(()=>i.value.engineList.map(v=>({uri:v.uri,name:v.name,visible:o.value.length==0||cr(v.name,o.value)||cr(v.defaultName,o.value)})));return{t:U,optionDialog:n,dialog:t,setting:i,filter:s,engines:r,updateFilter:()=>{o.value=String(s.value.value).trim().split(/ +/).filter(v=>v)},add:async()=>{try{e.retainBussyState();const v=await pe.showSelectUSIEngineDialog();if(!v)return;const E=$e().engineTimeoutSeconds;i.value.addEngine(await pe.getUSIEngineInfo(v,E))}catch(v){e.pushError(v)}finally{e.releaseBussyState()}},remove:v=>{i.value.removeEngine(v)},openOptions:v=>{n.value=i.value.getEngine(v)},duplicate:v=>{const _=i.value.getEngine(v),E=l1(_);i.value.addEngine(E)},saveAndClose:async()=>{try{e.retainBussyState(),await pe.saveUSIEngineSetting(i.value),e.destroyModalDialog()}catch(v){e.pushError(v)}finally{e.releaseBussyState()}},cancel:()=>{e.closeModalDialog()},optionOk:v=>{i.value.updateEngine(v),n.value=null},optionCancel:()=>{n.value=null}}}});const VC={ref:"dialog"},jC={class:"title"},KC={class:"form-group"},qC={class:"engine-filter"},YC=["placeholder"],XC={class:"column engine-list"},JC={key:0,class:"engine"},QC=["value"],ZC={class:"engine-name"},eM=["onClick"],tM=["onClick"],nM=["onClick"],iM={class:"main-buttons"};function sM(e,t,n,i,s,o){const r=ge("USIEngineOptionDialog");return M(),N(ke,null,[d("div",null,[d("dialog",VC,[d("div",jC,I(e.t.engineManagement),1),d("div",KC,[d("div",qC,[d("input",{ref:"filter",class:"filter",placeholder:e.t.filterByEngineName,onInput:t[0]||(t[0]=(...a)=>e.updateFilter&&e.updateFilter(...a))},null,40,YC)]),d("div",XC,[e.setting.engineList.length===0?(M(),N("div",JC,I(e.t.noEngineRegistered),1)):ie("",!0),(M(!0),N(ke,null,Ue(e.engines,a=>(M(),N("div",{key:a.uri,class:Ze(["row engine",{hidden:!a.visible}]),value:a.uri},[d("div",ZC,I(a.name),1),d("button",{onClick:l=>e.openOptions(a.uri)},I(e.t.config),9,eM),d("button",{onClick:l=>e.duplicate(a.uri)},I(e.t.duplicate),9,tM),d("button",{onClick:l=>e.remove(a.uri)},I(e.t.remove),9,nM)],10,QC))),128))])]),d("button",{class:"wide",onClick:t[1]||(t[1]=a=>e.add())},I(e.t.add),1),d("div",iM,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[2]||(t[2]=a=>e.saveAndClose())},I(e.t.saveAndClose),1),d("button",{"data-hotkey":"Escape",onClick:t[3]||(t[3]=a=>e.cancel())},I(e.t.cancel),1)])],512)]),e.optionDialog?(M(),He(r,{key:0,"latest-engine-setting":e.optionDialog,onOk:e.optionOk,onCancel:e.optionCancel},null,8,["latest-engine-setting","onOk","onCancel"])):ie("",!0)],64)}const oM=Ge(WC,[["render",sM],["__scopeId","data-v-d2c60467"]]),rM={pawn:"./piece/gothic/pawn.png",lance:"./piece/gothic/lance.png",knight:"./piece/gothic/knight.png",silver:"./piece/gothic/silver.png",gold:"./piece/gothic/gold.png",bishop:"./piece/gothic/bishop.png",rook:"./piece/gothic/rook.png",king:"./piece/gothic/king2.png",promPawn:"./piece/gothic/prom_pawn.png",promLance:"./piece/gothic/prom_lance.png",promKnight:"./piece/gothic/prom_knight.png",promSilver:"./piece/gothic/prom_silver.png",horse:"./piece/gothic/horse.png",dragon:"./piece/gothic/dragon.png"};function aM(e){return{size:e,headerX:e*.5,headerY:e*.01,footerX:e*.01,footerY:e*.83,boardLeft:e*.15,boardTop:e*.12,boardSize:e*.7,boardBorderSize:e*.004,fileLeft:e*.168,fileTop:e*.078,rankLeft:e*.85,rankTop:e*.138,labelSize:e*.04,pieceSize:e*.7/9,fontSize:e*.038,handSize:e*.053,blackHandLeft:e*.9,blackHandTop:e*.12,whiteHandLeft:e*(.1-.053),whiteHandTop:e*.82}}const lM=ze({name:"SimpleBoardView",props:{maxSize:{type:St,required:!0},position:{type:Object,required:!0},header:{type:String,required:!1,default:null},footer:{type:String,required:!1,default:null},lastMove:{type:Object,required:!1,default:null}},emits:["resize"],setup(e){return{layout:Ae(()=>{const n=aM(Math.min(e.maxSize.width,e.maxSize.height));return{frameStyle:{width:`${n.size}px`,height:`${n.size}px`},headerStyle:{transform:"translate(-50%, 0%)",left:`${n.headerX}px`,top:`${n.headerY}px`,"font-size":`${n.fontSize}px`},footerStyle:{left:`${n.footerX}px`,top:`${n.footerY}px`,"font-size":`${n.fontSize}px`},boardStyle:{left:`${n.boardLeft-n.boardBorderSize}px`,top:`${n.boardTop-n.boardBorderSize}px`},boardImageStyle:{width:`${n.boardSize+n.boardBorderSize*2}px`,height:`${n.boardSize+n.boardBorderSize*2}px`},files:[1,2,3,4,5,6,7,8,9].map(i=>({style:{left:`${n.fileLeft+n.pieceSize*(9-i)}px`,top:`${n.fileTop}px`},image:`./character/arabic_numerals/${i}.png`})),fileImageStyle:{width:`${n.labelSize}px`,height:`${n.labelSize}px`},ranks:[1,2,3,4,5,6,7,8,9].map(i=>({style:{left:`${n.rankLeft}px`,top:`${n.rankTop+n.pieceSize*(i-1)}px`},image:`./character/numerals/${i}.png`})),rankImageStyle:{width:`${n.labelSize}px`,height:`${n.labelSize}px`},lastMoveStyle:function(){if(!e.lastMove)return null;const i=e.lastMove.to;return{"background-color":"gold",left:`${n.boardLeft+n.boardSize*i.x/9}px`,top:`${n.boardTop+n.boardSize*i.y/9}px`,width:`${n.pieceSize}px`,height:`${n.pieceSize}px`}}(),boardPieces:e.position.board.listNonEmptySquares().map(i=>{const s=e.position.board.at(i);return{id:`${i.x},${i.y}`,style:{left:`${n.boardLeft+n.boardSize*i.x/9}px`,top:`${n.boardTop+n.boardSize*i.y/9}px`},imageStyle:{width:`${n.pieceSize}px`,height:`${n.pieceSize}px`,transform:s.color==="white"?"rotate(180deg)":void 0},image:rM[s.type]}}),blackHandImageStyle:{width:`${n.handSize}px`,height:"auto"},blackHandSymbol:{style:{left:`${n.blackHandLeft}px`,top:`${n.blackHandTop}px`},image:"./character/turns/black.png"},blackHandPieces:function(){const i=[];for(const{type:s,count:o}of e.position.blackHand.counts)o!==0&&(i.push({id:s,style:{left:`${n.blackHandLeft}px`,top:`${n.blackHandTop+n.handSize*(i.length+1)}px`},image:`./piece/gothic/${s}.png`}),o!==1&&i.push({id:`${s}-number`,style:{left:`${n.blackHandLeft}px`,top:`${n.blackHandTop+n.handSize*(i.length+1)}px`},image:`./character/numerals/${o}.png`}));return i.length===0?[{id:"empty",style:{left:`${n.blackHandLeft}px`,top:`${n.blackHandTop+n.handSize}px`},image:"./character/hand/nashi.png"}]:i}(),whiteHandImageStyle:{width:`${n.handSize}px`,height:"auto",transform:"rotate(180deg)"},whiteHandSymbol:{style:{left:`${n.whiteHandLeft}px`,top:`${n.whiteHandTop}px`,transform:"translate(0%, -100%)"},image:"./character/turns/white.png"},whiteHandPieces:function(){const i=[];for(const{type:s,count:o}of e.position.whiteHand.counts)o!==0&&(i.push({id:s,style:{left:`${n.whiteHandLeft}px`,top:`${n.whiteHandTop-n.handSize*(i.length+1)}px`,transform:"translate(0%, -100%)"},image:`./piece/gothic/${s}.png`}),o!==1&&i.push({id:`${s}-number`,style:{left:`${n.whiteHandLeft}px`,top:`${n.whiteHandTop-n.handSize*(i.length+1)}px`,transform:"translate(0%, -100%)"},image:`./character/numerals/${o}.png`}));return i.length===0?[{id:"empty",style:{left:`${n.whiteHandLeft}px`,top:`${n.whiteHandTop-n.handSize}px`,transform:"translate(0%, -100%)"},image:"./character/hand/nashi.png"}]:i}()}})}}}),cM=""+new URL("../board/grid_square.svg",import.meta.url).href;const uM=["src"],hM=["src"],dM=["src"],fM=["src"],pM=["src"],gM=["src"],mM=["src"];function bM(e,t,n,i,s,o){return M(),N("div",null,[d("div",{class:"frame",style:_e(e.layout.frameStyle)},[e.header?(M(),N("div",{key:0,class:"header",style:_e(e.layout.headerStyle)},I(e.header),5)):ie("",!0),e.footer?(M(),N("div",{key:1,class:"footer",style:_e(e.layout.footerStyle)},I(e.footer),5)):ie("",!0),e.layout.lastMoveStyle?(M(),N("div",{key:2,style:_e(e.layout.lastMoveStyle)},null,4)):ie("",!0),d("div",{class:"board-grid",style:_e(e.layout.boardStyle)},[d("img",{src:cM,style:_e(e.layout.boardImageStyle)},null,4)],4),(M(!0),N(ke,null,Ue(e.layout.files,r=>(M(),N("div",{key:r.image,style:_e(r.style)},[d("img",{src:r.image,style:_e(e.layout.fileImageStyle)},null,12,uM)],4))),128)),(M(!0),N(ke,null,Ue(e.layout.ranks,r=>(M(),N("div",{key:r.image,style:_e(r.style)},[d("img",{src:r.image,style:_e(e.layout.rankImageStyle)},null,12,hM)],4))),128)),(M(!0),N(ke,null,Ue(e.layout.boardPieces,r=>(M(),N("div",{key:r.id,style:_e(r.style)},[d("img",{src:r.image,style:_e(r.imageStyle)},null,12,dM)],4))),128)),d("div",{style:_e(e.layout.blackHandSymbol.style)},[d("img",{src:e.layout.blackHandSymbol.image,style:_e(e.layout.blackHandImageStyle)},null,12,fM)],4),(M(!0),N(ke,null,Ue(e.layout.blackHandPieces,r=>(M(),N("div",{key:r.id,style:_e(r.style)},[d("img",{src:r.image,style:_e(e.layout.blackHandImageStyle)},null,12,pM)],4))),128)),d("div",{style:_e(e.layout.whiteHandSymbol.style)},[d("img",{src:e.layout.whiteHandSymbol.image,style:_e(e.layout.whiteHandImageStyle)},null,12,gM)],4),(M(!0),N(ke,null,Ue(e.layout.whiteHandPieces,r=>(M(),N("div",{key:r.id,style:_e(r.style)},[d("img",{src:r.image,style:_e(e.layout.whiteHandImageStyle)},null,12,mM)],4))),128))],4)])}const yM=Ge(lM,[["render",bM],["__scopeId","data-v-ee102612"]]),_M=100,vM=80,SM=150,wM=16/9,EM=ze({name:"ExportBoardImageDialog",components:{BoardView:ql,SimpleBoardView:yM,Icon:Tt},setup(){const e=et(),t=$e(),n=e.record.metadata.getStandardMetadata(J.BLACK_NAME),i=e.record.metadata.getStandardMetadata(J.WHITE_NAME),s=e.record.metadata.getStandardMetadata(J.BLACK_SHORT_NAME),o=e.record.metadata.getStandardMetadata(J.WHITE_SHORT_NAME),r=e.record,a=r.current.move instanceof ot?r.current.move:null,l=H(null),c=H(null),u=H(null),h=H(null),p=yn(new St(window.innerWidth,window.innerHeight)),g=H(window.devicePixelRatio),y=a?`${r.current.number} ${Ni(r.position,a)}`:r.current.nextColor===D.BLACK?"":"",b=new nr,v=()=>{b.after(()=>{p.width=window.innerWidth,p.height=window.innerHeight},_M),g.value=window.devicePixelRatio};nt(()=>{Pt(l.value),Xt(l.value),window.addEventListener("resize",v),u.value.value=t.positionImageSize,h.value.value=t.positionImageHeader}),Ft(()=>{Jt(l.value),window.removeEventListener("resize",v)});const _=Ae(()=>{const Z=t.positionImageSize/g.value,Y=Z*wM;return new St(Math.min(Y,p.width-vM),Math.min(Z,p.height-SM))}),E=Z=>{const Y=Z.target;t.updateAppSetting({positionImageSize:parseInt(Y.value)||400})},w=Z=>{const Y=Z.target;t.updateAppSetting({positionImageHeader:Y.value})},k=Z=>{const Y=Z.target;t.updateAppSetting({positionImageStyle:Y.value})},A=()=>{const Y=c.value.getBoundingClientRect();return new Tb(Y.x,Y.y,Y.width,Y.height)};return{PositionImageStyle:If,t:U,IconType:Qe,dialog:l,board:c,imageSize:u,headerText:h,appSetting:t,lastMove:a,defaultHeader:y,maxSize:_,blackPlayerName:n,whitePlayerName:i,blackPlayerShortName:s,whitePlayerShortName:o,record:r,changeSize:E,changeHeaderText:w,changeType:k,saveAsPNG:()=>{pe.exportCaptureAsPNG(A()).catch(Z=>{e.pushError(Z)})},saveAsJPEG:()=>{pe.exportCaptureAsJPEG(A()).catch(Z=>{e.pushError(Z)})},close:()=>{e.closeModalDialog()}}}});const vc=e=>(cs("data-v-c081b004"),e=e(),us(),e),IM={ref:"dialog"},kM={class:"form-item center"},PM=["value"],AM=["value"],TM=["value"],CM=vc(()=>d("span",{class:"form-item-unit"},"px",-1)),MM=["placeholder"],xM={class:"form-item center"},RM=vc(()=>d("span",null,"PNG",-1)),NM=vc(()=>d("span",null,"JPEG",-1));function OM(e,t,n,i,s,o){const r=ge("SimpleBoardView"),a=ge("BoardView"),l=ge("Icon");return M(),N("div",null,[d("dialog",IM,[d("div",{ref:"board",class:Ze(["board",e.appSetting.positionImageStyle])},[e.appSetting.positionImageStyle===e.PositionImageStyle.BOOK?(M(),He(r,{key:0,"max-size":e.maxSize,position:e.record.position,header:e.appSetting.positionImageHeader||e.defaultHeader,footer:e.record.current.comment,"last-move":e.lastMove},null,8,["max-size","position","header","footer","last-move"])):(M(),He(a,{key:1,"piece-image-type":e.appSetting.pieceImage,"board-image-type":e.appSetting.boardImage,"piece-stand-image-type":e.appSetting.pieceStandImage,"board-label-type":e.appSetting.boardLabelType,"custom-board-image-url":e.appSetting.boardImageFileURL,"custom-piece-stand-image-url":e.appSetting.pieceStandImageFileURL,"max-size":e.maxSize,position:e.record.position,"last-move":e.lastMove,flip:e.appSetting.boardFlipping,"black-player-name":e.blackPlayerName,"white-player-name":e.whitePlayerName},null,8,["piece-image-type","board-image-type","piece-stand-image-type","board-label-type","custom-board-image-url","custom-piece-stand-image-url","max-size","position","last-move","flip","black-player-name","white-player-name"]))],2),d("div",kM,[d("select",{value:e.appSetting.positionImageStyle,onChange:t[0]||(t[0]=(...c)=>e.changeType&&e.changeType(...c))},[d("option",{value:e.PositionImageStyle.BOOK},I(e.t.bookStyle),9,AM),d("option",{value:e.PositionImageStyle.GAME},I(e.t.gameStyle),9,TM)],40,PM),d("input",{ref:"imageSize",class:"size",type:"number",min:"400",max:"2000",onInput:t[1]||(t[1]=(...c)=>e.changeSize&&e.changeSize(...c))},null,544),CM,d("input",{ref:"headerText",class:Ze([{hidden:e.appSetting.positionImageStyle===e.PositionImageStyle.GAME},"header"]),placeholder:e.t.typeCustomTitleHere,onInput:t[2]||(t[2]=(...c)=>e.changeHeaderText&&e.changeHeaderText(...c))},null,42,MM)]),d("div",xM,[d("button",{autofocus:"","data-hotkey":"Enter",onClick:t[3]||(t[3]=(...c)=>e.saveAsPNG&&e.saveAsPNG(...c))},[K(l,{icon:e.IconType.SAVE},null,8,["icon"]),RM]),d("button",{autofocus:"","data-hotkey":"Enter",onClick:t[4]||(t[4]=(...c)=>e.saveAsJPEG&&e.saveAsJPEG(...c))},[K(l,{icon:e.IconType.SAVE},null,8,["icon"]),NM]),d("button",{autofocus:"","data-hotkey":"Escape",onClick:t[5]||(t[5]=(...c)=>e.close&&e.close(...c))},[K(l,{icon:e.IconType.CLOSE},null,8,["icon"]),d("span",null,I(e.t.close),1)])])],512)])}const LM=Ge(EM,[["render",OM],["__scopeId","data-v-c081b004"]]),BM=ze({name:"ImageSelector",props:{defaultUrl:{type:String,default:""}},emits:["select"],setup(e,{emit:t}){const n=et(),i=H(e.defaultUrl);return{t:U,url:i,select:async()=>{n.retainBussyState();try{const o=await pe.showSelectImageDialog(i.value);o&&(i.value=o,t("select",o))}catch(o){n.pushError(o)}finally{n.releaseBussyState()}}}}});const DM={class:"container"},FM=["src"];function $M(e,t,n,i,s,o){return M(),N("div",null,[d("div",DM,[d("button",{class:"thin select",onClick:t[0]||(t[0]=(...r)=>e.select&&e.select(...r))},I(e.t.select),1),e.url?(M(),N("img",{key:0,ref:"preview",class:"preview",src:e.url},null,8,FM)):ie("",!0)])])}const HM=Ge(BM,[["render",$M],["__scopeId","data-v-671f0b32"]]),UM={"\r\n":"crlf","\n":"lf","\r":"cr"},zM={crlf:`\r
`,lf:`
`,cr:"\r"},GM=ze({name:"AppSettingDialog",components:{ImageSelector:HM},setup(){const e=et(),t=$e(),n=H(null),i=H(null),s=H(null),o=H(null),r=H(null),a=H(null),l=H(null),c=H(null),u=H(null),h=H(null),p=H(null),g=H(null),y=H(null),b=H(null),v=H(null),_=H(null),E=H(null),w=H(null),k=H(null),A=H(null),O=H(null),G=H(null),W=H(null),Z=H(null),Y=H(null),Q=H(null),ye=H(null),de=H(null),Le=H(null),Ie=H(null),Ee=H(null),ne=H(null);let re=t.backgroundImageFileURL,oe=t.boardImageFileURL,Oe=t.pieceStandImageFileURL;nt(()=>{Pt(n.value),Xt(n.value)}),Ft(()=>{Jt(n.value)});const Pe=async()=>{const xe={language:i.value.value,thema:s.value.value,backgroundImageType:o.value.value,pieceImage:a.value.value,boardImage:l.value.value,pieceStandImage:u.value.value,boardLabelType:p.value.checked?xs.STANDARD:xs.NONE,leftSideControlType:g.value.checked?Rs.STANDARD:Rs.NONE,rightSideControlType:y.value.checked?Ns.STANDARD:Ns.NONE,tabPaneType:b.value.value,pieceVolume:yt(v.value),clockVolume:yt(_.value),clockPitch:yt(E.value),clockSoundTarget:w.value.value,returnCode:zM[k.value.value],autoSaveDirectory:A.value.value,translateEngineOptionName:O.value.checked,engineTimeoutSeconds:yt(G.value),evaluationViewFrom:W.value.value,coefficientInSigmoid:yt(Z.value),badMoveLevelThreshold1:yt(Y.value),badMoveLevelThreshold2:yt(Q.value),badMoveLevelThreshold3:yt(ye.value),badMoveLevelThreshold4:yt(de.value),enableAppLog:Le.value.checked,enableUSILog:Ie.value.checked,enableCSALog:Ee.value.checked,logLevel:ne.value.value};xe.backgroundImageType!==qn.NONE&&(xe.backgroundImageFileURL=re),xe.boardImage===Mt.CUSTOM_IMAGE&&(xe.boardImageFileURL=oe),xe.pieceStandImage===kn.CUSTOM_IMAGE&&(xe.pieceStandImageFileURL=Oe),e.retainBussyState();try{await $e().updateAppSetting(xe),e.closeAppSettingDialog()}catch(sn){e.pushError(sn)}finally{e.releaseBussyState()}},me=()=>{const xe=r.value;o.value.value!==qn.NONE?xe.classList.remove("hidden"):xe.classList.add("hidden")},it=xe=>{re=xe},lt=()=>{const xe=c.value;l.value.value===Mt.CUSTOM_IMAGE?xe.classList.remove("hidden"):xe.classList.add("hidden")},mt=xe=>{oe=xe},Ye=()=>{const xe=h.value;u.value.value===kn.CUSTOM_IMAGE?xe.classList.remove("hidden"):xe.classList.add("hidden")},wt=xe=>{Oe=xe},Ke=async()=>{e.retainBussyState();try{const xe=await pe.showSelectDirectoryDialog(A.value.value);xe&&(A.value.value=xe)}catch(xe){e.pushError(xe)}finally{e.releaseBussyState()}},bt=()=>{e.closeAppSettingDialog()};return{t:U,Language:Ri,Thema:jl,BackgroundImageType:qn,PieceImageType:ki,BoardImageType:Mt,PieceStandImageType:kn,BoardLabelType:xs,LeftSideControlType:Rs,RightSideControlType:Ns,TabPaneType:mr,EvaluationViewFrom:Kl,LogLevel:_t,dialog:n,language:i,thema:s,backgroundImageType:o,backgroundImageSelector:r,pieceImage:a,boardImage:l,boardImageSelector:c,pieceStandImage:u,pieceStandImageSelector:h,displayBoardLabels:p,displayLeftSideControls:g,displayRightSideControls:y,tabPaneType:b,pieceVolume:v,clockVolume:_,clockPitch:E,clockSoundTarget:w,returnCode:k,autoSaveDirectory:A,translateEngineOptionName:O,engineTimeoutSeconds:G,evaluationViewFrom:W,coefficientInSigmoid:Z,badMoveLevelThreshold1:Y,badMoveLevelThreshold2:Q,badMoveLevelThreshold3:ye,badMoveLevelThreshold4:de,enableAppLog:Le,enableUSILog:Ie,enableCSALog:Ee,logLevel:ne,appSetting:t,returnCodeToName:UM,isNative:_r(),onChangeBackgroundImageType:me,selectBackgroundImageFile:it,onChangeBoardImage:lt,selectBoardImageFile:mt,onChangePieceStandImage:Ye,selectPieceStandImageFile:wt,selectAutoSaveDirectory:Ke,saveAndClose:Pe,cancel:bt}}});const gt=e=>(cs("data-v-2d1284da"),e=e(),us(),e),WM={ref:"dialog"},VM={class:"title"},jM={class:"form-group scroll settings"},KM={class:"section"},qM={class:"section-title"},YM=gt(()=>d("div",{class:"form-group warning"},[d("div",{class:"note"},"  We'd like your help to translate. "),d("div",{class:"note"},"  You should restart this app to change the language. ")],-1)),XM={class:"form-item"},JM={class:"form-item-label-wide"},QM=["value"],ZM=["value"],e4=["value"],t4={class:"form-item"},n4={class:"form-item-label-wide"},i4=["value"],s4=["value"],o4=["value"],r4=["value"],a4=["value"],l4=["value"],c4={class:"form-item"},u4={class:"form-item-label-wide"},h4=["value"],d4=["value"],f4=["value"],p4=["value"],g4=["value"],m4=gt(()=>d("div",{class:"form-item-label-wide"},null,-1)),b4={class:"form-item"},y4={class:"form-item-label-wide"},_4=["value"],v4=["value"],S4=["value"],w4=["value"],E4=["value"],I4={class:"form-item"},k4={class:"form-item-label-wide"},P4=["value"],A4=["value"],T4=["value"],C4=["value"],M4=["value"],x4=["value"],R4=["value"],N4=["value"],O4=["value"],L4=["value"],B4=gt(()=>d("div",{class:"form-item-label-wide"},null,-1)),D4={class:"form-item"},F4={class:"form-item-label-wide"},$4=["value"],H4=["value"],U4=["value"],z4=["value"],G4=["value"],W4=["value"],V4=gt(()=>d("div",{class:"form-item-label-wide"},null,-1)),j4={class:"form-item"},K4={class:"form-item-label-wide"},q4=["checked"],Y4={class:"form-item-label-wide"},X4=["checked"],J4={class:"form-item-label-wide"},Q4=["checked"],Z4={class:"form-item"},ex={class:"form-item-label-wide"},tx=["value"],nx=["value"],ix=["value"],sx=gt(()=>d("hr",null,null,-1)),ox={class:"section"},rx={class:"section-title"},ax={class:"form-item"},lx={class:"form-item-label-wide"},cx=["value"],ux=gt(()=>d("div",{class:"form-item-unit"},"%",-1)),hx={class:"form-item"},dx={class:"form-item-label-wide"},fx=["value"],px=gt(()=>d("div",{class:"form-item-unit"},"%",-1)),gx={class:"form-item"},mx={class:"form-item-label-wide"},bx=["value"],yx={class:"form-item-unit"},_x={class:"form-item"},vx={class:"form-item-label-wide"},Sx=["value"],wx={value:"all"},Ex={value:"onlyUser"},Ix=gt(()=>d("hr",null,null,-1)),kx={class:"section"},Px={class:"section-title"},Ax={class:"form-item"},Tx={class:"form-item-label-wide"},Cx=["value"],Mx=gt(()=>d("option",{value:"crlf"},"CR + LF (Windows)",-1)),xx=gt(()=>d("option",{value:"lf"},"LF (UNIX/Mac)",-1)),Rx={value:"cr"},Nx={class:"form-item"},Ox={class:"form-item-label-wide"},Lx=["value"],Bx=gt(()=>d("hr",null,null,-1)),Dx={class:"section"},Fx={class:"section-title"},$x={class:"form-item"},Hx={class:"form-item-label-wide"},Ux=["checked"],zx={class:"form-item-unit"},Gx={class:"form-item"},Wx={class:"form-item-label-wide"},Vx=["value"],jx={class:"form-item-unit"},Kx=gt(()=>d("hr",null,null,-1)),qx={class:"section"},Yx={class:"section-title"},Xx={class:"form-item"},Jx={class:"form-item-label-wide"},Qx=["value"],Zx=["value"],e2=["value"],t2={class:"form-item"},n2={class:"form-item-label-wide"},i2=["value"],s2={class:"form-item-unit"},o2={class:"form-item"},r2=gt(()=>d("div",{class:"form-item-label-wide"},"",-1)),a2=["value"],l2=gt(()=>d("div",{class:"form-item-unit"},"%",-1)),c2={class:"form-item"},u2=gt(()=>d("div",{class:"form-item-label-wide"},"",-1)),h2=["value"],d2=gt(()=>d("div",{class:"form-item-unit"},"%",-1)),f2={class:"form-item"},p2=gt(()=>d("div",{class:"form-item-label-wide"},"",-1)),g2=["value"],m2=gt(()=>d("div",{class:"form-item-unit"},"%",-1)),b2={class:"form-item"},y2=gt(()=>d("div",{class:"form-item-label-wide"},"",-1)),_2=["value"],v2=gt(()=>d("div",{class:"form-item-unit"},"%",-1)),S2=gt(()=>d("hr",null,null,-1)),w2={class:"section"},E2={class:"section-title"},I2={class:"form-group warning"},k2={key:0,class:"note"},P2={key:1,class:"note"},A2={key:2,class:"note"},T2={key:3,class:"note"},C2={class:"form-item"},M2={class:"form-item-label-wide"},x2=["checked"],R2={class:"form-item"},N2={class:"form-item-label-wide"},O2=["checked"],L2={class:"form-item"},B2={class:"form-item-label-wide"},D2=["checked"],F2={class:"form-item"},$2={class:"form-item-label-wide"},H2=["value"],U2=["value"],z2=["value"],G2=["value"],W2=["value"],V2={class:"main-buttons"};function j2(e,t,n,i,s,o){const r=ge("ImageSelector");return M(),N("div",null,[d("dialog",WM,[d("div",VM,I(e.t.appSettings),1),d("div",jM,[d("div",KM,[d("div",qM,I(e.t.view),1),YM,d("div",XM,[d("div",JM,I(e.t.language),1),d("select",{ref:"language",value:e.appSetting.language},[d("option",{value:e.Language.JA},"",8,ZM),d("option",{value:e.Language.EN},"English",8,e4)],8,QM)]),d("div",t4,[d("div",n4,I(e.t.theme),1),d("select",{ref:"thema",value:e.appSetting.thema},[d("option",{value:e.Thema.STANDARD},I(e.t.standardGreen),9,s4),d("option",{value:e.Thema.CHERRY_BLOSSOM},I(e.t.cherryBlossom),9,o4),d("option",{value:e.Thema.AUTUMN},I(e.t.autumn),9,r4),d("option",{value:e.Thema.SNOW},I(e.t.snow),9,a4),d("option",{value:e.Thema.DARK},I(e.t.dark),9,l4)],8,i4)]),d("div",c4,[d("div",u4,I(e.t.backgroundImage),1),d("select",{ref:"backgroundImageType",value:e.appSetting.backgroundImageType,onChange:t[0]||(t[0]=(...a)=>e.onChangeBackgroundImageType&&e.onChangeBackgroundImageType(...a))},[d("option",{value:e.BackgroundImageType.NONE},I(e.t.none),9,d4),d("option",{value:e.BackgroundImageType.COVER},I(e.t.bgCover),9,f4),d("option",{value:e.BackgroundImageType.CONTAIN},I(e.t.bgContain),9,p4),d("option",{value:e.BackgroundImageType.TILE},I(e.t.bgTile),9,g4)],40,h4)]),d("div",{ref:"backgroundImageSelector",class:Ze(["form-item",{hidden:e.appSetting.backgroundImageType===e.BackgroundImageType.NONE}])},[m4,K(r,{class:"image-selector","default-url":e.appSetting.backgroundImageFileURL,onSelect:e.selectBackgroundImageFile},null,8,["default-url","onSelect"])],2),d("div",b4,[d("div",y4,I(e.t.piece),1),d("select",{ref:"pieceImage",value:e.appSetting.pieceImage},[d("option",{value:e.PieceImageType.HITOMOJI},I(e.t.singleKanjiPiece),9,v4),d("option",{value:e.PieceImageType.HITOMOJI_GOTHIC},I(e.t.singleKanjiGothicPiece),9,S4),d("option",{value:e.PieceImageType.HITOMOJI_DARK},I(e.t.singleKanjiDarkPiece),9,w4),d("option",{value:e.PieceImageType.HITOMOJI_GOTHIC_DARK},I(e.t.singleKanjiGothicDarkPiece),9,E4)],8,_4)]),d("div",I4,[d("div",k4,I(e.t.board),1),d("select",{ref:"boardImage",value:e.appSetting.boardImage,onChange:t[1]||(t[1]=(...a)=>e.onChangeBoardImage&&e.onChangeBoardImage(...a))},[d("option",{value:e.BoardImageType.LIGHT},I(e.t.lightWoodyTexture),9,A4),d("option",{value:e.BoardImageType.WARM},I(e.t.warmWoodTexture),9,T4),d("option",{value:e.BoardImageType.RESIN},I(e.t.regin),9,C4),d("option",{value:e.BoardImageType.RESIN2},I(e.t.regin)+"2",9,M4),d("option",{value:e.BoardImageType.RESIN3},I(e.t.regin)+"3",9,x4),d("option",{value:e.BoardImageType.DARK},I(e.t.dark),9,R4),d("option",{value:e.BoardImageType.GREEN},I(e.t.green),9,N4),d("option",{value:e.BoardImageType.CHERRY_BLOSSOM},I(e.t.cherryBlossom),9,O4),d("option",{value:e.BoardImageType.CUSTOM_IMAGE},I(e.t.customImage),9,L4)],40,P4)]),d("div",{ref:"boardImageSelector",class:Ze(["form-item",{hidden:e.appSetting.boardImage!==e.BoardImageType.CUSTOM_IMAGE}])},[B4,K(r,{class:"image-selector","default-url":e.appSetting.boardImageFileURL,onSelect:e.selectBoardImageFile},null,8,["default-url","onSelect"])],2),d("div",D4,[d("div",F4,I(e.t.pieceStand),1),d("select",{ref:"pieceStandImage",value:e.appSetting.pieceStandImage,onChange:t[2]||(t[2]=(...a)=>e.onChangePieceStandImage&&e.onChangePieceStandImage(...a))},[d("option",{value:e.PieceStandImageType.STANDARD},I(e.t.standard),9,H4),d("option",{value:e.PieceStandImageType.DARK},I(e.t.dark),9,U4),d("option",{value:e.PieceStandImageType.GREEN},I(e.t.green),9,z4),d("option",{value:e.PieceStandImageType.CHERRY_BLOSSOM},I(e.t.cherryBlossom),9,G4),d("option",{value:e.PieceStandImageType.CUSTOM_IMAGE},I(e.t.customImage),9,W4)],40,$4)]),d("div",{ref:"pieceStandImageSelector",class:Ze(["form-item",{hidden:e.appSetting.pieceStandImage!==e.PieceStandImageType.CUSTOM_IMAGE}])},[V4,K(r,{class:"image-selector","default-url":e.appSetting.pieceStandImageFileURL,onSelect:e.selectPieceStandImageFile},null,8,["default-url","onSelect"])],2),d("div",j4,[d("div",K4,I(e.t.displayFileAndRank),1),d("input",{ref:"displayBoardLabels",class:"toggle",checked:e.appSetting.boardLabelType!=e.BoardLabelType.NONE,type:"checkbox"},null,8,q4)]),d("div",{class:Ze([{hidden:!e.isNative},"form-item"])},[d("div",Y4,I(e.t.displayLeftControls),1),d("input",{ref:"displayLeftSideControls",class:"toggle",checked:e.appSetting.leftSideControlType!=e.LeftSideControlType.NONE,type:"checkbox"},null,8,X4)],2),d("div",{class:Ze([{hidden:!e.isNative},"form-item"])},[d("div",J4,I(e.t.displayRightControls),1),d("input",{ref:"displayRightSideControls",class:"toggle",checked:e.appSetting.rightSideControlType!=e.RightSideControlType.NONE,type:"checkbox"},null,8,Q4)],2),d("div",Z4,[d("div",ex,I(e.t.tabViewStyle),1),d("select",{ref:"tabPaneType",value:e.appSetting.tabPaneType},[d("option",{value:e.TabPaneType.SINGLE},I(e.t.oneColumn),9,nx),d("option",{value:e.TabPaneType.DOUBLE},I(e.t.twoColumns),9,ix)],8,tx)])]),sx,d("div",ox,[d("div",rx,I(e.t.sounds),1),d("div",ax,[d("div",lx,I(e.t.pieceLoudness),1),d("input",{ref:"pieceVolume",value:e.appSetting.pieceVolume,type:"number",max:"100",min:"0"},null,8,cx),ux]),d("div",hx,[d("div",dx,I(e.t.clockLoudness),1),d("input",{ref:"clockVolume",value:e.appSetting.clockVolume,type:"number",max:"100",min:"0"},null,8,fx),px]),d("div",gx,[d("div",mx,I(e.t.clockPitch),1),d("input",{ref:"clockPitch",value:e.appSetting.clockPitch,type:"number",max:"880",min:"220"},null,8,bx),d("div",yx,"Hz ("+I(e.t.between(220,880))+")",1)]),d("div",_x,[d("div",vx,I(e.t.clockSoundTarget),1),d("select",{ref:"clockSoundTarget",value:e.appSetting.clockSoundTarget},[d("option",wx,I(e.t.anyTurn),1),d("option",Ex,I(e.t.onlyHumanTurn),1)],8,Sx)])]),Ix,d("div",kx,[d("div",Px,I(e.t.file),1),d("div",Ax,[d("div",Tx,I(e.t.newlineCharacter),1),d("select",{ref:"returnCode",value:e.returnCodeToName[e.appSetting.returnCode]},[Mx,xx,d("option",Rx,"CR ("+I(e.t.old90sMac)+")",1)],8,Cx)]),d("div",Nx,[d("div",Ox,I(e.t.autoSavingDirectory),1),d("input",{ref:"autoSaveDirectory",class:"file-path",value:e.appSetting.autoSaveDirectory,type:"text"},null,8,Lx),d("button",{class:"thin",onClick:t[3]||(t[3]=(...a)=>e.selectAutoSaveDirectory&&e.selectAutoSaveDirectory(...a))},I(e.t.select),1)])]),Bx,d("div",Dx,[d("div",Fx,I(e.t.usiProtocol),1),d("div",$x,[d("div",Hx,I(e.t.translateOptionName),1),d("input",{ref:"translateEngineOptionName",class:"toggle",checked:e.appSetting.translateEngineOptionName,type:"checkbox"},null,8,Ux),d("div",zx,"("+I(e.t.functionalOnJapaneseOnly)+")",1)]),d("div",Gx,[d("div",Wx,I(e.t.maxStartupTime),1),d("input",{ref:"engineTimeoutSeconds",value:e.appSetting.engineTimeoutSeconds,type:"number",max:"300",min:"1"},null,8,Vx),d("div",jx,I(e.t.secondsSuffix)+" ("+I(e.t.between(1,300))+") ",1)])]),Kx,d("div",qx,[d("div",Yx,I(e.t.evaluationAndEstimatedWinRate),1),d("div",Xx,[d("div",Jx,I(e.t.signOfEvaluation),1),d("select",{ref:"evaluationViewFrom",value:e.appSetting.evaluationViewFrom},[d("option",{value:e.EvaluationViewFrom.EACH},I(e.t.swapEachTurnChange),9,Zx),d("option",{value:e.EvaluationViewFrom.BLACK},I(e.t.alwaysSenteIsPositive),9,e2)],8,Qx)]),d("div",t2,[d("div",n2,I(e.t.winRateCoefficient),1),d("input",{ref:"coefficientInSigmoid",value:e.appSetting.coefficientInSigmoid,type:"number",max:"10000",min:"1"},null,8,i2),d("div",s2," ("+I(e.t.recommended)+": "+I(e.t.between(600,1500))+") ",1)]),d("div",o2,[r2,d("input",{ref:"badMoveLevelThreshold1",value:e.appSetting.badMoveLevelThreshold1,type:"number",max:"100",min:"0"},null,8,a2),l2]),d("div",c2,[u2,d("input",{ref:"badMoveLevelThreshold2",value:e.appSetting.badMoveLevelThreshold2,type:"number",max:"100",min:"0"},null,8,h2),d2]),d("div",f2,[p2,d("input",{ref:"badMoveLevelThreshold3",value:e.appSetting.badMoveLevelThreshold3,type:"number",max:"100",min:"0"},null,8,g2),m2]),d("div",b2,[y2,d("input",{ref:"badMoveLevelThreshold4",value:e.appSetting.badMoveLevelThreshold4,type:"number",max:"100",min:"0"},null,8,_2),v2])]),S2,d("div",w2,[d("div",E2,I(e.t.forDevelopers),1),d("div",I2,[e.isNative?ie("",!0):(M(),N("div",k2,I(e.t.inBrowserLogsOutputToConsoleAndIgnoreThisSetting),1)),e.isNative?(M(),N("div",P2,I(e.t.shouldRestartToApplyLogSettings),1)):ie("",!0),e.isNative?(M(),N("div",A2,I(e.t.canOpenLogDirectoryFromMenu),1)):ie("",!0),e.isNative?(M(),N("div",T2,I(e.t.hasNoOldLogCleanUpFeature),1)):ie("",!0)]),d("div",C2,[d("div",M2,I(e.t.enableAppLog),1),d("input",{ref:"enableAppLog",class:"toggle",checked:e.appSetting.enableAppLog,type:"checkbox"},null,8,x2)]),d("div",R2,[d("div",N2,I(e.t.enableUSILog),1),d("input",{ref:"enableUSILog",class:"toggle",checked:e.appSetting.enableUSILog,type:"checkbox"},null,8,O2)]),d("div",L2,[d("div",B2,I(e.t.enableCSALog),1),d("input",{ref:"enableCSALog",class:"toggle",checked:e.appSetting.enableCSALog,type:"checkbox"},null,8,D2)]),d("div",F2,[d("div",$2,I(e.t.logLevel),1),d("select",{ref:"logLevel",value:e.appSetting.logLevel},[d("option",{value:e.LogLevel.DEBUG},"DEBUG",8,U2),d("option",{value:e.LogLevel.INFO},"INFO",8,z2),d("option",{value:e.LogLevel.WARN},"WARN",8,G2),d("option",{value:e.LogLevel.ERROR},"ERROR",8,W2)],8,H2)])])]),d("div",V2,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[4]||(t[4]=a=>e.saveAndClose())},I(e.t.saveAndClose),1),d("button",{"data-hotkey":"Escape",onClick:t[5]||(t[5]=a=>e.cancel())},I(e.t.cancel),1)])],512)])}const K2=Ge(GM,[["render",j2],["__scopeId","data-v-2d1284da"]]),q2=ze({name:"PasteDialog",setup(){const e=et(),t=H(null),n=H(null);return e.retainBussyState(),nt(async()=>{try{Pt(t.value),Xt(t.value),_r()&&(n.value.value=await navigator.clipboard.readText())}finally{e.releaseBussyState()}}),Ft(()=>{Jt(t.value)}),{t:U,dialog:t,textarea:n,onOk:()=>{const o=n.value.value;if(!o){e.pushError(new Error(U.emptyRecordInput));return}e.closeModalDialog(),e.pasteRecord(o)},onCancel:()=>{e.closeModalDialog()},isNative:_r()}}});const Y2={ref:"dialog"},X2={ref:"content"},J2={class:"form-group"},Q2={class:"message"},Z2={class:"message"},eR={key:0,class:"message"},tR={key:1,class:"message"},nR={ref:"textarea"},iR={class:"main-buttons"};function sR(e,t,n,i,s,o){return M(),N("div",null,[d("dialog",Y2,[d("div",X2,[d("div",J2,[d("div",Q2,I(e.t.importingFollowingRecordOrPosition),1),d("div",Z2,I(e.t.supportsKIFCSAUSI),1),e.isNative?ie("",!0):(M(),N("div",eR,I(e.t.plesePasteRecordIntoTextArea),1)),e.isNative?ie("",!0):(M(),N("div",tR,I(e.t.desktopVersionPastesAutomatically),1)),d("textarea",nR,null,512)])],512),d("div",iR,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[0]||(t[0]=(...r)=>e.onOk&&e.onOk(...r))},I(e.t.import),1),d("button",{"data-hotkey":"Escape",onClick:t[1]||(t[1]=(...r)=>e.onCancel&&e.onCancel(...r))},I(e.t.cancel),1)])],512)])}const oR=Ge(q2,[["render",sR],["__scopeId","data-v-e775bbea"]]),rR=ze({name:"BussyMessage",components:{Icon:Tt},setup(){const e=H(null);return nt(()=>{Pt(e.value)}),{t:U,dialog:e,IconType:Qe}}});const aR={ref:"dialog",class:"bussy"},lR={class:"message-box"},cR={class:"message"};function uR(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",null,[d("dialog",aR,[d("div",lR,[K(r,{icon:e.IconType.BUSSY},null,8,["icon"]),d("div",cR,I(e.t.processingPleaseWait),1)])],512)])}const hR=Ge(rR,[["render",uR],["__scopeId","data-v-cf223a04"]]),dR=ze({name:"InfoMessage",components:{Icon:Tt},setup(){const e=et(),t=H(null),n=()=>{e.confirmationOk()},i=()=>{e.confirmationCancel()};return nt(()=>{Pt(t.value,i),Xt(t.value)}),Ft(()=>{Jt(t.value)}),{t:U,dialog:t,store:e,onOk:n,onClose:i,IconType:Qe}}});const fR={ref:"dialog",class:"confirm"},pR={class:"message-box"},gR={class:"message"},mR={class:"main-buttons"};function bR(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",null,[d("dialog",fR,[d("div",pR,[K(r,{icon:e.IconType.QUESTION},null,8,["icon"]),d("div",gR,I(e.store.confirmation),1)]),d("div",mR,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[0]||(t[0]=a=>e.onOk())},"OK"),d("button",{"data-hotkey":"Escape",onClick:t[1]||(t[1]=a=>e.onClose())},I(e.t.cancel),1)])],512)])}const yR=Ge(dR,[["render",bR],["__scopeId","data-v-27f6a1ea"]]),_R=ze({name:"InfoMessage",components:{Icon:Tt},setup(){const e=et(),t=H(null);return nt(()=>{Pt(t.value),Xt(t.value)}),Ft(()=>{Jt(t.value)}),{t:U,dialog:t,store:e,onClose:()=>{e.dequeueMessage()},IconType:Qe}}});const vR={ref:"dialog",class:"info"},SR={class:"message-box"},wR={class:"message"},ER={key:0,class:"list"},IR={class:"main-buttons"};function kR(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",null,[d("dialog",vR,[d("div",SR,[K(r,{icon:e.IconType.INFO},null,8,["icon"]),d("div",wR,I(e.store.message.text),1)]),(M(!0),N(ke,null,Ue(e.store.message.attachments,(a,l)=>(M(),N("div",{key:l,class:"attachment"},[a.type==="list"?(M(),N("ul",ER,[(M(!0),N(ke,null,Ue(a.items,(c,u)=>(M(),N("li",{key:u,class:"list-item"},[ro(I(c.text)+" ",1),d("ul",null,[(M(!0),N(ke,null,Ue(c.children,(h,p)=>(M(),N("li",{key:p,class:"list-child-item"},I(h),1))),128))])]))),128))])):ie("",!0)]))),128)),d("div",IR,[d("button",{autofocus:"","data-hotkey":"Escape",onClick:t[0]||(t[0]=a=>e.onClose())},I(e.t.close),1)])],512)])}const PR=Ge(_R,[["render",kR],["__scopeId","data-v-cd69b67b"]]),AR=ze({name:"ErrorMessage",components:{Icon:Tt},setup(){const e=et(),t=H(null);return nt(()=>{Pt(t.value),Xt(t.value)}),Ft(()=>{Jt(t.value)}),{t:U,dialog:t,store:e,onClose:()=>{e.clearErrors()},IconType:Qe}}});const TR={ref:"dialog",class:"error"},CR={class:"message-box"},MR={class:"column"},xR={class:"notice"},RR={class:"index"},NR={key:0},OR={class:"message"},LR={class:"main-buttons"};function BR(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",null,[d("dialog",TR,[d("div",CR,[K(r,{icon:e.IconType.ERROR},null,8,["icon"]),d("div",MR,[d("div",xR,I(e.t.errorsOccurred(e.store.errors.length)),1),(M(!0),N(ke,null,Ue(e.store.errors,(a,l)=>(M(),N("div",{key:l,class:"item"},[d("p",RR,[ro(I(l+1)+" ",1),a.count>=2?(M(),N("span",NR,"("+I(a.count)+" )",1)):ie("",!0)]),d("p",OR,I(a.message),1)]))),128))])]),d("div",LR,[d("button",{autofocus:"","data-hotkey":"Escape",onClick:t[0]||(t[0]=a=>e.onClose())},I(e.t.close),1)])],512)])}const DR=Ge(AR,[["render",BR],["__scopeId","data-v-f1c74b50"]]),FR=ze({name:"ResearchDialog",components:{PlayerSelector:ta},setup(){const e=et(),t=H(null),n=H(null),i=H(null),s=H(null),o=H(null),r=H(null),a=H(null),l=H(br()),c=H(new Wn),u=H("");e.retainBussyState(),nt(async()=>{var _;Pt(t.value),Xt(t.value);try{l.value=await pe.loadAnalysisSetting(),c.value=await pe.loadUSIEngineSetting(),u.value=((_=l.value.usi)==null?void 0:_.uri)||""}catch(E){e.pushError(E),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Ft(()=>{Jt(t.value)});const h=()=>{i.value.disabled=!n.value.checked,o.value.disabled=!s.value.checked},p=()=>{if(!u.value||!c.value.hasEngine(u.value)){e.pushError("");return}const E={usi:c.value.getEngine(u.value),startCriteria:{enableNumber:n.value.checked,number:yt(i.value)},endCriteria:{enableNumber:s.value.checked,number:yt(o.value)},perMoveCriteria:{maxSeconds:yt(r.value)},commentBehavior:a.value.value};e.startAnalysis(E)},g=()=>{e.closeModalDialog()},y=async _=>{c.value=_},b=_=>{u.value=_},v=Ae(()=>({enableStartNumber:l.value.startCriteria.enableNumber,startNumber:l.value.startCriteria.number,enableEndNumber:l.value.endCriteria.enableNumber,endNumber:l.value.endCriteria.number,maxSecondsPerMove:l.value.perMoveCriteria.maxSeconds,commentBehavior:l.value.commentBehavior}));return{t:U,CommentBehavior:$n,dialog:t,engineSettings:c,engineURI:u,enableStartNumber:n,startNumber:i,enableEndNumber:s,endNumber:o,maxSecondsPerMove:r,commentBehavior:a,defaultValues:v,updateToggle:h,onStart:p,onCancel:g,onUpdatePlayerSetting:y,onSelectPlayer:b}}});const $R={ref:"dialog",class:"root"},HR={class:"title"},UR={class:"form-group"},zR={class:"form-group"},GR={class:"form-item"},WR=["checked"],VR={class:"form-item-unit"},jR=["disabled","value"],KR={class:"form-item-unit"},qR={class:"form-group"},YR={class:"form-item"},XR=["checked"],JR={class:"form-item-unit"},QR=["disabled","value"],ZR={class:"form-item-unit"},eN={class:"form-group"},tN={class:"form-item"},nN={class:"form-item-unit"},iN=["value"],sN={class:"form-item-unit"},oN={class:"form-group"},rN={class:"form-item"},aN={class:"form-item-label-wide"},lN=["value"],cN=["value"],uN=["value"],hN=["value"],dN=["value"],fN={class:"main-buttons"};function pN(e,t,n,i,s,o){const r=ge("PlayerSelector");return M(),N("div",null,[d("dialog",$R,[d("div",HR,I(e.t.recordAnalysis),1),d("div",UR,[d("div",null,I(e.t.searchEngine),1),K(r,{"player-uri":e.engineURI,"engine-settings":e.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:e.onSelectPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),d("div",zR,[d("div",null,I(e.t.startCriteria),1),d("div",GR,[d("input",{ref:"enableStartNumber",class:"toggle",type:"checkbox",checked:e.defaultValues.enableStartNumber,onChange:t[0]||(t[0]=(...a)=>e.updateToggle&&e.updateToggle(...a))},null,40,WR),d("div",VR,I(e.t.fromPrefix),1),d("input",{ref:"startNumber",class:"small",type:"number",min:"1",step:"1",disabled:!e.defaultValues.enableStartNumber,value:e.defaultValues.startNumber},null,8,jR),d("div",KR,I(e.t.plySuffix)+I(e.t.fromSuffix),1)])]),d("div",qR,[d("div",null,I(e.t.endCriteria),1),d("div",YR,[d("input",{ref:"enableEndNumber",class:"toggle",type:"checkbox",checked:e.defaultValues.enableEndNumber,onChange:t[1]||(t[1]=(...a)=>e.updateToggle&&e.updateToggle(...a))},null,40,XR),d("div",JR,I(e.t.toPrefix),1),d("input",{ref:"endNumber",class:"small",type:"number",min:"1",step:"1",disabled:!e.defaultValues.enableEndNumber,value:e.defaultValues.endNumber},null,8,QR),d("div",ZR,I(e.t.plySuffix)+I(e.t.toSuffix),1)])]),d("div",eN,[d("div",null,I(e.t.endCriteria1Move),1),d("div",tN,[d("div",nN,I(e.t.toPrefix),1),d("input",{ref:"maxSecondsPerMove",class:"small",type:"number",min:"0",step:"1",value:e.defaultValues.maxSecondsPerMove},null,8,iN),d("div",sN,I(e.t.secondsSuffix)+I(e.t.toSuffix),1)])]),d("div",oN,[d("div",null,I(e.t.outputSettings),1),d("div",rN,[d("div",aN,I(e.t.moveComments),1),d("select",{ref:"commentBehavior",size:"1",value:e.defaultValues.commentBehavior},[d("option",{value:e.CommentBehavior.NONE},I(e.t.noOutputs),9,cN),d("option",{value:e.CommentBehavior.INSERT},I(e.t.insertCommentToTop),9,uN),d("option",{value:e.CommentBehavior.APPEND},I(e.t.appendCommentToBottom),9,hN),d("option",{value:e.CommentBehavior.OVERWRITE},I(e.t.overwrite),9,dN)],8,lN)])]),d("div",fN,[d("button",{"data-hotkey":"Enter",autofocus:"",onClick:t[2]||(t[2]=a=>e.onStart())},"  "),d("button",{"data-hotkey":"Escape",onClick:t[3]||(t[3]=a=>e.onCancel())},"")])],512)])}const gN=Ge(FR,[["render",pN],["__scopeId","data-v-c198be91"]]),mN=ze({name:"CSAGameReadyDialog",components:{Icon:Tt},setup(){const e=et(),t=H(null),n=H(0);let i=0;return nt(()=>{Pt(t.value),Xt(t.value)}),Ft(()=>{Jt(t.value),window.clearInterval(i)}),ti(()=>e.csaGameState,o=>{window.clearInterval(i),o===ni.LOGIN_RETRY_INTERVAL&&(n.value=Df,i=window.setInterval(()=>{n.value--},1e3))}),{dialog:t,IconType:Qe,store:e,CSAGameState:ni,remainingSeconds:n,onLogout:()=>{e.cancelCSAGame()}}}});const bN={ref:"dialog",class:"bussy"},yN={class:"message-box"},_N={class:"message"},vN={key:0},SN={key:1},wN={key:2},EN={key:0,class:"main-buttons"};function IN(e,t,n,i,s,o){const r=ge("Icon");return M(),N("div",null,[d("dialog",bN,[d("div",yN,[K(r,{icon:e.IconType.BUSSY},null,8,["icon"]),d("div",_N,[e.store.csaGameState===e.CSAGameState.READY?(M(),N("span",vN,"  ")):ie("",!0),e.store.csaGameState===e.CSAGameState.LOGIN_RETRY_INTERVAL?(M(),N("span",SN," CSA"+I(e.remainingSeconds)+" ",1)):ie("",!0),e.store.csaGameState===e.CSAGameState.WAITING_LOGIN?(M(),N("span",wN," CSA ")):ie("",!0)])]),e.store.csaGameState===e.CSAGameState.READY||e.store.csaGameState===e.CSAGameState.LOGIN_RETRY_INTERVAL?(M(),N("div",EN,[d("button",{autofocus:"","data-hotkey":"Escape",onClick:t[0]||(t[0]=a=>e.onLogout())},"  ")])):ie("",!0)],512)])}const kN=Ge(mN,[["render",IN],["__scopeId","data-v-f95b1a40"]]),PN=ze({name:"App",components:{StandardLayout:y8,GameDialog:kT,CSAGameDialog:NC,ResearchDialog:GC,USIEngineManagementDialog:oM,ExportPositionImageDialog:LM,AppSettingDialog:K2,PasteDialog:oR,BussyMessage:hR,ConfirmDialog:yR,InfoMessage:PR,ErrorMessage:DR,AnalysisDialog:gN,CSAGameReadyDialog:kN},setup(){const e=$e(),t=et(),n=Ae(()=>({game:t.appState===V.GAME_DIALOG,csaGame:t.appState===V.CSA_GAME_DIALOG,research:t.appState===V.RESEARCH_DIALOG,analysis:t.appState===V.ANALYSIS_DIALOG,usiEngineSetting:t.appState===V.USI_ENGINE_SETTING_DIALOG,exportPositionImage:t.appState===V.EXPORT_POSITION_IMAGE_DIALOG,appSetting:t.isAppSettingDialogVisible,paste:t.appState===V.PASTE_DIALOG,bussy:t.isBussy,confirm:t.confirmation!==void 0,csaGameReady:t.csaGameState===ni.WAITING_LOGIN||t.csaGameState===ni.READY||t.csaGameState===ni.LOGIN_RETRY_INTERVAL}));return nt(()=>{const s=document.getElementsByTagName("body")[0];s.addEventListener("copy",o=>{t.copyRecordKIF(),o.preventDefault()}),s.addEventListener("paste",o=>{t.showPasteDialog(),o.preventDefault()}),s.addEventListener("dragover",o=>{o.preventDefault()}),s.addEventListener("drop",o=>{if(o.dataTransfer&&o.dataTransfer.files[0]){const r=o.dataTransfer.files[0].path;t.openRecord(r)}o.preventDefault()})}),{style:Ae(()=>{if(e.backgroundImageType==qn.NONE||!e.backgroundImageFileURL)return{};let s="";switch(e.backgroundImageType){case qn.COVER:s="cover";break;case qn.CONTAIN:s="contain";break;case qn.TILE:s="auto";break}return{"background-image":`url("${e.backgroundImageFileURL}")`,"background-size":s}}),appSetting:e,store:t,dialogVisibilities:n}}});function AN(e,t,n,i,s,o){const r=ge("StandardLayout"),a=ge("GameDialog"),l=ge("CSAGameDialog"),c=ge("ResearchDialog"),u=ge("AnalysisDialog"),h=ge("USIEngineManagementDialog"),p=ge("ExportPositionImageDialog"),g=ge("AppSettingDialog"),y=ge("PasteDialog"),b=ge("BussyMessage"),v=ge("ConfirmDialog"),_=ge("CSAGameReadyDialog"),E=ge("InfoMessage"),w=ge("ErrorMessage");return M(),N("div",{class:Ze(["root full",e.appSetting.thema]),style:_e(e.style)},[K(r,{class:"full"}),e.dialogVisibilities.game?(M(),He(a,{key:0})):ie("",!0),e.dialogVisibilities.csaGame?(M(),He(l,{key:1})):ie("",!0),e.dialogVisibilities.research?(M(),He(c,{key:2})):ie("",!0),e.dialogVisibilities.analysis?(M(),He(u,{key:3})):ie("",!0),e.dialogVisibilities.usiEngineSetting?(M(),He(h,{key:4})):ie("",!0),e.dialogVisibilities.exportPositionImage?(M(),He(p,{key:5})):ie("",!0),e.dialogVisibilities.appSetting?(M(),He(g,{key:6})):ie("",!0),e.dialogVisibilities.paste?(M(),He(y,{key:7})):ie("",!0),e.dialogVisibilities.bussy?(M(),He(b,{key:8})):ie("",!0),e.dialogVisibilities.confirm?(M(),He(v,{key:9})):ie("",!0),e.dialogVisibilities.csaGameReady?(M(),He(_,{key:10})):ie("",!0),e.store.hasMessage?(M(),He(E,{key:11})):ie("",!0),e.store.hasError?(M(),He(w,{key:12})):ie("",!0)],6)}const TN=Ge(PN,[["render",AN],["__scopeId","data-v-a4fd2b7d"]]);var Se=(e=>(e.NEW_RECORD="newRecord",e.OPEN_RECORD="openRecord",e.SAVE_RECORD="saveRecord",e.SAVE_RECORD_AS="saveRecordAs",e.EXPORT_POSITION_IMAGE="exportPositionImage",e.COPY_RECORD="copyRecord",e.COPY_RECORD_CSA="copyRecordCsa",e.COPY_RECORD_USI_BEFORE="copyRecordUsiBefore",e.COPY_RECORD_USI_ALL="copyRecordUsiAll",e.COPY_BOARD_SFEN="copyRecordSfen",e.PASTE_RECORD="pasteRecord",e.INSERT_INTERRUPT="insertInterrupt",e.INSERT_RESIGN="insertResign",e.INSERT_DRAW="insertDraw",e.INSERT_IMPASS="insertImpass",e.INSERT_REPETITION_DRAW="insertRepetitionDraw",e.INSERT_MATE="insertMate",e.INSERT_TIMEOUT="insertTimeout",e.INSERT_FOUL_WIN="insertFoulWin",e.INSERT_FOUL_LOSE="insertFoulLose",e.INSERT_ENTERING_OF_KING="insertEnteringOfKing",e.INSERT_WIN_BY_DEFAULT="insertWinByDefault",e.INSERT_LOSE_BY_DEFAULT="insertLossByDefault",e.REMOVE_CURRENT_MOVE="remvoeCurrentMove",e.START_POSITION_EDITING="startPositionEditing",e.END_POSITION_EDITING="endPositionEditing",e.CHANGE_TURN="changeTurn",e.INIT_POSITION_STANDARD="initPositionStandard",e.INIT_POSITION_HANDICAP_LANCE="initPositionHandicapLance",e.INIT_POSITION_HANDICAP_RIGHT_LANCE="initPositionHandicapRightLance",e.INIT_POSITION_HANDICAP_BISHOP="initPositionHandicapBishop",e.INIT_POSITION_HANDICAP_ROOK="initPositionHandicapRook",e.INIT_POSITION_HANDICAP_ROOK_LANCE="initPositionHandicapRookLance",e.INIT_POSITION_HANDICAP_2PIECES="initPositionHandicap2Pieces",e.INIT_POSITION_HANDICAP_4PIECES="initPositionHandicap4Pieces",e.INIT_POSITION_HANDICAP_6PIECES="initPositionHandicap6Pieces",e.INIT_POSITION_HANDICAP_8PIECES="initPositionHandicap8Pieces",e.INIT_POSITION_TSUME_SHOGI="initPositionTsumeShogi",e.INIT_POSITION_TSUME_SHOGI_2KINGS="initPositionTsumeShogi2Kings",e.START_RESEARCH="startResearch",e.STOP_RESEARCH="stopResearch",e.START_ANALYSIS="startAnalysis",e.STOP_ANALYSIS="stopAnalysis",e.START_GAME="startGame",e.START_CSA_GAME="startCSAGame",e.STOP_GAME="stopGame",e.RESIGN="resign",e.WIN="win",e.LOGOUT="logout",e.FLIP_BOARD="flipBoard",e.APP_SETTING_DIALOG="appSetting",e.USI_ENGINE_SETTING_DIALOG="usiEngineSetting",e))(Se||{});function CN(){const e=et();We.onSendError(t=>{e.pushError(t)}),We.onMenuEvent(t=>{if(!e.isBussy)switch(t){case Se.NEW_RECORD:e.resetRecord();break;case Se.OPEN_RECORD:e.openRecord();break;case Se.SAVE_RECORD:e.saveRecord({overwrite:!0});break;case Se.SAVE_RECORD_AS:e.saveRecord();break;case Se.EXPORT_POSITION_IMAGE:e.showExportBoardImageDialog();break;case Se.COPY_RECORD:e.copyRecordKIF();break;case Se.COPY_RECORD_CSA:e.copyRecordCSA();break;case Se.COPY_RECORD_USI_BEFORE:e.copyRecordUSIBefore();break;case Se.COPY_RECORD_USI_ALL:e.copyRecordUSIAll();break;case Se.COPY_BOARD_SFEN:e.copyBoardSFEN();break;case Se.PASTE_RECORD:e.showPasteDialog();break;case Se.INSERT_INTERRUPT:e.insertSpecialMove(ce.INTERRUPT);break;case Se.INSERT_RESIGN:e.insertSpecialMove(ce.RESIGN);break;case Se.INSERT_DRAW:e.insertSpecialMove(ce.DRAW);break;case Se.INSERT_IMPASS:e.insertSpecialMove(ce.IMPASS);break;case Se.INSERT_REPETITION_DRAW:e.insertSpecialMove(ce.REPETITION_DRAW);break;case Se.INSERT_MATE:e.insertSpecialMove(ce.MATE);break;case Se.INSERT_TIMEOUT:e.insertSpecialMove(ce.TIMEOUT);break;case Se.INSERT_FOUL_WIN:e.insertSpecialMove(ce.FOUL_WIN);break;case Se.INSERT_FOUL_LOSE:e.insertSpecialMove(ce.FOUL_LOSE);break;case Se.INSERT_ENTERING_OF_KING:e.insertSpecialMove(ce.ENTERING_OF_KING);break;case Se.INSERT_WIN_BY_DEFAULT:e.insertSpecialMove(ce.WIN_BY_DEFAULT);break;case Se.INSERT_LOSE_BY_DEFAULT:e.insertSpecialMove(ce.LOSE_BY_DEFAULT);break;case Se.REMOVE_CURRENT_MOVE:e.removeCurrentMove();break;case Se.START_POSITION_EDITING:e.startPositionEditing();break;case Se.END_POSITION_EDITING:e.endPositionEditing();break;case Se.CHANGE_TURN:e.changeTurn();break;case Se.INIT_POSITION_STANDARD:e.initializePosition(we.STANDARD);break;case Se.INIT_POSITION_HANDICAP_LANCE:e.initializePosition(we.HANDICAP_LANCE);break;case Se.INIT_POSITION_HANDICAP_RIGHT_LANCE:e.initializePosition(we.HANDICAP_RIGHT_LANCE);break;case Se.INIT_POSITION_HANDICAP_BISHOP:e.initializePosition(we.HANDICAP_BISHOP);break;case Se.INIT_POSITION_HANDICAP_ROOK:e.initializePosition(we.HANDICAP_ROOK);break;case Se.INIT_POSITION_HANDICAP_ROOK_LANCE:e.initializePosition(we.HANDICAP_ROOK_LANCE);break;case Se.INIT_POSITION_HANDICAP_2PIECES:e.initializePosition(we.HANDICAP_2PIECES);break;case Se.INIT_POSITION_HANDICAP_4PIECES:e.initializePosition(we.HANDICAP_4PIECES);break;case Se.INIT_POSITION_HANDICAP_6PIECES:e.initializePosition(we.HANDICAP_6PIECES);break;case Se.INIT_POSITION_HANDICAP_8PIECES:e.initializePosition(we.HANDICAP_8PIECES);break;case Se.INIT_POSITION_TSUME_SHOGI:e.initializePosition(we.TSUME_SHOGI);break;case Se.INIT_POSITION_TSUME_SHOGI_2KINGS:e.initializePosition(we.TSUME_SHOGI_2KINGS);break;case Se.START_GAME:e.showGameDialog();break;case Se.START_CSA_GAME:e.showCSAGameDialog();break;case Se.STOP_GAME:e.stopGame();break;case Se.RESIGN:Ji.resign();break;case Se.WIN:Ji.win();break;case Se.LOGOUT:e.cancelCSAGame();break;case Se.START_RESEARCH:e.showResearchDialog();break;case Se.STOP_RESEARCH:e.stopResearch();break;case Se.START_ANALYSIS:e.showAnalysisDialog();break;case Se.STOP_ANALYSIS:e.stopAnalysis();break;case Se.FLIP_BOARD:$e().flipBoard();break;case Se.APP_SETTING_DIALOG:e.showAppSettingDialog();break;case Se.USI_ENGINE_SETTING_DIALOG:e.showUsiEngineManagementDialog();break}}),We.onUSIBestMove(cy),We.onUSIInfo((t,n,i,s)=>{const o=JSON.parse(s);e.updateUSIInfo(t,n,i,o),Mu(t,n,o)}),We.onUSIPonderInfo((t,n,i,s)=>{const o=JSON.parse(s);e.updateUSIPonderInfo(t,n,i,o),Mu(t,n,o)}),We.onCSAGameSummary((t,n)=>{My(t,JSON.parse(n))}),We.onCSAReject(xy),We.onCSAStart((t,n)=>{Ry(t,JSON.parse(n))}),We.onCSAMove((t,n,i)=>{Ny(t,n,JSON.parse(i))}),We.onCSAGameResult(Oy),We.onCSAClose(Ly),ti(()=>[e.appState,e.isBussy],([t,n])=>We.updateAppState(t,n)),We.updateAppState(e.appState,e.isBussy)}pe.log(_t.INFO,`start renderer process: APP_VERSION=${Cf.appVersion}`);Dn.register(...UP);CN();function Wp(e){if(!document)return;const t=U.electronShogi,n=Cf.appVersion;e?document.title=`${t} Version ${n} - ${e}`:document.title=`${t} Version ${n}`}const Oo=et().addListener("changeFilePath",Wp);Promise.allSettled([$e().loadAppSetting().catch(e=>{Oo.pushError(new Error(": "+e))}),pe.getRecordPathFromProcArg().then(e=>{e&&Oo.openRecord(e)}).catch(e=>{Oo.pushError(new Error(": "+e))})]).finally(()=>{const e=$e().language;pe.log(_t.INFO,`set language: ${e}`),Ab(e),Wp(Oo.recordFilePath),pe.log(_t.INFO,"mount app"),f0(TN).mount("#app")});
