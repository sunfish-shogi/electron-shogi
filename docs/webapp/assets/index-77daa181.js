var rp=Object.defineProperty;var ap=(t,e,i)=>e in t?rp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var M=(t,e,i)=>(ap(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();function el(t,e){const i=Object.create(null),n=t.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return e?s=>!!i[s.toLowerCase()]:s=>!!i[s]}function He(t){if(ke(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=yt(n)?hp(n):He(n);if(s)for(const o in s)e[o]=s[o]}return e}else{if(yt(t))return t;if(at(t))return t}}const lp=/;(?![^(]*\))/g,cp=/:([^]+)/,up=/\/\*.*?\*\//gs;function hp(t){const e={};return t.replace(up,"").split(lp).forEach(i=>{if(i){const n=i.split(cp);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ei(t){let e="";if(yt(t))e=t;else if(ke(t))for(let i=0;i<t.length;i++){const n=ei(t[i]);n&&(e+=n+" ")}else if(at(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const dp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fp=el(dp);function Th(t){return!!t||t===""}const fe=t=>yt(t)?t:t==null?"":ke(t)||at(t)&&(t.toString===Nh||!Te(t.toString))?JSON.stringify(t,Bh,2):String(t),Bh=(t,e)=>e&&e.__v_isRef?Bh(t,e.value):zn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:Rh(e)?{[`Set(${e.size})`]:[...e.values()]}:at(e)&&!ke(e)&&!Oh(e)?String(e):e,rt={},Un=[],pi=()=>{},pp=()=>!1,gp=/^on[^a-z]/,br=t=>gp.test(t),tl=t=>t.startsWith("onUpdate:"),Ut=Object.assign,il=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},mp=Object.prototype.hasOwnProperty,Fe=(t,e)=>mp.call(t,e),ke=Array.isArray,zn=t=>_r(t)==="[object Map]",Rh=t=>_r(t)==="[object Set]",Te=t=>typeof t=="function",yt=t=>typeof t=="string",nl=t=>typeof t=="symbol",at=t=>t!==null&&typeof t=="object",Dh=t=>at(t)&&Te(t.then)&&Te(t.catch),Nh=Object.prototype.toString,_r=t=>Nh.call(t),bp=t=>_r(t).slice(8,-1),Oh=t=>_r(t)==="[object Object]",sl=t=>yt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Io=el(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yr=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},_p=/-(\w)/g,Ci=yr(t=>t.replace(_p,(e,i)=>i?i.toUpperCase():"")),yp=/\B([A-Z])/g,is=yr(t=>t.replace(yp,"-$1").toLowerCase()),vr=yr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Or=yr(t=>t?`on${vr(t)}`:""),Rs=(t,e)=>!Object.is(t,e),Lr=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},Wo=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},Lh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ql;const vp=()=>ql||(ql=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let yi;class Sp{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=yi,!e&&yi&&(this.index=(yi.scopes||(yi.scopes=[])).push(this)-1)}run(e){if(this.active){const i=yi;try{return yi=this,e()}finally{yi=i}}}on(){yi=this}off(){yi=this.parent}stop(e){if(this.active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this.active=!1}}}function wp(t,e=yi){e&&e.active&&e.effects.push(t)}const ol=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Fh=t=>(t.w&on)>0,$h=t=>(t.n&on)>0,Ep=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=on},Ap=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const s=e[n];Fh(s)&&!$h(s)?s.delete(t):e[i++]=s,s.w&=~on,s.n&=~on}e.length=i}},ba=new WeakMap;let fs=0,on=1;const _a=30;let hi;const Cn=Symbol(""),ya=Symbol("");class rl{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,wp(this,n)}run(){if(!this.active)return this.fn();let e=hi,i=en;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=hi,hi=this,en=!0,on=1<<++fs,fs<=_a?Ep(this):Yl(this),this.fn()}finally{fs<=_a&&Ap(this),on=1<<--fs,hi=this.parent,en=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){hi===this?this.deferStop=!0:this.active&&(Yl(this),this.onStop&&this.onStop(),this.active=!1)}}function Yl(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let en=!0;const Hh=[];function ns(){Hh.push(en),en=!1}function ss(){const t=Hh.pop();en=t===void 0?!0:t}function ti(t,e,i){if(en&&hi){let n=ba.get(t);n||ba.set(t,n=new Map);let s=n.get(i);s||n.set(i,s=ol()),Uh(s)}}function Uh(t,e){let i=!1;fs<=_a?$h(t)||(t.n|=on,i=!Fh(t)):i=!t.has(hi),i&&(t.add(hi),hi.deps.push(t))}function zi(t,e,i,n,s,o){const r=ba.get(t);if(!r)return;let a=[];if(e==="clear")a=[...r.values()];else if(i==="length"&&ke(t)){const l=Lh(n);r.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(i!==void 0&&a.push(r.get(i)),e){case"add":ke(t)?sl(i)&&a.push(r.get("length")):(a.push(r.get(Cn)),zn(t)&&a.push(r.get(ya)));break;case"delete":ke(t)||(a.push(r.get(Cn)),zn(t)&&a.push(r.get(ya)));break;case"set":zn(t)&&a.push(r.get(Cn));break}if(a.length===1)a[0]&&va(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);va(ol(l))}}function va(t,e){const i=ke(t)?t:[...t];for(const n of i)n.computed&&Xl(n);for(const n of i)n.computed||Xl(n)}function Xl(t,e){(t!==hi||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const xp=el("__proto__,__v_isRef,__isVue"),zh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(nl)),Ip=al(),kp=al(!1,!0),Cp=al(!0),Jl=Pp();function Pp(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const n=Ve(this);for(let o=0,r=this.length;o<r;o++)ti(n,"get",o+"");const s=n[e](...i);return s===-1||s===!1?n[e](...i.map(Ve)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){ns();const n=Ve(this)[e].apply(this,i);return ss(),n}}),t}function al(t=!1,e=!1){return function(n,s,o){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&o===(t?e?Vp:Kh:e?jh:Vh).get(n))return n;const r=ke(n);if(!t&&r&&Fe(Jl,s))return Reflect.get(Jl,s,o);const a=Reflect.get(n,s,o);return(nl(s)?zh.has(s):xp(s))||(t||ti(n,"get",s),e)?a:Rt(a)?r&&sl(s)?a:a.value:at(a)?t?qh(a):Wi(a):a}}const Mp=Wh(),Tp=Wh(!0);function Wh(t=!1){return function(i,n,s,o){let r=i[n];if(Xn(r)&&Rt(r)&&!Rt(s))return!1;if(!t&&(!Go(s)&&!Xn(s)&&(r=Ve(r),s=Ve(s)),!ke(i)&&Rt(r)&&!Rt(s)))return r.value=s,!0;const a=ke(i)&&sl(n)?Number(n)<i.length:Fe(i,n),l=Reflect.set(i,n,s,o);return i===Ve(o)&&(a?Rs(s,r)&&zi(i,"set",n,s):zi(i,"add",n,s)),l}}function Bp(t,e){const i=Fe(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&zi(t,"delete",e,void 0),n}function Rp(t,e){const i=Reflect.has(t,e);return(!nl(e)||!zh.has(e))&&ti(t,"has",e),i}function Dp(t){return ti(t,"iterate",ke(t)?"length":Cn),Reflect.ownKeys(t)}const Gh={get:Ip,set:Mp,deleteProperty:Bp,has:Rp,ownKeys:Dp},Np={get:Cp,set(t,e){return!0},deleteProperty(t,e){return!0}},Op=Ut({},Gh,{get:kp,set:Tp}),ll=t=>t,Sr=t=>Reflect.getPrototypeOf(t);function to(t,e,i=!1,n=!1){t=t.__v_raw;const s=Ve(t),o=Ve(e);i||(e!==o&&ti(s,"get",e),ti(s,"get",o));const{has:r}=Sr(s),a=n?ll:i?hl:Ds;if(r.call(s,e))return a(t.get(e));if(r.call(s,o))return a(t.get(o));t!==s&&t.get(e)}function io(t,e=!1){const i=this.__v_raw,n=Ve(i),s=Ve(t);return e||(t!==s&&ti(n,"has",t),ti(n,"has",s)),t===s?i.has(t):i.has(t)||i.has(s)}function no(t,e=!1){return t=t.__v_raw,!e&&ti(Ve(t),"iterate",Cn),Reflect.get(t,"size",t)}function Zl(t){t=Ve(t);const e=Ve(this);return Sr(e).has.call(e,t)||(e.add(t),zi(e,"add",t,t)),this}function Ql(t,e){e=Ve(e);const i=Ve(this),{has:n,get:s}=Sr(i);let o=n.call(i,t);o||(t=Ve(t),o=n.call(i,t));const r=s.call(i,t);return i.set(t,e),o?Rs(e,r)&&zi(i,"set",t,e):zi(i,"add",t,e),this}function ec(t){const e=Ve(this),{has:i,get:n}=Sr(e);let s=i.call(e,t);s||(t=Ve(t),s=i.call(e,t)),n&&n.call(e,t);const o=e.delete(t);return s&&zi(e,"delete",t,void 0),o}function tc(){const t=Ve(this),e=t.size!==0,i=t.clear();return e&&zi(t,"clear",void 0,void 0),i}function so(t,e){return function(n,s){const o=this,r=o.__v_raw,a=Ve(r),l=e?ll:t?hl:Ds;return!t&&ti(a,"iterate",Cn),r.forEach((c,u)=>n.call(s,l(c),l(u),o))}}function oo(t,e,i){return function(...n){const s=this.__v_raw,o=Ve(s),r=zn(o),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,c=s[t](...n),u=i?ll:e?hl:Ds;return!e&&ti(o,"iterate",l?ya:Cn),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function qi(t){return function(...e){return t==="delete"?!1:this}}function Lp(){const t={get(o){return to(this,o)},get size(){return no(this)},has:io,add:Zl,set:Ql,delete:ec,clear:tc,forEach:so(!1,!1)},e={get(o){return to(this,o,!1,!0)},get size(){return no(this)},has:io,add:Zl,set:Ql,delete:ec,clear:tc,forEach:so(!1,!0)},i={get(o){return to(this,o,!0)},get size(){return no(this,!0)},has(o){return io.call(this,o,!0)},add:qi("add"),set:qi("set"),delete:qi("delete"),clear:qi("clear"),forEach:so(!0,!1)},n={get(o){return to(this,o,!0,!0)},get size(){return no(this,!0)},has(o){return io.call(this,o,!0)},add:qi("add"),set:qi("set"),delete:qi("delete"),clear:qi("clear"),forEach:so(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=oo(o,!1,!1),i[o]=oo(o,!0,!1),e[o]=oo(o,!1,!0),n[o]=oo(o,!0,!0)}),[t,i,e,n]}const[Fp,$p,Hp,Up]=Lp();function cl(t,e){const i=e?t?Up:Hp:t?$p:Fp;return(n,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Fe(i,s)&&s in n?i:n,s,o)}const zp={get:cl(!1,!1)},Wp={get:cl(!1,!0)},Gp={get:cl(!0,!1)},Vh=new WeakMap,jh=new WeakMap,Kh=new WeakMap,Vp=new WeakMap;function jp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kp(t){return t.__v_skip||!Object.isExtensible(t)?0:jp(bp(t))}function Wi(t){return Xn(t)?t:ul(t,!1,Gh,zp,Vh)}function qp(t){return ul(t,!1,Op,Wp,jh)}function qh(t){return ul(t,!0,Np,Gp,Kh)}function ul(t,e,i,n,s){if(!at(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s.get(t);if(o)return o;const r=Kp(t);if(r===0)return t;const a=new Proxy(t,r===2?n:i);return s.set(t,a),a}function Wn(t){return Xn(t)?Wn(t.__v_raw):!!(t&&t.__v_isReactive)}function Xn(t){return!!(t&&t.__v_isReadonly)}function Go(t){return!!(t&&t.__v_isShallow)}function Yh(t){return Wn(t)||Xn(t)}function Ve(t){const e=t&&t.__v_raw;return e?Ve(e):t}function Xh(t){return Wo(t,"__v_skip",!0),t}const Ds=t=>at(t)?Wi(t):t,hl=t=>at(t)?qh(t):t;function Jh(t){en&&hi&&(t=Ve(t),Uh(t.dep||(t.dep=ol())))}function Zh(t,e){t=Ve(t),t.dep&&va(t.dep)}function Rt(t){return!!(t&&t.__v_isRef===!0)}function V(t){return Yp(t,!1)}function Yp(t,e){return Rt(t)?t:new Xp(t,e)}class Xp{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:Ve(e),this._value=i?e:Ds(e)}get value(){return Jh(this),this._value}set value(e){const i=this.__v_isShallow||Go(e)||Xn(e);e=i?e:Ve(e),Rs(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:Ds(e),Zh(this))}}function Jp(t){return Rt(t)?t.value:t}const Zp={get:(t,e,i)=>Jp(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return Rt(s)&&!Rt(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function Qh(t){return Wn(t)?t:new Proxy(t,Zp)}var ed;class Qp{constructor(e,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[ed]=!1,this._dirty=!0,this.effect=new rl(e,()=>{this._dirty||(this._dirty=!0,Zh(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=Ve(this);return Jh(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}ed="__v_isReadonly";function eg(t,e,i=!1){let n,s;const o=Te(t);return o?(n=t,s=pi):(n=t.get,s=t.set),new Qp(n,s,o||!s,i)}function tn(t,e,i,n){let s;try{s=n?t(...n):t()}catch(o){wr(o,e,i)}return s}function gi(t,e,i,n){if(Te(t)){const o=tn(t,e,i,n);return o&&Dh(o)&&o.catch(r=>{wr(r,e,i)}),o}const s=[];for(let o=0;o<t.length;o++)s.push(gi(t[o],e,i,n));return s}function wr(t,e,i,n=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const r=e.proxy,a=i;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,r,a)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){tn(l,null,10,[t,r,a]);return}}tg(t,i,s,n)}function tg(t,e,i,n=!0){console.error(t)}let Ns=!1,Sa=!1;const Tt=[];let Ai=0;const Gn=[];let Ni=null,En=0;const td=Promise.resolve();let dl=null;function ig(t){const e=dl||td;return t?e.then(this?t.bind(this):t):e}function ng(t){let e=Ai+1,i=Tt.length;for(;e<i;){const n=e+i>>>1;Os(Tt[n])<t?e=n+1:i=n}return e}function fl(t){(!Tt.length||!Tt.includes(t,Ns&&t.allowRecurse?Ai+1:Ai))&&(t.id==null?Tt.push(t):Tt.splice(ng(t.id),0,t),id())}function id(){!Ns&&!Sa&&(Sa=!0,dl=td.then(sd))}function sg(t){const e=Tt.indexOf(t);e>Ai&&Tt.splice(e,1)}function og(t){ke(t)?Gn.push(...t):(!Ni||!Ni.includes(t,t.allowRecurse?En+1:En))&&Gn.push(t),id()}function ic(t,e=Ns?Ai+1:0){for(;e<Tt.length;e++){const i=Tt[e];i&&i.pre&&(Tt.splice(e,1),e--,i())}}function nd(t){if(Gn.length){const e=[...new Set(Gn)];if(Gn.length=0,Ni){Ni.push(...e);return}for(Ni=e,Ni.sort((i,n)=>Os(i)-Os(n)),En=0;En<Ni.length;En++)Ni[En]();Ni=null,En=0}}const Os=t=>t.id==null?1/0:t.id,rg=(t,e)=>{const i=Os(t)-Os(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function sd(t){Sa=!1,Ns=!0,Tt.sort(rg);const e=pi;try{for(Ai=0;Ai<Tt.length;Ai++){const i=Tt[Ai];i&&i.active!==!1&&tn(i,null,14)}}finally{Ai=0,Tt.length=0,nd(),Ns=!1,dl=null,(Tt.length||Gn.length)&&sd()}}function ag(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||rt;let s=i;const o=e.startsWith("update:"),r=o&&e.slice(7);if(r&&r in n){const u=`${r==="modelValue"?"model":r}Modifiers`,{number:h,trim:d}=n[u]||rt;d&&(s=i.map(p=>yt(p)?p.trim():p)),h&&(s=i.map(Lh))}let a,l=n[a=Or(e)]||n[a=Or(Ci(e))];!l&&o&&(l=n[a=Or(is(e))]),l&&gi(l,t,6,s);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,gi(c,t,6,s)}}function od(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const o=t.emits;let r={},a=!1;if(!Te(t)){const l=c=>{const u=od(c,e,!0);u&&(a=!0,Ut(r,u))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(at(t)&&n.set(t,null),null):(ke(o)?o.forEach(l=>r[l]=null):Ut(r,o),at(t)&&n.set(t,r),r)}function Er(t,e){return!t||!br(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(t,e[0].toLowerCase()+e.slice(1))||Fe(t,is(e))||Fe(t,e))}let Ht=null,Ar=null;function Vo(t){const e=Ht;return Ht=t,Ar=t&&t.type.__scopeId||null,e}function qt(t){Ar=t}function Yt(){Ar=null}function wi(t,e=Ht,i){if(!e||t._n)return t;const n=(...s)=>{n._d&&hc(-1);const o=Vo(e);let r;try{r=t(...s)}finally{Vo(o),n._d&&hc(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Fr(t){const{type:e,vnode:i,proxy:n,withProxy:s,props:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:p,ctx:_,inheritAttrs:b}=t;let v,y;const w=Vo(t);try{if(i.shapeFlag&4){const x=s||n;v=Ei(u.call(x,x,h,o,p,d,_)),y=l}else{const x=e;v=Ei(x.length>1?x(o,{attrs:l,slots:a,emit:c}):x(o,null)),y=e.props?l:lg(l)}}catch(x){As.length=0,wr(x,t,1),v=K(rn)}let E=v;if(y&&b!==!1){const x=Object.keys(y),{shapeFlag:k}=E;x.length&&k&7&&(r&&x.some(tl)&&(y=cg(y,r)),E=Jn(E,y))}return i.dirs&&(E=Jn(E),E.dirs=E.dirs?E.dirs.concat(i.dirs):i.dirs),i.transition&&(E.transition=i.transition),v=E,Vo(w),v}const lg=t=>{let e;for(const i in t)(i==="class"||i==="style"||br(i))&&((e||(e={}))[i]=t[i]);return e},cg=(t,e)=>{const i={};for(const n in t)(!tl(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function ug(t,e,i){const{props:n,children:s,component:o}=t,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?nc(n,r,c):!!r;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(r[d]!==n[d]&&!Er(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?nc(n,r,c):!0:!!r;return!1}function nc(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const o=n[s];if(e[o]!==t[o]&&!Er(i,o))return!0}return!1}function hg({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const dg=t=>t.__isSuspense;function fg(t,e){e&&e.pendingBranch?ke(t)?e.effects.push(...t):e.effects.push(t):og(t)}function pg(t,e){if(It){let i=It.provides;const n=It.parent&&It.parent.provides;n===i&&(i=It.provides=Object.create(n)),i[t]=e}}function ko(t,e,i=!1){const n=It||Ht;if(n){const s=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return i&&Te(e)?e.call(n.proxy):e}}const ro={};function nn(t,e,i){return rd(t,e,i)}function rd(t,e,{immediate:i,deep:n,flush:s,onTrack:o,onTrigger:r}=rt){const a=It;let l,c=!1,u=!1;if(Rt(t)?(l=()=>t.value,c=Go(t)):Wn(t)?(l=()=>t,n=!0):ke(t)?(u=!0,c=t.some(E=>Wn(E)||Go(E)),l=()=>t.map(E=>{if(Rt(E))return E.value;if(Wn(E))return Fn(E);if(Te(E))return tn(E,a,2)})):Te(t)?e?l=()=>tn(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),gi(t,a,3,[d])}:l=pi,e&&n){const E=l;l=()=>Fn(E())}let h,d=E=>{h=y.onStop=()=>{tn(E,a,4)}},p;if(Fs)if(d=pi,e?i&&gi(e,a,3,[l(),u?[]:void 0,d]):l(),s==="sync"){const E=s0();p=E.__watcherHandles||(E.__watcherHandles=[])}else return pi;let _=u?new Array(t.length).fill(ro):ro;const b=()=>{if(y.active)if(e){const E=y.run();(n||c||(u?E.some((x,k)=>Rs(x,_[k])):Rs(E,_)))&&(h&&h(),gi(e,a,3,[E,_===ro?void 0:u&&_[0]===ro?[]:_,d]),_=E)}else y.run()};b.allowRecurse=!!e;let v;s==="sync"?v=b:s==="post"?v=()=>Vt(b,a&&a.suspense):(b.pre=!0,a&&(b.id=a.uid),v=()=>fl(b));const y=new rl(l,v);e?i?b():_=y.run():s==="post"?Vt(y.run.bind(y),a&&a.suspense):y.run();const w=()=>{y.stop(),a&&a.scope&&il(a.scope.effects,y)};return p&&p.push(w),w}function gg(t,e,i){const n=this.proxy,s=yt(t)?t.includes(".")?ad(n,t):()=>n[t]:t.bind(n,n);let o;Te(e)?o=e:(o=e.handler,i=e);const r=It;Zn(this);const a=rd(s,o.bind(n),i);return r?Zn(r):Pn(),a}function ad(t,e){const i=e.split(".");return()=>{let n=t;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function Fn(t,e){if(!at(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Rt(t))Fn(t.value,e);else if(ke(t))for(let i=0;i<t.length;i++)Fn(t[i],e);else if(Rh(t)||zn(t))t.forEach(i=>{Fn(i,e)});else if(Oh(t))for(const i in t)Fn(t[i],e);return t}function ze(t){return Te(t)?{setup:t,name:t.name}:t}const ws=t=>!!t.type.__asyncLoader,ld=t=>t.type.__isKeepAlive;function mg(t,e){cd(t,"a",e)}function bg(t,e){cd(t,"da",e)}function cd(t,e,i=It){const n=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(xr(e,n,i),i){let s=i.parent;for(;s&&s.parent;)ld(s.parent.vnode)&&_g(n,e,i,s),s=s.parent}}function _g(t,e,i,n){const s=xr(e,t,n,!0);Js(()=>{il(n[e],s)},i)}function xr(t,e,i=It,n=!1){if(i){const s=i[t]||(i[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(i.isUnmounted)return;ns(),Zn(i);const a=gi(e,i,t,r);return Pn(),ss(),a});return n?s.unshift(o):s.push(o),o}}const Gi=t=>(e,i=It)=>(!Fs||t==="sp")&&xr(t,(...n)=>e(...n),i),yg=Gi("bm"),st=Gi("m"),ud=Gi("bu"),Xs=Gi("u"),zt=Gi("bum"),Js=Gi("um"),vg=Gi("sp"),Sg=Gi("rtg"),wg=Gi("rtc");function Eg(t,e=It){xr("ec",t,e)}function dn(t,e,i,n){const s=t.dirs,o=e&&e.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(ns(),gi(l,i,8,[t.el,a,t,e]),ss())}}const hd="components";function we(t,e){return xg(hd,t,!0,e)||t}const Ag=Symbol();function xg(t,e,i=!0,n=!1){const s=Ht||It;if(s){const o=s.type;if(t===hd){const a=e0(o,!1);if(a&&(a===e||a===Ci(e)||a===vr(Ci(e))))return o}const r=sc(s[t]||o[t],e)||sc(s.appContext[t],e);return!r&&n?o:r}}function sc(t,e){return t&&(t[e]||t[Ci(e)]||t[vr(Ci(e))])}function Ye(t,e,i,n){let s;const o=i&&i[n];if(ke(t)||yt(t)){s=new Array(t.length);for(let r=0,a=t.length;r<a;r++)s[r]=e(t[r],r,void 0,o&&o[r])}else if(typeof t=="number"){s=new Array(t);for(let r=0;r<t;r++)s[r]=e(r+1,r,void 0,o&&o[r])}else if(at(t))if(t[Symbol.iterator])s=Array.from(t,(r,a)=>e(r,a,void 0,o&&o[a]));else{const r=Object.keys(t);s=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];s[a]=e(t[c],c,a,o&&o[a])}}else s=[];return i&&(i[n]=s),s}function wa(t,e,i={},n,s){if(Ht.isCE||Ht.parent&&ws(Ht.parent)&&Ht.parent.isCE)return e!=="default"&&(i.name=e),K("slot",i,n&&n());let o=t[e];o&&o._c&&(o._d=!1),T();const r=o&&dd(o(i)),a=Ge(Pe,{key:i.key||r&&r.key||`_${e}`},r||(n?n():[]),r&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function dd(t){return t.some(e=>Ko(e)?!(e.type===rn||e.type===Pe&&!dd(e.children)):!0)?t:null}const Ea=t=>t?Ad(t)?bl(t)||t.proxy:Ea(t.parent):null,Es=Ut(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ea(t.parent),$root:t=>Ea(t.root),$emit:t=>t.emit,$options:t=>pl(t),$forceUpdate:t=>t.f||(t.f=()=>fl(t.update)),$nextTick:t=>t.n||(t.n=ig.bind(t.proxy)),$watch:t=>gg.bind(t)}),$r=(t,e)=>t!==rt&&!t.__isScriptSetup&&Fe(t,e),Ig={get({_:t},e){const{ctx:i,setupState:n,data:s,props:o,accessCache:r,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=r[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return o[e]}else{if($r(n,e))return r[e]=1,n[e];if(s!==rt&&Fe(s,e))return r[e]=2,s[e];if((c=t.propsOptions[0])&&Fe(c,e))return r[e]=3,o[e];if(i!==rt&&Fe(i,e))return r[e]=4,i[e];Aa&&(r[e]=0)}}const u=Es[e];let h,d;if(u)return e==="$attrs"&&ti(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(i!==rt&&Fe(i,e))return r[e]=4,i[e];if(d=l.config.globalProperties,Fe(d,e))return d[e]},set({_:t},e,i){const{data:n,setupState:s,ctx:o}=t;return $r(s,e)?(s[e]=i,!0):n!==rt&&Fe(n,e)?(n[e]=i,!0):Fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:o}},r){let a;return!!i[r]||t!==rt&&Fe(t,r)||$r(e,r)||(a=o[0])&&Fe(a,r)||Fe(n,r)||Fe(Es,r)||Fe(s.config.globalProperties,r)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:Fe(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};let Aa=!0;function kg(t){const e=pl(t),i=t.proxy,n=t.ctx;Aa=!1,e.beforeCreate&&oc(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:_,activated:b,deactivated:v,beforeDestroy:y,beforeUnmount:w,destroyed:E,unmounted:x,render:k,renderTracked:B,renderTriggered:H,errorCaptured:G,serverPrefetch:te,expose:Y,inheritAttrs:q,components:he,directives:de,filters:Oe}=e;if(c&&Cg(c,n,null,t.appContext.config.unwrapInjectedRef),r)for(const Q in r){const ee=r[Q];Te(ee)&&(n[Q]=ee.bind(i))}if(s){const Q=s.call(i,i);at(Q)&&(t.data=Wi(Q))}if(Aa=!0,o)for(const Q in o){const ee=o[Q],oe=Te(ee)?ee.bind(i,i):Te(ee.get)?ee.get.bind(i,i):pi,Be=!Te(ee)&&Te(ee.set)?ee.set.bind(i):pi,ye=ge({get:oe,set:Be});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>ye.value,set:be=>ye.value=be})}if(a)for(const Q in a)fd(a[Q],n,i,Q);if(l){const Q=Te(l)?l.call(i):l;Reflect.ownKeys(Q).forEach(ee=>{pg(ee,Q[ee])})}u&&oc(u,t,"c");function Ae(Q,ee){ke(ee)?ee.forEach(oe=>Q(oe.bind(i))):ee&&Q(ee.bind(i))}if(Ae(yg,h),Ae(st,d),Ae(ud,p),Ae(Xs,_),Ae(mg,b),Ae(bg,v),Ae(Eg,G),Ae(wg,B),Ae(Sg,H),Ae(zt,w),Ae(Js,x),Ae(vg,te),ke(Y))if(Y.length){const Q=t.exposed||(t.exposed={});Y.forEach(ee=>{Object.defineProperty(Q,ee,{get:()=>i[ee],set:oe=>i[ee]=oe})})}else t.exposed||(t.exposed={});k&&t.render===pi&&(t.render=k),q!=null&&(t.inheritAttrs=q),he&&(t.components=he),de&&(t.directives=de)}function Cg(t,e,i=pi,n=!1){ke(t)&&(t=xa(t));for(const s in t){const o=t[s];let r;at(o)?"default"in o?r=ko(o.from||s,o.default,!0):r=ko(o.from||s):r=ko(o),Rt(r)&&n?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[s]=r}}function oc(t,e,i){gi(ke(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function fd(t,e,i,n){const s=n.includes(".")?ad(i,n):()=>i[n];if(yt(t)){const o=e[t];Te(o)&&nn(s,o)}else if(Te(t))nn(s,t.bind(i));else if(at(t))if(ke(t))t.forEach(o=>fd(o,e,i,n));else{const o=Te(t.handler)?t.handler.bind(i):e[t.handler];Te(o)&&nn(s,o,t)}}function pl(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,a=o.get(e);let l;return a?l=a:!s.length&&!i&&!n?l=e:(l={},s.length&&s.forEach(c=>jo(l,c,r,!0)),jo(l,e,r)),at(e)&&o.set(e,l),l}function jo(t,e,i,n=!1){const{mixins:s,extends:o}=e;o&&jo(t,o,i,!0),s&&s.forEach(r=>jo(t,r,i,!0));for(const r in e)if(!(n&&r==="expose")){const a=Pg[r]||i&&i[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const Pg={data:rc,props:vn,emits:vn,methods:vn,computed:vn,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:vn,directives:vn,watch:Tg,provide:rc,inject:Mg};function rc(t,e){return e?t?function(){return Ut(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function Mg(t,e){return vn(xa(t),xa(e))}function xa(t){if(ke(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function vn(t,e){return t?Ut(Ut(Object.create(null),t),e):e}function Tg(t,e){if(!t)return e;if(!e)return t;const i=Ut(Object.create(null),t);for(const n in e)i[n]=Lt(t[n],e[n]);return i}function Bg(t,e,i,n=!1){const s={},o={};Wo(o,kr,1),t.propsDefaults=Object.create(null),pd(t,e,s,o);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);i?t.props=n?s:qp(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function Rg(t,e,i,n){const{props:s,attrs:o,vnode:{patchFlag:r}}=t,a=Ve(s),[l]=t.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Er(t.emitsOptions,d))continue;const p=e[d];if(l)if(Fe(o,d))p!==o[d]&&(o[d]=p,c=!0);else{const _=Ci(d);s[_]=Ia(l,a,_,p,t,!1)}else p!==o[d]&&(o[d]=p,c=!0)}}}else{pd(t,e,s,o)&&(c=!0);let u;for(const h in a)(!e||!Fe(e,h)&&((u=is(h))===h||!Fe(e,u)))&&(l?i&&(i[h]!==void 0||i[u]!==void 0)&&(s[h]=Ia(l,a,h,void 0,t,!0)):delete s[h]);if(o!==a)for(const h in o)(!e||!Fe(e,h))&&(delete o[h],c=!0)}c&&zi(t,"set","$attrs")}function pd(t,e,i,n){const[s,o]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(Io(l))continue;const c=e[l];let u;s&&Fe(s,u=Ci(l))?!o||!o.includes(u)?i[u]=c:(a||(a={}))[u]=c:Er(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=Ve(i),c=a||rt;for(let u=0;u<o.length;u++){const h=o[u];i[h]=Ia(s,l,h,c[h],t,!Fe(c,h))}}return r}function Ia(t,e,i,n,s,o){const r=t[i];if(r!=null){const a=Fe(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&Te(l)){const{propsDefaults:c}=s;i in c?n=c[i]:(Zn(s),n=c[i]=l.call(null,e),Pn())}else n=l}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===is(i))&&(n=!0))}return n}function gd(t,e,i=!1){const n=e.propsCache,s=n.get(t);if(s)return s;const o=t.props,r={},a=[];let l=!1;if(!Te(t)){const u=h=>{l=!0;const[d,p]=gd(h,e,!0);Ut(r,d),p&&a.push(...p)};!i&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!l)return at(t)&&n.set(t,Un),Un;if(ke(o))for(let u=0;u<o.length;u++){const h=Ci(o[u]);ac(h)&&(r[h]=rt)}else if(o)for(const u in o){const h=Ci(u);if(ac(h)){const d=o[u],p=r[h]=ke(d)||Te(d)?{type:d}:Object.assign({},d);if(p){const _=uc(Boolean,p.type),b=uc(String,p.type);p[0]=_>-1,p[1]=b<0||_<b,(_>-1||Fe(p,"default"))&&a.push(h)}}}const c=[r,a];return at(t)&&n.set(t,c),c}function ac(t){return t[0]!=="$"}function lc(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function cc(t,e){return lc(t)===lc(e)}function uc(t,e){return ke(e)?e.findIndex(i=>cc(i,t)):Te(e)&&cc(e,t)?0:-1}const md=t=>t[0]==="_"||t==="$stable",gl=t=>ke(t)?t.map(Ei):[Ei(t)],Dg=(t,e,i)=>{if(e._n)return e;const n=wi((...s)=>gl(e(...s)),i);return n._c=!1,n},bd=(t,e,i)=>{const n=t._ctx;for(const s in t){if(md(s))continue;const o=t[s];if(Te(o))e[s]=Dg(s,o,n);else if(o!=null){const r=gl(o);e[s]=()=>r}}},_d=(t,e)=>{const i=gl(e);t.slots.default=()=>i},Ng=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=Ve(e),Wo(e,"_",i)):bd(e,t.slots={})}else t.slots={},e&&_d(t,e);Wo(t.slots,kr,1)},Og=(t,e,i)=>{const{vnode:n,slots:s}=t;let o=!0,r=rt;if(n.shapeFlag&32){const a=e._;a?i&&a===1?o=!1:(Ut(s,e),!i&&a===1&&delete s._):(o=!e.$stable,bd(e,s)),r=e}else e&&(_d(t,e),r={default:1});if(o)for(const a in s)!md(a)&&!(a in r)&&delete s[a]};function yd(){return{app:null,config:{isNativeTag:pp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Lg=0;function Fg(t,e){return function(n,s=null){Te(n)||(n=Object.assign({},n)),s!=null&&!at(s)&&(s=null);const o=yd(),r=new Set;let a=!1;const l=o.app={_uid:Lg++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:o0,get config(){return o.config},set config(c){},use(c,...u){return r.has(c)||(c&&Te(c.install)?(r.add(c),c.install(l,...u)):Te(c)&&(r.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,h){if(!a){const d=K(n,s);return d.appContext=o,u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,bl(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l}};return l}}function ka(t,e,i,n,s=!1){if(ke(t)){t.forEach((d,p)=>ka(d,e&&(ke(e)?e[p]:e),i,n,s));return}if(ws(n)&&!s)return;const o=n.shapeFlag&4?bl(n.component)||n.component.proxy:n.el,r=s?null:o,{i:a,r:l}=t,c=e&&e.r,u=a.refs===rt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(yt(c)?(u[c]=null,Fe(h,c)&&(h[c]=null)):Rt(c)&&(c.value=null)),Te(l))tn(l,a,12,[r,u]);else{const d=yt(l),p=Rt(l);if(d||p){const _=()=>{if(t.f){const b=d?Fe(h,l)?h[l]:u[l]:l.value;s?ke(b)&&il(b,o):ke(b)?b.includes(o)||b.push(o):d?(u[l]=[o],Fe(h,l)&&(h[l]=u[l])):(l.value=[o],t.k&&(u[t.k]=l.value))}else d?(u[l]=r,Fe(h,l)&&(h[l]=r)):p&&(l.value=r,t.k&&(u[t.k]=r))};r?(_.id=-1,Vt(_,i)):_()}}}const Vt=fg;function $g(t){return Hg(t)}function Hg(t,e){const i=vp();i.__VUE__=!0;const{insert:n,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:p=pi,insertStaticContent:_}=t,b=(I,P,N,U=null,z=null,X=null,ie=!1,J=null,Z=!!P.dynamicChildren)=>{if(I===P)return;I&&!rs(I,P)&&(U=At(I),be(I,z,X,!0),I=null),P.patchFlag===-2&&(Z=!1,P.dynamicChildren=null);const{type:j,ref:ae,shapeFlag:ce}=P;switch(j){case Ir:v(I,P,N,U);break;case rn:y(I,P,N,U);break;case Co:I==null&&w(P,N,U,ie);break;case Pe:he(I,P,N,U,z,X,ie,J,Z);break;default:ce&1?k(I,P,N,U,z,X,ie,J,Z):ce&6?de(I,P,N,U,z,X,ie,J,Z):(ce&64||ce&128)&&j.process(I,P,N,U,z,X,ie,J,Z,St)}ae!=null&&z&&ka(ae,I&&I.ref,X,P||I,!P)},v=(I,P,N,U)=>{if(I==null)n(P.el=a(P.children),N,U);else{const z=P.el=I.el;P.children!==I.children&&c(z,P.children)}},y=(I,P,N,U)=>{I==null?n(P.el=l(P.children||""),N,U):P.el=I.el},w=(I,P,N,U)=>{[I.el,I.anchor]=_(I.children,P,N,U,I.el,I.anchor)},E=({el:I,anchor:P},N,U)=>{let z;for(;I&&I!==P;)z=d(I),n(I,N,U),I=z;n(P,N,U)},x=({el:I,anchor:P})=>{let N;for(;I&&I!==P;)N=d(I),s(I),I=N;s(P)},k=(I,P,N,U,z,X,ie,J,Z)=>{ie=ie||P.type==="svg",I==null?B(P,N,U,z,X,ie,J,Z):te(I,P,z,X,ie,J,Z)},B=(I,P,N,U,z,X,ie,J)=>{let Z,j;const{type:ae,props:ce,shapeFlag:me,transition:_e,dirs:Me}=I;if(Z=I.el=r(I.type,X,ce&&ce.is,ce),me&8?u(Z,I.children):me&16&&G(I.children,Z,null,U,z,X&&ae!=="foreignObject",ie,J),Me&&dn(I,null,U,"created"),ce){for(const f in ce)f!=="value"&&!Io(f)&&o(Z,f,null,ce[f],X,I.children,U,z,Je);"value"in ce&&o(Z,"value",null,ce.value),(j=ce.onVnodeBeforeMount)&&_i(j,U,I)}H(Z,I,I.scopeId,ie,U),Me&&dn(I,null,U,"beforeMount");const S=(!z||z&&!z.pendingBranch)&&_e&&!_e.persisted;S&&_e.beforeEnter(Z),n(Z,P,N),((j=ce&&ce.onVnodeMounted)||S||Me)&&Vt(()=>{j&&_i(j,U,I),S&&_e.enter(Z),Me&&dn(I,null,U,"mounted")},z)},H=(I,P,N,U,z)=>{if(N&&p(I,N),U)for(let X=0;X<U.length;X++)p(I,U[X]);if(z){let X=z.subTree;if(P===X){const ie=z.vnode;H(I,ie,ie.scopeId,ie.slotScopeIds,z.parent)}}},G=(I,P,N,U,z,X,ie,J,Z=0)=>{for(let j=Z;j<I.length;j++){const ae=I[j]=J?Yi(I[j]):Ei(I[j]);b(null,ae,P,N,U,z,X,ie,J)}},te=(I,P,N,U,z,X,ie)=>{const J=P.el=I.el;let{patchFlag:Z,dynamicChildren:j,dirs:ae}=P;Z|=I.patchFlag&16;const ce=I.props||rt,me=P.props||rt;let _e;N&&fn(N,!1),(_e=me.onVnodeBeforeUpdate)&&_i(_e,N,P,I),ae&&dn(P,I,N,"beforeUpdate"),N&&fn(N,!0);const Me=z&&P.type!=="foreignObject";if(j?Y(I.dynamicChildren,j,J,N,U,Me,X):ie||ee(I,P,J,null,N,U,Me,X,!1),Z>0){if(Z&16)q(J,P,ce,me,N,U,z);else if(Z&2&&ce.class!==me.class&&o(J,"class",null,me.class,z),Z&4&&o(J,"style",ce.style,me.style,z),Z&8){const S=P.dynamicProps;for(let f=0;f<S.length;f++){const g=S[f],A=ce[g],C=me[g];(C!==A||g==="value")&&o(J,g,A,C,z,I.children,N,U,Je)}}Z&1&&I.children!==P.children&&u(J,P.children)}else!ie&&j==null&&q(J,P,ce,me,N,U,z);((_e=me.onVnodeUpdated)||ae)&&Vt(()=>{_e&&_i(_e,N,P,I),ae&&dn(P,I,N,"updated")},U)},Y=(I,P,N,U,z,X,ie)=>{for(let J=0;J<P.length;J++){const Z=I[J],j=P[J],ae=Z.el&&(Z.type===Pe||!rs(Z,j)||Z.shapeFlag&70)?h(Z.el):N;b(Z,j,ae,null,U,z,X,ie,!0)}},q=(I,P,N,U,z,X,ie)=>{if(N!==U){if(N!==rt)for(const J in N)!Io(J)&&!(J in U)&&o(I,J,N[J],null,ie,P.children,z,X,Je);for(const J in U){if(Io(J))continue;const Z=U[J],j=N[J];Z!==j&&J!=="value"&&o(I,J,j,Z,ie,P.children,z,X,Je)}"value"in U&&o(I,"value",N.value,U.value)}},he=(I,P,N,U,z,X,ie,J,Z)=>{const j=P.el=I?I.el:a(""),ae=P.anchor=I?I.anchor:a("");let{patchFlag:ce,dynamicChildren:me,slotScopeIds:_e}=P;_e&&(J=J?J.concat(_e):_e),I==null?(n(j,N,U),n(ae,N,U),G(P.children,N,ae,z,X,ie,J,Z)):ce>0&&ce&64&&me&&I.dynamicChildren?(Y(I.dynamicChildren,me,N,z,X,ie,J),(P.key!=null||z&&P===z.subTree)&&vd(I,P,!0)):ee(I,P,N,ae,z,X,ie,J,Z)},de=(I,P,N,U,z,X,ie,J,Z)=>{P.slotScopeIds=J,I==null?P.shapeFlag&512?z.ctx.activate(P,N,U,ie,Z):Oe(P,N,U,z,X,ie,Z):xe(I,P,Z)},Oe=(I,P,N,U,z,X,ie)=>{const J=I.component=Yg(I,U,z);if(ld(I)&&(J.ctx.renderer=St),Xg(J),J.asyncDep){if(z&&z.registerDep(J,Ae),!I.el){const Z=J.subTree=K(rn);y(null,Z,P,N)}return}Ae(J,I,P,N,z,X,ie)},xe=(I,P,N)=>{const U=P.component=I.component;if(ug(I,P,N))if(U.asyncDep&&!U.asyncResolved){Q(U,P,N);return}else U.next=P,sg(U.update),U.update();else P.el=I.el,U.vnode=P},Ae=(I,P,N,U,z,X,ie)=>{const J=()=>{if(I.isMounted){let{next:ae,bu:ce,u:me,parent:_e,vnode:Me}=I,S=ae,f;fn(I,!1),ae?(ae.el=Me.el,Q(I,ae,ie)):ae=Me,ce&&Lr(ce),(f=ae.props&&ae.props.onVnodeBeforeUpdate)&&_i(f,_e,ae,Me),fn(I,!0);const g=Fr(I),A=I.subTree;I.subTree=g,b(A,g,h(A.el),At(A),I,z,X),ae.el=g.el,S===null&&hg(I,g.el),me&&Vt(me,z),(f=ae.props&&ae.props.onVnodeUpdated)&&Vt(()=>_i(f,_e,ae,Me),z)}else{let ae;const{el:ce,props:me}=P,{bm:_e,m:Me,parent:S}=I,f=ws(P);if(fn(I,!1),_e&&Lr(_e),!f&&(ae=me&&me.onVnodeBeforeMount)&&_i(ae,S,P),fn(I,!0),ce&&bi){const g=()=>{I.subTree=Fr(I),bi(ce,I.subTree,I,z,null)};f?P.type.__asyncLoader().then(()=>!I.isUnmounted&&g()):g()}else{const g=I.subTree=Fr(I);b(null,g,N,U,I,z,X),P.el=g.el}if(Me&&Vt(Me,z),!f&&(ae=me&&me.onVnodeMounted)){const g=P;Vt(()=>_i(ae,S,g),z)}(P.shapeFlag&256||S&&ws(S.vnode)&&S.vnode.shapeFlag&256)&&I.a&&Vt(I.a,z),I.isMounted=!0,P=N=U=null}},Z=I.effect=new rl(J,()=>fl(j),I.scope),j=I.update=()=>Z.run();j.id=I.uid,fn(I,!0),j()},Q=(I,P,N)=>{P.component=I;const U=I.vnode.props;I.vnode=P,I.next=null,Rg(I,P.props,U,N),Og(I,P.children,N),ns(),ic(),ss()},ee=(I,P,N,U,z,X,ie,J,Z=!1)=>{const j=I&&I.children,ae=I?I.shapeFlag:0,ce=P.children,{patchFlag:me,shapeFlag:_e}=P;if(me>0){if(me&128){Be(j,ce,N,U,z,X,ie,J,Z);return}else if(me&256){oe(j,ce,N,U,z,X,ie,J,Z);return}}_e&8?(ae&16&&Je(j,z,X),ce!==j&&u(N,ce)):ae&16?_e&16?Be(j,ce,N,U,z,X,ie,J,Z):Je(j,z,X,!0):(ae&8&&u(N,""),_e&16&&G(ce,N,U,z,X,ie,J,Z))},oe=(I,P,N,U,z,X,ie,J,Z)=>{I=I||Un,P=P||Un;const j=I.length,ae=P.length,ce=Math.min(j,ae);let me;for(me=0;me<ce;me++){const _e=P[me]=Z?Yi(P[me]):Ei(P[me]);b(I[me],_e,N,null,z,X,ie,J,Z)}j>ae?Je(I,z,X,!0,!1,ce):G(P,N,U,z,X,ie,J,Z,ce)},Be=(I,P,N,U,z,X,ie,J,Z)=>{let j=0;const ae=P.length;let ce=I.length-1,me=ae-1;for(;j<=ce&&j<=me;){const _e=I[j],Me=P[j]=Z?Yi(P[j]):Ei(P[j]);if(rs(_e,Me))b(_e,Me,N,null,z,X,ie,J,Z);else break;j++}for(;j<=ce&&j<=me;){const _e=I[ce],Me=P[me]=Z?Yi(P[me]):Ei(P[me]);if(rs(_e,Me))b(_e,Me,N,null,z,X,ie,J,Z);else break;ce--,me--}if(j>ce){if(j<=me){const _e=me+1,Me=_e<ae?P[_e].el:U;for(;j<=me;)b(null,P[j]=Z?Yi(P[j]):Ei(P[j]),N,Me,z,X,ie,J,Z),j++}}else if(j>me)for(;j<=ce;)be(I[j],z,X,!0),j++;else{const _e=j,Me=j,S=new Map;for(j=Me;j<=me;j++){const Re=P[j]=Z?Yi(P[j]):Ei(P[j]);Re.key!=null&&S.set(Re.key,j)}let f,g=0;const A=me-Me+1;let C=!1,R=0;const $=new Array(A);for(j=0;j<A;j++)$[j]=0;for(j=_e;j<=ce;j++){const Re=I[j];if(g>=A){be(Re,z,X,!0);continue}let Ne;if(Re.key!=null)Ne=S.get(Re.key);else for(f=Me;f<=me;f++)if($[f-Me]===0&&rs(Re,P[f])){Ne=f;break}Ne===void 0?be(Re,z,X,!0):($[Ne-Me]=j+1,Ne>=R?R=Ne:C=!0,b(Re,P[Ne],N,null,z,X,ie,J,Z),g++)}const Ce=C?Ug($):Un;for(f=Ce.length-1,j=A-1;j>=0;j--){const Re=Me+j,Ne=P[Re],et=Re+1<ae?P[Re+1].el:U;$[j]===0?b(null,Ne,N,et,z,X,ie,J,Z):C&&(f<0||j!==Ce[f]?ye(Ne,N,et,2):f--)}}},ye=(I,P,N,U,z=null)=>{const{el:X,type:ie,transition:J,children:Z,shapeFlag:j}=I;if(j&6){ye(I.component.subTree,P,N,U);return}if(j&128){I.suspense.move(P,N,U);return}if(j&64){ie.move(I,P,N,St);return}if(ie===Pe){n(X,P,N);for(let ce=0;ce<Z.length;ce++)ye(Z[ce],P,N,U);n(I.anchor,P,N);return}if(ie===Co){E(I,P,N);return}if(U!==2&&j&1&&J)if(U===0)J.beforeEnter(X),n(X,P,N),Vt(()=>J.enter(X),z);else{const{leave:ce,delayLeave:me,afterLeave:_e}=J,Me=()=>n(X,P,N),S=()=>{ce(X,()=>{Me(),_e&&_e()})};me?me(X,Me,S):S()}else n(X,P,N)},be=(I,P,N,U=!1,z=!1)=>{const{type:X,props:ie,ref:J,children:Z,dynamicChildren:j,shapeFlag:ae,patchFlag:ce,dirs:me}=I;if(J!=null&&ka(J,null,N,I,!0),ae&256){P.ctx.deactivate(I);return}const _e=ae&1&&me,Me=!ws(I);let S;if(Me&&(S=ie&&ie.onVnodeBeforeUnmount)&&_i(S,P,I),ae&6)vt(I.component,N,U);else{if(ae&128){I.suspense.unmount(N,U);return}_e&&dn(I,null,P,"beforeUnmount"),ae&64?I.type.remove(I,P,N,z,St,U):j&&(X!==Pe||ce>0&&ce&64)?Je(j,P,N,!1,!0):(X===Pe&&ce&384||!z&&ae&16)&&Je(Z,P,N),U&&ct(I)}(Me&&(S=ie&&ie.onVnodeUnmounted)||_e)&&Vt(()=>{S&&_i(S,P,I),_e&&dn(I,null,P,"unmounted")},N)},ct=I=>{const{type:P,el:N,anchor:U,transition:z}=I;if(P===Pe){ut(N,U);return}if(P===Co){x(I);return}const X=()=>{s(N),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(I.shapeFlag&1&&z&&!z.persisted){const{leave:ie,delayLeave:J}=z,Z=()=>ie(N,X);J?J(I.el,X,Z):Z()}else X()},ut=(I,P)=>{let N;for(;I!==P;)N=d(I),s(I),I=N;s(P)},vt=(I,P,N)=>{const{bum:U,scope:z,update:X,subTree:ie,um:J}=I;U&&Lr(U),z.stop(),X&&(X.active=!1,be(ie,I,P,N)),J&&Vt(J,P),Vt(()=>{I.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},Je=(I,P,N,U=!1,z=!1,X=0)=>{for(let ie=X;ie<I.length;ie++)be(I[ie],P,N,U,z)},At=I=>I.shapeFlag&6?At(I.component.subTree):I.shapeFlag&128?I.suspense.next():d(I.anchor||I.el),je=(I,P,N)=>{I==null?P._vnode&&be(P._vnode,null,null,!0):b(P._vnode||null,I,P,null,null,null,N),ic(),nd(),P._vnode=I},St={p:b,um:be,m:ye,r:ct,mt:Oe,mc:G,pc:ee,pbc:Y,n:At,o:t};let si,bi;return e&&([si,bi]=e(St)),{render:je,hydrate:si,createApp:Fg(je,si)}}function fn({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function vd(t,e,i=!1){const n=t.children,s=e.children;if(ke(n)&&ke(s))for(let o=0;o<n.length;o++){const r=n[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=Yi(s[o]),a.el=r.el),i||vd(r,a)),a.type===Ir&&(a.el=r.el)}}function Ug(t){const e=t.slice(),i=[0];let n,s,o,r,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=i[i.length-1],t[s]<c){e[n]=s,i.push(n);continue}for(o=0,r=i.length-1;o<r;)a=o+r>>1,t[i[a]]<c?o=a+1:r=a;c<t[i[o]]&&(o>0&&(e[n]=i[o-1]),i[o]=n)}}for(o=i.length,r=i[o-1];o-- >0;)i[o]=r,r=e[r];return i}const zg=t=>t.__isTeleport,Pe=Symbol(void 0),Ir=Symbol(void 0),rn=Symbol(void 0),Co=Symbol(void 0),As=[];let di=null;function T(t=!1){As.push(di=t?null:[])}function Wg(){As.pop(),di=As[As.length-1]||null}let Ls=1;function hc(t){Ls+=t}function Sd(t){return t.dynamicChildren=Ls>0?di||Un:null,Wg(),Ls>0&&di&&di.push(t),t}function O(t,e,i,n,s,o){return Sd(m(t,e,i,n,s,o,!0))}function Ge(t,e,i,n,s){return Sd(K(t,e,i,n,s,!0))}function Ko(t){return t?t.__v_isVNode===!0:!1}function rs(t,e){return t.type===e.type&&t.key===e.key}const kr="__vInternal",wd=({key:t})=>t??null,Po=({ref:t,ref_key:e,ref_for:i})=>t!=null?yt(t)||Rt(t)||Te(t)?{i:Ht,r:t,k:e,f:!!i}:t:null;function m(t,e=null,i=null,n=0,s=null,o=t===Pe?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&wd(e),ref:e&&Po(e),scopeId:Ar,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ht};return a?(ml(l,i),o&128&&t.normalize(l)):i&&(l.shapeFlag|=yt(i)?8:16),Ls>0&&!r&&di&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&di.push(l),l}const K=Gg;function Gg(t,e=null,i=null,n=0,s=null,o=!1){if((!t||t===Ag)&&(t=rn),Ko(t)){const a=Jn(t,e,!0);return i&&ml(a,i),Ls>0&&!o&&di&&(a.shapeFlag&6?di[di.indexOf(t)]=a:di.push(a)),a.patchFlag|=-2,a}if(t0(t)&&(t=t.__vccOpts),e){e=Vg(e);let{class:a,style:l}=e;a&&!yt(a)&&(e.class=ei(a)),at(l)&&(Yh(l)&&!ke(l)&&(l=Ut({},l)),e.style=He(l))}const r=yt(t)?1:dg(t)?128:zg(t)?64:at(t)?4:Te(t)?2:0;return m(t,e,i,n,s,r,o,!0)}function Vg(t){return t?Yh(t)||kr in t?Ut({},t):t:null}function Jn(t,e,i=!1){const{props:n,ref:s,patchFlag:o,children:r}=t,a=e?jg(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&wd(a),ref:e&&e.ref?i&&s?ke(s)?s.concat(Po(e)):[s,Po(e)]:Po(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Jn(t.ssContent),ssFallback:t.ssFallback&&Jn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function qe(t=" ",e=0){return K(Ir,null,t,e)}function Ed(t,e){const i=K(Co,null,t);return i.staticCount=e,i}function ue(t="",e=!1){return e?(T(),Ge(rn,null,t)):K(rn,null,t)}function Ei(t){return t==null||typeof t=="boolean"?K(rn):ke(t)?K(Pe,null,t.slice()):typeof t=="object"?Yi(t):K(Ir,null,String(t))}function Yi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Jn(t)}function ml(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ke(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),ml(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!(kr in e)?e._ctx=Ht:s===3&&Ht&&(Ht.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Ht},i=32):(e=String(e),n&64?(i=16,e=[qe(e)]):i=8);t.children=e,t.shapeFlag|=i}function jg(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=ei([e.class,n.class]));else if(s==="style")e.style=He([e.style,n.style]);else if(br(s)){const o=e[s],r=n[s];r&&o!==r&&!(ke(o)&&o.includes(r))&&(e[s]=o?[].concat(o,r):r)}else s!==""&&(e[s]=n[s])}return e}function _i(t,e,i,n=null){gi(t,e,7,[i,n])}const Kg=yd();let qg=0;function Yg(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||Kg,o={uid:qg++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Sp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gd(n,s),emitsOptions:od(n,s),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:n.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=ag.bind(null,o),t.ce&&t.ce(o),o}let It=null;const Zn=t=>{It=t,t.scope.on()},Pn=()=>{It&&It.scope.off(),It=null};function Ad(t){return t.vnode.shapeFlag&4}let Fs=!1;function Xg(t,e=!1){Fs=e;const{props:i,children:n}=t.vnode,s=Ad(t);Bg(t,i,s,e),Ng(t,n);const o=s?Jg(t,e):void 0;return Fs=!1,o}function Jg(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=Xh(new Proxy(t.ctx,Ig));const{setup:n}=i;if(n){const s=t.setupContext=n.length>1?Qg(t):null;Zn(t),ns();const o=tn(n,t,0,[t.props,s]);if(ss(),Pn(),Dh(o)){if(o.then(Pn,Pn),e)return o.then(r=>{dc(t,r,e)}).catch(r=>{wr(r,t,0)});t.asyncDep=o}else dc(t,o,e)}else xd(t,e)}function dc(t,e,i){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:at(e)&&(t.setupState=Qh(e)),xd(t,i)}let fc;function xd(t,e,i){const n=t.type;if(!t.render){if(!e&&fc&&!n.render){const s=n.template||pl(t).template;if(s){const{isCustomElement:o,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Ut(Ut({isCustomElement:o,delimiters:a},r),l);n.render=fc(s,c)}}t.render=n.render||pi}Zn(t),ns(),kg(t),ss(),Pn()}function Zg(t){return new Proxy(t.attrs,{get(e,i){return ti(t,"get","$attrs"),e[i]}})}function Qg(t){const e=n=>{t.exposed=n||{}};let i;return{get attrs(){return i||(i=Zg(t))},slots:t.slots,emit:t.emit,expose:e}}function bl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Qh(Xh(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Es)return Es[i](t)},has(e,i){return i in e||i in Es}}))}function e0(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function t0(t){return Te(t)&&"__vccOpts"in t}const ge=(t,e)=>eg(t,e,Fs);function i0(t,e,i){const n=arguments.length;return n===2?at(e)&&!ke(e)?Ko(e)?K(t,null,[e]):K(t,e):K(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&Ko(i)&&(i=[i]),K(t,e,i))}const n0=Symbol(""),s0=()=>ko(n0),o0="3.2.45",r0="http://www.w3.org/2000/svg",An=typeof document<"u"?document:null,pc=An&&An.createElement("template"),a0={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e?An.createElementNS(r0,t):An.createElement(t,i?{is:i}:void 0);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>An.createTextNode(t),createComment:t=>An.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>An.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,s,o){const r=i?i.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===o||!(s=s.nextSibling)););else{pc.innerHTML=n?`<svg>${t}</svg>`:t;const a=pc.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[r?r.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function l0(t,e,i){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function c0(t,e,i){const n=t.style,s=yt(i);if(i&&!s){for(const o in i)Ca(n,o,i[o]);if(e&&!yt(e))for(const o in e)i[o]==null&&Ca(n,o,"")}else{const o=n.display;s?e!==i&&(n.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=o)}}const gc=/\s*!important$/;function Ca(t,e,i){if(ke(i))i.forEach(n=>Ca(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=u0(t,e);gc.test(i)?t.setProperty(is(n),i.replace(gc,""),"important"):t[n]=i}}const mc=["Webkit","Moz","ms"],Hr={};function u0(t,e){const i=Hr[e];if(i)return i;let n=Ci(e);if(n!=="filter"&&n in t)return Hr[e]=n;n=vr(n);for(let s=0;s<mc.length;s++){const o=mc[s]+n;if(o in t)return Hr[e]=o}return e}const bc="http://www.w3.org/1999/xlink";function h0(t,e,i,n,s){if(n&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(bc,e.slice(6,e.length)):t.setAttributeNS(bc,e,i);else{const o=fp(e);i==null||o&&!Th(i)?t.removeAttribute(e):t.setAttribute(e,o?"":i)}}function d0(t,e,i,n,s,o,r){if(e==="innerHTML"||e==="textContent"){n&&r(n,s,o),t[e]=i??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=i;const l=i??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),i==null&&t.removeAttribute(e);return}let a=!1;if(i===""||i==null){const l=typeof t[e];l==="boolean"?i=Th(i):i==null&&l==="string"?(i="",a=!0):l==="number"&&(i=0,a=!0)}try{t[e]=i}catch{}a&&t.removeAttribute(e)}function f0(t,e,i,n){t.addEventListener(e,i,n)}function p0(t,e,i,n){t.removeEventListener(e,i,n)}function g0(t,e,i,n,s=null){const o=t._vei||(t._vei={}),r=o[e];if(n&&r)r.value=n;else{const[a,l]=m0(e);if(n){const c=o[e]=y0(n,s);f0(t,a,c,l)}else r&&(p0(t,a,r,l),o[e]=void 0)}}const _c=/(?:Once|Passive|Capture)$/;function m0(t){let e;if(_c.test(t)){e={};let n;for(;n=t.match(_c);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):is(t.slice(2)),e]}let Ur=0;const b0=Promise.resolve(),_0=()=>Ur||(b0.then(()=>Ur=0),Ur=Date.now());function y0(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;gi(v0(n,i.value),e,5,[n])};return i.value=t,i.attached=_0(),i}function v0(t,e){if(ke(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const yc=/^on[a-z]/,S0=(t,e,i,n,s=!1,o,r,a,l)=>{e==="class"?l0(t,n,s):e==="style"?c0(t,i,n):br(e)?tl(e)||g0(t,e,i,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):w0(t,e,n,s))?d0(t,e,n,o,r,a,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),h0(t,e,n,s))};function w0(t,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&yc.test(e)&&Te(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||yc.test(e)&&yt(i)?!1:e in t}const E0=Ut({patchProp:S0},a0);let vc;function A0(){return vc||(vc=$g(E0))}const x0=(...t)=>{const e=A0().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=I0(n);if(!s)return;const o=e._component;!Te(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const r=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},e};function I0(t){return yt(t)?document.querySelector(t):t}var D=(t=>(t.BLACK="black",t.WHITE="white",t))(D||{});function Pt(t){return t==="black"?"white":"black"}function k0(t){return t==="black"?"b":"w"}function C0(t){return t==="b"||t==="w"}function P0(t){return t==="b"?"black":"white"}var L=(t=>(t.PAWN="pawn",t.LANCE="lance",t.KNIGHT="knight",t.SILVER="silver",t.GOLD="gold",t.BISHOP="bishop",t.ROOK="rook",t.KING="king",t.PROM_PAWN="promPawn",t.PROM_LANCE="promLance",t.PROM_KNIGHT="promKnight",t.PROM_SILVER="promSilver",t.HORSE="horse",t.DRAGON="dragon",t))(L||{});const M0={pawn:"",lance:"",knight:"",silver:"",gold:"",bishop:"",rook:"",king:"",promPawn:"",promLance:"",promKnight:"",promSilver:"",horse:"",dragon:""};function T0(t){return M0[t]||""}const B0=["pawn","lance","knight","silver","gold","bishop","rook"],R0={pawn:!0,lance:!0,knight:!0,silver:!0,gold:!1,bishop:!0,rook:!0,king:!1,promPawn:!1,promLance:!1,promKnight:!1,promSilver:!1,horse:!1,dragon:!1},Id={pawn:"promPawn",lance:"promLance",knight:"promKnight",silver:"promSilver",bishop:"horse",rook:"dragon"};function D0(t){return Id[t]||t}const N0={promPawn:"pawn",promLance:"lance",promKnight:"knight",promSilver:"silver",horse:"bishop",dragon:"rook"},kd={pawn:"P",lance:"L",knight:"N",silver:"S",gold:"G",bishop:"B",rook:"R",king:"K",promPawn:"+P",promLance:"+L",promKnight:"+N",promSilver:"+S",horse:"+B",dragon:"+R"};function O0(t){return kd[t]}const L0={pawn:"p",lance:"l",knight:"n",silver:"s",gold:"g",bishop:"b",rook:"r",king:"k",promPawn:"+p",promLance:"+l",promKnight:"+n",promSilver:"+s",horse:"+b",dragon:"+r"},Sc={P:"pawn",L:"lance",N:"knight",S:"silver",G:"gold",B:"bishop",R:"rook",K:"king","+P":"promPawn","+L":"promLance","+N":"promKnight","+S":"promSilver","+B":"horse","+R":"dragon",p:"pawn",l:"lance",n:"knight",s:"silver",g:"gold",b:"bishop",r:"rook",k:"king","+p":"promPawn","+l":"promLance","+n":"promKnight","+s":"promSilver","+b":"horse","+r":"dragon"},F0={P:D.BLACK,L:D.BLACK,N:D.BLACK,S:D.BLACK,G:D.BLACK,B:D.BLACK,R:D.BLACK,K:D.BLACK,"+P":D.BLACK,"+L":D.BLACK,"+N":D.BLACK,"+S":D.BLACK,"+B":D.BLACK,"+R":D.BLACK,p:D.WHITE,l:D.WHITE,n:D.WHITE,s:D.WHITE,g:D.WHITE,b:D.WHITE,r:D.WHITE,k:D.WHITE,"+p":D.WHITE,"+l":D.WHITE,"+n":D.WHITE,"+s":D.WHITE,"+b":D.WHITE,"+r":D.WHITE},Wt=new Map;Wt.set("pawn",{type:"promPawn",reverseColor:!1});Wt.set("lance",{type:"promLance",reverseColor:!1});Wt.set("knight",{type:"promKnight",reverseColor:!1});Wt.set("silver",{type:"promSilver",reverseColor:!1});Wt.set("gold",{type:"gold",reverseColor:!0});Wt.set("bishop",{type:"horse",reverseColor:!1});Wt.set("rook",{type:"dragon",reverseColor:!1});Wt.set("king",{type:"king",reverseColor:!0});Wt.set("promPawn",{type:"pawn",reverseColor:!0});Wt.set("promLance",{type:"lance",reverseColor:!0});Wt.set("promKnight",{type:"knight",reverseColor:!0});Wt.set("promSilver",{type:"silver",reverseColor:!0});Wt.set("horse",{type:"bishop",reverseColor:!0});Wt.set("dragon",{type:"rook",reverseColor:!0});class le{constructor(e,i){this.color=e,this.type=i}black(){return this.withColor(D.BLACK)}white(){return this.withColor(D.WHITE)}withColor(e){return new le(e,this.type)}equals(e){return this.type===e.type&&this.color===e.color}promoted(){const e=Id[this.type];return new le(this.color,e||this.type)}unpromoted(){const e=N0[this.type];return new le(this.color,e||this.type)}isPromotable(){return!!R0[this.type]}rotate(){const e=Wt.get(this.type),i=new le(this.color,e?e.type:this.type);return e&&e.reverseColor&&(i.color=Pt(this.color)),i}get id(){return this.color+"_"+this.type}get sfen(){switch(this.color){default:case D.BLACK:return kd[this.type];case D.WHITE:return L0[this.type]}}static isValidSFEN(e){return!!Sc[e]}static newBySFEN(e){const i=Sc[e];if(!i)return null;const n=F0[e];return n?new le(n,i):null}}var Ft=(t=>(t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t.LEFT_UP="left_up",t.RIGHT_UP="right_up",t.LEFT_DOWN="left_down",t.RIGHT_DOWN="right_down",t.LEFT_UP_KNIGHT="left_up_knight",t.RIGHT_UP_KNIGHT="right_up_knight",t.LEFT_DOWN_KNIGHT="left_down_knight",t.RIGHT_DOWN_KNIGHT="right_down_knight",t))(Ft||{});const $0={up:"down",down:"up",left:"right",right:"left",left_up:"right_down",right_up:"left_down",left_down:"right_up",right_down:"left_up",left_up_knight:"right_down_knight",right_up_knight:"left_down_knight",left_down_knight:"right_up_knight",right_down_knight:"left_up_knight"};function H0(t){return $0[t]}const U0=["up","down","left","right","left_up","right_up","left_down","right_down","left_up_knight","right_up_knight","left_down_knight","right_down_knight"];var $s=(t=>(t.SHORT="short",t.LONG="long",t))($s||{});const Cd={black:{pawn:{up:"short"},lance:{up:"long"},knight:{left_up_knight:"short",right_up_knight:"short"},silver:{left_up:"short",up:"short",right_up:"short",left_down:"short",right_down:"short"},gold:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},bishop:{left_up:"long",right_up:"long",left_down:"long",right_down:"long"},rook:{up:"long",left:"long",right:"long",down:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promLance:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promKnight:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promSilver:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},horse:{left_up:"long",right_up:"long",left_down:"long",right_down:"long",up:"short",left:"short",right:"short",down:"short"},dragon:{up:"long",left:"long",right:"long",down:"long",left_up:"short",right_up:"short",left_down:"short",right_down:"short"}},white:{pawn:{down:"short"},lance:{down:"long"},knight:{left_down_knight:"short",right_down_knight:"short"},silver:{left_down:"short",down:"short",right_down:"short",left_up:"short",right_up:"short"},gold:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},bishop:{left_down:"long",right_down:"long",left_up:"long",right_up:"long"},rook:{down:"long",left:"long",right:"long",up:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promLance:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promKnight:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promSilver:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},horse:{left_down:"long",right_down:"long",left_up:"long",right_up:"long",down:"short",left:"short",right:"short",up:"short"},dragon:{down:"long",left:"long",right:"long",up:"long",left_down:"short",right_down:"short",left_up:"short",right_up:"short"}}};function z0(t){return Object.keys(Cd[t.color][t.type])}function Pd(t,e){return Cd[t.color][t.type][e]}const W0={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},left_up:{x:-1,y:-1},right_up:{x:1,y:-1},left_down:{x:-1,y:1},right_down:{x:1,y:1},left_up_knight:{x:-1,y:-2},right_up_knight:{x:1,y:-2},left_down_knight:{x:-1,y:2},right_down_knight:{x:1,y:2}};function G0(t,e){if(t===1&&e===-2)return{direction:"right_up_knight",distance:1,ok:!0};if(t===-1&&e===-2)return{direction:"left_up_knight",distance:1,ok:!0};if(t===1&&e===2)return{direction:"right_down_knight",distance:1,ok:!0};if(t===-1&&e===2)return{direction:"left_down_knight",distance:1,ok:!0};if(t!==0&&e!==0&&Math.abs(t)!==Math.abs(e))return{direction:"",distance:0,ok:!1};let i=t,n=e,s=0;return i!==0&&(s=Math.abs(i),i/=s),n!==0&&(s=Math.abs(n),n/=s),i===-1&&n===-1?{direction:"left_up",distance:s,ok:!0}:i===0&&n===-1?{direction:"up",distance:s,ok:!0}:i===1&&n===-1?{direction:"right_up",distance:s,ok:!0}:i===-1&&n===0?{direction:"left",distance:s,ok:!0}:i===1&&n===0?{direction:"right",distance:s,ok:!0}:i===-1&&n===1?{direction:"left_down",distance:s,ok:!0}:i===0&&n===1?{direction:"down",distance:s,ok:!0}:i===1&&n===1?{direction:"right_down",distance:s,ok:!0}:{direction:"",distance:0,ok:!1}}function V0(t){switch(t){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}function j0(t){switch(t){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;case"i":return 9;default:return null}}const K0=["a","b","c","d","e","f","g","h","i"],bt=class{constructor(e,i){this.file=e,this.rank=i}get x(){return 9-this.file}get y(){return this.rank-1}get index(){return this.y*9+this.x}get opposite(){return new bt(10-this.file,10-this.rank)}neighbor(e,i){switch(e){case Ft.UP:return new bt(this.file,this.rank-1);case Ft.DOWN:return new bt(this.file,this.rank+1);case Ft.LEFT:return new bt(this.file+1,this.rank);case Ft.RIGHT:return new bt(this.file-1,this.rank);case Ft.LEFT_UP:return new bt(this.file+1,this.rank-1);case Ft.RIGHT_UP:return new bt(this.file-1,this.rank-1);case Ft.LEFT_DOWN:return new bt(this.file+1,this.rank+1);case Ft.RIGHT_DOWN:return new bt(this.file-1,this.rank+1);case Ft.LEFT_UP_KNIGHT:return new bt(this.file+1,this.rank-2);case Ft.RIGHT_UP_KNIGHT:return new bt(this.file-1,this.rank-2);case Ft.LEFT_DOWN_KNIGHT:return new bt(this.file+1,this.rank+2);case Ft.RIGHT_DOWN_KNIGHT:return new bt(this.file-1,this.rank+2)}const n=e,s=i;return new bt(this.file-n,this.rank+s)}get valid(){return this.file>=1&&this.file<=9&&this.rank>=1&&this.rank<=9}equals(e){return!!e&&this.file===e.file&&this.rank===e.rank}static newByXY(e,i){return new bt(9-e,i+1)}static newByIndex(e){return new bt(9-e%9,Math.trunc(e/9)+1)}get sfen(){return this.file+K0[this.rank-1]}static parseSFENSquare(e){const i=V0(e[0]),n=j0(e[1]);return!i||!n?null:new bt(i,n)}};let F=bt;M(F,"all",[]);for(let t=0;t<81;t+=1)F.all.push(F.newByIndex(t));const q0=["","","","","","","","",""],Y0=["","","","","","","","",""];class ot{constructor(e,i,n,s,o,r){this.from=e,this.to=i,this.promote=n,this.color=s,this.pieceType=o,this.capturedPieceType=r}equals(e){return e?(this.from instanceof F&&e.from instanceof F&&this.from.equals(e.from)||!(this.from instanceof F)&&!(e.from instanceof F)&&this.from===e.from)&&this.to.equals(e.to)&&this.promote===e.promote&&this.color===e.color&&this.pieceType===e.pieceType&&this.capturedPieceType===e.capturedPieceType:!1}withPromote(){return new ot(this.from,this.to,!0,this.color,this.pieceType,this.capturedPieceType)}getDisplayText(e){let i="";if(i+=this.color===D.BLACK?e!=null&&e.legacy?"":"":e!=null&&e.legacy?"":"",e!=null&&e.prev&&(e!=null&&e.prev.to.equals(this.to))?i+="":(i+=q0[this.to.file-1],i+=Y0[this.to.rank-1]),i+=T0(this.pieceType),this.promote&&(i+=""),this.from instanceof F){const n=this.from;i+=`(${n.file}${n.rank})`}else i+="";return i}get usi(){let e="";return this.from instanceof F?e+=this.from.sfen:e+=O0(this.from)+"*",e+=this.to.sfen,this.promote&&(e+="+"),e}}function Md(t){let e;if(t[1]==="*"){const s=le.newBySFEN(t[0]);if(!s)return null;e=s.type}else{const s=F.parseSFENSquare(t);if(!s)return null;e=s}const i=F.parseSFENSquare(t.substring(2));if(!i)return null;const n=t.length>=5&&t[4]==="+";return{from:e,to:i,promote:n}}var ve=(t=>(t.STANDARD="standard",t.EMPTY="empty",t.HANDICAP_LANCE="handicapLance",t.HANDICAP_RIGHT_LANCE="handicapRightLance",t.HANDICAP_BISHOP="handicapBishop",t.HANDICAP_ROOK="handicapRook",t.HANDICAP_ROOK_LANCE="handicapRookLance",t.HANDICAP_2PIECES="handicap2Pieces",t.HANDICAP_4PIECES="handicap4Pieces",t.HANDICAP_6PIECES="handicap6Pieces",t.HANDICAP_8PIECES="handicap8Pieces",t.TSUME_SHOGI="tsumeShogi",t.TSUME_SHOGI_2KINGS="tsumeShogi2Kings",t))(ve||{});function wc(t){switch(t){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}class qo{constructor(){M(this,"squares");this.squares=new Array;for(let e=0;e<81;e+=1)this.squares.push(null);this.reset("standard")}at(e){return this.squares[e.index]}set(e,i){this.squares[e.index]=i}swap(e,i){const n=this.squares[e.index];this.squares[e.index]=this.squares[i.index],this.squares[i.index]=n}remove(e){const i=this.squares[e.index];return this.squares[e.index]=null,i}listNonEmptySquares(){const e=new Array;return F.all.forEach(i=>{this.squares[i.index]&&e.push(i)}),e}listSquaresByColor(e){const i=new Array;return F.all.forEach(n=>{const s=this.squares[n.index];s&&s.color===e&&i.push(n)}),i}clear(){F.all.forEach(e=>{this.squares[e.index]=null})}reset(e){if(this.clear(),e!=="empty"&&(this.squares[new F(5,1).index]=new le(D.WHITE,L.KING),e!=="tsumeShogi"&&(this.squares[new F(5,9).index]=new le(D.BLACK,L.KING),e!=="tsumeShogi2Kings")))switch(this.squares[new F(2,8).index]=new le(D.BLACK,L.ROOK),this.squares[new F(8,2).index]=new le(D.WHITE,L.ROOK),this.squares[new F(8,8).index]=new le(D.BLACK,L.BISHOP),this.squares[new F(2,2).index]=new le(D.WHITE,L.BISHOP),this.squares[new F(4,9).index]=new le(D.BLACK,L.GOLD),this.squares[new F(6,9).index]=new le(D.BLACK,L.GOLD),this.squares[new F(6,1).index]=new le(D.WHITE,L.GOLD),this.squares[new F(4,1).index]=new le(D.WHITE,L.GOLD),this.squares[new F(3,9).index]=new le(D.BLACK,L.SILVER),this.squares[new F(7,9).index]=new le(D.BLACK,L.SILVER),this.squares[new F(7,1).index]=new le(D.WHITE,L.SILVER),this.squares[new F(3,1).index]=new le(D.WHITE,L.SILVER),this.squares[new F(2,9).index]=new le(D.BLACK,L.KNIGHT),this.squares[new F(8,9).index]=new le(D.BLACK,L.KNIGHT),this.squares[new F(8,1).index]=new le(D.WHITE,L.KNIGHT),this.squares[new F(2,1).index]=new le(D.WHITE,L.KNIGHT),this.squares[new F(1,9).index]=new le(D.BLACK,L.LANCE),this.squares[new F(9,9).index]=new le(D.BLACK,L.LANCE),this.squares[new F(9,1).index]=new le(D.WHITE,L.LANCE),this.squares[new F(1,1).index]=new le(D.WHITE,L.LANCE),this.squares[new F(1,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(2,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(3,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(4,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(5,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(6,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(7,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(8,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(9,7).index]=new le(D.BLACK,L.PAWN),this.squares[new F(1,3).index]=new le(D.WHITE,L.PAWN),this.squares[new F(2,3).index]=new le(D.WHITE,L.PAWN),this.squares[new F(3,3).index]=new le(D.WHITE,L.PAWN),this.squares[new F(4,3).index]=new le(D.WHITE,L.PAWN),this.squares[new F(5,3).index]=new le(D.WHITE,L.PAWN),this.squares[new F(6,3).index]=new le(D.WHITE,L.PAWN),this.squares[new F(7,3).index]=new le(D.WHITE,L.PAWN),this.squares[new F(8,3).index]=new le(D.WHITE,L.PAWN),this.squares[new F(9,3).index]=new le(D.WHITE,L.PAWN),e){default:case"standard":return;case"handicapLance":this.squares[new F(1,1).index]=null;return;case"handicapRightLance":this.squares[new F(9,1).index]=null;return;case"handicapBishop":this.squares[new F(2,2).index]=null;return;case"handicapRook":this.squares[new F(8,2).index]=null;return;case"handicapRookLance":this.squares[new F(8,2).index]=null,this.squares[new F(1,1).index]=null;return;case"handicap2Pieces":this.squares[new F(8,2).index]=null,this.squares[new F(2,2).index]=null;return;case"handicap4Pieces":this.squares[new F(8,2).index]=null,this.squares[new F(2,2).index]=null,this.squares[new F(1,1).index]=null,this.squares[new F(9,1).index]=null;return;case"handicap6Pieces":this.squares[new F(8,2).index]=null,this.squares[new F(2,2).index]=null,this.squares[new F(1,1).index]=null,this.squares[new F(2,1).index]=null,this.squares[new F(8,1).index]=null,this.squares[new F(9,1).index]=null;return;case"handicap8Pieces":this.squares[new F(8,2).index]=null,this.squares[new F(2,2).index]=null,this.squares[new F(1,1).index]=null,this.squares[new F(2,1).index]=null,this.squares[new F(3,1).index]=null,this.squares[new F(7,1).index]=null,this.squares[new F(8,1).index]=null,this.squares[new F(9,1).index]=null;return}}get sfen(){let e="",i=0;for(let n=0;n<9;n+=1){for(let s=0;s<9;s+=1){const o=this.at(F.newByXY(s,n));o?(i&&(e+=i,i=0),e+=o.sfen):i+=1}i&&(e+=i,i=0),n!==8&&(e+="/")}return e}resetBySFEN(e){if(!qo.isValidSFEN(e))return!1;this.clear();const i=e.split("/");for(let n=0;n<9;n+=1){let s=0;for(let o=0;o<i[n].length;o+=1){let r=i[n][o];r==="+"&&(o+=1,r+=i[n][o]);const a=wc(r);a?s+=a:(this.set(F.newByXY(s,n),le.newBySFEN(r)),s+=1)}}return!0}findKing(e){const i=new le(e,L.KING);return F.all.find(n=>{const s=this.at(n);if(s&&i.equals(s))return!0})}hasPower(e,i,n){return!!U0.find(s=>{let o=0;for(let r=e.neighbor(s);r.valid&&(o+=1,!(n&&n.filled&&r.equals(n.filled)));r=r.neighbor(s)){if(n&&n.ignore&&r.equals(n.ignore))continue;const a=this.at(r);if(a){if(a.color!==i)return!1;const l=H0(s),c=Pd(a,l);return c===$s.LONG||c===$s.SHORT&&o===1}}return!1})}isChecked(e,i){const n=this.findKing(e);return n?this.hasPower(n,Pt(e),{filled:i&&i.filled,ignore:i&&i.ignore}):!1}static isValidSFEN(e){const i=e.split("/");if(i.length!==9)return!1;for(let n=0;n<9;n+=1){let s=0;for(let o=0;o<i[n].length;o+=1){let r=i[n][o];r==="+"&&(o+=1,r+=i[n][o]);const a=wc(r);if(a)s+=a;else if(le.isValidSFEN(r))s+=1;else return!1}if(s!==9)return!1}return!0}copyFrom(e){F.all.forEach(i=>{this.squares[i.index]=e.at(i)})}}function pn(t,e){return t===0?"":(t!==1?t:"")+e.sfen}class ai{constructor(){M(this,"pieces");this.pieces=new Map,this.pieces.set(L.PAWN,0),this.pieces.set(L.LANCE,0),this.pieces.set(L.KNIGHT,0),this.pieces.set(L.SILVER,0),this.pieces.set(L.GOLD,0),this.pieces.set(L.BISHOP,0),this.pieces.set(L.ROOK,0)}count(e){return this.pieces.get(e)}set(e,i){this.pieces.set(e,i)}add(e,i){let n=this.pieces.get(e);return n+=i,this.pieces.set(e,n),n}reduce(e,i){let n=this.pieces.get(e);return n-=i,this.pieces.set(e,n),n}forEach(e){e(L.PAWN,this.pieces.get(L.PAWN)),e(L.LANCE,this.pieces.get(L.LANCE)),e(L.KNIGHT,this.pieces.get(L.KNIGHT)),e(L.SILVER,this.pieces.get(L.SILVER)),e(L.GOLD,this.pieces.get(L.GOLD)),e(L.BISHOP,this.pieces.get(L.BISHOP)),e(L.ROOK,this.pieces.get(L.ROOK))}get sfenBlack(){return this.formatSFEN(D.BLACK)}get sfenWhite(){return this.formatSFEN(D.WHITE)}formatSFEN(e){let i="";return i+=pn(this.count(L.ROOK),new le(e,L.ROOK)),i+=pn(this.count(L.BISHOP),new le(e,L.BISHOP)),i+=pn(this.count(L.GOLD),new le(e,L.GOLD)),i+=pn(this.count(L.SILVER),new le(e,L.SILVER)),i+=pn(this.count(L.KNIGHT),new le(e,L.KNIGHT)),i+=pn(this.count(L.LANCE),new le(e,L.LANCE)),i+=pn(this.count(L.PAWN),new le(e,L.PAWN)),i===""?"-":i}static formatSFEN(e,i){const n=e.sfenBlack,s=i.sfenWhite;return n==="-"&&s==="-"?"-":s==="-"?n:n==="-"?s:n+s}static isValidSFEN(e){return e==="-"?!0:!!e.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)}static parseSFEN(e){if(e==="-")return{black:new ai,white:new ai};if(!e.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/))return null;const i=e.match(/([0-9]*[PLNSGBRplnsgbr])/g),n=new ai,s=new ai;for(let o=0;o<i.length;o+=1){const r=i[o];let a=1;r.length>=2&&(a=Number(r.substring(0,r.length-1)));const l=le.newBySFEN(r[r.length-1]);l.color===D.BLACK?n.add(l.type,a):s.add(l.type,a)}return{black:n,white:s}}copyFrom(e){e.pieces.forEach((i,n)=>{this.pieces.set(n,i)})}}const X0={black:{pawn:{1:!0},lance:{1:!0},knight:{1:!0,2:!0}},white:{pawn:{9:!0},lance:{9:!0},knight:{9:!0,8:!0}}};function Ec(t,e,i){const n=X0[t][e];return n?n[i]:!1}function Ac(t,e){return t===D.BLACK?e<=3:e>=7}function J0(t,e,i){for(let n=1;n<=9;n+=1){const s=e.at(new F(i,n));if(s&&s.type===L.PAWN&&s.color===t)return!0}return!1}class Bt{constructor(){M(this,"_board",new qo);M(this,"_color",D.BLACK);M(this,"_blackHand",new ai);M(this,"_whiteHand",new ai)}get board(){return this._board}get color(){return this._color}get blackHand(){return this._blackHand}get whiteHand(){return this._whiteHand}reset(e){switch(this._board.reset(e),this._blackHand=new ai,this._whiteHand=new ai,e){case ve.STANDARD:case ve.EMPTY:case ve.TSUME_SHOGI:case ve.TSUME_SHOGI_2KINGS:this._color=D.BLACK;break;case ve.HANDICAP_LANCE:case ve.HANDICAP_RIGHT_LANCE:case ve.HANDICAP_BISHOP:case ve.HANDICAP_ROOK:case ve.HANDICAP_ROOK_LANCE:case ve.HANDICAP_2PIECES:case ve.HANDICAP_4PIECES:case ve.HANDICAP_6PIECES:case ve.HANDICAP_8PIECES:this._color=D.WHITE;break}(e===ve.TSUME_SHOGI||e===ve.TSUME_SHOGI_2KINGS)&&(this._whiteHand.set(L.PAWN,18),this._whiteHand.set(L.LANCE,4),this._whiteHand.set(L.KNIGHT,4),this._whiteHand.set(L.SILVER,4),this._whiteHand.set(L.GOLD,4),this._whiteHand.set(L.BISHOP,2),this._whiteHand.set(L.ROOK,2))}hand(e){return this._hand(e)}_hand(e){return e===D.BLACK?this._blackHand:this._whiteHand}get checked(){return this._board.isChecked(this.color)}createMove(e,i){let n;if(e instanceof F){const o=this._board.at(e);if(!o)return null;n=o.type}else n=e;const s=this._board.at(i);return new ot(e,i,!1,this.color,n,s?s.type:null)}createMoveByUSI(e){const i=Md(e);if(!i)return null;let n=this.createMove(i.from,i.to);return n?(i.promote&&(n=n.withPromote()),n):null}isPawnDropMate(e){if(e.from instanceof F||e.pieceType!==L.PAWN)return!1;const i=e.to.neighbor(e.color===D.BLACK?Ft.UP:Ft.DOWN),n=this.board.at(i);return!n||n.type!==L.KING||n.color===e.color||z0(n).find(o=>{const r=i.neighbor(o);if(!r.valid)return!1;const a=this.board.at(r);return a&&a.color==n.color?!1:!this.board.hasPower(r,e.color,{filled:e.to})})?!1:!this.board.listSquaresByColor(n.color).find(o=>!o.equals(i)&&this.isMovable(o,e.to)&&!this.board.isChecked(n.color,{filled:e.to,ignore:o}))}isValidMove(e){if(e.from instanceof F){const i=this._board.at(e.from);if(!i||i.color!==this.color||!this.isMovable(e.from,e.to))return!1;const n=this._board.at(e.to);if(n&&n.color===this.color)return!1;if(e.promote){if(!i.isPromotable()||!Ac(this.color,e.from.rank)&&!Ac(this.color,e.to.rank))return!1}else if(Ec(this.color,i.type,e.to.rank))return!1;if(e.pieceType!==L.KING?this._board.isChecked(this.color,{filled:e.to,ignore:e.from}):this._board.hasPower(e.to,Pt(this.color),{ignore:e.from}))return!1}else if(e.promote||e.color!==this.color||this.hand(this.color).count(e.from)===0||this._board.at(e.to)||Ec(this.color,e.from,e.to.rank)||e.from===L.PAWN&&J0(this.color,this._board,e.to.file)||this._board.isChecked(this.color,{filled:e.to})||this.isPawnDropMate(e))return!1;return!0}doMove(e,i){if(!(i&&i.ignoreValidation)&&!this.isValidMove(e))return!1;if(e.from instanceof F){const n=this._board.at(e.from),s=this._board.at(e.to);this._board.remove(e.from),this._board.set(e.to,e.promote?n.promoted():n),s&&s.type!==L.KING&&this._hand(this.color).add(s.unpromoted().type,1)}else this._hand(this.color).reduce(e.from,1),this._board.set(e.to,new le(this.color,e.from));return this._color=Pt(this.color),!0}undoMove(e){if(this._color=Pt(this.color),e.from instanceof F)if(this._board.set(e.from,new le(this.color,e.pieceType)),e.capturedPieceType){const i=new le(Pt(this.color),e.capturedPieceType);this._board.set(e.to,i),i.type!==L.KING&&this._hand(this.color).reduce(i.unpromoted().type,1)}else this._board.remove(e.to);else this._hand(this.color).add(e.from,1),this._board.remove(e.to)}isValidEditing(e,i){if(e instanceof F){const n=this._board.at(e);if(!n)return!1;if(i instanceof F){if(e.equals(i))return!1}else if(n.type===L.KING)return!1}else{if(!e.color||this.hand(e.color).count(e.type)===0)return!1;if(i instanceof F){if(this._board.at(i))return!1}else if(e.color===i)return!1}return!0}edit(e){if(e.move){if(!this.isValidEditing(e.move.from,e.move.to))return!1;if(!(e.move.from instanceof F))this._hand(e.move.from.color).reduce(e.move.from.type,1),e.move.to instanceof F?this._board.set(e.move.to,e.move.from):this._hand(e.move.to).add(e.move.from.type,1);else if(e.move.to instanceof F)this._board.swap(e.move.from,e.move.to);else{const i=this._board.remove(e.move.from);this._hand(e.move.to).add(i.unpromoted().type,1)}}if(e.rotate){const i=this._board.at(e.rotate);i&&this._board.set(e.rotate,i.rotate())}return!0}get sfen(){return this.getSFEN(1)}getSFEN(e){let i=`${this._board.sfen} ${k0(this.color)} `;return i+=ai.formatSFEN(this._blackHand,this._whiteHand),i+=" "+e,i}resetBySFEN(e){if(!Bt.isValidSFEN(e))return!1;const i=e.split(" ");i[0]==="sfen"&&i.shift(),this._board.resetBySFEN(i[0]),this._color=P0(i[1]);const n=ai.parseSFEN(i[2]);return this._blackHand=n.black,this._whiteHand=n.white,!0}setColor(e){this._color=e}static isValidSFEN(e){const i=e.split(" ");return i.length===5&&i[0]==="sfen"&&i.shift(),!(i.length!==4||!qo.isValidSFEN(i[0])||!C0(i[1])||!ai.isValidSFEN(i[2])||!i[3].match(/[0-9]+/))}static newBySFEN(e){const i=new Bt;return i.resetBySFEN(e)?i:null}isMovable(e,i){const n=i.x-e.x,s=i.y-e.y,{direction:o,distance:r,ok:a}=G0(n,s);if(!a)return!1;const l=this._board.at(e);if(!l)return!1;switch(Pd(l,o)){default:return!1;case $s.SHORT:return r===1;case $s.LONG:{const c=W0[o];for(let u=e.neighbor(c.x,c.y);u.valid;u=u.neighbor(c.x,c.y)){if(u.equals(i))return!0;if(this._board.at(u))return!1}return!1}}}copyFrom(e){this._board.copyFrom(e._board),this._color=e.color,this._blackHand.copyFrom(e._blackHand),this._whiteHand.copyFrom(e._whiteHand)}clone(){const e=new Bt;return e.copyFrom(this),e}}function Z0(t){const e={pawn:0,lance:0,knight:0,silver:0,gold:0,bishop:0,rook:0,king:0,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0};return F.all.forEach(i=>{const n=t.board.at(i);n&&(e[n.type]+=1)}),t.blackHand.forEach((i,n)=>{e[i]+=n}),t.whiteHand.forEach((i,n)=>{e[i]+=n}),e}function Q0(t){const e=Z0(t);return{pawn:18-e.pawn-e.promPawn,lance:4-e.lance-e.promLance,knight:4-e.knight-e.promKnight,silver:4-e.silver-e.promSilver,gold:4-e.gold,bishop:2-e.bishop-e.horse,rook:2-e.rook-e.dragon,king:2-e.king,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0}}function Td(t){return Rd(Math.floor(t/1e3))}function Bd(t){return Dd(Math.floor(t/1e3))}function Rd(t){const e=Math.floor(t/3600),i=Math.floor((t-e*3600)/60),n=t%60;return e+":"+String(i).padStart(2,"0")+":"+String(n).padStart(2,"0")}function Dd(t){const e=Math.floor(t/60),i=t%60;return String(e).padStart(2," ")+":"+String(i).padStart(2,"0")}var re=(t=>(t.TITLE="title",t.BLACK_NAME="blackName",t.WHITE_NAME="whiteName",t.START_DATETIME="startDatetime",t.END_DATETIME="endDatetime",t.DATE="date",t.TOURNAMENT="tournament",t.STRATEGY="strategy",t.TIME_LIMIT="timeLimit",t.TIME_SPENT="timeSpent",t.PLACE="place",t.POSTED_ON="postedOn",t.NOTE="note",t.BLACK_SHORT_NAME="blackShortName",t.WHITE_SHORT_NAME="whiteShortName",t.OPUS_NO="opusNo",t.OPUS_NAME="opusName",t.AUTHOR="author",t.PUBLISHED_ON="publishedOn",t.PUBLISHED_AT="publishedAt",t.SOURCE="source",t.LENGTH="length",t.INTEGRITY="integrity",t.CATEGORY="category",t.AWARD="award",t))(re||{});function em(t){switch(t){case"blackName":return"";case"whiteName":return"";case"startDatetime":return"";case"endDatetime":return"";case"date":return"";case"tournament":return"";case"strategy":return"";case"title":return"";case"timeLimit":return"";case"timeSpent":return"";case"place":return"";case"postedOn":return"";case"note":return"";case"blackShortName":return"";case"whiteShortName":return"";case"opusNo":return"";case"opusName":return"";case"author":return"";case"publishedOn":return"";case"publishedAt":return"";case"source":return"";case"length":return"";case"integrity":return"";case"category":return"";case"award":return""}}class Yo{constructor(){M(this,"standard",new Map);M(this,"custom",new Map)}get standardMetadataKeys(){return this.standard.keys()}getStandardMetadata(e){return this.standard.get(e)}setStandardMetadata(e,i){i?this.standard.set(e,i):this.standard.delete(e)}get customMetadataKeys(){return this.custom.keys()}getCustomMetadata(e){return this.custom.get(e)}setCustomMetadata(e,i){i?this.custom.set(e,i):this.custom.delete(e)}}var se=(t=>(t.START="start",t.INTERRUPT="interrupt",t.RESIGN="resign",t.IMPASS="impass",t.DRAW="draw",t.REPETITION_DRAW="repetitionDraw",t.MATE="mate",t.TIMEOUT="timeout",t.FOUL_WIN="foulWin",t.FOUL_LOSE="foulLose",t.ENTERING_OF_KING="enteringOfKing",t.WIN_BY_DEFAULT="winByDefault",t.LOSS_BY_DEFAULT="lossByDefault",t))(se||{});const tm={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",lossByDefault:""};function Nd(t){return tm[t]}class $n{constructor(e,i,n,s,o,r,a){M(this,"next",null);M(this,"branch",null);M(this,"comment","");M(this,"customData");M(this,"elapsedMs",0);M(this,"totalElapsedMs",0);this.number=e,this.prev=i,this.branchIndex=n,this.activeBranch=s,this.nextColor=o,this.move=r,this.isCheck=a}get displayText(){const e=this.prev&&this.prev.move instanceof ot?this.prev.move:null;return this.move instanceof ot?this.move.getDisplayText({prev:e}):Nd(this.move)}get timeText(){const e=Bd(this.elapsedMs),i=Td(this.totalElapsedMs);return`${e} / ${i}`}get hasBranch(){return!!this.prev&&!!this.prev.next&&!!this.prev.next.branch}get isFirstBranch(){return!this.prev||this.prev.next===this}get isLastMove(){if(!this.next)return!0;for(let e=this.next;e;e=e.branch)if(e.move instanceof ot)return!1;return!0}updateTotalElapsedMs(){this.totalElapsedMs=this.elapsedMs,this.prev&&this.prev.prev&&(this.totalElapsedMs+=this.prev.prev.totalElapsedMs)}setElapsedMs(e){this.elapsedMs=e,this.updateTotalElapsedMs();let i=this.next;const n=[];for(;i;)i.updateTotalElapsedMs(),i.branch&&n.push(i.branch),i.next?i=i.next:i=n.pop()||null}static newRootEntry(e){return new $n(0,null,0,!0,e,"start",!1)}}class xt{constructor(e){M(this,"metadata");M(this,"_initialPosition");M(this,"_position");M(this,"_first");M(this,"_current");M(this,"repetitionCounts",{});M(this,"repetitionStart",{});M(this,"onChangePosition",()=>{});this.metadata=new Yo,this._initialPosition=e?e.clone():new Bt,this._position=this.initialPosition.clone(),this._first=$n.newRootEntry(this._initialPosition.color),this._current=this._first,this.incrementRepetition()}get initialPosition(){return this._initialPosition}get position(){return this._position}get first(){return this._first}get current(){return this._current}get moves(){const e=this.movesBefore;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;e.push(i)}return e}get movesBefore(){return this._movesBefore}get _movesBefore(){const e=new Array;e.unshift(this._current);for(let i=this._current.prev;i;i=i.prev)e.unshift(i);return e}get length(){let e=this._current.number;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;e=i.number}return e}get branchBegin(){return this._current.prev?this._current.prev.next:this._current}clear(e){this.metadata=new Yo,e&&(this._initialPosition=e.clone()),this._position=this.initialPosition.clone(),this._first=$n.newRootEntry(this._initialPosition.color),this._current=this._first,this.repetitionCounts={},this.repetitionStart={},this.incrementRepetition(),this.onChangePosition()}goBack(){return this._goBack()?(this.onChangePosition(),!0):!1}_goBack(){return this._current.prev?(this._current.move instanceof ot&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=this._current.prev,!0):!1}goForward(){return this._goForward()?(this.onChangePosition(),!0):!1}_goForward(){if(this._current.next){for(this._current=this._current.next;!this._current.activeBranch;)this._current=this._current.branch;return this._current.move instanceof ot&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),!0}return!1}goto(e){for(;e<this._current.number&&this._goBack(););for(;e>this._current.number&&this._goForward(););this.onChangePosition()}resetAllBranchSelection(){this._forEach(e=>{e.activeBranch=e.isFirstBranch})}switchBranchByIndex(e){if(this.current.branchIndex===e)return!0;if(!this._current.prev)return!1;let i=!1;for(let n=this._current.prev.next;n;n=n.branch)n.branchIndex===e?(n.activeBranch=!0,this._current.move instanceof ot&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=n,this._current.move instanceof ot&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),i=!0):n.activeBranch=!1;return i&&this.onChangePosition(),i}append(e,i){let n=!1;if(e instanceof ot){if(!this._position.doMove(e,i))return!1;this.incrementRepetition(),n=this.position.checked}if(this._current!==this.first&&!(this._current.move instanceof ot)&&this.goBack(),!this._current.next)return this._current.next=new $n(this._current.number+1,this._current,0,!0,this.position.color,e,n),this._current=this._current.next,this._current.setElapsedMs(0),this.onChangePosition(),!0;let s;for(s=this._current.next;s;s=s.branch)s.activeBranch=!1;let o=this._current.next;for(s=this._current.next;s;s=s.branch){if(s.move instanceof ot&&e instanceof ot&&e.equals(s.move)||e===s.move)return this._current=s,this._current.activeBranch=!0,this.onChangePosition(),!0;o=s}return this._current=new $n(this._current.number+1,this._current,o.branchIndex+1,!0,this.position.color,e,n),this._current.setElapsedMs(0),o.branch=this._current,this.onChangePosition(),!0}swapWithNextBranch(){return this._current.branch?xt.swapWithPreviousBranch(this._current.branch):!1}swapWithPreviousBranch(){return xt.swapWithPreviousBranch(this._current)}static swapWithPreviousBranch(e){const i=e.prev;if(!i||!i.next||i.next==e)return!1;if(i.next.branch===e){const n=i.next;return n.branch=e.branch,e.branch=n,i.next=e,[e.branchIndex,n.branchIndex]=[n.branchIndex,e.branchIndex],!0}for(let n=i.next;n.branch;n=n.branch)if(n.branch.branch===e){const s=n.branch;return s.branch=e.branch,e.branch=s,n.branch=e,[e.branchIndex,s.branchIndex]=[s.branchIndex,e.branchIndex],!0}return!1}removeCurrentMove(){const e=this._current;if(!this.goBack()){this._current.next=null;return}if(this._current.next===e)this._current.next=e.branch;else for(let n=this._current.next;n;n=n.branch)if(n.branch===e){n.branch=e.branch;break}let i=0;for(let n=this._current.next;n;n=n.branch)n.branchIndex=i,i+=1;this._current.next&&(this._current.next.activeBranch=!0),this.onChangePosition()}removeNextMove(){this._current.next=null}incrementRepetition(){const e=this.position.sfen;this.repetitionCounts[e]?this.repetitionCounts[e]+=1:(this.repetitionCounts[e]=1,this.repetitionStart[e]=this.current.number)}decrementRepetition(){const e=this.position.sfen;this.repetitionCounts[e]-=1,this.repetitionCounts[e]===0&&(delete this.repetitionCounts[e],delete this.repetitionStart[e])}get repetition(){return this.repetitionCounts[this.position.sfen]>=4}get perpetualCheck(){if(!this.repetition)return null;const e=this.position.sfen,i=this.repetitionStart[e];let n=!0,s=!0,o=this.position.color;for(let r=this.current;r.number>=i;r=r.prev)o=Pt(o),!r.isCheck&&(o===D.BLACK?n=!1:s=!1);return n?D.BLACK:s?D.WHITE:null}get usi(){let e="position sfen "+this.initialPosition.sfen+" moves";return this.movesBefore.forEach(i=>{i.move instanceof ot&&(e+=" "+i.move.usi)}),e}get usiAll(){let e=this.usi;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;i.move instanceof ot&&(e+=" "+i.move.usi)}return e}get sfen(){return this.position.getSFEN(this._current.number+1)}forEach(e){this._forEach(e)}_forEach(e){let i=this._first;const n=[];for(;i;)e(i),i.branch&&n.push(i.branch),i.next?i=i.next:i=n.pop()||null}on(e,i){switch(e){case"changePosition":this.onChangePosition=i;break}}static newByUSI(e){const i="position startpos ",n="position sfen ",s="startpos ",o="sfen ",r="moves ";return e.startsWith(i)?xt.newByUSIFromMoves(new Bt,e.slice(i.length)):e.startsWith(n)?xt.newByUSIFromSFEN(e.slice(n.length)):e.startsWith(s)?xt.newByUSIFromMoves(new Bt,e.slice(s.length)):e.startsWith(o)?xt.newByUSIFromSFEN(e.slice(o.length)):e.startsWith(r)?xt.newByUSIFromMoves(new Bt,e):new Error("USI(1): "+e)}static newByUSIFromSFEN(e){const i=e.split(" ");if(i.length<4)return new Error("USI(2): "+e);const n=Bt.newBySFEN(i.slice(0,4).join(" "));return n?xt.newByUSIFromMoves(n,i.slice(4).join(" ")):new Error("USI(3): "+e)}static newByUSIFromMoves(e,i){const n=new xt(e);if(i.length===0)return n;const s=i.split(" ");if(s[0]!=="moves")return new Error("USI(4): "+i);for(let o=1;o<s.length;o++){const r=Md(s[o]);if(!r)break;let a=n.position.createMove(r.from,r.to);if(!a)return new Error(": "+s[o]);r.promote&&(a=a.withPromote()),n.append(a,{ignoreValidation:!0})}return n}}function Xo(t,e){return(t?xc(t):"")+xc(e)}function xc(t){return t+(t.endsWith(`
`)?"":`
`)}function Od(t){return t instanceof Error?t.message:t instanceof Object?JSON.stringify(t):String(t)}function Ic(t,e,i){return(t/e*100).toFixed(i)+"%"}const im={:re.BLACK_NAME,:re.WHITE_NAME,:re.START_DATETIME,:re.END_DATETIME,:re.DATE,:re.TOURNAMENT,:re.STRATEGY,:re.TITLE,:re.TIME_LIMIT,:re.TIME_SPENT,:re.PLACE,:re.POSTED_ON,:re.NOTE,:re.BLACK_SHORT_NAME,:re.WHITE_SHORT_NAME,:re.OPUS_NO,:re.OPUS_NAME,:re.AUTHOR,:re.PUBLISHED_ON,:re.PUBLISHED_AT,:re.SOURCE,:re.LENGTH,:re.INTEGRITY,:re.CATEGORY,:re.AWARD},nm={blackName:"",whiteName:"",startDatetime:"",endDatetime:"",date:"",tournament:"",strategy:"",title:"",timeLimit:"",timeSpent:"",place:"",postedOn:"",note:"",blackShortName:"",whiteShortName:"",opusNo:"",opusName:"",author:"",publishedOn:"",publishedAt:"",source:"",length:"",integrity:"",category:"",award:""},kc=[{prefix:/^#/,type:0,removePrefix:!1,isPosition:!1},{prefix:/^/,type:2,removePrefix:!0,isPosition:!0},{prefix:/^/,type:3,removePrefix:!0,isPosition:!0},{prefix:/^/,type:4,removePrefix:!0,isPosition:!0},{prefix:/^\|/,type:5,removePrefix:!1,isPosition:!0},{prefix:/^/,type:6,removePrefix:!1,isPosition:!0},{prefix:/^/,type:7,removePrefix:!1,isPosition:!0},{prefix:/^ *[0-9]+ +/,type:8,removePrefix:!1,isPosition:!1},{prefix:/^\*/,type:9,removePrefix:!0,isPosition:!1}];function sm(t){for(let i=0;i<kc.length;i++){const n=kc[i],s=t.match(n.prefix);if(s){const o=n.removePrefix?s[0].length:0;return{type:n.type,data:t.substring(o),isPosition:n.isPosition,metadataKey:""}}}const e=t.match(/^[^ ]+/);if(e){const i=e[0];return{type:1,data:t.substring(i.length),isPosition:!1,metadataKey:i.substring(0,i.length-1)}}return{type:10,data:t,isPosition:!1,metadataKey:""}}function om(t,e){switch(e.trim()){case"":t.reset(ve.STANDARD);return;case"":t.reset(ve.HANDICAP_LANCE);return;case"":t.reset(ve.HANDICAP_RIGHT_LANCE);return;case"":t.reset(ve.HANDICAP_BISHOP);return;case"":t.reset(ve.HANDICAP_ROOK);return;case"":t.reset(ve.HANDICAP_ROOK_LANCE);return;case"":t.reset(ve.HANDICAP_2PIECES);return;case"":t.reset(ve.HANDICAP_4PIECES);return;case"":t.reset(ve.HANDICAP_6PIECES);return;case"":t.reset(ve.HANDICAP_8PIECES);return;case"":t.reset(ve.EMPTY);return}return new Error(":"+e)}const rm={"":1,"":2,"":3,"":4,"":5,"":6,"":7,"":8,"":9},Ld={:1,:2,:3,:4,:5,:6,:7,:8,:9},am={:1,:2,:3,:4,:5,:6,:7,:8,:9,:10,:11,:12,:13,:14,:15,:16,:17,:18},Cc={1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},_l={:L.KING,:L.KING,:L.ROOK,:L.DRAGON,:L.DRAGON,:L.BISHOP,:L.HORSE,:L.GOLD,:L.SILVER,:L.PROM_SILVER,:L.PROM_SILVER,:L.KNIGHT,:L.PROM_KNIGHT,:L.PROM_KNIGHT,:L.LANCE,:L.PROM_LANCE,:L.PROM_LANCE,:L.PAWN,:L.PROM_PAWN},lm={:se.INTERRUPT,:se.RESIGN,:se.IMPASS,:se.REPETITION_DRAW,:se.MATE,:se.TIMEOUT,:se.FOUL_WIN,:se.FOUL_LOSE,:se.ENTERING_OF_KING,:se.WIN_BY_DEFAULT,:se.LOSS_BY_DEFAULT},cm=/^ *([0-9]+) +[]?([][]|\u3000*)(||||||||||||||||||)\u3000*(?)(|\([1-9][1-9]\)) *(.*)$/,um=/\( *([0-9]+):([0-9]+)\/[0-9: ]*\)/,hm=/^ *([0-9]+) +(||||||||||) *(.*)$/;function dm(t,e){if(e.length<21)return new Error(":"+e);const i=e[20],n=Ld[i];if(!n)return new Error(":"+e);for(let s=0;s<9;s+=1){const o=9-s,r=new F(o,n),a=s*2+1,l=e[a+1],c=_l[l];if(!c){t.remove(r);continue}const u=e[a]!=="v"?D.BLACK:D.WHITE;t.set(r,new le(u,c))}}function Pc(t,e){const i=e.split(/[ ]/);for(const n of i){if(!n||n==="")continue;const s=n[0],o=n.substring(1),r=_l[s],a=am[o]||1;if(!r)return new Error(": "+n);t.add(r,a)}}function Mc(t,e){const i=um.exec(e);if(i){const n=i[1],s=i[2],o=Number.parseInt(n)*60+Number.parseInt(s);t.current.setElapsedMs(o*1e3)}}function fm(t,e){let i=hm.exec(e);if(i){const d=Number(i[1]),p=lm[i[2]],_=i[3];t.goto(d-1),t.append(p,{ignoreValidation:!0}),Mc(t,_);return}if(i=cm.exec(e),!i)return new Error(":"+e);const n=Number(i[1]),s=i[2],o=i[3],r=i[4],a=i[5],l=i[6];if(n===0)return new Error(":"+e);t.goto(n-1);let c,u;if(s.startsWith("")){if(!(t.current.move instanceof ot))return new Error(": "+e);c=t.current.move.to}else{const d=rm[s[0]],p=Ld[s[1]];c=new F(d,p)}if(a==="")u=_l[o];else{const d=Cc[a[1]],p=Cc[a[2]];u=new F(d,p)}let h=t.position.createMove(u,c);if(!h)return new Error(": "+e);r===""&&(h=h.withPromote()),t.append(h,{ignoreValidation:!0}),Mc(t,l)}function Tc(t){const e=new Yo,i=new xt,n=t.split(/\r?\n/),s=new Bt;let o="",r=!1;for(const a of n){if(a==="")continue;const l=sm(a);if(r&&l.isPosition)return new Error(": "+a);let c;switch(l.type){case 1:{const u=im[l.metadataKey];u?e.setStandardMetadata(u,l.data):e.setCustomMetadata(l.metadataKey,l.data);break}case 2:c=om(s,l.data);break;case 3:c=Pc(s.blackHand,l.data);break;case 4:c=Pc(s.whiteHand,l.data);break;case 5:c=dm(s.board,l.data);break;case 6:s.setColor(D.BLACK);break;case 7:s.setColor(D.WHITE);break;case 8:r||(i.clear(s),i.first.comment=o,r=!0),c=fm(i,l.data);break;case 9:r?i.current.comment=Xo(i.current.comment,l.data):o=Xo(o,l.data);break}if(c)return c}return r||(i.clear(s),i.first.comment=o),i.goto(0),i.resetAllBranchSelection(),i.metadata=e,i}const Fd=["","","","","","","","","","","","","","","","","",""],pm=["","","","","","","","",""],$d=Fd,gm={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""},Pa={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""},mm={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",lossByDefault:""};function bm(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;for(const s of t.standardMetadataKeys)i+=nm[s]+""+t.getStandardMetadata(s)+n;for(const s of t.customMetadataKeys)i+=s+""+t.getCustomMetadata(s)+n;return i}function _m(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;i+=""+Bc(t.whiteHand)+n,i+="          "+n,i+="+---------------------------+"+n;for(let s=0;s<9;s++){i+="|";for(let o=0;o<9;o++){const r=F.newByXY(o,s),a=t.board.at(r);a?a.color===D.BLACK?i+=" "+Pa[a.type]:i+="v"+Pa[a.type]:i+=" "}i+="|"+$d[s]+n}return i+="+---------------------------+"+n,i+=""+Bc(t.blackHand)+n,t.color===D.BLACK?i+=""+n:i+=""+n,i}function ym(t){let e="";return e+=pm[t.to.file-1],e+=$d[t.to.rank-1],e+=gm[t.pieceType],t.promote&&(e+=""),t.from instanceof F?e+="("+t.from.file+t.from.rank+")":e+="",e}function Bc(t){let e="";return t.forEach((i,n)=>{n>=1&&(e+=Pa[i],n>=2&&(e+=Fd[n-1]),e+="")}),e}function Hd(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;return i+="# KIF Generated by Electron Shogi"+n,i+=bm(t.metadata,e),i+=_m(t.initialPosition,e),i+="---------------"+n,t.forEach(s=>{if(s.number!==0){s.isFirstBranch||(i+=n,i+=""+s.number+""+n),i+=s.number+" ",s.move instanceof ot?i+=ym(s.move):i+=mm[s.move];const o=Bd(s.elapsedMs),r=Td(s.totalElapsedMs);i+=` (${o}/${r})`,s.isFirstBranch&&s.hasBranch&&(i+="+"),i+=n}if(s.comment.length!==0){const o=s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment;i+="*"+o.replaceAll(`
`,n+"*")+n}}),i}const ao=[{pattern:/^V/,type:0,sectionType:0},{pattern:/^'\*(.+)$/,type:1,sectionType:2},{pattern:/^'(.+)$/,type:2,sectionType:2},{pattern:/^N\+(.+)$/,type:3,sectionType:0},{pattern:/^N-(.+)$/,type:4,sectionType:0},{pattern:/^\$([^:]+):(.+)$/,type:5,sectionType:0},{pattern:/^PI([1-9]{2}[A-Z]{2})*$/,type:6,sectionType:0},{pattern:/^P[1-9]( \* |[-+][A-Z][A-Z]){9}$/,type:7,sectionType:0},{pattern:/^P[-+]([0-9]{2}[A-Z]{2})*/,type:8,sectionType:0},{pattern:/^[-+]$/,type:9,sectionType:0},{pattern:/^[-+][0-9]{4}[A-Z]{2}/,type:10,sectionType:1},{pattern:/^%[-+A-Z_]+/,type:11,sectionType:1},{pattern:/^T([0-9]+)/,type:12,sectionType:1}];function vm(t){const e=[],i=t.match(/^['N$]/)?[t]:t.split(",");for(const n of i)for(let s=0;s<ao.length;s++){const o=ao[s].pattern.exec(n);if(o){e.push({type:ao[s].type,line:n,args:o.slice(1),sectionType:ao[s].sectionType});break}}return e}const Sm={EVENT:re.TITLE,SITE:re.PLACE,START_TIME:re.START_DATETIME,END_TIME:re.END_DATETIME,TIME_LIMIT:re.TIME_LIMIT,OPENING:re.STRATEGY},yl={FU:L.PAWN,KY:L.LANCE,KE:L.KNIGHT,GI:L.SILVER,KI:L.GOLD,KA:L.BISHOP,HI:L.ROOK,OU:L.KING,TO:L.PROM_PAWN,NY:L.PROM_LANCE,NK:L.PROM_KNIGHT,NG:L.PROM_SILVER,UM:L.HORSE,RY:L.DRAGON};function wm(t,e){e.reset(ve.STANDARD);for(let i=2;i+4<=t.length;i+=4){const n=Number(t[i]),s=Number(t[i+1]);e.board.remove(new F(n,s))}}function Em(t,e){const i=Number(t[1]);for(let n=0;n<9;n+=1){const s=9-n,o=n*3+2,r=t.slice(o,o+3);if(r[0]===" ")continue;const a=r[0]==="+"?D.BLACK:D.WHITE,l=yl[r.slice(1)];if(!l)return new Error(": "+r);e.board.set(new F(s,i),new le(a,l))}}function Am(t,e){const i=t[1]==="+"?D.BLACK:D.WHITE;for(let n=2;n+4<=t.length;n+=4){const s=t.slice(n,n+4);if(s==="00AL"){const l=Q0(e);i===D.BLACK?e.blackHand.forEach(c=>{e.blackHand.add(c,l[c])}):e.whiteHand.forEach(c=>{e.whiteHand.add(c,l[c])});return}const o=Number(s[0]),r=Number(s[1]),a=yl[s.slice(2)];if(!a)return new Error(": "+s);o!==0&&r!==0?e.board.set(new F(o,r),new le(i,a)):i===D.BLACK?e.blackHand.add(a,1):e.whiteHand.add(a,1)}}function Ud(t,e){if((t[0]==="+"?D.BLACK:D.WHITE)!=e.color)return new Error(": "+t);const n=Number(t[1]),s=Number(t[2]),o=Number(t[3]),r=Number(t[4]),a=yl[t.slice(5,7)];if(!a)return new Error(": "+t);const l=n===0&&s===0?a:new F(n,s),c=new F(o,r);let u=e.createMove(l,c);if(!u)return new Error(": "+t);if(l instanceof F){const h=e.board.at(l);if(!h)return new Error(": "+t);if(h.type!==a)if(h.promoted().type===a)u=u.withPromote();else return new Error(": "+t)}return u}function xm(t){switch(t){case"%CHUDAN":return se.INTERRUPT;case"%TORYO":return se.RESIGN;case"%JISHOGI":return se.IMPASS;case"%HIKIWAKE":return se.DRAW;case"%SENNICHITE":return se.REPETITION_DRAW;case"%TSUMI":return se.MATE;case"%TIME_UP":return se.TIMEOUT;case"%ILLEGAL_MOVE":return se.FOUL_LOSE;case"%KACHI":return se.ENTERING_OF_KING}}function Im(t,e){return Ud(e,t)}function Rc(t){const e=new Yo,i=new xt,n=new Bt;n.reset(ve.EMPTY);let s="",o=!1;const r=t.replace(/\r?\n\/(\r?\n[\s\S]*)?$/,"").split(/\r?\n/);for(const a of r)for(const l of vm(a)){if(l.sectionType===0&&o||l.sectionType===1&&!o)return new Error(": "+l.line);switch(l.type){case 0:break;case 1:o?i.current.comment=Xo(i.current.comment,l.args[0]):s=Xo(s,l.args[0]);break;case 2:break;case 3:e.setStandardMetadata(re.BLACK_NAME,l.args[0]);break;case 4:e.setStandardMetadata(re.WHITE_NAME,l.args[0]);break;case 5:{const c=Sm[l.args[0]];c?e.setStandardMetadata(c,l.args[1]):e.setCustomMetadata(l.args[0],l.args[1]);break}case 6:wm(l.line,n);break;case 7:{const c=Em(l.line,n);if(c)return c;break}case 8:{const c=Am(l.line,n);if(c)return c;break}case 9:l.line[0]==="+"?n.setColor(D.BLACK):n.setColor(D.WHITE),i.clear(n),i.first.comment=s,o=!0;break;case 10:{const c=Ud(l.line,i.position);if(c instanceof Error)return c;i.append(c,{ignoreValidation:!0});break}case 11:{const c=xm(l.line);c&&i.append(c,{ignoreValidation:!0});break}case 12:i.current.setElapsedMs(Number(l.args[0])*1e3);break}}return o||(i.clear(n),i.first.comment=s),i.goto(0),i.resetAllBranchSelection(),i.metadata=e,i}function km(t,e){let i="";const n=e.returnCode?e.returnCode:`
`,s=t.getStandardMetadata(re.BLACK_NAME)||t.getStandardMetadata(re.BLACK_SHORT_NAME);s&&(i+="N+"+s+n);const o=t.getStandardMetadata(re.WHITE_NAME)||t.getStandardMetadata(re.WHITE_SHORT_NAME);o&&(i+="N-"+o+n);const r=t.getStandardMetadata(re.TOURNAMENT)||t.getStandardMetadata(re.TITLE)||t.getStandardMetadata(re.OPUS_NAME)||t.getStandardMetadata(re.PUBLISHED_ON);r&&(i+="$EVENT:"+r+n);const a=t.getStandardMetadata(re.PLACE);a&&(i+="$SITE:"+a+n);const l=t.getStandardMetadata(re.START_DATETIME)||t.getStandardMetadata(re.DATE);l&&(i+="$START_TIME:"+l.slice(10)+n);const c=t.getStandardMetadata(re.DATE);c&&(i+="$END_TIME:"+c.slice(10)+n);const u=t.getStandardMetadata(re.STRATEGY);return u&&(i+="$OPENING:"+u+n),i}const Jo={king:"OU",rook:"HI",dragon:"RY",bishop:"KA",horse:"UM",gold:"KI",silver:"GI",promSilver:"NG",knight:"KE",promKnight:"NK",lance:"KY",promLance:"NY",pawn:"FU",promPawn:"TO"};function Dc(t){let e="";return t.forEach((i,n)=>{for(let s=0;s<n;s++)e+="00"+Jo[i]}),e}function Cm(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;for(let s=1;s<=9;s+=1){i+="P"+s;for(let o=9;o>=1;o-=1){const r=t.board.at(new F(o,s));r?r.color===D.BLACK?i+="+"+Jo[r.type]:i+="-"+Jo[r.type]:i+=" * "}i+=n}return i+="P+"+Dc(t.blackHand)+n,i+="P-"+Dc(t.whiteHand)+n,i+=(t.color===D.BLACK?"+":"-")+n,i}function Nc(t){return t instanceof F?`${t.file}${t.rank}`:"00"}function zd(t){return(t.color===D.BLACK?"+":"-")+Nc(t.from)+Nc(t.to)+Jo[t.promote?D0(t.pieceType):t.pieceType]}function Pm(t){switch(t){case se.INTERRUPT:return"%CHUDAN";case se.RESIGN:return"%TORYO";case se.IMPASS:return"%JISHOGI";case se.DRAW:return"%HIKIWAKE";case se.REPETITION_DRAW:return"%SENNICHITE";case se.MATE:return"%TSUMI";case se.TIMEOUT:return"%TIME_UP";case se.FOUL_LOSE:return"%ILLEGAL_MOVE";case se.ENTERING_OF_KING:return"%KACHI"}}function Oc(t){return zd(t)}function Wd(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;return i+="' CSA Generated by Electron Shogi"+n,i+="V2.2"+n,i+=km(t.metadata,e),i+=Cm(t.initialPosition,e),t.moves.forEach(s=>{if(s.number===0)return;let o;s.move instanceof ot?o=zd(s.move):o=Pm(s.move),o&&(i+=o+n,i+="T"+Math.floor(s.elapsedMs/1e3)+n),s.comment&&(s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment).split(`
`).forEach(a=>{i+="'*"+a+n})}),i}var Hn=(t=>(t[t.USI=0]="USI",t[t.SFEN=1]="SFEN",t[t.KIF=2]="KIF",t[t.CSA=3]="CSA",t))(Hn||{});function Mm(t){if(t.startsWith("position sfen ")||t.startsWith("position startpos ")||t.startsWith("sfen ")||t.startsWith("startpos ")||t.startsWith("moves "))return 0;if(Bt.isValidSFEN(t))return 1;const e=/(^|\n)[#0-9]/g,i=/(^|,|\n)[-+$%'VNPT]/g,n=t.match(e),s=t.match(i),o=n?n.length:0,r=s?s.length:0;return o>=r?2:3}class kt{constructor(e,i){this.width=e,this.height=i}add(e){return new kt(this.width+e.width,this.height+e.height)}reduce(e){return new kt(this.width-e.width,this.height-e.height)}}var vl=(t=>(t.STANDARD="standard",t.CHERRY_BLOSSOM="cherry-blossom",t.AUTUMN="autumn",t.SNOW="snow",t.DARK="dark",t))(vl||{}),In=(t=>(t.HITOMOJI="hitomoji",t.HITOMOJI_DARK="hitomojiDark",t.HITOMOJI_GOTHIC="hitomojiGothic",t.HITOMOJI_GOTHIC_DARK="hitomojiGothicDark",t))(In||{}),Le=(t=>(t.LIGHT="light",t.WARM="warm",t.RESIN="resin",t.RESIN2="resin2",t.RESIN3="resin3",t.DARK="dark",t.GREEN="green",t.CHERRY_BLOSSOM="cherry-blossom",t))(Le||{}),xs=(t=>(t.NONE="none",t.STANDARD="standard",t))(xs||{}),Zo=(t=>(t.SINGLE="single",t.DOUBLE="double",t))(Zo||{}),$t=(t=>(t.RECORD_INFO="recordInfo",t.COMMENT="comment",t.SEARCH="search",t.PV="pv",t.CHART="chart",t.PERCENTAGE_CHART="percentageChart",t.INVISIBLE="invisible",t))($t||{}),Ma=(t=>(t.ALL="all",t.ONLY_USER="onlyUser",t))(Ma||{});function Tm(t,e){const i={...t,...e};switch(i.tabPaneType){case"double":switch(i.tab){case"comment":i.tab="recordInfo";break;case"chart":case"percentageChart":i.tab="pv";break}break}return t.topPaneHeightPercentage!==0&&t.topPaneHeightPercentage!==100&&(i.topPanePreviousHeightPercentage=t.topPaneHeightPercentage),Bm(i)||i}function Ta(t){return{thema:"standard",pieceImage:"hitomoji",boardImage:"light",boardLabelType:"standard",pieceVolume:30,clockVolume:30,clockPitch:500,clockSoundTarget:"onlyUser",boardFlipping:!1,tabPaneType:"double",tab:"recordInfo",tab2:"comment",topPaneHeightPercentage:60,topPanePreviousHeightPercentage:60,bottomLeftPaneWidthPercentage:60,returnCode:(t==null?void 0:t.returnCode)||`\r
`,autoSaveDirectory:(t==null?void 0:t.autoSaveDirectory)||"",engineTimeoutSeconds:10,coefficientInSigmoid:600,badMoveLevelThreshold1:5,badMoveLevelThreshold2:10,badMoveLevelThreshold3:20,badMoveLevelThreshold4:50,showElapsedTimeInRecordView:!0,showCommentInRecordView:!0,enableAppLog:!1,enableUSILog:!1,enableCSALog:!1}}function Bm(t){if(t.pieceVolume<0||t.pieceVolume>100)return new Error("0%100%");if(t.clockVolume<0||t.clockVolume>100)return new Error("0%100%");if(t.clockPitch<220||t.clockPitch>880)return new Error("220Hz880Hz");if(t.engineTimeoutSeconds<1)return new Error(" 1 ");if(t.engineTimeoutSeconds>300)return new Error(" 300 ");if(t.coefficientInSigmoid<=0)return new Error("0");if(t.badMoveLevelThreshold1<1||t.badMoveLevelThreshold1>100)return new Error("1%100%");if(t.badMoveLevelThreshold2<1||t.badMoveLevelThreshold2>100)return new Error("1%100%");if(t.badMoveLevelThreshold3<1||t.badMoveLevelThreshold3>100)return new Error("1%100%");if(t.badMoveLevelThreshold4<1||t.badMoveLevelThreshold4>100)return new Error("1%100%");if(t.badMoveLevelThreshold1>=t.badMoveLevelThreshold2)return new Error("");if(t.badMoveLevelThreshold2>=t.badMoveLevelThreshold3)return new Error("");if(t.badMoveLevelThreshold3>=t.badMoveLevelThreshold4)return new Error("")}const Lc={};function ps(t){if(Lc[t])return;const e=document.createElement("img");e.src=t,Lc[t]=e}const ne={frame:{width:1471,height:959},board:{x:296.5,y:0,width:878,height:960,squreWidth:94.8,squreHeight:104,leftSquarePadding:12,topSquarePadding:12.2,leftPiecePadding:17.5,topPiecePadding:18.5,highlight:{selected:{"background-color":"#0088ff",opacity:"0.8"},lastMoveTo:{"background-color":"#44cc44",opacity:"0.8"},lastMoveFrom:{"background-color":"#44cc44",opacity:"0.4"}}},label:{fontSize:24},piece:{width:88,height:93},hand:{black:{x:1184,y:600},white:{x:0,y:0},width:288,height:360,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"}}},turn:{black:{x:1184,y:425},white:{x:0,y:492},width:288,height:45,fontSize:32},playerName:{black:{x:1184,y:480},white:{x:0,y:370},width:288,height:45,fontSize:25},clock:{black:{x:1184,y:535},white:{x:0,y:425},width:288,height:55,fontSize:40},control:{left:{x:0,y:547,width:288,height:412,fontSize:26},right:{x:1184,y:0,width:288,height:412,fontSize:26}}},Fc={[In.HITOMOJI]:{black:{pawn:"./piece/hitomoji/black_pawn.png",lance:"./piece/hitomoji/black_lance.png",knight:"./piece/hitomoji/black_knight.png",silver:"./piece/hitomoji/black_silver.png",gold:"./piece/hitomoji/black_gold.png",bishop:"./piece/hitomoji/black_bishop.png",rook:"./piece/hitomoji/black_rook.png",king:"./piece/hitomoji/black_king.png",king2:"./piece/hitomoji/black_king2.png",promPawn:"./piece/hitomoji/black_prom_pawn.png",promLance:"./piece/hitomoji/black_prom_lance.png",promKnight:"./piece/hitomoji/black_prom_knight.png",promSilver:"./piece/hitomoji/black_prom_silver.png",horse:"./piece/hitomoji/black_horse.png",dragon:"./piece/hitomoji/black_dragon.png"},white:{pawn:"./piece/hitomoji/white_pawn.png",lance:"./piece/hitomoji/white_lance.png",knight:"./piece/hitomoji/white_knight.png",silver:"./piece/hitomoji/white_silver.png",gold:"./piece/hitomoji/white_gold.png",bishop:"./piece/hitomoji/white_bishop.png",rook:"./piece/hitomoji/white_rook.png",king:"./piece/hitomoji/white_king.png",king2:"./piece/hitomoji/white_king2.png",promPawn:"./piece/hitomoji/white_prom_pawn.png",promLance:"./piece/hitomoji/white_prom_lance.png",promKnight:"./piece/hitomoji/white_prom_knight.png",promSilver:"./piece/hitomoji/white_prom_silver.png",horse:"./piece/hitomoji/white_horse.png",dragon:"./piece/hitomoji/white_dragon.png"}},[In.HITOMOJI_DARK]:{black:{pawn:"./piece/hitomoji_dark/black_pawn.png",lance:"./piece/hitomoji_dark/black_lance.png",knight:"./piece/hitomoji_dark/black_knight.png",silver:"./piece/hitomoji_dark/black_silver.png",gold:"./piece/hitomoji_dark/black_gold.png",bishop:"./piece/hitomoji_dark/black_bishop.png",rook:"./piece/hitomoji_dark/black_rook.png",king:"./piece/hitomoji_dark/black_king.png",king2:"./piece/hitomoji_dark/black_king2.png",promPawn:"./piece/hitomoji_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_dark/black_prom_silver.png",horse:"./piece/hitomoji_dark/black_horse.png",dragon:"./piece/hitomoji_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_dark/white_pawn.png",lance:"./piece/hitomoji_dark/white_lance.png",knight:"./piece/hitomoji_dark/white_knight.png",silver:"./piece/hitomoji_dark/white_silver.png",gold:"./piece/hitomoji_dark/white_gold.png",bishop:"./piece/hitomoji_dark/white_bishop.png",rook:"./piece/hitomoji_dark/white_rook.png",king:"./piece/hitomoji_dark/white_king.png",king2:"./piece/hitomoji_dark/white_king2.png",promPawn:"./piece/hitomoji_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_dark/white_prom_silver.png",horse:"./piece/hitomoji_dark/white_horse.png",dragon:"./piece/hitomoji_dark/white_dragon.png"}},[In.HITOMOJI_GOTHIC]:{black:{pawn:"./piece/hitomoji_gothic/black_pawn.png",lance:"./piece/hitomoji_gothic/black_lance.png",knight:"./piece/hitomoji_gothic/black_knight.png",silver:"./piece/hitomoji_gothic/black_silver.png",gold:"./piece/hitomoji_gothic/black_gold.png",bishop:"./piece/hitomoji_gothic/black_bishop.png",rook:"./piece/hitomoji_gothic/black_rook.png",king:"./piece/hitomoji_gothic/black_king.png",king2:"./piece/hitomoji_gothic/black_king2.png",promPawn:"./piece/hitomoji_gothic/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic/black_prom_silver.png",horse:"./piece/hitomoji_gothic/black_horse.png",dragon:"./piece/hitomoji_gothic/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic/white_pawn.png",lance:"./piece/hitomoji_gothic/white_lance.png",knight:"./piece/hitomoji_gothic/white_knight.png",silver:"./piece/hitomoji_gothic/white_silver.png",gold:"./piece/hitomoji_gothic/white_gold.png",bishop:"./piece/hitomoji_gothic/white_bishop.png",rook:"./piece/hitomoji_gothic/white_rook.png",king:"./piece/hitomoji_gothic/white_king.png",king2:"./piece/hitomoji_gothic/white_king2.png",promPawn:"./piece/hitomoji_gothic/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic/white_prom_silver.png",horse:"./piece/hitomoji_gothic/white_horse.png",dragon:"./piece/hitomoji_gothic/white_dragon.png"}},[In.HITOMOJI_GOTHIC_DARK]:{black:{pawn:"./piece/hitomoji_gothic_dark/black_pawn.png",lance:"./piece/hitomoji_gothic_dark/black_lance.png",knight:"./piece/hitomoji_gothic_dark/black_knight.png",silver:"./piece/hitomoji_gothic_dark/black_silver.png",gold:"./piece/hitomoji_gothic_dark/black_gold.png",bishop:"./piece/hitomoji_gothic_dark/black_bishop.png",rook:"./piece/hitomoji_gothic_dark/black_rook.png",king:"./piece/hitomoji_gothic_dark/black_king.png",king2:"./piece/hitomoji_gothic_dark/black_king2.png",promPawn:"./piece/hitomoji_gothic_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/black_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/black_horse.png",dragon:"./piece/hitomoji_gothic_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic_dark/white_pawn.png",lance:"./piece/hitomoji_gothic_dark/white_lance.png",knight:"./piece/hitomoji_gothic_dark/white_knight.png",silver:"./piece/hitomoji_gothic_dark/white_silver.png",gold:"./piece/hitomoji_gothic_dark/white_gold.png",bishop:"./piece/hitomoji_gothic_dark/white_bishop.png",rook:"./piece/hitomoji_gothic_dark/white_rook.png",king:"./piece/hitomoji_gothic_dark/white_king.png",king2:"./piece/hitomoji_gothic_dark/white_king2.png",promPawn:"./piece/hitomoji_gothic_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/white_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/white_horse.png",dragon:"./piece/hitomoji_gothic_dark/white_dragon.png"}}},Rm={[Le.LIGHT]:"./board/grid.svg",[Le.WARM]:"./board/grid.svg",[Le.RESIN]:"./board/grid.svg",[Le.RESIN2]:"./board/grid.svg",[Le.RESIN3]:"./board/grid.svg",[Le.DARK]:"./board/grid_white.svg",[Le.GREEN]:"./board/grid.svg",[Le.CHERRY_BLOSSOM]:"./board/grid.svg"},Dm={[Le.LIGHT]:"./board/wood_light.png",[Le.WARM]:"./board/wood_warm.png",[Le.RESIN]:null,[Le.RESIN2]:null,[Le.RESIN3]:null,[Le.DARK]:null,[Le.GREEN]:null,[Le.CHERRY_BLOSSOM]:null},Nm={[Le.LIGHT]:"rgba(0, 0, 0, 0)",[Le.WARM]:"rgba(0, 0, 0, 0)",[Le.RESIN]:"#d69b00",[Le.RESIN2]:"#efbf63",[Le.RESIN3]:"#ad7624",[Le.DARK]:"#333333",[Le.GREEN]:"#598459",[Le.CHERRY_BLOSSOM]:"#ecb6b6"},Om={[Le.LIGHT]:"#8b4513",[Le.WARM]:"#8b4513",[Le.RESIN]:"#8b4513",[Le.RESIN2]:"#8b4513",[Le.RESIN3]:"#8b4513",[Le.DARK]:"#333333",[Le.GREEN]:"#527a52",[Le.CHERRY_BLOSSOM]:"#e8a9a9"},Lm={black:{pawn:{row:3,column:0,width:2},lance:{row:2,column:0,width:1},knight:{row:2,column:1,width:1},silver:{row:1,column:0,width:1},gold:{row:1,column:1,width:1},bishop:{row:0,column:0,width:1},rook:{row:0,column:1,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}},white:{pawn:{row:0,column:0,width:2},lance:{row:1,column:1,width:1},knight:{row:1,column:0,width:1},silver:{row:2,column:1,width:1},gold:{row:2,column:0,width:1},bishop:{row:3,column:1,width:1},rook:{row:3,column:0,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}}},Fm={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};class $m{constructor(e,i,n){M(this,"pieceImages");M(this,"boardGridImage");M(this,"boardTextureImage");this.boardImageType=i,this.boardLabelType=n,this.pieceImages=Fc[e]||Fc[In.HITOMOJI],this.boardGridImage=Rm[i],this.boardTextureImage=Dm[i]}preload(){ps(this.boardGridImage),this.boardTextureImage&&ps(this.boardTextureImage),Object.values(this.pieceImages.black).forEach(ps),Object.values(this.pieceImages.white).forEach(ps)}build(e,i,n,s,o,r){let a=e.width/ne.frame.width;ne.frame.height*a>e.height&&(a=e.height/ne.frame.height);const l=()=>{const Q=ne.frame.height*a,ee=ne.frame.width*a;return{style:{height:Q+"px",width:ee+"px"},size:new kt(ee,Q)}},c=()=>{const Q=ne.board.x*a,ee=ne.board.y*a,oe=ne.board.width*a,Be=ne.board.height*a,be={"background-color":Nm[this.boardImageType],left:Q+"px",top:ee+"px",height:Be+"px",width:oe+"px"};return{gridImagePath:this.boardGridImage,textureImagePath:this.boardTextureImage,x:Q,y:ee,style:be}},u=Q=>{const ee=[];if(this.boardLabelType==xs.NONE)return ee;const oe=ne.label.fontSize*a,Be=oe*.1,ye={color:"black","font-size":oe+"px","font-weight":"bold","text-shadow":`${Be}px ${Be}px  ${Be}px white`};for(let be=1;be<=9;be++){const ct=Q.x-oe*.5+(r?0:ne.board.width)*a+ne.board.leftPiecePadding*.5*a*(r?1:-1),ut=Q.y-oe*.5+(ne.board.topSquarePadding+((r?10-be:be)-.5)*ne.board.squreHeight)*a;ee.push({id:"rank"+be,character:Fm[be],style:{left:ct+"px",top:ut+"px",...ye}})}for(let be=1;be<=9;be++){const ct=Q.x-oe*.5+(ne.board.leftPiecePadding+(9.5-(r?10-be:be))*ne.board.squreWidth)*a,ut=Q.y-oe*.5+(r?ne.board.height:0)*a+ne.board.topSquarePadding*.5*a*(r?-1:1);ee.push({id:"file"+be,character:String(be),style:{left:ct+"px",top:ut+"px",...ye}})}return ee},h=Q=>{const ee=[];return i.board.listNonEmptySquares().forEach(oe=>{const Be=i.board.at(oe),ye=Be.id+oe.index,be=r?Pt(Be.color):Be.color,ct=Be.type==L.KING&&Be.color==D.BLACK?"king2":Be.type,ut=this.pieceImages[be][ct],vt=Q.x+(ne.board.leftPiecePadding+ne.board.squreWidth*(r?oe.opposite:oe).x)*a,Je=Q.y+(ne.board.topPiecePadding+ne.board.squreHeight*(r?oe.opposite:oe).y)*a,At=ne.piece.width*a,je=ne.piece.height*a;ee.push({id:ye,imagePath:ut,style:{left:vt+"px",top:Je+"px",width:At+"px",height:je+"px"}})}),ee},d=Q=>{const ee=[];return F.all.forEach(oe=>{const Be=oe.index,{file:ye}=oe,{rank:be}=oe,ct=Q.x+(ne.board.leftSquarePadding+ne.board.squreWidth*(r?oe.opposite:oe).x)*a,ut=Q.y+(ne.board.topSquarePadding+ne.board.squreHeight*(r?oe.opposite:oe).y)*a,vt=ne.board.squreWidth*a,Je=ne.board.squreHeight*a,At={left:ct+"px",top:ut+"px",width:vt+"px",height:Je+"px"};let je=At;n&&oe.equals(n.to)&&(je={...je,...ne.board.highlight.lastMoveTo}),n&&n.from instanceof F&&oe.equals(n.from)&&(je={...je,...ne.board.highlight.lastMoveFrom}),s instanceof F&&s.equals(oe)&&(je={...je,...ne.board.highlight.selected}),ee.push({id:Be,file:ye,rank:be,style:At,backgroundStyle:je})}),ee},p=(Q,ee)=>{const oe=r?Pt(Q):Q,Be=Om[this.boardImageType],ye=ne.hand[oe].x*a,be=ne.hand[oe].y*a,ct=ne.hand.width*a,ut=ne.hand.height*a,vt={"background-color":Be,left:ye+"px",top:be+"px",width:ct+"px",height:ut+"px"},Je=[],At=[];return B0.forEach(je=>{const St=ee.count(je),si=Lm[oe][je],bi=ne.hand.width/2*si.width*a,I=ne.hand.height/4*a,P=bi*si.column,N=I*si.row,U=ne.piece.width*a,z=ne.piece.height*a,X=Math.max(bi-U*St,0)/(St*2),ie=(bi-U-X*2)/Math.max(St-1,1);for(let ae=St-1;ae>=0;ae-=1){const ce=je+ae,me=this.pieceImages[oe][je],_e=P+X+ie*ae,Me=N;Je.push({id:ce,imagePath:me,style:{left:_e+"px",top:Me+"px",width:U+"px",height:z+"px"}})}const J=je,Z={left:P+"px",top:N+"px",width:bi+"px",height:I+"px"};let j=Z;s&&s instanceof le&&s.color===Q&&s.type===je&&(j={...j,...ne.hand.highlight.selected}),At.push({id:J,type:je,style:Z,backgroundStyle:j})}),{style:vt,pieces:Je,pointers:At}},_=(Q,ee)=>{if(!ee)return null;const oe=r?Pt(ee.color):ee.color,Be=r?ee.to.opposite:ee.to,ye=new le(oe,ee.pieceType),be=ye.promoted(),ct=ye.unpromoted(),ut=this.pieceImages[oe][be.type],vt=this.pieceImages[oe][ct.type],Je=Q.x+(ne.board.leftSquarePadding+ne.board.squreWidth*(Be.x===0?0:Be.x===8?7:Be.x-.5))*a,At=Q.y+(ne.board.topSquarePadding+ne.board.squreHeight*Be.y)*a,je=ne.board.squreWidth*2*a,St=ne.board.squreHeight*a,si={left:Je+"px",top:At+"px",width:je+"px",height:St+"px","font-size":St/4+"px"};return{promoteImagePath:ut,notPromoteImagePath:vt,style:si}},b=()=>{const Q=i.color,ee=r?Pt(Q):Q,oe=2;return{style:{left:ne.turn[ee].x*a-oe+"px",top:ne.turn[ee].y*a-oe+"px",width:ne.turn.width*a-oe+"px",height:ne.turn.height*a-oe+"px","font-size":ne.turn.fontSize*a+"px","border-radius":ne.turn.height*a*.4+"px","border-width":oe+"px","border-style":"solid"}}},v=Q=>{const ee=r?Pt(Q):Q;return{style:{left:ne.playerName[ee].x*a+"px",top:ne.playerName[ee].y*a+"px",width:ne.playerName.width*a+"px",height:ne.playerName.height*a+"px","font-size":ne.playerName.fontSize*a+"px"}}},y=Q=>{const ee=r?Pt(Q):Q;return{style:{left:ne.clock[ee].x*a+"px",top:ne.clock[ee].y*a+"px",width:ne.clock.width*a+"px",height:ne.clock.height*a+"px","font-size":ne.clock.fontSize*a+"px"}}},w=()=>({left:{style:{left:ne.control.left.x*a+"px",top:ne.control.left.y*a+"px",width:ne.control.left.width*a+"px",height:ne.control.left.height*a+"px","font-size":ne.control.left.fontSize*a+"px"}},right:{style:{left:ne.control.right.x*a+"px",top:ne.control.right.y*a+"px",width:ne.control.right.width*a+"px",height:ne.control.right.height*a+"px","font-size":ne.control.right.fontSize*a+"px"}}}),E=l(),x=c(),k=u(x),B=h(x),H=d(x),G=p(D.BLACK,i.hand(D.BLACK)),te=p(D.WHITE,i.hand(D.WHITE)),Y=_(x,o),q=b(),he=v(D.BLACK),de=v(D.WHITE),Oe=y(D.BLACK),xe=y(D.WHITE),Ae=w();return{frame:E,board:x,labels:k,piece:B,square:H,blackHand:G,whiteHand:te,promotion:Y,turn:q,blackPlayerName:he,whitePlayerName:de,blackClock:Oe,whiteClock:xe,control:Ae}}}const Hm=ze({name:"BoardView",props:{pieceImageType:{type:String,required:!0},boardImageType:{type:String,required:!0},boardLabelType:{type:String,required:!0},maxSize:{type:kt,required:!0},position:{type:Object,required:!0},lastMove:{type:Object,required:!1,default:null},flip:{type:Boolean,required:!1},allowEdit:{type:Boolean,required:!1},allowMove:{type:Boolean,required:!1},blackPlayerName:{type:String,required:!1,default:""},whitePlayerName:{type:String,required:!1,default:""},blackPlayerTime:{type:Number,required:!1,default:void 0},blackPlayerByoyomi:{type:Number,required:!1,default:void 0},whitePlayerTime:{type:Number,required:!1,default:void 0},whitePlayerByoyomi:{type:Number,required:!1,default:void 0}},emits:["resize","move","edit"],setup(t,e){const i=Wi({pointer:null,reservedMove:null}),n=()=>{i.pointer=null,i.reservedMove=null};nn([()=>t.position,()=>t.allowEdit,()=>t.allowMove],()=>{n()});const s=()=>{n()},o=(E,x,k)=>{const B=i.pointer;if(n(),!(E instanceof F&&B instanceof F&&E.equals(B))&&!(E instanceof le&&B instanceof le&&E.equals(B))){if(B){const H=B,G=E instanceof F?E:E.color;if(t.allowEdit&&t.position.isValidEditing(H,G)){e.emit("edit",{move:{from:B,to:G}});return}if(t.allowMove&&E instanceof F){const te=B instanceof F?B:B.type,Y=E,q=t.position.createMove(te,Y);if(!q)return;const he=t.position.isValidMove(q),de=t.position.isValidMove(q.withPromote());if(he&&de){i.reservedMove=q;return}if(he){e.emit("move",q);return}if(de){e.emit("move",q.withPromote());return}}}!t.allowMove&&!t.allowEdit||x||!t.allowEdit&&k!==t.position.color||(i.pointer=E)}},r=(E,x,k)=>{E.stopPropagation(),E.preventDefault();const B=new F(x,k),H=t.position.board.at(B);o(B,!H,H==null?void 0:H.color)},a=(E,x,k)=>{E.stopPropagation(),E.preventDefault();const B=t.position.hand(x).count(k)===0;o(new le(x,k),B,x)},l=(E,x,k)=>{E.stopPropagation(),E.preventDefault(),n();const B=new F(x,k);t.allowEdit&&t.position.board.at(B)&&e.emit("edit",{rotate:B})},c=E=>{E.stopPropagation(),E.preventDefault();const x=i.reservedMove;n(),x&&t.position.isValidMove(x.withPromote())&&e.emit("move",x.withPromote())},u=E=>{E.stopPropagation(),E.preventDefault();const x=i.reservedMove;n(),x&&t.position.isValidMove(x)&&e.emit("move",x)},h=ge(()=>{const E=new $m(t.pieceImageType,t.boardImageType,t.boardLabelType);return E.preload(),E}),d=ge(()=>{const E=h.value.build(t.maxSize,t.position,t.lastMove,i.pointer,i.reservedMove,t.flip);return e.emit("resize",E.frame.size),E}),p=(E,x)=>E?Rd(E):x!==void 0?""+x:"0:00:00",_=(E,x)=>{if(!E&&!x)return"normal";const k=(E||0)+(x||0);return k<=5?"danger":k<=10?"warning":"normal"},b=ge(()=>p(t.blackPlayerTime,t.blackPlayerByoyomi)),v=ge(()=>_(t.blackPlayerTime,t.blackPlayerByoyomi)),y=ge(()=>p(t.whitePlayerTime,t.whitePlayerByoyomi)),w=ge(()=>_(t.whitePlayerTime,t.whitePlayerByoyomi));return{clickFrame:s,clickSquare:r,clickHand:a,clickSquareR:l,clickPromote:c,clickNotPromote:u,layout:d,blackPlayerTimeText:b,blackPlayerTimeSeverity:v,whitePlayerTimeText:y,whitePlayerTimeSeverity:w,Color:D}}});const We=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},Um=["src"],zm=["src"],Wm={class:"player-name-text"},Gm={class:"clock-text"},Vm={class:"player-name-text"},jm={class:"clock-text"},Km=["src"],qm=["onClick","onContextmenu"],Ym=["src"],Xm=["onClick"],Jm=["src"],Zm=["onClick"],Qm=["src"],e1=["src"];function t1(t,e,i,n,s,o){return T(),O("div",null,[m("div",{class:"frame",style:He(t.layout.frame.style),onClick:e[2]||(e[2]=r=>t.clickFrame())},[t.layout.board.textureImagePath?(T(),O("div",{key:0,class:"board-texture",style:He(t.layout.board.style)},[m("img",{class:"board-image",src:t.layout.board.textureImagePath},null,8,Um)],4)):ue("",!0),m("div",{class:"board-grid",style:He(t.layout.board.style)},[m("img",{class:"board-image",src:t.layout.board.gridImagePath},null,8,zm)],4),m("div",{class:ei(["player-name",{active:t.position.color=="black"}]),style:He(t.layout.blackPlayerName.style)},[m("span",Wm,""+fe(t.blackPlayerName),1)],6),m("div",{class:ei(["clock",t.blackPlayerTimeSeverity]),style:He(t.layout.blackClock.style)},[m("span",Gm,fe(t.blackPlayerTimeText),1)],6),m("div",{class:ei(["player-name",{active:t.position.color=="white"}]),style:He(t.layout.whitePlayerName.style)},[m("span",Vm,""+fe(t.whitePlayerName),1)],6),m("div",{class:ei(["clock",t.whitePlayerTimeSeverity]),style:He(t.layout.whiteClock.style)},[m("span",jm,fe(t.whitePlayerTimeText),1)],6),(T(!0),O(Pe,null,Ye(t.layout.square,r=>(T(),O("div",{key:r.id,class:"square",style:He(r.backgroundStyle)},null,4))),128)),(T(!0),O(Pe,null,Ye(t.layout.piece,r=>(T(),O("div",{key:r.id,class:"piece",style:He(r.style)},[m("img",{class:"piece-image",src:r.imagePath},null,8,Km)],4))),128)),(T(!0),O(Pe,null,Ye(t.layout.labels,r=>(T(),O("div",{key:r.id,class:"label",style:He(r.style)},fe(r.character),5))),128)),(T(!0),O(Pe,null,Ye(t.layout.square,r=>(T(),O("div",{key:r.id,class:"square",style:He(r.style),onClick:a=>t.clickSquare(a,r.file,r.rank),onContextmenu:a=>t.clickSquareR(a,r.file,r.rank)},null,44,qm))),128)),m("div",{class:"hand",style:He(t.layout.blackHand.style)},[(T(!0),O(Pe,null,Ye(t.layout.blackHand.pointers,r=>(T(),O("div",{key:r.id,class:"hand-pointer",style:He(r.backgroundStyle)},null,4))),128)),(T(!0),O(Pe,null,Ye(t.layout.blackHand.pieces,r=>(T(),O("div",{key:r.id,class:"piece",style:He(r.style)},[m("img",{class:"piece-image",src:r.imagePath},null,8,Ym)],4))),128)),(T(!0),O(Pe,null,Ye(t.layout.blackHand.pointers,r=>(T(),O("div",{key:r.id,class:"hand-pointer",style:He(r.style),onClick:a=>t.clickHand(a,t.Color.BLACK,r.type)},null,12,Xm))),128))],4),m("div",{class:"hand",style:He(t.layout.whiteHand.style)},[(T(!0),O(Pe,null,Ye(t.layout.whiteHand.pointers,r=>(T(),O("div",{key:r.id,class:"hand-pointer",style:He(r.backgroundStyle)},null,4))),128)),(T(!0),O(Pe,null,Ye(t.layout.whiteHand.pieces,r=>(T(),O("div",{key:r.id,class:"piece",style:He(r.style)},[m("img",{class:"piece-image",src:r.imagePath},null,8,Jm)],4))),128)),(T(!0),O(Pe,null,Ye(t.layout.whiteHand.pointers,r=>(T(),O("div",{key:r.id,class:"hand-pointer",style:He(r.style),onClick:a=>t.clickHand(a,t.Color.WHITE,r.type)},null,12,Zm))),128))],4),t.layout.promotion?(T(),O("div",{key:1,class:"promotion-selector",style:He(t.layout.promotion.style)},[m("div",{class:"select-button promote",onClick:e[0]||(e[0]=r=>t.clickPromote(r))},[m("img",{class:"piece-image",src:t.layout.promotion.promoteImagePath},null,8,Qm)]),m("div",{class:"select-button not-promote",onClick:e[1]||(e[1]=r=>t.clickNotPromote(r))},[m("img",{class:"piece-image",src:t.layout.promotion.notPromoteImagePath},null,8,e1)])],4)):ue("",!0),m("div",{class:"turn",style:He(t.layout.turn.style)},"",4),m("div",{style:He(t.layout.control.left.style)},[wa(t.$slots,"left-control",{},void 0,!0)],4),m("div",{style:He(t.layout.control.right.style)},[wa(t.$slots,"right-control",{},void 0,!0)],4)],4)])}const Gd=We(Hm,[["render",t1],["__scopeId","data-v-0265aa34"]]),Qt="es://human",Sl="es://usi-engine/";function xi(t){return t.startsWith(Sl)}function Vd(){const t=Date.now(),e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16);return Sl+`${t}/${e}`}const i1=Object.freeze(Object.defineProperty({__proto__:null,ES_HUMAN:Qt,ES_USI_ENGINE:Sl,isUSIEngine:xi,issueEngineURI:Vd},Symbol.toStringTag,{value:"Module"})),jd="USI_Ponder",n1="USI_MultiPV",s1="Threads",o1="NumberOfThreads",r1="MultiPV";function xn(t){if(t){if(t.value!==void 0)return t.value;if(t.default!==void 0)return t.type==="string"&&t.default==="<empty>"?"":t.default}}function a1(){return{uri:"",name:"",defaultName:"",author:"",path:"",options:{}}}function l1(t){const e=JSON.parse(JSON.stringify(t));return e.uri=Vd(),e.name+=" ",e}function c1(t,e){t.uri=e.uri,t.name=e.name,Object.keys(e.options).forEach(i=>{t.options[i]&&(t.options[i].value=e.options[i].value)})}class Vi{constructor(e){M(this,"engines",{});if(e){const i=JSON.parse(e);for(const n in i.engines)xi(n)&&(this.engines[n]={...a1(),...i.engines[n],uri:n})}}hasEngine(e){return!!this.engines[e]}addEngine(e){this.engines[e.uri]=e}updateEngine(e){return this.engines[e.uri]?(this.engines[e.uri]=e,!0):!1}removeEngine(e){return this.engines[e]?(delete this.engines[e],!0):!1}getEngine(e){return this.engines[e]}get engineList(){return Object.values(this.engines).sort((e,i)=>e.name!==i.name?e.name>i.name?1:-1:e.defaultName!==i.defaultName?e.defaultName>i.defaultName?1:-1:e.uri>i.uri?1:-1)}get json(){return JSON.stringify(this)}get jsonWithIndent(){return JSON.stringify(this,void 0,2)}getClone(){return new Vi(this.json)}}function u1(){return{enableNumber:!1,number:20}}function h1(){return{enableNumber:!1,number:100}}function d1(){return{maxSeconds:5}}var $i=(t=>(t.NONE="none",t.INSERT="insert",t.APPEND="append",t.OVERWRITE="overwrite",t))($i||{});function Ba(){return{startCriteria:u1(),endCriteria:h1(),perMoveCriteria:d1(),commentBehavior:"insert"}}function $c(){return{name:"",uri:Qt}}function Qo(){return{black:$c(),white:$c(),timeLimit:{timeSeconds:0,byoyomi:30,increment:0},enableEngineTimeout:!1,humanIsFront:!0,enableComment:!0,enableAutoSave:!0,repeat:1,swapPlayers:!1,maxMoves:1e3}}function Kd(t){if(t.timeLimit.timeSeconds===0&&t.timeLimit.byoyomi===0)return new Error("0");if(t.timeLimit.byoyomi!==0&&t.timeLimit.increment!==0)return new Error("")}function f1(t){const e=Kd(t);if(e)return e;if(t.enableAutoSave)return new Error("Web")}function Ra(){return{}}function p1(t){if(!t.usi)return new Error("");for(const e of t.secondaries||[])if(!e.usi)return new Error("")}var Mt=(t=>(t.INFO="info",t.WARN="warn",t.ERROR="error",t))(Mt||{});const g1={async getRecordPathFromProcArg(){return""},updateMenuState(){},async showOpenRecordDialog(){throw new Error("Web")},async openRecord(){throw new Error("Web")},async showSaveRecordDialog(){throw new Error("Web")},async saveRecord(){throw new Error("Web")},async showSelectFileDialog(){throw new Error("Web")},async showSelectDirectoryDialog(){throw new Error("Web")},async loadAppSetting(){const t=localStorage.getItem("appSetting");return JSON.stringify(t?{...Ta(),...JSON.parse(t)}:Ta())},async saveAppSetting(t){localStorage.setItem("appSetting",t)},async loadResearchSetting(){const t=localStorage.getItem("researchSetting");return JSON.stringify(t?{...Ra(),...JSON.parse(t)}:Ra())},async saveResearchSetting(t){localStorage.setItem("researchSetting",t)},async loadAnalysisSetting(){const t=localStorage.getItem("analysisSetting");return JSON.stringify(t?{...Ba(),...JSON.parse(t)}:Ba())},async saveAnalysisSetting(t){localStorage.setItem("analysisSetting",t)},async loadGameSetting(){const t=localStorage.getItem("gameSetting");return JSON.stringify(t?{...Qo(),...JSON.parse(t)}:Qo())},async saveGameSetting(t){localStorage.setItem("gameSetting",t)},async loadCSAGameSettingHistory(){throw new Error("Web")},async saveCSAGameSettingHistory(t){localStorage.setItem("csaGameSettingHistory",t)},async loadUSIEngineSetting(){return new Vi().json},async saveUSIEngineSetting(){},async showSelectUSIEngineDialog(){throw new Error("Web")},async getUSIEngineInfo(){throw new Error("Web")},async sendUSISetOption(){},async usiLaunch(){throw new Error("Web")},async usiGo(){},async usiGoPonder(){},async usiPonderHit(){},async usiGoInfinite(){},async usiStop(){},async usiGameover(){},async usiQuit(){},async csaLogin(){throw new Error("Web")},async csaLogout(){},async csaAgree(){},async csaMove(){},async csaResign(){},async csaWin(){},async csaStop(){},async isEncryptionAvailable(){return!1},log(t,e){switch(t){case Mt.INFO:console.log(e);break;case Mt.WARN:console.warn(e);break;case Mt.ERROR:console.error(e);break}},onSendError(){},onMenuEvent(){},onUSIBestMove(){},onUSIInfo(){},onUSIPonderInfo(){},onCSAGameSummary(){},onCSAReject(){},onCSAStart(){},onCSAMove(){},onCSAGameResult(){},onCSAClose(){}};function wl(){return window}const m1=wl().electronShogi||{},Ue=wl().electronShogiAPI||g1,pe={...Ue,async loadAppSetting(){return JSON.parse(await Ue.loadAppSetting())},saveAppSetting(t){return Ue.saveAppSetting(JSON.stringify(t))},async loadResearchSetting(){return JSON.parse(await Ue.loadResearchSetting())},saveResearchSetting(t){return Ue.saveResearchSetting(JSON.stringify(t))},async loadAnalysisSetting(){return JSON.parse(await Ue.loadAnalysisSetting())},saveAnalysisSetting(t){return Ue.saveAnalysisSetting(JSON.stringify(t))},async loadGameSetting(){return JSON.parse(await Ue.loadGameSetting())},saveGameSetting(t){return Ue.saveGameSetting(JSON.stringify(t))},async loadCSAGameSettingHistory(){return JSON.parse(await Ue.loadCSAGameSettingHistory())},saveCSAGameSettingHistory(t){return Ue.saveCSAGameSettingHistory(JSON.stringify(t))},async loadUSIEngineSetting(){return new Vi(await Ue.loadUSIEngineSetting())},saveUSIEngineSetting(t){return Ue.saveUSIEngineSetting(t.json)},async getUSIEngineInfo(t,e){return JSON.parse(await Ue.getUSIEngineInfo(t,e))},usiLaunch(t,e){return Ue.usiLaunch(JSON.stringify(t),e)},usiGo(t,e,i,n,s){return Ue.usiGo(t,e,JSON.stringify(i),n,s)},usiGoPonder(t,e,i,n,s){return Ue.usiGoPonder(t,e,JSON.stringify(i),n,s)},csaLogin(t){return Ue.csaLogin(JSON.stringify(t))}};function er(){return!!wl().electronShogiAPI}function qd(t){const e=(t==null?void 0:t.type)||"sine",i=(t==null?void 0:t.frequency)||440,n=(t==null?void 0:t.volume)||2,s=new AudioContext,o=s.createOscillator(),r=s.createGain();return o.connect(r),r.connect(s.destination),o.type=e,o.frequency.value=i,r.gain.value=n*.005,o.onended=()=>{r.disconnect(s.destination),o.disconnect(r)},o.start(s.currentTime),t!=null&&t.time&&o.stop(s.currentTime+t.time),{stop:()=>{t!=null&&t.time||o.stop()}}}function b1(t){qd({type:"sine",frequency:t.frequency,time:.1,volume:t.volume})}function _1(t){return qd({type:"sine",frequency:t.frequency,volume:t.volume})}let zr;function Hc(t){const e=Date.now();if(zr&&e<zr+200)return;const i=new Audio("sound/piece.mp3");i.volume=t*.01,i.play(),zr=e}function Yd(t){return(t||new Date).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})}function Uc(t){return(t||new Date).toLocaleTimeString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function y1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(e,s);return new o}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}var tr={},v1={get exports(){return tr},set exports(t){tr=t}},El={},Cr={};Cr.byteLength=E1;Cr.toByteArray=x1;Cr.fromByteArray=C1;var Ii=[],ri=[],S1=typeof Uint8Array<"u"?Uint8Array:Array,Wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Nn=0,w1=Wr.length;Nn<w1;++Nn)Ii[Nn]=Wr[Nn],ri[Wr.charCodeAt(Nn)]=Nn;ri["-".charCodeAt(0)]=62;ri["_".charCodeAt(0)]=63;function Xd(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");i===-1&&(i=e);var n=i===e?0:4-i%4;return[i,n]}function E1(t){var e=Xd(t),i=e[0],n=e[1];return(i+n)*3/4-n}function A1(t,e,i){return(e+i)*3/4-i}function x1(t){var e,i=Xd(t),n=i[0],s=i[1],o=new S1(A1(t,n,s)),r=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)e=ri[t.charCodeAt(l)]<<18|ri[t.charCodeAt(l+1)]<<12|ri[t.charCodeAt(l+2)]<<6|ri[t.charCodeAt(l+3)],o[r++]=e>>16&255,o[r++]=e>>8&255,o[r++]=e&255;return s===2&&(e=ri[t.charCodeAt(l)]<<2|ri[t.charCodeAt(l+1)]>>4,o[r++]=e&255),s===1&&(e=ri[t.charCodeAt(l)]<<10|ri[t.charCodeAt(l+1)]<<4|ri[t.charCodeAt(l+2)]>>2,o[r++]=e>>8&255,o[r++]=e&255),o}function I1(t){return Ii[t>>18&63]+Ii[t>>12&63]+Ii[t>>6&63]+Ii[t&63]}function k1(t,e,i){for(var n,s=[],o=e;o<i;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),s.push(I1(n));return s.join("")}function C1(t){for(var e,i=t.length,n=i%3,s=[],o=16383,r=0,a=i-n;r<a;r+=o)s.push(k1(t,r,r+o>a?a:r+o));return n===1?(e=t[i-1],s.push(Ii[e>>2]+Ii[e<<4&63]+"==")):n===2&&(e=(t[i-2]<<8)+t[i-1],s.push(Ii[e>>10]+Ii[e>>4&63]+Ii[e<<2&63]+"=")),s.join("")}var Al={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Al.read=function(t,e,i,n,s){var o,r,a=s*8-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?s-1:0,d=i?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=o*256+t[e+h],h+=d,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=n;u>0;r=r*256+t[e+h],h+=d,u-=8);if(o===0)o=1-c;else{if(o===l)return r?NaN:(p?-1:1)*(1/0);r=r+Math.pow(2,n),o=o-c}return(p?-1:1)*r*Math.pow(2,o-n)};Al.write=function(t,e,i,n,s,o){var r,a,l,c=o*8-s-1,u=(1<<c)-1,h=u>>1,d=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,_=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,r=u):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),r+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(r++,l/=2),r+h>=u?(a=0,r=u):r+h>=1?(a=(e*l-1)*Math.pow(2,s),r=r+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),r=0));s>=8;t[i+p]=a&255,p+=_,a/=256,s-=8);for(r=r<<s|a,c+=s;c>0;t[i+p]=r&255,p+=_,r/=256,c-=8);t[i+p-_]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Cr,i=Al,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const S=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(S,f),S.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function r(S){if(S>s)throw new RangeError('The value "'+S+'" is invalid for option "size"');const f=new Uint8Array(S);return Object.setPrototypeOf(f,a.prototype),f}function a(S,f,g){if(typeof S=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(S)}return l(S,f,g)}a.poolSize=8192;function l(S,f,g){if(typeof S=="string")return d(S,f);if(ArrayBuffer.isView(S))return _(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(ae(S,ArrayBuffer)||S&&ae(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ae(S,SharedArrayBuffer)||S&&ae(S.buffer,SharedArrayBuffer)))return b(S,f,g);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=S.valueOf&&S.valueOf();if(A!=null&&A!==S)return a.from(A,f,g);const C=v(S);if(C)return C;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return a.from(S[Symbol.toPrimitive]("string"),f,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}a.from=function(S,f,g){return l(S,f,g)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function u(S,f,g){return c(S),S<=0?r(S):f!==void 0?typeof g=="string"?r(S).fill(f,g):r(S).fill(f):r(S)}a.alloc=function(S,f,g){return u(S,f,g)};function h(S){return c(S),r(S<0?0:y(S)|0)}a.allocUnsafe=function(S){return h(S)},a.allocUnsafeSlow=function(S){return h(S)};function d(S,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const g=E(S,f)|0;let A=r(g);const C=A.write(S,f);return C!==g&&(A=A.slice(0,C)),A}function p(S){const f=S.length<0?0:y(S.length)|0,g=r(f);for(let A=0;A<f;A+=1)g[A]=S[A]&255;return g}function _(S){if(ae(S,Uint8Array)){const f=new Uint8Array(S);return b(f.buffer,f.byteOffset,f.byteLength)}return p(S)}function b(S,f,g){if(f<0||S.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<f+(g||0))throw new RangeError('"length" is outside of buffer bounds');let A;return f===void 0&&g===void 0?A=new Uint8Array(S):g===void 0?A=new Uint8Array(S,f):A=new Uint8Array(S,f,g),Object.setPrototypeOf(A,a.prototype),A}function v(S){if(a.isBuffer(S)){const f=y(S.length)|0,g=r(f);return g.length===0||S.copy(g,0,0,f),g}if(S.length!==void 0)return typeof S.length!="number"||ce(S.length)?r(0):p(S);if(S.type==="Buffer"&&Array.isArray(S.data))return p(S.data)}function y(S){if(S>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return S|0}function w(S){return+S!=S&&(S=0),a.alloc(+S)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,g){if(ae(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),ae(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(f)||!a.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===g)return 0;let A=f.length,C=g.length;for(let R=0,$=Math.min(A,C);R<$;++R)if(f[R]!==g[R]){A=f[R],C=g[R];break}return A<C?-1:C<A?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,g){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);let A;if(g===void 0)for(g=0,A=0;A<f.length;++A)g+=f[A].length;const C=a.allocUnsafe(g);let R=0;for(A=0;A<f.length;++A){let $=f[A];if(ae($,Uint8Array))R+$.length>C.length?(a.isBuffer($)||($=a.from($)),$.copy(C,R)):Uint8Array.prototype.set.call(C,$,R);else if(a.isBuffer($))$.copy(C,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=$.length}return C};function E(S,f){if(a.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||ae(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const g=S.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&g===0)return 0;let C=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return X(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return Z(S).length;default:if(C)return A?-1:X(S).length;f=(""+f).toLowerCase(),C=!0}}a.byteLength=E;function x(S,f,g){let A=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,f>>>=0,g<=f))return"";for(S||(S="utf8");;)switch(S){case"hex":return oe(this,f,g);case"utf8":case"utf-8":return Oe(this,f,g);case"ascii":return Q(this,f,g);case"latin1":case"binary":return ee(this,f,g);case"base64":return de(this,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,f,g);default:if(A)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),A=!0}}a.prototype._isBuffer=!0;function k(S,f,g){const A=S[f];S[f]=S[g],S[g]=A}a.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<f;g+=2)k(this,g,g+1);return this},a.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<f;g+=4)k(this,g,g+3),k(this,g+1,g+2);return this},a.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<f;g+=8)k(this,g,g+7),k(this,g+1,g+6),k(this,g+2,g+5),k(this,g+3,g+4);return this},a.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?Oe(this,0,f):x.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){let f="";const g=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(f+=" ... "),"<Buffer "+f+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(f,g,A,C,R){if(ae(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(g===void 0&&(g=0),A===void 0&&(A=f?f.length:0),C===void 0&&(C=0),R===void 0&&(R=this.length),g<0||A>f.length||C<0||R>this.length)throw new RangeError("out of range index");if(C>=R&&g>=A)return 0;if(C>=R)return-1;if(g>=A)return 1;if(g>>>=0,A>>>=0,C>>>=0,R>>>=0,this===f)return 0;let $=R-C,Ce=A-g;const Re=Math.min($,Ce),Ne=this.slice(C,R),et=f.slice(g,A);for(let Ze=0;Ze<Re;++Ze)if(Ne[Ze]!==et[Ze]){$=Ne[Ze],Ce=et[Ze];break}return $<Ce?-1:Ce<$?1:0};function B(S,f,g,A,C){if(S.length===0)return-1;if(typeof g=="string"?(A=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,ce(g)&&(g=C?0:S.length-1),g<0&&(g=S.length+g),g>=S.length){if(C)return-1;g=S.length-1}else if(g<0)if(C)g=0;else return-1;if(typeof f=="string"&&(f=a.from(f,A)),a.isBuffer(f))return f.length===0?-1:H(S,f,g,A,C);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(S,f,g):Uint8Array.prototype.lastIndexOf.call(S,f,g):H(S,[f],g,A,C);throw new TypeError("val must be string, number or Buffer")}function H(S,f,g,A,C){let R=1,$=S.length,Ce=f.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(S.length<2||f.length<2)return-1;R=2,$/=2,Ce/=2,g/=2}function Re(et,Ze){return R===1?et[Ze]:et.readUInt16BE(Ze*R)}let Ne;if(C){let et=-1;for(Ne=g;Ne<$;Ne++)if(Re(S,Ne)===Re(f,et===-1?0:Ne-et)){if(et===-1&&(et=Ne),Ne-et+1===Ce)return et*R}else et!==-1&&(Ne-=Ne-et),et=-1}else for(g+Ce>$&&(g=$-Ce),Ne=g;Ne>=0;Ne--){let et=!0;for(let Ze=0;Ze<Ce;Ze++)if(Re(S,Ne+Ze)!==Re(f,Ze)){et=!1;break}if(et)return Ne}return-1}a.prototype.includes=function(f,g,A){return this.indexOf(f,g,A)!==-1},a.prototype.indexOf=function(f,g,A){return B(this,f,g,A,!0)},a.prototype.lastIndexOf=function(f,g,A){return B(this,f,g,A,!1)};function G(S,f,g,A){g=Number(g)||0;const C=S.length-g;A?(A=Number(A),A>C&&(A=C)):A=C;const R=f.length;A>R/2&&(A=R/2);let $;for($=0;$<A;++$){const Ce=parseInt(f.substr($*2,2),16);if(ce(Ce))return $;S[g+$]=Ce}return $}function te(S,f,g,A){return j(X(f,S.length-g),S,g,A)}function Y(S,f,g,A){return j(ie(f),S,g,A)}function q(S,f,g,A){return j(Z(f),S,g,A)}function he(S,f,g,A){return j(J(f,S.length-g),S,g,A)}a.prototype.write=function(f,g,A,C){if(g===void 0)C="utf8",A=this.length,g=0;else if(A===void 0&&typeof g=="string")C=g,A=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(A)?(A=A>>>0,C===void 0&&(C="utf8")):(C=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const R=this.length-g;if((A===void 0||A>R)&&(A=R),f.length>0&&(A<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let $=!1;for(;;)switch(C){case"hex":return G(this,f,g,A);case"utf8":case"utf-8":return te(this,f,g,A);case"ascii":case"latin1":case"binary":return Y(this,f,g,A);case"base64":return q(this,f,g,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,f,g,A);default:if($)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),$=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function de(S,f,g){return f===0&&g===S.length?e.fromByteArray(S):e.fromByteArray(S.slice(f,g))}function Oe(S,f,g){g=Math.min(S.length,g);const A=[];let C=f;for(;C<g;){const R=S[C];let $=null,Ce=R>239?4:R>223?3:R>191?2:1;if(C+Ce<=g){let Re,Ne,et,Ze;switch(Ce){case 1:R<128&&($=R);break;case 2:Re=S[C+1],(Re&192)===128&&(Ze=(R&31)<<6|Re&63,Ze>127&&($=Ze));break;case 3:Re=S[C+1],Ne=S[C+2],(Re&192)===128&&(Ne&192)===128&&(Ze=(R&15)<<12|(Re&63)<<6|Ne&63,Ze>2047&&(Ze<55296||Ze>57343)&&($=Ze));break;case 4:Re=S[C+1],Ne=S[C+2],et=S[C+3],(Re&192)===128&&(Ne&192)===128&&(et&192)===128&&(Ze=(R&15)<<18|(Re&63)<<12|(Ne&63)<<6|et&63,Ze>65535&&Ze<1114112&&($=Ze))}}$===null?($=65533,Ce=1):$>65535&&($-=65536,A.push($>>>10&1023|55296),$=56320|$&1023),A.push($),C+=Ce}return Ae(A)}const xe=4096;function Ae(S){const f=S.length;if(f<=xe)return String.fromCharCode.apply(String,S);let g="",A=0;for(;A<f;)g+=String.fromCharCode.apply(String,S.slice(A,A+=xe));return g}function Q(S,f,g){let A="";g=Math.min(S.length,g);for(let C=f;C<g;++C)A+=String.fromCharCode(S[C]&127);return A}function ee(S,f,g){let A="";g=Math.min(S.length,g);for(let C=f;C<g;++C)A+=String.fromCharCode(S[C]);return A}function oe(S,f,g){const A=S.length;(!f||f<0)&&(f=0),(!g||g<0||g>A)&&(g=A);let C="";for(let R=f;R<g;++R)C+=me[S[R]];return C}function Be(S,f,g){const A=S.slice(f,g);let C="";for(let R=0;R<A.length-1;R+=2)C+=String.fromCharCode(A[R]+A[R+1]*256);return C}a.prototype.slice=function(f,g){const A=this.length;f=~~f,g=g===void 0?A:~~g,f<0?(f+=A,f<0&&(f=0)):f>A&&(f=A),g<0?(g+=A,g<0&&(g=0)):g>A&&(g=A),g<f&&(g=f);const C=this.subarray(f,g);return Object.setPrototypeOf(C,a.prototype),C};function ye(S,f,g){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+f>g)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,g,A){f=f>>>0,g=g>>>0,A||ye(f,g,this.length);let C=this[f],R=1,$=0;for(;++$<g&&(R*=256);)C+=this[f+$]*R;return C},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,g,A){f=f>>>0,g=g>>>0,A||ye(f,g,this.length);let C=this[f+--g],R=1;for(;g>0&&(R*=256);)C+=this[f+--g]*R;return C},a.prototype.readUint8=a.prototype.readUInt8=function(f,g){return f=f>>>0,g||ye(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,g){return f=f>>>0,g||ye(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,g){return f=f>>>0,g||ye(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,g){return f=f>>>0,g||ye(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,g){return f=f>>>0,g||ye(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readBigUInt64LE=_e(function(f){f=f>>>0,P(f,"offset");const g=this[f],A=this[f+7];(g===void 0||A===void 0)&&N(f,this.length-8);const C=g+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,R=this[++f]+this[++f]*2**8+this[++f]*2**16+A*2**24;return BigInt(C)+(BigInt(R)<<BigInt(32))}),a.prototype.readBigUInt64BE=_e(function(f){f=f>>>0,P(f,"offset");const g=this[f],A=this[f+7];(g===void 0||A===void 0)&&N(f,this.length-8);const C=g*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],R=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+A;return(BigInt(C)<<BigInt(32))+BigInt(R)}),a.prototype.readIntLE=function(f,g,A){f=f>>>0,g=g>>>0,A||ye(f,g,this.length);let C=this[f],R=1,$=0;for(;++$<g&&(R*=256);)C+=this[f+$]*R;return R*=128,C>=R&&(C-=Math.pow(2,8*g)),C},a.prototype.readIntBE=function(f,g,A){f=f>>>0,g=g>>>0,A||ye(f,g,this.length);let C=g,R=1,$=this[f+--C];for(;C>0&&(R*=256);)$+=this[f+--C]*R;return R*=128,$>=R&&($-=Math.pow(2,8*g)),$},a.prototype.readInt8=function(f,g){return f=f>>>0,g||ye(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,g){f=f>>>0,g||ye(f,2,this.length);const A=this[f]|this[f+1]<<8;return A&32768?A|4294901760:A},a.prototype.readInt16BE=function(f,g){f=f>>>0,g||ye(f,2,this.length);const A=this[f+1]|this[f]<<8;return A&32768?A|4294901760:A},a.prototype.readInt32LE=function(f,g){return f=f>>>0,g||ye(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,g){return f=f>>>0,g||ye(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readBigInt64LE=_e(function(f){f=f>>>0,P(f,"offset");const g=this[f],A=this[f+7];(g===void 0||A===void 0)&&N(f,this.length-8);const C=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(A<<24);return(BigInt(C)<<BigInt(32))+BigInt(g+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),a.prototype.readBigInt64BE=_e(function(f){f=f>>>0,P(f,"offset");const g=this[f],A=this[f+7];(g===void 0||A===void 0)&&N(f,this.length-8);const C=(g<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(C)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+A)}),a.prototype.readFloatLE=function(f,g){return f=f>>>0,g||ye(f,4,this.length),i.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,g){return f=f>>>0,g||ye(f,4,this.length),i.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,g){return f=f>>>0,g||ye(f,8,this.length),i.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,g){return f=f>>>0,g||ye(f,8,this.length),i.read(this,f,!1,52,8)};function be(S,f,g,A,C,R){if(!a.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>C||f<R)throw new RangeError('"value" argument is out of bounds');if(g+A>S.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,g,A,C){if(f=+f,g=g>>>0,A=A>>>0,!C){const Ce=Math.pow(2,8*A)-1;be(this,f,g,A,Ce,0)}let R=1,$=0;for(this[g]=f&255;++$<A&&(R*=256);)this[g+$]=f/R&255;return g+A},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,g,A,C){if(f=+f,g=g>>>0,A=A>>>0,!C){const Ce=Math.pow(2,8*A)-1;be(this,f,g,A,Ce,0)}let R=A-1,$=1;for(this[g+R]=f&255;--R>=0&&($*=256);)this[g+R]=f/$&255;return g+A},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,1,255,0),this[g]=f&255,g+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,2,65535,0),this[g]=f&255,this[g+1]=f>>>8,g+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,2,65535,0),this[g]=f>>>8,this[g+1]=f&255,g+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,4,4294967295,0),this[g+3]=f>>>24,this[g+2]=f>>>16,this[g+1]=f>>>8,this[g]=f&255,g+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,4,4294967295,0),this[g]=f>>>24,this[g+1]=f>>>16,this[g+2]=f>>>8,this[g+3]=f&255,g+4};function ct(S,f,g,A,C){I(f,A,C,S,g,7);let R=Number(f&BigInt(4294967295));S[g++]=R,R=R>>8,S[g++]=R,R=R>>8,S[g++]=R,R=R>>8,S[g++]=R;let $=Number(f>>BigInt(32)&BigInt(4294967295));return S[g++]=$,$=$>>8,S[g++]=$,$=$>>8,S[g++]=$,$=$>>8,S[g++]=$,g}function ut(S,f,g,A,C){I(f,A,C,S,g,7);let R=Number(f&BigInt(4294967295));S[g+7]=R,R=R>>8,S[g+6]=R,R=R>>8,S[g+5]=R,R=R>>8,S[g+4]=R;let $=Number(f>>BigInt(32)&BigInt(4294967295));return S[g+3]=$,$=$>>8,S[g+2]=$,$=$>>8,S[g+1]=$,$=$>>8,S[g]=$,g+8}a.prototype.writeBigUInt64LE=_e(function(f,g=0){return ct(this,f,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=_e(function(f,g=0){return ut(this,f,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(f,g,A,C){if(f=+f,g=g>>>0,!C){const Re=Math.pow(2,8*A-1);be(this,f,g,A,Re-1,-Re)}let R=0,$=1,Ce=0;for(this[g]=f&255;++R<A&&($*=256);)f<0&&Ce===0&&this[g+R-1]!==0&&(Ce=1),this[g+R]=(f/$>>0)-Ce&255;return g+A},a.prototype.writeIntBE=function(f,g,A,C){if(f=+f,g=g>>>0,!C){const Re=Math.pow(2,8*A-1);be(this,f,g,A,Re-1,-Re)}let R=A-1,$=1,Ce=0;for(this[g+R]=f&255;--R>=0&&($*=256);)f<0&&Ce===0&&this[g+R+1]!==0&&(Ce=1),this[g+R]=(f/$>>0)-Ce&255;return g+A},a.prototype.writeInt8=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,1,127,-128),f<0&&(f=255+f+1),this[g]=f&255,g+1},a.prototype.writeInt16LE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,2,32767,-32768),this[g]=f&255,this[g+1]=f>>>8,g+2},a.prototype.writeInt16BE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,2,32767,-32768),this[g]=f>>>8,this[g+1]=f&255,g+2},a.prototype.writeInt32LE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,4,2147483647,-2147483648),this[g]=f&255,this[g+1]=f>>>8,this[g+2]=f>>>16,this[g+3]=f>>>24,g+4},a.prototype.writeInt32BE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[g]=f>>>24,this[g+1]=f>>>16,this[g+2]=f>>>8,this[g+3]=f&255,g+4},a.prototype.writeBigInt64LE=_e(function(f,g=0){return ct(this,f,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=_e(function(f,g=0){return ut(this,f,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function vt(S,f,g,A,C,R){if(g+A>S.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Je(S,f,g,A,C){return f=+f,g=g>>>0,C||vt(S,f,g,4),i.write(S,f,g,A,23,4),g+4}a.prototype.writeFloatLE=function(f,g,A){return Je(this,f,g,!0,A)},a.prototype.writeFloatBE=function(f,g,A){return Je(this,f,g,!1,A)};function At(S,f,g,A,C){return f=+f,g=g>>>0,C||vt(S,f,g,8),i.write(S,f,g,A,52,8),g+8}a.prototype.writeDoubleLE=function(f,g,A){return At(this,f,g,!0,A)},a.prototype.writeDoubleBE=function(f,g,A){return At(this,f,g,!1,A)},a.prototype.copy=function(f,g,A,C){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(A||(A=0),!C&&C!==0&&(C=this.length),g>=f.length&&(g=f.length),g||(g=0),C>0&&C<A&&(C=A),C===A||f.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),f.length-g<C-A&&(C=f.length-g+A);const R=C-A;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,A,C):Uint8Array.prototype.set.call(f,this.subarray(A,C),g),R},a.prototype.fill=function(f,g,A,C){if(typeof f=="string"){if(typeof g=="string"?(C=g,g=0,A=this.length):typeof A=="string"&&(C=A,A=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(f.length===1){const $=f.charCodeAt(0);(C==="utf8"&&$<128||C==="latin1")&&(f=$)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(g<0||this.length<g||this.length<A)throw new RangeError("Out of range index");if(A<=g)return this;g=g>>>0,A=A===void 0?this.length:A>>>0,f||(f=0);let R;if(typeof f=="number")for(R=g;R<A;++R)this[R]=f;else{const $=a.isBuffer(f)?f:a.from(f,C),Ce=$.length;if(Ce===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(R=0;R<A-g;++R)this[R+g]=$[R%Ce]}return this};const je={};function St(S,f,g){je[S]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(C){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:C,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}St("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),St("ERR_INVALID_ARG_TYPE",function(S,f){return`The "${S}" argument must be of type number. Received type ${typeof f}`},TypeError),St("ERR_OUT_OF_RANGE",function(S,f,g){let A=`The value of "${S}" is out of range.`,C=g;return Number.isInteger(g)&&Math.abs(g)>2**32?C=si(String(g)):typeof g=="bigint"&&(C=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(C=si(C)),C+="n"),A+=` It must be ${f}. Received ${C}`,A},RangeError);function si(S){let f="",g=S.length;const A=S[0]==="-"?1:0;for(;g>=A+4;g-=3)f=`_${S.slice(g-3,g)}${f}`;return`${S.slice(0,g)}${f}`}function bi(S,f,g){P(f,"offset"),(S[f]===void 0||S[f+g]===void 0)&&N(f,S.length-(g+1))}function I(S,f,g,A,C,R){if(S>g||S<f){const $=typeof f=="bigint"?"n":"";let Ce;throw R>3?f===0||f===BigInt(0)?Ce=`>= 0${$} and < 2${$} ** ${(R+1)*8}${$}`:Ce=`>= -(2${$} ** ${(R+1)*8-1}${$}) and < 2 ** ${(R+1)*8-1}${$}`:Ce=`>= ${f}${$} and <= ${g}${$}`,new je.ERR_OUT_OF_RANGE("value",Ce,S)}bi(A,C,R)}function P(S,f){if(typeof S!="number")throw new je.ERR_INVALID_ARG_TYPE(f,"number",S)}function N(S,f,g){throw Math.floor(S)!==S?(P(S,g),new je.ERR_OUT_OF_RANGE(g||"offset","an integer",S)):f<0?new je.ERR_BUFFER_OUT_OF_BOUNDS:new je.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${f}`,S)}const U=/[^+/0-9A-Za-z-_]/g;function z(S){if(S=S.split("=")[0],S=S.trim().replace(U,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function X(S,f){f=f||1/0;let g;const A=S.length;let C=null;const R=[];for(let $=0;$<A;++$){if(g=S.charCodeAt($),g>55295&&g<57344){if(!C){if(g>56319){(f-=3)>-1&&R.push(239,191,189);continue}else if($+1===A){(f-=3)>-1&&R.push(239,191,189);continue}C=g;continue}if(g<56320){(f-=3)>-1&&R.push(239,191,189),C=g;continue}g=(C-55296<<10|g-56320)+65536}else C&&(f-=3)>-1&&R.push(239,191,189);if(C=null,g<128){if((f-=1)<0)break;R.push(g)}else if(g<2048){if((f-=2)<0)break;R.push(g>>6|192,g&63|128)}else if(g<65536){if((f-=3)<0)break;R.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((f-=4)<0)break;R.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return R}function ie(S){const f=[];for(let g=0;g<S.length;++g)f.push(S.charCodeAt(g)&255);return f}function J(S,f){let g,A,C;const R=[];for(let $=0;$<S.length&&!((f-=2)<0);++$)g=S.charCodeAt($),A=g>>8,C=g%256,R.push(C),R.push(A);return R}function Z(S){return e.toByteArray(z(S))}function j(S,f,g,A){let C;for(C=0;C<A&&!(C+g>=f.length||C>=S.length);++C)f[C+g]=S[C];return C}function ae(S,f){return S instanceof f||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===f.name}function ce(S){return S!==S}const me=function(){const S="0123456789abcdef",f=new Array(256);for(let g=0;g<16;++g){const A=g*16;for(let C=0;C<16;++C)f[A+C]=S[g]+S[C]}return f}();function _e(S){return typeof BigInt>"u"?Me:S}function Me(){throw new Error("BigInt not supported")}})(El);var Mo=El,Vn=Mo.Buffer,li={},ci;for(ci in Mo)Mo.hasOwnProperty(ci)&&(ci==="SlowBuffer"||ci==="Buffer"||(li[ci]=Mo[ci]));var jn=li.Buffer={};for(ci in Vn)Vn.hasOwnProperty(ci)&&(ci==="allocUnsafe"||ci==="allocUnsafeSlow"||(jn[ci]=Vn[ci]));li.Buffer.prototype=Vn.prototype;(!jn.from||jn.from===Uint8Array.from)&&(jn.from=function(t,e,i){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Vn(t,e,i)});jn.alloc||(jn.alloc=function(t,e,i){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=Vn(t);return!e||e.length===0?n.fill(0):typeof i=="string"?n.fill(e,i):n.fill(e),n});if(!li.kStringMaxLength)try{li.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}li.constants||(li.constants={MAX_LENGTH:li.kMaxLength},li.kStringMaxLength&&(li.constants.MAX_STRING_LENGTH=li.kStringMaxLength));var cn=li,xl={},Jd="\uFEFF";xl.PrependBOM=Il;function Il(t,e){this.encoder=t,this.addBOM=!0}Il.prototype.write=function(t){return this.addBOM&&(t=Jd+t,this.addBOM=!1),this.encoder.write(t)};Il.prototype.end=function(){return this.encoder.end()};xl.StripBOM=kl;function kl(t,e){this.decoder=t,this.pass=!1,this.options=e||{}}kl.prototype.write=function(t){var e=this.decoder.write(t);return this.pass||!e||(e[0]===Jd&&(e=e.slice(1),typeof this.options.stripBOM=="function"&&this.options.stripBOM()),this.pass=!0),e};kl.prototype.end=function(){return this.decoder.end()};var Gr={},Vr={},Is={},P1={get exports(){return Is},set exports(t){Is=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var zc;function M1(){return zc||(zc=1,function(t,e){var i=El,n=i.Buffer;function s(r,a){for(var l in r)a[l]=r[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=o);function o(r,a,l){return n(r,a,l)}o.prototype=Object.create(n.prototype),s(n,o),o.from=function(r,a,l){if(typeof r=="number")throw new TypeError("Argument must not be a number");return n(r,a,l)},o.alloc=function(r,a,l){if(typeof r!="number")throw new TypeError("Argument must be a number");var c=n(r);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},o.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return n(r)},o.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(r)}}(P1,Is)),Is}var Wc;function T1(){if(Wc)return Vr;Wc=1;var t=M1().Buffer,e=t.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(y){if(!y)return"utf8";for(var w;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(w)return;y=(""+y).toLowerCase(),w=!0}}function n(y){var w=i(y);if(typeof w!="string"&&(t.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return w||y}Vr.StringDecoder=s;function s(y){this.encoding=n(y);var w;switch(this.encoding){case"utf16le":this.text=h,this.end=d,w=4;break;case"utf8":this.fillLast=l,w=4;break;case"base64":this.text=p,this.end=_,w=3;break;default:this.write=b,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(w)}s.prototype.write=function(y){if(y.length===0)return"";var w,E;if(this.lastNeed){if(w=this.fillLast(y),w===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<y.length?w?w+this.text(y,E):this.text(y,E):w||""},s.prototype.end=u,s.prototype.text=c,s.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function r(y,w,E){var x=w.length-1;if(x<E)return 0;var k=o(w[x]);return k>=0?(k>0&&(y.lastNeed=k-1),k):--x<E||k===-2?0:(k=o(w[x]),k>=0?(k>0&&(y.lastNeed=k-2),k):--x<E||k===-2?0:(k=o(w[x]),k>=0?(k>0&&(k===2?k=0:y.lastNeed=k-3),k):0))}function a(y,w,E){if((w[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return y.lastNeed=2,""}}function l(y){var w=this.lastTotal-this.lastNeed,E=a(this,y);if(E!==void 0)return E;if(this.lastNeed<=y.length)return y.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,w,0,y.length),this.lastNeed-=y.length}function c(y,w){var E=r(this,y,w);if(!this.lastNeed)return y.toString("utf8",w);this.lastTotal=E;var x=y.length-(E-this.lastNeed);return y.copy(this.lastChar,0,x),y.toString("utf8",w,x)}function u(y){var w=y&&y.length?this.write(y):"";return this.lastNeed?w+"":w}function h(y,w){if((y.length-w)%2===0){var E=y.toString("utf16le",w);if(E){var x=E.charCodeAt(E.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",w,y.length-1)}function d(y){var w=y&&y.length?this.write(y):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,E)}return w}function p(y,w){var E=(y.length-w)%3;return E===0?y.toString("base64",w):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",w,y.length-E))}function _(y){var w=y&&y.length?this.write(y):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function b(y){return y.toString(this.encoding)}function v(y){return y&&y.length?this.write(y):""}return Vr}var jr,Gc;function B1(){if(Gc)return jr;Gc=1;var t=cn.Buffer;jr={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:e};function e(l,c){this.enc=l.encodingName,this.bomAware=l.bomAware,this.enc==="base64"?this.encoder=o:this.enc==="cesu8"&&(this.enc="utf8",this.encoder=r,t.from("eda0bdedb2a9","hex").toString()!==""&&(this.decoder=a,this.defaultCharUnicode=c.defaultCharUnicode))}e.prototype.encoder=s,e.prototype.decoder=n;var i=T1().StringDecoder;i.prototype.end||(i.prototype.end=function(){});function n(l,c){this.decoder=new i(c.enc)}n.prototype.write=function(l){return t.isBuffer(l)||(l=t.from(l)),this.decoder.write(l)},n.prototype.end=function(){return this.decoder.end()};function s(l,c){this.enc=c.enc}s.prototype.write=function(l){return t.from(l,this.enc)},s.prototype.end=function(){};function o(l,c){this.prevStr=""}o.prototype.write=function(l){l=this.prevStr+l;var c=l.length-l.length%4;return this.prevStr=l.slice(c),l=l.slice(0,c),t.from(l,"base64")},o.prototype.end=function(){return t.from(this.prevStr,"base64")};function r(l,c){}r.prototype.write=function(l){for(var c=t.alloc(l.length*3),u=0,h=0;h<l.length;h++){var d=l.charCodeAt(h);d<128?c[u++]=d:d<2048?(c[u++]=192+(d>>>6),c[u++]=128+(d&63)):(c[u++]=224+(d>>>12),c[u++]=128+(d>>>6&63),c[u++]=128+(d&63))}return c.slice(0,u)},r.prototype.end=function(){};function a(l,c){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=c.defaultCharUnicode}return a.prototype.write=function(l){for(var c=this.acc,u=this.contBytes,h=this.accBytes,d="",p=0;p<l.length;p++){var _=l[p];(_&192)!==128?(u>0&&(d+=this.defaultCharUnicode,u=0),_<128?d+=String.fromCharCode(_):_<224?(c=_&31,u=1,h=1):_<240?(c=_&15,u=2,h=1):d+=this.defaultCharUnicode):u>0?(c=c<<6|_&63,u--,h++,u===0&&(h===2&&c<128&&c>0?d+=this.defaultCharUnicode:h===3&&c<2048?d+=this.defaultCharUnicode:d+=String.fromCharCode(c))):d+=this.defaultCharUnicode}return this.acc=c,this.contBytes=u,this.accBytes=h,d},a.prototype.end=function(){var l=0;return this.contBytes>0&&(l+=this.defaultCharUnicode),l},jr}var Mi={},Vc;function R1(){if(Vc)return Mi;Vc=1;var t=cn.Buffer;Mi._utf32=e;function e(c,u){this.iconv=u,this.bomAware=!0,this.isLE=c.isLE}Mi.utf32le={type:"_utf32",isLE:!0},Mi.utf32be={type:"_utf32",isLE:!1},Mi.ucs4le="utf32le",Mi.ucs4be="utf32be",e.prototype.encoder=i,e.prototype.decoder=n;function i(c,u){this.isLE=u.isLE,this.highSurrogate=0}i.prototype.write=function(c){for(var u=t.from(c,"ucs2"),h=t.alloc(u.length*2),d=this.isLE?h.writeUInt32LE:h.writeUInt32BE,p=0,_=0;_<u.length;_+=2){var b=u.readUInt16LE(_),v=55296<=b&&b<56320,y=56320<=b&&b<57344;if(this.highSurrogate)if(v||!y)d.call(h,this.highSurrogate,p),p+=4;else{var w=(this.highSurrogate-55296<<10|b-56320)+65536;d.call(h,w,p),p+=4,this.highSurrogate=0;continue}v?this.highSurrogate=b:(d.call(h,b,p),p+=4,this.highSurrogate=0)}return p<h.length&&(h=h.slice(0,p)),h},i.prototype.end=function(){if(this.highSurrogate){var c=t.alloc(4);return this.isLE?c.writeUInt32LE(this.highSurrogate,0):c.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,c}};function n(c,u){this.isLE=u.isLE,this.badChar=u.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}n.prototype.write=function(c){if(c.length===0)return"";var u=0,h=0,d=t.alloc(c.length+4),p=0,_=this.isLE,b=this.overflow,v=this.badChar;if(b.length>0){for(;u<c.length&&b.length<4;u++)b.push(c[u]);b.length===4&&(_?h=b[u]|b[u+1]<<8|b[u+2]<<16|b[u+3]<<24:h=b[u+3]|b[u+2]<<8|b[u+1]<<16|b[u]<<24,b.length=0,p=s(d,p,h,v))}for(;u<c.length-3;u+=4)_?h=c[u]|c[u+1]<<8|c[u+2]<<16|c[u+3]<<24:h=c[u+3]|c[u+2]<<8|c[u+1]<<16|c[u]<<24,p=s(d,p,h,v);for(;u<c.length;u++)b.push(c[u]);return d.slice(0,p).toString("ucs2")};function s(c,u,h,d){if((h<0||h>1114111)&&(h=d),h>=65536){h-=65536;var p=55296|h>>10;c[u++]=p&255,c[u++]=p>>8;var h=56320|h&1023}return c[u++]=h&255,c[u++]=h>>8,u}n.prototype.end=function(){this.overflow.length=0},Mi.utf32=o,Mi.ucs4="utf32";function o(c,u){this.iconv=u}o.prototype.encoder=r,o.prototype.decoder=a;function r(c,u){c=c||{},c.addBOM===void 0&&(c.addBOM=!0),this.encoder=u.iconv.getEncoder(c.defaultEncoding||"utf-32le",c)}r.prototype.write=function(c){return this.encoder.write(c)},r.prototype.end=function(){return this.encoder.end()};function a(c,u){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=c||{},this.iconv=u.iconv}a.prototype.write=function(c){if(!this.decoder){if(this.initialBufs.push(c),this.initialBufsLen+=c.length,this.initialBufsLen<32)return"";var u=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(u,this.options);for(var h="",d=0;d<this.initialBufs.length;d++)h+=this.decoder.write(this.initialBufs[d]);return this.initialBufs.length=this.initialBufsLen=0,h}return this.decoder.write(c)},a.prototype.end=function(){if(!this.decoder){var c=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);var d=this.decoder.end();return d&&(u+=d),this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.end()};function l(c,u){var h=[],d=0,p=0,_=0,b=0,v=0;e:for(var y=0;y<c.length;y++)for(var w=c[y],E=0;E<w.length;E++)if(h.push(w[E]),h.length===4){if(d===0){if(h[0]===255&&h[1]===254&&h[2]===0&&h[3]===0)return"utf-32le";if(h[0]===0&&h[1]===0&&h[2]===254&&h[3]===255)return"utf-32be"}if((h[0]!==0||h[1]>16)&&_++,(h[3]!==0||h[2]>16)&&p++,h[0]===0&&h[1]===0&&(h[2]!==0||h[3]!==0)&&v++,(h[0]!==0||h[1]!==0)&&h[2]===0&&h[3]===0&&b++,h.length=0,d++,d>=100)break e}return v-_>b-p?"utf-32be":v-_<b-p?"utf-32le":u||"utf-32le"}return Mi}var lo={},jc;function D1(){if(jc)return lo;jc=1;var t=cn.Buffer;lo.utf16be=e;function e(){}e.prototype.encoder=i,e.prototype.decoder=n,e.prototype.bomAware=!0;function i(){}i.prototype.write=function(l){for(var c=t.from(l,"ucs2"),u=0;u<c.length;u+=2){var h=c[u];c[u]=c[u+1],c[u+1]=h}return c},i.prototype.end=function(){};function n(){this.overflowByte=-1}n.prototype.write=function(l){if(l.length==0)return"";var c=t.alloc(l.length+1),u=0,h=0;for(this.overflowByte!==-1&&(c[0]=l[0],c[1]=this.overflowByte,u=1,h=2);u<l.length-1;u+=2,h+=2)c[h]=l[u+1],c[h+1]=l[u];return this.overflowByte=u==l.length-1?l[l.length-1]:-1,c.slice(0,h).toString("ucs2")},n.prototype.end=function(){this.overflowByte=-1},lo.utf16=s;function s(l,c){this.iconv=c}s.prototype.encoder=o,s.prototype.decoder=r;function o(l,c){l=l||{},l.addBOM===void 0&&(l.addBOM=!0),this.encoder=c.iconv.getEncoder("utf-16le",l)}o.prototype.write=function(l){return this.encoder.write(l)},o.prototype.end=function(){return this.encoder.end()};function r(l,c){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=l||{},this.iconv=c.iconv}r.prototype.write=function(l){if(!this.decoder){if(this.initialBufs.push(l),this.initialBufsLen+=l.length,this.initialBufsLen<16)return"";var c=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);return this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.write(l)},r.prototype.end=function(){if(!this.decoder){var l=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(l,this.options);for(var c="",u=0;u<this.initialBufs.length;u++)c+=this.decoder.write(this.initialBufs[u]);var h=this.decoder.end();return h&&(c+=h),this.initialBufs.length=this.initialBufsLen=0,c}return this.decoder.end()};function a(l,c){var u=[],h=0,d=0,p=0;e:for(var _=0;_<l.length;_++)for(var b=l[_],v=0;v<b.length;v++)if(u.push(b[v]),u.length===2){if(h===0){if(u[0]===255&&u[1]===254)return"utf-16le";if(u[0]===254&&u[1]===255)return"utf-16be"}if(u[0]===0&&u[1]!==0&&p++,u[0]!==0&&u[1]===0&&d++,u.length=0,h++,h>=100)break e}return p>d?"utf-16be":p<d?"utf-16le":c||"utf-16le"}return lo}var as={},Kc;function N1(){if(Kc)return as;Kc=1;var t=cn.Buffer;as.utf7=e,as.unicode11utf7="utf7";function e(b,v){this.iconv=v}e.prototype.encoder=n,e.prototype.decoder=s,e.prototype.bomAware=!0;var i=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function n(b,v){this.iconv=v.iconv}n.prototype.write=function(b){return t.from(b.replace(i,function(v){return"+"+(v==="+"?"":this.iconv.encode(v,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},n.prototype.end=function(){};function s(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}for(var o=/[A-Za-z0-9\/+]/,r=[],a=0;a<256;a++)r[a]=o.test(String.fromCharCode(a));var l="+".charCodeAt(0),c="-".charCodeAt(0),u="&".charCodeAt(0);s.prototype.write=function(b){for(var v="",y=0,w=this.inBase64,E=this.base64Accum,x=0;x<b.length;x++)if(!w)b[x]==l&&(v+=this.iconv.decode(b.slice(y,x),"ascii"),y=x+1,w=!0);else if(!r[b[x]]){if(x==y&&b[x]==c)v+="+";else{var k=E+this.iconv.decode(b.slice(y,x),"ascii");v+=this.iconv.decode(t.from(k,"base64"),"utf16-be")}b[x]!=c&&x--,y=x+1,w=!1,E=""}if(!w)v+=this.iconv.decode(b.slice(y),"ascii");else{var k=E+this.iconv.decode(b.slice(y),"ascii"),B=k.length-k.length%8;E=k.slice(B),k=k.slice(0,B),v+=this.iconv.decode(t.from(k,"base64"),"utf16-be")}return this.inBase64=w,this.base64Accum=E,v},s.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(t.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},as.utf7imap=h;function h(b,v){this.iconv=v}h.prototype.encoder=d,h.prototype.decoder=p,h.prototype.bomAware=!0;function d(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=t.alloc(6),this.base64AccumIdx=0}d.prototype.write=function(b){for(var v=this.inBase64,y=this.base64Accum,w=this.base64AccumIdx,E=t.alloc(b.length*5+10),x=0,k=0;k<b.length;k++){var B=b.charCodeAt(k);32<=B&&B<=126?(v&&(w>0&&(x+=E.write(y.slice(0,w).toString("base64").replace(/\//g,",").replace(/=+$/,""),x),w=0),E[x++]=c,v=!1),v||(E[x++]=B,B===u&&(E[x++]=c))):(v||(E[x++]=u,v=!0),v&&(y[w++]=B>>8,y[w++]=B&255,w==y.length&&(x+=E.write(y.toString("base64").replace(/\//g,","),x),w=0)))}return this.inBase64=v,this.base64AccumIdx=w,E.slice(0,x)},d.prototype.end=function(){var b=t.alloc(10),v=0;return this.inBase64&&(this.base64AccumIdx>0&&(v+=b.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),v),this.base64AccumIdx=0),b[v++]=c,this.inBase64=!1),b.slice(0,v)};function p(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}var _=r.slice();return _[",".charCodeAt(0)]=!0,p.prototype.write=function(b){for(var v="",y=0,w=this.inBase64,E=this.base64Accum,x=0;x<b.length;x++)if(!w)b[x]==u&&(v+=this.iconv.decode(b.slice(y,x),"ascii"),y=x+1,w=!0);else if(!_[b[x]]){if(x==y&&b[x]==c)v+="&";else{var k=E+this.iconv.decode(b.slice(y,x),"ascii").replace(/,/g,"/");v+=this.iconv.decode(t.from(k,"base64"),"utf16-be")}b[x]!=c&&x--,y=x+1,w=!1,E=""}if(!w)v+=this.iconv.decode(b.slice(y),"ascii");else{var k=E+this.iconv.decode(b.slice(y),"ascii").replace(/,/g,"/"),B=k.length-k.length%8;E=k.slice(B),k=k.slice(0,B),v+=this.iconv.decode(t.from(k,"base64"),"utf16-be")}return this.inBase64=w,this.base64Accum=E,v},p.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(t.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},as}var Kr={},qc;function O1(){if(qc)return Kr;qc=1;var t=cn.Buffer;Kr._sbcs=e;function e(s,o){if(!s)throw new Error("SBCS codec is called without the data.");if(!s.chars||s.chars.length!==128&&s.chars.length!==256)throw new Error("Encoding '"+s.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(s.chars.length===128){for(var r="",a=0;a<128;a++)r+=String.fromCharCode(a);s.chars=r+s.chars}this.decodeBuf=t.from(s.chars,"ucs2");for(var l=t.alloc(65536,o.defaultCharSingleByte.charCodeAt(0)),a=0;a<s.chars.length;a++)l[s.chars.charCodeAt(a)]=a;this.encodeBuf=l}e.prototype.encoder=i,e.prototype.decoder=n;function i(s,o){this.encodeBuf=o.encodeBuf}i.prototype.write=function(s){for(var o=t.alloc(s.length),r=0;r<s.length;r++)o[r]=this.encodeBuf[s.charCodeAt(r)];return o},i.prototype.end=function(){};function n(s,o){this.decodeBuf=o.decodeBuf}return n.prototype.write=function(s){for(var o=this.decodeBuf,r=t.alloc(s.length*2),a=0,l=0,c=0;c<s.length;c++)a=s[c]*2,l=c*2,r[l]=o[a],r[l+1]=o[a+1];return r.toString("ucs2")},n.prototype.end=function(){},Kr}var qr,Yc;function L1(){return Yc||(Yc=1,qr={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}),qr}var Yr,Xc;function F1(){return Xc||(Xc=1,Yr={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},iso646cn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}`},iso646jp:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_\`abcdefghijklmnopqrstuvwxyz{|}`},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}),Yr}var Xr={},Jc;function $1(){if(Jc)return Xr;Jc=1;var t=cn.Buffer;Xr._dbcs=l;for(var e=-1,i=-2,n=-10,s=-1e3,o=new Array(256),r=-1,a=0;a<256;a++)o[a]=e;function l(d,p){if(this.encodingName=d.encodingName,!d)throw new Error("DBCS codec is called without the data.");if(!d.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var _=d.table();this.decodeTables=[],this.decodeTables[0]=o.slice(0),this.decodeTableSeq=[];for(var b=0;b<_.length;b++)this._addDecodeChunk(_[b]);if(typeof d.gb18030=="function"){this.gb18030=d.gb18030();var v=this.decodeTables.length;this.decodeTables.push(o.slice(0));var y=this.decodeTables.length;this.decodeTables.push(o.slice(0));for(var w=this.decodeTables[0],b=129;b<=254;b++)for(var E=this.decodeTables[s-w[b]],x=48;x<=57;x++){if(E[x]===e)E[x]=s-v;else if(E[x]>s)throw new Error("gb18030 decode tables conflict at byte 2");for(var k=this.decodeTables[s-E[x]],B=129;B<=254;B++){if(k[B]===e)k[B]=s-y;else{if(k[B]===s-y)continue;if(k[B]>s)throw new Error("gb18030 decode tables conflict at byte 3")}for(var H=this.decodeTables[s-k[B]],G=48;G<=57;G++)H[G]===e&&(H[G]=i)}}}this.defaultCharUnicode=p.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var te={};if(d.encodeSkipVals)for(var b=0;b<d.encodeSkipVals.length;b++){var Y=d.encodeSkipVals[b];if(typeof Y=="number")te[Y]=!0;else for(var x=Y.from;x<=Y.to;x++)te[x]=!0}if(this._fillEncodeTable(0,0,te),d.encodeAdd)for(var q in d.encodeAdd)Object.prototype.hasOwnProperty.call(d.encodeAdd,q)&&this._setEncodeChar(q.charCodeAt(0),d.encodeAdd[q]);this.defCharSB=this.encodeTable[0][p.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===e&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===e&&(this.defCharSB="?".charCodeAt(0))}l.prototype.encoder=c,l.prototype.decoder=u,l.prototype._getDecodeTrieNode=function(d){for(var p=[];d>0;d>>>=8)p.push(d&255);p.length==0&&p.push(0);for(var _=this.decodeTables[0],b=p.length-1;b>0;b--){var v=_[p[b]];if(v==e)_[p[b]]=s-this.decodeTables.length,this.decodeTables.push(_=o.slice(0));else if(v<=s)_=this.decodeTables[s-v];else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+d.toString(16))}return _},l.prototype._addDecodeChunk=function(d){var p=parseInt(d[0],16),_=this._getDecodeTrieNode(p);p=p&255;for(var b=1;b<d.length;b++){var v=d[b];if(typeof v=="string")for(var y=0;y<v.length;){var w=v.charCodeAt(y++);if(55296<=w&&w<56320){var E=v.charCodeAt(y++);if(56320<=E&&E<57344)_[p++]=65536+(w-55296)*1024+(E-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+d[0])}else if(4080<w&&w<=4095){for(var x=4095-w+2,k=[],B=0;B<x;B++)k.push(v.charCodeAt(y++));_[p++]=n-this.decodeTableSeq.length,this.decodeTableSeq.push(k)}else _[p++]=w}else if(typeof v=="number")for(var H=_[p-1]+1,y=0;y<v;y++)_[p++]=H++;else throw new Error("Incorrect type '"+typeof v+"' given in "+this.encodingName+" at chunk "+d[0])}if(p>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+d[0]+": too long"+p)},l.prototype._getEncodeBucket=function(d){var p=d>>8;return this.encodeTable[p]===void 0&&(this.encodeTable[p]=o.slice(0)),this.encodeTable[p]},l.prototype._setEncodeChar=function(d,p){var _=this._getEncodeBucket(d),b=d&255;_[b]<=n?this.encodeTableSeq[n-_[b]][r]=p:_[b]==e&&(_[b]=p)},l.prototype._setEncodeSequence=function(d,p){var _=d[0],b=this._getEncodeBucket(_),v=_&255,y;b[v]<=n?y=this.encodeTableSeq[n-b[v]]:(y={},b[v]!==e&&(y[r]=b[v]),b[v]=n-this.encodeTableSeq.length,this.encodeTableSeq.push(y));for(var w=1;w<d.length-1;w++){var E=y[_];typeof E=="object"?y=E:(y=y[_]={},E!==void 0&&(y[r]=E))}_=d[d.length-1],y[_]=p},l.prototype._fillEncodeTable=function(d,p,_){for(var b=this.decodeTables[d],v=!1,y={},w=0;w<256;w++){var E=b[w],x=p+w;if(!_[x])if(E>=0)this._setEncodeChar(E,x),v=!0;else if(E<=s){var k=s-E;if(!y[k]){var B=x<<8>>>0;this._fillEncodeTable(k,B,_)?v=!0:y[k]=!0}}else E<=n&&(this._setEncodeSequence(this.decodeTableSeq[n-E],x),v=!0)}return v};function c(d,p){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=p.encodeTable,this.encodeTableSeq=p.encodeTableSeq,this.defaultCharSingleByte=p.defCharSB,this.gb18030=p.gb18030}c.prototype.write=function(d){for(var p=t.alloc(d.length*(this.gb18030?4:3)),_=this.leadSurrogate,b=this.seqObj,v=-1,y=0,w=0;;){if(v===-1){if(y==d.length)break;var E=d.charCodeAt(y++)}else{var E=v;v=-1}if(55296<=E&&E<57344)if(E<56320)if(_===-1){_=E;continue}else _=E,E=e;else _!==-1?(E=65536+(_-55296)*1024+(E-56320),_=-1):E=e;else _!==-1&&(v=E,E=e,_=-1);var x=e;if(b!==void 0&&E!=e){var k=b[E];if(typeof k=="object"){b=k;continue}else typeof k=="number"?x=k:k==null&&(k=b[r],k!==void 0&&(x=k,v=E));b=void 0}else if(E>=0){var B=this.encodeTable[E>>8];if(B!==void 0&&(x=B[E&255]),x<=n){b=this.encodeTableSeq[n-x];continue}if(x==e&&this.gb18030){var H=h(this.gb18030.uChars,E);if(H!=-1){var x=this.gb18030.gbChars[H]+(E-this.gb18030.uChars[H]);p[w++]=129+Math.floor(x/12600),x=x%12600,p[w++]=48+Math.floor(x/1260),x=x%1260,p[w++]=129+Math.floor(x/10),x=x%10,p[w++]=48+x;continue}}}x===e&&(x=this.defaultCharSingleByte),x<256?p[w++]=x:x<65536?(p[w++]=x>>8,p[w++]=x&255):x<16777216?(p[w++]=x>>16,p[w++]=x>>8&255,p[w++]=x&255):(p[w++]=x>>>24,p[w++]=x>>>16&255,p[w++]=x>>>8&255,p[w++]=x&255)}return this.seqObj=b,this.leadSurrogate=_,p.slice(0,w)},c.prototype.end=function(){if(!(this.leadSurrogate===-1&&this.seqObj===void 0)){var d=t.alloc(10),p=0;if(this.seqObj){var _=this.seqObj[r];_!==void 0&&(_<256?d[p++]=_:(d[p++]=_>>8,d[p++]=_&255)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(d[p++]=this.defaultCharSingleByte,this.leadSurrogate=-1),d.slice(0,p)}},c.prototype.findIdx=h;function u(d,p){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=p.decodeTables,this.decodeTableSeq=p.decodeTableSeq,this.defaultCharUnicode=p.defaultCharUnicode,this.gb18030=p.gb18030}u.prototype.write=function(d){for(var p=t.alloc(d.length*2),_=this.nodeIdx,b=this.prevBytes,v=this.prevBytes.length,y=-this.prevBytes.length,w,E=0,x=0;E<d.length;E++){var k=E>=0?d[E]:b[E+v],w=this.decodeTables[_][k];if(!(w>=0))if(w===e)w=this.defaultCharUnicode.charCodeAt(0),E=y;else if(w===i){if(E>=3)var B=(d[E-3]-129)*12600+(d[E-2]-48)*1260+(d[E-1]-129)*10+(k-48);else var B=(b[E-3+v]-129)*12600+((E-2>=0?d[E-2]:b[E-2+v])-48)*1260+((E-1>=0?d[E-1]:b[E-1+v])-129)*10+(k-48);var H=h(this.gb18030.gbChars,B);w=this.gb18030.uChars[H]+B-this.gb18030.gbChars[H]}else if(w<=s){_=s-w;continue}else if(w<=n){for(var G=this.decodeTableSeq[n-w],te=0;te<G.length-1;te++)w=G[te],p[x++]=w&255,p[x++]=w>>8;w=G[G.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+w+" at "+_+"/"+k);if(w>=65536){w-=65536;var Y=55296|w>>10;p[x++]=Y&255,p[x++]=Y>>8,w=56320|w&1023}p[x++]=w&255,p[x++]=w>>8,_=0,y=E+1}return this.nodeIdx=_,this.prevBytes=y>=0?Array.prototype.slice.call(d,y):b.slice(y+v).concat(Array.prototype.slice.call(d)),p.slice(0,x).toString("ucs2")},u.prototype.end=function(){for(var d="";this.prevBytes.length>0;){d+=this.defaultCharUnicode;var p=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,p.length>0&&(d+=this.write(p))}return this.prevBytes=[],this.nodeIdx=0,d};function h(d,p){if(d[0]>p)return-1;for(var _=0,b=d.length;_<b-1;){var v=_+(b-_+1>>1);d[v]<=p?_=v:b=v}return _}return Xr}const H1=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]],U1=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]],Jr=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]],Zc=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]],z1=[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],W1=[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3],G1={uChars:z1,gbChars:W1},V1=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]],Qc=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]],j1=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];var Zr,eu;function K1(){return eu||(eu=1,Zr={shiftjis:{type:"_dbcs",table:function(){return H1},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return U1},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return Jr}},gbk:{type:"_dbcs",table:function(){return Jr.concat(Zc)}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return Jr.concat(Zc)},gb18030:function(){return G1},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return V1}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return Qc}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return Qc.concat(j1)},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}),Zr}var tu;function q1(){return tu||(tu=1,function(t){for(var e=[B1(),R1(),D1(),N1(),O1(),L1(),F1(),$1(),K1()],i=0;i<e.length;i++){var n=e[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}}(Gr)),Gr}var Qr,iu;function Y1(){if(iu)return Qr;iu=1;var t=cn.Buffer;return Qr=function(e){var i=e.Transform;function n(o,r){this.conv=o,r=r||{},r.decodeStrings=!1,i.call(this,r)}n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype._transform=function(o,r,a){if(typeof o!="string")return a(new Error("Iconv encoding stream needs strings as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l),a()}catch(c){a(c)}},n.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r),o()}catch(a){o(a)}},n.prototype.collect=function(o){var r=[];return this.on("error",o),this.on("data",function(a){r.push(a)}),this.on("end",function(){o(null,t.concat(r))}),this};function s(o,r){this.conv=o,r=r||{},r.encoding=this.encoding="utf8",i.call(this,r)}return s.prototype=Object.create(i.prototype,{constructor:{value:s}}),s.prototype._transform=function(o,r,a){if(!t.isBuffer(o)&&!(o instanceof Uint8Array))return a(new Error("Iconv decoding stream needs buffers as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l,this.encoding),a()}catch(c){a(c)}},s.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r,this.encoding),o()}catch(a){o(a)}},s.prototype.collect=function(o){var r="";return this.on("error",o),this.on("data",function(a){r+=a}),this.on("end",function(){o(null,r)}),this},{IconvLiteEncoderStream:n,IconvLiteDecoderStream:s}},Qr}const X1={},J1=Object.freeze(Object.defineProperty({__proto__:null,default:X1},Symbol.toStringTag,{value:"Module"})),Z1=y1(J1);(function(t){var e=cn.Buffer,i=xl,n=t.exports;n.encodings=null,n.defaultCharUnicode="",n.defaultCharSingleByte="?",n.encode=function(r,a,l){r=""+(r||"");var c=n.getEncoder(a,l),u=c.write(r),h=c.end();return h&&h.length>0?e.concat([u,h]):u},n.decode=function(r,a,l){typeof r=="string"&&(n.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),n.skipDecodeWarning=!0),r=e.from(""+(r||""),"binary"));var c=n.getDecoder(a,l),u=c.write(r),h=c.end();return h?u+h:u},n.encodingExists=function(r){try{return n.getCodec(r),!0}catch{return!1}},n.toEncoding=n.encode,n.fromEncoding=n.decode,n._codecDataCache={},n.getCodec=function(r){n.encodings||(n.encodings=q1());for(var a=n._canonicalizeEncoding(r),l={};;){var c=n._codecDataCache[a];if(c)return c;var u=n.encodings[a];switch(typeof u){case"string":a=u;break;case"object":for(var h in u)l[h]=u[h];l.encodingName||(l.encodingName=a),a=u.type;break;case"function":return l.encodingName||(l.encodingName=a),c=new u(l,n),n._codecDataCache[l.encodingName]=c,c;default:throw new Error("Encoding not recognized: '"+r+"' (searched as: '"+a+"')")}}},n._canonicalizeEncoding=function(o){return(""+o).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},n.getEncoder=function(r,a){var l=n.getCodec(r),c=new l.encoder(a,l);return l.bomAware&&a&&a.addBOM&&(c=new i.PrependBOM(c,a)),c},n.getDecoder=function(r,a){var l=n.getCodec(r),c=new l.decoder(a,l);return l.bomAware&&!(a&&a.stripBOM===!1)&&(c=new i.StripBOM(c,a)),c},n.enableStreamingAPI=function(r){if(!n.supportsStreams){var a=Y1()(r);n.IconvLiteEncoderStream=a.IconvLiteEncoderStream,n.IconvLiteDecoderStream=a.IconvLiteDecoderStream,n.encodeStream=function(c,u){return new n.IconvLiteEncoderStream(n.getEncoder(c,u),u)},n.decodeStream=function(c,u){return new n.IconvLiteDecoderStream(n.getDecoder(c,u),u)},n.supportsStreams=!0}};var s;try{s=Z1}catch{}s&&s.Transform?n.enableStreamingAPI(s):n.encodeStream=n.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}})(v1);function Q1(t){return t>=1500?"":t>=600?"":t>=400?"":t>=200?"":t>=-200?"":t>=-400?"":t>=-600?"":t>=-1500?"":""}function Da(t,e){return 100/(1+Math.exp(-t/e))}var Kt=(t=>(t[t.PLAYER=0]="PLAYER",t[t.ENEMY=1]="ENEMY",t[t.RESEARCHER=2]="RESEARCHER",t[t.RESEARCHER_2=3]="RESEARCHER_2",t[t.RESEARCHER_3=4]="RESEARCHER_3",t[t.RESEARCHER_4=5]="RESEARCHER_4",t))(Kt||{});function eb(t){const e=/^\*=([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function tb(t){const e=/^#=([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function ib(t){const e=/^\* *([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function nu(t){t.forEach(e=>{const i=e.customData||{},n=e.comment.split(`
`);for(const s of n){const o=eb(s)||ib(s);o!==void 0&&(i.playerSearchInfo={usi:t.usi,score:o});const r=tb(s);r!==void 0&&(i.researchInfo={usi:t.usi,score:r})}e.customData=i})}function nb(t){switch(t){case 0:return"*";default:return"#"}}function Cl(t,e){const i=nb(t);let n="";if(e.mate&&(n+=`${Math.abs(e.mate)}
`),e.score!==void 0&&(n+=Q1(e.score)+`
`,n+=`${i}=${e.score}
`),e.pv&&e.pv.length!==0){n+=`${i}=`;for(const s of e.pv)n+=`${s.getDisplayText({legacy:!0})}`;n+=`
`}return n}function sb(t){return Dd(t.timeSeconds)+"+"+String(t.byoyomi).padStart(2,"0")}class ob{constructor(){M(this,"_record",new xt);M(this,"_recordFilePath");M(this,"onChangeFilePath",()=>{});M(this,"onChangePosition",()=>{});this.setupRecordHandler()}get record(){return this._record}get recordFilePath(){return this._recordFilePath}updateRecordFilePath(e){this._recordFilePath=e,this.onChangeFilePath(e)}clearRecordFilePath(){this._recordFilePath=void 0,this.onChangeFilePath()}reset(e){if(e){const i=new Bt;i.reset(e),this._record.clear(i)}else this._record.clear();this.clearRecordFilePath()}resetByCurrentPosition(){this._record.clear(this._record.position),this.clearRecordFilePath()}importRecord(e,i){let n;switch(i||(i=Mm(e)),i){case Hn.SFEN:{const s=Bt.newBySFEN(e);n=s?new xt(s):new Error("");break}case Hn.USI:n=xt.newByUSI(e);break;case Hn.KIF:n=Tc(e);break;case Hn.CSA:n=Rc(e);break;default:n=new Error("");break}if(n instanceof Error)return n;this._record=n,this.setupRecordHandler(),this.clearRecordFilePath(),nu(this._record)}importRecordFromBuffer(e,i){let n;if(i.match(/\.kif$/)||i.match(/\.kifu$/)){const s=i.match(/\.kif$/)?tr.decode(e,"Shift_JIS"):new TextDecoder().decode(e);n=Tc(s)}else i.match(/\.csa$/)?n=Rc(new TextDecoder().decode(e)):n=new Error(": "+i);if(n instanceof Error)return n;this._record=n,this.setupRecordHandler(),this.updateRecordFilePath(i),nu(this._record)}exportRecordAsBuffer(e,i){let n;if(e.match(/\.kif$/)||e.match(/\.kifu$/)){const s=Hd(this.record,i);n=e.match(/\.kif$/)?tr.encode(s,"Shift_JIS"):new TextEncoder().encode(s)}else if(e.match(/\.csa$/))n=new TextEncoder().encode(Wd(this.record,i));else return new Error(": "+e);return this.updateRecordFilePath(e),n}swapNextTurn(){const e=this.record.position.clone();e.setColor(Pt(e.color)),this._record.clear(e),this.clearRecordFilePath()}changePosition(e){const i=this.record.position.clone();i.edit(e),this._record.clear(i),this.clearRecordFilePath()}changePly(e){this._record.goto(e)}changeBranch(e){return this._record.switchBranchByIndex(e)}swapWithNextBranch(){return this._record.swapWithNextBranch()}swapWithPreviousBranch(){return this._record.swapWithPreviousBranch()}removeCurrentMove(){this._record.removeCurrentMove()}removeNextMove(){this._record.removeNextMove()}updateComment(e){this._record.current.comment=e}appendComment(e,i){if(!e)return;const n=this._record.current.comment,s=this.record.current.comment?`
`:"";switch(i){case $i.NONE:break;case $i.INSERT:this._record.current.comment=e+s+n;break;case $i.APPEND:this._record.current.comment=n+s+e;break;case $i.OVERWRITE:this._record.current.comment=e;break}}setGameStartMetadata(e){e.gameTitle&&this._record.metadata.setStandardMetadata(re.TITLE,e.gameTitle),e.blackName&&this._record.metadata.setStandardMetadata(re.BLACK_NAME,e.blackName),e.whiteName&&this._record.metadata.setStandardMetadata(re.WHITE_NAME,e.whiteName),this._record.metadata.setStandardMetadata(re.DATE,Yd()),this._record.metadata.setStandardMetadata(re.START_DATETIME,Uc()),e.timeLimit&&this._record.metadata.setStandardMetadata(re.TIME_LIMIT,sb(e.timeLimit))}setGameEndMetadata(){this._record.metadata.setStandardMetadata(re.END_DATETIME,Uc())}updateSearchInfo(e,i){var s,o,r,a;const n=this.record.current.customData||{};switch(e){case 0:n.playerSearchInfo=i;break;case 1:n.enemySearchInfo=i;break;case 2:(i.depth||0)>=(((s=n.researchInfo)==null?void 0:s.depth)||0)&&(n.researchInfo=i);break;case 3:(i.depth||0)>=(((o=n.researchInfo2)==null?void 0:o.depth)||0)&&(n.researchInfo2=i);break;case 4:(i.depth||0)>=(((r=n.researchInfo3)==null?void 0:r.depth)||0)&&(n.researchInfo3=i);break;case 5:(i.depth||0)>=(((a=n.researchInfo4)==null?void 0:a.depth)||0)&&(n.researchInfo4=i);break}this._record.current.customData=n}appendMove(e){return this._record.append(e.move,e.moveOption)?(e.elapsedMs!==void 0&&this._record.current.setElapsedMs(e.elapsedMs),!0):!1}updateStandardMetadata(e){this._record.metadata.setStandardMetadata(e.key,e.value)}on(e,i){switch(e){case"changeFilePath":this.onChangeFilePath=i;break;case"changePosition":this.onChangePosition=i,this.setupRecordHandler();break}}setupRecordHandler(){this._record.on("changePosition",this.onChangePosition)}}class rb{constructor(){M(this,"searchHandler")}isEngine(){return!1}async startSearch(e,i,n,s,o){this.searchHandler=o}async startPonder(){}async stop(){}async gameover(){}async close(){this.searchHandler=void 0}doMove(e){const i=this.searchHandler;this.searchHandler=void 0,i&&i.onMove(e)}resign(){const e=this.searchHandler;this.searchHandler=void 0,e&&e.onResign()}win(){const e=this.searchHandler;this.searchHandler=void 0,e&&e.onWin()}}const Kn=new rb;function ab(t,e){const i=[],n=t.clone();for(const s of e){const o=n.createMoveByUSI(s);if(!o||!n.doMove(o))break;i.push(o)}return i}class Pl{constructor(e,i,n){M(this,"sessionID",0);M(this,"usi");M(this,"position");M(this,"searchHandler");M(this,"ponder");M(this,"inPonder",!1);M(this,"info");M(this,"usiInfoTimeout");this.setting=e,this.timeoutSeconds=i,this.onSearchInfo=n}async launch(){this.sessionID=await pe.usiLaunch(this.setting,this.timeoutSeconds),ir[this.sessionID]=this}isEngine(){return!0}async startSearch(e,i,n,s,o){this.searchHandler=o,this.usi=e.usi,this.position=e.position.clone(),this.inPonder&&this.ponder===this.usi?pe.usiPonderHit(this.sessionID):(this.info=void 0,await pe.usiGo(this.sessionID,this.usi,i,n,s)),this.inPonder=!1,this.ponder=void 0}async startPonder(e,i,n,s){const o=e.usi;if(!this.ponder||!this.ponder.startsWith(o)||xn(this.setting.options[jd])!=="true")return;this.searchHandler=void 0,this.usi=this.ponder,this.position=e.position.clone();const a=this.position.createMoveByUSI(this.ponder.slice(o.length+1));a&&(this.position.doMove(a),this.info=void 0,this.inPonder=!0,await pe.usiGoPonder(this.sessionID,this.ponder,i,n,s))}async startResearch(e){this.searchHandler=void 0,this.usi=e.usi,this.info=void 0,this.position=e.position.clone(),await pe.usiGoInfinite(this.sessionID,e.usi)}async stop(){await pe.usiStop(this.sessionID)}async gameover(e){await pe.usiGameover(this.sessionID,e)}async close(){this.searchHandler=void 0,await pe.usiQuit(this.sessionID),delete ir[this.sessionID]}onBestMove(e,i,n){const s=this.searchHandler;if(this.searchHandler=void 0,!s||!this.position||e!==this.usi)return;if(i==="resign"){s.onResign();return}if(i==="win"){s.onWin();return}const o=this.position.createMoveByUSI(i);if(!o){s.onError(":"+i),s.onResign();return}if(this.ponder=n&&`${e} ${i} ${n}`,this.flushUSIInfo(),this.info&&this.info.pv&&this.info.pv.length>=1&&this.info.pv[0].equals(o)){const r={...this.info,pv:this.info.pv.slice(1)};s.onMove(o,r)}else s.onMove(o)}onUSIInfo(e,i){if(e!==this.usi||!this.position||i.multipv&&i.multipv!==1)return;const n=this.position.color===D.BLACK?1:-1,s=i.pv&&i.pv.length>=1?i.pv:i.currmove?[i.currmove]:void 0,o={usi:e,depth:i.depth,score:i.scoreCP&&i.scoreCP*n,mate:i.scoreMate&&i.scoreMate*n,pv:s&&ab(this.position,s)};this.updateUSIInfo(o)}updateUSIInfo(e){this.info=e,!this.usiInfoTimeout&&(this.usiInfoTimeout=window.setTimeout(()=>{this.flushUSIInfo()},500))}flushUSIInfo(){this.usiInfoTimeout&&(clearTimeout(this.usiInfoTimeout),this.usiInfoTimeout=void 0),this.onSearchInfo&&this.info&&this.onSearchInfo(this.info)}}const ir={};function lb(t,e,i,n){const s=ir[t];s&&s.onBestMove(e,i,n)}function su(t,e,i){const n=ir[t];n&&n.onUSIInfo(e,i)}function nr(t){return{async build(e,i){if(e.uri===Qt)return Kn;if(xi(e.uri)&&e.usi){const n=new Pl(e.usi,t??10,i);return await n.launch(),n}throw new Error("defaultPlayerBuilder#build: URI: "+e.uri)}}}var Fi=(t=>(t.WIN="win",t.LOSE="lose",t.DRAW="draw",t))(Fi||{});function ou(t,e){return{player1:{name:t,win:0},player2:{name:e,win:0},draw:0,invalid:0,total:0}}class cb{constructor(e,i,n,s){M(this,"state");M(this,"_setting");M(this,"startPly",0);M(this,"repeat",0);M(this,"blackPlayer");M(this,"whitePlayer");M(this,"playerBuilder",nr());M(this,"gameResults",ou("",""));M(this,"lastEventID");this.recordManager=e,this.blackClock=i,this.whiteClock=n,this.handlers=s,this.state="idle",this._setting=Qo(),this.lastEventID=0}get setting(){return this._setting}async startGame(e,i){if(this.state!=="idle")throw Error("GameManager#startGame: ");this._setting=e,this.playerBuilder=i,this.repeat=0,e.startPosition||(this.startPly=this.recordManager.record.current.number),this.gameResults=ou(e.black.name,e.white.name),await this.nextGame()}async nextGame(){this.repeat++,this.setting.startPosition?this.recordManager.reset(this.setting.startPosition):this.recordManager.record.current.number!==this.startPly&&(this.recordManager.changePly(this.startPly),this.recordManager.removeNextMove()),this.recordManager.setGameStartMetadata({gameTitle:this.setting.repeat>=2?` ${this.repeat}/${this.setting.repeat}`:void 0,blackName:this.setting.black.name,whiteName:this.setting.white.name,timeLimit:this.setting.timeLimit});const e={timeMs:this.setting.timeLimit.timeSeconds*1e3,byoyomi:this.setting.timeLimit.byoyomi,increment:this.setting.timeLimit.increment,onBeepShort:()=>this.handlers.onBeepShort(),onBeepUnlimited:()=>this.handlers.onBeepUnlimited(),onStopBeep:()=>this.handlers.onStopBeep()};this.blackClock.setup({...e,onTimeout:()=>{this.timeout(D.BLACK)}}),this.whiteClock.setup({...e,onTimeout:()=>{this.timeout(D.WHITE)}});try{this.blackPlayer=await this.playerBuilder.build(this.setting.black,i=>this.recordManager.updateSearchInfo(Kt.ENEMY,i)),this.whitePlayer=await this.playerBuilder.build(this.setting.white,i=>this.recordManager.updateSearchInfo(Kt.ENEMY,i))}catch(i){try{await this.closePlayers()}catch(n){this.handlers.onError(n)}throw i}this.state="active",this.handlers.onGameNext(),setTimeout(()=>this.nextMove())}nextMove(){if(this.state!=="active"){this.handlers.onError("GameManager#nextMove: :"+this.state);return}if(this._setting.maxMoves&&this.recordManager.record.current.number>=this._setting.maxMoves){this.endGame(se.IMPASS);return}const e=this.recordManager.record.position.color;this.getActiveClock().start();const i=this.getPlayer(e),n=this.getPlayer(Pt(e));if(!i||!n){this.handlers.onError("GameManager#nextMove: ");return}const s=this.issueEventID();i.startSearch(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs,{onMove:(o,r)=>this.onMove(s,o,r),onResign:()=>this.onResign(s),onWin:()=>this.onWin(s),onError:o=>this.handlers.onError(o)}).catch(o=>{this.handlers.onError(new Error("GameManager#nextMove: : "+o))}),n.startPonder(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs).catch(o=>{this.handlers.onError(new Error("GameManager#nextMove: Ponder: "+o))})}onMove(e,i,n){if(e!==this.lastEventID){pe.log(Mt.ERROR,"GameManager#onMove: event ID already disabled");return}if(this.state!=="active"){pe.log(Mt.ERROR,"GameManager#onMove: invalid state: "+this.state);return}if(!this.recordManager.record.position.isValidMove(i)){this.handlers.onError(": "+i.getDisplayText()),this.endGame(se.FOUL_LOSE);return}if(this.getActiveClock().stop(),this.recordManager.appendMove({move:i,moveOption:{ignoreValidation:!0},elapsedMs:this.getActiveClock().elapsedMs}),n&&this.recordManager.updateSearchInfo(Kt.PLAYER,n),n&&this.setting.enableComment){const o=Cl(Kt.PLAYER,n);this.recordManager.appendComment(o,$i.APPEND)}this.handlers.onPieceBeat();const s=this.recordManager.record.perpetualCheck;if(s)if(s===this.recordManager.record.position.color){this.endGame(se.FOUL_LOSE);return}else{this.endGame(se.FOUL_WIN);return}else if(this.recordManager.record.repetition){this.endGame(se.REPETITION_DRAW);return}this.nextMove()}onResign(e){if(e!==this.lastEventID){pe.log(Mt.ERROR,"GameManager#onResign: event ID already disabled");return}if(this.state!=="active"){pe.log(Mt.ERROR,"GameManager#onResign: invalid state: "+this.state);return}this.endGame(se.RESIGN)}onWin(e){if(e!==this.lastEventID){pe.log(Mt.ERROR,"GameManager#onWin: event ID already disabled");return}if(this.state!=="active"){pe.log(Mt.ERROR,"GameManager#onWin: invalid state: "+this.state);return}this.endGame(se.ENTERING_OF_KING)}onTimeout(){if(this.state!=="active"){this.handlers.onError("GameManager#onTimeout: : "+this.state);return}this.endGame(se.TIMEOUT)}timeout(e){this.handlers.onStopBeep();const i=this.getPlayer(e);if(i&&i.isEngine()&&!this.setting.enableEngineTimeout){i.stop().catch(n=>{this.handlers.onError(new Error("GameManager#timeout: : "+n))});return}this.onTimeout()}endGame(e){if(this.state!=="active"&&this.state!=="pending")return;this.state="bussy";const i=this.recordManager.record.position.color;Promise.resolve().then(()=>this.sendGameResults(i,e)).then(()=>this.closePlayers()).then(()=>{if(this.getActiveClock().pause(),this.recordManager.appendMove({move:e,elapsedMs:this.getActiveClock().elapsedMs}),this.recordManager.setGameEndMetadata(),this.updateGameResults(i,e),this.state="idle",this._setting.enableAutoSave&&this.handlers.onSaveRecord(),e===se.INTERRUPT||this.repeat>=this.setting.repeat){this.handlers.onGameEnd(this.gameResults,e);return}this.setting.swapPlayers&&this.swapPlayers(),this.nextGame().catch(s=>{this.handlers.onError(s)})}).catch(n=>{this.handlers.onError(n),this.state="pending"})}updateGameResults(e,i){switch(ea(e,D.BLACK,i)){case Fi.WIN:this.gameResults.player1.win++;break;case Fi.LOSE:this.gameResults.player2.win++;break;case Fi.DRAW:this.gameResults.draw++;break;default:this.gameResults.invalid++;break}this.gameResults.total++}swapPlayers(){this._setting={...this.setting,black:this.setting.white,white:this.setting.black},this.gameResults={...this.gameResults,player1:this.gameResults.player2,player2:this.gameResults.player1}}async sendGameResults(e,i){if(this.blackPlayer){const n=ea(e,D.BLACK,i);n&&await this.blackPlayer.gameover(n)}if(this.whitePlayer){const n=ea(e,D.WHITE,i);n&&await this.whitePlayer.gameover(n)}}async closePlayers(){this.blackPlayer&&(await this.blackPlayer.close(),this.blackPlayer=void 0),this.whitePlayer&&(await this.whitePlayer.close(),this.whitePlayer=void 0)}getPlayer(e){switch(e){case D.BLACK:return this.blackPlayer;case D.WHITE:return this.whitePlayer}}getActiveClock(){switch(this.recordManager.record.position.color){case D.BLACK:return this.blackClock;case D.WHITE:return this.whiteClock}}issueEventID(){return this.lastEventID+=1,this.lastEventID}}function ea(t,e,i){switch(i){case se.FOUL_WIN:case se.ENTERING_OF_KING:return t==e?Fi.WIN:Fi.LOSE;case se.RESIGN:case se.MATE:case se.TIMEOUT:case se.FOUL_LOSE:return t==e?Fi.LOSE:Fi.WIN;case se.IMPASS:case se.REPETITION_DRAW:return Fi.DRAW}return null}function ru(t){let e=ub(t);const i=t.getStandardMetadata(re.TITLE)||t.getStandardMetadata(re.TOURNAMENT)||t.getStandardMetadata(re.OPUS_NAME)||t.getStandardMetadata(re.OPUS_NO)||t.getStandardMetadata(re.PLACE)||t.getStandardMetadata(re.POSTED_ON)||t.getStandardMetadata(re.AUTHOR);i&&(e+="_"+i);const n=t.getStandardMetadata(re.BLACK_NAME)||t.getStandardMetadata(re.BLACK_SHORT_NAME);n&&(e+="_"+n);const s=t.getStandardMetadata(re.WHITE_NAME)||t.getStandardMetadata(re.WHITE_SHORT_NAME);return s&&(e+="_"+s),e.trim().replaceAll("/","_").replaceAll("\\","_")+".kif"}function ub(t){const e=t.getStandardMetadata(re.START_DATETIME)||t.getStandardMetadata(re.DATE);return e?e.trim().replaceAll(" ","_").replaceAll("/","").replaceAll(":",""):Yd().replaceAll("/","")}class hb{constructor(){M(this,"count",0)}get isBussy(){return this.count!==0}retain(){this.count+=1}release(){this.count-=1}}function db(t,e){const i=t.clone();let n,s="";for(const o of e){const r=i.createMoveByUSI(o);if(!r)break;i.doMove(r,{ignoreValidation:!0}),s+=r.getDisplayText({prev:n}),n=r}return s}class Zd{constructor(e,i){M(this,"sfen","");M(this,"nodes");M(this,"nps");M(this,"iterates",[]);M(this,"hashfull");M(this,"currentMove");M(this,"currentMoveText");M(this,"ponderMove");this.sessionID=e,this.name=i}get latestIteration(){const e=[],i=new Set,n=new Set;for(const s of this.iterates){const o=s.pv?s.pv[0]:void 0;!i.has(s.multiPV)&&!n.has(o)&&(e.push(s),i.add(s.multiPV),n.add(o))}return e.sort((s,o)=>(s.multiPV||1)-(o.multiPV||1))}update(e,i,n){this.sfen!==e&&(this.sfen=e,this.nodes=void 0,this.nps=void 0,this.iterates=[],this.hashfull=void 0,this.currentMove=void 0,this.currentMoveText=void 0,this.ponderMove=void 0);const s=Bt.newBySFEN(e),o={position:e};if(i.depth!==void 0&&(o.depth=i.depth),i.seldepth!==void 0&&(o.selectiveDepth=i.seldepth),i.timeMs!==void 0&&(o.timeMs=i.timeMs),i.nodes!==void 0&&(this.nodes=i.nodes),i.pv&&(o.pv=i.pv,o.text=s?db(s,i.pv):""),i.multipv!==void 0&&(o.multiPV=i.multipv),i.scoreCP!==void 0&&(o.score=i.scoreCP),i.scoreMate!==void 0&&(o.scoreMate=i.scoreMate),i.lowerbound!==void 0&&(o.lowerBound=i.lowerbound),i.upperbound!==void 0&&(o.upperBound=i.upperbound),i.currmove!==void 0){this.currentMove=i.currmove;const r=s&&s.createMoveByUSI(i.currmove);r&&(this.currentMoveText=r.getDisplayText())}i.hashfullPerMill!==void 0&&(this.hashfull=i.hashfullPerMill/1e3),i.nps!==void 0&&(this.nps=i.nps),i.string&&(o.text=i.string),Object.keys(o).length!==0&&(i.nodes!==void 0&&(o.nodes=i.nodes),this.iterates.unshift(o)),this.ponderMove=n==null?void 0:n.getDisplayText()}}class fb{constructor(){M(this,"_sessions",[]);M(this,"updateQueue",[]);M(this,"timeoutHandle")}get sessions(){return this._sessions}clear(){this._sessions=[],this.updateQueue=[],this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}update(e,i,n,s,o){this.updateQueue.push({sessionID:e,sfen:i.sfen,name:n,info:s,ponderMove:o}),this.timeoutHandle||(this.timeoutHandle=window.setTimeout(()=>{this.dequeue()},500))}dequeue(){for(const e of this.updateQueue)this._update(e);this.updateQueue=[],this.timeoutHandle=void 0}_update(e){let i=this._sessions.find(n=>n.sessionID===e.sessionID);i||(i=this.addSession(e.sessionID,e.name)),i.update(e.sfen,e.info,e.ponderMove)}addSession(e,i){const n=new Zd(e,i);return this.sessions.push(n),this.sessions.sort((s,o)=>s.sessionID-o.sessionID),n}}var W=(t=>(t.NORMAL="normal",t.PASTE_DIALOG="pasteDialog",t.POSITION_EDITING="positionEditing",t.GAME_DIALOG="gameDialog",t.GAME="game",t.CSA_GAME_DIALOG="csaGameDialog",t.CSA_GAME="csaGame",t.RESEARCH="research",t.RESEARCH_DIALOG="researchDialog",t.ANALYSIS="analysis",t.ANALYSIS_DIALOG="analysisDialog",t.USI_ENGINE_SETTING_DIALOG="usiEngineSettingDialog",t.TEMPORARY="temporary",t))(W||{});class pb{constructor(){M(this,"_queue",[])}get message(){return this._queue[0]}get hasMessage(){return this._queue.length!==0}enqueue(e){this._queue.push(e)}dequeue(){this._queue.shift()}}class gb{constructor(){M(this,"errorCounts",{})}get errors(){return Object.entries(this.errorCounts).sort(([e],[i])=>e<i?-1:e>i?1:0).map(([e,i])=>({message:e,count:i}))}get hasError(){return!!Object.keys(this.errorCounts).length}add(e){const i=e instanceof Error?e.message:""+e,n=this.errorCounts[i]||0;this.errorCounts[i]=n+1}clear(){this.errorCounts={}}}class mb{constructor(e,i,n,s){M(this,"researcher");M(this,"number");M(this,"actualMove");M(this,"color",D.BLACK);M(this,"lastSearchInfo");M(this,"searchInfo");M(this,"timerHandle");if(this.recordManager=e,this._setting=i,this.appSetting=n,this.handler=s,!i.usi)throw new Error("")}get setting(){return this._setting}async start(){await this.setupEngine(this.setting.usi),setTimeout(()=>this.next())}close(){this.clearTimer(),this.closeEngine().catch(e=>{this.handler.onError(e)})}async setupEngine(e){await this.closeEngine();const i=new Pl(e,this.appSetting.engineTimeoutSeconds,this.updateSearchInfo.bind(this));await i.launch(),this.researcher=i}next(){if(!this.researcher){this.handler.onError(new Error("")),this.finish();return}if(this.clearTimer(),this.actualMove=void 0,this.lastSearchInfo=this.searchInfo,this.searchInfo=void 0,this.number=this.number!==void 0?this.number+1:this.setting.startCriteria.enableNumber?this.setting.startCriteria.number-1:0,this.setting.endCriteria.enableNumber&&this.number>=this.setting.endCriteria.number){this.finish();return}this.recordManager.changePly(this.number);const e=this.recordManager.record;if(e.current.number!==this.number){this.finish();return}if(!e.current.next&&!(e.current.move instanceof ot)){this.finish();return}this.actualMove=e.current.move instanceof ot?e.current.move:void 0,this.color=Pt(e.position.color),this.timerHandle=window.setTimeout(()=>{this.onResult(),this.next()},this.setting.perMoveCriteria.maxSeconds*1e3),this.researcher.startResearch(e).catch(i=>{this.handler.onError(i)})}finish(){this.handler.onFinish(),this.close()}clearTimer(){this.timerHandle&&(clearTimeout(this.timerHandle),this.timerHandle=void 0)}onResult(){if(!this.searchInfo||!this.lastSearchInfo)return;const e=this.color===D.BLACK?1:-1,i=this.searchInfo.score!==void 0?this.searchInfo.score*e:void 0,n=this.searchInfo.score!==void 0&&this.lastSearchInfo.score!==void 0?(this.searchInfo.score-this.lastSearchInfo.score)*e:void 0,s=this.actualMove&&this.lastSearchInfo.pv?this.actualMove.equals(this.lastSearchInfo.pv[0]):void 0;let o="";if(n!==void 0&&i!==void 0&&!s){const r=bb(i-n,i,this.appSetting);r&&(o+=`${r}
`)}o+=Cl(Kt.RESEARCHER,this.searchInfo),this.recordManager.appendComment(o,this.setting.commentBehavior)}async closeEngine(){this.researcher&&(this.researcher.close(),this.researcher=void 0)}updateSearchInfo(e){this.recordManager.updateSearchInfo(Kt.RESEARCHER,e),this.searchInfo=e}}function bb(t,e,i){const n=Da(t,i.coefficientInSigmoid)-Da(e,i.coefficientInSigmoid);return n>=i.badMoveLevelThreshold4?"":n>=i.badMoveLevelThreshold3?"":n>=i.badMoveLevelThreshold2?"":n>=i.badMoveLevelThreshold1?"":null}function _b(){return{id:"",myColor:D.BLACK,toMove:D.BLACK,position:"",timeUnitMs:1e3,totalTime:0,byoyomi:0,delay:0,increment:0}}var Bi=(t=>(t.UNKNOWN="unknown",t.RESIGN="resign",t.SENNICHITE="sennichite",t.OUTE_SENNICHITE="oute_sennichite",t.ILLEGAL_MOVE="illegal_move",t.ILLEGAL_ACTION="illegal_action",t.TIME_UP="time_up",t.JISHOGI="jishogi",t.MAX_MOVES="max_moves",t))(Bi||{}),To=(t=>(t.WIN="win",t.LOSE="lose",t.DRAW="draw",t.CENSORED="censored",t.CHUDAN="chudan",t))(To||{}),Hs=(t=>(t.V121="v121",t.V121_FLOODGATE="v121_floodgate",t))(Hs||{});function Qd(){return{protocolVersion:"v121",host:"localhost",port:4081,id:"",password:""}}function yb(){return{player:{name:"",uri:Qt},server:Qd(),autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function vb(t){if(t.server.protocolVersion!=="v121"&&t.server.protocolVersion!=="v121_floodgate")return new Error("");if(t.server.host==="")return new Error("");if(t.server.port<0||t.server.port>65535)return new Error("");if(t.server.id==="")return new Error("ID")}function Sb(){return{player:{name:"",uri:Qt},serverHistory:[],autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function wb(t,e){var i;return{player:t.player,server:((i=t.serverHistory)==null?void 0:i.length)>e?t.serverHistory[e]:Qd(),autoFlip:t.autoFlip,enableComment:t.enableComment,enableAutoSave:t.enableAutoSave,repeat:t.repeat,autoRelogin:t.autoRelogin}}const ef=10;function Eb(t,e){const i=[e.server];for(const n of t.serverHistory)if((n.protocolVersion!==e.server.protocolVersion||n.host!==e.server.host||n.port!==e.server.port||n.id!==e.server.id||n.password!==e.server.password)&&i.push(n),i.length===ef)break;return{player:e.player,serverHistory:i,autoFlip:e.autoFlip,enableComment:e.enableComment,enableAutoSave:e.enableAutoSave,repeat:e.repeat,autoRelogin:e.autoRelogin}}var Pr=(t=>(t[t.OFFLINE=0]="OFFLINE",t[t.WAITING_LOGIN=1]="WAITING_LOGIN",t[t.READY=2]="READY",t[t.GAME=3]="GAME",t))(Pr||{});class Ab{constructor(e,i,n,s){M(this,"_state",0);M(this,"_setting",yb());M(this,"sessionID",0);M(this,"stopRequested",!1);M(this,"repeat",0);M(this,"player");M(this,"gameSummary",_b());M(this,"searchInfo");M(this,"playerBuilder",nr());this.recordManager=e,this.blackClock=i,this.whiteClock=n,this.handlers=s}get state(){return this._state}get setting(){return this._setting}get isMyTurn(){return this.recordManager.record.position.color===this.gameSummary.myColor}login(e,i){if(this.sessionID)throw new Error("CSAGameManager#start: session already exists");return this._setting=e,this.playerBuilder=i,this.repeat=0,this.relogin()}async relogin(){this._state=1;try{this.player=await this.playerBuilder.build(this._setting.player,e=>this.recordManager.updateSearchInfo(Kt.ENEMY,e)),this.sessionID=await pe.csaLogin(this._setting.server),this._state=2,xb(this.sessionID,this),this.handlers.onGameNext()}catch(e){throw this.close(!0),e}}stop(){this.sessionID&&(this.stopRequested=!0,pe.csaStop(this.sessionID))}logout(){this.close(!0)}close(e){if(this._state!==0){if(this.stopRequested&&(e=!0),this.sessionID&&(Ib(this.sessionID),pe.csaLogout(this.sessionID).catch(i=>{this.handlers.onError(i)}),this.sessionID=0,this.stopRequested=!1),this.player&&(this.player.close().catch(i=>{this.handlers.onError(i)}),this.player=void 0),this.blackClock.stop(),this.whiteClock.stop(),this._state=0,e||this.repeat>=this.setting.repeat){this.handlers.onGameEnd();return}this.relogin().catch(i=>{this.handlers.onError(i)})}}onGameSummary(e){this.gameSummary=e,pe.csaAgree(this.sessionID,this.gameSummary.id)}onReject(){this.close()}onStart(e){this.repeat++,this.recordManager.importRecord(this.gameSummary.position,Hn.CSA),this.recordManager.setGameStartMetadata({gameTitle:this.gameSummary.id,blackName:this.gameSummary.blackPlayerName,whiteName:this.gameSummary.whitePlayerName,timeLimit:{timeSeconds:this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,increment:this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3}}),this.setting.autoFlip&&this.handlers.onFlipBoard&&this.handlers.onFlipBoard(this.gameSummary.myColor===D.WHITE),this._state=3,this.next(e)}onMove(e,i){const n=this.isMyTurn,s=Im(this.recordManager.record.position,e);if(s instanceof Error){this.handlers.onError(`CSAGameManager#onMove:  [${e}]: ${s.message}`);return}const o=/^.*,T([0-9]+)$/.exec(e),r=o?Number(parseInt(o[1]))*this.gameSummary.timeUnitMs:0;if(this.recordManager.appendMove({move:s,moveOption:{ignoreValidation:!0},elapsedMs:r}),n&&this.searchInfo&&this.recordManager.updateSearchInfo(Kt.PLAYER,this.searchInfo),n&&this.searchInfo&&this.setting.enableComment){const a=Cl(Kt.PLAYER,this.searchInfo);this.recordManager.appendComment(a,$i.APPEND)}this.handlers.onPieceBeat(),this.next(i)}onGameResult(e,i){this.recordManager.appendMove({move:this.gameResultToSpecialMove(e,i)}),this.setting.enableAutoSave&&this.handlers.onSaveRecord(),this.close()}gameResultToSpecialMove(e,i){const n=this.recordManager.record.position.color;switch(e){case Bi.RESIGN:return se.RESIGN;case Bi.SENNICHITE:return se.REPETITION_DRAW;case Bi.OUTE_SENNICHITE:case Bi.ILLEGAL_MOVE:case Bi.ILLEGAL_ACTION:switch(i){case To.WIN:return n===this.gameSummary.myColor?se.FOUL_WIN:se.FOUL_LOSE;case To.LOSE:return n===this.gameSummary.myColor?se.FOUL_LOSE:se.FOUL_WIN}break;case Bi.TIME_UP:return se.TIMEOUT;case Bi.JISHOGI:return se.ENTERING_OF_KING;case Bi.MAX_MOVES:return se.IMPASS}return i===To.DRAW?se.DRAW:se.INTERRUPT}onClose(){this.close(!this.setting.autoRelogin)}next(e){this.blackClock.stop(),this.whiteClock.stop();const i={byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,onBeepShort:()=>this.handlers.onBeepShort(),onBeepUnlimited:()=>this.handlers.onBeepUnlimited(),onStopBeep:()=>this.handlers.onStopBeep()};this.blackClock.setup({...i,timeMs:e.black.time*this.gameSummary.timeUnitMs}),this.whiteClock.setup({...i,timeMs:e.white.time*this.gameSummary.timeUnitMs});const n=this.recordManager.record.position.color;if(n===D.BLACK?this.blackClock.start():this.whiteClock.start(),!this.player){this.handlers.onError("CSA ");return}const s={timeSeconds:this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,increment:this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3};n===this.gameSummary.myColor?this.player.startSearch(this.recordManager.record,s,e.black.time*this.gameSummary.timeUnitMs,e.white.time*this.gameSummary.timeUnitMs,{onMove:this.onPlayerMove.bind(this),onResign:this.onPlayerResign.bind(this),onWin:this.onPlayerWin.bind(this),onError:this.onPlayerError.bind(this)}).catch(o=>{this.handlers.onError(new Error("CSAGameManager#next: : "+o))}):this.player.startPonder(this.recordManager.record,s,this.blackClock.timeMs,this.whiteClock.timeMs).catch(o=>{this.handlers.onError(new Error("CSAGameManager#next: Ponder: "+o))})}onPlayerMove(e,i){this.searchInfo=i;let n,s;switch(this._setting.server.protocolVersion){case Hs.V121:break;case Hs.V121_FLOODGATE:if(n=i==null?void 0:i.score,i!=null&&i.pv)for(const o of i.pv)s=s?s+" ":"",s+=Oc(o);break}pe.csaMove(this.sessionID,Oc(e),n,s)}onPlayerResign(){pe.csaResign(this.sessionID)}onPlayerWin(){pe.csaWin(this.sessionID)}onPlayerError(e){this.handlers.onError(e)}}const un={};function xb(t,e){un[t]=e}function Ib(t){delete un[t]}function kb(t,e){const i=un[t];i&&i.onGameSummary(e)}function Cb(t){const e=un[t];e&&e.onReject()}function Pb(t,e){const i=un[t];i&&i.onStart(e)}function Mb(t,e,i){const n=un[t];n&&n.onMove(e,i)}function Tb(t,e,i){const n=un[t];n&&n.onGameResult(e,i)}function Bb(t){const e=un[t];e&&e.onClose()}class au{constructor(){M(this,"setting",{timeMs:0,byoyomi:0,increment:0});M(this,"_timeMs",0);M(this,"_byoyomi",0);M(this,"_elapsedMs",0);M(this,"timerHandle",0);M(this,"timerStart",0);M(this,"lastTimeMs",0)}setup(e){this.setting=e,this._timeMs=e.timeMs||0,this._byoyomi=e.byoyomi||0,this._elapsedMs=0}get time(){return Math.ceil(this._timeMs/1e3)}get timeMs(){return this._timeMs}get byoyomi(){return this._byoyomi}get elapsedMs(){return this._elapsedMs}start(){this.clearTimer(),this.timerStart=Date.now(),this.lastTimeMs=this._timeMs,this._byoyomi=this.setting.byoyomi||0,this._elapsedMs=0,this.timerHandle=window.setInterval(()=>{const e=this.timeMs,i=this.byoyomi;this._elapsedMs=Date.now()-this.timerStart;const n=this.lastTimeMs-this._elapsedMs;if(n>=0?this._timeMs=n:(this._timeMs=0,this._byoyomi=Math.max(Math.ceil((this.setting.byoyomi||0)+n/1e3),0)),this.timeMs===0&&this.byoyomi===0){this.timeout();return}this.fireBeep(e,i)},100)}fireBeep(e,i){let n=Math.ceil(this.timeMs/1e3),s=Math.ceil(e/1e3);if(!(n!==0&&this.byoyomi!==0)){if(n===0&&s!==0){this.setting.onBeepShort&&this.setting.onBeepShort();return}this.byoyomi!==0&&(n=this.byoyomi,s=i),n!==s&&(n<=5?this.setting.onBeepUnlimited&&this.setting.onBeepUnlimited():(n<=10||n===20||n===30||n===60)&&this.setting.onBeepShort&&this.setting.onBeepShort())}}pause(){this.clearTimer()}stop(){this.clearTimer(),this.incrementTime()}timeout(){this.clearTimer(),this.setting.onTimeout&&this.setting.onTimeout()}clearTimer(){this.timerHandle&&(window.clearInterval(this.timerHandle),this.timerHandle=0),this.setting.onStopBeep&&this.setting.onStopBeep()}incrementTime(){this._timeMs+=(this.setting.increment||0)*1e3}}function Rb(t){switch(t){case 0:return Kt.RESEARCHER;case 1:return Kt.RESEARCHER_2;case 2:return Kt.RESEARCHER_3;case 3:return Kt.RESEARCHER_4;default:return}}class Db{constructor(e,i){M(this,"engines");M(this,"onUpdateSearchInfo");var s;this.appSetting=i;const n=[e.usi,...((s=e.secondaries)==null?void 0:s.map(o=>o.usi))||[]].filter(o=>!!o);this.engines=n.map((o,r)=>{const a=Rb(r);return new Pl(o,this.appSetting.engineTimeoutSeconds,l=>{this.onUpdateSearchInfo&&a!==void 0&&this.onUpdateSearchInfo(a,l)})})}on(e,i){switch(e){case"updateSearchInfo":this.onUpdateSearchInfo=i}}launch(){return Promise.all(this.engines.map(e=>e.launch()))}updatePosition(e){this.engines.forEach(i=>i.startResearch(e))}close(){return Promise.allSettled(this.engines.map(e=>e.close()))}}class Nb{constructor(){M(this,"_bussy",new hb);M(this,"_message",new pb);M(this,"_error",new gb);M(this,"recordManager",new ob);M(this,"_appSetting",Ta());M(this,"_appState",W.NORMAL);M(this,"lastAppState");M(this,"_isAppSettingDialogVisible",!1);M(this,"_confirmation");M(this,"usiMonitor",new fb);M(this,"blackClock",new au);M(this,"whiteClock",new au);M(this,"gameManager",new cb(this.recordManager,this.blackClock,this.whiteClock,this));M(this,"csaGameManager",new Ab(this.recordManager,this.blackClock,this.whiteClock,this));M(this,"researchManager");M(this,"analysisManager");M(this,"unlimitedBeepHandler");this.updateAppTitle(),this.recordManager.on("changeFilePath",e=>{this.updateAppTitle(e)}),this.recordManager.on("changePosition",()=>{this.onUpdatePosition()})}updateAppTitle(e){if(!document)return;const i="Electron",n=m1.appVersion;e?document.title=`${i} Version ${n} - ${e}`:document.title=`${i} Version ${n}`}get isBussy(){return this._bussy.isBussy}retainBussyState(){return this._bussy.retain()}releaseBussyState(){return this._bussy.release()}get message(){return this._message.message}get hasMessage(){return this._message.hasMessage}enqueueMessage(e){this._message.enqueue(e)}dequeueMessage(){this._message.dequeue()}get errors(){return this._error.errors}get hasError(){return this._error.hasError}pushError(e){pe.log(Mt.ERROR,Od(e)),this._error.add(e)}clearErrors(){this._error.clear()}get record(){return this.recordManager.record}get recordFilePath(){return this.recordManager.recordFilePath}updateStandardRecordMetadata(e){this.recordManager.updateStandardMetadata(e)}get appSetting(){return this._appSetting}async reloadAppSetting(){this._appSetting=await pe.loadAppSetting()}async updateAppSetting(e){const i=Tm(this.appSetting,e);if(i instanceof Error)throw i;await pe.saveAppSetting(i),this._appSetting=i}flipBoard(){this._appSetting.boardFlipping=!this.appSetting.boardFlipping,pe.saveAppSetting(this.appSetting)}get appState(){return this._appState}get confirmation(){var e;return(e=this._confirmation)==null?void 0:e.message}showConfirmation(e){if(this.appState==W.TEMPORARY){pe.log(Mt.ERROR,`Store#showConfirmation:  lastAppState=${this.lastAppState}`+(this._confirmation?` currentMessage=${this._confirmation.message}`:"")+` newMessage=${e.message}`),e.onCancel&&e.onCancel();return}this._confirmation=e,this.lastAppState=this.appState,this._appState=W.TEMPORARY}confirmationOk(){var i;const e=(i=this._confirmation)==null?void 0:i.onOk;this._confirmation=void 0,this.lastAppState&&(this._appState=this.lastAppState,this.lastAppState=void 0),e&&e()}confirmationCancel(){var i;const e=(i=this._confirmation)==null?void 0:i.onCancel;this._confirmation=void 0,this.lastAppState&&(this._appState=this.lastAppState,this.lastAppState=void 0),e&&e()}showPasteDialog(){this.appState===W.NORMAL&&(this._appState=W.PASTE_DIALOG)}showGameDialog(){this.appState===W.NORMAL&&(this._appState=W.GAME_DIALOG)}showCSAGameDialog(){this.appState===W.NORMAL&&(this._appState=W.CSA_GAME_DIALOG)}showResearchDialog(){this.appState===W.NORMAL&&(this._appState=W.RESEARCH_DIALOG)}showAnalysisDialog(){this.appState===W.NORMAL&&(this._appState=W.ANALYSIS_DIALOG)}showUsiEngineManagementDialog(){this.appState===W.NORMAL&&(this._appState=W.USI_ENGINE_SETTING_DIALOG)}destroyModalDialog(){(this.appState===W.PASTE_DIALOG||this.appState===W.GAME_DIALOG||this.appState===W.CSA_GAME_DIALOG||this.appState===W.RESEARCH_DIALOG||this.appState===W.ANALYSIS_DIALOG||this.appState===W.USI_ENGINE_SETTING_DIALOG)&&(this._appState=W.NORMAL)}closeModalDialog(){this.isBussy||this.destroyModalDialog()}get isAppSettingDialogVisible(){return this._isAppSettingDialogVisible}showAppSettingDialog(){this._isAppSettingDialogVisible=!0}closeAppSettingDialog(){this._isAppSettingDialogVisible=!1}get usiMonitors(){return this.usiMonitor.sessions}updateUSIInfo(e,i,n,s){this.recordManager.record.usi===i&&this.usiMonitor.update(e,this.recordManager.record.position,n,s)}updateUSIPonderInfo(e,i,n,s){const o=xt.newByUSI(i);if(o instanceof Error){pe.log(Mt.ERROR,`invalid USI: ${i} (updateUSIPonderInfo)`);return}const r=o.current.move;r instanceof ot&&this.usiMonitor.update(e,o.position,n,s,r)}get blackTime(){return this.blackClock.time}get blackByoyomi(){return this.blackClock.byoyomi}get whiteTime(){return this.whiteClock.time}get whiteByoyomi(){return this.whiteClock.byoyomi}startGame(e){this.appState!==W.GAME_DIALOG||this.isBussy||(this.retainBussyState(),pe.saveGameSetting(e).then(()=>{this.initializeDisplaySettingForGame(e);const i=nr(this.appSetting.engineTimeoutSeconds);return this.gameManager.startGame(e,i)}).then(()=>this._appState=W.GAME).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}get csaGameState(){return this.csaGameManager.state}loginCSAGame(e,i){this.appState!==W.CSA_GAME_DIALOG||this.isBussy||(this.retainBussyState(),Promise.resolve().then(async()=>{if(i.saveHistory){const n=await pe.loadCSAGameSettingHistory(),s=Eb(n,e);await pe.saveCSAGameSettingHistory(s)}}).then(()=>{const n=nr(this.appSetting.engineTimeoutSeconds);return this.csaGameManager.login(e,n)}).then(()=>this._appState=W.CSA_GAME).catch(n=>{this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()}))}logoutCSAGame(){if(this.appState===W.CSA_GAME){if(this.csaGameManager.state===Pr.GAME){this.pushError("");return}this.csaGameManager.logout(),this._appState=W.NORMAL}}initializeDisplaySettingForGame(e){if(e.humanIsFront){let i=this.appSetting.boardFlipping;e.black.uri===Qt&&e.white.uri!==Qt?i=!1:e.black.uri!==Qt&&e.white.uri===Qt&&(i=!0),i!==this.appSetting.boardFlipping&&this.flipBoard()}}stopGame(){this.appState===W.GAME?this.gameManager.endGame(se.INTERRUPT):this.appState===W.CSA_GAME&&this.showConfirmation({message:"",onOk:()=>{this.csaGameManager.stop()}})}onGameNext(){this.usiMonitor.clear()}onGameEnd(e,i){if(this.appState===W.TEMPORARY&&this._confirmation&&this.confirmationCancel(),!(this.appState!==W.GAME&&this.appState!==W.CSA_GAME)){if(e&&e.total>=2){const n=e.total-e.invalid;this.enqueueMessage({text:"",attachments:[{type:"list",items:[{text:e.player1.name,children:[`: ${e.player1.win}`,`: ${Ic(e.player1.win,n,1)}`]},{text:e.player2.name,children:[`: ${e.player2.win}`,`: ${Ic(e.player2.win,n,1)}`]},{text:`: ${e.draw}`},{text:`: ${n}`},{text:`: ${e.invalid}`}]}]})}else i&&this.enqueueMessage({text:`${Nd(i)})`});this._appState=W.NORMAL}}onFlipBoard(e){this._appSetting.boardFlipping!==e&&this.flipBoard()}onSaveRecord(){const e=ru(this.recordManager.record.metadata),i=`${this.appSetting.autoSaveDirectory}/${e}`;this.saveRecordByPath(i).catch(n=>{this.pushError(`: ${n}`)})}onPieceBeat(){Hc(this.appSetting.pieceVolume)}onBeepShort(){this.appSetting.clockSoundTarget===Ma.ONLY_USER&&!this.isMovableByUser||this.unlimitedBeepHandler||b1({frequency:this.appSetting.clockPitch,volume:this.appSetting.clockVolume})}onBeepUnlimited(){this.appSetting.clockSoundTarget===Ma.ONLY_USER&&!this.isMovableByUser||this.unlimitedBeepHandler||(this.unlimitedBeepHandler=_1({frequency:this.appSetting.clockPitch,volume:this.appSetting.clockVolume}))}onStopBeep(){this.unlimitedBeepHandler&&(this.unlimitedBeepHandler.stop(),this.unlimitedBeepHandler=void 0)}doMove(e){this.appState!==W.NORMAL&&this.appState!==W.RESEARCH||this.recordManager.appendMove({move:e})&&Hc(this.appSetting.pieceVolume)}onFinish(){this.appState===W.ANALYSIS&&(this._message.enqueue({text:""}),this._appState=W.NORMAL)}onError(e){this.pushError(e)}startResearch(e){if(!(this.appState!==W.RESEARCH_DIALOG||this.isBussy)){if(this.retainBussyState(),!e.usi){this.pushError(new Error(""));return}pe.saveResearchSetting(e).then(()=>(this.researchManager=new Db(e,this.appSetting),this.researchManager.on("updateSearchInfo",(i,n)=>this.recordManager.updateSearchInfo(i,n)),this.researchManager.launch())).then(()=>{this._appState=W.RESEARCH,this.usiMonitor.clear(),this.onUpdatePosition(),this.appSetting.tab!==$t.SEARCH&&this.appSetting.tab!==$t.PV&&this.appSetting.tab!==$t.CHART&&this.appSetting.tab!==$t.PERCENTAGE_CHART&&this.updateAppSetting({tab:$t.PV})}).catch(i=>{this.researchManager=void 0,this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()})}}stopResearch(){this.appState===W.RESEARCH&&(this.researchManager&&(this.researchManager.close(),this.researchManager=void 0),this._appState=W.NORMAL)}startAnalysis(e){this.appState!==W.ANALYSIS_DIALOG||this.isBussy||(this.retainBussyState(),pe.saveAnalysisSetting(e).then(()=>(this.analysisManager=new mb(this.recordManager,e,this.appSetting,this),this.analysisManager.start())).then(()=>{this._appState=W.ANALYSIS,this.usiMonitor.clear()}).catch(i=>{this.analysisManager=void 0,this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}stopAnalysis(){this.appState===W.ANALYSIS&&(this.analysisManager&&(this.analysisManager.close(),this.analysisManager=void 0),this._appState=W.NORMAL)}onUpdatePosition(){this.researchManager&&this.researchManager.updatePosition(this.recordManager.record)}resetRecord(){this.appState==W.NORMAL&&this.showConfirmation({message:"",onOk:()=>{this.recordManager.reset()}})}updateRecordComment(e){this.recordManager.updateComment(e)}insertSpecialMove(e){this.appState!==W.NORMAL&&this.appState!==W.RESEARCH||this.recordManager.appendMove({move:e})}startPositionEditing(){this.appState===W.NORMAL&&this.showConfirmation({message:"",onOk:()=>{this._appState=W.POSITION_EDITING,this.recordManager.resetByCurrentPosition()}})}endPositionEditing(){this.appState===W.POSITION_EDITING&&(this._appState=W.NORMAL)}initializePosition(e){this.appState==W.POSITION_EDITING&&this.showConfirmation({message:"",onOk:()=>{this.recordManager.reset(e)}})}changeTurn(){this.appState==W.POSITION_EDITING&&this.recordManager.swapNextTurn()}editPosition(e){this.appState===W.POSITION_EDITING&&this.recordManager.changePosition(e)}changePly(e){(this.appState===W.NORMAL||this.appState===W.RESEARCH)&&this.recordManager.changePly(e)}changeBranch(e){(this.appState===W.NORMAL||this.appState===W.RESEARCH)&&this.recordManager.changeBranch(e)}swapWithNextBranch(){return this.recordManager.swapWithNextBranch()}swapWithPreviousBranch(){return this.recordManager.swapWithPreviousBranch()}removeCurrentMove(){if(!(this.appState!==W.NORMAL&&this.appState!==W.RESEARCH)){if(this.recordManager.record.current.isLastMove){this.recordManager.removeCurrentMove();return}this.showConfirmation({message:`${this.recordManager.record.current.number}`,onOk:()=>{this.recordManager.removeCurrentMove()}})}}copyRecordKIF(){const e=Hd(this.recordManager.record,{returnCode:this.appSetting.returnCode});navigator.clipboard.writeText(e)}copyRecordCSA(){const e=Wd(this.recordManager.record,{returnCode:this.appSetting.returnCode});navigator.clipboard.writeText(e)}copyRecordUSIBefore(){const e=this.recordManager.record.usi;navigator.clipboard.writeText(e)}copyRecordUSIAll(){const e=this.recordManager.record.usiAll;navigator.clipboard.writeText(e)}copyBoardSFEN(){const e=this.recordManager.record.sfen;navigator.clipboard.writeText(e)}pasteRecord(e){if(this.appState!==W.NORMAL)return;const i=this.recordManager.importRecord(e);if(i){this.pushError(i);return}}openRecord(e){this.appState!==W.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>e||pe.showOpenRecordDialog()).then(i=>{if(i)return pe.openRecord(i).then(n=>{const s=this.recordManager.importRecordFromBuffer(n,i);return s&&Promise.reject(s)})}).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}saveRecord(e){this.appState!==W.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>{const i=this.recordManager.recordFilePath;if(e!=null&&e.overwrite&&i)return i;const n=ru(this.recordManager.record.metadata);return pe.showSaveRecordDialog(n)}).then(i=>{if(i)return this.saveRecordByPath(i)}).catch(i=>{this.pushError(i)}).finally(()=>{this.releaseBussyState()}))}async saveRecordByPath(e){const i=this.recordManager.exportRecordAsBuffer(e,{returnCode:this.appSetting.returnCode});if(i instanceof Error)throw i;this.retainBussyState();try{await pe.saveRecord(e,i)}catch(n){throw new Error(`: ${n}`)}finally{this.releaseBussyState()}}get isMovableByUser(){switch(this.appState){case W.NORMAL:case W.RESEARCH:return!0;case W.GAME:return(this.recordManager.record.position.color===D.BLACK?this.gameManager.setting.black.uri:this.gameManager.setting.white.uri)===Qt;case W.CSA_GAME:return this.csaGameManager.isMyTurn&&this.csaGameManager.setting.player.uri===Qt}return!1}}const Ob=Wi(new Nb);function Xe(){return Ob}var tt=(t=>(t.BUSSY="bussy",t.ERROR="error",t.INFO="info",t.GAME="game",t.INTERNET="internet",t.STOP="stop",t.RESIGN="resign",t.RESEARCH="research",t.END="end",t.QUIZ="quiz",t.EDIT="edit",t.CHECK="check",t.SWAP="swap",t.SWAP_H="swap_h",t.SETTINGS="settings",t.ENGINE_SETTINGS="engineSettings",t.FLIP="flip",t.FILE="file",t.OPEN="open",t.SAVE="save",t.SAVE_AS="saveAs",t.PASTE="paste",t.COPY="copy",t.DELETE="delete",t.COMMENT="comment",t.BRAIN="brain",t.PV="pv",t.CHART="chart",t.PERCENT="percent",t.ARROW_DROP="arrowDrop",t.ARROW_UP="arrowUp",t.FIRST="first",t.BACK="back",t.NEXT="next",t.LAST="last",t.QUESTION="question",t.ANALYSIS="analysis",t.DESCRIPTION="description",t.PLAY="play",t.CLOSE="close",t.CALL="call",t))(tt||{});const tf={bussy:"icon/hourglass_empty_white_24dp.svg",error:"icon/error_outline_white_24dp.svg",info:"icon/info_white_24dp.svg",game:"icon/sports_esports_white_24dp.svg",internet:"icon/language_FILL0_wght400_GRAD0_opsz48.svg",stop:"icon/block_white_24dp.svg",resign:"icon/flag_white_24dp.svg",research:"icon/science_white_24dp.svg",end:"icon/do_disturb_on_white_24dp.svg",quiz:"icon/quiz_FILL0_wght400_GRAD0_opsz48.svg",edit:"icon/app_registration_white_24dp.svg",check:"icon/check_circle_white_24dp.svg",swap:"icon/swap_vert_white_24dp.svg",swap_h:"icon/swap_horiz_white_24dp.svg",settings:"icon/settings_white_24dp.svg",engineSettings:"icon/settings_input_component_white_24dp.svg",flip:"icon/flip_camera_android_white_24dp.svg",file:"icon/draft_FILL0_wght400_GRAD0_opsz48.svg",open:"icon/file_open_FILL0_wght400_GRAD0_opsz48.svg",save:"icon/save_FILL0_wght400_GRAD0_opsz48.svg",saveAs:"icon/save_as_FILL0_wght400_GRAD0_opsz48.svg",paste:"icon/content_paste_white_24dp.svg",copy:"icon/content_copy_white_24dp.svg",delete:"icon/backspace_white_24dp.svg",comment:"icon/edit_note_white_24dp.svg",brain:"icon/psychology_white_24dp.svg",pv:"icon/manage_search_FILL0_wght400_GRAD0_opsz48.svg",chart:"icon/show_chart_white_24dp.svg",percent:"icon/percent_white_24dp.svg",arrowDrop:"icon/arrow_drop_down_white_24dp.svg",arrowUp:"icon/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg",first:"icon/first_page_white_24dp.svg",back:"icon/chevron_left_white_24dp.svg",next:"icon/chevron_right_white_24dp.svg",last:"icon/last_page_white_24dp.svg",question:"icon/help_white_24dp.svg",analysis:"icon/query_stats_white_24dp.svg",description:"icon/description_white_24dp.svg",play:"icon/play_arrow_FILL1_wght400_GRAD0_opsz48.svg",close:"icon/close_FILL0_wght400_GRAD0_opsz48.svg",call:"icon/record_voice_over_FILL0_wght400_GRAD0_opsz48.svg"};Object.values(tf).forEach(t=>{ps(t)});const Lb=ze({name:"ButtonIcon",props:{icon:{type:String,required:!0}},setup(t){return{source:tf[t.icon]}}}),Fb=["src"];function $b(t,e,i,n,s,o){return T(),O("img",{class:"icon",src:t.source,draggable:"false"},null,8,Fb)}const Ot=We(Lb,[["render",$b]]);function Et(t,e){t.addEventListener("cancel",i=>{i.preventDefault(),i.stopPropagation(),e&&e()}),t.addEventListener("copy",i=>{i.stopPropagation()}),t.addEventListener("paste",i=>{i.stopPropagation()}),t.showModal()}function co(t){return document.getElementById(t)}const Hb=ze({name:"GameMenu",components:{ButtonIcon:Ot},emits:["close"],setup(t,e){const i=Xe(),n=V(null),s=()=>{e.emit("close")};return st(()=>{Et(n.value,s)}),{dialog:n,Icon:tt,onClose:s,onLocalGame:()=>{i.showGameDialog(),e.emit("close")},onCSAGame:()=>{i.showCSAGameDialog(),e.emit("close")}}}}),Ub={ref:"dialog",class:"menu"},zb={class:"groups"},Wb={class:"group"},Gb=m("div",{class:"label"},"",-1),Vb={class:"group"},jb=m("div",{class:"label"},"",-1),Kb=m("div",{class:"label"},"CSA",-1);function qb(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",null,[m("dialog",Ub,[m("div",zb,[m("div",Wb,[m("button",{class:"close",onClick:e[0]||(e[0]=(...a)=>t.onClose&&t.onClose(...a))},[K(r,{class:"icon",icon:t.Icon.CLOSE},null,8,["icon"]),Gb])]),m("div",Vb,[m("button",{onClick:e[1]||(e[1]=(...a)=>t.onLocalGame&&t.onLocalGame(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),jb]),m("button",{onClick:e[2]||(e[2]=(...a)=>t.onCSAGame&&t.onCSAGame(...a))},[K(r,{class:"icon",icon:t.Icon.INTERNET},null,8,["icon"]),Kb])])])],512)])}const Yb=We(Hb,[["render",qb]]),Xb=ze({name:"FileMenu",components:{ButtonIcon:Ot},emits:["close"],setup(t,e){const i=Xe(),n=V(null),s=()=>{e.emit("close")};st(()=>{Et(n.value,s)});const o=()=>{i.resetRecord(),e.emit("close")},r=()=>{i.openRecord(),e.emit("close")},a=()=>{i.saveRecord({overwrite:!0}),e.emit("close")},l=()=>{i.saveRecord(),e.emit("close")},c=()=>{i.copyRecordKIF(),e.emit("close")},u=()=>{i.copyRecordCSA(),e.emit("close")},h=()=>{i.copyRecordUSIAll(),e.emit("close")},d=()=>{i.copyBoardSFEN(),e.emit("close")},p=()=>{i.showPasteDialog(),e.emit("close")},_=ge(()=>({newFile:i.appState===W.NORMAL,open:i.appState===W.NORMAL,save:i.appState===W.NORMAL,saveAs:i.appState===W.NORMAL,paste:i.appState===W.NORMAL}));return{dialog:n,Icon:tt,onClose:s,onNewFile:o,onOpen:r,onSave:a,onSaveAs:l,onCopyKIF:c,onCopyCSA:u,onCopyUSI:h,onCopySFEN:d,onPaste:p,states:_}}}),Jb={ref:"dialog",class:"menu"},Zb={class:"groups"},Qb={class:"group"},e_=m("div",{class:"label"},"",-1),t_={class:"group"},i_=["disabled"],n_=m("div",{class:"label"},"",-1),s_=["disabled"],o_=m("div",{class:"label"},"",-1),r_=["disabled"],a_=m("div",{class:"label"},"",-1),l_=["disabled"],c_=m("div",{class:"label"},"",-1),u_={class:"group"},h_=m("div",{class:"label"},"KIF",-1),d_=m("div",{class:"label"},"CSA",-1),f_=m("div",{class:"label"},"USI",-1),p_=m("div",{class:"label"},"SFEN",-1),g_=["disabled"],m_=m("div",{class:"label"},"",-1);function b_(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",null,[m("dialog",Jb,[m("div",Zb,[m("div",Qb,[m("button",{class:"close",onClick:e[0]||(e[0]=(...a)=>t.onClose&&t.onClose(...a))},[K(r,{class:"icon",icon:t.Icon.CLOSE},null,8,["icon"]),e_])]),m("div",t_,[m("button",{disabled:!t.states.newFile,onClick:e[1]||(e[1]=(...a)=>t.onNewFile&&t.onNewFile(...a))},[K(r,{class:"icon",icon:t.Icon.FILE},null,8,["icon"]),n_],8,i_),m("button",{disabled:!t.states.open,onClick:e[2]||(e[2]=(...a)=>t.onOpen&&t.onOpen(...a))},[K(r,{class:"icon",icon:t.Icon.OPEN},null,8,["icon"]),o_],8,s_),m("button",{disabled:!t.states.saveAs,onClick:e[3]||(e[3]=(...a)=>t.onSave&&t.onSave(...a))},[K(r,{class:"icon",icon:t.Icon.SAVE},null,8,["icon"]),a_],8,r_),m("button",{disabled:!t.states.save,onClick:e[4]||(e[4]=(...a)=>t.onSaveAs&&t.onSaveAs(...a))},[K(r,{class:"icon",icon:t.Icon.SAVE_AS},null,8,["icon"]),c_],8,l_)]),m("div",u_,[m("button",{onClick:e[5]||(e[5]=(...a)=>t.onCopyKIF&&t.onCopyKIF(...a))},[K(r,{class:"icon",icon:t.Icon.COPY},null,8,["icon"]),h_]),m("button",{onClick:e[6]||(e[6]=(...a)=>t.onCopyCSA&&t.onCopyCSA(...a))},[K(r,{class:"icon",icon:t.Icon.COPY},null,8,["icon"]),d_]),m("button",{onClick:e[7]||(e[7]=(...a)=>t.onCopyUSI&&t.onCopyUSI(...a))},[K(r,{class:"icon",icon:t.Icon.COPY},null,8,["icon"]),f_]),m("button",{onClick:e[8]||(e[8]=(...a)=>t.onCopySFEN&&t.onCopySFEN(...a))},[K(r,{class:"icon",icon:t.Icon.COPY},null,8,["icon"]),p_]),m("button",{disabled:!t.states.paste,onClick:e[9]||(e[9]=(...a)=>t.onPaste&&t.onPaste(...a))},[K(r,{class:"icon",icon:t.Icon.PASTE},null,8,["icon"]),m_],8,g_)])])],512)])}const __=We(Xb,[["render",b_]]),y_=ze({name:"InitialPositionMenu",components:{ButtonIcon:Ot},emits:["close"],setup(t,e){const i=Xe(),n=V(null),s=()=>{e.emit("close")};return st(()=>{Et(n.value,s)}),{dialog:n,Icon:tt,onClose:s,onStandard:()=>{i.initializePosition(ve.STANDARD),e.emit("close")},onHandicapLance:()=>{i.initializePosition(ve.HANDICAP_LANCE),e.emit("close")},onHandicapRightLance:()=>{i.initializePosition(ve.HANDICAP_RIGHT_LANCE),e.emit("close")},onHandicapBishop:()=>{i.initializePosition(ve.HANDICAP_BISHOP),e.emit("close")},onHandicapRook:()=>{i.initializePosition(ve.HANDICAP_ROOK),e.emit("close")},onHandicapRookLance:()=>{i.initializePosition(ve.HANDICAP_ROOK_LANCE),e.emit("close")},onHandicap2Pieces:()=>{i.initializePosition(ve.HANDICAP_2PIECES),e.emit("close")},onHandicap4Pieces:()=>{i.initializePosition(ve.HANDICAP_4PIECES),e.emit("close")},onHandicap6Pieces:()=>{i.initializePosition(ve.HANDICAP_6PIECES),e.emit("close")},onHandicap8Pieces:()=>{i.initializePosition(ve.HANDICAP_8PIECES),e.emit("close")},onTsumeShogi:()=>{i.initializePosition(ve.TSUME_SHOGI),e.emit("close")},onTsumeShogi2Kings:()=>{i.initializePosition(ve.TSUME_SHOGI_2KINGS),e.emit("close")}}}}),v_={ref:"dialog",class:"menu"},S_={class:"groups"},w_={class:"group"},E_=m("div",{class:"label"},"",-1),A_={class:"group"},x_=m("div",{class:"label"},"",-1),I_=m("div",{class:"label"},"",-1),k_=m("div",{class:"label"},"",-1),C_=m("div",{class:"label"},"",-1),P_=m("div",{class:"label"},"",-1),M_=m("div",{class:"label"},"",-1),T_=m("div",{class:"label"},"2",-1),B_=m("div",{class:"label"},"4",-1),R_=m("div",{class:"label"},"6",-1),D_=m("div",{class:"label"},"8",-1),N_=m("div",{class:"label"},"",-1),O_=m("div",{class:"label"},"",-1);function L_(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",null,[m("dialog",v_,[m("div",S_,[m("div",w_,[m("button",{class:"close",onClick:e[0]||(e[0]=(...a)=>t.onClose&&t.onClose(...a))},[K(r,{class:"icon",icon:t.Icon.CLOSE},null,8,["icon"]),E_])]),m("div",A_,[m("button",{onClick:e[1]||(e[1]=(...a)=>t.onStandard&&t.onStandard(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),x_]),m("button",{onClick:e[2]||(e[2]=(...a)=>t.onHandicapLance&&t.onHandicapLance(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),I_]),m("button",{onClick:e[3]||(e[3]=(...a)=>t.onHandicapRightLance&&t.onHandicapRightLance(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),k_]),m("button",{onClick:e[4]||(e[4]=(...a)=>t.onHandicapBishop&&t.onHandicapBishop(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),C_]),m("button",{onClick:e[5]||(e[5]=(...a)=>t.onHandicapRook&&t.onHandicapRook(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),P_]),m("button",{onClick:e[6]||(e[6]=(...a)=>t.onHandicapRookLance&&t.onHandicapRookLance(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),M_]),m("button",{onClick:e[7]||(e[7]=(...a)=>t.onHandicap2Pieces&&t.onHandicap2Pieces(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),T_]),m("button",{onClick:e[8]||(e[8]=(...a)=>t.onHandicap4Pieces&&t.onHandicap4Pieces(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),B_]),m("button",{onClick:e[9]||(e[9]=(...a)=>t.onHandicap6Pieces&&t.onHandicap6Pieces(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),R_]),m("button",{onClick:e[10]||(e[10]=(...a)=>t.onHandicap8Pieces&&t.onHandicap8Pieces(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),D_]),m("button",{onClick:e[11]||(e[11]=(...a)=>t.onTsumeShogi&&t.onTsumeShogi(...a))},[K(r,{class:"icon",icon:t.Icon.QUIZ},null,8,["icon"]),N_]),m("button",{onClick:e[12]||(e[12]=(...a)=>t.onTsumeShogi2Kings&&t.onTsumeShogi2Kings(...a))},[K(r,{class:"icon",icon:t.Icon.QUIZ},null,8,["icon"]),O_])])])],512)])}const F_=We(y_,[["render",L_]]);class Na{constructor(e){this.children=[],this.parent=e}delete(e){const i=this.children.indexOf(e);return i===-1?!1:(this.children=this.children.slice(0,i).concat(this.children.slice(i+1)),this.children.length===0&&this.parent.delete(this),!0)}add(e){return this.children.push(e),this}}class sr{constructor(e){this.parent=null,this.children={},this.parent=e||null}get(e){return this.children[e]}insert(e){let i=this;for(let n=0;n<e.length;n+=1){const s=e[n];let o=i.get(s);if(n===e.length-1)return o instanceof sr&&(i.delete(o),o=null),o||(o=new Na(i),i.children[s]=o),o;o instanceof Na&&(o=null),o||(o=new sr(i),i.children[s]=o),i=o}return i}delete(e){for(const i in this.children)if(this.children[i]===e){const s=delete this.children[i];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),s}return!1}}function Oa(t){if(!(t instanceof HTMLElement))return!1;const e=t.nodeName.toLowerCase(),i=(t.getAttribute("type")||"").toLowerCase();return e==="select"||e==="textarea"||e==="input"&&i!=="submit"&&i!=="reset"&&i!=="checkbox"&&i!=="radio"&&i!=="file"||t.isContentEditable}function $_(t,e){const i=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:e}});t.dispatchEvent(i)&&(Oa(t)?t.focus():t.click())}function H_(t){const e=[];let i=[""],n=!1;for(let s=0;s<t.length;s++){if(n&&t[s]===","){e.push(i),i=[""],n=!1;continue}if(t[s]===" "){i.push(""),n=!1;continue}else t[s]==="+"?n=!1:n=!0;i[i.length-1]+=t[s]}return e.push(i),e.map(s=>s.filter(o=>o!=="")).filter(s=>s.length>0)}function lu(t){const{ctrlKey:e,altKey:i,metaKey:n,key:s}=t,o=[],r=[e,i,n,U_(t)];for(const[a,l]of r.entries())l&&o.push(cu[a]);return cu.includes(s)||o.push(s),o.join("+")}const cu=["Control","Alt","Meta","Shift"];function U_(t){const{shiftKey:e,code:i,key:n}=t;return e&&!(i.startsWith("Key")&&n.toUpperCase()===n)}const Us=new sr,nf=new WeakMap;let La=Us,Bo=null,Fa=[];function ta(){Fa=[],Bo=null,La=Us}function sf(t){if(t.defaultPrevented||!(t.target instanceof Node))return;if(Oa(t.target)){const i=t.target;if(!i.id||!i.ownerDocument.querySelector(`[data-hotkey-scope="${i.id}"]`))return}Bo!=null&&window.clearTimeout(Bo),Bo=window.setTimeout(ta,1500);const e=La.get(lu(t));if(!e){ta();return}if(Fa.push(lu(t)),La=e,e instanceof Na){const i=t.target;let n=!1,s;const o=Oa(i);for(let r=e.children.length-1;r>=0;r-=1){s=e.children[r];const a=s.getAttribute("data-hotkey-scope");if(!o&&!a||o&&i.id===a){n=!0;break}}s&&n&&($_(s,Fa),t.preventDefault()),ta()}}function z_(t,e){Object.keys(Us.children).length===0&&document.addEventListener("keydown",sf);const n=H_(e||t.getAttribute("data-hotkey")||"").map(s=>Us.insert(s).add(t));nf.set(t,n)}function W_(t){const e=nf.get(t);if(e&&e.length)for(const i of e)i&&i.delete(t);Object.keys(Us.children).length===0&&document.removeEventListener("keydown",sf)}function or(t){for(const e of t.querySelectorAll("[data-hotkey]"))z_(e)}function rr(t){for(const e of t.querySelectorAll("[data-hotkey]"))W_(e)}const qn=[],Jt=[];function gs(t){Jt.length===0&&or(t),qn.push(t)}function ms(t){Jt.length===0&&rr(t);for(let e=0;e<qn.length;e++)if(qn[e]===t){qn.splice(e,1);break}}function ii(t){if(Jt.length===0)for(const e of qn)rr(e);else rr(Jt[Jt.length-1]);or(t),Jt.push(t)}function ni(t){for(let e=0;e<Jt.length;e++)if(Jt[e]===t){Jt.splice(e,1),e===Jt.length&&rr(t);break}if(Jt.length===0)for(const e of qn)or(e);else or(Jt[Jt.length-1])}const G_=ze({name:"BoardPane",components:{BoardView:Gd,ButtonIcon:Ot,GameMenu:Yb,FileMenu:__,InitialPositionMenu:F_},props:{maxSize:{type:kt,required:!0}},emits:["resize"],setup(t,e){const i=Xe(),n=V(),s=V(),o=V(!1),r=V(!1),a=V(!1);st(()=>{gs(n.value),gs(s.value)}),Xs(()=>{gs(n.value),gs(s.value)}),ud(()=>{ms(n.value),ms(s.value)}),zt(()=>{ms(n.value),ms(s.value)});const l=ye=>{e.emit("resize",ye)},c=ye=>{i.appState===W.GAME||i.appState===W.CSA_GAME?Kn.doMove(ye):i.doMove(ye)},u=ye=>{i.editPosition(ye)},h=()=>{o.value=!0},d=()=>{i.stopGame()},p=()=>{Kn.win()},_=()=>{Kn.resign()},b=()=>{i.showResearchDialog()},v=()=>{i.stopResearch()},y=()=>{i.showAnalysisDialog()},w=()=>{i.stopAnalysis()},E=()=>{i.startPositionEditing()},x=()=>{i.endPositionEditing()},k=()=>{a.value=!0},B=()=>{i.changeTurn()},H=()=>{i.showAppSettingDialog()},G=()=>{i.showUsiEngineManagementDialog()},te=()=>{Xe().flipBoard()},Y=()=>{r.value=!0},q=()=>{i.removeCurrentMove()},he=ge(()=>i.appState===W.POSITION_EDITING),de=ge(()=>i.isMovableByUser),Oe=ge(()=>i.appSetting),xe=ge(()=>i.record.position),Ae=ge(()=>{const ye=i.record.current.move;return ye instanceof ot?ye:void 0}),Q=ge(()=>i.record.metadata.getStandardMetadata(re.BLACK_NAME)),ee=ge(()=>i.record.metadata.getStandardMetadata(re.WHITE_NAME)),oe=ge(()=>{if(i.appState===W.GAME||i.csaGameState===Pr.GAME)return{black:{time:i.blackTime,byoyomi:i.blackByoyomi},white:{time:i.whiteTime,byoyomi:i.whiteByoyomi}}}),Be=ge(()=>({game:i.appState===W.NORMAL,stop:i.appState===W.GAME||i.appState===W.CSA_GAME,win:i.appState===W.CSA_GAME&&i.isMovableByUser,resign:(i.appState===W.GAME||i.appState===W.CSA_GAME)&&i.isMovableByUser,research:i.appState===W.NORMAL,endResearch:i.appState===W.RESEARCH,analysis:i.appState===W.NORMAL,endAnalysis:i.appState===W.ANALYSIS,startEditPosition:i.appState===W.NORMAL,endEditPosition:i.appState===W.POSITION_EDITING,initPosition:i.appState===W.POSITION_EDITING,removeCurrentMove:i.appState===W.NORMAL||i.appState===W.RESEARCH,engineSettings:i.appState===W.NORMAL}));return{rightControl:n,leftControl:s,isGameMenuVisible:o,isFileMenuVisible:r,isInitialPositionMenuVisible:a,appSetting:Oe,position:xe,lastMove:Ae,blackPlayerName:Q,whitePlayerName:ee,clock:oe,controlStates:Be,onResize:l,onMove:c,onEdit:u,onGame:h,onStop:d,onWin:p,onResign:_,onResearch:b,onEndResearch:v,onAnalysis:y,onEndAnalysis:w,onStartEditPosition:E,onEndEditPosition:x,onInitPosition:k,onChangeTurn:B,onOpenAppSettings:H,onOpenEngineSettings:G,onFlip:te,onFileAction:Y,onRemoveCurrentMove:q,allowEdit:he,allowMove:de,Icon:tt}}});const V_={ref:"rightControl",class:"control top"},j_={ref:"leftControl",class:"control bottom"},K_=["disabled"],q_=["disabled"];function Y_(t,e,i,n,s,o){var h,d,p,_;const r=we("ButtonIcon"),a=we("BoardView"),l=we("GameMenu"),c=we("FileMenu"),u=we("InitialPositionMenu");return T(),O("div",null,[K(a,{"piece-image-type":t.appSetting.pieceImage,"board-image-type":t.appSetting.boardImage,"board-label-type":t.appSetting.boardLabelType,"max-size":t.maxSize,position:t.position,"last-move":t.lastMove,flip:t.appSetting.boardFlipping,"allow-move":t.allowMove,"allow-edit":t.allowEdit,"black-player-name":t.blackPlayerName,"white-player-name":t.whitePlayerName,"black-player-time":(h=t.clock)==null?void 0:h.black.time,"black-player-byoyomi":(d=t.clock)==null?void 0:d.black.byoyomi,"white-player-time":(p=t.clock)==null?void 0:p.white.time,"white-player-byoyomi":(_=t.clock)==null?void 0:_.white.byoyomi,onResize:t.onResize,onMove:t.onMove,onEdit:t.onEdit},{"right-control":wi(()=>[m("div",V_,[t.controlStates.game?(T(),O("button",{key:0,class:"control-item",onClick:e[0]||(e[0]=(...b)=>t.onGame&&t.onGame(...b))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.stop?(T(),O("button",{key:1,class:"control-item",onClick:e[1]||(e[1]=(...b)=>t.onStop&&t.onStop(...b))},[K(r,{class:"icon",icon:t.Icon.STOP,"data-hotkey":"Escape"},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.win?(T(),O("button",{key:2,class:"control-item",onClick:e[2]||(e[2]=(...b)=>t.onWin&&t.onWin(...b))},[K(r,{class:"icon",icon:t.Icon.CALL},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.resign?(T(),O("button",{key:3,class:"control-item",onClick:e[3]||(e[3]=(...b)=>t.onResign&&t.onResign(...b))},[K(r,{class:"icon",icon:t.Icon.RESIGN},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.research?(T(),O("button",{key:4,class:"control-item",onClick:e[4]||(e[4]=(...b)=>t.onResearch&&t.onResearch(...b))},[K(r,{class:"icon",icon:t.Icon.RESEARCH,"data-hotkey":"Control+r"},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.endResearch?(T(),O("button",{key:5,class:"control-item","data-hotkey":"Escape",onClick:e[5]||(e[5]=(...b)=>t.onEndResearch&&t.onEndResearch(...b))},[K(r,{class:"icon",icon:t.Icon.END},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.analysis?(T(),O("button",{key:6,class:"control-item",onClick:e[6]||(e[6]=(...b)=>t.onAnalysis&&t.onAnalysis(...b))},[K(r,{class:"icon",icon:t.Icon.ANALYSIS,"data-hotkey":"Control+a"},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.endAnalysis?(T(),O("button",{key:7,class:"control-item","data-hotkey":"Escape",onClick:e[7]||(e[7]=(...b)=>t.onEndAnalysis&&t.onEndAnalysis(...b))},[K(r,{class:"icon",icon:t.Icon.STOP},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.startEditPosition?(T(),O("button",{key:8,class:"control-item",onClick:e[8]||(e[8]=(...b)=>t.onStartEditPosition&&t.onStartEditPosition(...b))},[K(r,{class:"icon",icon:t.Icon.EDIT},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.endEditPosition?(T(),O("button",{key:9,class:"control-item",onClick:e[9]||(e[9]=(...b)=>t.onEndEditPosition&&t.onEndEditPosition(...b))},[K(r,{class:"icon",icon:t.Icon.CHECK},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.initPosition?(T(),O("button",{key:10,class:"control-item",onClick:e[10]||(e[10]=(...b)=>t.onChangeTurn&&t.onChangeTurn(...b))},[K(r,{class:"icon",icon:t.Icon.SWAP},null,8,["icon"]),qe("  ")])):ue("",!0),t.controlStates.initPosition?(T(),O("button",{key:11,class:"control-item",onClick:e[11]||(e[11]=(...b)=>t.onInitPosition&&t.onInitPosition(...b))},"  ")):ue("",!0)],512)]),"left-control":wi(()=>[m("div",j_,[m("button",{class:"control-item",onClick:e[12]||(e[12]=(...b)=>t.onOpenAppSettings&&t.onOpenAppSettings(...b))},[K(r,{class:"icon",icon:t.Icon.SETTINGS,"data-hotkey":"Control+,"},null,8,["icon"]),qe("  ")]),m("button",{class:"control-item",disabled:!t.controlStates.engineSettings,onClick:e[13]||(e[13]=(...b)=>t.onOpenEngineSettings&&t.onOpenEngineSettings(...b))},[K(r,{class:"icon",icon:t.Icon.ENGINE_SETTINGS,"data-hotkey":"Control+."},null,8,["icon"]),qe("  ")],8,K_),m("button",{class:"control-item",onClick:e[14]||(e[14]=(...b)=>t.onFlip&&t.onFlip(...b))},[K(r,{class:"icon",icon:t.Icon.FLIP,"data-hotkey":"Control+t"},null,8,["icon"]),qe("  ")]),m("button",{class:"control-item",onClick:e[15]||(e[15]=(...b)=>t.onFileAction&&t.onFileAction(...b))},[K(r,{class:"icon",icon:t.Icon.FILE},null,8,["icon"]),qe("  ")]),m("button",{class:"control-item",disabled:!t.controlStates.removeCurrentMove,onClick:e[16]||(e[16]=(...b)=>t.onRemoveCurrentMove&&t.onRemoveCurrentMove(...b))},[K(r,{class:"icon",icon:t.Icon.DELETE,"data-hotkey":"Control+d"},null,8,["icon"]),qe("  ")],8,q_)],512)]),_:1},8,["piece-image-type","board-image-type","board-label-type","max-size","position","last-move","flip","allow-move","allow-edit","black-player-name","white-player-name","black-player-time","black-player-byoyomi","white-player-time","white-player-byoyomi","onResize","onMove","onEdit"]),t.isGameMenuVisible?(T(),Ge(l,{key:0,onClose:e[17]||(e[17]=b=>t.isGameMenuVisible=!1)})):ue("",!0),t.isFileMenuVisible?(T(),Ge(c,{key:1,onClose:e[18]||(e[18]=b=>t.isFileMenuVisible=!1)})):ue("",!0),t.isInitialPositionMenuVisible?(T(),Ge(u,{key:2,onClose:e[19]||(e[19]=b=>t.isInitialPositionMenuVisible=!1)})):ue("",!0)])}const X_=We(G_,[["render",Y_],["__scopeId","data-v-df43d1e3"]]),J_=ze({name:"RecordView",components:{ButtonIcon:Ot},props:{record:{type:Object,required:!0},operational:{type:Boolean,required:!1},showElapsedTime:{type:Boolean,required:!1},showComment:{type:Boolean,required:!1}},emits:["goBegin","goBack","goForward","goEnd","selectMove","selectBranch","swapWithPreviousBranch","swapWithNextBranch"],setup(t,e){const i=V(null),n=V(null),s=()=>{t.operational&&e.emit("goBegin")},o=()=>{t.operational&&e.emit("goBack")},r=()=>{t.operational&&e.emit("goForward")},a=()=>{t.operational&&e.emit("goEnd")},l=b=>{t.operational&&e.emit("selectMove",Number(b))},c=b=>{t.operational&&e.emit("selectBranch",Number(b))},u=()=>{t.operational&&e.emit("swapWithPreviousBranch")},h=()=>{t.operational&&e.emit("swapWithNextBranch")},d=ge(()=>t.record.current.number===0),p=ge(()=>{const b=[];return t.record.moves.forEach(v=>{b.push({number:v.number,text:v.displayText,time:v.number!=0?v.timeText:"",hasBranch:v.hasBranch,comment:v.comment,selected:v===t.record.current})}),b}),_=ge(()=>{if(!t.record.branchBegin.branch)return null;const b=[];let v;for(v=t.record.branchBegin;v&&v.move;v=v.branch)b.push({index:b.length,text:v.displayText,comment:v.comment,selected:v.activeBranch});return b});return Xs(()=>{i.value.childNodes.forEach(y=>{y instanceof HTMLElement&&y.classList.contains("selected")&&y.scrollIntoView({behavior:"auto",block:"nearest"})}),n.value.childNodes.forEach(y=>{y instanceof HTMLElement&&y.classList.contains("selected")&&y.scrollIntoView({behavior:"auto",block:"nearest"})})}),{beginPosSelected:d,moves:p,branches:_,moveList:i,branchList:n,goBegin:s,goBack:o,goForward:r,goEnd:a,changeNumber:l,changeBranch:c,swapWithPreviousBranch:u,swapWithNextBranch:h,Icon:tt}}});const Z_={class:"record-view"},Q_={class:"controller"},ey=["disabled"],ty=["disabled"],iy=["disabled"],ny=["disabled"],sy={ref:"moveList",class:"move-list"},oy=["value","onClick"],ry={class:"move-number"},ay={class:"move-text"},ly={key:0,class:"move-time"},cy={key:1,class:"move-comment"},uy={class:"branch-list-area"},hy={ref:"branchList",class:"branch-list"},dy=["value","onClick"],fy={class:"move-text"},py={key:0,class:"move-comment"},gy={class:"branch-list-control"},my=["disabled"],by=["disabled"];function _y(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",Z_,[m("div",Q_,[m("button",{class:"control-button",disabled:!t.operational,"data-hotkey":"ArrowLeft",onClick:e[0]||(e[0]=a=>t.goBegin())},[K(r,{class:"icon",icon:t.Icon.FIRST},null,8,["icon"])],8,ey),m("button",{class:"control-button",disabled:!t.operational,"data-hotkey":"ArrowUp",onClick:e[1]||(e[1]=a=>t.goBack())},[K(r,{class:"icon",icon:t.Icon.BACK},null,8,["icon"])],8,ty),m("button",{class:"control-button",disabled:!t.operational,"data-hotkey":"ArrowDown",onClick:e[2]||(e[2]=a=>t.goForward())},[K(r,{class:"icon",icon:t.Icon.NEXT},null,8,["icon"])],8,iy),m("button",{class:"control-button",disabled:!t.operational,"data-hotkey":"ArrowRight",onClick:e[3]||(e[3]=a=>t.goEnd())},[K(r,{class:"icon",icon:t.Icon.LAST},null,8,["icon"])],8,ny)]),m("div",sy,[(T(!0),O(Pe,null,Ye(t.moves,a=>(T(),O("div",{key:a.number,class:ei(["move-element",{"has-branch":a.hasBranch,selected:a.selected}]),value:a.number,onClick:l=>t.changeNumber(a.number)},[m("div",ry,fe(a.number!==0?a.number:""),1),m("div",ay,fe(a.text),1),t.showElapsedTime?(T(),O("div",ly,fe(a.time),1)):ue("",!0),t.showComment?(T(),O("div",cy,fe(a.comment),1)):ue("",!0)],10,oy))),128))],512),m("div",uy,[m("div",hy,[(T(!0),O(Pe,null,Ye(t.branches,a=>(T(),O("div",{key:a.index,class:ei(["move-element",{selected:a.selected}]),value:a.index,onClick:l=>t.changeBranch(a.index)},[m("div",fy,fe(a.text),1),t.showComment?(T(),O("div",py,fe(a.comment),1)):ue("",!0)],10,dy))),128))],512),m("div",gy,[m("button",{class:"branch-list-control-button",disabled:!t.operational,onClick:e[4]||(e[4]=a=>t.swapWithPreviousBranch())},[K(r,{class:"icon",icon:t.Icon.ARROW_UP},null,8,["icon"])],8,my),m("button",{class:"branch-list-control-button",disabled:!t.operational,onClick:e[5]||(e[5]=a=>t.swapWithNextBranch())},[K(r,{class:"icon",icon:t.Icon.ARROW_DROP},null,8,["icon"])],8,by)])])])}const yy=We(J_,[["render",_y],["__scopeId","data-v-a0d77b5f"]]),vy=200,Sy=ze({name:"RecordPane",components:{RecordView:yy},setup(){const t=Xe(),e=V();st(()=>{gs(e.value)}),Js(()=>{ms(e.value)});const i=y=>{t.changePly(y)},n=()=>{i(0)},s=()=>{i(t.record.current.number-1)},o=()=>{i(t.record.current.number+1)},r=()=>{i(Number.MAX_SAFE_INTEGER)},a=y=>{i(y)},l=y=>{t.changeBranch(y)},c=()=>{t.swapWithPreviousBranch()},u=()=>{t.swapWithNextBranch()},h=y=>{const w=y.target;t.updateAppSetting({showElapsedTimeInRecordView:w.checked})},d=y=>{const w=y.target;t.updateAppSetting({showCommentInRecordView:w.checked})},p=ge(()=>t.appState===W.NORMAL||t.appState===W.RESEARCH),_=ge(()=>t.appSetting.showCommentInRecordView),b=ge(()=>t.appSetting.showElapsedTimeInRecordView),v=ge(()=>t.record);return{root:e,isRecordOperational:p,showElapsedTime:b,showComment:_,record:v,goBegin:n,goBack:s,goForward:o,goEnd:r,selectMove:a,selectBranch:l,swapWithPreviousBranch:c,swapWithNextBranch:u,onToggleElapsedTime:h,onToggleComment:d}}});const of=t=>(qt("data-v-466f970d"),t=t(),Yt(),t),wy={ref:"root",class:"record-pane"},Ey={class:"record"},Ay={class:"options"},xy={class:"option"},Iy=["checked"],ky=of(()=>m("label",{for:"show-elapsed-time"},"",-1)),Cy={class:"option"},Py=["checked"],My=of(()=>m("label",{for:"show-comment"},"",-1));function Ty(t,e,i,n,s,o){const r=we("RecordView");return T(),O("div",wy,[m("div",Ey,[K(r,{record:t.record,operational:t.isRecordOperational,"show-comment":t.showComment,"show-elapsed-time":t.showElapsedTime,onGoBegin:t.goBegin,onGoBack:t.goBack,onGoForward:t.goForward,onGoEnd:t.goEnd,onSelectMove:t.selectMove,onSelectBranch:t.selectBranch,onSwapWithPreviousBranch:t.swapWithPreviousBranch,onSwapWithNextBranch:t.swapWithNextBranch},null,8,["record","operational","show-comment","show-elapsed-time","onGoBegin","onGoBack","onGoForward","onGoEnd","onSelectMove","onSelectBranch","onSwapWithPreviousBranch","onSwapWithNextBranch"])]),m("div",Ay,[m("div",xy,[m("input",{id:"show-elapsed-time",type:"checkbox",checked:t.showElapsedTime,onChange:e[0]||(e[0]=(...a)=>t.onToggleElapsedTime&&t.onToggleElapsedTime(...a))},null,40,Iy),ky]),m("div",Cy,[m("input",{id:"show-comment",type:"checkbox",checked:t.showComment,onChange:e[1]||(e[1]=(...a)=>t.onToggleComment&&t.onToggleComment(...a))},null,40,Py),My])])],512)}const By=We(Sy,[["render",Ty],["__scopeId","data-v-466f970d"]]),Ry=ze({name:"RecordComment",setup(){const t=Xe(),e=ge(()=>t.record.current.comment),i=ge(()=>t.appState!=W.NORMAL&&t.appState!=W.RESEARCH),n=V(null),s=o=>{const r=o.target.value;t.updateRecordComment(r)};return st(()=>{n.value.addEventListener("copy",o=>{o.stopPropagation()}),n.value.addEventListener("paste",o=>{o.stopPropagation()})}),{textarea:n,comment:e,readonly:i,change:s}}});const Dy={class:"root"},Ny=["value","readonly"];function Oy(t,e,i,n,s,o){return T(),O("div",null,[m("div",Dy,[m("textarea",{ref:"textarea",class:"text",value:t.comment,readonly:!!t.readonly,onInput:e[0]||(e[0]=(...r)=>t.change&&t.change(...r))},null,40,Ny)])])}const Ly=We(Ry,[["render",Oy],["__scopeId","data-v-027f280c"]]),Fy=ze({name:"PVPreviewDialog",components:{BoardView:Gd,ButtonIcon:Ot},props:{position:{type:String,required:!0},pv:{type:Array,required:!0},infos:{type:Array,default:[],required:!1}},emits:["close"],setup(t,e){const i=Xe(),n=V(null),s=Wi(new kt(0,0)),o=Wi(new xt),r=V(i.appSetting.boardFlipping),a=()=>{s.width=window.innerWidth*.8,s.height=window.innerHeight*.8-80},l=()=>{const w=Bt.newBySFEN(t.position);if(w){o.clear(w);for(const E of t.pv){const x=o.position.createMoveByUSI(E);if(!x)break;o.append(x,{ignoreValidation:!0})}o.goto(1)}};st(async()=>{a(),l(),window.addEventListener("resize",a),Et(n.value),ii(n.value)}),zt(()=>{window.removeEventListener("resize",a),ni(n.value)}),nn([()=>t.position,()=>t.pv],()=>{l(),Et(n.value)});const c=()=>{e.emit("close")},u=()=>{o.goto(0)},h=()=>{o.goto(Number.MAX_SAFE_INTEGER)},d=()=>{o.goBack()},p=()=>{o.goForward()},_=()=>{r.value=!r.value},b=ge(()=>o.position),v=ge(()=>o.current.move instanceof ot?o.current.move:null),y=ge(()=>o.moves.slice(1).map(w=>({text:w.displayText,selected:w.number===o.current.number})));return{dialog:n,appSetting:i.appSetting,pos:b,lastMove:v,maxSize:s,flip:r,displayPV:y,close:c,goBegin:u,goEnd:h,goBack:d,goForward:p,doFlip:_,Icon:tt}}});const $y={ref:"dialog"},Hy={class:"control top"},Uy={class:"control-row"},zy={class:"control-row"},Wy={class:"control-row"},Gy={class:"informations"},Vy={class:"information"};function jy(t,e,i,n,s,o){const r=we("ButtonIcon"),a=we("BoardView");return T(),O("div",null,[m("dialog",$y,[K(a,{class:"board","piece-image-type":t.appSetting.pieceImage,"board-image-type":t.appSetting.boardImage,"board-label-type":t.appSetting.boardLabelType,"max-size":t.maxSize,position:t.pos,"last-move":t.lastMove,flip:t.flip},{"right-control":wi(()=>[m("div",Hy,[m("div",Uy,[m("button",{class:"control-item","data-hotkey":"Control+t",onClick:e[0]||(e[0]=(...l)=>t.doFlip&&t.doFlip(...l))},[K(r,{class:"icon",icon:t.Icon.FLIP},null,8,["icon"])]),m("button",{class:"control-item",autofocus:"","data-hotkey":"Escape",onClick:e[1]||(e[1]=(...l)=>t.close&&t.close(...l))},[K(r,{class:"icon",icon:t.Icon.CLOSE},null,8,["icon"])])]),m("div",zy,[m("button",{class:"control-item","data-hotkey":"ArrowLeft",onClick:e[2]||(e[2]=(...l)=>t.goBegin&&t.goBegin(...l))},[K(r,{class:"icon",icon:t.Icon.FIRST},null,8,["icon"])]),m("button",{class:"control-item","data-hotkey":"ArrowRight",onClick:e[3]||(e[3]=(...l)=>t.goEnd&&t.goEnd(...l))},[K(r,{class:"icon",icon:t.Icon.LAST},null,8,["icon"])])]),m("div",Wy,[m("button",{class:"control-item","data-hotkey":"ArrowUp",onClick:e[4]||(e[4]=(...l)=>t.goBack&&t.goBack(...l))},[K(r,{class:"icon",icon:t.Icon.BACK},null,8,["icon"])]),m("button",{class:"control-item","data-hotkey":"ArrowDown",onClick:e[5]||(e[5]=(...l)=>t.goForward&&t.goForward(...l))},[K(r,{class:"icon",icon:t.Icon.NEXT},null,8,["icon"])])])])]),_:1},8,["piece-image-type","board-image-type","board-label-type","max-size","position","last-move","flip"]),m("div",Gy,[(T(!0),O(Pe,null,Ye(t.infos,(l,c)=>(T(),O("div",{key:c,class:"information"},fe(l),1))),128)),m("div",Vy,[(T(!0),O(Pe,null,Ye(t.displayPV,(l,c)=>(T(),O("span",{key:c},[m("span",{class:ei(["move-element",{selected:l.selected}])},""+fe(l.text)+"",3)]))),128))])])],512)])}const Ky=We(Fy,[["render",jy],["__scopeId","data-v-7c2e1b7b"]]),qy=ze({name:"EngineAnalyticsElement",components:{ButtonIcon:Ot,PVPreviewDialog:Ky},props:{historyMode:{type:Boolean,required:!0},name:{type:String,required:!0},info:{type:Zd,required:!0},height:{type:Number,required:!0}},setup:t=>{const e=ge(()=>{if(!t.historyMode)return!1;for(const o of t.info.iterates)if(o.multiPV&&o.multiPV!==1)return!0;return!1}),i=V(null);return{Icon:tt,enableHighlight:e,preview:i,showPreview:o=>{const r=[];o.depth!==void 0&&r.push(`=${o.depth}`),o.selectiveDepth!==void 0&&r.push(`=${o.selectiveDepth}`),o.score&&(r.push(`=${o.score}`),o.lowerBound&&r.push(""),o.upperBound&&r.push("")),o.scoreMate&&r.push(`=${o.scoreMate}`),o.multiPV&&r.push(`=${o.multiPV}`),i.value={position:o.position,pv:o.pv||[],infos:[r.join(" / ")]}},closePreview:()=>{i.value=null}}}});const os=t=>(qt("data-v-62d9d994"),t=t(),Yt(),t),Yy={class:"root"},Xy={class:"headers"},Jy={class:"header"},Zy=os(()=>m("span",{class:"label"},": ",-1)),Qy={class:"value"},ev={class:"header"},tv=os(()=>m("span",{class:"label"},": ",-1)),iv={class:"value"},nv={class:"header"},sv=os(()=>m("span",{class:"label"},": ",-1)),ov={class:"value"},rv={class:"header"},av=os(()=>m("span",{class:"label"},"NPS: ",-1)),lv={class:"value"},cv={class:"header"},uv=os(()=>m("span",{class:"label"},"Node: ",-1)),hv={class:"value"},dv={class:"header"},fv=os(()=>m("span",{class:"label"},"Hash: ",-1)),pv={class:"value"},gv=Ed('<div class="list-header" data-v-62d9d994><div class="list-column time" data-v-62d9d994></div><div class="list-column multipv-index" data-v-62d9d994></div><div class="list-column depth" data-v-62d9d994></div><div class="list-column nodes" data-v-62d9d994></div><div class="list-column score" data-v-62d9d994></div></div>',1),mv={class:"list-column time"},bv={class:"list-column multipv-index"},_v={class:"list-column depth"},yv={class:"list-column nodes"},vv={class:"list-column score"},Sv={class:"list-column score-flag"},wv={class:"list-column text"},Ev=["onClick"];function Av(t,e,i,n,s,o){const r=we("ButtonIcon"),a=we("PVPreviewDialog");return T(),O("div",null,[m("div",Yy,[m("div",Xy,[m("div",Jy,[Zy,m("span",Qy,fe(t.name),1)]),m("div",ev,[tv,m("span",iv,fe(t.info.ponderMove?t.info.ponderMove:"---"),1)]),m("div",nv,[sv,m("span",ov,fe(t.info.currentMoveText||"---"),1)]),m("div",rv,[av,m("span",lv,fe(t.info.nps||"---"),1)]),m("div",cv,[uv,m("span",hv,fe(t.info.nodes||"---"),1)]),m("div",dv,[fv,m("span",pv,fe(t.info.hashfull?(t.info.hashfull*100).toFixed(1):"---")+" % ",1)])]),gv,m("div",{class:"list",style:He({height:`${t.height-37}px`})},[(T(!0),O(Pe,null,Ye(t.historyMode?t.info.iterates:t.info.latestIteration,(l,c)=>(T(),O("div",{key:c,class:ei(["list-item",{highlight:t.enableHighlight&&l.multiPV===1}])},[m("div",mv,fe(l.timeMs?(l.timeMs/1e3).toFixed(1)+"s":""),1),m("div",bv,fe(l.multiPV||""),1),m("div",_v,fe(l.depth)+fe(l.selectiveDepth&&l.depth?"/":"")+fe(l.selectiveDepth),1),m("div",yv,fe(l.nodes),1),m("div",vv,fe(l.score)+" "+fe(l.scoreMate?l.scoreMate:""),1),m("div",Sv,fe(l.lowerBound?"++":"")+" "+fe(l.upperBound?"--":"")+" "+fe(l.scoreMate?"":""),1),m("div",wv,[l.pv&&l.pv.length!==0&&l.text?(T(),O("button",{key:0,onClick:u=>t.showPreview(l)},[K(r,{class:"icon",icon:t.Icon.PLAY},null,8,["icon"]),qe("  ")],8,Ev)):ue("",!0),qe(" "+fe(l.text),1)])],2))),128))],4),t.preview?(T(),Ge(a,{key:0,position:t.preview.position,pv:t.preview.pv,infos:t.preview.infos,onClose:t.closePreview},null,8,["position","pv","infos","onClose"])):ue("",!0)])])}const xv=We(qy,[["render",Av],["__scopeId","data-v-62d9d994"]]),Iv=ze({name:"EngineAnalytics",components:{EngineAnalyticsElement:xv},props:{size:{type:kt,required:!0},historyMode:{type:Boolean,required:!0}},setup(t){const e=Xe(),i=ge(()=>e.usiMonitors),n=ge(()=>{const s=e.usiMonitors.length;return s!==0?t.size.height/s:0});return{monitors:i,elementHeight:n}}});const kv={class:"root"};function Cv(t,e,i,n,s,o){const r=we("EngineAnalyticsElement");return T(),O("div",null,[m("div",kv,[(T(!0),O(Pe,null,Ye(t.monitors,a=>(T(),Ge(r,{key:a.sessionID,"history-mode":t.historyMode,name:a.name,info:a,height:t.elementHeight},null,8,["history-mode","name","info","height"]))),128))])])}const Pv=We(Iv,[["render",Cv],["__scopeId","data-v-7185ef64"]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Zs(t){return t+.5|0}const Xi=(t,e,i)=>Math.max(Math.min(t,i),e);function bs(t){return Xi(Zs(t*2.55),0,255)}function sn(t){return Xi(Zs(t*255),0,255)}function Oi(t){return Xi(Zs(t/2.55)/100,0,1)}function uu(t){return Xi(Zs(t*100),0,100)}const oi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$a=[..."0123456789ABCDEF"],Mv=t=>$a[t&15],Tv=t=>$a[(t&240)>>4]+$a[t&15],uo=t=>(t&240)>>4===(t&15),Bv=t=>uo(t.r)&&uo(t.g)&&uo(t.b)&&uo(t.a);function Rv(t){var e=t.length,i;return t[0]==="#"&&(e===4||e===5?i={r:255&oi[t[1]]*17,g:255&oi[t[2]]*17,b:255&oi[t[3]]*17,a:e===5?oi[t[4]]*17:255}:(e===7||e===9)&&(i={r:oi[t[1]]<<4|oi[t[2]],g:oi[t[3]]<<4|oi[t[4]],b:oi[t[5]]<<4|oi[t[6]],a:e===9?oi[t[7]]<<4|oi[t[8]]:255})),i}const Dv=(t,e)=>t<255?e(t):"";function Nv(t){var e=Bv(t)?Mv:Tv;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Dv(t.a,e):void 0}const Ov=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function rf(t,e,i){const n=e*Math.min(i,1-i),s=(o,r=(o+t/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function Lv(t,e,i){const n=(s,o=(s+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Fv(t,e,i){const n=rf(t,1,.5);let s;for(e+i>1&&(s=1/(e+i),e*=s,i*=s),s=0;s<3;s++)n[s]*=1-e-i,n[s]+=e;return n}function $v(t,e,i,n,s){return t===s?(e-i)/n+(e<i?6:0):e===s?(i-t)/n+2:(t-e)/n+4}function Ml(t){const i=t.r/255,n=t.g/255,s=t.b/255,o=Math.max(i,n,s),r=Math.min(i,n,s),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=$v(i,n,s,u,o),l=l*60+.5),[l|0,c||0,a]}function Tl(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(sn)}function Bl(t,e,i){return Tl(rf,t,e,i)}function Hv(t,e,i){return Tl(Fv,t,e,i)}function Uv(t,e,i){return Tl(Lv,t,e,i)}function af(t){return(t%360+360)%360}function zv(t){const e=Ov.exec(t);let i=255,n;if(!e)return;e[5]!==n&&(i=e[6]?bs(+e[5]):sn(+e[5]));const s=af(+e[2]),o=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?n=Hv(s,o,r):e[1]==="hsv"?n=Uv(s,o,r):n=Bl(s,o,r),{r:n[0],g:n[1],b:n[2],a:i}}function Wv(t,e){var i=Ml(t);i[0]=af(i[0]+e),i=Bl(i),t.r=i[0],t.g=i[1],t.b=i[2]}function Gv(t){if(!t)return;const e=Ml(t),i=e[0],n=uu(e[1]),s=uu(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${s}%, ${Oi(t.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const hu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},du={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Vv(){const t={},e=Object.keys(du),i=Object.keys(hu);let n,s,o,r,a;for(n=0;n<e.length;n++){for(r=a=e[n],s=0;s<i.length;s++)o=i[s],a=a.replace(o,hu[o]);o=parseInt(du[r],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}let ho;function jv(t){ho||(ho=Vv(),ho.transparent=[0,0,0,0]);const e=ho[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Kv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qv(t){const e=Kv.exec(t);let i=255,n,s,o;if(e){if(e[7]!==n){const r=+e[7];i=e[8]?bs(r):Xi(r*255,0,255)}return n=+e[1],s=+e[3],o=+e[5],n=255&(e[2]?bs(n):Xi(n,0,255)),s=255&(e[4]?bs(s):Xi(s,0,255)),o=255&(e[6]?bs(o):Xi(o,0,255)),{r:n,g:s,b:o,a:i}}}function Yv(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Oi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ia=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,On=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Xv(t,e,i){const n=On(Oi(t.r)),s=On(Oi(t.g)),o=On(Oi(t.b));return{r:sn(ia(n+i*(On(Oi(e.r))-n))),g:sn(ia(s+i*(On(Oi(e.g))-s))),b:sn(ia(o+i*(On(Oi(e.b))-o))),a:t.a+i*(e.a-t.a)}}function fo(t,e,i){if(t){let n=Ml(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,e===0?360:1)),n=Bl(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function lf(t,e){return t&&Object.assign(e||{},t)}function fu(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=sn(t[3]))):(e=lf(t,{r:0,g:0,b:0,a:1}),e.a=sn(e.a)),e}function Jv(t){return t.charAt(0)==="r"?qv(t):zv(t)}class zs{constructor(e){if(e instanceof zs)return e;const i=typeof e;let n;i==="object"?n=fu(e):i==="string"&&(n=Rv(e)||jv(e)||Jv(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=lf(this._rgb);return e&&(e.a=Oi(e.a)),e}set rgb(e){this._rgb=fu(e)}rgbString(){return this._valid?Yv(this._rgb):void 0}hexString(){return this._valid?Nv(this._rgb):void 0}hslString(){return this._valid?Gv(this._rgb):void 0}mix(e,i){if(e){const n=this.rgb,s=e.rgb;let o;const r=i===o?.5:i,a=2*r-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*s.r+.5,n.g=255&c*n.g+o*s.g+.5,n.b=255&c*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(e,i){return e&&(this._rgb=Xv(this._rgb,e._rgb,i)),this}clone(){return new zs(this.rgb)}alpha(e){return this._rgb.a=sn(e),this}clearer(e){const i=this._rgb;return i.a*=1-e,this}greyscale(){const e=this._rgb,i=Zs(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){const i=this._rgb;return i.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return fo(this._rgb,2,e),this}darken(e){return fo(this._rgb,2,-e),this}saturate(e){return fo(this._rgb,1,e),this}desaturate(e){return fo(this._rgb,1,-e),this}rotate(e){return Wv(this._rgb,e),this}}/*!
 * Chart.js v4.1.2
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Ti(){}const Zv=(()=>{let t=0;return()=>t++})();function $e(t){return t===null||typeof t>"u"}function it(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function De(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ht(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Xt(t,e){return ht(t)?t:e}function Ie(t,e){return typeof t>"u"?e:t}const Qv=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,cf=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Qe(t,e,i){if(t&&typeof t.call=="function")return t.apply(i,e)}function Ke(t,e,i,n){let s,o,r;if(it(t))if(o=t.length,n)for(s=o-1;s>=0;s--)e.call(i,t[s],s);else for(s=0;s<o;s++)e.call(i,t[s],s);else if(De(t))for(r=Object.keys(t),o=r.length,s=0;s<o;s++)e.call(i,t[r[s]],r[s])}function ar(t,e){let i,n,s,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(s=t[i],o=e[i],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function lr(t){if(it(t))return t.map(lr);if(De(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let s=0;for(;s<n;++s)e[i[s]]=lr(t[i[s]]);return e}return t}function uf(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function eS(t,e,i,n){if(!uf(t))return;const s=e[t],o=i[t];De(s)&&De(o)?Ws(s,o,n):e[t]=lr(o)}function Ws(t,e,i){const n=it(e)?e:[e],s=n.length;if(!De(t))return t;i=i||{};const o=i.merger||eS;let r;for(let a=0;a<s;++a){if(r=n[a],!De(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],t,r,i)}return t}function ks(t,e){return Ws(t,e,{merger:tS})}function tS(t,e,i){if(!uf(t))return;const n=e[t],s=i[t];De(n)&&De(s)?ks(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=lr(s))}const pu={"":t=>t,x:t=>t.x,y:t=>t.y};function iS(t){const e=t.split("."),i=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function nS(t){const e=iS(t);return i=>{for(const n of e){if(n==="")break;i=i&&i[n]}return i}}function an(t,e){return(pu[e]||(pu[e]=nS(e)))(t)}function Rl(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ui=t=>typeof t<"u",ln=t=>typeof t=="function",gu=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function sS(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const lt=Math.PI,nt=2*lt,oS=nt+lt,cr=Number.POSITIVE_INFINITY,rS=lt/180,dt=lt/2,gn=lt/4,mu=lt*2/3,Ji=Math.log10,ki=Math.sign;function Cs(t,e,i){return Math.abs(t-e)<i}function bu(t){const e=Math.round(t);t=Cs(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(Ji(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function aS(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n===0&&(e.push(n),e.push(t/n));return i===(i|0)&&e.push(i),e.sort((s,o)=>s-o).pop(),e}function Qn(t){return!isNaN(parseFloat(t))&&isFinite(t)}function lS(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function hf(t,e,i){let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function fi(t){return t*(lt/180)}function Dl(t){return t*(180/lt)}function _u(t){if(!ht(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function df(t,e){const i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i);return o<-.5*lt&&(o+=nt),{angle:o,distance:s}}function Ha(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cS(t,e){return(t-e+oS)%nt-lt}function Zt(t){return(t%nt+nt)%nt}function Gs(t,e,i,n){const s=Zt(t),o=Zt(e),r=Zt(i),a=Zt(o-s),l=Zt(r-s),c=Zt(s-o),u=Zt(s-r);return s===o||s===r||n&&o===r||a>l&&c<u}function wt(t,e,i){return Math.max(e,Math.min(i,t))}function uS(t){return wt(t,-32768,32767)}function Hi(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function Nl(t,e,i){i=i||(r=>t[r]<e);let n=t.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,i(o)?s=o:n=o;return{lo:s,hi:n}}const Ui=(t,e,i,n)=>Nl(t,i,n?s=>{const o=t[s][e];return o<i||o===i&&t[s+1][e]===i}:s=>t[s][e]<i),hS=(t,e,i)=>Nl(t,i,n=>t[n][e]>=i);function dS(t,e,i){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>i;)s--;return n>0||s<t.length?t.slice(n,s):t}const ff=["push","pop","shift","splice","unshift"];function fS(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ff.forEach(i=>{const n="_onData"+Rl(i),s=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function yu(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(ff.forEach(o=>{delete t[o]}),delete t._chartjs)}function pf(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}const gf=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function mf(t,e){let i=[],n=!1;return function(...s){i=s,n||(n=!0,gf.call(window,()=>{n=!1,t.apply(e,i)}))}}function pS(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const Ol=t=>t==="start"?"left":t==="end"?"right":"center",Ct=(t,e,i)=>t==="start"?e:t==="end"?i:(e+i)/2,gS=(t,e,i,n)=>t===(n?"left":"right")?i:t==="center"?(e+i)/2:e;function bf(t,e,i){const n=e.length;let s=0,o=n;if(t._sorted){const{iScale:r,_parsed:a}=t,l=r.axis,{min:c,max:u,minDefined:h,maxDefined:d}=r.getUserBounds();h&&(s=wt(Math.min(Ui(a,r.axis,c).lo,i?n:Ui(e,l,r.getPixelForValue(c)).lo),0,n-1)),d?o=wt(Math.max(Ui(a,r.axis,u,!0).hi+1,i?0:Ui(e,l,r.getPixelForValue(u),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function _f(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=s,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),o}const po=t=>t===0||t===1,vu=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*nt/i)),Su=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*nt/i)+1,Ps={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*dt)+1,easeOutSine:t=>Math.sin(t*dt),easeInOutSine:t=>-.5*(Math.cos(lt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>po(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>po(t)?t:vu(t,.075,.3),easeOutElastic:t=>po(t)?t:Su(t,.075,.3),easeInOutElastic(t){return po(t)?t:t<.5?.5*vu(t*2,.1125,.45):.5+.5*Su(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ps.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ps.easeInBounce(t*2)*.5:Ps.easeOutBounce(t*2-1)*.5+.5};function yf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function wu(t){return yf(t)?t:new zs(t)}function na(t){return yf(t)?t:new zs(t).saturate(.5).darken(.1).hexString()}const mS=["x","y","borderWidth","radius","tension"],bS=["color","borderColor","backgroundColor"];function _S(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:bS},numbers:{type:"number",properties:mS}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function yS(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Eu=new Map;function vS(t,e){e=e||{};const i=t+JSON.stringify(e);let n=Eu.get(i);return n||(n=new Intl.NumberFormat(t,e),Eu.set(i,n)),n}function Qs(t,e,i){return vS(e,i).format(t)}const vf={values(t){return it(t)?t:""+t},numeric(t,e,i){if(t===0)return"0";const n=this.chart.options.locale;let s,o=t;if(i.length>1){const c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=SS(t,i)}const r=Ji(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Qs(t,n,l)},logarithmic(t,e,i){if(t===0)return"0";const n=i[e].significand||t/Math.pow(10,Math.floor(Ji(t)));return[1,2,3,5,10,15].includes(n)||e>.8*i.length?vf.numeric.call(this,t,e,i):""}};function SS(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var Mr={formatters:vf};function wS(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Mr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Bn=Object.create(null),Ua=Object.create(null);function Ms(t,e){if(!e)return t;const i=e.split(".");for(let n=0,s=i.length;n<s;++n){const o=i[n];t=t[o]||(t[o]=Object.create(null))}return t}function sa(t,e,i){return typeof e=="string"?Ws(Ms(t,e),i):Ws(Ms(t,""),e)}class ES{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>na(s.backgroundColor),this.hoverBorderColor=(n,s)=>na(s.borderColor),this.hoverColor=(n,s)=>na(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return sa(this,e,i)}get(e){return Ms(this,e)}describe(e,i){return sa(Ua,e,i)}override(e,i){return sa(Bn,e,i)}route(e,i,n,s){const o=Ms(this,e),r=Ms(this,n),a="_"+i;Object.defineProperties(o,{[a]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],c=r[s];return De(l)?Object.assign({},c,l):Ie(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(i=>i(this))}}var ft=new ES({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_S,yS,wS]);function AS(t){return!t||$e(t.size)||$e(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ur(t,e,i,n,s){let o=e[s];return o||(o=e[s]=t.measureText(s).width,i.push(s)),o>n&&(n=o),n}function xS(t,e,i,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let r=0;const a=i.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=i[l],h!=null&&it(h)!==!0)r=ur(t,s,o,r,h);else if(it(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!it(d)&&(r=ur(t,s,o,r,d));t.restore();const p=o.length/2;if(p>i.length){for(l=0;l<p;l++)delete s[o[l]];o.splice(0,p)}return r}function mn(t,e,i){const n=t.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((e-s)*n)/n+s}function Au(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function za(t,e,i,n){Sf(t,e,i,n,null)}function Sf(t,e,i,n,s){let o,r,a,l,c,u,h,d;const p=e.pointStyle,_=e.rotation,b=e.radius;let v=(_||0)*rS;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(i,n),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),p){default:s?t.ellipse(i,n,s/2,b,0,0,nt):t.arc(i,n,b,0,nt),t.closePath();break;case"triangle":u=s?s/2:b,t.moveTo(i+Math.sin(v)*u,n-Math.cos(v)*b),v+=mu,t.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*b),v+=mu,t.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,r=Math.cos(v+gn)*l,h=Math.cos(v+gn)*(s?s/2-c:l),a=Math.sin(v+gn)*l,d=Math.sin(v+gn)*(s?s/2-c:l),t.arc(i-h,n-a,c,v-lt,v-dt),t.arc(i+d,n-r,c,v-dt,v),t.arc(i+h,n+a,c,v,v+dt),t.arc(i-d,n+r,c,v+dt,v+lt),t.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*b,u=s?s/2:l,t.rect(i-u,n-l,2*u,2*l);break}v+=gn;case"rectRot":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,d=Math.sin(v)*(s?s/2:b),t.moveTo(i-h,n-a),t.lineTo(i+d,n-r),t.lineTo(i+h,n+a),t.lineTo(i-d,n+r),t.closePath();break;case"crossRot":v+=gn;case"cross":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,d=Math.sin(v)*(s?s/2:b),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+d,n-r),t.lineTo(i-d,n+r);break;case"star":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,d=Math.sin(v)*(s?s/2:b),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+d,n-r),t.lineTo(i-d,n+r),v+=gn,h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,d=Math.sin(v)*(s?s/2:b),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+d,n-r),t.lineTo(i-d,n+r);break;case"line":r=s?s/2:Math.cos(v)*b,a=Math.sin(v)*b,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(v)*(s?s/2:b),n+Math.sin(v)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Vs(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Tr(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Br(t){t.restore()}function IS(t,e,i,n,s){if(!e)return t.lineTo(i.x,i.y);if(s==="middle"){const o=(e.x+i.x)/2;t.lineTo(o,e.y),t.lineTo(o,i.y)}else s==="after"!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function kS(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Rn(t,e,i,n,s,o={}){const r=it(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,CS(t,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&MS(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),$e(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,i,n,o.maxWidth)),t.fillText(c,i,n,o.maxWidth),PS(t,i,n,c,o),n+=s.lineHeight;t.restore()}function CS(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),$e(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function PS(t,e,i,n,s){if(s.strikethrough||s.underline){const o=t.measureText(n),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(r,u),t.lineTo(a,u),t.stroke()}}function MS(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function js(t,e){const{x:i,y:n,w:s,h:o,radius:r}=e;t.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-dt,lt,!0),t.lineTo(i,n+o-r.bottomLeft),t.arc(i+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,lt,dt,!0),t.lineTo(i+s-r.bottomRight,n+o),t.arc(i+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,dt,0,!0),t.lineTo(i+s,n+r.topRight),t.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-dt,!0),t.lineTo(i+r.topLeft,n)}const TS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,BS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function RS(t,e){const i=(""+t).match(TS);if(!i||i[1]==="normal")return e*1.2;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const DS=t=>+t||0;function Ll(t,e){const i={},n=De(e),s=n?Object.keys(e):e,o=De(t)?n?r=>Ie(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of s)i[r]=DS(o(r));return i}function wf(t){return Ll(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Mn(t){return Ll(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Nt(t){const e=wf(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function _t(t,e){t=t||{},e=e||ft.font;let i=Ie(t.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let n=Ie(t.style,e.style);n&&!(""+n).match(BS)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:Ie(t.family,e.family),lineHeight:RS(Ie(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:Ie(t.weight,e.weight),string:""};return s.string=AS(s),s}function _s(t,e,i,n){let s=!0,o,r,a;for(o=0,r=t.length;o<r;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),i!==void 0&&it(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function NS(t,e,i){const{min:n,max:s}=t,o=cf(e,(s-n)/2),r=(a,l)=>i&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function hn(t,e){return Object.assign(Object.create(t),e)}function Fl(t,e=[""],i=t,n,s=()=>t[0]){ui(n)||(n=If("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:s,override:r=>Fl([r,...t],e,i,n)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete t[0][a],!0},get(r,a){return Af(r,a,()=>WS(a,e,t,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(r,a){return Iu(r).includes(a)},ownKeys(r){return Iu(r)},set(r,a,l){const c=r._storage||(r._storage=s());return r[a]=c[a]=l,delete r._keys,!0}})}function es(t,e,i,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Ef(t,n),setContext:o=>es(t,o,i,n),override:o=>es(t.override(o),e,i,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete t[r],!0},get(o,r,a){return Af(o,r,()=>LS(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(o,r,a){return t[r]=a,delete o[r],!0}})}function Ef(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:i,indexable:n,isScriptable:ln(i)?i:()=>i,isIndexable:ln(n)?n:()=>n}}const OS=(t,e)=>t?t+Rl(e):e,$l=(t,e)=>De(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Af(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=i();return t[e]=n,n}function LS(t,e,i){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=t;let a=n[e];return ln(a)&&r.isScriptable(e)&&(a=FS(e,a,t,i)),it(a)&&a.length&&(a=$S(e,a,t,r.isIndexable)),$l(e,a)&&(a=es(a,s,o&&o[e],r)),a}function FS(t,e,i,n){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(o,r||n),a.delete(t),$l(t,e)&&(e=Hl(s._scopes,s,t,e)),e}function $S(t,e,i,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=i;if(ui(o.index)&&n(t))e=e[o.index%e.length];else if(De(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Hl(c,s,t,u);e.push(es(h,o,r&&r[t],a))}}return e}function xf(t,e,i){return ln(t)?t(e,i):t}const HS=(t,e)=>t===!0?e:typeof t=="string"?an(e,t):void 0;function US(t,e,i,n,s){for(const o of e){const r=HS(i,o);if(r){t.add(r);const a=xf(r._fallback,i,s);if(ui(a)&&a!==i&&a!==n)return a}else if(r===!1&&ui(n)&&i!==n)return null}return!1}function Hl(t,e,i,n){const s=e._rootScopes,o=xf(e._fallback,i,n),r=[...t,...s],a=new Set;a.add(n);let l=xu(a,r,i,o||i,n);return l===null||ui(o)&&o!==i&&(l=xu(a,r,o,l,n),l===null)?!1:Fl(Array.from(a),[""],s,o,()=>zS(e,i,n))}function xu(t,e,i,n,s){for(;i;)i=US(t,e,i,n,s);return i}function zS(t,e,i){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return it(s)&&De(i)?i:s||{}}function WS(t,e,i,n){let s;for(const o of e)if(s=If(OS(o,t),i),ui(s))return $l(t,s)?Hl(i,n,t,s):s}function If(t,e){for(const i of e){if(!i)continue;const n=i[t];if(ui(n))return n}}function Iu(t){let e=t._keys;return e||(e=t._keys=GS(t._scopes)),e}function GS(t){const e=new Set;for(const i of t)for(const n of Object.keys(i).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}function kf(t,e,i,n){const{iScale:s}=t,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+i,u=e[c],r[a]={r:s.parse(an(u,o),c)};return r}const VS=Number.EPSILON||1e-14,ts=(t,e)=>e<t.length&&!t[e].skip&&t[e],Cf=t=>t==="x"?"y":"x";function jS(t,e,i,n){const s=t.skip?e:t,o=e,r=i.skip?e:i,a=Ha(o,s),l=Ha(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=n*c,d=n*u;return{previous:{x:o.x-h*(r.x-s.x),y:o.y-h*(r.y-s.y)},next:{x:o.x+d*(r.x-s.x),y:o.y+d*(r.y-s.y)}}}function KS(t,e,i){const n=t.length;let s,o,r,a,l,c=ts(t,0);for(let u=0;u<n-1;++u)if(l=c,c=ts(t,u+1),!(!l||!c)){if(Cs(e[u],0,VS)){i[u]=i[u+1]=0;continue}s=i[u]/e[u],o=i[u+1]/e[u],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),i[u]=s*r*e[u],i[u+1]=o*r*e[u])}}function qS(t,e,i="x"){const n=Cf(i),s=t.length;let o,r,a,l=ts(t,0);for(let c=0;c<s;++c){if(r=a,a=l,l=ts(t,c+1),!a)continue;const u=a[i],h=a[n];r&&(o=(u-r[i])/3,a[`cp1${i}`]=u-o,a[`cp1${n}`]=h-o*e[c]),l&&(o=(l[i]-u)/3,a[`cp2${i}`]=u+o,a[`cp2${n}`]=h+o*e[c])}}function YS(t,e="x"){const i=Cf(e),n=t.length,s=Array(n).fill(0),o=Array(n);let r,a,l,c=ts(t,0);for(r=0;r<n;++r)if(a=l,l=c,c=ts(t,r+1),!!l){if(c){const u=c[e]-l[e];s[r]=u!==0?(c[i]-l[i])/u:0}o[r]=a?c?ki(s[r-1])!==ki(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}KS(t,s,o),qS(t,o,e)}function go(t,e,i){return Math.max(Math.min(t,i),e)}function XS(t,e){let i,n,s,o,r,a=Vs(t[0],e);for(i=0,n=t.length;i<n;++i)r=o,o=a,a=i<n-1&&Vs(t[i+1],e),o&&(s=t[i],r&&(s.cp1x=go(s.cp1x,e.left,e.right),s.cp1y=go(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=go(s.cp2x,e.left,e.right),s.cp2y=go(s.cp2y,e.top,e.bottom)))}function JS(t,e,i,n,s){let o,r,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")YS(t,s);else{let c=n?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],l=jS(c,a,t[Math.min(o+1,r-(n?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&XS(t,i)}function Pf(){return typeof window<"u"&&typeof document<"u"}function Ul(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function hr(t,e,i){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[i])):n=t,n}const Rr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function ZS(t,e){return Rr(t).getPropertyValue(e)}const QS=["top","right","bottom","left"];function Tn(t,e,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const o=QS[s];n[o]=parseFloat(t[e+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const ew=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function tw(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:s,offsetY:o}=n;let r=!1,a,l;if(ew(s,o,t.target))a=s,l=o;else{const c=e.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function Sn(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:n}=e,s=Rr(i),o=s.boxSizing==="border-box",r=Tn(s,"padding"),a=Tn(s,"border","width"),{x:l,y:c,box:u}=tw(t,i),h=r.left+(u&&a.left),d=r.top+(u&&a.top);let{width:p,height:_}=e;return o&&(p-=r.width+a.width,_-=r.height+a.height),{x:Math.round((l-h)/p*i.width/n),y:Math.round((c-d)/_*i.height/n)}}function iw(t,e,i){let n,s;if(e===void 0||i===void 0){const o=Ul(t);if(!o)e=t.clientWidth,i=t.clientHeight;else{const r=o.getBoundingClientRect(),a=Rr(o),l=Tn(a,"border","width"),c=Tn(a,"padding");e=r.width-c.width-l.width,i=r.height-c.height-l.height,n=hr(a.maxWidth,o,"clientWidth"),s=hr(a.maxHeight,o,"clientHeight")}}return{width:e,height:i,maxWidth:n||cr,maxHeight:s||cr}}const mo=t=>Math.round(t*10)/10;function nw(t,e,i,n){const s=Rr(t),o=Tn(s,"margin"),r=hr(s.maxWidth,t,"clientWidth")||cr,a=hr(s.maxHeight,t,"clientHeight")||cr,l=iw(t,e,i);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=Tn(s,"border","width"),p=Tn(s,"padding");c-=p.width+d.width,u-=p.height+d.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=mo(Math.min(c,r,l.maxWidth)),u=mo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=mo(c/2)),(e!==void 0||i!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=mo(Math.floor(u*n))),{width:c,height:u}}function ku(t,e,i){const n=e||1,s=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const r=t.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(t.currentDevicePixelRatio=n,r.height=s,r.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const sw=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function Cu(t,e){const i=ZS(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function wn(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function ow(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:n==="middle"?i<.5?t.y:e.y:n==="after"?i<1?t.y:e.y:i>0?e.y:t.y}}function rw(t,e,i,n){const s={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=wn(t,s,i),a=wn(s,o,i),l=wn(o,e,i),c=wn(r,a,i),u=wn(a,l,i);return wn(c,u,i)}const aw=function(t,e){return{x(i){return t+t+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},lw=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Yn(t,e,i){return t?aw(e,i):lw()}function Mf(t,e){let i,n;(e==="ltr"||e==="rtl")&&(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Tf(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Bf(t){return t==="angle"?{between:Gs,compare:cS,normalize:Zt}:{between:Hi,compare:(e,i)=>e-i,normalize:e=>e}}function Pu({start:t,end:e,count:i,loop:n,style:s}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i===0,style:s}}function cw(t,e,i){const{property:n,start:s,end:o}=i,{between:r,normalize:a}=Bf(n),l=e.length;let{start:c,end:u,loop:h}=t,d,p;if(h){for(c+=l,u+=l,d=0,p=l;d<p&&r(a(e[c%l][n]),s,o);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function Rf(t,e,i){if(!i)return[t];const{property:n,start:s,end:o}=i,r=e.length,{compare:a,between:l,normalize:c}=Bf(n),{start:u,end:h,loop:d,style:p}=cw(t,e,i),_=[];let b=!1,v=null,y,w,E;const x=()=>l(s,E,y)&&a(s,E)!==0,k=()=>a(o,y)===0||l(o,E,y),B=()=>b||x(),H=()=>!b||k();for(let G=u,te=u;G<=h;++G)w=e[G%r],!w.skip&&(y=c(w[n]),y!==E&&(b=l(y,s,o),v===null&&B()&&(v=a(y,s)===0?G:te),v!==null&&H()&&(_.push(Pu({start:v,end:G,loop:d,count:r,style:p})),v=null),te=G,E=y));return v!==null&&_.push(Pu({start:v,end:h,loop:d,count:r,style:p})),_}function Df(t,e){const i=[],n=t.segments;for(let s=0;s<n.length;s++){const o=Rf(n[s],t.points,e);o.length&&i.push(...o)}return i}function uw(t,e,i,n){let s=0,o=e-1;if(i&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,i&&(o+=s);o>s&&t[o%e].skip;)o--;return o%=e,{start:s,end:o}}function hw(t,e,i,n){const s=t.length,o=[];let r=e,a=t[e],l;for(l=e+1;l<=i;++l){const c=t[l%s];c.skip||c.stop?a.skip||(n=!1,o.push({start:e%s,end:(l-1)%s,loop:n}),e=r=c.stop?l:null):(r=l,a.skip&&(e=l)),a=c}return r!==null&&o.push({start:e%s,end:r%s,loop:n}),o}function dw(t,e){const i=t.points,n=t.options.spanGaps,s=i.length;if(!s)return[];const o=!!t._loop,{start:r,end:a}=uw(i,s,o,n);if(n===!0)return Mu(t,[{start:r,end:a,loop:o}],i,e);const l=a<r?a+s:a,c=!!t._fullLoop&&r===0&&a===s-1;return Mu(t,hw(i,r,l,c),i,e)}function Mu(t,e,i,n){return!n||!n.setContext||!i?e:fw(t,e,i,n)}function fw(t,e,i,n){const s=t._chart.getContext(),o=Tu(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=i.length,c=[];let u=o,h=e[0].start,d=h;function p(_,b,v,y){const w=a?-1:1;if(_!==b){for(_+=l;i[_%l].skip;)_-=w;for(;i[b%l].skip;)b+=w;_%l!==b%l&&(c.push({start:_%l,end:b%l,loop:v,style:y}),u=y,h=b%l)}}for(const _ of e){h=a?h:_.start;let b=i[h%l],v;for(d=h+1;d<=_.end;d++){const y=i[d%l];v=Tu(n.setContext(hn(s,{type:"segment",p0:b,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:r}))),pw(v,u)&&p(h,d-1,_.loop,u),b=y,u=v}h<d-1&&p(h,d-1,_.loop,u)}return c}function Tu(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function pw(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}/*!
 * Chart.js v4.1.2
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class gw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,n,s){const o=i.listeners[s],r=i.duration;o.forEach(a=>a({chart:e,initial:i.initial,numSteps:r,currentStep:Math.min(n-i.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=gf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,e,"progress")),o.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),i+=o.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){const i=this._charts;let n=i.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,n)),n}listen(e,i,n){this._getAnims(e).listeners[i].push(n)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){const i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){const i=this._charts.get(e);if(!i||!i.items.length)return;const n=i.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ri=new gw;const Bu="transparent",mw={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const n=wu(t||Bu),s=n.valid&&wu(e||Bu);return s&&s.valid?s.mix(n,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class bw{constructor(e,i,n,s){const o=i[n];s=_s([e.to,s,o,e.from]);const r=_s([e.from,o,s]);this._active=!0,this._fn=e.fn||mw[e.type||typeof r],this._easing=Ps[e.easing]||Ps.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(e,i,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=_s([e.to,i,s,e.from]),this._from=_s([e.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const i=e-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=o;return}l=i/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((i,n)=>{e.push({res:i,rej:n})})}_notify(e){const i=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}}class Nf{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!De(e))return;const i=Object.keys(ft.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!De(o))return;const r={};for(const a of i)r[a]=o[a];(it(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(e,i){const n=i.options,s=yw(e,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&_w(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,i){const n=this._properties,s=[],o=e.$animations||(e.$animations={}),r=Object.keys(i),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,i));continue}const u=i[c];let h=o[c];const d=n.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}o[c]=h=new bw(d,e,c,u),s.push(h)}return s}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}const n=this._createAnimations(e,i);if(n.length)return Ri.add(this._chart,n),!0}}function _w(t,e){const i=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const o=t[n[s]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function yw(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Ru(t,e){const i=t&&t.options||{},n=i.reverse,s=i.min===void 0?e:0,o=i.max===void 0?e:0;return{start:n?o:s,end:n?s:o}}function vw(t,e,i){if(i===!1)return!1;const n=Ru(t,i),s=Ru(e,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function Sw(t){let e,i,n,s;return De(t)?(e=t.top,i=t.right,n=t.bottom,s=t.left):e=i=n=s=t,{top:e,right:i,bottom:n,left:s,disabled:t===!1}}function Of(t,e){const i=[],n=t._getSortedDatasetMetas(e);let s,o;for(s=0,o=n.length;s<o;++s)i.push(n[s].index);return i}function Du(t,e,i,n={}){const s=t.keys,o=n.mode==="single";let r,a,l,c;if(e!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===i){if(n.all)continue;break}c=t.values[l],ht(c)&&(o||e===0||ki(e)===ki(c))&&(e+=c)}return e}}function ww(t){const e=Object.keys(t),i=new Array(e.length);let n,s,o;for(n=0,s=e.length;n<s;++n)o=e[n],i[n]={x:o,y:t[o]};return i}function Nu(t,e){const i=t&&t.options.stacked;return i||i===void 0&&e.stack!==void 0}function Ew(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function Aw(t){const{min:e,max:i,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function xw(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function Ou(t,e,i,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const o=t[s.index];if(i&&o>0||!i&&o<0)return s.index}return null}function Lu(t,e){const{chart:i,_cachedMeta:n}=t,s=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=Ew(o,r,n),h=e.length;let d;for(let p=0;p<h;++p){const _=e[p],{[l]:b,[c]:v}=_,y=_._stacks||(_._stacks={});d=y[c]=xw(s,u,b),d[a]=v,d._top=Ou(d,r,!0,n.type),d._bottom=Ou(d,r,!1,n.type);const w=d._visualValues||(d._visualValues={});w[a]=v}}function oa(t,e){const i=t.scales;return Object.keys(i).filter(n=>i[n].axis===e).shift()}function Iw(t,e){return hn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function kw(t,e,i){return hn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function ls(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const s of e){const o=s._stacks;if(!o||o[n]===void 0||o[n][i]===void 0)return;delete o[n][i],o[n]._visualValues!==void 0&&o[n]._visualValues[i]!==void 0&&delete o[n]._visualValues[i]}}}const ra=t=>t==="reset"||t==="none",Fu=(t,e)=>e?t:Object.assign({},t),Cw=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Of(i,!0),values:null};class mi{constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Nu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ls(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(h,d,p,_)=>h==="x"?d:h==="r"?_:p,o=i.xAxisID=Ie(n.xAxisID,oa(e,"x")),r=i.yAxisID=Ie(n.yAxisID,oa(e,"y")),a=i.rAxisID=Ie(n.rAxisID,oa(e,"r")),l=i.indexAxis,c=i.iAxisID=s(l,o,r,a),u=i.vAxisID=s(l,r,o,a);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yu(this._data,this),e._stacked&&ls(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),n=this._data;if(De(i))this._data=ww(i);else if(n!==i){if(n){yu(n,this);const s=this._cachedMeta;ls(s),s._parsed=[]}i&&Object.isExtensible(i)&&fS(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=Nu(i.vScale,i),i.stack!==n.stack&&(s=!0,ls(i),i.stack=n.stack),this._resyncElements(e),(s||o!==i._stacked)&&Lu(this,i._parsed)}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=e===0&&i===s.length?!0:n._sorted,c=e>0&&n._parsed[e-1],u,h,d;if(this._parsing===!1)n._parsed=s,n._sorted=!0,d=s;else{it(s[e])?d=this.parseArrayData(n,s,e,i):De(s[e])?d=this.parseObjectData(n,s,e,i):d=this.parsePrimitiveData(n,s,e,i);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<i;++u)n._parsed[u+e]=h=d[u],l&&(p()&&(l=!1),c=h);n._sorted=l}r&&Lu(this,d)}parsePrimitiveData(e,i,n,s){const{iScale:o,vScale:r}=e,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,h=new Array(s);let d,p,_;for(d=0,p=s;d<p;++d)_=d+n,h[d]={[a]:u||o.parse(c[_],_),[l]:r.parse(i[_],_)};return h}parseArrayData(e,i,n,s){const{xScale:o,yScale:r}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+n,h=i[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(e,i,n,s){const{xScale:o,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,d,p;for(u=0,h=s;u<h;++u)d=u+n,p=i[d],c[u]={x:o.parse(an(p,a),d),y:r.parse(an(p,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,n){const s=this.chart,o=this._cachedMeta,r=i[e.axis],a={keys:Of(s,!0),values:i._stacks[e.axis]._visualValues};return Du(a,r,o.index,{mode:n})}updateRangeFromParsed(e,i,n,s){const o=n[i.axis];let r=o===null?NaN:o;const a=s&&n._stacks[i.axis];s&&a&&(s.values=a,r=Du(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,i){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&e===n.iScale,r=s.length,a=this._getOtherScale(e),l=Cw(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Aw(a);let d,p;function _(){p=s[d];const b=p[a.axis];return!ht(p[e.axis])||u>b||h<b}for(d=0;d<r&&!(!_()&&(this.updateRangeFromParsed(c,e,p,l),o));++d);if(o){for(d=r-1;d>=0;--d)if(!_()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const i=this._cachedMeta._parsed,n=[];let s,o,r;for(s=0,o=i.length;s<o;++s)r=i[s][e.axis],ht(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,n=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=Sw(Ie(this.options.clip,vw(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],o=i.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,o,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?r.push(h):h.draw(e,o))}for(u=0;u<r.length;++u)r[u].draw(e,o)}getStyle(e,i){const n=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,i,n){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];o=r.$context||(r.$context=kw(this.getContext(),e,r)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=Iw(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",n){const s=i==="active",o=this._cachedDataOpts,r=e+"-"+i,a=o[r],l=this.enableOptionSharing&&ui(n);if(a)return Fu(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),p=Object.keys(ft.elements[e]),_=()=>this.getContext(n,s,i),b=c.resolveNamedOptions(d,p,_,h);return b.$shared&&(b.$shared=l,o[r]=Object.freeze(Fu(b,l))),b}_resolveAnimations(e,i,n){const s=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,i),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,n,i))}const c=new Nf(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||ra(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const n=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,n),{sharedOptions:o,includeOptions:r}}updateElement(e,i,n,s){ra(s)?Object.assign(e,n):this._resolveAnimations(i,s).update(e,n)}updateSharedOptions(e,i,n){e&&!ra(i)&&this._resolveAnimations(void 0,i).update(e,n)}_setStyle(e,i,n,s){e.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,i,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=n.length,o=i.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,n=!0){const s=this._cachedMeta,o=s.data,r=e+i;let a;const l=c=>{for(c.length+=i,a=c.length-1;a>=r;a--)c[a]=c[a-i]};for(l(o),a=e;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,i),n&&this.updateElements(o,e,i,"reset")}updateElements(e,i,n,s){}_removeElements(e,i){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,i);n._stacked&&ls(n,s)}n.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,n,s]=e;this[i](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}M(mi,"defaults",{}),M(mi,"datasetElementType",null),M(mi,"dataElementType",null);function Pw(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let s=0,o=i.length;s<o;s++)n=n.concat(i[s].controller.getAllParsedValues(t));t._cache.$bar=pf(n.sort((s,o)=>s-o))}return t._cache.$bar}function Mw(t){const e=t.iScale,i=Pw(e,t.type);let n=e._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(ui(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(s=0,o=i.length;s<o;++s)r=e.getPixelForValue(i[s]),l();for(a=void 0,s=0,o=e.ticks.length;s<o;++s)r=e.getPixelForTick(s),l();return n}function Tw(t,e,i,n){const s=i.barThickness;let o,r;return $e(s)?(o=e.min*i.categoryPercentage,r=i.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:e.pixels[t]-o/2}}function Bw(t,e,i,n){const s=e.pixels,o=s[t];let r=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=i.categoryPercentage;r===null&&(r=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:i.barPercentage,start:c}}function Rw(t,e,i,n){const s=i.parse(t[0],n),o=i.parse(t[1],n),r=Math.min(s,o),a=Math.max(s,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),e[i.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function Lf(t,e,i,n){return it(t)?Rw(t,e,i,n):e[i.axis]=i.parse(t,n),e}function $u(t,e,i,n){const s=t.iScale,o=t.vScale,r=s.getLabels(),a=s===o,l=[];let c,u,h,d;for(c=i,u=i+n;c<u;++c)d=e[c],h={},h[s.axis]=a||s.parse(r[c],c),l.push(Lf(d,h,o,c));return l}function aa(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Dw(t,e,i){return t!==0?ki(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function Nw(t){let e,i,n,s,o;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(s="end",o="start"):(s="start",o="end"),{start:i,end:n,reverse:e,top:s,bottom:o}}function Ow(t,e,i,n){let s=e.borderSkipped;const o={};if(!s){t.borderSkipped=o;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=Nw(t);s==="middle"&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=u:(o[Hu(u,r,a,l)]=!0,s=c)),o[Hu(s,r,a,l)]=!0,t.borderSkipped=o}function Hu(t,e,i,n){return n?(t=Lw(t,e,i),t=Uu(t,i,e)):t=Uu(t,e,i),t}function Lw(t,e,i){return t===e?i:t===i?e:t}function Uu(t,e,i){return t==="start"?e:t==="end"?i:t}function Fw(t,{inflateAmount:e},i){t.inflateAmount=e==="auto"?i===1?.33:0:e}class Ro extends mi{parsePrimitiveData(e,i,n,s){return $u(e,i,n,s)}parseArrayData(e,i,n,s){return $u(e,i,n,s)}parseObjectData(e,i,n,s){const{iScale:o,vScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let d,p,_,b;for(d=n,p=n+s;d<p;++d)b=i[d],_={},_[o.axis]=o.parse(an(b,c),d),h.push(Lf(an(b,u),_,r,d));return h}updateRangeFromParsed(e,i,n,s){super.updateRangeFromParsed(e,i,n,s);const o=n._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:n,vScale:s}=i,o=this.getParsed(e),r=o._custom,a=aa(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,n,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(i,s);for(let p=i;p<i+n;p++){const _=this.getParsed(p),b=o||$e(_[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,u),y=(_._stacks||{})[a.axis],w={horizontal:c,base:b.base,enableBorderRadius:!y||aa(_._custom)||r===y._top||r===y._bottom,x:c?b.head:v.center,y:c?v.center:b.head,height:c?v.size:Math.abs(b.size),width:c?Math.abs(b.size):v.size};d&&(w.options=h||this.resolveDataElementOptions(p,e[p].active?"active":s));const E=w.options||e[p].options;Ow(w,E,y,r),Fw(w,E,u.ratio),this.updateElement(e[p],p,w,s)}}_getStacks(e,i){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=n.options.stacked,r=[],a=l=>{const c=l.controller.getParsed(i),u=c&&c[l.vScale.axis];if($e(u)||isNaN(u))return!0};for(const l of s)if(!(i!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,n){const s=this._getStacks(e,n),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){const e=this.options,i=this._cachedMeta,n=i.iScale,s=[];let o,r;for(o=0,r=i.data.length;o<r;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=e.barThickness;return{min:a||Mw(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(e),c=l._custom,u=aa(c);let h=l[i.axis],d=0,p=n?this.applyStack(i,l,n):h,_,b;p!==h&&(d=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&ki(h)!==ki(c.barEnd)&&(d=0),d+=h);const v=!$e(o)&&!u?o:d;let y=i.getPixelForValue(v);if(this.chart.getDataVisibility(e)?_=i.getPixelForValue(d+p):_=y,b=_-y,Math.abs(b)<r){b=Dw(b,i,a)*r,h===a&&(y-=b/2);const w=i.getPixelForDecimal(0),E=i.getPixelForDecimal(1),x=Math.min(w,E),k=Math.max(w,E);y=Math.max(Math.min(y,k),x),_=y+b,n&&!u&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(_)-i.getValueForPixel(y))}if(y===i.getPixelForValue(a)){const w=ki(b)*i.getLineWidthForValue(a)/2;y+=w,b-=w}return{size:b,base:y,head:_,center:_+b/2}}_calculateBarIndexPixels(e,i){const n=i.scale,s=this.options,o=s.skipNull,r=Ie(s.maxBarThickness,1/0);let a,l;if(i.grouped){const c=o?this._getStackCount(e):i.stackCount,u=s.barThickness==="flex"?Bw(e,i,s,c):Tw(e,i,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(r,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,i=e.vScale,n=e.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&n[o].draw(this._ctx)}}M(Ro,"id","bar"),M(Ro,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),M(Ro,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Do extends mi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,n,s){const o=super.parsePrimitiveData(e,i,n,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(e,i,n,s){const o=super.parseArrayData(e,i,n,s);for(let r=0;r<o.length;r++){const a=i[n+r];o[r]._custom=Ie(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(e,i,n,s){const o=super.parseObjectData(e,i,n,s);for(let r=0;r<o.length;r++){const a=i[n+r];o[r]._custom=Ie(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let n=e.length-1;n>=0;--n)i=Math.max(i,e[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(e),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(i,s),u=r.axis,h=a.axis;for(let d=i;d<i+n;d++){const p=e[d],_=!o&&this.getParsed(d),b={},v=b[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(_[u]),y=b[h]=o?a.getBasePixel():a.getPixelForValue(_[h]);b.skip=isNaN(v)||isNaN(y),c&&(b.options=l||this.resolveDataElementOptions(d,p.active?"active":s),o&&(b.options.radius=0)),this.updateElement(p,d,b,s)}}resolveDataElementOptions(e,i){const n=this.getParsed(e);let s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=Ie(n&&n._custom,o),s}}M(Do,"id","bubble"),M(Do,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),M(Do,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function $w(t,e,i){let n=1,s=1,o=0,r=0;if(e<nt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),p=(E,x,k)=>Gs(E,a,l,!0)?1:Math.max(x,x*i,k,k*i),_=(E,x,k)=>Gs(E,a,l,!0)?-1:Math.min(x,x*i,k,k*i),b=p(0,c,h),v=p(dt,u,d),y=_(lt,c,h),w=_(lt+dt,u,d);n=(b-y)/2,s=(v-w)/2,o=-(b+y)/2,r=-(v+w)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}class kn extends mi{constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=l=>+n[l];if(De(n[e])){const{key:l="value"}=this._parsing;o=c=>+an(n[c],l)}let r,a;for(r=e,a=e+i;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return fi(this.options.rotation-90)}_getCircumference(){return fi(this.options.circumference)}_getRotationExtents(){let e=nt,i=-nt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+r)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:n}=i,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(Qv(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:p,offsetX:_,offsetY:b}=$w(h,u,l),v=(n.width-r)/d,y=(n.height-r)/p,w=Math.max(Math.min(v,y)/2,0),E=cf(this.options.radius,w),x=Math.max(E*l,0),k=(E-x)/this._getVisibleDatasetWeightTotal();this.offsetX=_*E,this.offsetY=b*E,s.total=this.calculateTotal(),this.outerRadius=E-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/nt)}updateElements(e,i,n,s){const o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=o&&c.animateScale,p=d?0:this.innerRadius,_=d?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(i,s);let y=this._getRotation(),w;for(w=0;w<i;++w)y+=this._circumference(w,o);for(w=i;w<i+n;++w){const E=this._circumference(w,o),x=e[w],k={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+E,circumference:E,outerRadius:_,innerRadius:p};v&&(k.options=b||this.resolveDataElementOptions(w,x.active?"active":s)),y+=E,this.updateElement(x,w,k,s)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let n=0,s;for(s=0;s<i.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?nt*(Math.abs(e)/i):0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=Qs(i._parsed[e],n.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0;const n=this.chart;let s,o,r,a,l;if(!e){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),e=r.data,a=r.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let n=0,s=e.length;n<s;++n){const o=this.resolveDataElementOptions(n);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(e){return Math.max(Ie(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}M(kn,"id","doughnut"),M(kn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),M(kn,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"}),M(kn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return i.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});class No extends mi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=i,r=this.chart._animationsDisabled;let{start:a,count:l}=bf(i,s,r);this._drawStart=a,this._drawCount=l,_f(i)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(i,s),d=r.axis,p=a.axis,{spanGaps:_,segment:b}=this.options,v=Qn(_)?_:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||s==="none",w=i+n,E=e.length;let x=i>0&&this.getParsed(i-1);for(let k=0;k<E;++k){const B=e[k],H=y?B:{};if(k<i||k>=w){H.skip=!0;continue}const G=this.getParsed(k),te=$e(G[p]),Y=H[d]=r.getPixelForValue(G[d],k),q=H[p]=o||te?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,G,l):G[p],k);H.skip=isNaN(Y)||isNaN(q)||te,H.stop=k>0&&Math.abs(G[d]-x[d])>v,b&&(H.parsed=G,H.raw=c.data[k]),h&&(H.options=u||this.resolveDataElementOptions(k,B.active?"active":s)),y||this.updateElement(B,k,H,s),x=G}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,n=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}M(No,"id","line"),M(No,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),M(No,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ts extends mi{constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=Qs(i._parsed[e].r,n.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,n,s){return kf.bind(this)(e,i,n,s)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,n=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/e.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,i,n,s){const o=s==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*lt;let p=d,_;const b=360/this.countVisibleElements();for(_=0;_<i;++_)p+=this._computeAngle(_,s,b);for(_=i;_<i+n;_++){const v=e[_];let y=p,w=p+this._computeAngle(_,s,b),E=r.getDataVisibility(_)?c.getDistanceFromCenterForValue(this.getParsed(_).r):0;p=w,o&&(l.animateScale&&(E=0),l.animateRotate&&(y=w=d));const x={x:u,y:h,innerRadius:0,outerRadius:E,startAngle:y,endAngle:w,options:this.resolveDataElementOptions(_,v.active?"active":s)};this.updateElement(v,_,x,s)}}countVisibleElements(){const e=this._cachedMeta;let i=0;return e.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,n){return this.chart.getDataVisibility(e)?fi(this.resolveDataElementOptions(e,i).angle||n):0}}M(Ts,"id","polarArea"),M(Ts,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),M(Ts,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return i.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Wa extends kn{}M(Wa,"id","pie"),M(Wa,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Oo extends mi{getLabelAndValue(e){const i=this._cachedMeta.vScale,n=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(e,i,n,s){return kf.bind(this)(e,i,n,s)}update(e){const i=this._cachedMeta,n=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(n.points=s,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(n,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,n,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let a=i;a<i+n;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:u.x,d=r?o.yCenter:u.y,p={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,p,s)}}}M(Oo,"id","radar"),M(Oo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),M(Oo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Lo extends mi{getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(e),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[e]||"",value:"("+a+", "+l+")"}}update(e){const i=this._cachedMeta,{data:n=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:r}=bf(i,n,s);if(this._drawStart=o,this._drawCount=r,_f(i)&&(o=0,r=n.length),this.options.showLine){const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}this.updateElements(n,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(u),d=this.includeOptions(s,h),p=r.axis,_=a.axis,{spanGaps:b,segment:v}=this.options,y=Qn(b)?b:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||s==="none";let E=i>0&&this.getParsed(i-1);for(let x=i;x<i+n;++x){const k=e[x],B=this.getParsed(x),H=w?k:{},G=$e(B[_]),te=H[p]=r.getPixelForValue(B[p],x),Y=H[_]=o||G?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,B,l):B[_],x);H.skip=isNaN(te)||isNaN(Y)||G,H.stop=x>0&&Math.abs(B[p]-E[p])>y,v&&(H.parsed=B,H.raw=c.data[x]),d&&(H.options=h||this.resolveDataElementOptions(x,k.active?"active":s)),w||this.updateElement(k,x,H,s),E=B}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=e.dataset,s=n.options&&n.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,r)/2}}M(Lo,"id","scatter"),M(Lo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),M(Lo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Hw=Object.freeze({__proto__:null,BarController:Ro,BubbleController:Do,DoughnutController:kn,LineController:No,PolarAreaController:Ts,PieController:Wa,RadarController:Oo,ScatterController:Lo});function bn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zl{static override(e){Object.assign(zl.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return bn()}parse(){return bn()}format(){return bn()}add(){return bn()}diff(){return bn()}startOf(){return bn()}endOf(){return bn()}}var Uw={_date:zl};function zw(t,e,i,n){const{controller:s,data:o,_sorted:r}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&r&&o.length){const l=a._reversePixels?hS:Ui;if(n){if(s._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(o,e,i-u),d=l(o,e,i+u);return{lo:h.lo,hi:d.hi}}}}else return l(o,e,i)}return{lo:0,hi:o.length-1}}function eo(t,e,i,n,s){const o=t.getSortedVisibleDatasetMetas(),r=i[e];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:h,hi:d}=zw(o[a],e,r,s);for(let p=h;p<=d;++p){const _=u[p];_.skip||n(_,c,p)}}}function Ww(t){const e=t.indexOf("x")!==-1,i=t.indexOf("y")!==-1;return function(n,s){const o=e?Math.abs(n.x-s.x):0,r=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function la(t,e,i,n,s){const o=[];return!s&&!t.isPointInArea(e)||eo(t,i,e,function(a,l,c){!s&&!Vs(a,t.chartArea,0)||a.inRange(e.x,e.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function Gw(t,e,i,n){let s=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:h}=df(r,{x:e.x,y:e.y});Gs(h,c,u)&&s.push({element:r,datasetIndex:a,index:l})}return eo(t,i,e,o),s}function Vw(t,e,i,n,s,o){let r=[];const a=Ww(i);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const p=u.inRange(e.x,e.y,s);if(n&&!p)return;const _=u.getCenterPoint(s);if(!(!!o||t.isPointInArea(_))&&!p)return;const v=a(e,_);v<l?(r=[{element:u,datasetIndex:h,index:d}],l=v):v===l&&r.push({element:u,datasetIndex:h,index:d})}return eo(t,i,e,c),r}function ca(t,e,i,n,s,o){return!o&&!t.isPointInArea(e)?[]:i==="r"&&!n?Gw(t,e,i,s):Vw(t,e,i,n,s,o)}function zu(t,e,i,n,s){const o=[],r=i==="x"?"inXRange":"inYRange";let a=!1;return eo(t,i,e,(l,c,u)=>{l[r](e[i],s)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),n&&!a?[]:o}var jw={evaluateInteractionItems:eo,modes:{index(t,e,i,n){const s=Sn(e,t),o=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?la(t,s,o,n,r):ca(t,s,o,!1,n,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,i,n){const s=Sn(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;let a=i.intersect?la(t,s,o,n,r):ca(t,s,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,i,n){const s=Sn(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;return la(t,s,o,n,r)},nearest(t,e,i,n){const s=Sn(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;return ca(t,s,o,i.intersect,n,r)},x(t,e,i,n){const s=Sn(e,t);return zu(t,s,"x",i.intersect,n)},y(t,e,i,n){const s=Sn(e,t);return zu(t,s,"y",i.intersect,n)}}};const Ff=["left","top","right","bottom"];function cs(t,e){return t.filter(i=>i.pos===e)}function Wu(t,e){return t.filter(i=>Ff.indexOf(i.pos)===-1&&i.box.axis===e)}function us(t,e){return t.sort((i,n)=>{const s=e?n:i,o=e?i:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function Kw(t){const e=[];let i,n,s,o,r,a;for(i=0,n=(t||[]).length;i<n;++i)s=t[i],{position:o,options:{stack:r,stackWeight:a=1}}=s,e.push({index:i,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return e}function qw(t){const e={};for(const i of t){const{stack:n,pos:s,stackWeight:o}=i;if(!n||!Ff.includes(s))continue;const r=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function Yw(t,e){const i=qw(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];const{fullSize:l}=a.box,c=i[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&e.availableWidth,a.height=s):(a.width=n,a.height=u?u*s:l&&e.availableHeight)}return i}function Xw(t){const e=Kw(t),i=us(e.filter(c=>c.box.fullSize),!0),n=us(cs(e,"left"),!0),s=us(cs(e,"right")),o=us(cs(e,"top"),!0),r=us(cs(e,"bottom")),a=Wu(e,"x"),l=Wu(e,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:cs(e,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function Gu(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function $f(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Jw(t,e,i,n){const{pos:s,box:o}=i,r=t.maxPadding;if(!De(s)){i.size&&(t[s]-=i.size);const h=n[i.stack]||{size:0,count:1};h.size=Math.max(h.size,i.horizontal?o.height:o.width),i.size=h.size/h.count,t[s]+=i.size}o.getPadding&&$f(r,o.getPadding());const a=Math.max(0,e.outerWidth-Gu(r,t,"left","right")),l=Math.max(0,e.outerHeight-Gu(r,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:c,other:u}:{same:u,other:c}}function Zw(t){const e=t.maxPadding;function i(n){const s=Math.max(e[n]-t[n],0);return t[n]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function Qw(t,e){const i=e.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(e[r],i[r])}),o}return n(t?["left","right"]:["top","bottom"])}function ys(t,e,i,n){const s=[];let o,r,a,l,c,u;for(o=0,r=t.length,c=0;o<r;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,Qw(a.horizontal,e));const{same:h,other:d}=Jw(e,i,a,n);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&ys(s,e,i,n)||u}function bo(t,e,i,n,s){t.top=i,t.left=e,t.right=e+n,t.bottom=i+s,t.width=n,t.height=s}function Vu(t,e,i,n){const s=i.padding;let{x:o,y:r}=e;for(const a of t){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;ui(c.start)&&(r=c.start),l.fullSize?bo(l,s.left,r,i.outerWidth-s.right-s.left,d):bo(l,e.left+c.placed,r,h,d),c.start=r,c.placed+=h,r=l.bottom}else{const h=e.h*u,d=c.size||l.width;ui(c.start)&&(o=c.start),l.fullSize?bo(l,o,s.top,d,i.outerHeight-s.bottom-s.top):bo(l,o,e.top+c.placed,d,h),c.start=o,c.placed+=h,o=l.right}}e.x=o,e.y=r}var Dt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;i!==-1&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const s=Nt(t.options.layout.padding),o=Math.max(e-s.width,0),r=Math.max(i-s.height,0),a=Xw(t.boxes),l=a.vertical,c=a.horizontal;Ke(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:i,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),d=Object.assign({},s);$f(d,Nt(n));const p=Object.assign({maxPadding:d,w:o,h:r,x:s.left,y:s.top},s),_=Yw(l.concat(c),h);ys(a.fullSize,p,h,_),ys(l,p,h,_),ys(c,p,h,_)&&ys(l,p,h,_),Zw(p),Vu(a.leftAndTop,p,h,_),p.x+=p.w,p.y+=p.h,Vu(a.rightAndBottom,p,h,_),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ke(a.chartArea,b=>{const v=b.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Hf{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,n){}removeEventListener(e,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,n,s){return i=Math.max(0,i||e.width),n=n||e.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(e){return!0}updateConfig(e){}}class eE extends Hf{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Fo="$chartjs",tE={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ju=t=>t===null||t==="";function iE(t,e){const i=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[Fo]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",ju(s)){const o=Cu(t,"width");o!==void 0&&(t.width=o)}if(ju(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=Cu(t,"height");o!==void 0&&(t.height=o)}return t}const Uf=sw?{passive:!0}:!1;function nE(t,e,i){t.addEventListener(e,i,Uf)}function sE(t,e,i){t.canvas.removeEventListener(e,i,Uf)}function oE(t,e){const i=tE[t.type]||t.type,{x:n,y:s}=Sn(t,e);return{type:i,chart:e,native:t,x:n!==void 0?n:null,y:s!==void 0?s:null}}function dr(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function rE(t,e,i){const n=t.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||dr(a.addedNodes,n),r=r&&!dr(a.removedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function aE(t,e,i){const n=t.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||dr(a.removedNodes,n),r=r&&!dr(a.addedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ks=new Map;let Ku=0;function zf(){const t=window.devicePixelRatio;t!==Ku&&(Ku=t,Ks.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function lE(t,e){Ks.size||window.addEventListener("resize",zf),Ks.set(t,e)}function cE(t){Ks.delete(t),Ks.size||window.removeEventListener("resize",zf)}function uE(t,e,i){const n=t.canvas,s=n&&Ul(n);if(!s)return;const o=mf((a,l)=>{const c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(s),lE(t,o),r}function ua(t,e,i){i&&i.disconnect(),e==="resize"&&cE(t)}function hE(t,e,i){const n=t.canvas,s=mf(o=>{t.ctx!==null&&i(oE(o,t))},t);return nE(n,e,s),s}class dE extends Hf{acquireContext(e,i){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(iE(e,i),n):null}releaseContext(e){const i=e.canvas;if(!i[Fo])return!1;const n=i[Fo].initial;["height","width"].forEach(o=>{const r=n[o];$e(r)?i.removeAttribute(o):i.setAttribute(o,r)});const s=n.style||{};return Object.keys(s).forEach(o=>{i.style[o]=s[o]}),i.width=i.width,delete i[Fo],!0}addEventListener(e,i,n){this.removeEventListener(e,i);const s=e.$proxies||(e.$proxies={}),r={attach:rE,detach:aE,resize:uE}[i]||hE;s[i]=r(e,i,n)}removeEventListener(e,i){const n=e.$proxies||(e.$proxies={}),s=n[i];if(!s)return;({attach:ua,detach:ua,resize:ua}[i]||sE)(e,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,n,s){return nw(e,i,n,s)}isAttached(e){const i=Ul(e);return!!(i&&i.isConnected)}}function fE(t){return!Pf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?eE:dE}var xo;let ji=(xo=class{constructor(){M(this,"active",!1)}tooltipPosition(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}hasValue(){return Qn(this.x)&&Qn(this.y)}getProps(e,i){const n=this.$animations;if(!i||!n)return this;const s={};return e.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},M(xo,"defaults",{}),M(xo,"defaultRoutes"),xo);function pE(t,e){const i=t.options.ticks,n=gE(t),s=Math.min(i.maxTicksLimit||n,n),o=i.major.enabled?bE(e):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return _E(e,c,o,r/s),c;const u=mE(o,e,s);if(r>0){let h,d;const p=r>1?Math.round((l-a)/(r-1)):null;for(_o(e,c,u,$e(p)?0:a-p,a),h=0,d=r-1;h<d;h++)_o(e,c,u,o[h],o[h+1]);return _o(e,c,u,l,$e(p)?e.length:l+p),c}return _o(e,c,u),c}function gE(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),s=t._maxLength/i;return Math.floor(Math.min(n,s))}function mE(t,e,i){const n=yE(t),s=e.length/i;if(!n)return Math.max(s,1);const o=aS(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function bE(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}function _E(t,e,i,n){let s=0,o=i[0],r;for(n=Math.ceil(n),r=0;r<t.length;r++)r===o&&(e.push(t[r]),s++,o=i[s*n])}function _o(t,e,i,n,s){const o=Ie(n,0),r=Math.min(Ie(s,t.length),t.length);let a=0,l,c,u;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),u=o;u<0;)a++,u=Math.round(o+a*i);for(c=Math.max(o,0);c<r;c++)c===u&&(e.push(t[c]),a++,u=Math.round(o+a*i))}function yE(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}const vE=t=>t==="left"?"right":t==="right"?"left":t,qu=(t,e,i)=>e==="top"||e==="left"?t[e]+i:t[e]-i;function Yu(t,e){const i=[],n=t.length/e,s=t.length;let o=0;for(;o<s;o+=n)i.push(t[Math.floor(o)]);return i}function SE(t,e,i){const n=t.ticks.length,s=Math.min(e,n-1),o=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-o,r-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<o-a||l>r+a)))return l}function wE(t,e){Ke(t,i=>{const n=i.gc,s=n.length/2;let o;if(s>e){for(o=0;o<s;++o)delete i.data[n[o]];n.splice(0,s)}})}function hs(t){return t.drawTicks?t.tickLength:0}function Xu(t,e){if(!t.display)return 0;const i=_t(t.font,e),n=Nt(t.padding);return(it(t.text)?t.text.length:1)*i.lineHeight+n.height}function EE(t,e){return hn(t,{scale:e,type:"scale"})}function AE(t,e,i){return hn(t,{tick:i,index:e,type:"tick"})}function xE(t,e,i){let n=Ol(t);return(i&&e!=="right"||!i&&e==="right")&&(n=vE(n)),n}function IE(t,e,i,n){const{top:s,left:o,bottom:r,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,p,_;const b=r-s,v=a-o;if(t.isHorizontal()){if(p=Ct(n,o,a),De(i)){const y=Object.keys(i)[0],w=i[y];_=u[y].getPixelForValue(w)+b-e}else i==="center"?_=(c.bottom+c.top)/2+b-e:_=qu(t,i,e);d=a-o}else{if(De(i)){const y=Object.keys(i)[0],w=i[y];p=u[y].getPixelForValue(w)-v+e}else i==="center"?p=(c.left+c.right)/2-v+e:p=qu(t,i,e);_=Ct(n,r,s),h=i==="left"?-dt:dt}return{titleX:p,titleY:_,maxWidth:d,rotation:h}}class Dn extends ji{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return e=Xt(e,Number.POSITIVE_INFINITY),i=Xt(i,Number.NEGATIVE_INFINITY),n=Xt(n,Number.POSITIVE_INFINITY),s=Xt(s,Number.NEGATIVE_INFINITY),{min:Xt(e,n),max:Xt(i,s),minDefined:ht(e),maxDefined:ht(i)}}getMinMax(e){let{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,e),s||(i=Math.min(i,r.min)),o||(n=Math.max(n,r.max));return i=o&&i>n?n:i,n=s&&i>n?i:n,{min:Xt(i,Xt(n,i)),max:Xt(n,Xt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qe(this.options.beforeUpdate,[this])}update(e,i,n){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=NS(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Yu(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=pE(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,e=!e),this._startPixel=i,this._endPixel=n,this._reversePixels=e,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qe(this.options.afterUpdate,[this])}beforeSetDimensions(){Qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Qe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const i=this.options.ticks;let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n],o.label=Qe(i.callback,[o.value,n,e],this)}afterTickToLabelConversion(){Qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,i=e.ticks,n=this.ticks.length,s=i.minRotation||0,o=i.maxRotation;let r=s,a,l,c;if(!this._isVisible()||!i.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,p=wt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/n:p/(n-1),h+6>a&&(a=p/(n-(e.offset?.5:1)),l=this.maxHeight-hs(e.grid)-i.padding-Xu(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),r=Dl(Math.min(Math.asin(wt((u.highest.height+6)/a,-1,1)),Math.asin(wt(l/c,-1,1))-Math.asin(wt(d/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Xu(s,i.options.font);if(a?(e.width=this.maxWidth,e.height=hs(o)+l):(e.height=this.maxHeight,e.width=hs(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),p=n.padding*2,_=fi(this.labelRotation),b=Math.cos(_),v=Math.sin(_);if(a){const y=n.mirror?0:v*h.width+b*d.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{const y=n.mirror?0:b*h.width+v*d.height;e.width=Math.min(this.maxWidth,e.width+y+p)}this._calculatePadding(c,u,v,b)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,n,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,p=0;l?c?(d=s*e.width,p=n*i.height):(d=n*e.height,p=s*i.width):o==="start"?p=i.width:o==="end"?d=e.width:o!=="inner"&&(d=e.width/2,p=i.width/2),this.paddingLeft=Math.max((d-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+r)*this.width/(this.width-h),0)}else{let u=i.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=i.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,n;for(i=0,n=e.length;i<n;i++)$e(e[i].label)&&(e.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=Yu(n,i)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,i){const{ctx:n,_longestTextCache:s}=this,o=[],r=[];let a=0,l=0,c,u,h,d,p,_,b,v,y,w,E;for(c=0;c<i;++c){if(d=e[c].label,p=this._resolveTickFontOptions(c),n.font=_=p.string,b=s[_]=s[_]||{data:{},gc:[]},v=p.lineHeight,y=w=0,!$e(d)&&!it(d))y=ur(n,b.data,b.gc,y,d),w=v;else if(it(d))for(u=0,h=d.length;u<h;++u)E=d[u],!$e(E)&&!it(E)&&(y=ur(n,b.data,b.gc,y,E),w+=v);o.push(y),r.push(w),a=Math.max(y,a),l=Math.max(w,l)}wE(s,i);const x=o.indexOf(a),k=r.indexOf(l),B=H=>({width:o[H]||0,height:r[H]||0});return{first:B(0),last:B(i-1),widest:B(x),highest:B(k),widths:o,heights:r}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const i=this._startPixel+e*this._length;return uS(this._alignToPixels?mn(this.chart,i,0):i)}getDecimalForPixel(e){const i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){const i=this.ticks||[];if(e>=0&&e<i.length){const n=i[e];return n.$context||(n.$context=AE(this.getContext(),e,n))}return this.$context||(this.$context=EE(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,i=fi(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const i=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=hs(o),p=[],_=a.setContext(this.getContext()),b=_.display?_.width:0,v=b/2,y=function(Ae){return mn(n,Ae,b)};let w,E,x,k,B,H,G,te,Y,q,he,de;if(r==="top")w=y(this.bottom),H=this.bottom-d,te=w-v,q=y(e.top)+v,de=e.bottom;else if(r==="bottom")w=y(this.top),q=e.top,de=y(e.bottom)-v,H=w+v,te=this.top+d;else if(r==="left")w=y(this.right),B=this.right-d,G=w-v,Y=y(e.left)+v,he=e.right;else if(r==="right")w=y(this.left),Y=e.left,he=y(e.right)-v,B=w+v,G=this.left+d;else if(i==="x"){if(r==="center")w=y((e.top+e.bottom)/2+.5);else if(De(r)){const Ae=Object.keys(r)[0],Q=r[Ae];w=y(this.chart.scales[Ae].getPixelForValue(Q))}q=e.top,de=e.bottom,H=w+v,te=H+d}else if(i==="y"){if(r==="center")w=y((e.left+e.right)/2);else if(De(r)){const Ae=Object.keys(r)[0],Q=r[Ae];w=y(this.chart.scales[Ae].getPixelForValue(Q))}B=w-v,G=B-d,Y=e.left,he=e.right}const Oe=Ie(s.ticks.maxTicksLimit,h),xe=Math.max(1,Math.ceil(h/Oe));for(E=0;E<h;E+=xe){const Ae=this.getContext(E),Q=o.setContext(Ae),ee=a.setContext(Ae),oe=Q.lineWidth,Be=Q.color,ye=ee.dash||[],be=ee.dashOffset,ct=Q.tickWidth,ut=Q.tickColor,vt=Q.tickBorderDash||[],Je=Q.tickBorderDashOffset;x=SE(this,E,l),x!==void 0&&(k=mn(n,x,oe),c?B=G=Y=he=k:H=te=q=de=k,p.push({tx1:B,ty1:H,tx2:G,ty2:te,x1:Y,y1:q,x2:he,y2:de,width:oe,color:Be,borderDash:ye,borderDashOffset:be,tickWidth:ct,tickColor:ut,tickBorderDash:vt,tickBorderDashOffset:Je}))}return this._ticksLength=h,this._borderValue=w,p}_computeLabelItems(e){const i=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=o,d=hs(n.grid),p=d+u,_=h?-u:p,b=-fi(this.labelRotation),v=[];let y,w,E,x,k,B,H,G,te,Y,q,he,de="middle";if(s==="top")B=this.bottom-_,H=this._getXAxisLabelAlignment();else if(s==="bottom")B=this.top+_,H=this._getXAxisLabelAlignment();else if(s==="left"){const xe=this._getYAxisLabelAlignment(d);H=xe.textAlign,k=xe.x}else if(s==="right"){const xe=this._getYAxisLabelAlignment(d);H=xe.textAlign,k=xe.x}else if(i==="x"){if(s==="center")B=(e.top+e.bottom)/2+p;else if(De(s)){const xe=Object.keys(s)[0],Ae=s[xe];B=this.chart.scales[xe].getPixelForValue(Ae)+p}H=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")k=(e.left+e.right)/2-p;else if(De(s)){const xe=Object.keys(s)[0],Ae=s[xe];k=this.chart.scales[xe].getPixelForValue(Ae)}H=this._getYAxisLabelAlignment(d).textAlign}i==="y"&&(l==="start"?de="top":l==="end"&&(de="bottom"));const Oe=this._getLabelSizes();for(y=0,w=a.length;y<w;++y){E=a[y],x=E.label;const xe=o.setContext(this.getContext(y));G=this.getPixelForTick(y)+o.labelOffset,te=this._resolveTickFontOptions(y),Y=te.lineHeight,q=it(x)?x.length:1;const Ae=q/2,Q=xe.color,ee=xe.textStrokeColor,oe=xe.textStrokeWidth;let Be=H;r?(k=G,H==="inner"&&(y===w-1?Be=this.options.reverse?"left":"right":y===0?Be=this.options.reverse?"right":"left":Be="center"),s==="top"?c==="near"||b!==0?he=-q*Y+Y/2:c==="center"?he=-Oe.highest.height/2-Ae*Y+Y:he=-Oe.highest.height+Y/2:c==="near"||b!==0?he=Y/2:c==="center"?he=Oe.highest.height/2-Ae*Y:he=Oe.highest.height-q*Y,h&&(he*=-1),b!==0&&!xe.showLabelBackdrop&&(k+=Y/2*Math.sin(b))):(B=G,he=(1-q)*Y/2);let ye;if(xe.showLabelBackdrop){const be=Nt(xe.backdropPadding),ct=Oe.heights[y],ut=Oe.widths[y];let vt=he-be.top,Je=0-be.left;switch(de){case"middle":vt-=ct/2;break;case"bottom":vt-=ct;break}switch(H){case"center":Je-=ut/2;break;case"right":Je-=ut;break}ye={left:Je,top:vt,width:ut+be.width,height:ct+be.height,color:xe.backdropColor}}v.push({label:x,font:te,textOffset:he,options:{rotation:b,color:Q,strokeColor:ee,strokeWidth:oe,textAlign:Be,textBaseline:de,translation:[k,B],backdrop:ye}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:i}=this.options;if(-fi(this.labelRotation))return e==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:i,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=e+o,l=r.widest.width;let c,u;return i==="left"?s?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):i==="right"?s?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:i},left:n,top:s,width:o,height:r}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(n,s,o,r),e.restore())}getLineWidthForValue(e){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(o=0,r=s.length;o<r;++o){const l=s[o];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:i,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=mn(e,this.left,r)-r/2,u=mn(e,this.right,a)+a/2,h=d=l):(h=mn(e,this.top,r)-r/2,d=mn(e,this.bottom,a)+a/2,c=u=l),i.save(),i.lineWidth=o.width,i.strokeStyle=o.color,i.beginPath(),i.moveTo(c,h),i.lineTo(u,d),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Tr(n,s);const o=this.getLabelItems(e);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;Rn(n,c,0,u,l,a)}s&&Br(n)}drawTitle(){const{ctx:e,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;const o=_t(n.font),r=Nt(n.padding),a=n.align;let l=o.lineHeight/2;i==="bottom"||i==="center"||De(i)?(l+=r.bottom,it(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=IE(this,l,i,a);Rn(e,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:d,textAlign:xE(a,i,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,i=e.ticks&&e.ticks.z||0,n=Ie(e.grid&&e.grid.z,-1),s=Ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Dn.prototype.draw?[{z:i,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,r;for(o=0,r=i.length;o<r;++o){const a=i[o];a[n]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const i=this.options.ticks.setContext(this.getContext(e));return _t(i.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class yo{constructor(e,i,n){this.type=e,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const i=Object.getPrototypeOf(e);let n;PE(i)&&(n=this.register(i));const s=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,kE(e,r,n),this.override&&ft.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const i=this.items,n=e.id,s=this.scope;n in i&&delete i[n],s&&n in ft[s]&&(delete ft[s][n],this.override&&delete Bn[n])}}function kE(t,e,i){const n=Ws(Object.create(null),[i?ft.get(i):{},ft.get(e),t.defaults]);ft.set(e,n),t.defaultRoutes&&CE(e,t.defaultRoutes),t.descriptors&&ft.describe(e,t.descriptors)}function CE(t,e){Object.keys(e).forEach(i=>{const n=i.split("."),s=n.pop(),o=[t].concat(n).join("."),r=e[i].split("."),a=r.pop(),l=r.join(".");ft.route(o,s,l,a)})}function PE(t){return"id"in t&&"defaults"in t}class ME{constructor(){this.controllers=new yo(mi,"datasets",!0),this.elements=new yo(ji,"elements"),this.plugins=new yo(Object,"plugins"),this.scales=new yo(Dn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,n){[...i].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):Ke(s,r=>{const a=n||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,i,n){const s=Rl(e);Qe(n["before"+s],[],n),i[e](n),Qe(n["after"+s],[],n)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(e))return n}return this.plugins}_get(e,i,n){const s=i.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var Si=new ME;class TE{constructor(){this._init=[]}notify(e,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(o,e,i,n);return i==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,i,n,s){s=s||{};for(const o of e){const r=o.plugin,a=r[n],l=[i,s,o.options];if(Qe(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){$e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){const n=e&&e.config,s=Ie(n.options&&n.options.plugins,{}),o=BE(n);return s===!1&&!i?[]:DE(e,o,s,i)}_notifyStateChanges(e){const i=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),e,"stop"),this._notify(s(n,i),e,"start")}}function BE(t){const e={},i=[],n=Object.keys(Si.plugins.items);for(let o=0;o<n.length;o++)i.push(Si.getPlugin(n[o]));const s=t.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];i.indexOf(r)===-1&&(i.push(r),e[r.id]=!0)}return{plugins:i,localIds:e}}function RE(t,e){return!e&&t===!1?null:t===!0?{}:t}function DE(t,{plugins:e,localIds:i},n,s){const o=[],r=t.getContext();for(const a of e){const l=a.id,c=RE(n[l],s);c!==null&&o.push({plugin:a,options:NE(t.config,{plugin:a,local:i[l]},c,r)})}return o}function NE(t,{plugin:e,local:i},n,s){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(n,o);return i&&e.defaults&&r.push(e.defaults),t.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ga(t,e){const i=ft.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function OE(t,e){let i=t;return t==="_index_"?i=e:t==="_value_"&&(i=e==="x"?"y":"x"),i}function LE(t,e){return t===e?"_index_":"_value_"}function FE(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function fr(t,e){if(t==="x"||t==="y"||t==="r"||(t=e.axis||FE(e.position)||t.length>1&&fr(t[0].toLowerCase(),e),t))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function $E(t,e){const i=Bn[t.type]||{scales:{}},n=e.scales||{},s=Ga(t.type,e),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!De(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=fr(r,a),c=LE(l,s),u=i.scales||{};o[r]=ks(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||Ga(a,e),u=(Bn[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=OE(h,l),p=r[d+"AxisID"]||d;o[p]=o[p]||Object.create(null),ks(o[p],[{axis:d},n[p],u[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];ks(a,[ft.scales[a.type],ft.scale])}),o}function Wf(t){const e=t.options||(t.options={});e.plugins=Ie(e.plugins,{}),e.scales=$E(t,e)}function Gf(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function HE(t){return t=t||{},t.data=Gf(t.data),Wf(t),t}const Ju=new Map,Vf=new Set;function vo(t,e){let i=Ju.get(t);return i||(i=e(),Ju.set(t,i),Vf.add(i)),i}const ds=(t,e,i)=>{const n=an(e,i);n!==void 0&&t.add(n)};class UE{constructor(e){this._config=HE(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Gf(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Wf(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return vo(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return vo(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){const i=e.id,n=this.type;return vo(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){const n=this._scopeCache;let s=n.get(e);return(!s||i)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,i,n){const{options:s,type:o}=this,r=this._cachedScopes(e,n),a=r.get(i);if(a)return a;const l=new Set;i.forEach(u=>{e&&(l.add(e),u.forEach(h=>ds(l,e,h))),u.forEach(h=>ds(l,s,h)),u.forEach(h=>ds(l,Bn[o]||{},h)),u.forEach(h=>ds(l,ft,h)),u.forEach(h=>ds(l,Ua,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Vf.has(i)&&r.set(i,c),c}chartOptionScopes(){const{options:e,type:i}=this;return[e,Bn[i]||{},ft.datasets[i]||{},{type:i},ft,Ua]}resolveNamedOptions(e,i,n,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Zu(this._resolverCache,e,s);let l=r;if(WE(r,i)){o.$shared=!1,n=ln(n)?n():n;const c=this.createResolver(e,n,a);l=es(r,n,c)}for(const c of i)o[c]=l[c];return o}createResolver(e,i,n=[""],s){const{resolver:o}=Zu(this._resolverCache,e,n);return De(i)?es(o,i,void 0,s):o}}function Zu(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=i.join();let o=n.get(s);return o||(o={resolver:Fl(e,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}const zE=t=>De(t)&&Object.getOwnPropertyNames(t).reduce((e,i)=>e||ln(t[i]),!1);function WE(t,e){const{isScriptable:i,isIndexable:n}=Ef(t);for(const s of e){const o=i(s),r=n(s),a=(r||o)&&t[s];if(o&&(ln(a)||zE(a))||r&&it(a))return!0}return!1}var GE="4.1.2";const VE=["top","bottom","left","right","chartArea"];function Qu(t,e){return t==="top"||t==="bottom"||VE.indexOf(t)===-1&&e==="x"}function eh(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function th(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),Qe(i&&i.onComplete,[t],e)}function jE(t){const e=t.chart,i=e.options.animation;Qe(i&&i.onProgress,[t],e)}function jf(t){return Pf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const $o={},ih=t=>{const e=jf(t);return Object.values($o).filter(i=>i.canvas===e).pop()};function KE(t,e,i){const n=Object.keys(t);for(const s of n){const o=+s;if(o>=e){const r=t[s];delete t[s],(i>0||o>e)&&(t[o+i]=r)}}}function qE(t,e,i,n){return!i||t.type==="mouseout"?null:n?e:t}function YE(t){const{xScale:e,yScale:i}=t;if(e&&i)return{left:e.left,right:e.right,top:i.top,bottom:i.bottom}}class Li{static register(...e){Si.add(...e),nh()}static unregister(...e){Si.remove(...e),nh()}constructor(e,i){const n=this.config=new UE(i),s=jf(e),o=ih(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||fE(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Zv(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new TE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pS(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],$o[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ri.listen(this,"complete",th),Ri.listen(this,"progress",jE),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:n,height:s,_aspectRatio:o}=this;return $e(e)?i&&o?o:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Si}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ku(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Au(this.canvas,this.ctx),this}stop(){return Ri.stop(this),this}resize(e,i){Ri.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,i,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ku(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Qe(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Ke(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,i=e.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];i&&(o=o.concat(Object.keys(i).map(r=>{const a=i[r],l=fr(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ke(o,r=>{const a=r.options,l=a.id,c=fr(l,a),u=Ie(a.type,r.dtype);(a.position===void 0||Qu(a.position,c)!==Qu(r.dposition))&&(a.position=r.dposition),s[l]=!0;let h=null;if(l in n&&n[l].type===u)h=n[l];else{const d=Si.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,e)}),Ke(s,(r,a)=>{r||delete n[a]}),Ke(n,r=>{Dt.configure(this,r,r.options),Dt.addBox(this,r)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,n=e.length;if(e.sort((s,o)=>s.index-o.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);e.splice(i,n-i)}this._sortedMetasets=e.slice(0).sort(eh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((n,s)=>{i.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){const o=i[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||Ga(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=Si.getController(a),{datasetElementType:c,dataElementType:u}=ft.datasets[a];Object.assign(l,{dataElementType:Si.getElement(u),datasetElementType:c&&Si.getElement(c)}),r.controller=new l(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Ke(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(d),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||Ke(o,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(eh("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ke(this.scales,e=>{Dt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!gu(i,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of i){const r=n==="_removeElements"?-o:o;KE(e,s,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=o=>new Set(e.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<i;o++)if(!gu(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Dt.update(this,this.width,this.height,e);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],Ke(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,ln(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ri.has(this)?this.attached&&!Ri.running(this)&&Ri.start(this):(this.draw(),th({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resize(n,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,n=[];let s,o;for(s=0,o=i.length;s<o;++s){const r=i[s];(!e||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,n=e._clip,s=!n.disabled,o=YE(e)||this.chartArea,r={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Tr(i,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),e.controller.draw(),s&&Br(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Vs(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,n,s){const o=jw.modes[i];return typeof o=="function"?o(this,e,n,s):[]}getDatasetMeta(e){const i=this.data.datasets[e],n=this._metasets;let s=n.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=hn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(e,i){const n=this.getDatasetMeta(e);n.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,n){const s=n?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,s);ui(i)?(o.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Ri.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Au(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete $o[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,n=(o,r)=>{i.addEventListener(this,o,r),e[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Ke(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(i.removeEventListener(this,l,c),delete e[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():r()}unbindEvents(){Ke(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},Ke(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,n){const s=n?"set":"remove";let o,r,a,l;for(i==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],n=e.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!ar(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(e,i,n){return this._plugins.notify(this,e,i,n)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,n){const s=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(i,e),a=n?e:o(e,i);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,i){const n={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(e,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(e,i,n){const{_active:s=[],options:o}=this,r=i,a=this._getActiveElements(e,s,n,r),l=sS(e),c=qE(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Qe(o.onHover,[e,a,this],this),l&&Qe(o.onClick,[e,a,this],this));const u=!ar(a,s);return(u||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,u}_getActiveElements(e,i,n,s){if(e.type==="mouseout")return[];if(!n)return i;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}M(Li,"defaults",ft),M(Li,"instances",$o),M(Li,"overrides",Bn),M(Li,"registry",Si),M(Li,"version",GE),M(Li,"getChart",ih);function nh(){return Ke(Li.instances,t=>t._plugins.invalidate())}function XE(t,e,i){const{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(o,r,a,n-c,i+c),l>s?(c=s/l,t.arc(o,r,l,i+c,n-c,!0)):t.arc(o,r,s,i+dt,n-dt),t.closePath(),t.clip()}function JE(t){return Ll(t,["outerStart","outerEnd","innerStart","innerEnd"])}function ZE(t,e,i,n){const s=JE(t.options.borderRadius),o=(i-e)/2,r=Math.min(o,n*e/2),a=l=>{const c=(i-Math.min(o,l))*n/2;return wt(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:wt(s.innerStart,0,r),innerEnd:wt(s.innerEnd,0,r)}}function Ln(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function pr(t,e,i,n,s,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+n+i-c,0),d=u>0?u+n+i+c:0;let p=0;const _=s-l;if(n){const xe=u>0?u-n:0,Ae=h>0?h-n:0,Q=(xe+Ae)/2,ee=Q!==0?_*Q/(Q+n):_;p=(_-ee)/2}const b=Math.max(.001,_*h-i/lt)/h,v=(_-b)/2,y=l+v+p,w=s-v-p,{outerStart:E,outerEnd:x,innerStart:k,innerEnd:B}=ZE(e,d,h,w-y),H=h-E,G=h-x,te=y+E/H,Y=w-x/G,q=d+k,he=d+B,de=y+k/q,Oe=w-B/he;if(t.beginPath(),o){const xe=(te+Y)/2;if(t.arc(r,a,h,te,xe),t.arc(r,a,h,xe,Y),x>0){const oe=Ln(G,Y,r,a);t.arc(oe.x,oe.y,x,Y,w+dt)}const Ae=Ln(he,w,r,a);if(t.lineTo(Ae.x,Ae.y),B>0){const oe=Ln(he,Oe,r,a);t.arc(oe.x,oe.y,B,w+dt,Oe+Math.PI)}const Q=(w-B/d+(y+k/d))/2;if(t.arc(r,a,d,w-B/d,Q,!0),t.arc(r,a,d,Q,y+k/d,!0),k>0){const oe=Ln(q,de,r,a);t.arc(oe.x,oe.y,k,de+Math.PI,y-dt)}const ee=Ln(H,y,r,a);if(t.lineTo(ee.x,ee.y),E>0){const oe=Ln(H,te,r,a);t.arc(oe.x,oe.y,E,y-dt,te)}}else{t.moveTo(r,a);const xe=Math.cos(te)*h+r,Ae=Math.sin(te)*h+a;t.lineTo(xe,Ae);const Q=Math.cos(Y)*h+r,ee=Math.sin(Y)*h+a;t.lineTo(Q,ee)}t.closePath()}function QE(t,e,i,n,s){const{fullCircles:o,startAngle:r,circumference:a}=e;let l=e.endAngle;if(o){pr(t,e,i,n,l,s);for(let c=0;c<o;++c)t.fill();isNaN(a)||(l=r+(a%nt||nt))}return pr(t,e,i,n,l,s),t.fill(),l}function e8(t,e,i,n,s){const{fullCircles:o,startAngle:r,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=l.borderAlign==="inner";if(!c)return;h?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let d=e.endAngle;if(o){pr(t,e,i,n,d,s);for(let p=0;p<o;++p)t.stroke();isNaN(a)||(d=r+(a%nt||nt))}h&&XE(t,e,d),o||(pr(t,e,i,n,d,s),t.stroke())}class Ho extends ji{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,n){const s=this.getProps(["x","y"],n),{angle:o,distance:r}=df(s,{x:e,y:i}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=this.options.spacing/2,_=Ie(h,l-a)>=nt||Gs(o,a,l),b=Hi(r,c+d,u+d);return _&&b}getCenterPoint(e){const{x:i,y:n,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,u=(s+o)/2,h=(r+a+c+l)/2;return{x:i+Math.cos(u)*h,y:n+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:n}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,r=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>nt?Math.floor(n/nt):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(lt,n||0)),c=s*l;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,QE(e,this,c,o,r),e8(e,this,c,o,r),e.restore()}}M(Ho,"id","arc"),M(Ho,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),M(Ho,"defaultRoutes",{backgroundColor:"backgroundColor"});function Kf(t,e,i=e){t.lineCap=Ie(i.borderCapStyle,e.borderCapStyle),t.setLineDash(Ie(i.borderDash,e.borderDash)),t.lineDashOffset=Ie(i.borderDashOffset,e.borderDashOffset),t.lineJoin=Ie(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ie(i.borderWidth,e.borderWidth),t.strokeStyle=Ie(i.borderColor,e.borderColor)}function t8(t,e,i){t.lineTo(i.x,i.y)}function i8(t){return t.stepped?IS:t.tension||t.cubicInterpolationMode==="monotone"?kS:t8}function qf(t,e,i={}){const n=t.length,{start:s=0,end:o=n-1}=i,{start:r,end:a}=e,l=Math.max(s,r),c=Math.min(o,a),u=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!u?n+c-l:c-l}}function n8(t,e,i,n){const{points:s,options:o}=e,{count:r,start:a,loop:l,ilen:c}=qf(s,i,n),u=i8(o);let{move:h=!0,reverse:d}=n||{},p,_,b;for(p=0;p<=c;++p)_=s[(a+(d?c-p:p))%r],!_.skip&&(h?(t.moveTo(_.x,_.y),h=!1):u(t,b,_,d,o.stepped),b=_);return l&&(_=s[(a+(d?c:0))%r],u(t,b,_,d,o.stepped)),!!l}function s8(t,e,i,n){const s=e.points,{count:o,start:r,ilen:a}=qf(s,i,n),{move:l=!0,reverse:c}=n||{};let u=0,h=0,d,p,_,b,v,y;const w=x=>(r+(c?a-x:x))%o,E=()=>{b!==v&&(t.lineTo(u,v),t.lineTo(u,b),t.lineTo(u,y))};for(l&&(p=s[w(0)],t.moveTo(p.x,p.y)),d=0;d<=a;++d){if(p=s[w(d)],p.skip)continue;const x=p.x,k=p.y,B=x|0;B===_?(k<b?b=k:k>v&&(v=k),u=(h*u+x)/++h):(E(),t.lineTo(x,k),_=B,h=0,b=v=k),y=k}E()}function Va(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!i?s8:n8}function o8(t){return t.stepped?ow:t.tension||t.cubicInterpolationMode==="monotone"?rw:wn}function r8(t,e,i,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,i,n)&&s.closePath()),Kf(t,e.options),t.stroke(s)}function a8(t,e,i,n){const{segments:s,options:o}=e,r=Va(e);for(const a of s)Kf(t,o,a.style),t.beginPath(),r(t,e,a,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}const l8=typeof Path2D=="function";function c8(t,e,i,n){l8&&!e.options.segment?r8(t,e,i,n):a8(t,e,i,n)}class Zi extends ji{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;JS(this._points,n,e,s,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dw(this,this.options.segment))}first(){const e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){const e=this.segments,i=this.points,n=e.length;return n&&i[e[n-1].end]}interpolate(e,i){const n=this.options,s=e[i],o=this.points,r=Df(this,{property:i,start:s,end:s});if(!r.length)return;const a=[],l=o8(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:h,end:d}=r[c],p=o[h],_=o[d];if(p===_){a.push(p);continue}const b=Math.abs((s-p[i])/(_[i]-p[i])),v=l(p,_,b,n.stepped);v[i]=e[i],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,i,n){return Va(this)(e,this,i,n)}path(e,i,n){const s=this.segments,o=Va(this);let r=this._loop;i=i||0,n=n||this.points.length-i;for(const a of s)r&=o(e,this,a,{start:i,end:i+n-1});return!!r}draw(e,i,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),c8(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}M(Zi,"id","line"),M(Zi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),M(Zi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),M(Zi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function sh(t,e,i,n){const s=t.options,{[i]:o}=t.getProps([i],n);return Math.abs(e-o)<s.radius+s.hitRadius}class Uo extends ji{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,n){const s=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(e-o,2)+Math.pow(i-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return sh(this,e,"x",i)}inYRange(e,i){return sh(this,e,"y",i)}getCenterPoint(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const n=i&&e.borderWidth||0;return(i+n)*2}draw(e,i){const n=this.options;this.skip||n.radius<.1||!Vs(this,i,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,za(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}M(Uo,"id","point"),M(Uo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),M(Uo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Yf(t,e){const{x:i,y:n,base:s,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=r/2,a=Math.min(i,s),l=Math.max(i,s),c=n-h,u=n+h):(h=o/2,a=i-h,l=i+h,c=Math.min(n,s),u=Math.max(n,s)),{left:a,top:c,right:l,bottom:u}}function Qi(t,e,i,n){return t?0:wt(e,i,n)}function u8(t,e,i){const n=t.options.borderWidth,s=t.borderSkipped,o=wf(n);return{t:Qi(s.top,o.top,0,i),r:Qi(s.right,o.right,0,e),b:Qi(s.bottom,o.bottom,0,i),l:Qi(s.left,o.left,0,e)}}function h8(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,o=Mn(s),r=Math.min(e,i),a=t.borderSkipped,l=n||De(s);return{topLeft:Qi(!l||a.top||a.left,o.topLeft,0,r),topRight:Qi(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Qi(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Qi(!l||a.bottom||a.right,o.bottomRight,0,r)}}function d8(t){const e=Yf(t),i=e.right-e.left,n=e.bottom-e.top,s=u8(t,i/2,n/2),o=h8(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function ha(t,e,i,n){const s=e===null,o=i===null,a=t&&!(s&&o)&&Yf(t,n);return a&&(s||Hi(e,a.left,a.right))&&(o||Hi(i,a.top,a.bottom))}function f8(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function p8(t,e){t.rect(e.x,e.y,e.w,e.h)}function da(t,e,i={}){const n=t.x!==i.x?-e:0,s=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-n,r=(t.y+t.h!==i.y+i.h?e:0)-s;return{x:t.x+n,y:t.y+s,w:t.w+o,h:t.h+r,radius:t.radius}}class zo extends ji{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=d8(this),a=f8(r.radius)?js:p8;e.save(),(r.w!==o.w||r.h!==o.h)&&(e.beginPath(),a(e,da(r,i,o)),e.clip(),a(e,da(o,-i,r)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,da(o,i)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,i,n){return ha(this,e,i,n)}inXRange(e,i){return ha(this,e,null,i)}inYRange(e,i){return ha(this,null,e,i)}getCenterPoint(e){const{x:i,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(i+s)/2:i,y:o?n:(n+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}M(zo,"id","bar"),M(zo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),M(zo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var g8=Object.freeze({__proto__:null,ArcElement:Ho,LineElement:Zi,PointElement:Uo,BarElement:zo});const ja=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],oh=ja.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Xf(t){return ja[t%ja.length]}function Jf(t){return oh[t%oh.length]}function m8(t,e){return t.borderColor=Xf(e),t.backgroundColor=Jf(e),++e}function b8(t,e){return t.backgroundColor=t.data.map(()=>Xf(e++)),e}function _8(t,e){return t.backgroundColor=t.data.map(()=>Jf(e++)),e}function y8(t){let e=0;return(i,n)=>{const s=t.getDatasetMeta(n).controller;s instanceof kn?e=b8(i,e):s instanceof Ts?e=_8(i,e):s&&(e=m8(i,e))}}function rh(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var v8={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;const{options:{elements:n},data:{datasets:s}}=t.config;if(!i.forceOverride&&(rh(s)||n&&rh(n)))return;const o=y8(t);s.forEach(o)}};function S8(t,e,i,n,s){const o=s.samples||n;if(o>=i)return t.slice(e,e+i);const r=[],a=(i-2)/(o-2);let l=0;const c=e+i-1;let u=e,h,d,p,_,b;for(r[l++]=t[u],h=0;h<o-2;h++){let v=0,y=0,w;const E=Math.floor((h+1)*a)+1+e,x=Math.min(Math.floor((h+2)*a)+1,i)+e,k=x-E;for(w=E;w<x;w++)v+=t[w].x,y+=t[w].y;v/=k,y/=k;const B=Math.floor(h*a)+1+e,H=Math.min(Math.floor((h+1)*a)+1,i)+e,{x:G,y:te}=t[u];for(p=_=-1,w=B;w<H;w++)_=.5*Math.abs((G-v)*(t[w].y-te)-(G-t[w].x)*(y-te)),_>p&&(p=_,d=t[w],b=w);r[l++]=d,u=b}return r[l++]=t[c],r}function w8(t,e,i,n){let s=0,o=0,r,a,l,c,u,h,d,p,_,b;const v=[],y=e+i-1,w=t[e].x,x=t[y].x-w;for(r=e;r<e+i;++r){a=t[r],l=(a.x-w)/x*n,c=a.y;const k=l|0;if(k===u)c<_?(_=c,h=r):c>b&&(b=c,d=r),s=(o*s+a.x)/++o;else{const B=r-1;if(!$e(h)&&!$e(d)){const H=Math.min(h,d),G=Math.max(h,d);H!==p&&H!==B&&v.push({...t[H],x:s}),G!==p&&G!==B&&v.push({...t[G],x:s})}r>0&&B!==p&&v.push(t[B]),v.push(a),u=k,o=0,_=b=c,h=d=p=r}}return v}function Zf(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function ah(t){t.data.datasets.forEach(e=>{Zf(e)})}function E8(t,e){const i=e.length;let n=0,s;const{iScale:o}=t,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=wt(Ui(e,o.axis,r).lo,0,i-1)),c?s=wt(Ui(e,o.axis,a).hi+1,n,i)-n:s=i-n,{start:n,count:s}}var A8={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled){ah(t);return}const n=t.width;t.data.datasets.forEach((s,o)=>{const{_data:r,indexAxis:a}=s,l=t.getDatasetMeta(o),c=r||s.data;if(_s([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:d}=E8(l,c);const p=i.threshold||4*n;if(d<=p){Zf(s);return}$e(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let _;switch(i.algorithm){case"lttb":_=S8(c,h,d,n,i);break;case"min-max":_=w8(c,h,d,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=_})},destroy(t){ah(t)}};function x8(t,e,i){const n=t.segments,s=t.points,o=e.points,r=[];for(const a of n){let{start:l,end:c}=a;c=Wl(l,c,s);const u=Ka(i,s[l],s[c],a.loop);if(!e.segments){r.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=Df(e,u);for(const d of h){const p=Ka(i,o[d.start],o[d.end],d.loop),_=Rf(a,s,p);for(const b of _)r.push({source:b,target:d,start:{[i]:lh(u,p,"start",Math.max)},end:{[i]:lh(u,p,"end",Math.min)}})}}return r}function Ka(t,e,i,n){if(n)return;let s=e[t],o=i[t];return t==="angle"&&(s=Zt(s),o=Zt(o)),{property:t,start:s,end:o}}function I8(t,e){const{x:i=null,y:n=null}=t||{},s=e.points,o=[];return e.segments.forEach(({start:r,end:a})=>{a=Wl(r,a,s);const l=s[r],c=s[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):i!==null&&(o.push({x:i,y:l.y}),o.push({x:i,y:c.y}))}),o}function Wl(t,e,i){for(;e>t;e--){const n=i[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function lh(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function Qf(t,e){let i=[],n=!1;return it(t)?(n=!0,i=t):i=I8(t,e),i.length?new Zi({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function ch(t){return t&&t.fill!==!1}function k8(t,e,i){let s=t[e].fill;const o=[e];let r;if(!i)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!ht(s))return s;if(r=t[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function C8(t,e,i){const n=B8(t);if(De(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return ht(s)&&Math.floor(s)===s?P8(n[0],e,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function P8(t,e,i,n){return(t==="-"||t==="+")&&(i=e+i),i===e||i<0||i>=n?!1:i}function M8(t,e){let i=null;return t==="start"?i=e.bottom:t==="end"?i=e.top:De(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}function T8(t,e,i){let n;return t==="start"?n=i:t==="end"?n=e.options.reverse?e.min:e.max:De(t)?n=t.value:n=e.getBaseValue(),n}function B8(t){const e=t.options,i=e.fill;let n=Ie(i&&i.target,i);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function R8(t){const{scale:e,index:i,line:n}=t,s=[],o=n.segments,r=n.points,a=D8(e,i);a.push(Qf({x:null,y:e.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)N8(s,r[u],a)}return new Zi({points:s,options:{}})}function D8(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const o=n[s];if(o.index===e)break;o.hidden||i.unshift(o.dataset)}return i}function N8(t,e,i){const n=[];for(let s=0;s<i.length;s++){const o=i[s],{first:r,last:a,point:l}=O8(o,e,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(t.push(l),!a)break}}t.push(...n)}function O8(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const s=n[i],o=t.segments,r=t.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],h=r[u.start][i],d=r[u.end][i];if(Hi(s,h,d)){a=s===h,l=s===d;break}}return{first:a,last:l,point:n}}class ep{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,i,n){const{x:s,y:o,radius:r}=this;return i=i||{start:0,end:nt},e.arc(s,o,r,i.end,i.start,!0),!n.bounds}interpolate(e){const{x:i,y:n,radius:s}=this,o=e.angle;return{x:i+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}}function L8(t){const{chart:e,fill:i,line:n}=t;if(ht(i))return F8(e,i);if(i==="stack")return R8(t);if(i==="shape")return!0;const s=$8(t);return s instanceof ep?s:Qf(s,n)}function F8(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}function $8(t){return(t.scale||{}).getPointPositionForValue?U8(t):H8(t)}function H8(t){const{scale:e={},fill:i}=t,n=M8(i,e);if(ht(n)){const s=e.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function U8(t){const{scale:e,fill:i}=t,n=e.options,s=e.getLabels().length,o=n.reverse?e.max:e.min,r=T8(i,e,o),a=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,o);return new ep({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,r));return a}function fa(t,e,i){const n=L8(e),{line:s,scale:o,axis:r}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};n&&s.points.length&&(Tr(t,i),z8(t,{line:s,target:n,above:u,below:h,area:i,scale:o,axis:r}),Br(t))}function z8(t,e){const{line:i,target:n,above:s,below:o,area:r,scale:a}=e,l=i._loop?"angle":e.axis;t.save(),l==="x"&&o!==s&&(uh(t,n,r.top),hh(t,{line:i,target:n,color:s,scale:a,property:l}),t.restore(),t.save(),uh(t,n,r.bottom)),hh(t,{line:i,target:n,color:o,scale:a,property:l}),t.restore()}function uh(t,e,i){const{segments:n,points:s}=e;let o=!0,r=!1;t.beginPath();for(const a of n){const{start:l,end:c}=a,u=s[l],h=s[Wl(l,c,s)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,i),t.lineTo(u.x,u.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(h.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function hh(t,e){const{line:i,target:n,property:s,color:o,scale:r}=e,a=x8(i,n,s);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=o}={}}=l,p=n!==!0;t.save(),t.fillStyle=d,W8(t,r,p&&Ka(s,u,h)),t.beginPath();const _=!!i.pathSegment(t,l);let b;if(p){_?t.closePath():dh(t,n,h,s);const v=!!n.pathSegment(t,c,{move:_,reverse:!0});b=_&&v,b||dh(t,n,u,s)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function W8(t,e,i){const{top:n,bottom:s}=e.chart.chartArea,{property:o,start:r,end:a}=i||{};o==="x"&&(t.beginPath(),t.rect(r,n,a-r,s-n),t.clip())}function dh(t,e,i,n){const s=e.interpolate(i,n);s&&t.lineTo(s.x,s.y)}var G8={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,s=[];let o,r,a,l;for(r=0;r<n;++r)o=t.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Zi&&(l={visible:t.isDatasetVisible(r),index:r,fill:C8(a,r,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=k8(s,r,i.propagate))},beforeDraw(t,e,i){const n=i.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let r=s.length-1;r>=0;--r){const a=s[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&fa(t.ctx,a,o))}},beforeDatasetsDraw(t,e,i){if(i.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const o=n[s].$filler;ch(o)&&fa(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;!ch(n)||i.drawTime!=="beforeDatasetDraw"||fa(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const fh=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}},V8=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ph extends ji{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,n){this.maxWidth=e,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let i=Qe(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(n=>e.filter(n,this.chart.data))),e.sort&&(i=i.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=_t(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=fh(n,o);let c,u;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,i,n,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;o.textAlign="left",o.textBaseline="middle";let d=-1,p=-u;return this.legendItems.forEach((_,b)=>{const v=n+i/2+o.measureText(_.text).width;(b===0||c[c.length-1]+v+2*a>r)&&(h+=u,c[c.length-(b>0?0:1)]=0,p+=u,d++),l[b]={left:0,top:p,row:d,width:v,height:s},c[c.length-1]+=v+a}),h}_fitCols(e,i,n,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-e;let h=a,d=0,p=0,_=0,b=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:w,itemHeight:E}=j8(n,i,o,v,s);y>0&&p+E+2*a>u&&(h+=d+a,c.push({width:d,height:p}),_+=d+a,b++,d=p=0),l[y]={left:_,top:p,col:b,width:w,height:E},d=Math.max(d,w),p+=E+a}),h+=d,c.push({width:d,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:o}}=this,r=Yn(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ct(n,this.left+s,this.right-this.lineWidths[a]);for(const c of i)a!==c.row&&(a=c.row,l=Ct(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=Ct(n,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of i)c.col!==a&&(a=c.col,l=Ct(n,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Tr(e,this),this._draw(),Br(e)}}_draw(){const{options:e,columnSizes:i,lineWidths:n,ctx:s}=this,{align:o,labels:r}=e,a=ft.color,l=Yn(e.rtl,this.left,this.width),c=_t(r.font),{padding:u}=r,h=c.size,d=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:_,boxHeight:b,itemHeight:v}=fh(r,h),y=function(B,H,G){if(isNaN(_)||_<=0||isNaN(b)||b<0)return;s.save();const te=Ie(G.lineWidth,1);if(s.fillStyle=Ie(G.fillStyle,a),s.lineCap=Ie(G.lineCap,"butt"),s.lineDashOffset=Ie(G.lineDashOffset,0),s.lineJoin=Ie(G.lineJoin,"miter"),s.lineWidth=te,s.strokeStyle=Ie(G.strokeStyle,a),s.setLineDash(Ie(G.lineDash,[])),r.usePointStyle){const Y={radius:b*Math.SQRT2/2,pointStyle:G.pointStyle,rotation:G.rotation,borderWidth:te},q=l.xPlus(B,_/2),he=H+d;Sf(s,Y,q,he,r.pointStyleWidth&&_)}else{const Y=H+Math.max((h-b)/2,0),q=l.leftForLtr(B,_),he=Mn(G.borderRadius);s.beginPath(),Object.values(he).some(de=>de!==0)?js(s,{x:q,y:Y,w:_,h:b,radius:he}):s.rect(q,Y,_,b),s.fill(),te!==0&&s.stroke()}s.restore()},w=function(B,H,G){Rn(s,G.text,B,H+v/2,c,{strikethrough:G.hidden,textAlign:l.textAlign(G.textAlign)})},E=this.isHorizontal(),x=this._computeTitleHeight();E?p={x:Ct(o,this.left+u,this.right-n[0]),y:this.top+u+x,line:0}:p={x:this.left+u,y:Ct(o,this.top+x+u,this.bottom-i[0].height),line:0},Mf(this.ctx,e.textDirection);const k=v+u;this.legendItems.forEach((B,H)=>{s.strokeStyle=B.fontColor,s.fillStyle=B.fontColor;const G=s.measureText(B.text).width,te=l.textAlign(B.textAlign||(B.textAlign=r.textAlign)),Y=_+d+G;let q=p.x,he=p.y;l.setWidth(this.width),E?H>0&&q+Y+u>this.right&&(he=p.y+=k,p.line++,q=p.x=Ct(o,this.left+u,this.right-n[p.line])):H>0&&he+k>this.bottom&&(q=p.x=q+i[p.line].width+u,p.line++,he=p.y=Ct(o,this.top+x+u,this.bottom-i[p.line].height));const de=l.x(q);if(y(de,he,B),q=gS(te,q+_+d,E?q+Y:this.right,e.rtl),w(l.x(q),he,B),E)p.x+=Y+u;else if(typeof B.text!="string"){const Oe=c.lineHeight;p.y+=tp(B,Oe)}else p.y+=k}),Tf(this.ctx,e.textDirection)}drawTitle(){const e=this.options,i=e.title,n=_t(i.font),s=Nt(i.padding);if(!i.display)return;const o=Yn(e.rtl,this.left,this.width),r=this.ctx,a=i.position,l=n.size/2,c=s.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Ct(e.align,h,this.right-d);else{const _=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);u=c+Ct(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const p=Ct(a,h,h+d);r.textAlign=o.textAlign(Ol(a)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=n.string,Rn(r,i.text,p,u,n)}_computeTitleHeight(){const e=this.options.title,i=_t(e.font),n=Nt(e.padding);return e.display?i.lineHeight+n.height:0}_getLegendItemAt(e,i){let n,s,o;if(Hi(e,this.left,this.right)&&Hi(i,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],Hi(e,s.left,s.left+s.width)&&Hi(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const i=this.options;if(!Y8(e.type,i))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=V8(s,n);s&&!o&&Qe(i.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!o&&Qe(i.onHover,[e,n,this],this)}else n&&Qe(i.onClick,[e,n,this],this)}}function j8(t,e,i,n,s){const o=K8(n,t,e,i),r=q8(s,n,e.lineHeight);return{itemWidth:o,itemHeight:r}}function K8(t,e,i,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),e+i.size/2+n.measureText(s).width}function q8(t,e,i){let n=t;return typeof e.text!="string"&&(n=tp(e,i)),n}function tp(t,e){const i=t.text?t.text.length+.5:0;return e*i}function Y8(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var X8={id:"legend",_element:ph,start(t,e,i){const n=t.legend=new ph({ctx:t.ctx,options:i,chart:t});Dt.configure(t,n,i),Dt.addBox(t,n)},stop(t){Dt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;Dt.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(i?0:void 0),u=Nt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Gl extends ji{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;const s=it(n.text)?n.text.length:1;this._padding=Nt(n.padding);const o=s*_t(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:i,left:n,bottom:s,right:o,options:r}=this,a=r.align;let l=0,c,u,h;return this.isHorizontal()?(u=Ct(a,n,o),h=i+e,c=o-n):(r.position==="left"?(u=n+e,h=Ct(a,s,i),l=lt*-.5):(u=o-e,h=Ct(a,i,s),l=lt*.5),c=s-i),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,i=this.options;if(!i.display)return;const n=_t(i.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Rn(e,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:Ol(i.align),textBaseline:"middle",translation:[r,a]})}}function J8(t,e){const i=new Gl({ctx:t.ctx,options:e,chart:t});Dt.configure(t,i,e),Dt.addBox(t,i),t.titleBlock=i}var Z8={id:"title",_element:Gl,start(t,e,i){J8(t,i)},stop(t){const e=t.titleBlock;Dt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;Dt.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const So=new WeakMap;var Q8={id:"subtitle",start(t,e,i){const n=new Gl({ctx:t.ctx,options:i,chart:t});Dt.configure(t,n,i),Dt.addBox(t,n),So.set(t,n)},stop(t){Dt.removeBox(t,So.get(t)),So.delete(t)},beforeUpdate(t,e,i){const n=So.get(t);Dt.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vs={average(t){if(!t.length)return!1;let e,i,n=0,s=0,o=0;for(e=0,i=t.length;e<i;++e){const r=t[e].element;if(r&&r.hasValue()){const a=r.tooltipPosition();n+=a.x,s+=a.y,++o}}return{x:n/o,y:s/o}},nearest(t,e){if(!t.length)return!1;let i=e.x,n=e.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=t.length;o<r;++o){const l=t[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Ha(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function vi(t,e){return e&&(it(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Di(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function e4(t,e){const{element:i,datasetIndex:n,index:s}=e,o=t.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:t,label:r,parsed:o.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function gh(t,e){const i=t.chart.ctx,{body:n,footer:s,title:o}=t,{boxWidth:r,boxHeight:a}=e,l=_t(e.bodyFont),c=_t(e.titleFont),u=_t(e.footerFont),h=o.length,d=s.length,p=n.length,_=Nt(e.padding);let b=_.height,v=0,y=n.reduce((x,k)=>x+k.before.length+k.lines.length+k.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(b+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=p*x+(y-p)*l.lineHeight+(y-1)*e.bodySpacing}d&&(b+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let w=0;const E=function(x){v=Math.max(v,i.measureText(x).width+w)};return i.save(),i.font=c.string,Ke(t.title,E),i.font=l.string,Ke(t.beforeBody.concat(t.afterBody),E),w=e.displayColors?r+2+e.boxPadding:0,Ke(n,x=>{Ke(x.before,E),Ke(x.lines,E),Ke(x.after,E)}),w=0,i.font=u.string,Ke(t.footer,E),i.restore(),v+=_.width,{width:v,height:b}}function t4(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}function i4(t,e,i,n){const{x:s,width:o}=n,r=i.caretSize+i.caretPadding;if(t==="left"&&s+o+r>e.width||t==="right"&&s-o-r<0)return!0}function n4(t,e,i,n){const{x:s,width:o}=i,{width:r,chartArea:{left:a,right:l}}=t;let c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),i4(c,t,e,i)&&(c="center"),c}function mh(t,e,i){const n=i.yAlign||e.yAlign||t4(t,i);return{xAlign:i.xAlign||e.xAlign||n4(t,e,i,n),yAlign:n}}function s4(t,e){let{x:i,width:n}=t;return e==="right"?i-=n:e==="center"&&(i-=n/2),i}function o4(t,e,i){let{y:n,height:s}=t;return e==="top"?n+=i:e==="bottom"?n-=s+i:n-=s/2,n}function bh(t,e,i,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:l}=i,c=s+o,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=Mn(r);let _=s4(e,a);const b=o4(e,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(u,d)+s:a==="right"&&(_+=Math.max(h,p)+s),{x:wt(_,0,n.width-e.width),y:wt(b,0,n.height-e.height)}}function wo(t,e,i){const n=Nt(i.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function _h(t){return vi([],Di(t))}function r4(t,e,i){return hn(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function yh(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const ip={beforeTitle:Ti,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:Ti,beforeBody:Ti,beforeLabel:Ti,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return $e(i)||(e+=i),e},labelColor(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Ti,afterBody:Ti,beforeFooter:Ti,footer:Ti,afterFooter:Ti};function Gt(t,e,i,n){const s=t[e].call(i,n);return typeof s>"u"?ip[e].call(i,n):s}class qa extends ji{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,o=new Nf(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=r4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:n}=i,s=Gt(n,"beforeTitle",this,e),o=Gt(n,"title",this,e),r=Gt(n,"afterTitle",this,e);let a=[];return a=vi(a,Di(s)),a=vi(a,Di(o)),a=vi(a,Di(r)),a}getBeforeBody(e,i){return _h(Gt(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:n}=i,s=[];return Ke(e,o=>{const r={before:[],lines:[],after:[]},a=yh(n,o);vi(r.before,Di(Gt(a,"beforeLabel",this,o))),vi(r.lines,Gt(a,"label",this,o)),vi(r.after,Di(Gt(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(e,i){return _h(Gt(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:n}=i,s=Gt(n,"beforeFooter",this,e),o=Gt(n,"footer",this,e),r=Gt(n,"afterFooter",this,e);let a=[];return a=vi(a,Di(s)),a=vi(a,Di(o)),a=vi(a,Di(r)),a}_createItems(e){const i=this._active,n=this.chart.data,s=[],o=[],r=[];let a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(e4(this.chart,i[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,n))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,n))),Ke(a,u=>{const h=yh(e.callbacks,u);s.push(Gt(h,"labelColor",this,u)),o.push(Gt(h,"labelPointStyle",this,u)),r.push(Gt(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(e,i){const n=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=vs[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=gh(this,n),c=Object.assign({},a,l),u=mh(this.chart,n,c),h=bh(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,n,s){const o=this.getCaretPosition(e,n,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,n){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Mn(a),{x:d,y:p}=e,{width:_,height:b}=i;let v,y,w,E,x,k;return o==="center"?(x=p+b/2,s==="left"?(v=d,y=v-r,E=x+r,k=x-r):(v=d+_,y=v+r,E=x-r,k=x+r),w=v):(s==="left"?y=d+Math.max(l,u)+r:s==="right"?y=d+_-Math.max(c,h)-r:y=this.caretX,o==="top"?(E=p,x=E-r,v=y-r,w=y+r):(E=p+b,x=E+r,v=y+r,w=y-r),k=E),{x1:v,x2:y,x3:w,y1:E,y2:x,y3:k}}drawTitle(e,i,n){const s=this.title,o=s.length;let r,a,l;if(o){const c=Yn(n.rtl,this.x,this.width);for(e.x=wo(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",r=_t(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=r.string,l=0;l<o;++l)i.fillText(s[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===o&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,i,n,s,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c,boxPadding:u}=o,h=_t(o.bodyFont),d=wo(this,"left",o),p=s.x(d),_=l<h.lineHeight?(h.lineHeight-l)/2:0,b=i.y+_;if(o.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=s.leftForLtr(p,c)+c/2,w=b+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,za(e,v,y,w),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,za(e,v,y,w)}else{e.lineWidth=De(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const v=s.leftForLtr(p,c-u),y=s.leftForLtr(s.xPlus(p,1),c-u-2),w=Mn(r.borderRadius);Object.values(w).some(E=>E!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,js(e,{x:v,y:b,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),js(e,{x:y,y:b+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(v,b,c,l),e.strokeRect(v,b,c,l),e.fillStyle=r.backgroundColor,e.fillRect(y,b+1,c-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,i,n){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,h=_t(n.bodyFont);let d=h.lineHeight,p=0;const _=Yn(n.rtl,this.x,this.width),b=function(G){i.fillText(G,_.x(e.x+p),e.y+d/2),e.y+=d+o},v=_.textAlign(r);let y,w,E,x,k,B,H;for(i.textAlign=r,i.textBaseline="middle",i.font=h.string,e.x=wo(this,v,n),i.fillStyle=n.bodyColor,Ke(this.beforeBody,b),p=a&&v!=="right"?r==="center"?c/2+u:c+2+u:0,x=0,B=s.length;x<B;++x){for(y=s[x],w=this.labelTextColors[x],i.fillStyle=w,Ke(y.before,b),E=y.lines,a&&E.length&&(this._drawColorBox(i,e,x,_,n),d=Math.max(h.lineHeight,l)),k=0,H=E.length;k<H;++k)b(E[k]),d=h.lineHeight;Ke(y.after,b)}p=0,d=h.lineHeight,Ke(this.afterBody,b),e.y-=o}drawFooter(e,i,n){const s=this.footer,o=s.length;let r,a;if(o){const l=Yn(n.rtl,this.x,this.width);for(e.x=wo(this,n.footerAlign,n),e.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",r=_t(n.footerFont),i.fillStyle=n.footerColor,i.font=r.string,a=0;a<o;++a)i.fillText(s[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}drawBackground(e,i,n,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=e,{width:c,height:u}=n,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:_}=Mn(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+h,l),r==="top"&&this.drawCaret(e,i,n,s),i.lineTo(a+c-d,l),i.quadraticCurveTo(a+c,l,a+c,l+d),r==="center"&&o==="right"&&this.drawCaret(e,i,n,s),i.lineTo(a+c,l+u-_),i.quadraticCurveTo(a+c,l+u,a+c-_,l+u),r==="bottom"&&this.drawCaret(e,i,n,s),i.lineTo(a+p,l+u),i.quadraticCurveTo(a,l+u,a,l+u-p),r==="center"&&o==="left"&&this.drawCaret(e,i,n,s),i.lineTo(a,l+h),i.quadraticCurveTo(a,l,a+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const r=vs[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=gh(this,e),l=Object.assign({},r,this._size),c=mh(i,e,l),u=bh(e,l,c,i);(s._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=Nt(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,s,i),Mf(e,i.textDirection),o.y+=r.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),Tf(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const n=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!ar(n,s),r=this._positionChanged(s,i);(o||r)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(e,o,i,n),a=this._positionChanged(r,e),l=i||!ar(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),l}_getActiveElements(e,i,n,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return i;const r=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(e,i){const{caretX:n,caretY:s,options:o}=this,r=vs[o.position].call(this,e,i);return r!==!1&&(n!==r.x||s!==r.y)}}M(qa,"positioners",vs);var a4={id:"tooltip",_element:qa,positioners:vs,afterInit(t,e,i){i&&(t.tooltip=new qa({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ip},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},l4=Object.freeze({__proto__:null,Colors:v8,Decimation:A8,Filler:G8,Legend:X8,SubTitle:Q8,Title:Z8,Tooltip:a4});const c4=(t,e,i,n)=>(typeof e=="string"?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function u4(t,e,i,n){const s=t.indexOf(e);if(s===-1)return c4(t,e,i,n);const o=t.lastIndexOf(e);return s!==o?i:s}const h4=(t,e)=>t===null?null:wt(Math.round(t),0,e);function vh(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Ya extends Dn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:s,label:o}of i)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if($e(e))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===e?i:u4(n,e,Ie(i,e),this._addedLabels),h4(i,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,i=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=e===0&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=e;r<=i;r++)s.push({value:r});return s}getLabelForValue(e){return vh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}M(Ya,"id","category"),M(Ya,"defaults",{ticks:{callback:vh}});function d4(t,e){const i=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,p=o||1,_=u-1,{min:b,max:v}=e,y=!$e(r),w=!$e(a),E=!$e(c),x=(v-b)/(h+1);let k=bu((v-b)/_/p)*p,B,H,G,te;if(k<1e-14&&!y&&!w)return[{value:b},{value:v}];te=Math.ceil(v/k)-Math.floor(b/k),te>_&&(k=bu(te*k/_/p)*p),$e(l)||(B=Math.pow(10,l),k=Math.ceil(k*B)/B),s==="ticks"?(H=Math.floor(b/k)*k,G=Math.ceil(v/k)*k):(H=b,G=v),y&&w&&o&&lS((a-r)/o,k/1e3)?(te=Math.round(Math.min((a-r)/k,u)),k=(a-r)/te,H=r,G=a):E?(H=y?r:H,G=w?a:G,te=c-1,k=(G-H)/te):(te=(G-H)/k,Cs(te,Math.round(te),k/1e3)?te=Math.round(te):te=Math.ceil(te));const Y=Math.max(_u(k),_u(H));B=Math.pow(10,$e(l)?Y:l),H=Math.round(H*B)/B,G=Math.round(G*B)/B;let q=0;for(y&&(d&&H!==r?(i.push({value:r}),H<r&&q++,Cs(Math.round((H+q*k)*B)/B,r,Sh(r,x,t))&&q++):H<r&&q++);q<te;++q)i.push({value:Math.round((H+q*k)*B)/B});return w&&d&&G!==a?i.length&&Cs(i[i.length-1].value,a,Sh(a,x,t))?i[i.length-1].value=a:i.push({value:a}):(!w||G===a)&&i.push({value:G}),i}function Sh(t,e,{horizontal:i,minRotation:n}){const s=fi(n),o=(i?Math.sin(s):Math.cos(s))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}class gr extends Dn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return $e(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=i?s:l,a=l=>o=n?o:l;if(e){const l=ki(s),c=ki(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||r(s-l)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,i=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,r=d4(s,o);return e.bounds==="ticks"&&hf(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-i)/Math.max(e.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(e){return Qs(e,this.chart.options.locale,this.options.ticks.format)}}class Xa extends gr{determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=ht(e)?e:0,this.max=ht(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),i=e?this.width:this.height,n=fi(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}M(Xa,"id","linear"),M(Xa,"defaults",{ticks:{callback:Mr.formatters.numeric}});const qs=t=>Math.floor(Ji(t)),_n=(t,e)=>Math.pow(10,qs(t)+e);function wh(t){return t/Math.pow(10,qs(t))===1}function Eh(t,e,i){const n=Math.pow(10,i),s=Math.floor(t/n);return Math.ceil(e/n)-s}function f4(t,e){const i=e-t;let n=qs(i);for(;Eh(t,e,n)>10;)n++;for(;Eh(t,e,n)<10;)n--;return Math.min(n,qs(t))}function p4(t,{min:e,max:i}){e=Xt(t.min,e);const n=[],s=qs(e);let o=f4(e,i),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((e-l)*r)/r,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,o)),d=Xt(t.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;d<i;)n.push({value:d,major:wh(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),d=Math.round((l+u+h*Math.pow(10,o))*r)/r;const p=Xt(t.max,d);return n.push({value:p,major:wh(p),significand:h}),n}class Ja extends Dn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,i){const n=gr.prototype.parse.apply(this,[e,i]);if(n===0){this._zero=!0;return}return ht(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=ht(e)?Math.max(0,e):null,this.max=ht(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ht(this._userMin)&&(this.min=e===_n(this.min,0)?_n(this.min,-1):_n(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let n=this.min,s=this.max;const o=a=>n=e?n:a,r=a=>s=i?s:a;n===s&&(n<=0?(o(1),r(10)):(o(_n(n,-1)),r(_n(s,1)))),n<=0&&o(_n(s,-1)),s<=0&&r(_n(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,i={min:this._userMin,max:this._userMax},n=p4(i,this);return e.bounds==="ticks"&&hf(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Qs(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ji(e),this._valueRange=Ji(this.max)-Ji(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ji(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const i=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+i*this._valueRange)}}M(Ja,"id","logarithmic"),M(Ja,"defaults",{ticks:{callback:Mr.formatters.logarithmic,major:{enabled:!0}}});function Za(t){const e=t.ticks;if(e.display&&t.display){const i=Nt(e.backdropPadding);return Ie(e.font&&e.font.size,ft.font.size)+i.height}return 0}function g4(t,e,i){return i=it(i)?i:[i],{w:xS(t,e.string,i),h:i.length*e.lineHeight}}function Ah(t,e,i,n,s){return t===n||t===s?{start:e-i/2,end:e+i/2}:t<n||t>s?{start:e-i,end:e}:{start:e,end:e+i}}function m4(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),n=[],s=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?lt/o:0;for(let l=0;l<o;l++){const c=r.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=_t(c.font),d=g4(t.ctx,h,t._pointLabels[l]);n[l]=d;const p=Zt(t.getIndexAngle(l)+a),_=Math.round(Dl(p)),b=Ah(_,u.x,d.w,0,180),v=Ah(_,u.y,d.h,90,270);b4(i,e,p,b,v)}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=_4(t,n,s)}function b4(t,e,i,n,s){const o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/r,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function _4(t,e,i){const n=[],s=t._pointLabels.length,o=t.options,r=Za(o)/2,a=t.drawingArea,l=o.pointLabels.centerPointLabels?lt/s:0;for(let c=0;c<s;c++){const u=t.getPointPosition(c,a+r+i[c],l),h=Math.round(Dl(Zt(u.angle+dt))),d=e[c],p=S4(u.y,d.h,h),_=y4(h),b=v4(u.x,d.w,_);n.push({x:u.x,y:p,textAlign:_,left:b,top:p,right:b+d.w,bottom:p+d.h})}return n}function y4(t){return t===0||t===180?"center":t<180?"left":"right"}function v4(t,e,i){return i==="right"?t-=e:i==="center"&&(t-=e/2),t}function S4(t,e,i){return i===90||i===270?t-=e/2:(i>270||i<90)&&(t-=e),t}function w4(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let s=e-1;s>=0;s--){const o=n.setContext(t.getPointLabelContext(s)),r=_t(o.font),{x:a,y:l,textAlign:c,left:u,top:h,right:d,bottom:p}=t._pointLabelItems[s],{backdropColor:_}=o;if(!$e(_)){const b=Mn(o.borderRadius),v=Nt(o.backdropPadding);i.fillStyle=_;const y=u-v.left,w=h-v.top,E=d-u+v.width,x=p-h+v.height;Object.values(b).some(k=>k!==0)?(i.beginPath(),js(i,{x:y,y:w,w:E,h:x,radius:b}),i.fill()):i.fillRect(y,w,E,x)}Rn(i,t._pointLabels[s],a,l+r.lineHeight/2,r,{color:o.color,textAlign:c,textBaseline:"middle"})}}function np(t,e,i,n){const{ctx:s}=t;if(i)s.arc(t.xCenter,t.yCenter,e,0,nt);else{let o=t.getPointPosition(0,e);s.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=t.getPointPosition(r,e),s.lineTo(o.x,o.y)}}function E4(t,e,i,n,s){const o=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!n||!a||!l||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),np(t,i,r,n),o.closePath(),o.stroke(),o.restore())}function A4(t,e,i){return hn(t,{label:i,index:e,type:"pointLabel"})}class Ss extends gr{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Nt(Za(this.options)/2),i=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+i/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!1);this.min=ht(e)&&!isNaN(e)?e:0,this.max=ht(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Za(this.options))}generateTickLabels(e){gr.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((i,n)=>{const s=Qe(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?m4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,i,n,s){this.xCenter+=Math.floor((e-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,i,n,s))}getIndexAngle(e){const i=nt/(this._pointLabels.length||1),n=this.options.startAngle||0;return Zt(e*i+fi(n))}getDistanceFromCenterForValue(e){if($e(e))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*i:(e-this.min)*i}getValueForDistanceFromCenter(e){if($e(e))return NaN;const i=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(e){const i=this._pointLabels||[];if(e>=0&&e<i.length){const n=i[e];return A4(this.getContext(),e,n)}}getPointPosition(e,i,n=0){const s=this.getIndexAngle(e)-dt+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(e,i){return this.getPointPosition(e,this.getDistanceFromCenterForValue(i))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:i,top:n,right:s,bottom:o}=this._pointLabelItems[e];return{left:i,top:n,right:s,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:i}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),np(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,i=this.options,{angleLines:n,grid:s,border:o}=i,r=this._pointLabels.length;let a,l,c;if(i.pointLabels.display&&w4(this,r),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),p=s.setContext(d),_=o.setContext(d);E4(this,p,l,r,_)}}),n.display){for(e.save(),a=r-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!i.reverse)return;const c=n.setContext(this.getContext(l)),u=_t(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,r=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=Nt(c.backdropPadding);e.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}Rn(e,a.label,0,-o,u,{color:c.color})}),e.restore()}drawTitle(){}}M(Ss,"id","radialLinear"),M(Ss,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Mr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),M(Ss,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),M(Ss,"descriptors",{angleLines:{_fallback:"grid"}});const Dr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jt=Object.keys(Dr);function x4(t,e){return t-e}function xh(t,e){if($e(e))return null;const i=t._adapter,{parser:n,round:s,isoWeekday:o}=t._parseOpts;let r=e;return typeof n=="function"&&(r=n(r)),ht(r)||(r=typeof n=="string"?i.parse(r,n):i.parse(r)),r===null?null:(s&&(r=s==="week"&&(Qn(o)||o===!0)?i.startOf(r,"isoWeek",o):i.startOf(r,s)),+r)}function Ih(t,e,i,n){const s=jt.length;for(let o=jt.indexOf(t);o<s-1;++o){const r=Dr[jt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((i-e)/(a*r.size))<=n)return jt[o]}return jt[s-1]}function I4(t,e,i,n,s){for(let o=jt.length-1;o>=jt.indexOf(i);o--){const r=jt[o];if(Dr[r].common&&t._adapter.diff(s,n,r)>=e-1)return r}return jt[i?jt.indexOf(i):0]}function k4(t){for(let e=jt.indexOf(t)+1,i=jt.length;e<i;++e)if(Dr[jt[e]].common)return jt[e]}function kh(t,e,i){if(!i)t[e]=!0;else if(i.length){const{lo:n,hi:s}=Nl(i,e),o=i[n]>=e?i[n]:i[s];t[o]=!0}}function C4(t,e,i,n){const s=t._adapter,o=+s.startOf(e[0].value,n),r=e[e.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=i[a],l>=0&&(e[l].major=!0);return e}function Ch(t,e,i){const n=[],s={},o=e.length;let r,a;for(r=0;r<o;++r)a=e[r],s[a]=r,n.push({value:a,major:!1});return o===0||!i?n:C4(t,n,s,i)}class Ys extends Dn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const n=e.time||(e.time={}),s=this._adapter=new Uw._date(e.adapters.date);s.init(i),ks(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:xh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,n=e.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ht(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),o=ht(o)&&!isNaN(o)?o:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],n=e[e.length-1]),{min:i,max:n}}buildTicks(){const e=this.options,i=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=dS(s,o,r);return this._unit=i.unit||(n.autoSkip?Ih(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):I4(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:k4(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Ch(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,n=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?i=1-s:i=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;i=wt(i,0,r),n=wt(n,0,r),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const e=this._adapter,i=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||Ih(o.minUnit,i,n,this._getLabelCapacity(i)),a=Ie(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Qn(l)||l===!0,u={};let h=i,d,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":r),e.diff(n,i,r)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+r);const _=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,p=0;d<n;d=+e.add(d,a,r),p++)kh(u,d,_);return(d===n||s.bounds==="ticks"||p===1)&&kh(u,d,_),Object.keys(u).sort((b,v)=>b-v).map(b=>+b)}getLabelForValue(e){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(e,n.tooltipFormat):i.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,i,n,s){const o=this.options,r=o.ticks.callback;if(r)return Qe(r,[e,i,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=n[i],p=c&&h&&d&&d.major;return this._adapter.format(e,s||(p?h:u))}generateTickLabels(e){let i,n,s;for(i=0,n=e.length;i<n;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,n=this.ctx.measureText(e).width,s=fi(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(e){const i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,o=this._tickFormatFunction(e,0,Ch(this,[e],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],i,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,n;if(e.length)return e;const s=this.getLabels();for(i=0,n=s.length;i<n;++i)e.push(xh(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return pf(e.sort(x4))}}M(Ys,"id","time"),M(Ys,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Eo(t,e,i){let n=0,s=t.length-1,o,r,a,l;i?(e>=t[n].pos&&e<=t[s].pos&&({lo:n,hi:s}=Ui(t,"pos",e)),{pos:o,time:a}=t[n],{pos:r,time:l}=t[s]):(e>=t[n].time&&e<=t[s].time&&({lo:n,hi:s}=Ui(t,"time",e)),{time:o,pos:a}=t[n],{time:r,pos:l}=t[s]);const c=r-o;return c?a+(l-a)*(e-o)/c:a}class Qa extends Ys{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=Eo(i,this.min),this._tableRange=Eo(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:i,max:n}=this,s=[],o=[];let r,a,l,c,u;for(r=0,a=e.length;r<a;++r)c=e[r],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)u=s[r+1],l=s[r-1],c=s[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?e=this.normalize(i.concat(n)):e=i.length?i:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Eo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return Eo(this._table,n*this._tableRange+this._minPos,!0)}}M(Qa,"id","timeseries"),M(Qa,"defaults",Ys.defaults);var P4=Object.freeze({__proto__:null,CategoryScale:Ya,LinearScale:Xa,LogarithmicScale:Ja,RadialLinearScale:Ss,TimeScale:Ys,TimeSeriesScale:Qa});const M4=[Hw,g8,l4,P4],Ph=1e6,Vl=2e3,sp=-Vl;function T4(t){switch(t){case 0:return"";case 1:return"";case 2:return"";case 3:return"2";case 4:return"3";case 5:return"4"}}function B4(t,e){const i=t.customData;if(i)switch(e){case 0:return t.nextColor===D.BLACK?void 0:i.playerSearchInfo;case 1:return t.nextColor===D.WHITE?void 0:i.playerSearchInfo;case 2:return i.researchInfo;case 3:return i.researchInfo2;case 4:return i.researchInfo3;case 5:return i.researchInfo4}}function Mh(t,e,i){const n=t.score!==void 0?t.score:t.mate!==void 0?t.mate>0?Ph:-Ph:void 0;if(n!==void 0)switch(e){case mr.RAW:return Math.min(Math.max(n,sp),Vl);case mr.WIN_RATE:return Da(n,i)}}function R4(t){switch(t){default:return{main:"black",ticks:"dimgray",grid:"lightgray",head:"red",blackPlayer:"#1480C9",whitePlayer:"#FB7D00",researcher:"#349393",researcher2:"#FF1F4E",researcher3:"#6C22FF",researcher4:"#FFB912"};case vl.DARK:return{main:"white",ticks:"darkgray",grid:"dimgray",head:"red",blackPlayer:"#36A2EB",whitePlayer:"#FF9F40",researcher:"#4BC0C0",researcher2:"#FF6384",researcher3:"#9966FF",researcher4:"#FFCD56"}}}var mr=(t=>(t.RAW="raw",t.WIN_RATE="winRate",t))(mr||{});const D4=ze({name:"EvaluationChart",props:{size:{type:kt,required:!0},type:{type:String,required:!0}},setup(t){const e=V(null),i=Xe();let n,s=Vl,o=sp;t.type==="winRate"&&(s=100,o=0);const r=(d,p,_,b)=>{const v=[],y=_.moves;for(const E of y){const x=B4(E,p);if(!x)continue;const k=Mh(x,t.type,b.coefficientInSigmoid);k!==void 0&&v.push({x:E.number,y:k})}const w=y[y.length-1];if(p===0&&w.nextColor===D.BLACK||p===1&&w.nextColor===D.WHITE){const E=w.customData;if(E&&E.enemySearchInfo){const x=Mh(E.enemySearchInfo,t.type,b.coefficientInSigmoid);x!==void 0&&v.push({x:w.number+1,y:x})}}return{label:T4(p),borderColor:d,data:v,showLine:!0}},a=(d,p)=>({label:"",borderColor:p.head,data:[{x:d.current.number,y:s},{x:d.current.number,y:o}],showLine:!0,pointBorderWidth:0,pointRadius:0}),l=(d,p,_)=>[a(d,_),r(_.blackPlayer,0,d,p),r(_.whitePlayer,1,d,p),r(_.researcher,2,d,p),r(_.researcher2,3,d,p),r(_.researcher3,4,d,p),r(_.researcher4,5,d,p)],c=(d,p)=>({x:{min:0,max:d.length+10,ticks:{color:p.ticks},grid:{color:p.grid}},y:{min:o,max:s,ticks:{color:p.ticks},grid:{color:p.grid}}}),u=(d,p)=>{const _=R4(p.thema);n.data.datasets=l(d,p,_),n.options.color=_.main,n.options.scales=c(d,_),n.update()},h=(d,p,_)=>{if(d.x===null)return;const b=_.scales.x.max-_.scales.x.min,v=_.scales.x.right-_.scales.x.left,y=(d.x-_.scales.x.left)/v*b+_.scales.x.min,w=Math.round(y);i.changePly(w)};return st(()=>{const p=e.value.getContext("2d");n=new Li(p,{type:"scatter",data:{datasets:[]},options:{animation:{duration:0},maintainAspectRatio:!1,events:["click"],onClick:h}}),n.draw(),u(i.record,i.appSetting),nn(()=>[i.record,i.appSetting],([_,b])=>u(_,b),{deep:!0}),nn(()=>[t.size],([_])=>{n.resize(_.width,_.height)},{deep:!0})}),Js(()=>{n.destroy()}),{canvas:e}}});const N4={class:"root"},O4=["width","height"];function L4(t,e,i,n,s,o){return T(),O("div",null,[m("div",N4,[m("canvas",{ref:"canvas",width:t.size.width.toFixed(0),height:t.size.height.toFixed(0)},null,8,O4)])])}const F4=We(D4,[["render",L4],["__scopeId","data-v-a54a38b5"]]),$4=ze({name:"RecordComment",props:{size:{type:kt,required:!0}},setup(){const t=V(null),e=Xe(),i=ge(()=>e.recordFilePath),n=ge(()=>Object.values(re).map(o=>{const r=e.record.metadata;return{key:o,displayName:em(o),value:r.getStandardMetadata(o)||""}}));return st(()=>{t.value.addEventListener("copy",o=>{o.stopPropagation()}),t.value.addEventListener("paste",o=>{o.stopPropagation()})}),{root:t,filePath:i,list:n,change:(o,r)=>{const a=o.target;e.updateStandardRecordMetadata({key:r,value:a.value})}}}});const H4=t=>(qt("data-v-58c5dd5f"),t=t(),Yt(),t),U4={class:"element"},z4=H4(()=>m("div",{class:"key"},"",-1)),W4={class:"value"},G4={class:"key"},V4=["value","onInput"];function j4(t,e,i,n,s,o){return T(),O("div",null,[m("div",{ref:"root",class:"root",style:He({height:`${t.size.height}px`})},[m("div",U4,[z4,m("div",W4,fe(t.filePath||""),1)]),(T(!0),O(Pe,null,Ye(t.list,r=>(T(),O("div",{key:r.key,class:"element"},[m("div",G4,fe(r.displayName),1),m("input",{class:"value",value:r.value,onInput:a=>t.change(a,r.key)},null,40,V4)]))),128))],4)])}const K4=We($4,[["render",j4],["__scopeId","data-v-58c5dd5f"]]),Bs=30,q4={[$t.RECORD_INFO]:{title:"",icon:tt.DESCRIPTION},[$t.COMMENT]:{title:"",icon:tt.COMMENT},[$t.SEARCH]:{title:"",icon:tt.BRAIN},[$t.PV]:{title:"",icon:tt.PV},[$t.CHART]:{title:"",icon:tt.CHART},[$t.PERCENTAGE_CHART]:{title:"",icon:tt.PERCENT},[$t.INVISIBLE]:{title:"",icon:tt.ARROW_DROP}},Y4=ze({name:"TabPane",components:{RecordComment:Ly,EngineAnalytics:Pv,EvaluationChart:F4,RecordInfo:K4,ButtonIcon:Ot},props:{size:{type:kt,required:!0},visibleTabs:{type:Array,required:!0},activeTab:{type:String,required:!0},displayMinimizeToggle:{type:Boolean,required:!1}},emits:["onChangeTab","onMinimize"],setup(t,{emit:e}){const i=o=>e("onChangeTab",o),n=()=>e("onMinimize");return{contentSize:ge(()=>t.size.reduce(new kt(0,Bs))),headerHeight:Bs,changeSelect:i,minimize:n,tabs:q4,Tab:$t,Icon:tt,EvaluationChartType:mr}}});const X4={class:"tabs"},J4=["onClick"],Z4={class:"tab-contents"};function Q4(t,e,i,n,s,o){const r=we("ButtonIcon"),a=we("RecordInfo"),l=we("RecordComment"),c=we("EngineAnalytics"),u=we("EvaluationChart");return T(),O("div",null,[m("div",{class:"root",style:He({width:`${t.size.width}px`})},[m("div",X4,[(T(!0),O(Pe,null,Ye(t.visibleTabs,h=>(T(),O("div",{key:h,class:ei(["tab",{selected:t.activeTab===h}]),onClick:d=>t.changeSelect(h)},[K(r,{class:"icon",icon:t.tabs[h].icon},null,8,["icon"]),qe(" "+fe(t.tabs[h].title),1)],10,J4))),128)),t.displayMinimizeToggle?(T(),O("div",{key:0,class:"tab end",onClick:e[0]||(e[0]=(...h)=>t.minimize&&t.minimize(...h))},[K(r,{class:"icon",icon:t.Icon.ARROW_DROP},null,8,["icon"]),qe("  ")])):ue("",!0)]),m("div",Z4,[t.activeTab===t.Tab.RECORD_INFO?(T(),Ge(a,{key:0,class:"tab-content",size:t.contentSize},null,8,["size"])):ue("",!0),t.activeTab===t.Tab.COMMENT?(T(),Ge(l,{key:1,class:"tab-content"})):ue("",!0),t.activeTab===t.Tab.SEARCH?(T(),Ge(c,{key:2,class:"tab-content",size:t.contentSize,"history-mode":!0},null,8,["size"])):ue("",!0),t.activeTab===t.Tab.PV?(T(),Ge(c,{key:3,class:"tab-content",size:t.contentSize,"history-mode":!1},null,8,["size"])):ue("",!0),t.activeTab===t.Tab.CHART?(T(),Ge(u,{key:4,class:"tab-content",size:t.contentSize,type:t.EvaluationChartType.RAW},null,8,["size","type"])):ue("",!0),t.activeTab===t.Tab.PERCENTAGE_CHART?(T(),Ge(u,{key:5,class:"tab-content",size:t.contentSize,type:t.EvaluationChartType.WIN_RATE},null,8,["size","type"])):ue("",!0)])],4)])}const eA=We(Y4,[["render",Q4],["__scopeId","data-v-d0604de2"]]);class pa{constructor(){M(this,"func");M(this,"timeout")}after(e,i){this.func=e,!this.timeout&&(this.timeout=setTimeout(this.invoke.bind(this),i))}invoke(){this.func&&this.func(),this.clear()}clear(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.func=void 0}}const tA={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((t,e)=>(t[e.id]=e)&&t,{})}},methods:{updatePaneComponents(){this.panes.forEach(t=>{t.update&&t.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[t.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(t,e){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=e},onMouseMove(t){this.touch.mouseDown&&(t.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(t)),this.$emit("resize",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(t,e){"ontouchstart"in window&&(t.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===e?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(t,e),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=e,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[e])},onSplitterDblClick(t,e){let i=0;this.panes=this.panes.map((n,s)=>(n.size=s===e?n.max:n.min,s!==e&&(i+=n.min),n)),this.panes[e].size-=i,this.$emit("pane-maximize",this.panes[e]),this.$emit("resized",this.panes.map(n=>({min:n.min,max:n.max,size:n.size})))},onPaneClick(t,e){this.$emit("pane-click",this.indexedPanes[e])},getCurrentMouseDrag(t){const e=this.container.getBoundingClientRect(),{clientX:i,clientY:n}="ontouchstart"in window&&t.touches?t.touches[0]:t;return{x:i-e.left,y:n-e.top}},getCurrentDragPercentage(t){t=t[this.horizontal?"y":"x"];const e=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(t=e-t),t*100/e},calculatePanesSize(t){const e=this.touch.activeSplitter;let i={prevPanesSize:this.sumPrevPanesSize(e),nextPanesSize:this.sumNextPanesSize(e),prevReachedMinPanes:0,nextReachedMinPanes:0};const n=0+(this.pushOtherPanes?0:i.prevPanesSize),s=100-(this.pushOtherPanes?0:i.nextPanesSize),o=Math.max(Math.min(this.getCurrentDragPercentage(t),s),n);let r=[e,e+1],a=this.panes[r[0]]||null,l=this.panes[r[1]]||null;const c=a.max<100&&o>=a.max+i.prevPanesSize,u=l.max<100&&o<=100-(l.max+this.sumNextPanesSize(e+1));if(c||u){c?(a.size=a.max,l.size=Math.max(100-a.max-i.prevPanesSize-i.nextPanesSize,0)):(a.size=Math.max(100-l.max-i.prevPanesSize-this.sumNextPanesSize(e+1),0),l.size=l.max);return}if(this.pushOtherPanes){const h=this.doPushOtherPanes(i,o);if(!h)return;({sums:i,panesToResize:r}=h),a=this.panes[r[0]]||null,l=this.panes[r[1]]||null}a!==null&&(a.size=Math.min(Math.max(o-i.prevPanesSize-i.prevReachedMinPanes,a.min),a.max)),l!==null&&(l.size=Math.min(Math.max(100-o-i.nextPanesSize-i.nextReachedMinPanes,l.min),l.max))},doPushOtherPanes(t,e){const i=this.touch.activeSplitter,n=[i,i+1];return e<t.prevPanesSize+this.panes[n[0]].min&&(n[0]=this.findPrevExpandedPane(i).index,t.prevReachedMinPanes=0,n[0]<i&&this.panes.forEach((s,o)=>{o>n[0]&&o<=i&&(s.size=s.min,t.prevReachedMinPanes+=s.min)}),t.prevPanesSize=this.sumPrevPanesSize(n[0]),n[0]===void 0)?(t.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((s,o)=>{o>0&&o<=i&&(s.size=s.min,t.prevReachedMinPanes+=s.min)}),this.panes[n[1]].size=100-t.prevReachedMinPanes-this.panes[0].min-t.prevPanesSize-t.nextPanesSize,null):e>100-t.nextPanesSize-this.panes[n[1]].min&&(n[1]=this.findNextExpandedPane(i).index,t.nextReachedMinPanes=0,n[1]>i+1&&this.panes.forEach((s,o)=>{o>i&&o<n[1]&&(s.size=s.min,t.nextReachedMinPanes+=s.min)}),t.nextPanesSize=this.sumNextPanesSize(n[1]-1),n[1]===void 0)?(t.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((s,o)=>{o<this.panesCount-1&&o>=i+1&&(s.size=s.min,t.nextReachedMinPanes+=s.min)}),this.panes[n[0]].size=100-t.prevPanesSize-t.nextReachedMinPanes-this.panes[this.panesCount-1].min-t.nextPanesSize,null):{sums:t,panesToResize:n}},sumPrevPanesSize(t){return this.panes.reduce((e,i,n)=>e+(n<t?i.size:0),0)},sumNextPanesSize(t){return this.panes.reduce((e,i,n)=>e+(n>t+1?i.size:0),0)},findPrevExpandedPane(t){return[...this.panes].reverse().find(e=>e.index<t&&e.size>e.min)||{}},findNextExpandedPane(t){return this.panes.find(e=>e.index>t+1&&e.size>e.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(t=>{const e=t.classList.contains("splitpanes__pane"),i=t.classList.contains("splitpanes__splitter");!e&&!i&&(t.parentNode.removeChild(t),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},addSplitter(t,e,i=!1){const n=t-1,s=document.createElement("div");s.classList.add("splitpanes__splitter"),i||(s.onmousedown=o=>this.onMouseDown(o,n),typeof window<"u"&&"ontouchstart"in window&&(s.ontouchstart=o=>this.onMouseDown(o,n)),s.onclick=o=>this.onSplitterClick(o,n+1)),this.dblClickSplitter&&(s.ondblclick=o=>this.onSplitterDblClick(o,n+1)),e.parentNode.insertBefore(s,e)},removeSplitter(t){t.onmousedown=void 0,t.onclick=void 0,t.ondblclick=void 0,t.parentNode.removeChild(t)},redoSplitters(){const t=Array.from(this.container.children);t.forEach(i=>{i.className.includes("splitpanes__splitter")&&this.removeSplitter(i)});let e=0;t.forEach(i=>{i.className.includes("splitpanes__pane")&&(!e&&this.firstSplitter?this.addSplitter(e,i,!0):e&&this.addSplitter(e,i),e++)})},requestUpdate({target:t,...e}){const i=this.indexedPanes[t._.uid];Object.entries(e).forEach(([n,s])=>i[n]=s)},onPaneAdd(t){let e=-1;Array.from(t.$el.parentNode.children).some(s=>(s.className.includes("splitpanes__pane")&&e++,s===t.$el));const i=parseFloat(t.minSize),n=parseFloat(t.maxSize);this.panes.splice(e,0,{id:t._.uid,index:e,min:isNaN(i)?0:i,max:isNaN(n)?100:n,size:t.size===null?null:parseFloat(t.size),givenSize:t.size,update:t.update}),this.panes.forEach((s,o)=>s.index=o),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[e]}),this.$emit("pane-add",{index:e,panes:this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))})})},onPaneRemove(t){const e=this.panes.findIndex(n=>n.id===t._.uid),i=this.panes.splice(e,1)[0];this.panes.forEach((n,s)=>n.index=s),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...i,index:e}}),this.$emit("pane-remove",{removed:i,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},resetPaneSizes(t={}){!t.addedPane&&!t.removedPane?this.initialPanesSizing():this.panes.some(e=>e.givenSize!==null||e.min||e.max<100)?this.equalizeAfterAddOrRemove(t):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size})))},equalize(){const t=100/this.panesCount;let e=0;const i=[],n=[];this.panes.forEach(s=>{s.size=Math.max(Math.min(t,s.max),s.min),e-=s.size,s.size>=s.max&&i.push(s.id),s.size<=s.min&&n.push(s.id)}),e>.1&&this.readjustSizes(e,i,n)},initialPanesSizing(){let t=100;const e=[],i=[];let n=0;this.panes.forEach(o=>{t-=o.size,o.size!==null&&n++,o.size>=o.max&&e.push(o.id),o.size<=o.min&&i.push(o.id)});let s=100;t>.1&&(this.panes.forEach(o=>{o.size===null&&(o.size=Math.max(Math.min(t/(this.panesCount-n),o.max),o.min)),s-=o.size}),s>.1&&this.readjustSizes(t,e,i))},equalizeAfterAddOrRemove({addedPane:t,removedPane:e}={}){let i=100/this.panesCount,n=0;const s=[],o=[];t&&t.givenSize!==null&&(i=(100-t.givenSize)/(this.panesCount-1)),this.panes.forEach(r=>{n-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&o.push(r.id)}),!(Math.abs(n)<.1)&&(this.panes.forEach(r=>{t&&t.givenSize!==null&&t.id===r.id||(r.size=Math.max(Math.min(i,r.max),r.min)),n-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&o.push(r.id)}),n>.1&&this.readjustSizes(n,s,o))},readjustSizes(t,e,i){let n;t>0?n=t/(this.panesCount-e.length):n=t/(this.panesCount-i.length),this.panes.forEach((s,o)=>{if(t>0&&!e.includes(s.id)){const r=Math.max(Math.min(s.size+n,s.max),s.min),a=r-s.size;t-=a,s.size=r}else if(!i.includes(s.id)){const r=Math.max(Math.min(s.size+n,s.max),s.min),a=r-s.size;t-=a,s.size=r}s.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[s.id].size}%`})}),Math.abs(t)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(t){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((e,i)=>{e.ondblclick=t?n=>this.onSplitterDblClick(n,i):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return i0("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},iA=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},nA={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(t){this.style=t}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(t){this.requestUpdate({target:this,size:t})},minSizeNumber(t){this.requestUpdate({target:this,min:t})},maxSizeNumber(t){this.requestUpdate({target:this,max:t})}}};function sA(t,e,i,n,s,o){return T(),O("div",{class:"splitpanes__pane",onClick:e[0]||(e[0]=r=>o.onPaneClick(r,t._.uid)),style:He(t.style)},[wa(t.$slots,"default")],4)}const oA=iA(nA,[["render",sA]]);const ga=8,yn=10,ma=100,rA=ze({name:"StandardLayout",components:{BoardPane:X_,RecordPane:By,TabPane:eA,Splitpanes:tA,Pane:oA,ButtonIcon:Ot},setup(){const t=Xe(),e=Wi(new kt(window.innerWidth,window.innerHeight)),i=V(t.appSetting.topPaneHeightPercentage),n=V(t.appSetting.bottomLeftPaneWidthPercentage),s=Wi(new kt(0,0)),o=new pa,r=()=>{o.after(()=>{e.width=window.innerWidth,e.height=window.innerHeight},ma)};st(()=>{window.addEventListener("resize",r)}),Js(()=>{window.removeEventListener("resize",r)});const a=q=>{s.width=q.width,s.height=q.height},l=q=>{t.updateAppSetting(q).catch(he=>{pe.log(Mt.WARN,"StandardLayout: failed to update app setting: "+Od(he))})},c=q=>{l({tab:q})},u=q=>{l({tab2:q})},h=()=>{i.value=100,l({topPaneHeightPercentage:100})},d=()=>{const q=Math.min(t.appSetting.topPanePreviousHeightPercentage,(e.height-Bs*2-ga)/e.height*100);i.value=q,l({topPaneHeightPercentage:q})},p=new pa,_=q=>{const he=q[0].size;p.after(()=>{i.value=he},ma)},b=q=>{p.clear();const he=q[0].size;i.value=he,l({topPaneHeightPercentage:he})},v=new pa,y=q=>{const he=q[0].size;v.after(()=>{n.value=he},ma)},w=q=>{v.clear();const he=q[0].size;n.value=he,l({bottomLeftPaneWidthPercentage:he})},E=ge(()=>e.height*H.value/100>=Bs),x=ge(()=>new kt(Math.max(e.width-vy-yn*2,0),Math.max((e.height-ga)*(i.value/100)-yn*2-(E.value?0:Bs),0))),k=ge(()=>({margin:`${yn}px`})),B=ge(()=>{const q=e.width-s.width-yn*3,he=s.height;return{margin:`${yn}px ${yn}px ${yn}px 0`,width:`${q}px`,height:`${he}px`}}),H=ge(()=>100-i.value),G=ge(()=>new kt(t.appSetting.tabPaneType===Zo.SINGLE?e.width:(e.width-ga)*(n.value/100),e.height*H.value/100)),te=ge(()=>new kt(e.width*(1-n.value/100),e.height*H.value/100)),Y=ge(()=>t.appSetting);return{topPaneHeightPercentage:i,bottomPaneHeightPercentage:H,bottomLeftPaneWidthPercentage:n,isBottomPaneVisible:E,boardPaneMaxSize:x,boardPaneStyle:k,recordPaneStyle:B,tabPaneSize:G,tabPaneSize2:te,appSetting:Y,onBoardPaneResize:a,onChangeTab:c,onChangeTab2:u,onMinimizeTab:h,onUnhideTabView:d,onResizeMain:_,onResizedMain:b,onResizeBottom:y,onResizedBottom:w,TabPaneType:Zo,Tab:$t,Icon:tt}}});const aA={class:"top-pane"},lA={class:"top-pane-main"};function cA(t,e,i,n,s,o){const r=we("BoardPane"),a=we("RecordPane"),l=we("ButtonIcon"),c=we("Pane"),u=we("TabPane"),h=we("Splitpanes");return T(),O("div",null,[K(h,{class:"main-frame",horizontal:"","dbl-click-splitter":!1,onResize:t.onResizeMain,onResized:t.onResizedMain},{default:wi(()=>[K(c,{size:t.topPaneHeightPercentage},{default:wi(()=>[m("div",aA,[m("div",lA,[K(r,{style:He(t.boardPaneStyle),"max-size":t.boardPaneMaxSize,onResize:t.onBoardPaneResize},null,8,["style","max-size","onResize"]),K(a,{class:"top-right-pane",style:He(t.recordPaneStyle)},null,8,["style"])]),t.isBottomPaneVisible?ue("",!0):(T(),O("button",{key:0,class:"unhide-tabview-button",onClick:e[0]||(e[0]=(...d)=>t.onUnhideTabView&&t.onUnhideTabView(...d))},[K(l,{class:"icon",icon:t.Icon.ARROW_UP},null,8,["icon"]),qe("  ")]))])]),_:1},8,["size"]),K(c,{size:t.bottomPaneHeightPercentage},{default:wi(()=>[t.appSetting.tabPaneType===t.TabPaneType.SINGLE?(T(),Ge(u,{key:0,class:"tab-pane",size:t.tabPaneSize,"visible-tabs":[t.Tab.RECORD_INFO,t.Tab.COMMENT,t.Tab.SEARCH,t.Tab.PV,t.Tab.CHART,t.Tab.PERCENTAGE_CHART],"active-tab":t.appSetting.tab,"display-minimize-toggle":!0,onOnChangeTab:t.onChangeTab,onOnMinimize:t.onMinimizeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab","onOnMinimize"])):(T(),Ge(h,{key:1,class:"bottom-frame",vertical:"","dbl-click-splitter":!1,onResize:t.onResizeBottom,onResized:t.onResizedBottom},{default:wi(()=>[K(c,{size:t.bottomLeftPaneWidthPercentage},{default:wi(()=>[K(u,{class:"tab-pane",size:t.tabPaneSize,"visible-tabs":[t.Tab.RECORD_INFO,t.Tab.SEARCH,t.Tab.PV],"active-tab":t.appSetting.tab,onOnChangeTab:t.onChangeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab"])]),_:1},8,["size"]),K(c,null,{default:wi(()=>[K(u,{class:"tab-pane",size:t.tabPaneSize2,"visible-tabs":[t.Tab.COMMENT,t.Tab.CHART,t.Tab.PERCENTAGE_CHART],"active-tab":t.appSetting.tab2,"display-minimize-toggle":!0,onOnChangeTab:t.onChangeTab2,onOnMinimize:t.onMinimizeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab","onOnMinimize"])]),_:1})]),_:1},8,["onResize","onResized"]))]),_:1},8,["size"])]),_:1},8,["onResize","onResized"])])}const uA=We(rA,[["render",cA],["__scopeId","data-v-cd507e69"]]);function pt(t){let e=Number(t.value);return t.max&&(e=Math.min(e,Number(t.max))),t.min&&(e=Math.max(e,Number(t.min))),e}const hA=ze({name:"USIEngineOptionDialog",props:{latestEngineSetting:{type:Object,required:!0},okButtonText:{type:String,required:!1,default:"OK"}},emits:["ok","cancel"],setup(t,e){const i=Xe(),n=V(null),s=V(null),o=t.latestEngineSetting,r=V(o),a=ge(()=>Object.values(r.value.options).sort((p,_)=>{const b=p.name.startsWith("USI_"),v=_.name.startsWith("USI_");return b!==v?b?-1:1:p.name<_.name?-1:1}).map((p,_)=>({...p,inputId:"usiEngineOptionDialogOption"+_,value:xn(p)})));return i.retainBussyState(),st(async()=>{Et(n.value),ii(n.value);try{const p=i.appSetting.engineTimeoutSeconds;r.value=await pe.getUSIEngineInfo(o.path,p),c1(r.value,o),s.value.value=r.value.name;for(const _ of a.value){const b=co(_.inputId);b&&_.value!==void 0&&(b.value=_.value+"")}}catch(p){i.pushError(p),e.emit("cancel")}finally{i.releaseBussyState()}}),zt(()=>{ni(n.value)}),{engine:r,dialog:n,engineNameInput:s,options:a,selectFile:async p=>{i.retainBussyState();try{const _=await pe.showSelectFileDialog(),b=co(p);_&&b&&(b.value=_)}catch(_){i.pushError(_)}finally{i.releaseBussyState()}},sendOption:async p=>{i.retainBussyState();try{const _=i.appSetting.engineTimeoutSeconds;await pe.sendUSISetOption(r.value.path,p,_)}catch(_){i.pushError(_)}finally{i.releaseBussyState()}},reset:()=>{s.value.value=r.value.defaultName;for(const p of a.value){const _=co(p.inputId);_&&(r.value.options[p.name].default!==void 0?_.value=r.value.options[p.name].default+"":_.value="")}},ok:()=>{r.value.name=s.value.value;for(const p of a.value){const _=co(p.inputId);_&&(r.value.options[p.name].value=_.value?p.type==="spin"?pt(_):_.value:void 0)}e.emit("ok",r.value)},cancel:()=>{e.emit("cancel")}}}});const Ki=t=>(qt("data-v-5ef38ea6"),t=t(),Yt(),t),dA={ref:"dialog"},fA=Ki(()=>m("div",{class:"dialog-title"},"",-1)),pA={class:"dialog-form-area option-list"},gA={class:"option"},mA=Ki(()=>m("div",{class:"option-name"},"",-1)),bA={class:"option-unchangeable"},_A={class:"option"},yA=Ki(()=>m("div",{class:"option-name"},"",-1)),vA={class:"option-unchangeable"},SA={class:"option"},wA=Ki(()=>m("div",{class:"option-name"},"",-1)),EA={class:"option-unchangeable"},AA={class:"option"},xA=Ki(()=>m("div",{class:"option-name"},"",-1)),IA={ref:"engineNameInput",class:"option-value-text",type:"text",name:"ElectronShogiEngineName"},kA={class:"option-name"},CA=["id","min","max","name"],PA=["id","name"],MA=["id","name"],TA=["onClick"],BA=["id"],RA=Ki(()=>m("option",{value:""},"",-1)),DA=Ki(()=>m("option",{value:"true"},"ON",-1)),NA=Ki(()=>m("option",{value:"false"},"OFF",-1)),OA=[RA,DA,NA],LA=["id"],FA=Ki(()=>m("option",{value:""},"",-1)),$A=["value"],HA=["onClick"],UA={class:"dialog-main-buttons"};function zA(t,e,i,n,s,o){return T(),O("div",null,[m("dialog",dA,[fA,m("div",pA,[m("div",gA,[mA,m("div",bA,fe(t.engine.defaultName),1)]),m("div",_A,[yA,m("div",vA,fe(t.engine.author),1)]),m("div",SA,[wA,m("div",EA,fe(t.engine.path),1)]),m("div",AA,[xA,m("input",IA,null,512)]),(T(!0),O(Pe,null,Ye(t.options,r=>(T(),O("div",{key:r.name,class:"option"},[m("div",kA,fe(r.name),1),r.type==="spin"?(T(),O("input",{key:0,id:r.inputId,class:"option-value-number",type:"number",min:r.min,max:r.max,step:"1",name:r.name},null,8,CA)):ue("",!0),r.type==="string"?(T(),O("input",{key:1,id:r.inputId,class:"option-value-text",type:"text",name:r.name},null,8,PA)):ue("",!0),r.type==="filename"?(T(),O("input",{key:2,id:r.inputId,class:"option-value-filename",type:"text",name:r.name},null,8,MA)):ue("",!0),r.type==="filename"?(T(),O("button",{key:3,class:"dialog-button",onClick:a=>t.selectFile(r.inputId)},"  ",8,TA)):ue("",!0),r.type==="check"?(T(),O("select",{key:4,id:r.inputId,class:"option-value-check"},OA,8,BA)):ue("",!0),r.type==="combo"?(T(),O("select",{key:5,id:r.inputId,class:"option-value-combo"},[FA,(T(!0),O(Pe,null,Ye(r.vars,a=>(T(),O("option",{key:a,value:a},fe(a),9,$A))),128))],8,LA)):ue("",!0),r.type==="button"?(T(),O("button",{key:6,class:"dialog-button",onClick:a=>t.sendOption(r.name)},"  ",8,HA)):ue("",!0)]))),128))]),m("button",{class:"dialog-wide-button",onClick:e[0]||(e[0]=r=>t.reset())},"  "),m("div",UA,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[1]||(e[1]=r=>t.ok())},fe(t.okButtonText),1),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[2]||(e[2]=r=>t.cancel())},"  ")])],512)])}const op=We(hA,[["render",zA],["__scopeId","data-v-5ef38ea6"]]),WA=ze({name:"PlayerSelector",components:{ButtonIcon:Ot,USIEngineOptionDialog:op},props:{playerUri:{type:String,required:!0},containsHuman:{type:Boolean,default:!1},engineSettings:{type:Object,required:!0},displayPonderState:{type:Boolean,default:!1},displayThreadState:{type:Boolean,default:!1},displayMultiPvState:{type:Boolean,default:!1}},emits:["select-player","update-engine-setting"],setup(t,e){const i=Xe(),n=V(null),s=V(null),o=ge(()=>{if(!xi(t.playerUri))return null;const p=t.engineSettings.getEngine(t.playerUri);return p&&xn(p.options[jd])==="true"?"ON":"OFF"}),r=ge(()=>{if(!xi(t.playerUri))return null;const p=t.engineSettings.getEngine(t.playerUri);return p?xn(p.options[s1])||xn(p.options[o1]):null}),a=ge(()=>{if(!xi(t.playerUri))return null;const p=t.engineSettings.getEngine(t.playerUri);return p?xn(p.options[n1])||xn(p.options[r1]):null}),l=ge(()=>xi(t.playerUri));return{playerSelect:n,ponderState:o,threadState:r,multiPVState:a,isPlayerSettingEnabled:l,engineSettingDialog:s,onPlayerChange:()=>{e.emit("select-player",n.value.value)},openPlayerSetting:()=>{if(xi(t.playerUri)){const p=t.engineSettings.getEngine(t.playerUri);if(!p){i.pushError("");return}s.value=p}},savePlayerSetting:async p=>{s.value=null;const _=t.engineSettings.getClone();_.updateEngine(p),i.retainBussyState();try{await pe.saveUSIEngineSetting(_),e.emit("update-engine-setting",_)}catch(b){i.pushError(b)}finally{i.releaseBussyState()}},closePlayerSetting:()=>{s.value=null},Icon:tt,uri:i1}}});const jl=t=>(qt("data-v-1b6a655b"),t=t(),Yt(),t),GA={class:"root"},VA=["value"],jA=["value"],KA=["value"],qA={key:0,class:"player-info"},YA=jl(()=>m("span",{class:"player-info-key"},"(Ponder):",-1)),XA={class:"player-info-value"},JA={key:1,class:"player-info"},ZA=jl(()=>m("span",{class:"player-info-key"},":",-1)),QA={class:"player-info-value"},e3={key:2,class:"player-info"},t3=jl(()=>m("span",{class:"player-info-key"},"PV:",-1)),i3={class:"player-info-value"},n3=["disabled"];function s3(t,e,i,n,s,o){const r=we("ButtonIcon"),a=we("USIEngineOptionDialog");return T(),O(Pe,null,[m("div",null,[m("div",GA,[m("select",{ref:"playerSelect",class:"player-select",size:"1",value:t.playerUri,onChange:e[0]||(e[0]=(...l)=>t.onPlayerChange&&t.onPlayerChange(...l))},[t.containsHuman?(T(),O("option",{key:0,value:t.uri.ES_HUMAN},"",8,jA)):ue("",!0),(T(!0),O(Pe,null,Ye(t.engineSettings.engineList,l=>(T(),O("option",{key:l.uri,value:l.uri},fe(l.name),9,KA))),128))],40,VA),t.displayPonderState?(T(),O("div",qA,[YA,m("span",XA,fe(t.ponderState||"---"),1)])):ue("",!0),t.displayThreadState?(T(),O("div",JA,[ZA,m("span",QA,fe(t.threadState||"---"),1)])):ue("",!0),t.displayMultiPvState?(T(),O("div",e3,[t3,m("span",i3,fe(t.multiPVState||"---"),1)])):ue("",!0),m("button",{class:"player-setting",disabled:!t.isPlayerSettingEnabled,onClick:e[1]||(e[1]=(...l)=>t.openPlayerSetting&&t.openPlayerSetting(...l))},[K(r,{class:"icon",icon:t.Icon.SETTINGS},null,8,["icon"]),qe("  ")],8,n3)])]),t.engineSettingDialog?(T(),Ge(a,{key:0,"latest-engine-setting":t.engineSettingDialog,"ok-button-text":"",onOk:t.savePlayerSetting,onCancel:t.closePlayerSetting},null,8,["latest-engine-setting","onOk","onCancel"])):ue("",!0)],64)}const Nr=We(WA,[["render",s3],["__scopeId","data-v-1b6a655b"]]),o3=ze({name:"GameDialog",components:{ButtonIcon:Ot,PlayerSelector:Nr},setup(){const t=Xe(),e=V(null),i=V(null),n=V(null),s=V(null),o=V(null),r=V(null),a=V(null),l=V(null),c=V(null),u=V(null),h=V(null),d=V(null),p=V(null),_=V(Qo()),b=V(new Vi),v=V(""),y=V("");t.retainBussyState(),st(async()=>{try{_.value=await pe.loadGameSetting(),b.value=await pe.loadUSIEngineSetting(),v.value=_.value.black.uri,y.value=_.value.white.uri,Et(e.value),ii(e.value)}catch(Y){t.pushError(Y),t.destroyModalDialog()}finally{t.releaseBussyState()}}),zt(()=>{ni(e.value)});let w=!1;Xs(()=>{w||(i.value.value=Math.floor(_.value.timeLimit.timeSeconds/3600),n.value.value=Math.floor(_.value.timeLimit.timeSeconds/60)%60,s.value.value=_.value.timeLimit.byoyomi,o.value.value=_.value.timeLimit.increment,r.value.value=_.value.startPosition!==void 0?_.value.startPosition:"current",a.value.checked=_.value.enableEngineTimeout,l.value.value=_.value.maxMoves,c.value.checked=_.value.humanIsFront,u.value.value=_.value.repeat,h.value.checked=_.value.swapPlayers,d.value.checked=_.value.enableComment,p.value.checked=_.value.enableAutoSave,w=!0)});const E=Y=>{if(xi(Y)&&b.value.hasEngine(Y)){const q=b.value.getEngine(Y);return{name:q.name,uri:Y,usi:q}}return{name:"",uri:Qt}};return{CommentBehavior:$i,dialog:e,hours:i,minutes:n,byoyomi:s,increment:o,startPosition:r,enableEngineTimeout:a,maxMoves:l,humanIsFront:c,repeat:u,swapPlayers:h,enableComment:d,enableAutoSave:p,engineSettings:b,blackPlayerURI:v,whitePlayerURI:y,onStart:()=>{const Y={black:E(v.value),white:E(y.value),timeLimit:{timeSeconds:(pt(i.value)*60+pt(n.value))*60,byoyomi:pt(s.value),increment:pt(o.value)},startPosition:r.value.value!=="current"?r.value.value:void 0,enableEngineTimeout:a.value.checked,maxMoves:pt(l.value),humanIsFront:c.value.checked,repeat:pt(u.value),swapPlayers:h.value.checked,enableComment:d.value.checked,enableAutoSave:p.value.checked},q=er()?Kd(Y):f1(Y);q?t.pushError(q):t.startGame(Y)},onCancel:()=>{t.closeModalDialog()},onUpdatePlayerSetting:Y=>{b.value=Y},onSelectBlackPlayer:Y=>{v.value=Y},onSelectWhitePlayer:Y=>{y.value=Y},onSwapColor:()=>{[v.value,y.value]=[y.value,v.value]},Icon:tt}}});const gt=t=>(qt("data-v-9047e0c4"),t=t(),Yt(),t),r3={ref:"dialog"},a3=gt(()=>m("div",{class:"dialog-title"},"",-1)),l3={class:"dialog-form-area"},c3={class:"players"},u3={class:"player"},h3=gt(()=>m("div",{class:"top-label"},"",-1)),d3={class:"player"},f3=gt(()=>m("div",{class:"top-label"},"",-1)),p3={class:"players-control"},g3={class:"dialog-form-areas-h"},m3={class:"dialog-form-area time-limit"},b3=gt(()=>m("div",{class:"top-label"},"",-1)),_3={class:"dialog-form-item"},y3=gt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),v3={ref:"hours",class:"time",type:"number",min:"0",max:"99",step:"1"},S3=gt(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),w3={ref:"minutes",class:"time",type:"number",min:"0",max:"59",step:"1"},E3=gt(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),A3={class:"dialog-form-item"},x3=gt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),I3={ref:"byoyomi",class:"time",type:"number",min:"0",max:"60",step:"1"},k3=gt(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),C3={class:"dialog-form-item"},P3=gt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),M3={ref:"increment",class:"time",type:"number",min:"0",max:"99",step:"1"},T3=gt(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),B3={class:"dialog-form-item"},R3={id:"enable-engine-timeout",ref:"enableEngineTimeout",type:"checkbox"},D3=gt(()=>m("label",{for:"enable-engine-timeout"},"",-1)),N3={class:"dialog-form-area flags"},O3=gt(()=>m("div",{class:"top-label"},"",-1)),L3={class:"dialog-form-item"},F3=gt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),$3={ref:"startPosition"},H3=Ed('<option value="current" data-v-9047e0c4></option><option value="standard" data-v-9047e0c4></option><option value="handicapLance" data-v-9047e0c4></option><option value="handicapRightLance" data-v-9047e0c4></option><option value="handicapBishop" data-v-9047e0c4></option><option value="handicapRook" data-v-9047e0c4></option><option value="handicapRookLance" data-v-9047e0c4></option><option value="handicap2Pieces" data-v-9047e0c4>2</option><option value="handicap4Pieces" data-v-9047e0c4>4</option><option value="handicap6Pieces" data-v-9047e0c4>6</option><option value="handicap8Pieces" data-v-9047e0c4>8</option>',11),U3=[H3],z3={class:"dialog-form-item"},W3=gt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),G3={ref:"maxMoves",class:"number",type:"number",min:"1"},V3={class:"dialog-form-item"},j3=gt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),K3={ref:"repeat",class:"number",type:"number",min:"1"},q3={class:"dialog-form-item"},Y3={id:"swap-players",ref:"swapPlayers",type:"checkbox"},X3=gt(()=>m("label",{for:"swap-players"},"1",-1)),J3={class:"dialog-form-item"},Z3={id:"enable-comment",ref:"enableComment",type:"checkbox"},Q3=gt(()=>m("label",{for:"enable-comment"},"",-1)),ex={class:"dialog-form-item"},tx={id:"enable-auto-save",ref:"enableAutoSave",type:"checkbox"},ix=gt(()=>m("label",{for:"enable-auto-save"},"",-1)),nx={class:"dialog-form-item"},sx={id:"human-is-front",ref:"humanIsFront",type:"checkbox"},ox=gt(()=>m("label",{for:"human-is-front"},"",-1)),rx={class:"dialog-main-buttons"};function ax(t,e,i,n,s,o){const r=we("PlayerSelector"),a=we("ButtonIcon");return T(),O("div",null,[m("dialog",r3,[a3,m("div",l3,[m("div",c3,[m("div",u3,[h3,K(r,{"player-uri":t.blackPlayerURI,"contains-human":!0,"engine-settings":t.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectBlackPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),m("div",d3,[f3,t.whitePlayerURI?(T(),Ge(r,{key:0,"player-uri":t.whitePlayerURI,"contains-human":!0,"engine-settings":t.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectWhitePlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])):ue("",!0)])]),m("div",p3,[m("button",{onClick:e[0]||(e[0]=(...l)=>t.onSwapColor&&t.onSwapColor(...l))},[K(a,{class:"icon",icon:t.Icon.SWAP_H},null,8,["icon"]),qe("  ")])])]),m("div",g3,[m("div",m3,[b3,m("div",_3,[y3,m("input",v3,null,512),S3,m("input",w3,null,512),E3]),m("div",A3,[x3,m("input",I3,null,512),k3]),m("div",C3,[P3,m("input",M3,null,512),T3]),m("div",B3,[m("input",R3,null,512),D3])]),m("div",N3,[O3,m("div",L3,[F3,m("select",$3,U3,512)]),m("div",z3,[W3,m("input",G3,null,512)]),m("div",V3,[j3,m("input",K3,null,512)]),m("div",q3,[m("input",Y3,null,512),X3]),m("div",J3,[m("input",Z3,null,512),Q3]),m("div",ex,[m("input",tx,null,512),ix]),m("div",nx,[m("input",sx,null,512),ox])])]),m("div",rx,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[1]||(e[1]=l=>t.onStart())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[2]||(e[2]=l=>t.onCancel())},"  ")])],512)])}const lx=We(o3,[["render",ax],["__scopeId","data-v-9047e0c4"]]),cx=ze({name:"CSAGameDialog",components:{PlayerSelector:Nr},setup(){const t=Xe(),e=V(null),i=V(null),n=V(Hs.V121),s=V(null),o=V(null),r=V(null),a=V(null),l=V(null),c=V(null),u=V(null),h=V(null),d=V(null),p=V(null),_=V(!1),b=V(Sb()),v=V(new Vi),y=V("");let w=!1,E=!1;t.retainBussyState(),st(async()=>{try{_.value=await pe.isEncryptionAvailable(),b.value=await pe.loadCSAGameSettingHistory(),v.value=await pe.loadUSIEngineSetting(),Et(e.value),ii(e.value),w=!0}catch(de){t.pushError(de),t.destroyModalDialog()}finally{t.releaseBussyState()}}),zt(()=>{ni(e.value)}),Xs(()=>{if(!w||E)return;const de=wb(b.value,0);i.value.value=n.value=de.server.protocolVersion,s.value.value=de.server.host,o.value.value=de.server.port,r.value.value=de.server.id,a.value.value=de.server.password,c.value.checked=de.enableComment,u.value.checked=de.enableAutoSave,h.value.value=de.repeat,d.value.checked=de.autoRelogin,p.value.checked=de.autoFlip,y.value=de.player.uri,E=!0});const x=de=>{if(xi(de)&&v.value.hasEngine(de)){const Oe=v.value.getEngine(de);return{name:Oe.name,uri:de,usi:Oe}}return{name:"",uri:Qt}},k=()=>{const de={player:x(y.value),server:{protocolVersion:i.value.value,host:String(s.value.value||"").trim(),port:Number(o.value.value),id:String(r.value.value||""),password:String(a.value.value||"")},enableComment:c.value.checked,enableAutoSave:u.value.checked,repeat:pt(h.value),autoRelogin:d.value.checked,autoFlip:p.value.checked},Oe=vb(de);Oe?t.pushError(Oe):t.loginCSAGame(de,{saveHistory:l.value.checked})},B=()=>{t.closeModalDialog()},H=async de=>{v.value=de},G=de=>{y.value=de},te=de=>{const Oe=de.target;a.value.type=Oe.checked?"text":"password"},Y=de=>{const Oe=de.target,xe=b.value.serverHistory[Number(Oe.value)];xe&&(i.value.value=xe.protocolVersion,s.value.value=xe.host,o.value.value=xe.port,r.value.value=xe.id,a.value.value=xe.password)},q=()=>{n.value=i.value.value},he=ge(()=>t.appSetting.enableCSALog&&t.appSetting.enableAppLog&&t.appSetting.enableUSILog);return{CSAProtocolVersion:Hs,maxServerHistoryLenght:ef,dialog:e,protocolVersion:i,host:s,port:o,id:r,password:a,saveHistory:l,enableComment:c,enableAutoSave:u,repeat:h,autoRelogin:d,autoFlip:p,engineSettings:v,playerURI:y,history:b,selectedProtocolVersion:n,onChangeProtocolVersion:q,logEnabled:he,isEncryptionAvailable:_,onStart:k,onCancel:B,onUpdatePlayerSetting:H,onSelectPlayer:G,onTogglePasswordVisibility:te,onChangeHistory:Y,Icon:tt}}});const mt=t=>(qt("data-v-d3190899"),t=t(),Yt(),t),ux={ref:"dialog",class:"root"},hx=mt(()=>m("div",{class:"dialog-title"},"CSA ",-1)),dx={class:"dialog-scroll-area"},fx={key:0,class:"dialog-form-area dialog-form-warning"},px=mt(()=>m("div",{class:"dialog-form-note"},"  CSA  ",-1)),gx=[px],mx={class:"dialog-form-area"},bx=mt(()=>m("div",null,"",-1)),_x={class:"dialog-form-area"},yx={class:"dialog-form-item"},vx=mt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Sx={key:0,value:"0"},wx=["value"],Ex=mt(()=>m("hr",null,null,-1)),Ax={class:"dialog-form-item"},xx=mt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Ix=["value"],kx=["value"],Cx={key:0,class:"dialog-form-area dialog-form-item dialog-form-warning"},Px=mt(()=>m("div",{class:"dialog-form-note"}," CSA ",-1)),Mx=[Px],Tx={key:1,class:"dialog-form-area dialog-form-item dialog-form-warning"},Bx=mt(()=>m("div",{class:"dialog-form-note"}," FloodgateWCSC ",-1)),Rx=[Bx],Dx={class:"dialog-form-item"},Nx=mt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Ox={ref:"host",class:"long-text",list:"csa-server-host",type:"text"},Lx=mt(()=>m("datalist",{id:"csa-server-host"},[m("option",{value:"gserver.computer-shogi.org"}),m("option",{value:"wdoor.c.u-tokyo.ac.jp"}),m("option",{value:"localhost"})],-1)),Fx={class:"dialog-form-item"},$x=mt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Hx={ref:"port",class:"number",list:"csa-server-port-number",type:"number"},Ux=mt(()=>m("datalist",{id:"csa-server-port-number"},[m("option",{value:"4081"})],-1)),zx={class:"dialog-form-item"},Wx=mt(()=>m("div",{class:"dialog-form-item-label-wide"},"ID",-1)),Gx={ref:"id",class:"long-text",type:"text"},Vx={class:"dialog-form-item"},jx=mt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Kx={ref:"password",class:"long-text",type:"password"},qx={class:"dialog-form-item"},Yx=mt(()=>m("label",{for:"show-password"},"",-1)),Xx={class:"dialog-form-area dialog-form-item dialog-form-warning"},Jx={key:0,class:"dialog-form-note"},Zx={key:1,class:"dialog-form-note"},Qx={class:"dialog-form-item"},e2={id:"save-history",ref:"saveHistory",type:"checkbox",checked:""},t2={for:"save-history"},i2={class:"dialog-form-area"},n2={class:"dialog-form-item"},s2=mt(()=>m("div",{class:"dialog-form-item-label-wide number"},"",-1)),o2={ref:"repeat",class:"number",type:"number",min:"1"},r2={class:"dialog-form-item"},a2={id:"auto-relogin",ref:"autoRelogin",type:"checkbox"},l2=mt(()=>m("label",{for:"auto-relogin"},"",-1)),c2={class:"dialog-form-item"},u2={id:"enable-comment",ref:"enableComment",type:"checkbox"},h2=mt(()=>m("label",{for:"enable-comment"},"",-1)),d2={class:"dialog-form-item"},f2={id:"enable-auto-save",ref:"enableAutoSave",type:"checkbox"},p2=mt(()=>m("label",{for:"enable-auto-save"},"",-1)),g2={class:"dialog-form-item"},m2={id:"auto-flip",ref:"autoFlip",type:"checkbox"},b2=mt(()=>m("label",{for:"auto-flip"},"",-1)),_2={class:"dialog-main-buttons"};function y2(t,e,i,n,s,o){const r=we("PlayerSelector");return T(),O("div",null,[m("dialog",ux,[hx,m("div",dx,[t.logEnabled?ue("",!0):(T(),O("div",fx,gx)),m("div",mx,[bx,K(r,{"player-uri":t.playerURI,"contains-human":!0,"engine-settings":t.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),m("div",_x,[m("div",yx,[vx,m("select",{class:"long-text",value:"0",onChange:e[0]||(e[0]=(...a)=>t.onChangeHistory&&t.onChangeHistory(...a))},[t.history.serverHistory.length===0?(T(),O("option",Sx,"  ")):ue("",!0),(T(!0),O(Pe,null,Ye(t.history.serverHistory,(a,l)=>(T(),O("option",{key:l,value:l},fe(a.host)+":"+fe(a.port)+" "+fe(a.id),9,wx))),128))],32)]),Ex,m("div",Ax,[xx,m("select",{ref:"protocolVersion",class:"long-text",value:"CSA_v121",onChange:e[1]||(e[1]=(...a)=>t.onChangeProtocolVersion&&t.onChangeProtocolVersion(...a))},[m("option",{value:t.CSAProtocolVersion.V121}," CSA1.2.1  ",8,Ix),m("option",{value:t.CSAProtocolVersion.V121_FLOODGATE}," CSA1.2.1  ",8,kx)],544)]),t.selectedProtocolVersion===t.CSAProtocolVersion.V121?(T(),O("div",Cx,Mx)):ue("",!0),t.selectedProtocolVersion===t.CSAProtocolVersion.V121_FLOODGATE?(T(),O("div",Tx,Rx)):ue("",!0),m("div",Dx,[Nx,m("input",Ox,null,512),Lx]),m("div",Fx,[$x,m("input",Hx,null,512),Ux]),m("div",zx,[Wx,m("input",Gx,null,512)]),m("div",Vx,[jx,m("input",Kx,null,512)]),m("div",qx,[m("input",{id:"show-password",type:"checkbox",onChange:e[2]||(e[2]=(...a)=>t.onTogglePasswordVisibility&&t.onTogglePasswordVisibility(...a))},null,32),Yx]),m("div",Xx,[t.isEncryptionAvailable?(T(),O("div",Jx," CSA ")):(T(),O("div",Zx," OS  CSA "))]),m("div",Qx,[m("input",e2,null,512),m("label",t2," "+fe(t.maxServerHistoryLenght)+" ",1)])]),m("div",i2,[m("div",n2,[s2,m("input",o2,null,512)]),m("div",r2,[m("input",a2,null,512),l2]),m("div",c2,[m("input",u2,null,512),h2]),m("div",d2,[m("input",f2,null,512),p2]),m("div",g2,[m("input",m2,null,512),b2])])]),m("div",_2,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[3]||(e[3]=a=>t.onStart())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[4]||(e[4]=a=>t.onCancel())},"  ")])],512)])}const v2=We(cx,[["render",y2],["__scopeId","data-v-d3190899"]]),S2=ze({name:"ResearchDialog",components:{PlayerSelector:Nr},setup(){const t=Xe(),e=V(null),i=V(Ra()),n=V(new Vi),s=V(""),o=V([]);return t.retainBussyState(),st(async()=>{var c,u;Et(e.value),ii(e.value);try{i.value=await pe.loadResearchSetting(),n.value=await pe.loadUSIEngineSetting(),s.value=((c=i.value.usi)==null?void 0:c.uri)||"",o.value=((u=i.value.secondaries)==null?void 0:u.map(h=>{var d;return((d=h.usi)==null?void 0:d.uri)||""}))||[]}catch(h){t.pushError(h),t.destroyModalDialog()}finally{t.releaseBussyState()}}),zt(()=>{ni(e.value)}),{dialog:e,engineSettings:n,engineURI:s,secondaryEngineURIs:o,onStart:()=>{const c=n.value.getEngine(s.value),u=[];for(const p of o.value){const _=n.value.getEngine(p);u.push({usi:_})}const h={usi:c,secondaries:u},d=p1(h);if(d){t.pushError(d);return}t.startResearch(h)},onCancel:()=>{t.closeModalDialog()},onUpdatePlayerSetting:async c=>{n.value=c}}}});const w2=t=>(qt("data-v-6bc77ff2"),t=t(),Yt(),t),E2={ref:"dialog",class:"root"},A2=w2(()=>m("div",{class:"dialog-title"},"",-1)),x2={class:"dialog-form-area"},I2={class:"dialog-form-area"},k2=["onClick"],C2={class:"dialog-main-buttons"};function P2(t,e,i,n,s,o){const r=we("PlayerSelector");return T(),O("div",null,[m("dialog",E2,[A2,m("div",x2,[m("div",I2,[K(r,{"player-uri":t.engineURI,"engine-settings":t.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:e[0]||(e[0]=a=>{t.engineURI=a})},null,8,["player-uri","engine-settings","onUpdateEngineSetting"])]),(T(!0),O(Pe,null,Ye(t.secondaryEngineURIs,(a,l)=>(T(),O("div",{key:l,class:"dialog-form-area"},[K(r,{"player-uri":a,"engine-settings":t.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:c=>{t.secondaryEngineURIs[l]=c}},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"]),m("button",{class:"remove-button",onClick:c=>t.secondaryEngineURIs.splice(l,1)},"  ",8,k2)]))),128)),m("button",{onClick:e[1]||(e[1]=a=>t.secondaryEngineURIs.push(""))},fe(t.secondaryEngineURIs.length+2)+"  ",1)]),m("div",C2,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[2]||(e[2]=a=>t.onStart())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[3]||(e[3]=a=>t.onCancel())},"  ")])],512)])}const M2=We(S2,[["render",P2],["__scopeId","data-v-6bc77ff2"]]),T2=ze({name:"USIEngineManagementDialog",components:{USIEngineOptionDialog:op},setup(){const t=Xe(),e=V(null),i=V(null),n=V(new Vi);return t.retainBussyState(),st(async()=>{Et(e.value),ii(e.value);try{n.value=await pe.loadUSIEngineSetting()}catch(d){t.pushError(d),t.destroyModalDialog()}finally{t.releaseBussyState()}}),zt(()=>{ni(e.value)}),{optionDialog:i,dialog:e,setting:n,add:async()=>{try{t.retainBussyState();const d=await pe.showSelectUSIEngineDialog();if(!d)return;const p=t.appSetting.engineTimeoutSeconds;n.value.addEngine(await pe.getUSIEngineInfo(d,p))}catch(d){t.pushError(d)}finally{t.releaseBussyState()}},remove:d=>{n.value.removeEngine(d)},openOptions:d=>{i.value=n.value.getEngine(d)},duplicate:d=>{const p=n.value.getEngine(d),_=l1(p);n.value.addEngine(_)},saveAndClose:async()=>{try{t.retainBussyState(),await pe.saveUSIEngineSetting(n.value),t.destroyModalDialog()}catch(d){t.pushError(d)}finally{t.releaseBussyState()}},cancel:()=>{t.closeModalDialog()},optionOk:d=>{n.value.updateEngine(d),i.value=null},optionCancel:()=>{i.value=null}}}});const B2=t=>(qt("data-v-671a4b79"),t=t(),Yt(),t),R2={ref:"dialog"},D2=B2(()=>m("div",{class:"dialog-title"},"",-1)),N2={class:"dialog-form-area engine-list"},O2={key:0,class:"engine"},L2=["value"],F2={class:"engine-name"},$2=["onClick"],H2=["onClick"],U2=["onClick"],z2={class:"dialog-main-buttons"};function W2(t,e,i,n,s,o){const r=we("USIEngineOptionDialog");return T(),O(Pe,null,[m("div",null,[m("dialog",R2,[D2,m("div",N2,[t.setting.engineList.length===0?(T(),O("div",O2,"  ")):ue("",!0),(T(!0),O(Pe,null,Ye(t.setting.engineList,a=>(T(),O("div",{key:a.uri,class:"engine",value:a.uri},[m("div",F2,fe(a.name),1),m("button",{onClick:l=>t.openOptions(a.uri)},"",8,$2),m("button",{onClick:l=>t.duplicate(a.uri)},"",8,H2),m("button",{onClick:l=>t.remove(a.uri)},"",8,U2)],8,L2))),128))]),m("button",{class:"dialog-wide-button",onClick:e[0]||(e[0]=a=>t.add())},""),m("div",z2,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[1]||(e[1]=a=>t.saveAndClose())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[2]||(e[2]=a=>t.cancel())},"  ")])],512)]),t.optionDialog?(T(),Ge(r,{key:0,"latest-engine-setting":t.optionDialog,onOk:t.optionOk,onCancel:t.optionCancel},null,8,["latest-engine-setting","onOk","onCancel"])):ue("",!0)],64)}const G2=We(T2,[["render",W2],["__scopeId","data-v-671a4b79"]]),V2={"\r\n":"crlf","\n":"lf","\r":"cr"},j2={crlf:`\r
`,lf:`
`,cr:"\r"},K2=ze({name:"AppSettingDialog",setup(){const t=Xe(),e=V(null),i=V(null),n=V(null),s=V(null),o=V(null),r=V(null),a=V(null),l=V(null),c=V(null),u=V(null),h=V(null),d=V(null),p=V(null),_=V(null),b=V(null),v=V(null),y=V(null),w=V(null),E=V(null),x=V(null),k=V(null);st(()=>{Et(e.value),ii(e.value)}),zt(()=>{ni(e.value)});const B=async()=>{const Y={thema:i.value.value,pieceImage:n.value.value,boardImage:s.value.value,boardLabelType:o.value.checked?xs.STANDARD:xs.NONE,tabPaneType:r.value.value,pieceVolume:pt(a.value),clockVolume:pt(l.value),clockPitch:pt(c.value),clockSoundTarget:u.value.value,returnCode:j2[h.value.value],autoSaveDirectory:d.value.value,engineTimeoutSeconds:pt(p.value),coefficientInSigmoid:pt(_.value),badMoveLevelThreshold1:pt(b.value),badMoveLevelThreshold2:pt(v.value),badMoveLevelThreshold3:pt(y.value),badMoveLevelThreshold4:pt(w.value),enableAppLog:E.value.checked,enableUSILog:x.value.checked,enableCSALog:k.value.checked};t.retainBussyState();try{await t.updateAppSetting(Y),t.closeAppSettingDialog()}catch(q){t.pushError(q)}finally{t.releaseBussyState()}},H=async()=>{t.retainBussyState();try{const Y=await pe.showSelectDirectoryDialog(d.value.value);Y&&(d.value.value=Y)}catch(Y){t.pushError(Y)}finally{t.releaseBussyState()}},G=()=>{t.closeAppSettingDialog()},te=ge(()=>({...t.appSetting,returnCode:V2[t.appSetting.returnCode]}));return{Thema:vl,PieceImageType:In,BoardImageType:Le,BoardLabelType:xs,TabPaneType:Zo,dialog:e,thema:i,pieceImage:n,boardImage:s,displayBoardLabels:o,tabPaneType:r,pieceVolume:a,clockVolume:l,clockPitch:c,clockSoundTarget:u,returnCode:h,autoSaveDirectory:d,engineTimeoutSeconds:p,coefficientInSigmoid:_,badMoveLevelThreshold1:b,badMoveLevelThreshold2:v,badMoveLevelThreshold3:y,badMoveLevelThreshold4:w,enableAppLog:E,enableUSILog:x,enableCSALog:k,appSetting:te,isNative:er(),selectAutoSaveDirectory:H,saveAndClose:B,cancel:G}}});const Ee=t=>(qt("data-v-b2b59af5"),t=t(),Yt(),t),q2={ref:"dialog"},Y2=Ee(()=>m("div",{class:"dialog-title"},"",-1)),X2={class:"dialog-scroll-area settings"},J2={class:"section"},Z2=Ee(()=>m("div",{class:"section-title"},"",-1)),Q2={class:"dialog-form-item"},eI=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),tI=["value"],iI=["value"],nI=["value"],sI=["value"],oI=["value"],rI=["value"],aI={class:"dialog-form-item"},lI=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),cI=["value"],uI=["value"],hI=["value"],dI=["value"],fI=["value"],pI={class:"dialog-form-item"},gI=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),mI=["value"],bI=["value"],_I=["value"],yI=["value"],vI=["value"],SI=["value"],wI=["value"],EI=["value"],AI=["value"],xI={class:"dialog-form-item"},II=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),kI=["checked"],CI={class:"dialog-form-item"},PI=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),MI=["value"],TI=["value"],BI=["value"],RI=Ee(()=>m("hr",null,null,-1)),DI={class:"section"},NI=Ee(()=>m("div",{class:"section-title"},"",-1)),OI={class:"dialog-form-item"},LI=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),FI=["value"],$I=Ee(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),HI={class:"dialog-form-item"},UI=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),zI=["value"],WI=Ee(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),GI={class:"dialog-form-item"},VI=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),jI=["value"],KI=Ee(()=>m("div",{class:"dialog-form-item-unit"},"Hz (220  880 )",-1)),qI={class:"dialog-form-item"},YI=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),XI=["value"],JI=Ee(()=>m("option",{value:"all"},"",-1)),ZI=Ee(()=>m("option",{value:"onlyUser"},"",-1)),QI=[JI,ZI],ek=Ee(()=>m("hr",null,null,-1)),tk={class:"section"},ik=Ee(()=>m("div",{class:"section-title"},"",-1)),nk={class:"dialog-form-item"},sk=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),ok=["value"],rk=Ee(()=>m("option",{value:"crlf"},"CR + LF (Windows)",-1)),ak=Ee(()=>m("option",{value:"lf"},"LF (UNIX/Mac)",-1)),lk=Ee(()=>m("option",{value:"cr"},"CR (90Mac)",-1)),ck=[rk,ak,lk],uk={class:"dialog-form-item"},hk=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),dk=["value"],fk=Ee(()=>m("hr",null,null,-1)),pk={class:"section"},gk=Ee(()=>m("div",{class:"section-title"},"USI",-1)),mk={class:"dialog-form-item"},bk=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),_k=["value"],yk=Ee(()=>m("div",{class:"dialog-form-item-unit"}," (1  300 )",-1)),vk=Ee(()=>m("hr",null,null,-1)),Sk={class:"section"},wk=Ee(()=>m("div",{class:"section-title"},"",-1)),Ek={class:"dialog-form-item"},Ak=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),xk=["value"],Ik=Ee(()=>m("div",{class:"dialog-form-item-unit"},"(: 600  1500 )",-1)),kk={class:"dialog-form-item"},Ck=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Pk=["value"],Mk=Ee(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),Tk={class:"dialog-form-item"},Bk=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Rk=["value"],Dk=Ee(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),Nk={class:"dialog-form-item"},Ok=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Lk=["value"],Fk=Ee(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),$k={class:"dialog-form-item"},Hk=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Uk=["value"],zk=Ee(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),Wk=Ee(()=>m("hr",null,null,-1)),Gk={class:"section"},Vk=Ee(()=>m("div",{class:"section-title"},"",-1)),jk={class:"dialog-form-area dialog-form-warning"},Kk={key:0,class:"dialog-form-note"},qk=Ee(()=>m("div",{class:"dialog-form-note"},"  ",-1)),Yk=Ee(()=>m("div",{class:"dialog-form-note"}," - ",-1)),Xk=Ee(()=>m("div",{class:"dialog-form-note"},"  ",-1)),Jk={class:"dialog-form-item"},Zk=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Qk=["checked"],eC={class:"dialog-form-item"},tC=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"USI",-1)),iC=["checked"],nC={class:"dialog-form-item"},sC=Ee(()=>m("div",{class:"dialog-form-item-label-wide"},"CSA",-1)),oC=["checked"],rC={class:"dialog-main-buttons"};function aC(t,e,i,n,s,o){return T(),O("div",null,[m("dialog",q2,[Y2,m("div",X2,[m("div",J2,[Z2,m("div",Q2,[eI,m("select",{ref:"thema",value:t.appSetting.thema},[m("option",{value:t.Thema.STANDARD},"",8,iI),m("option",{value:t.Thema.CHERRY_BLOSSOM},"",8,nI),m("option",{value:t.Thema.AUTUMN},"",8,sI),m("option",{value:t.Thema.SNOW},"",8,oI),m("option",{value:t.Thema.DARK},"",8,rI)],8,tI)]),m("div",aI,[lI,m("select",{ref:"pieceImage",value:t.appSetting.pieceImage},[m("option",{value:t.PieceImageType.HITOMOJI},"",8,uI),m("option",{value:t.PieceImageType.HITOMOJI_GOTHIC},"  ",8,hI),m("option",{value:t.PieceImageType.HITOMOJI_DARK},"  ",8,dI),m("option",{value:t.PieceImageType.HITOMOJI_GOTHIC_DARK},"  ",8,fI)],8,cI)]),m("div",pI,[gI,m("select",{ref:"boardImage",value:t.appSetting.boardImage},[m("option",{value:t.BoardImageType.LIGHT},"",8,bI),m("option",{value:t.BoardImageType.WARM},"",8,_I),m("option",{value:t.BoardImageType.RESIN},"",8,yI),m("option",{value:t.BoardImageType.RESIN2},"2",8,vI),m("option",{value:t.BoardImageType.RESIN3},"3",8,SI),m("option",{value:t.BoardImageType.DARK},"",8,wI),m("option",{value:t.BoardImageType.GREEN},"",8,EI),m("option",{value:t.BoardImageType.CHERRY_BLOSSOM},"",8,AI)],8,mI)]),m("div",xI,[II,m("input",{ref:"displayBoardLabels",class:"toggle",checked:t.appSetting.boardLabelType!=t.BoardLabelType.NONE,type:"checkbox"},null,8,kI)]),m("div",CI,[PI,m("select",{ref:"tabPaneType",value:t.appSetting.tabPaneType},[m("option",{value:t.TabPaneType.SINGLE},"1",8,TI),m("option",{value:t.TabPaneType.DOUBLE},"2",8,BI)],8,MI)])]),RI,m("div",DI,[NI,m("div",OI,[LI,m("input",{ref:"pieceVolume",value:t.appSetting.pieceVolume,type:"number",max:"100",min:"0"},null,8,FI),$I]),m("div",HI,[UI,m("input",{ref:"clockVolume",value:t.appSetting.clockVolume,type:"number",max:"100",min:"0"},null,8,zI),WI]),m("div",GI,[VI,m("input",{ref:"clockPitch",value:t.appSetting.clockPitch,type:"number",max:"880",min:"220"},null,8,jI),KI]),m("div",qI,[YI,m("select",{ref:"clockSoundTarget",value:t.appSetting.clockSoundTarget},QI,8,XI)])]),ek,m("div",tk,[ik,m("div",nk,[sk,m("select",{ref:"returnCode",value:t.appSetting.returnCode},ck,8,ok)]),m("div",uk,[hk,m("input",{ref:"autoSaveDirectory",class:"directory",value:t.appSetting.autoSaveDirectory,type:"text"},null,8,dk),m("button",{class:"dialog-button",onClick:e[0]||(e[0]=(...r)=>t.selectAutoSaveDirectory&&t.selectAutoSaveDirectory(...r))},"  ")])]),fk,m("div",pk,[gk,m("div",mk,[bk,m("input",{ref:"engineTimeoutSeconds",value:t.appSetting.engineTimeoutSeconds,type:"number",max:"300",min:"1"},null,8,_k),yk])]),vk,m("div",Sk,[wk,m("div",Ek,[Ak,m("input",{ref:"coefficientInSigmoid",value:t.appSetting.coefficientInSigmoid,type:"number",max:"10000",min:"1"},null,8,xk),Ik]),m("div",kk,[Ck,m("input",{ref:"badMoveLevelThreshold1",value:t.appSetting.badMoveLevelThreshold1,type:"number",max:"100",min:"0"},null,8,Pk),Mk]),m("div",Tk,[Bk,m("input",{ref:"badMoveLevelThreshold2",value:t.appSetting.badMoveLevelThreshold2,type:"number",max:"100",min:"0"},null,8,Rk),Dk]),m("div",Nk,[Ok,m("input",{ref:"badMoveLevelThreshold3",value:t.appSetting.badMoveLevelThreshold3,type:"number",max:"100",min:"0"},null,8,Lk),Fk]),m("div",$k,[Hk,m("input",{ref:"badMoveLevelThreshold4",value:t.appSetting.badMoveLevelThreshold4,type:"number",max:"100",min:"0"},null,8,Uk),zk])]),Wk,m("div",Gk,[Vk,m("div",jk,[t.isNative?ue("",!0):(T(),O("div",Kk,"  ")),qk,Yk,Xk]),m("div",Jk,[Zk,m("input",{ref:"enableAppLog",class:"toggle",checked:t.appSetting.enableAppLog,type:"checkbox"},null,8,Qk)]),m("div",eC,[tC,m("input",{ref:"enableUSILog",class:"toggle",checked:t.appSetting.enableUSILog,type:"checkbox"},null,8,iC)]),m("div",nC,[sC,m("input",{ref:"enableCSALog",class:"toggle",checked:t.appSetting.enableCSALog,type:"checkbox"},null,8,oC)])])]),m("div",rC,[m("button",{class:"dialog-button","data-hotkey":"Enter",autofocus:"",onClick:e[1]||(e[1]=r=>t.saveAndClose())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[2]||(e[2]=r=>t.cancel())},"  ")])],512)])}const lC=We(K2,[["render",aC],["__scopeId","data-v-b2b59af5"]]),cC=ze({name:"PasteDialog",setup(){const t=Xe(),e=V(null),i=V(null);return t.retainBussyState(),st(async()=>{try{Et(e.value),ii(e.value),er()&&(i.value.value=await navigator.clipboard.readText())}finally{t.releaseBussyState()}}),zt(()=>{ni(e.value)}),{dialog:e,textarea:i,onOk:()=>{const o=i.value.value;if(!o){t.pushError(new Error(""));return}t.closeModalDialog(),t.pasteRecord(o)},onCancel:()=>{t.closeModalDialog()},isNative:er()}}});const Kl=t=>(qt("data-v-754c99ff"),t=t(),Yt(),t),uC={ref:"dialog"},hC={ref:"content"},dC={class:"dialog-form-area"},fC=Kl(()=>m("div",{class:"message"},"()",-1)),pC=Kl(()=>m("div",{class:"message"},"KIF/CSA/SFEN",-1)),gC={key:0,class:"message"},mC=Kl(()=>m("br",null,null,-1)),bC={ref:"textarea"},_C={class:"dialog-main-buttons"};function yC(t,e,i,n,s,o){return T(),O("div",null,[m("dialog",uC,[m("div",hC,[m("div",dC,[fC,pC,t.isNative?ue("",!0):(T(),O("div",gC,[qe(" "),mC,qe("  ")])),m("textarea",bC,null,512)])],512),m("div",_C,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[0]||(e[0]=(...r)=>t.onOk&&t.onOk(...r))},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[1]||(e[1]=(...r)=>t.onCancel&&t.onCancel(...r))},"  ")])],512)])}const vC=We(cC,[["render",yC],["__scopeId","data-v-754c99ff"]]),SC=ze({name:"BussyMessage",components:{ButtonIcon:Ot},setup(){const t=V(null);return st(()=>{Et(t.value)}),{dialog:t,Icon:tt}}});const wC=t=>(qt("data-v-5630f43b"),t=t(),Yt(),t),EC={ref:"dialog",class:"bussy"},AC={class:"message-box"},xC=wC(()=>m("div",{class:"message"},"",-1));function IC(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",null,[m("dialog",EC,[m("div",AC,[K(r,{class:"icon",icon:t.Icon.BUSSY},null,8,["icon"]),xC])],512)])}const kC=We(SC,[["render",IC],["__scopeId","data-v-5630f43b"]]),CC=ze({name:"InfoMessage",components:{ButtonIcon:Ot},setup(){const t=Xe(),e=V(null),i=ge(()=>t.confirmation),n=()=>{t.confirmationOk()},s=()=>{t.confirmationCancel()};return st(()=>{Et(e.value,s),ii(e.value)}),zt(()=>{ni(e.value)}),{dialog:e,message:i,onOk:n,onClose:s,Icon:tt}}});const PC={ref:"dialog",class:"confirm"},MC={class:"message-box"},TC={class:"message"},BC={class:"dialog-main-buttons"};function RC(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",null,[m("dialog",PC,[m("div",MC,[K(r,{class:"icon",icon:t.Icon.QUESTION},null,8,["icon"]),m("div",TC,fe(t.message),1)]),m("div",BC,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[0]||(e[0]=a=>t.onOk())}," OK "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[1]||(e[1]=a=>t.onClose())},"  ")])],512)])}const DC=We(CC,[["render",RC],["__scopeId","data-v-1f6a3abe"]]),NC=ze({name:"InfoMessage",components:{ButtonIcon:Ot},setup(){const t=Xe(),e=V(null);st(()=>{Et(e.value),ii(e.value)}),zt(()=>{ni(e.value)});const i=ge(()=>t.message);return{dialog:e,message:i,onClose:()=>{t.dequeueMessage()},Icon:tt}}});const OC={ref:"dialog",class:"info"},LC={class:"message-box"},FC={class:"message"},$C={key:0,class:"list"},HC={class:"dialog-main-buttons"};function UC(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",null,[m("dialog",OC,[m("div",LC,[K(r,{class:"icon",icon:t.Icon.INFO},null,8,["icon"]),m("div",FC,fe(t.message.text),1)]),(T(!0),O(Pe,null,Ye(t.message.attachments,(a,l)=>(T(),O("div",{key:l,class:"attachment"},[a.type==="list"?(T(),O("ul",$C,[(T(!0),O(Pe,null,Ye(a.items,(c,u)=>(T(),O("li",{key:u,class:"list-item"},[qe(fe(c.text)+" ",1),m("ul",null,[(T(!0),O(Pe,null,Ye(c.children,(h,d)=>(T(),O("li",{key:d,class:"list-child-item"},fe(h),1))),128))])]))),128))])):ue("",!0)]))),128)),m("div",HC,[m("button",{autofocus:"","data-hotkey":"Escape",onClick:e[0]||(e[0]=a=>t.onClose())},"  ")])],512)])}const zC=We(NC,[["render",UC],["__scopeId","data-v-2a1dd045"]]),WC=ze({name:"ErrorMessage",components:{ButtonIcon:Ot},setup(){const t=Xe(),e=V(null);st(()=>{Et(e.value),ii(e.value)}),zt(()=>{ni(e.value)});const i=ge(()=>t.errors);return{dialog:e,errors:i,onClose:()=>{t.clearErrors()},Icon:tt}}});const GC={ref:"dialog",class:"error"},VC={class:"message-box"},jC={class:"items"},KC={class:"notice"},qC={class:"index"},YC={key:0},XC={class:"message"},JC={class:"dialog-main-buttons"};function ZC(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",null,[m("dialog",GC,[m("div",VC,[K(r,{class:"icon",icon:t.Icon.ERROR},null,8,["icon"]),m("div",jC,[m("div",KC,fe(t.errors.length)+"  ",1),(T(!0),O(Pe,null,Ye(t.errors,(a,l)=>(T(),O("div",{key:l,class:"item"},[m("p",qC,[qe(fe(l+1)+" ",1),a.count>=2?(T(),O("span",YC,"("+fe(a.count)+" )",1)):ue("",!0)]),m("p",XC,fe(a.message),1)]))),128))])]),m("div",JC,[m("button",{autofocus:"","data-hotkey":"Escape",onClick:e[0]||(e[0]=a=>t.onClose())},"  ")])],512)])}const QC=We(WC,[["render",ZC],["__scopeId","data-v-fe8be49b"]]),e5=ze({name:"ResearchDialog",components:{PlayerSelector:Nr},setup(){const t=Xe(),e=V(null),i=V(null),n=V(null),s=V(null),o=V(null),r=V(null),a=V(null),l=V(Ba()),c=V(new Vi),u=V("");t.retainBussyState(),st(async()=>{var y;Et(e.value),ii(e.value);try{l.value=await pe.loadAnalysisSetting(),c.value=await pe.loadUSIEngineSetting(),u.value=((y=l.value.usi)==null?void 0:y.uri)||""}catch(w){t.pushError(w),t.destroyModalDialog()}finally{t.releaseBussyState()}}),zt(()=>{ni(e.value)});const h=()=>{n.value.disabled=!i.value.checked,o.value.disabled=!s.value.checked},d=()=>{if(!u.value||!c.value.hasEngine(u.value)){t.pushError("");return}const w={usi:c.value.getEngine(u.value),startCriteria:{enableNumber:i.value.checked,number:pt(n.value)},endCriteria:{enableNumber:s.value.checked,number:pt(o.value)},perMoveCriteria:{maxSeconds:pt(r.value)},commentBehavior:a.value.value};t.startAnalysis(w)},p=()=>{t.closeModalDialog()},_=async y=>{c.value=y},b=y=>{u.value=y},v=ge(()=>({enableStartNumber:l.value.startCriteria.enableNumber,startNumber:l.value.startCriteria.number,enableEndNumber:l.value.endCriteria.enableNumber,endNumber:l.value.endCriteria.number,maxSecondsPerMove:l.value.perMoveCriteria.maxSeconds,commentBehavior:l.value.commentBehavior}));return{CommentBehavior:$i,dialog:e,engineSettings:c,engineURI:u,enableStartNumber:i,startNumber:n,enableEndNumber:s,endNumber:o,maxSecondsPerMove:r,commentBehavior:a,defaultValues:v,updateToggle:h,onStart:d,onCancel:p,onUpdatePlayerSetting:_,onSelectPlayer:b}}});const Pi=t=>(qt("data-v-9d73d437"),t=t(),Yt(),t),t5={ref:"dialog",class:"root"},i5=Pi(()=>m("div",{class:"dialog-title"},"",-1)),n5={class:"dialog-form-area"},s5=Pi(()=>m("div",null,"",-1)),o5={class:"dialog-form-area"},r5=Pi(()=>m("div",null,"",-1)),a5={class:"dialog-form-item"},l5=["checked"],c5=["disabled","value"],u5=Pi(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),h5={class:"dialog-form-area"},d5=Pi(()=>m("div",null,"",-1)),f5={class:"dialog-form-item"},p5=["checked"],g5=["disabled","value"],m5=Pi(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),b5={class:"dialog-form-area"},_5=Pi(()=>m("div",null,"",-1)),y5={class:"dialog-form-item"},v5=["value"],S5=Pi(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),w5={class:"dialog-form-area"},E5=Pi(()=>m("div",null,"",-1)),A5={class:"dialog-form-item"},x5=Pi(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),I5=["value"],k5=["value"],C5=["value"],P5=["value"],M5=["value"],T5={class:"dialog-main-buttons"};function B5(t,e,i,n,s,o){const r=we("PlayerSelector");return T(),O("div",null,[m("dialog",t5,[i5,m("div",n5,[s5,K(r,{"player-uri":t.engineURI,"engine-settings":t.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),m("div",o5,[r5,m("div",a5,[m("input",{ref:"enableStartNumber",class:"toggle",type:"checkbox",checked:t.defaultValues.enableStartNumber,onChange:e[0]||(e[0]=(...a)=>t.updateToggle&&t.updateToggle(...a))},null,40,l5),m("input",{ref:"startNumber",class:"small",type:"number",min:"1",step:"1",disabled:!t.defaultValues.enableStartNumber,value:t.defaultValues.startNumber},null,8,c5),u5])]),m("div",h5,[d5,m("div",f5,[m("input",{ref:"enableEndNumber",class:"toggle",type:"checkbox",checked:t.defaultValues.enableEndNumber,onChange:e[1]||(e[1]=(...a)=>t.updateToggle&&t.updateToggle(...a))},null,40,p5),m("input",{ref:"endNumber",class:"small",type:"number",min:"1",step:"1",disabled:!t.defaultValues.enableEndNumber,value:t.defaultValues.endNumber},null,8,g5),m5])]),m("div",b5,[_5,m("div",y5,[m("input",{ref:"maxSecondsPerMove",class:"small",type:"number",min:"0",step:"1",value:t.defaultValues.maxSecondsPerMove},null,8,v5),S5])]),m("div",w5,[E5,m("div",A5,[x5,m("select",{ref:"commentBehavior",size:"1",value:t.defaultValues.commentBehavior},[m("option",{value:t.CommentBehavior.NONE},"",8,k5),m("option",{value:t.CommentBehavior.INSERT},"",8,C5),m("option",{value:t.CommentBehavior.APPEND},"",8,P5),m("option",{value:t.CommentBehavior.OVERWRITE},"",8,M5)],8,I5)])]),m("div",T5,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[2]||(e[2]=a=>t.onStart())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[3]||(e[3]=a=>t.onCancel())},"  ")])],512)])}const R5=We(e5,[["render",B5],["__scopeId","data-v-9d73d437"]]),D5=ze({name:"CSAGameReadyDialog",components:{ButtonIcon:Ot},setup(){const t=Xe(),e=V(null);return st(()=>{Et(e.value),ii(e.value)}),zt(()=>{ni(e.value)}),{dialog:e,Icon:tt,onLogout:()=>{t.logoutCSAGame()}}}});const N5=t=>(qt("data-v-aff29645"),t=t(),Yt(),t),O5={ref:"dialog",class:"bussy"},L5={class:"message-box"},F5=N5(()=>m("div",{class:"message"},"",-1)),$5={class:"dialog-main-buttons"};function H5(t,e,i,n,s,o){const r=we("ButtonIcon");return T(),O("div",null,[m("dialog",O5,[m("div",L5,[K(r,{class:"icon",icon:t.Icon.BUSSY},null,8,["icon"]),F5]),m("div",$5,[m("button",{autofocus:"","data-hotkey":"Escape",onClick:e[0]||(e[0]=a=>t.onLogout())},"  ")])],512)])}const U5=We(D5,[["render",H5],["__scopeId","data-v-aff29645"]]),z5=ze({name:"App",components:{StandardLayout:uA,GameDialog:lx,CSAGameDialog:v2,ResearchDialog:M2,USIEngineManagementDialog:G2,AppSettingDialog:lC,PasteDialog:vC,BussyMessage:kC,ConfirmDialog:DC,InfoMessage:zC,ErrorMessage:QC,AnalysisDialog:R5,CSAGameReadyDialog:U5},setup(){const t=Xe(),e=ge(()=>t.appSetting.thema),i=ge(()=>({game:t.appState===W.GAME_DIALOG,csaGame:t.appState===W.CSA_GAME_DIALOG,research:t.appState===W.RESEARCH_DIALOG,analysis:t.appState===W.ANALYSIS_DIALOG,usiEngineSetting:t.appState===W.USI_ENGINE_SETTING_DIALOG,appSetting:t.isAppSettingDialogVisible,paste:t.appState===W.PASTE_DIALOG,bussy:t.isBussy,confirm:t.confirmation!==void 0,csaGameReady:t.csaGameState===Pr.READY})),n=ge(()=>t.hasMessage),s=ge(()=>t.hasError);return st(()=>{const o=document.getElementsByTagName("body")[0];o.addEventListener("copy",r=>{t.copyRecordKIF(),r.preventDefault()}),o.addEventListener("paste",r=>{t.showPasteDialog(),r.preventDefault()}),o.addEventListener("dragover",r=>{r.preventDefault()}),o.addEventListener("drop",r=>{if(r.dataTransfer&&r.dataTransfer.files[0]){const a=r.dataTransfer.files[0].path;t.openRecord(a)}r.preventDefault()})}),{thema:e,dialogVisibilities:i,hasMessage:n,hasErrors:s}}});function W5(t,e,i,n,s,o){const r=we("StandardLayout"),a=we("GameDialog"),l=we("CSAGameDialog"),c=we("ResearchDialog"),u=we("AnalysisDialog"),h=we("USIEngineManagementDialog"),d=we("AppSettingDialog"),p=we("PasteDialog"),_=we("BussyMessage"),b=we("ConfirmDialog"),v=we("CSAGameReadyDialog"),y=we("InfoMessage"),w=we("ErrorMessage");return T(),O("div",{class:ei(["root",t.thema])},[K(r,{class:"main"}),t.dialogVisibilities.game?(T(),Ge(a,{key:0})):ue("",!0),t.dialogVisibilities.csaGame?(T(),Ge(l,{key:1})):ue("",!0),t.dialogVisibilities.research?(T(),Ge(c,{key:2})):ue("",!0),t.dialogVisibilities.analysis?(T(),Ge(u,{key:3})):ue("",!0),t.dialogVisibilities.usiEngineSetting?(T(),Ge(h,{key:4})):ue("",!0),t.dialogVisibilities.appSetting?(T(),Ge(d,{key:5})):ue("",!0),t.dialogVisibilities.paste?(T(),Ge(p,{key:6})):ue("",!0),t.dialogVisibilities.bussy?(T(),Ge(_,{key:7})):ue("",!0),t.dialogVisibilities.confirm?(T(),Ge(b,{key:8})):ue("",!0),t.dialogVisibilities.csaGameReady?(T(),Ge(v,{key:9})):ue("",!0),t.hasMessage?(T(),Ge(y,{key:10})):ue("",!0),t.hasErrors?(T(),Ge(w,{key:11})):ue("",!0)],2)}const G5=We(z5,[["render",W5],["__scopeId","data-v-211e761b"]]);var Se=(t=>(t.NEW_RECORD="resetRecord",t.OPEN_RECORD="openRecord",t.SAVE_RECORD="saveRecord",t.SAVE_RECORD_AS="saveRecordAs",t.COPY_RECORD="copyRecord",t.COPY_RECORD_CSA="copyRecordCsa",t.COPY_RECORD_USI_BEFORE="copyRecordUsiBefore",t.COPY_RECORD_USI_ALL="copyRecordUsiAll",t.COPY_BOARD_SFEN="copyRecordSfen",t.PASTE_RECORD="pasteRecord",t.INSERT_INTERRUPT="insertInterrupt",t.INSERT_RESIGN="insertResign",t.INSERT_DRAW="insertDraw",t.INSERT_IMPASS="insertImpass",t.INSERT_REPETITION_DRAW="insertRepetitionDraw",t.INSERT_MATE="insertMate",t.INSERT_TIMEOUT="insertTimeout",t.INSERT_FOUL_WIN="insertFoulWin",t.INSERT_FOUL_LOSE="insertFoulLose",t.INSERT_ENTERING_OF_KING="insertEnteringOfKing",t.INSERT_WIN_BY_DEFAULT="insertWinByDefault",t.INSERT_LOSS_BY_DEFAULT="insertLossByDefault",t.REMOVE_CURRENT_MOVE="remvoeCurrentMove",t.START_POSITION_EDITING="startPositionEditing",t.END_POSITION_EDITING="endPositionEditing",t.CHANGE_TURN="changeTurn",t.INIT_POSITION_STANDARD="initPositionStandard",t.INIT_POSITION_HANDICAP_LANCE="initPositionHandicapLance",t.INIT_POSITION_HANDICAP_RIGHT_LANCE="initPositionHandicapRightLance",t.INIT_POSITION_HANDICAP_BISHOP="initPositionHandicapBishop",t.INIT_POSITION_HANDICAP_ROOK="initPositionHandicapRook",t.INIT_POSITION_HANDICAP_ROOK_LANCE="initPositionHandicapRookLance",t.INIT_POSITION_HANDICAP_2PIECES="initPositionHandicap2Pieces",t.INIT_POSITION_HANDICAP_4PIECES="initPositionHandicap4Pieces",t.INIT_POSITION_HANDICAP_6PIECES="initPositionHandicap6Pieces",t.INIT_POSITION_HANDICAP_8PIECES="initPositionHandicap8Pieces",t.INIT_POSITION_TSUME_SHOGI="initPositionTsumeShogi",t.INIT_POSITION_TSUME_SHOGI_2KINGS="initPositionTsumeShogi2Kings",t.START_RESEARCH="startResearch",t.STOP_RESEARCH="stopResearch",t.START_ANALYSIS="startAnalysis",t.STOP_ANALYSIS="stopAnalysis",t.START_GAME="startGame",t.START_CSA_GAME="startCSAGame",t.STOP_GAME="stopGame",t.RESIGN="resign",t.WIN="win",t.LOGOUT="logout",t.FLIP_BOARD="flipBoard",t.APP_SETTING_DIALOG="appSetting",t.USI_ENGINE_SETTING_DIALOG="usiEngineSetting",t))(Se||{});function V5(){const t=Xe();Ue.onSendError(e=>{t.pushError(e)}),Ue.onMenuEvent(e=>{if(!t.isBussy)switch(e){case Se.NEW_RECORD:t.resetRecord();break;case Se.OPEN_RECORD:t.openRecord();break;case Se.SAVE_RECORD:t.saveRecord({overwrite:!0});break;case Se.SAVE_RECORD_AS:t.saveRecord();break;case Se.COPY_RECORD:t.copyRecordKIF();break;case Se.COPY_RECORD_CSA:t.copyRecordCSA();break;case Se.COPY_RECORD_USI_BEFORE:t.copyRecordUSIBefore();break;case Se.COPY_RECORD_USI_ALL:t.copyRecordUSIAll();break;case Se.COPY_BOARD_SFEN:t.copyBoardSFEN();break;case Se.PASTE_RECORD:t.showPasteDialog();break;case Se.INSERT_INTERRUPT:t.insertSpecialMove(se.INTERRUPT);break;case Se.INSERT_RESIGN:t.insertSpecialMove(se.RESIGN);break;case Se.INSERT_DRAW:t.insertSpecialMove(se.DRAW);break;case Se.INSERT_IMPASS:t.insertSpecialMove(se.IMPASS);break;case Se.INSERT_REPETITION_DRAW:t.insertSpecialMove(se.REPETITION_DRAW);break;case Se.INSERT_MATE:t.insertSpecialMove(se.MATE);break;case Se.INSERT_TIMEOUT:t.insertSpecialMove(se.TIMEOUT);break;case Se.INSERT_FOUL_WIN:t.insertSpecialMove(se.FOUL_WIN);break;case Se.INSERT_FOUL_LOSE:t.insertSpecialMove(se.FOUL_LOSE);break;case Se.INSERT_ENTERING_OF_KING:t.insertSpecialMove(se.ENTERING_OF_KING);break;case Se.INSERT_WIN_BY_DEFAULT:t.insertSpecialMove(se.WIN_BY_DEFAULT);break;case Se.INSERT_LOSS_BY_DEFAULT:t.insertSpecialMove(se.LOSS_BY_DEFAULT);break;case Se.REMOVE_CURRENT_MOVE:t.removeCurrentMove();break;case Se.START_POSITION_EDITING:t.startPositionEditing();break;case Se.END_POSITION_EDITING:t.endPositionEditing();break;case Se.CHANGE_TURN:t.changeTurn();break;case Se.INIT_POSITION_STANDARD:t.initializePosition(ve.STANDARD);break;case Se.INIT_POSITION_HANDICAP_LANCE:t.initializePosition(ve.HANDICAP_LANCE);break;case Se.INIT_POSITION_HANDICAP_RIGHT_LANCE:t.initializePosition(ve.HANDICAP_RIGHT_LANCE);break;case Se.INIT_POSITION_HANDICAP_BISHOP:t.initializePosition(ve.HANDICAP_BISHOP);break;case Se.INIT_POSITION_HANDICAP_ROOK:t.initializePosition(ve.HANDICAP_ROOK);break;case Se.INIT_POSITION_HANDICAP_ROOK_LANCE:t.initializePosition(ve.HANDICAP_ROOK_LANCE);break;case Se.INIT_POSITION_HANDICAP_2PIECES:t.initializePosition(ve.HANDICAP_2PIECES);break;case Se.INIT_POSITION_HANDICAP_4PIECES:t.initializePosition(ve.HANDICAP_4PIECES);break;case Se.INIT_POSITION_HANDICAP_6PIECES:t.initializePosition(ve.HANDICAP_6PIECES);break;case Se.INIT_POSITION_HANDICAP_8PIECES:t.initializePosition(ve.HANDICAP_8PIECES);break;case Se.INIT_POSITION_TSUME_SHOGI:t.initializePosition(ve.TSUME_SHOGI);break;case Se.INIT_POSITION_TSUME_SHOGI_2KINGS:t.initializePosition(ve.TSUME_SHOGI_2KINGS);break;case Se.START_GAME:t.showGameDialog();break;case Se.START_CSA_GAME:t.showCSAGameDialog();break;case Se.STOP_GAME:t.stopGame();break;case Se.RESIGN:Kn.resign();break;case Se.WIN:Kn.win();break;case Se.LOGOUT:t.logoutCSAGame();break;case Se.START_RESEARCH:t.showResearchDialog();break;case Se.STOP_RESEARCH:t.stopResearch();break;case Se.START_ANALYSIS:t.showAnalysisDialog();break;case Se.STOP_ANALYSIS:t.stopAnalysis();break;case Se.FLIP_BOARD:t.flipBoard();break;case Se.APP_SETTING_DIALOG:t.showAppSettingDialog();break;case Se.USI_ENGINE_SETTING_DIALOG:t.showUsiEngineManagementDialog();break}}),Ue.onUSIBestMove((e,i,n,s)=>{lb(e,i,n,s)}),Ue.onUSIInfo((e,i,n,s)=>{const o=JSON.parse(s);t.updateUSIInfo(e,i,n,o),su(e,i,o)}),Ue.onUSIPonderInfo((e,i,n,s)=>{const o=JSON.parse(s);t.updateUSIPonderInfo(e,i,n,o),su(e,i,o)}),Ue.onCSAGameSummary((e,i)=>{kb(e,JSON.parse(i))}),Ue.onCSAReject(e=>{Cb(e)}),Ue.onCSAStart((e,i)=>{Pb(e,JSON.parse(i))}),Ue.onCSAMove((e,i,n)=>{Mb(e,i,JSON.parse(n))}),Ue.onCSAGameResult((e,i,n)=>{Tb(e,i,n)}),Ue.onCSAClose(e=>{Bb(e)}),nn(()=>[t.appState,t.isBussy],([e,i])=>{Ue.updateMenuState(e,i)}),Ue.updateMenuState(t.appState,t.isBussy)}pe.log(Mt.INFO,"start renderer process");Li.register(...M4);V5();const Ao=Xe();Promise.allSettled([Ao.reloadAppSetting().catch(t=>{Ao.pushError(new Error(": "+t))}),pe.getRecordPathFromProcArg().then(t=>{t&&Ao.openRecord(t)}).catch(t=>{Ao.pushError(new Error(": "+t))})]).finally(()=>{pe.log(Mt.INFO,"mount app"),x0(G5).mount("#app")});
