var ep=Object.defineProperty;var tp=(t,e,i)=>e in t?ep(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var P=(t,e,i)=>(tp(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();function Ka(t,e){const i=Object.create(null),n=t.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return e?s=>!!i[s.toLowerCase()]:s=>!!i[s]}function We(t){if(Ie(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=bt(n)?op(n):We(n);if(s)for(const o in s)e[o]=s[o]}return e}else{if(bt(t))return t;if(lt(t))return t}}const ip=/;(?![^(]*\))/g,np=/:([^]+)/,sp=/\/\*.*?\*\//gs;function op(t){const e={};return t.replace(sp,"").split(ip).forEach(i=>{if(i){const n=i.split(np);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ze(t){let e="";if(bt(t))e=t;else if(Ie(t))for(let i=0;i<t.length;i++){const n=Ze(t[i]);n&&(e+=n+" ")}else if(lt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const rp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ap=Ka(rp);function xh(t){return!!t||t===""}const ye=t=>bt(t)?t:t==null?"":Ie(t)||lt(t)&&(t.toString===Mh||!Me(t.toString))?JSON.stringify(t,kh,2):String(t),kh=(t,e)=>e&&e.__v_isRef?kh(t,e.value):Ln(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:Ih(e)?{[`Set(${e.size})`]:[...e.values()]}:lt(e)&&!Ie(e)&&!Ph(e)?String(e):e,ot={},Nn=[],di=()=>{},lp=()=>!1,cp=/^on[^a-z]/,fr=t=>cp.test(t),qa=t=>t.startsWith("onUpdate:"),Ut=Object.assign,Ya=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},up=Object.prototype.hasOwnProperty,Ne=(t,e)=>up.call(t,e),Ie=Array.isArray,Ln=t=>pr(t)==="[object Map]",Ih=t=>pr(t)==="[object Set]",Me=t=>typeof t=="function",bt=t=>typeof t=="string",Xa=t=>typeof t=="symbol",lt=t=>t!==null&&typeof t=="object",Ch=t=>lt(t)&&Me(t.then)&&Me(t.catch),Mh=Object.prototype.toString,pr=t=>Mh.call(t),hp=t=>pr(t).slice(8,-1),Ph=t=>pr(t)==="[object Object]",Ja=t=>bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,vo=Ka(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gr=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},dp=/-(\w)/g,Ai=gr(t=>t.replace(dp,(e,i)=>i?i.toUpperCase():"")),fp=/\B([A-Z])/g,Jn=gr(t=>t.replace(fp,"-$1").toLowerCase()),mr=gr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Br=gr(t=>t?`on${mr(t)}`:""),Cs=(t,e)=>!Object.is(t,e),Dr=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},$o=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},Th=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Wl;const pp=()=>Wl||(Wl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let _i;class gp{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=_i,!e&&_i&&(this.index=(_i.scopes||(_i.scopes=[])).push(this)-1)}run(e){if(this.active){const i=_i;try{return _i=this,e()}finally{_i=i}}}on(){_i=this}off(){_i=this.parent}stop(e){if(this.active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this.active=!1}}}function mp(t,e=_i){e&&e.active&&e.effects.push(t)}const Za=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Bh=t=>(t.w&Qi)>0,Dh=t=>(t.n&Qi)>0,_p=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Qi},bp=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const s=e[n];Bh(s)&&!Dh(s)?s.delete(t):e[i++]=s,s.w&=~Qi,s.n&=~Qi}e.length=i}},ha=new WeakMap;let cs=0,Qi=1;const da=30;let ci;const En=Symbol(""),fa=Symbol("");class Qa{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,mp(this,n)}run(){if(!this.active)return this.fn();let e=ci,i=Yi;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ci,ci=this,Yi=!0,Qi=1<<++cs,cs<=da?_p(this):Gl(this),this.fn()}finally{cs<=da&&bp(this),Qi=1<<--cs,ci=this.parent,Yi=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ci===this?this.deferStop=!0:this.active&&(Gl(this),this.onStop&&this.onStop(),this.active=!1)}}function Gl(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let Yi=!0;const Rh=[];function Zn(){Rh.push(Yi),Yi=!1}function Qn(){const t=Rh.pop();Yi=t===void 0?!0:t}function Qt(t,e,i){if(Yi&&ci){let n=ha.get(t);n||ha.set(t,n=new Map);let s=n.get(i);s||n.set(i,s=Za()),Oh(s)}}function Oh(t,e){let i=!1;cs<=da?Dh(t)||(t.n|=Qi,i=!Bh(t)):i=!t.has(ci),i&&(t.add(ci),ci.deps.push(t))}function Li(t,e,i,n,s,o){const r=ha.get(t);if(!r)return;let a=[];if(e==="clear")a=[...r.values()];else if(i==="length"&&Ie(t)){const l=Th(n);r.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(i!==void 0&&a.push(r.get(i)),e){case"add":Ie(t)?Ja(i)&&a.push(r.get("length")):(a.push(r.get(En)),Ln(t)&&a.push(r.get(fa)));break;case"delete":Ie(t)||(a.push(r.get(En)),Ln(t)&&a.push(r.get(fa)));break;case"set":Ln(t)&&a.push(r.get(En));break}if(a.length===1)a[0]&&pa(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);pa(Za(l))}}function pa(t,e){const i=Ie(t)?t:[...t];for(const n of i)n.computed&&Vl(n);for(const n of i)n.computed||Vl(n)}function Vl(t,e){(t!==ci||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const yp=Ka("__proto__,__v_isRef,__isVue"),Nh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Xa)),vp=el(),Sp=el(!1,!0),wp=el(!0),jl=Ep();function Ep(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const n=Ge(this);for(let o=0,r=this.length;o<r;o++)Qt(n,"get",o+"");const s=n[e](...i);return s===-1||s===!1?n[e](...i.map(Ge)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){Zn();const n=Ge(this)[e].apply(this,i);return Qn(),n}}),t}function el(t=!1,e=!1){return function(n,s,o){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&o===(t?e?$p:Uh:e?Hh:$h).get(n))return n;const r=Ie(n);if(!t&&r&&Ne(jl,s))return Reflect.get(jl,s,o);const a=Reflect.get(n,s,o);return(Xa(s)?Nh.has(s):yp(s))||(t||Qt(n,"get",s),e)?a:Dt(a)?r&&Ja(s)?a:a.value:lt(a)?t?Wh(a):en(a):a}}const Ap=Lh(),xp=Lh(!0);function Lh(t=!1){return function(i,n,s,o){let r=i[n];if(jn(r)&&Dt(r)&&!Dt(s))return!1;if(!t&&(!Ho(s)&&!jn(s)&&(r=Ge(r),s=Ge(s)),!Ie(i)&&Dt(r)&&!Dt(s)))return r.value=s,!0;const a=Ie(i)&&Ja(n)?Number(n)<i.length:Ne(i,n),l=Reflect.set(i,n,s,o);return i===Ge(o)&&(a?Cs(s,r)&&Li(i,"set",n,s):Li(i,"add",n,s)),l}}function kp(t,e){const i=Ne(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&Li(t,"delete",e,void 0),n}function Ip(t,e){const i=Reflect.has(t,e);return(!Xa(e)||!Nh.has(e))&&Qt(t,"has",e),i}function Cp(t){return Qt(t,"iterate",Ie(t)?"length":En),Reflect.ownKeys(t)}const Fh={get:vp,set:Ap,deleteProperty:kp,has:Ip,ownKeys:Cp},Mp={get:wp,set(t,e){return!0},deleteProperty(t,e){return!0}},Pp=Ut({},Fh,{get:Sp,set:xp}),tl=t=>t,_r=t=>Reflect.getPrototypeOf(t);function Xs(t,e,i=!1,n=!1){t=t.__v_raw;const s=Ge(t),o=Ge(e);i||(e!==o&&Qt(s,"get",e),Qt(s,"get",o));const{has:r}=_r(s),a=n?tl:i?sl:Ms;if(r.call(s,e))return a(t.get(e));if(r.call(s,o))return a(t.get(o));t!==s&&t.get(e)}function Js(t,e=!1){const i=this.__v_raw,n=Ge(i),s=Ge(t);return e||(t!==s&&Qt(n,"has",t),Qt(n,"has",s)),t===s?i.has(t):i.has(t)||i.has(s)}function Zs(t,e=!1){return t=t.__v_raw,!e&&Qt(Ge(t),"iterate",En),Reflect.get(t,"size",t)}function zl(t){t=Ge(t);const e=Ge(this);return _r(e).has.call(e,t)||(e.add(t),Li(e,"add",t,t)),this}function Kl(t,e){e=Ge(e);const i=Ge(this),{has:n,get:s}=_r(i);let o=n.call(i,t);o||(t=Ge(t),o=n.call(i,t));const r=s.call(i,t);return i.set(t,e),o?Cs(e,r)&&Li(i,"set",t,e):Li(i,"add",t,e),this}function ql(t){const e=Ge(this),{has:i,get:n}=_r(e);let s=i.call(e,t);s||(t=Ge(t),s=i.call(e,t)),n&&n.call(e,t);const o=e.delete(t);return s&&Li(e,"delete",t,void 0),o}function Yl(){const t=Ge(this),e=t.size!==0,i=t.clear();return e&&Li(t,"clear",void 0,void 0),i}function Qs(t,e){return function(n,s){const o=this,r=o.__v_raw,a=Ge(r),l=e?tl:t?sl:Ms;return!t&&Qt(a,"iterate",En),r.forEach((c,u)=>n.call(s,l(c),l(u),o))}}function eo(t,e,i){return function(...n){const s=this.__v_raw,o=Ge(s),r=Ln(o),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,c=s[t](...n),u=i?tl:e?sl:Ms;return!e&&Qt(o,"iterate",l?fa:En),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Ui(t){return function(...e){return t==="delete"?!1:this}}function Tp(){const t={get(o){return Xs(this,o)},get size(){return Zs(this)},has:Js,add:zl,set:Kl,delete:ql,clear:Yl,forEach:Qs(!1,!1)},e={get(o){return Xs(this,o,!1,!0)},get size(){return Zs(this)},has:Js,add:zl,set:Kl,delete:ql,clear:Yl,forEach:Qs(!1,!0)},i={get(o){return Xs(this,o,!0)},get size(){return Zs(this,!0)},has(o){return Js.call(this,o,!0)},add:Ui("add"),set:Ui("set"),delete:Ui("delete"),clear:Ui("clear"),forEach:Qs(!0,!1)},n={get(o){return Xs(this,o,!0,!0)},get size(){return Zs(this,!0)},has(o){return Js.call(this,o,!0)},add:Ui("add"),set:Ui("set"),delete:Ui("delete"),clear:Ui("clear"),forEach:Qs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=eo(o,!1,!1),i[o]=eo(o,!0,!1),e[o]=eo(o,!1,!0),n[o]=eo(o,!0,!0)}),[t,i,e,n]}const[Bp,Dp,Rp,Op]=Tp();function il(t,e){const i=e?t?Op:Rp:t?Dp:Bp;return(n,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Ne(i,s)&&s in n?i:n,s,o)}const Np={get:il(!1,!1)},Lp={get:il(!1,!0)},Fp={get:il(!0,!1)},$h=new WeakMap,Hh=new WeakMap,Uh=new WeakMap,$p=new WeakMap;function Hp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Up(t){return t.__v_skip||!Object.isExtensible(t)?0:Hp(hp(t))}function en(t){return jn(t)?t:nl(t,!1,Fh,Np,$h)}function Wp(t){return nl(t,!1,Pp,Lp,Hh)}function Wh(t){return nl(t,!0,Mp,Fp,Uh)}function nl(t,e,i,n,s){if(!lt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s.get(t);if(o)return o;const r=Up(t);if(r===0)return t;const a=new Proxy(t,r===2?n:i);return s.set(t,a),a}function Fn(t){return jn(t)?Fn(t.__v_raw):!!(t&&t.__v_isReactive)}function jn(t){return!!(t&&t.__v_isReadonly)}function Ho(t){return!!(t&&t.__v_isShallow)}function Gh(t){return Fn(t)||jn(t)}function Ge(t){const e=t&&t.__v_raw;return e?Ge(e):t}function Vh(t){return $o(t,"__v_skip",!0),t}const Ms=t=>lt(t)?en(t):t,sl=t=>lt(t)?Wh(t):t;function jh(t){Yi&&ci&&(t=Ge(t),Oh(t.dep||(t.dep=Za())))}function zh(t,e){t=Ge(t),t.dep&&pa(t.dep)}function Dt(t){return!!(t&&t.__v_isRef===!0)}function z(t){return Gp(t,!1)}function Gp(t,e){return Dt(t)?t:new Vp(t,e)}class Vp{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:Ge(e),this._value=i?e:Ms(e)}get value(){return jh(this),this._value}set value(e){const i=this.__v_isShallow||Ho(e)||jn(e);e=i?e:Ge(e),Cs(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:Ms(e),zh(this))}}function jp(t){return Dt(t)?t.value:t}const zp={get:(t,e,i)=>jp(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return Dt(s)&&!Dt(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function Kh(t){return Fn(t)?t:new Proxy(t,zp)}var qh;class Kp{constructor(e,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[qh]=!1,this._dirty=!0,this.effect=new Qa(e,()=>{this._dirty||(this._dirty=!0,zh(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=Ge(this);return jh(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}qh="__v_isReadonly";function qp(t,e,i=!1){let n,s;const o=Me(t);return o?(n=t,s=di):(n=t.get,s=t.set),new Kp(n,s,o||!s,i)}function Xi(t,e,i,n){let s;try{s=n?t(...n):t()}catch(o){br(o,e,i)}return s}function fi(t,e,i,n){if(Me(t)){const o=Xi(t,e,i,n);return o&&Ch(o)&&o.catch(r=>{br(r,e,i)}),o}const s=[];for(let o=0;o<t.length;o++)s.push(fi(t[o],e,i,n));return s}function br(t,e,i,n=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const r=e.proxy,a=i;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,r,a)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){Xi(l,null,10,[t,r,a]);return}}Yp(t,i,s,n)}function Yp(t,e,i,n=!0){console.error(t)}let Ps=!1,ga=!1;const Tt=[];let Si=0;const $n=[];let Ti=null,yn=0;const Yh=Promise.resolve();let ol=null;function Xp(t){const e=ol||Yh;return t?e.then(this?t.bind(this):t):e}function Jp(t){let e=Si+1,i=Tt.length;for(;e<i;){const n=e+i>>>1;Ts(Tt[n])<t?e=n+1:i=n}return e}function rl(t){(!Tt.length||!Tt.includes(t,Ps&&t.allowRecurse?Si+1:Si))&&(t.id==null?Tt.push(t):Tt.splice(Jp(t.id),0,t),Xh())}function Xh(){!Ps&&!ga&&(ga=!0,ol=Yh.then(Zh))}function Zp(t){const e=Tt.indexOf(t);e>Si&&Tt.splice(e,1)}function Qp(t){Ie(t)?$n.push(...t):(!Ti||!Ti.includes(t,t.allowRecurse?yn+1:yn))&&$n.push(t),Xh()}function Xl(t,e=Ps?Si+1:0){for(;e<Tt.length;e++){const i=Tt[e];i&&i.pre&&(Tt.splice(e,1),e--,i())}}function Jh(t){if($n.length){const e=[...new Set($n)];if($n.length=0,Ti){Ti.push(...e);return}for(Ti=e,Ti.sort((i,n)=>Ts(i)-Ts(n)),yn=0;yn<Ti.length;yn++)Ti[yn]();Ti=null,yn=0}}const Ts=t=>t.id==null?1/0:t.id,eg=(t,e)=>{const i=Ts(t)-Ts(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function Zh(t){ga=!1,Ps=!0,Tt.sort(eg);const e=di;try{for(Si=0;Si<Tt.length;Si++){const i=Tt[Si];i&&i.active!==!1&&Xi(i,null,14)}}finally{Si=0,Tt.length=0,Jh(),Ps=!1,ol=null,(Tt.length||$n.length)&&Zh()}}function tg(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||ot;let s=i;const o=e.startsWith("update:"),r=o&&e.slice(7);if(r&&r in n){const u=`${r==="modelValue"?"model":r}Modifiers`,{number:h,trim:f}=n[u]||ot;f&&(s=i.map(p=>bt(p)?p.trim():p)),h&&(s=i.map(Th))}let a,l=n[a=Br(e)]||n[a=Br(Ai(e))];!l&&o&&(l=n[a=Br(Jn(e))]),l&&fi(l,t,6,s);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,fi(c,t,6,s)}}function Qh(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const o=t.emits;let r={},a=!1;if(!Me(t)){const l=c=>{const u=Qh(c,e,!0);u&&(a=!0,Ut(r,u))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(lt(t)&&n.set(t,null),null):(Ie(o)?o.forEach(l=>r[l]=null):Ut(r,o),lt(t)&&n.set(t,r),r)}function yr(t,e){return!t||!fr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(t,e[0].toLowerCase()+e.slice(1))||Ne(t,Jn(e))||Ne(t,e))}let $t=null,vr=null;function Uo(t){const e=$t;return $t=t,vr=t&&t.type.__scopeId||null,e}function qt(t){vr=t}function Yt(){vr=null}function Wo(t,e=$t,i){if(!e||t._n)return t;const n=(...s)=>{n._d&&rc(-1);const o=Uo(e);let r;try{r=t(...s)}finally{Uo(o),n._d&&rc(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Rr(t){const{type:e,vnode:i,proxy:n,withProxy:s,props:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:p,ctx:b,inheritAttrs:_}=t;let v,y;const w=Uo(t);try{if(i.shapeFlag&4){const x=s||n;v=vi(u.call(x,x,h,o,p,f,b)),y=l}else{const x=e;v=vi(x.length>1?x(o,{attrs:l,slots:a,emit:c}):x(o,null)),y=e.props?l:ig(l)}}catch(x){vs.length=0,br(x,t,1),v=K(tn)}let E=v;if(y&&_!==!1){const x=Object.keys(y),{shapeFlag:I}=E;x.length&&I&7&&(r&&x.some(qa)&&(y=ng(y,r)),E=zn(E,y))}return i.dirs&&(E=zn(E),E.dirs=E.dirs?E.dirs.concat(i.dirs):i.dirs),i.transition&&(E.transition=i.transition),v=E,Uo(w),v}const ig=t=>{let e;for(const i in t)(i==="class"||i==="style"||fr(i))&&((e||(e={}))[i]=t[i]);return e},ng=(t,e)=>{const i={};for(const n in t)(!qa(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function sg(t,e,i){const{props:n,children:s,component:o}=t,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Jl(n,r,c):!!r;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(r[f]!==n[f]&&!yr(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Jl(n,r,c):!0:!!r;return!1}function Jl(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const o=n[s];if(e[o]!==t[o]&&!yr(i,o))return!0}return!1}function og({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const rg=t=>t.__isSuspense;function ag(t,e){e&&e.pendingBranch?Ie(t)?e.effects.push(...t):e.effects.push(t):Qp(t)}function lg(t,e){if(xt){let i=xt.provides;const n=xt.parent&&xt.parent.provides;n===i&&(i=xt.provides=Object.create(n)),i[t]=e}}function So(t,e,i=!1){const n=xt||$t;if(n){const s=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return i&&Me(e)?e.call(n.proxy):e}}const to={};function Ji(t,e,i){return ed(t,e,i)}function ed(t,e,{immediate:i,deep:n,flush:s,onTrack:o,onTrigger:r}=ot){const a=xt;let l,c=!1,u=!1;if(Dt(t)?(l=()=>t.value,c=Ho(t)):Fn(t)?(l=()=>t,n=!0):Ie(t)?(u=!0,c=t.some(E=>Fn(E)||Ho(E)),l=()=>t.map(E=>{if(Dt(E))return E.value;if(Fn(E))return Dn(E);if(Me(E))return Xi(E,a,2)})):Me(t)?e?l=()=>Xi(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),fi(t,a,3,[f])}:l=di,e&&n){const E=l;l=()=>Dn(E())}let h,f=E=>{h=y.onStop=()=>{Xi(E,a,4)}},p;if(Ds)if(f=di,e?i&&fi(e,a,3,[l(),u?[]:void 0,f]):l(),s==="sync"){const E=Jg();p=E.__watcherHandles||(E.__watcherHandles=[])}else return di;let b=u?new Array(t.length).fill(to):to;const _=()=>{if(y.active)if(e){const E=y.run();(n||c||(u?E.some((x,I)=>Cs(x,b[I])):Cs(E,b)))&&(h&&h(),fi(e,a,3,[E,b===to?void 0:u&&b[0]===to?[]:b,f]),b=E)}else y.run()};_.allowRecurse=!!e;let v;s==="sync"?v=_:s==="post"?v=()=>zt(_,a&&a.suspense):(_.pre=!0,a&&(_.id=a.uid),v=()=>rl(_));const y=new Qa(l,v);e?i?_():b=y.run():s==="post"?zt(y.run.bind(y),a&&a.suspense):y.run();const w=()=>{y.stop(),a&&a.scope&&Ya(a.scope.effects,y)};return p&&p.push(w),w}function cg(t,e,i){const n=this.proxy,s=bt(t)?t.includes(".")?td(n,t):()=>n[t]:t.bind(n,n);let o;Me(e)?o=e:(o=e.handler,i=e);const r=xt;Kn(this);const a=ed(s,o.bind(n),i);return r?Kn(r):An(),a}function td(t,e){const i=e.split(".");return()=>{let n=t;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function Dn(t,e){if(!lt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Dt(t))Dn(t.value,e);else if(Ie(t))for(let i=0;i<t.length;i++)Dn(t[i],e);else if(Ih(t)||Ln(t))t.forEach(i=>{Dn(i,e)});else if(Ph(t))for(const i in t)Dn(t[i],e);return t}function He(t){return Me(t)?{setup:t,name:t.name}:t}const bs=t=>!!t.type.__asyncLoader,id=t=>t.type.__isKeepAlive;function ug(t,e){nd(t,"a",e)}function hg(t,e){nd(t,"da",e)}function nd(t,e,i=xt){const n=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Sr(e,n,i),i){let s=i.parent;for(;s&&s.parent;)id(s.parent.vnode)&&dg(n,e,i,s),s=s.parent}}function dg(t,e,i,n){const s=Sr(e,t,n,!0);zs(()=>{Ya(n[e],s)},i)}function Sr(t,e,i=xt,n=!1){if(i){const s=i[t]||(i[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(i.isUnmounted)return;Zn(),Kn(i);const a=fi(e,i,t,r);return An(),Qn(),a});return n?s.unshift(o):s.push(o),o}}const Fi=t=>(e,i=xt)=>(!Ds||t==="sp")&&Sr(t,(...n)=>e(...n),i),fg=Fi("bm"),it=Fi("m"),sd=Fi("bu"),js=Fi("u"),Wt=Fi("bum"),zs=Fi("um"),pg=Fi("sp"),gg=Fi("rtg"),mg=Fi("rtc");function _g(t,e=xt){Sr("ec",t,e)}function cn(t,e,i,n){const s=t.dirs,o=e&&e.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(Zn(),fi(l,i,8,[t.el,a,t,e]),Qn())}}const od="components";function Ee(t,e){return yg(od,t,!0,e)||t}const bg=Symbol();function yg(t,e,i=!0,n=!1){const s=$t||xt;if(s){const o=s.type;if(t===od){const a=qg(o,!1);if(a&&(a===e||a===Ai(e)||a===mr(Ai(e))))return o}const r=Zl(s[t]||o[t],e)||Zl(s.appContext[t],e);return!r&&n?o:r}}function Zl(t,e){return t&&(t[e]||t[Ai(e)]||t[mr(Ai(e))])}function Qe(t,e,i,n){let s;const o=i&&i[n];if(Ie(t)||bt(t)){s=new Array(t.length);for(let r=0,a=t.length;r<a;r++)s[r]=e(t[r],r,void 0,o&&o[r])}else if(typeof t=="number"){s=new Array(t);for(let r=0;r<t;r++)s[r]=e(r+1,r,void 0,o&&o[r])}else if(lt(t))if(t[Symbol.iterator])s=Array.from(t,(r,a)=>e(r,a,void 0,o&&o[a]));else{const r=Object.keys(t);s=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];s[a]=e(t[c],c,a,o&&o[a])}}else s=[];return i&&(i[n]=s),s}function Ql(t,e,i={},n,s){if($t.isCE||$t.parent&&bs($t.parent)&&$t.parent.isCE)return e!=="default"&&(i.name=e),K("slot",i,n&&n());let o=t[e];o&&o._c&&(o._d=!1),D();const r=o&&rd(o(i)),a=nt(Pe,{key:i.key||r&&r.key||`_${e}`},r||(n?n():[]),r&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function rd(t){return t.some(e=>md(e)?!(e.type===tn||e.type===Pe&&!rd(e.children)):!0)?t:null}const ma=t=>t?yd(t)?ul(t)||t.proxy:ma(t.parent):null,ys=Ut(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ma(t.parent),$root:t=>ma(t.root),$emit:t=>t.emit,$options:t=>al(t),$forceUpdate:t=>t.f||(t.f=()=>rl(t.update)),$nextTick:t=>t.n||(t.n=Xp.bind(t.proxy)),$watch:t=>cg.bind(t)}),Or=(t,e)=>t!==ot&&!t.__isScriptSetup&&Ne(t,e),vg={get({_:t},e){const{ctx:i,setupState:n,data:s,props:o,accessCache:r,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=r[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return o[e]}else{if(Or(n,e))return r[e]=1,n[e];if(s!==ot&&Ne(s,e))return r[e]=2,s[e];if((c=t.propsOptions[0])&&Ne(c,e))return r[e]=3,o[e];if(i!==ot&&Ne(i,e))return r[e]=4,i[e];_a&&(r[e]=0)}}const u=ys[e];let h,f;if(u)return e==="$attrs"&&Qt(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(i!==ot&&Ne(i,e))return r[e]=4,i[e];if(f=l.config.globalProperties,Ne(f,e))return f[e]},set({_:t},e,i){const{data:n,setupState:s,ctx:o}=t;return Or(s,e)?(s[e]=i,!0):n!==ot&&Ne(n,e)?(n[e]=i,!0):Ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:o}},r){let a;return!!i[r]||t!==ot&&Ne(t,r)||Or(e,r)||(a=o[0])&&Ne(a,r)||Ne(n,r)||Ne(ys,r)||Ne(s.config.globalProperties,r)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:Ne(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};let _a=!0;function Sg(t){const e=al(t),i=t.proxy,n=t.ctx;_a=!1,e.beforeCreate&&ec(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:b,activated:_,deactivated:v,beforeDestroy:y,beforeUnmount:w,destroyed:E,unmounted:x,render:I,renderTracked:T,renderTriggered:H,errorCaptured:V,serverPrefetch:Q,expose:ae,inheritAttrs:Z,components:ge,directives:Re,filters:Ye}=e;if(c&&wg(c,n,null,t.appContext.config.unwrapInjectedRef),r)for(const q in r){const ee=r[q];Me(ee)&&(n[q]=ee.bind(i))}if(s){const q=s.call(i,i);lt(q)&&(t.data=en(q))}if(_a=!0,o)for(const q in o){const ee=o[q],oe=Me(ee)?ee.bind(i,i):Me(ee.get)?ee.get.bind(i,i):di,Te=!Me(ee)&&Me(ee.set)?ee.set.bind(i):di,ve=de({get:oe,set:Te});Object.defineProperty(n,q,{enumerable:!0,configurable:!0,get:()=>ve.value,set:_e=>ve.value=_e})}if(a)for(const q in a)ad(a[q],n,i,q);if(l){const q=Me(l)?l.call(i):l;Reflect.ownKeys(q).forEach(ee=>{lg(ee,q[ee])})}u&&ec(u,t,"c");function he(q,ee){Ie(ee)?ee.forEach(oe=>q(oe.bind(i))):ee&&q(ee.bind(i))}if(he(fg,h),he(it,f),he(sd,p),he(js,b),he(ug,_),he(hg,v),he(_g,V),he(mg,T),he(gg,H),he(Wt,w),he(zs,x),he(pg,Q),Ie(ae))if(ae.length){const q=t.exposed||(t.exposed={});ae.forEach(ee=>{Object.defineProperty(q,ee,{get:()=>i[ee],set:oe=>i[ee]=oe})})}else t.exposed||(t.exposed={});I&&t.render===di&&(t.render=I),Z!=null&&(t.inheritAttrs=Z),ge&&(t.components=ge),Re&&(t.directives=Re)}function wg(t,e,i=di,n=!1){Ie(t)&&(t=ba(t));for(const s in t){const o=t[s];let r;lt(o)?"default"in o?r=So(o.from||s,o.default,!0):r=So(o.from||s):r=So(o),Dt(r)&&n?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[s]=r}}function ec(t,e,i){fi(Ie(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function ad(t,e,i,n){const s=n.includes(".")?td(i,n):()=>i[n];if(bt(t)){const o=e[t];Me(o)&&Ji(s,o)}else if(Me(t))Ji(s,t.bind(i));else if(lt(t))if(Ie(t))t.forEach(o=>ad(o,e,i,n));else{const o=Me(t.handler)?t.handler.bind(i):e[t.handler];Me(o)&&Ji(s,o,t)}}function al(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,a=o.get(e);let l;return a?l=a:!s.length&&!i&&!n?l=e:(l={},s.length&&s.forEach(c=>Go(l,c,r,!0)),Go(l,e,r)),lt(e)&&o.set(e,l),l}function Go(t,e,i,n=!1){const{mixins:s,extends:o}=e;o&&Go(t,o,i,!0),s&&s.forEach(r=>Go(t,r,i,!0));for(const r in e)if(!(n&&r==="expose")){const a=Eg[r]||i&&i[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const Eg={data:tc,props:mn,emits:mn,methods:mn,computed:mn,beforeCreate:Nt,created:Nt,beforeMount:Nt,mounted:Nt,beforeUpdate:Nt,updated:Nt,beforeDestroy:Nt,beforeUnmount:Nt,destroyed:Nt,unmounted:Nt,activated:Nt,deactivated:Nt,errorCaptured:Nt,serverPrefetch:Nt,components:mn,directives:mn,watch:xg,provide:tc,inject:Ag};function tc(t,e){return e?t?function(){return Ut(Me(t)?t.call(this,this):t,Me(e)?e.call(this,this):e)}:e:t}function Ag(t,e){return mn(ba(t),ba(e))}function ba(t){if(Ie(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Nt(t,e){return t?[...new Set([].concat(t,e))]:e}function mn(t,e){return t?Ut(Ut(Object.create(null),t),e):e}function xg(t,e){if(!t)return e;if(!e)return t;const i=Ut(Object.create(null),t);for(const n in e)i[n]=Nt(t[n],e[n]);return i}function kg(t,e,i,n=!1){const s={},o={};$o(o,Er,1),t.propsDefaults=Object.create(null),ld(t,e,s,o);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);i?t.props=n?s:Wp(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function Ig(t,e,i,n){const{props:s,attrs:o,vnode:{patchFlag:r}}=t,a=Ge(s),[l]=t.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(yr(t.emitsOptions,f))continue;const p=e[f];if(l)if(Ne(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const b=Ai(f);s[b]=ya(l,a,b,p,t,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{ld(t,e,s,o)&&(c=!0);let u;for(const h in a)(!e||!Ne(e,h)&&((u=Jn(h))===h||!Ne(e,u)))&&(l?i&&(i[h]!==void 0||i[u]!==void 0)&&(s[h]=ya(l,a,h,void 0,t,!0)):delete s[h]);if(o!==a)for(const h in o)(!e||!Ne(e,h))&&(delete o[h],c=!0)}c&&Li(t,"set","$attrs")}function ld(t,e,i,n){const[s,o]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(vo(l))continue;const c=e[l];let u;s&&Ne(s,u=Ai(l))?!o||!o.includes(u)?i[u]=c:(a||(a={}))[u]=c:yr(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=Ge(i),c=a||ot;for(let u=0;u<o.length;u++){const h=o[u];i[h]=ya(s,l,h,c[h],t,!Ne(c,h))}}return r}function ya(t,e,i,n,s,o){const r=t[i];if(r!=null){const a=Ne(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&Me(l)){const{propsDefaults:c}=s;i in c?n=c[i]:(Kn(s),n=c[i]=l.call(null,e),An())}else n=l}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===Jn(i))&&(n=!0))}return n}function cd(t,e,i=!1){const n=e.propsCache,s=n.get(t);if(s)return s;const o=t.props,r={},a=[];let l=!1;if(!Me(t)){const u=h=>{l=!0;const[f,p]=cd(h,e,!0);Ut(r,f),p&&a.push(...p)};!i&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!l)return lt(t)&&n.set(t,Nn),Nn;if(Ie(o))for(let u=0;u<o.length;u++){const h=Ai(o[u]);ic(h)&&(r[h]=ot)}else if(o)for(const u in o){const h=Ai(u);if(ic(h)){const f=o[u],p=r[h]=Ie(f)||Me(f)?{type:f}:Object.assign({},f);if(p){const b=oc(Boolean,p.type),_=oc(String,p.type);p[0]=b>-1,p[1]=_<0||b<_,(b>-1||Ne(p,"default"))&&a.push(h)}}}const c=[r,a];return lt(t)&&n.set(t,c),c}function ic(t){return t[0]!=="$"}function nc(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function sc(t,e){return nc(t)===nc(e)}function oc(t,e){return Ie(e)?e.findIndex(i=>sc(i,t)):Me(e)&&sc(e,t)?0:-1}const ud=t=>t[0]==="_"||t==="$stable",ll=t=>Ie(t)?t.map(vi):[vi(t)],Cg=(t,e,i)=>{if(e._n)return e;const n=Wo((...s)=>ll(e(...s)),i);return n._c=!1,n},hd=(t,e,i)=>{const n=t._ctx;for(const s in t){if(ud(s))continue;const o=t[s];if(Me(o))e[s]=Cg(s,o,n);else if(o!=null){const r=ll(o);e[s]=()=>r}}},dd=(t,e)=>{const i=ll(e);t.slots.default=()=>i},Mg=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=Ge(e),$o(e,"_",i)):hd(e,t.slots={})}else t.slots={},e&&dd(t,e);$o(t.slots,Er,1)},Pg=(t,e,i)=>{const{vnode:n,slots:s}=t;let o=!0,r=ot;if(n.shapeFlag&32){const a=e._;a?i&&a===1?o=!1:(Ut(s,e),!i&&a===1&&delete s._):(o=!e.$stable,hd(e,s)),r=e}else e&&(dd(t,e),r={default:1});if(o)for(const a in s)!ud(a)&&!(a in r)&&delete s[a]};function fd(){return{app:null,config:{isNativeTag:lp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tg=0;function Bg(t,e){return function(n,s=null){Me(n)||(n=Object.assign({},n)),s!=null&&!lt(s)&&(s=null);const o=fd(),r=new Set;let a=!1;const l=o.app={_uid:Tg++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:Zg,get config(){return o.config},set config(c){},use(c,...u){return r.has(c)||(c&&Me(c.install)?(r.add(c),c.install(l,...u)):Me(c)&&(r.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,h){if(!a){const f=K(n,s);return f.appContext=o,u&&e?e(f,c):t(f,c,h),a=!0,l._container=c,c.__vue_app__=l,ul(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l}};return l}}function va(t,e,i,n,s=!1){if(Ie(t)){t.forEach((f,p)=>va(f,e&&(Ie(e)?e[p]:e),i,n,s));return}if(bs(n)&&!s)return;const o=n.shapeFlag&4?ul(n.component)||n.component.proxy:n.el,r=s?null:o,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ot?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(bt(c)?(u[c]=null,Ne(h,c)&&(h[c]=null)):Dt(c)&&(c.value=null)),Me(l))Xi(l,a,12,[r,u]);else{const f=bt(l),p=Dt(l);if(f||p){const b=()=>{if(t.f){const _=f?Ne(h,l)?h[l]:u[l]:l.value;s?Ie(_)&&Ya(_,o):Ie(_)?_.includes(o)||_.push(o):f?(u[l]=[o],Ne(h,l)&&(h[l]=u[l])):(l.value=[o],t.k&&(u[t.k]=l.value))}else f?(u[l]=r,Ne(h,l)&&(h[l]=r)):p&&(l.value=r,t.k&&(u[t.k]=r))};r?(b.id=-1,zt(b,i)):b()}}}const zt=ag;function Dg(t){return Rg(t)}function Rg(t,e){const i=pp();i.__VUE__=!0;const{insert:n,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:p=di,insertStaticContent:b}=t,_=(k,M,O,U=null,W=null,Y=null,te=!1,X=null,J=!!M.dynamicChildren)=>{if(k===M)return;k&&!is(k,M)&&(U=Et(k),_e(k,W,Y,!0),k=null),M.patchFlag===-2&&(J=!1,M.dynamicChildren=null);const{type:j,ref:le,shapeFlag:ue}=M;switch(j){case wr:v(k,M,O,U);break;case tn:y(k,M,O,U);break;case wo:k==null&&w(M,O,U,te);break;case Pe:ge(k,M,O,U,W,Y,te,X,J);break;default:ue&1?I(k,M,O,U,W,Y,te,X,J):ue&6?Re(k,M,O,U,W,Y,te,X,J):(ue&64||ue&128)&&j.process(k,M,O,U,W,Y,te,X,J,vt)}le!=null&&W&&va(le,k&&k.ref,Y,M||k,!M)},v=(k,M,O,U)=>{if(k==null)n(M.el=a(M.children),O,U);else{const W=M.el=k.el;M.children!==k.children&&c(W,M.children)}},y=(k,M,O,U)=>{k==null?n(M.el=l(M.children||""),O,U):M.el=k.el},w=(k,M,O,U)=>{[k.el,k.anchor]=b(k.children,M,O,U,k.el,k.anchor)},E=({el:k,anchor:M},O,U)=>{let W;for(;k&&k!==M;)W=f(k),n(k,O,U),k=W;n(M,O,U)},x=({el:k,anchor:M})=>{let O;for(;k&&k!==M;)O=f(k),s(k),k=O;s(M)},I=(k,M,O,U,W,Y,te,X,J)=>{te=te||M.type==="svg",k==null?T(M,O,U,W,Y,te,X,J):Q(k,M,W,Y,te,X,J)},T=(k,M,O,U,W,Y,te,X)=>{let J,j;const{type:le,props:ue,shapeFlag:me,transition:be,dirs:Ce}=k;if(J=k.el=r(k.type,Y,ue&&ue.is,ue),me&8?u(J,k.children):me&16&&V(k.children,J,null,U,W,Y&&le!=="foreignObject",te,X),Ce&&cn(k,null,U,"created"),ue){for(const d in ue)d!=="value"&&!vo(d)&&o(J,d,null,ue[d],Y,k.children,U,W,Ke);"value"in ue&&o(J,"value",null,ue.value),(j=ue.onVnodeBeforeMount)&&mi(j,U,k)}H(J,k,k.scopeId,te,U),Ce&&cn(k,null,U,"beforeMount");const S=(!W||W&&!W.pendingBranch)&&be&&!be.persisted;S&&be.beforeEnter(J),n(J,M,O),((j=ue&&ue.onVnodeMounted)||S||Ce)&&zt(()=>{j&&mi(j,U,k),S&&be.enter(J),Ce&&cn(k,null,U,"mounted")},W)},H=(k,M,O,U,W)=>{if(O&&p(k,O),U)for(let Y=0;Y<U.length;Y++)p(k,U[Y]);if(W){let Y=W.subTree;if(M===Y){const te=W.vnode;H(k,te,te.scopeId,te.slotScopeIds,W.parent)}}},V=(k,M,O,U,W,Y,te,X,J=0)=>{for(let j=J;j<k.length;j++){const le=k[j]=X?Wi(k[j]):vi(k[j]);_(null,le,M,O,U,W,Y,te,X)}},Q=(k,M,O,U,W,Y,te)=>{const X=M.el=k.el;let{patchFlag:J,dynamicChildren:j,dirs:le}=M;J|=k.patchFlag&16;const ue=k.props||ot,me=M.props||ot;let be;O&&un(O,!1),(be=me.onVnodeBeforeUpdate)&&mi(be,O,M,k),le&&cn(M,k,O,"beforeUpdate"),O&&un(O,!0);const Ce=W&&M.type!=="foreignObject";if(j?ae(k.dynamicChildren,j,X,O,U,Ce,Y):te||ee(k,M,X,null,O,U,Ce,Y,!1),J>0){if(J&16)Z(X,M,ue,me,O,U,W);else if(J&2&&ue.class!==me.class&&o(X,"class",null,me.class,W),J&4&&o(X,"style",ue.style,me.style,W),J&8){const S=M.dynamicProps;for(let d=0;d<S.length;d++){const g=S[d],A=ue[g],C=me[g];(C!==A||g==="value")&&o(X,g,A,C,W,k.children,O,U,Ke)}}J&1&&k.children!==M.children&&u(X,M.children)}else!te&&j==null&&Z(X,M,ue,me,O,U,W);((be=me.onVnodeUpdated)||le)&&zt(()=>{be&&mi(be,O,M,k),le&&cn(M,k,O,"updated")},U)},ae=(k,M,O,U,W,Y,te)=>{for(let X=0;X<M.length;X++){const J=k[X],j=M[X],le=J.el&&(J.type===Pe||!is(J,j)||J.shapeFlag&70)?h(J.el):O;_(J,j,le,null,U,W,Y,te,!0)}},Z=(k,M,O,U,W,Y,te)=>{if(O!==U){if(O!==ot)for(const X in O)!vo(X)&&!(X in U)&&o(k,X,O[X],null,te,M.children,W,Y,Ke);for(const X in U){if(vo(X))continue;const J=U[X],j=O[X];J!==j&&X!=="value"&&o(k,X,j,J,te,M.children,W,Y,Ke)}"value"in U&&o(k,"value",O.value,U.value)}},ge=(k,M,O,U,W,Y,te,X,J)=>{const j=M.el=k?k.el:a(""),le=M.anchor=k?k.anchor:a("");let{patchFlag:ue,dynamicChildren:me,slotScopeIds:be}=M;be&&(X=X?X.concat(be):be),k==null?(n(j,O,U),n(le,O,U),V(M.children,O,le,W,Y,te,X,J)):ue>0&&ue&64&&me&&k.dynamicChildren?(ae(k.dynamicChildren,me,O,W,Y,te,X),(M.key!=null||W&&M===W.subTree)&&pd(k,M,!0)):ee(k,M,O,le,W,Y,te,X,J)},Re=(k,M,O,U,W,Y,te,X,J)=>{M.slotScopeIds=X,k==null?M.shapeFlag&512?W.ctx.activate(M,O,U,te,J):Ye(M,O,U,W,Y,te,J):se(k,M,J)},Ye=(k,M,O,U,W,Y,te)=>{const X=k.component=Gg(k,U,W);if(id(k)&&(X.ctx.renderer=vt),Vg(X),X.asyncDep){if(W&&W.registerDep(X,he),!k.el){const J=X.subTree=K(tn);y(null,J,M,O)}return}he(X,k,M,O,W,Y,te)},se=(k,M,O)=>{const U=M.component=k.component;if(sg(k,M,O))if(U.asyncDep&&!U.asyncResolved){q(U,M,O);return}else U.next=M,Zp(U.update),U.update();else M.el=k.el,U.vnode=M},he=(k,M,O,U,W,Y,te)=>{const X=()=>{if(k.isMounted){let{next:le,bu:ue,u:me,parent:be,vnode:Ce}=k,S=le,d;un(k,!1),le?(le.el=Ce.el,q(k,le,te)):le=Ce,ue&&Dr(ue),(d=le.props&&le.props.onVnodeBeforeUpdate)&&mi(d,be,le,Ce),un(k,!0);const g=Rr(k),A=k.subTree;k.subTree=g,_(A,g,h(A.el),Et(A),k,W,Y),le.el=g.el,S===null&&og(k,g.el),me&&zt(me,W),(d=le.props&&le.props.onVnodeUpdated)&&zt(()=>mi(d,be,le,Ce),W)}else{let le;const{el:ue,props:me}=M,{bm:be,m:Ce,parent:S}=k,d=bs(M);if(un(k,!1),be&&Dr(be),!d&&(le=me&&me.onVnodeBeforeMount)&&mi(le,S,M),un(k,!0),ue&&gi){const g=()=>{k.subTree=Rr(k),gi(ue,k.subTree,k,W,null)};d?M.type.__asyncLoader().then(()=>!k.isUnmounted&&g()):g()}else{const g=k.subTree=Rr(k);_(null,g,O,U,k,W,Y),M.el=g.el}if(Ce&&zt(Ce,W),!d&&(le=me&&me.onVnodeMounted)){const g=M;zt(()=>mi(le,S,g),W)}(M.shapeFlag&256||S&&bs(S.vnode)&&S.vnode.shapeFlag&256)&&k.a&&zt(k.a,W),k.isMounted=!0,M=O=U=null}},J=k.effect=new Qa(X,()=>rl(j),k.scope),j=k.update=()=>J.run();j.id=k.uid,un(k,!0),j()},q=(k,M,O)=>{M.component=k;const U=k.vnode.props;k.vnode=M,k.next=null,Ig(k,M.props,U,O),Pg(k,M.children,O),Zn(),Xl(),Qn()},ee=(k,M,O,U,W,Y,te,X,J=!1)=>{const j=k&&k.children,le=k?k.shapeFlag:0,ue=M.children,{patchFlag:me,shapeFlag:be}=M;if(me>0){if(me&128){Te(j,ue,O,U,W,Y,te,X,J);return}else if(me&256){oe(j,ue,O,U,W,Y,te,X,J);return}}be&8?(le&16&&Ke(j,W,Y),ue!==j&&u(O,ue)):le&16?be&16?Te(j,ue,O,U,W,Y,te,X,J):Ke(j,W,Y,!0):(le&8&&u(O,""),be&16&&V(ue,O,U,W,Y,te,X,J))},oe=(k,M,O,U,W,Y,te,X,J)=>{k=k||Nn,M=M||Nn;const j=k.length,le=M.length,ue=Math.min(j,le);let me;for(me=0;me<ue;me++){const be=M[me]=J?Wi(M[me]):vi(M[me]);_(k[me],be,O,null,W,Y,te,X,J)}j>le?Ke(k,W,Y,!0,!1,ue):V(M,O,U,W,Y,te,X,J,ue)},Te=(k,M,O,U,W,Y,te,X,J)=>{let j=0;const le=M.length;let ue=k.length-1,me=le-1;for(;j<=ue&&j<=me;){const be=k[j],Ce=M[j]=J?Wi(M[j]):vi(M[j]);if(is(be,Ce))_(be,Ce,O,null,W,Y,te,X,J);else break;j++}for(;j<=ue&&j<=me;){const be=k[ue],Ce=M[me]=J?Wi(M[me]):vi(M[me]);if(is(be,Ce))_(be,Ce,O,null,W,Y,te,X,J);else break;ue--,me--}if(j>ue){if(j<=me){const be=me+1,Ce=be<le?M[be].el:U;for(;j<=me;)_(null,M[j]=J?Wi(M[j]):vi(M[j]),O,Ce,W,Y,te,X,J),j++}}else if(j>me)for(;j<=ue;)_e(k[j],W,Y,!0),j++;else{const be=j,Ce=j,S=new Map;for(j=Ce;j<=me;j++){const Be=M[j]=J?Wi(M[j]):vi(M[j]);Be.key!=null&&S.set(Be.key,j)}let d,g=0;const A=me-Ce+1;let C=!1,B=0;const F=new Array(A);for(j=0;j<A;j++)F[j]=0;for(j=be;j<=ue;j++){const Be=k[j];if(g>=A){_e(Be,W,Y,!0);continue}let Oe;if(Be.key!=null)Oe=S.get(Be.key);else for(d=Ce;d<=me;d++)if(F[d-Ce]===0&&is(Be,M[d])){Oe=d;break}Oe===void 0?_e(Be,W,Y,!0):(F[Oe-Ce]=j+1,Oe>=B?B=Oe:C=!0,_(Be,M[Oe],O,null,W,Y,te,X,J),g++)}const ke=C?Og(F):Nn;for(d=ke.length-1,j=A-1;j>=0;j--){const Be=Ce+j,Oe=M[Be],Je=Be+1<le?M[Be+1].el:U;F[j]===0?_(null,Oe,O,Je,W,Y,te,X,J):C&&(d<0||j!==ke[d]?ve(Oe,O,Je,2):d--)}}},ve=(k,M,O,U,W=null)=>{const{el:Y,type:te,transition:X,children:J,shapeFlag:j}=k;if(j&6){ve(k.component.subTree,M,O,U);return}if(j&128){k.suspense.move(M,O,U);return}if(j&64){te.move(k,M,O,vt);return}if(te===Pe){n(Y,M,O);for(let ue=0;ue<J.length;ue++)ve(J[ue],M,O,U);n(k.anchor,M,O);return}if(te===wo){E(k,M,O);return}if(U!==2&&j&1&&X)if(U===0)X.beforeEnter(Y),n(Y,M,O),zt(()=>X.enter(Y),W);else{const{leave:ue,delayLeave:me,afterLeave:be}=X,Ce=()=>n(Y,M,O),S=()=>{ue(Y,()=>{Ce(),be&&be()})};me?me(Y,Ce,S):S()}else n(Y,M,O)},_e=(k,M,O,U=!1,W=!1)=>{const{type:Y,props:te,ref:X,children:J,dynamicChildren:j,shapeFlag:le,patchFlag:ue,dirs:me}=k;if(X!=null&&va(X,null,O,k,!0),le&256){M.ctx.deactivate(k);return}const be=le&1&&me,Ce=!bs(k);let S;if(Ce&&(S=te&&te.onVnodeBeforeUnmount)&&mi(S,M,k),le&6)yt(k.component,O,U);else{if(le&128){k.suspense.unmount(O,U);return}be&&cn(k,null,M,"beforeUnmount"),le&64?k.type.remove(k,M,O,W,vt,U):j&&(Y!==Pe||ue>0&&ue&64)?Ke(j,M,O,!1,!0):(Y===Pe&&ue&384||!W&&le&16)&&Ke(J,M,O),U&&at(k)}(Ce&&(S=te&&te.onVnodeUnmounted)||be)&&zt(()=>{S&&mi(S,M,k),be&&cn(k,null,M,"unmounted")},O)},at=k=>{const{type:M,el:O,anchor:U,transition:W}=k;if(M===Pe){ct(O,U);return}if(M===wo){x(k);return}const Y=()=>{s(O),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(k.shapeFlag&1&&W&&!W.persisted){const{leave:te,delayLeave:X}=W,J=()=>te(O,Y);X?X(k.el,Y,J):J()}else Y()},ct=(k,M)=>{let O;for(;k!==M;)O=f(k),s(k),k=O;s(M)},yt=(k,M,O)=>{const{bum:U,scope:W,update:Y,subTree:te,um:X}=k;U&&Dr(U),W.stop(),Y&&(Y.active=!1,_e(te,k,M,O)),X&&zt(X,M),zt(()=>{k.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Ke=(k,M,O,U=!1,W=!1,Y=0)=>{for(let te=Y;te<k.length;te++)_e(k[te],M,O,U,W)},Et=k=>k.shapeFlag&6?Et(k.component.subTree):k.shapeFlag&128?k.suspense.next():f(k.anchor||k.el),Ve=(k,M,O)=>{k==null?M._vnode&&_e(M._vnode,null,null,!0):_(M._vnode||null,k,M,null,null,null,O),Xl(),Jh(),M._vnode=k},vt={p:_,um:_e,m:ve,r:at,mt:Ye,mc:V,pc:ee,pbc:ae,n:Et,o:t};let ii,gi;return e&&([ii,gi]=e(vt)),{render:Ve,hydrate:ii,createApp:Bg(Ve,ii)}}function un({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function pd(t,e,i=!1){const n=t.children,s=e.children;if(Ie(n)&&Ie(s))for(let o=0;o<n.length;o++){const r=n[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=Wi(s[o]),a.el=r.el),i||pd(r,a)),a.type===wr&&(a.el=r.el)}}function Og(t){const e=t.slice(),i=[0];let n,s,o,r,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=i[i.length-1],t[s]<c){e[n]=s,i.push(n);continue}for(o=0,r=i.length-1;o<r;)a=o+r>>1,t[i[a]]<c?o=a+1:r=a;c<t[i[o]]&&(o>0&&(e[n]=i[o-1]),i[o]=n)}}for(o=i.length,r=i[o-1];o-- >0;)i[o]=r,r=e[r];return i}const Ng=t=>t.__isTeleport,Pe=Symbol(void 0),wr=Symbol(void 0),tn=Symbol(void 0),wo=Symbol(void 0),vs=[];let ui=null;function D(t=!1){vs.push(ui=t?null:[])}function Lg(){vs.pop(),ui=vs[vs.length-1]||null}let Bs=1;function rc(t){Bs+=t}function gd(t){return t.dynamicChildren=Bs>0?ui||Nn:null,Lg(),Bs>0&&ui&&ui.push(t),t}function $(t,e,i,n,s,o){return gd(m(t,e,i,n,s,o,!0))}function nt(t,e,i,n,s){return gd(K(t,e,i,n,s,!0))}function md(t){return t?t.__v_isVNode===!0:!1}function is(t,e){return t.type===e.type&&t.key===e.key}const Er="__vInternal",_d=({key:t})=>t??null,Eo=({ref:t,ref_key:e,ref_for:i})=>t!=null?bt(t)||Dt(t)||Me(t)?{i:$t,r:t,k:e,f:!!i}:t:null;function m(t,e=null,i=null,n=0,s=null,o=t===Pe?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&_d(e),ref:e&&Eo(e),scopeId:vr,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:$t};return a?(cl(l,i),o&128&&t.normalize(l)):i&&(l.shapeFlag|=bt(i)?8:16),Bs>0&&!r&&ui&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&ui.push(l),l}const K=Fg;function Fg(t,e=null,i=null,n=0,s=null,o=!1){if((!t||t===bg)&&(t=tn),md(t)){const a=zn(t,e,!0);return i&&cl(a,i),Bs>0&&!o&&ui&&(a.shapeFlag&6?ui[ui.indexOf(t)]=a:ui.push(a)),a.patchFlag|=-2,a}if(Yg(t)&&(t=t.__vccOpts),e){e=$g(e);let{class:a,style:l}=e;a&&!bt(a)&&(e.class=Ze(a)),lt(l)&&(Gh(l)&&!Ie(l)&&(l=Ut({},l)),e.style=We(l))}const r=bt(t)?1:rg(t)?128:Ng(t)?64:lt(t)?4:Me(t)?2:0;return m(t,e,i,n,s,r,o,!0)}function $g(t){return t?Gh(t)||Er in t?Ut({},t):t:null}function zn(t,e,i=!1){const{props:n,ref:s,patchFlag:o,children:r}=t,a=e?Hg(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&_d(a),ref:e&&e.ref?i&&s?Ie(s)?s.concat(Eo(e)):[s,Eo(e)]:Eo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zn(t.ssContent),ssFallback:t.ssFallback&&zn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function $e(t=" ",e=0){return K(wr,null,t,e)}function bd(t,e){const i=K(wo,null,t);return i.staticCount=e,i}function pe(t="",e=!1){return e?(D(),nt(tn,null,t)):K(tn,null,t)}function vi(t){return t==null||typeof t=="boolean"?K(tn):Ie(t)?K(Pe,null,t.slice()):typeof t=="object"?Wi(t):K(wr,null,String(t))}function Wi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:zn(t)}function cl(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Ie(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),cl(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!(Er in e)?e._ctx=$t:s===3&&$t&&($t.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:$t},i=32):(e=String(e),n&64?(i=16,e=[$e(e)]):i=8);t.children=e,t.shapeFlag|=i}function Hg(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Ze([e.class,n.class]));else if(s==="style")e.style=We([e.style,n.style]);else if(fr(s)){const o=e[s],r=n[s];r&&o!==r&&!(Ie(o)&&o.includes(r))&&(e[s]=o?[].concat(o,r):r)}else s!==""&&(e[s]=n[s])}return e}function mi(t,e,i,n=null){fi(t,e,7,[i,n])}const Ug=fd();let Wg=0;function Gg(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||Ug,o={uid:Wg++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new gp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cd(n,s),emitsOptions:Qh(n,s),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:n.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=tg.bind(null,o),t.ce&&t.ce(o),o}let xt=null;const Kn=t=>{xt=t,t.scope.on()},An=()=>{xt&&xt.scope.off(),xt=null};function yd(t){return t.vnode.shapeFlag&4}let Ds=!1;function Vg(t,e=!1){Ds=e;const{props:i,children:n}=t.vnode,s=yd(t);kg(t,i,s,e),Mg(t,n);const o=s?jg(t,e):void 0;return Ds=!1,o}function jg(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=Vh(new Proxy(t.ctx,vg));const{setup:n}=i;if(n){const s=t.setupContext=n.length>1?Kg(t):null;Kn(t),Zn();const o=Xi(n,t,0,[t.props,s]);if(Qn(),An(),Ch(o)){if(o.then(An,An),e)return o.then(r=>{ac(t,r,e)}).catch(r=>{br(r,t,0)});t.asyncDep=o}else ac(t,o,e)}else vd(t,e)}function ac(t,e,i){Me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:lt(e)&&(t.setupState=Kh(e)),vd(t,i)}let lc;function vd(t,e,i){const n=t.type;if(!t.render){if(!e&&lc&&!n.render){const s=n.template||al(t).template;if(s){const{isCustomElement:o,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Ut(Ut({isCustomElement:o,delimiters:a},r),l);n.render=lc(s,c)}}t.render=n.render||di}Kn(t),Zn(),Sg(t),Qn(),An()}function zg(t){return new Proxy(t.attrs,{get(e,i){return Qt(t,"get","$attrs"),e[i]}})}function Kg(t){const e=n=>{t.exposed=n||{}};let i;return{get attrs(){return i||(i=zg(t))},slots:t.slots,emit:t.emit,expose:e}}function ul(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Kh(Vh(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in ys)return ys[i](t)},has(e,i){return i in e||i in ys}}))}function qg(t,e=!0){return Me(t)?t.displayName||t.name:t.name||e&&t.__name}function Yg(t){return Me(t)&&"__vccOpts"in t}const de=(t,e)=>qp(t,e,Ds),Xg=Symbol(""),Jg=()=>So(Xg),Zg="3.2.45",Qg="http://www.w3.org/2000/svg",vn=typeof document<"u"?document:null,cc=vn&&vn.createElement("template"),e0={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e?vn.createElementNS(Qg,t):vn.createElement(t,i?{is:i}:void 0);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>vn.createTextNode(t),createComment:t=>vn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>vn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,s,o){const r=i?i.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===o||!(s=s.nextSibling)););else{cc.innerHTML=n?`<svg>${t}</svg>`:t;const a=cc.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[r?r.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function t0(t,e,i){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function i0(t,e,i){const n=t.style,s=bt(i);if(i&&!s){for(const o in i)Sa(n,o,i[o]);if(e&&!bt(e))for(const o in e)i[o]==null&&Sa(n,o,"")}else{const o=n.display;s?e!==i&&(n.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=o)}}const uc=/\s*!important$/;function Sa(t,e,i){if(Ie(i))i.forEach(n=>Sa(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=n0(t,e);uc.test(i)?t.setProperty(Jn(n),i.replace(uc,""),"important"):t[n]=i}}const hc=["Webkit","Moz","ms"],Nr={};function n0(t,e){const i=Nr[e];if(i)return i;let n=Ai(e);if(n!=="filter"&&n in t)return Nr[e]=n;n=mr(n);for(let s=0;s<hc.length;s++){const o=hc[s]+n;if(o in t)return Nr[e]=o}return e}const dc="http://www.w3.org/1999/xlink";function s0(t,e,i,n,s){if(n&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(dc,e.slice(6,e.length)):t.setAttributeNS(dc,e,i);else{const o=ap(e);i==null||o&&!xh(i)?t.removeAttribute(e):t.setAttribute(e,o?"":i)}}function o0(t,e,i,n,s,o,r){if(e==="innerHTML"||e==="textContent"){n&&r(n,s,o),t[e]=i??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=i;const l=i??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),i==null&&t.removeAttribute(e);return}let a=!1;if(i===""||i==null){const l=typeof t[e];l==="boolean"?i=xh(i):i==null&&l==="string"?(i="",a=!0):l==="number"&&(i=0,a=!0)}try{t[e]=i}catch{}a&&t.removeAttribute(e)}function r0(t,e,i,n){t.addEventListener(e,i,n)}function a0(t,e,i,n){t.removeEventListener(e,i,n)}function l0(t,e,i,n,s=null){const o=t._vei||(t._vei={}),r=o[e];if(n&&r)r.value=n;else{const[a,l]=c0(e);if(n){const c=o[e]=d0(n,s);r0(t,a,c,l)}else r&&(a0(t,a,r,l),o[e]=void 0)}}const fc=/(?:Once|Passive|Capture)$/;function c0(t){let e;if(fc.test(t)){e={};let n;for(;n=t.match(fc);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Jn(t.slice(2)),e]}let Lr=0;const u0=Promise.resolve(),h0=()=>Lr||(u0.then(()=>Lr=0),Lr=Date.now());function d0(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;fi(f0(n,i.value),e,5,[n])};return i.value=t,i.attached=h0(),i}function f0(t,e){if(Ie(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const pc=/^on[a-z]/,p0=(t,e,i,n,s=!1,o,r,a,l)=>{e==="class"?t0(t,n,s):e==="style"?i0(t,i,n):fr(e)?qa(e)||l0(t,e,i,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):g0(t,e,n,s))?o0(t,e,n,o,r,a,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),s0(t,e,n,s))};function g0(t,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&pc.test(e)&&Me(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||pc.test(e)&&bt(i)?!1:e in t}const m0=Ut({patchProp:p0},e0);let gc;function _0(){return gc||(gc=Dg(m0))}const b0=(...t)=>{const e=_0().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=y0(n);if(!s)return;const o=e._component;!Me(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const r=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},e};function y0(t){return bt(t)?document.querySelector(t):t}var R=(t=>(t.BLACK="black",t.WHITE="white",t))(R||{});function Mt(t){return t==="black"?"white":"black"}function v0(t){return t==="black"?"b":"w"}function S0(t){return t==="b"||t==="w"}function w0(t){return t==="b"?"black":"white"}var N=(t=>(t.PAWN="pawn",t.LANCE="lance",t.KNIGHT="knight",t.SILVER="silver",t.GOLD="gold",t.BISHOP="bishop",t.ROOK="rook",t.KING="king",t.PROM_PAWN="promPawn",t.PROM_LANCE="promLance",t.PROM_KNIGHT="promKnight",t.PROM_SILVER="promSilver",t.HORSE="horse",t.DRAGON="dragon",t))(N||{});const E0={pawn:"",lance:"",knight:"",silver:"",gold:"",bishop:"",rook:"",king:"",promPawn:"",promLance:"",promKnight:"",promSilver:"",horse:"",dragon:""};function A0(t){return E0[t]||""}const x0=["pawn","lance","knight","silver","gold","bishop","rook"],k0={pawn:!0,lance:!0,knight:!0,silver:!0,gold:!1,bishop:!0,rook:!0,king:!1,promPawn:!1,promLance:!1,promKnight:!1,promSilver:!1,horse:!1,dragon:!1},Sd={pawn:"promPawn",lance:"promLance",knight:"promKnight",silver:"promSilver",bishop:"horse",rook:"dragon"};function I0(t){return Sd[t]||t}const C0={promPawn:"pawn",promLance:"lance",promKnight:"knight",promSilver:"silver",horse:"bishop",dragon:"rook"},wd={pawn:"P",lance:"L",knight:"N",silver:"S",gold:"G",bishop:"B",rook:"R",king:"K",promPawn:"+P",promLance:"+L",promKnight:"+N",promSilver:"+S",horse:"+B",dragon:"+R"};function M0(t){return wd[t]}const P0={pawn:"p",lance:"l",knight:"n",silver:"s",gold:"g",bishop:"b",rook:"r",king:"k",promPawn:"+p",promLance:"+l",promKnight:"+n",promSilver:"+s",horse:"+b",dragon:"+r"},mc={P:"pawn",L:"lance",N:"knight",S:"silver",G:"gold",B:"bishop",R:"rook",K:"king","+P":"promPawn","+L":"promLance","+N":"promKnight","+S":"promSilver","+B":"horse","+R":"dragon",p:"pawn",l:"lance",n:"knight",s:"silver",g:"gold",b:"bishop",r:"rook",k:"king","+p":"promPawn","+l":"promLance","+n":"promKnight","+s":"promSilver","+b":"horse","+r":"dragon"},T0={P:R.BLACK,L:R.BLACK,N:R.BLACK,S:R.BLACK,G:R.BLACK,B:R.BLACK,R:R.BLACK,K:R.BLACK,"+P":R.BLACK,"+L":R.BLACK,"+N":R.BLACK,"+S":R.BLACK,"+B":R.BLACK,"+R":R.BLACK,p:R.WHITE,l:R.WHITE,n:R.WHITE,s:R.WHITE,g:R.WHITE,b:R.WHITE,r:R.WHITE,k:R.WHITE,"+p":R.WHITE,"+l":R.WHITE,"+n":R.WHITE,"+s":R.WHITE,"+b":R.WHITE,"+r":R.WHITE},Gt=new Map;Gt.set("pawn",{type:"promPawn",reverseColor:!1});Gt.set("lance",{type:"promLance",reverseColor:!1});Gt.set("knight",{type:"promKnight",reverseColor:!1});Gt.set("silver",{type:"promSilver",reverseColor:!1});Gt.set("gold",{type:"gold",reverseColor:!0});Gt.set("bishop",{type:"horse",reverseColor:!1});Gt.set("rook",{type:"dragon",reverseColor:!1});Gt.set("king",{type:"king",reverseColor:!0});Gt.set("promPawn",{type:"pawn",reverseColor:!0});Gt.set("promLance",{type:"lance",reverseColor:!0});Gt.set("promKnight",{type:"knight",reverseColor:!0});Gt.set("promSilver",{type:"silver",reverseColor:!0});Gt.set("horse",{type:"bishop",reverseColor:!0});Gt.set("dragon",{type:"rook",reverseColor:!0});class ce{constructor(e,i){this.color=e,this.type=i}black(){return this.withColor(R.BLACK)}white(){return this.withColor(R.WHITE)}withColor(e){return new ce(e,this.type)}equals(e){return this.type===e.type&&this.color===e.color}promoted(){const e=Sd[this.type];return new ce(this.color,e||this.type)}unpromoted(){const e=C0[this.type];return new ce(this.color,e||this.type)}isPromotable(){return!!k0[this.type]}rotate(){const e=Gt.get(this.type),i=new ce(this.color,e?e.type:this.type);return e&&e.reverseColor&&(i.color=Mt(this.color)),i}get id(){return this.color+"_"+this.type}get sfen(){switch(this.color){default:case R.BLACK:return wd[this.type];case R.WHITE:return P0[this.type]}}static isValidSFEN(e){return!!mc[e]}static newBySFEN(e){const i=mc[e];if(!i)return null;const n=T0[e];return n?new ce(n,i):null}}var Lt=(t=>(t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t.LEFT_UP="left_up",t.RIGHT_UP="right_up",t.LEFT_DOWN="left_down",t.RIGHT_DOWN="right_down",t.LEFT_UP_KNIGHT="left_up_knight",t.RIGHT_UP_KNIGHT="right_up_knight",t.LEFT_DOWN_KNIGHT="left_down_knight",t.RIGHT_DOWN_KNIGHT="right_down_knight",t))(Lt||{});const B0={up:"down",down:"up",left:"right",right:"left",left_up:"right_down",right_up:"left_down",left_down:"right_up",right_down:"left_up",left_up_knight:"right_down_knight",right_up_knight:"left_down_knight",left_down_knight:"right_up_knight",right_down_knight:"left_up_knight"};function D0(t){return B0[t]}const R0=["up","down","left","right","left_up","right_up","left_down","right_down","left_up_knight","right_up_knight","left_down_knight","right_down_knight"];var Rs=(t=>(t.SHORT="short",t.LONG="long",t))(Rs||{});const Ed={black:{pawn:{up:"short"},lance:{up:"long"},knight:{left_up_knight:"short",right_up_knight:"short"},silver:{left_up:"short",up:"short",right_up:"short",left_down:"short",right_down:"short"},gold:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},bishop:{left_up:"long",right_up:"long",left_down:"long",right_down:"long"},rook:{up:"long",left:"long",right:"long",down:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promLance:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promKnight:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promSilver:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},horse:{left_up:"long",right_up:"long",left_down:"long",right_down:"long",up:"short",left:"short",right:"short",down:"short"},dragon:{up:"long",left:"long",right:"long",down:"long",left_up:"short",right_up:"short",left_down:"short",right_down:"short"}},white:{pawn:{down:"short"},lance:{down:"long"},knight:{left_down_knight:"short",right_down_knight:"short"},silver:{left_down:"short",down:"short",right_down:"short",left_up:"short",right_up:"short"},gold:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},bishop:{left_down:"long",right_down:"long",left_up:"long",right_up:"long"},rook:{down:"long",left:"long",right:"long",up:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promLance:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promKnight:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promSilver:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},horse:{left_down:"long",right_down:"long",left_up:"long",right_up:"long",down:"short",left:"short",right:"short",up:"short"},dragon:{down:"long",left:"long",right:"long",up:"long",left_down:"short",right_down:"short",left_up:"short",right_up:"short"}}};function O0(t){return Object.keys(Ed[t.color][t.type])}function Ad(t,e){return Ed[t.color][t.type][e]}const N0={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},left_up:{x:-1,y:-1},right_up:{x:1,y:-1},left_down:{x:-1,y:1},right_down:{x:1,y:1},left_up_knight:{x:-1,y:-2},right_up_knight:{x:1,y:-2},left_down_knight:{x:-1,y:2},right_down_knight:{x:1,y:2}};function L0(t,e){if(t===1&&e===-2)return{direction:"right_up_knight",distance:1,ok:!0};if(t===-1&&e===-2)return{direction:"left_up_knight",distance:1,ok:!0};if(t===1&&e===2)return{direction:"right_down_knight",distance:1,ok:!0};if(t===-1&&e===2)return{direction:"left_down_knight",distance:1,ok:!0};if(t!==0&&e!==0&&Math.abs(t)!==Math.abs(e))return{direction:"",distance:0,ok:!1};let i=t,n=e,s=0;return i!==0&&(s=Math.abs(i),i/=s),n!==0&&(s=Math.abs(n),n/=s),i===-1&&n===-1?{direction:"left_up",distance:s,ok:!0}:i===0&&n===-1?{direction:"up",distance:s,ok:!0}:i===1&&n===-1?{direction:"right_up",distance:s,ok:!0}:i===-1&&n===0?{direction:"left",distance:s,ok:!0}:i===1&&n===0?{direction:"right",distance:s,ok:!0}:i===-1&&n===1?{direction:"left_down",distance:s,ok:!0}:i===0&&n===1?{direction:"down",distance:s,ok:!0}:i===1&&n===1?{direction:"right_down",distance:s,ok:!0}:{direction:"",distance:0,ok:!1}}function F0(t){switch(t){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}function $0(t){switch(t){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;case"i":return 9;default:return null}}const H0=["a","b","c","d","e","f","g","h","i"],mt=class{constructor(e,i){this.file=e,this.rank=i}get x(){return 9-this.file}get y(){return this.rank-1}get index(){return this.y*9+this.x}get opposite(){return new mt(10-this.file,10-this.rank)}neighbor(e,i){switch(e){case Lt.UP:return new mt(this.file,this.rank-1);case Lt.DOWN:return new mt(this.file,this.rank+1);case Lt.LEFT:return new mt(this.file+1,this.rank);case Lt.RIGHT:return new mt(this.file-1,this.rank);case Lt.LEFT_UP:return new mt(this.file+1,this.rank-1);case Lt.RIGHT_UP:return new mt(this.file-1,this.rank-1);case Lt.LEFT_DOWN:return new mt(this.file+1,this.rank+1);case Lt.RIGHT_DOWN:return new mt(this.file-1,this.rank+1);case Lt.LEFT_UP_KNIGHT:return new mt(this.file+1,this.rank-2);case Lt.RIGHT_UP_KNIGHT:return new mt(this.file-1,this.rank-2);case Lt.LEFT_DOWN_KNIGHT:return new mt(this.file+1,this.rank+2);case Lt.RIGHT_DOWN_KNIGHT:return new mt(this.file-1,this.rank+2)}const n=e,s=i;return new mt(this.file-n,this.rank+s)}get valid(){return this.file>=1&&this.file<=9&&this.rank>=1&&this.rank<=9}equals(e){return!!e&&this.file===e.file&&this.rank===e.rank}static newByXY(e,i){return new mt(9-e,i+1)}static newByIndex(e){return new mt(9-e%9,Math.trunc(e/9)+1)}get sfen(){return this.file+H0[this.rank-1]}static parseSFENSquare(e){const i=F0(e[0]),n=$0(e[1]);return!i||!n?null:new mt(i,n)}};let L=mt;P(L,"all",[]);for(let t=0;t<81;t+=1)L.all.push(L.newByIndex(t));const U0=["","","","","","","","",""],W0=["","","","","","","","",""];class st{constructor(e,i,n,s,o,r){this.from=e,this.to=i,this.promote=n,this.color=s,this.pieceType=o,this.capturedPieceType=r}equals(e){return e?(this.from instanceof L&&e.from instanceof L&&this.from.equals(e.from)||!(this.from instanceof L)&&!(e.from instanceof L)&&this.from===e.from)&&this.to.equals(e.to)&&this.promote===e.promote&&this.color===e.color&&this.pieceType===e.pieceType&&this.capturedPieceType===e.capturedPieceType:!1}withPromote(){return new st(this.from,this.to,!0,this.color,this.pieceType,this.capturedPieceType)}getDisplayText(e){let i="";if(i+=this.color===R.BLACK?e!=null&&e.legacy?"":"":e!=null&&e.legacy?"":"",e!=null&&e.prev&&(e!=null&&e.prev.to.equals(this.to))?i+="":(i+=U0[this.to.file-1],i+=W0[this.to.rank-1]),i+=A0(this.pieceType),this.promote&&(i+=""),this.from instanceof L){const n=this.from;i+=`(${n.file}${n.rank})`}else i+="";return i}get usi(){let e="";return this.from instanceof L?e+=this.from.sfen:e+=M0(this.from)+"*",e+=this.to.sfen,this.promote&&(e+="+"),e}}function xd(t){let e;if(t[1]==="*"){const s=ce.newBySFEN(t[0]);if(!s)return null;e=s.type}else{const s=L.parseSFENSquare(t);if(!s)return null;e=s}const i=L.parseSFENSquare(t.substring(2));if(!i)return null;const n=t.length>=5&&t[4]==="+";return{from:e,to:i,promote:n}}var Se=(t=>(t.STANDARD="standard",t.EMPTY="empty",t.HANDICAP_LANCE="handicapLance",t.HANDICAP_RIGHT_LANCE="handicapRightLance",t.HANDICAP_BISHOP="handicapBishop",t.HANDICAP_ROOK="handicapRook",t.HANDICAP_ROOK_LANCE="handicapRookLance",t.HANDICAP_2PIECES="handicap2Pieces",t.HANDICAP_4PIECES="handicap4Pieces",t.HANDICAP_6PIECES="handicap6Pieces",t.HANDICAP_8PIECES="handicap8Pieces",t.TSUME_SHOGI="tsumeShogi",t.TSUME_SHOGI_2KINGS="tsumeShogi2Kings",t))(Se||{});function _c(t){switch(t){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}class Vo{constructor(){P(this,"squares");this.squares=new Array;for(let e=0;e<81;e+=1)this.squares.push(null);this.reset("standard")}at(e){return this.squares[e.index]}set(e,i){this.squares[e.index]=i}swap(e,i){const n=this.squares[e.index];this.squares[e.index]=this.squares[i.index],this.squares[i.index]=n}remove(e){const i=this.squares[e.index];return this.squares[e.index]=null,i}listNonEmptySquares(){const e=new Array;return L.all.forEach(i=>{this.squares[i.index]&&e.push(i)}),e}listSquaresByColor(e){const i=new Array;return L.all.forEach(n=>{const s=this.squares[n.index];s&&s.color===e&&i.push(n)}),i}clear(){L.all.forEach(e=>{this.squares[e.index]=null})}reset(e){if(this.clear(),e!=="empty"&&(this.squares[new L(5,1).index]=new ce(R.WHITE,N.KING),e!=="tsumeShogi"&&(this.squares[new L(5,9).index]=new ce(R.BLACK,N.KING),e!=="tsumeShogi2Kings")))switch(this.squares[new L(2,8).index]=new ce(R.BLACK,N.ROOK),this.squares[new L(8,2).index]=new ce(R.WHITE,N.ROOK),this.squares[new L(8,8).index]=new ce(R.BLACK,N.BISHOP),this.squares[new L(2,2).index]=new ce(R.WHITE,N.BISHOP),this.squares[new L(4,9).index]=new ce(R.BLACK,N.GOLD),this.squares[new L(6,9).index]=new ce(R.BLACK,N.GOLD),this.squares[new L(6,1).index]=new ce(R.WHITE,N.GOLD),this.squares[new L(4,1).index]=new ce(R.WHITE,N.GOLD),this.squares[new L(3,9).index]=new ce(R.BLACK,N.SILVER),this.squares[new L(7,9).index]=new ce(R.BLACK,N.SILVER),this.squares[new L(7,1).index]=new ce(R.WHITE,N.SILVER),this.squares[new L(3,1).index]=new ce(R.WHITE,N.SILVER),this.squares[new L(2,9).index]=new ce(R.BLACK,N.KNIGHT),this.squares[new L(8,9).index]=new ce(R.BLACK,N.KNIGHT),this.squares[new L(8,1).index]=new ce(R.WHITE,N.KNIGHT),this.squares[new L(2,1).index]=new ce(R.WHITE,N.KNIGHT),this.squares[new L(1,9).index]=new ce(R.BLACK,N.LANCE),this.squares[new L(9,9).index]=new ce(R.BLACK,N.LANCE),this.squares[new L(9,1).index]=new ce(R.WHITE,N.LANCE),this.squares[new L(1,1).index]=new ce(R.WHITE,N.LANCE),this.squares[new L(1,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(2,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(3,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(4,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(5,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(6,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(7,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(8,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(9,7).index]=new ce(R.BLACK,N.PAWN),this.squares[new L(1,3).index]=new ce(R.WHITE,N.PAWN),this.squares[new L(2,3).index]=new ce(R.WHITE,N.PAWN),this.squares[new L(3,3).index]=new ce(R.WHITE,N.PAWN),this.squares[new L(4,3).index]=new ce(R.WHITE,N.PAWN),this.squares[new L(5,3).index]=new ce(R.WHITE,N.PAWN),this.squares[new L(6,3).index]=new ce(R.WHITE,N.PAWN),this.squares[new L(7,3).index]=new ce(R.WHITE,N.PAWN),this.squares[new L(8,3).index]=new ce(R.WHITE,N.PAWN),this.squares[new L(9,3).index]=new ce(R.WHITE,N.PAWN),e){default:case"standard":return;case"handicapLance":this.squares[new L(1,1).index]=null;return;case"handicapRightLance":this.squares[new L(9,1).index]=null;return;case"handicapBishop":this.squares[new L(2,2).index]=null;return;case"handicapRook":this.squares[new L(8,2).index]=null;return;case"handicapRookLance":this.squares[new L(8,2).index]=null,this.squares[new L(1,1).index]=null;return;case"handicap2Pieces":this.squares[new L(8,2).index]=null,this.squares[new L(2,2).index]=null;return;case"handicap4Pieces":this.squares[new L(8,2).index]=null,this.squares[new L(2,2).index]=null,this.squares[new L(1,1).index]=null,this.squares[new L(9,1).index]=null;return;case"handicap6Pieces":this.squares[new L(8,2).index]=null,this.squares[new L(2,2).index]=null,this.squares[new L(1,1).index]=null,this.squares[new L(2,1).index]=null,this.squares[new L(8,1).index]=null,this.squares[new L(9,1).index]=null;return;case"handicap8Pieces":this.squares[new L(8,2).index]=null,this.squares[new L(2,2).index]=null,this.squares[new L(1,1).index]=null,this.squares[new L(2,1).index]=null,this.squares[new L(3,1).index]=null,this.squares[new L(7,1).index]=null,this.squares[new L(8,1).index]=null,this.squares[new L(9,1).index]=null;return}}get sfen(){let e="",i=0;for(let n=0;n<9;n+=1){for(let s=0;s<9;s+=1){const o=this.at(L.newByXY(s,n));o?(i&&(e+=i,i=0),e+=o.sfen):i+=1}i&&(e+=i,i=0),n!==8&&(e+="/")}return e}resetBySFEN(e){if(!Vo.isValidSFEN(e))return!1;this.clear();const i=e.split("/");for(let n=0;n<9;n+=1){let s=0;for(let o=0;o<i[n].length;o+=1){let r=i[n][o];r==="+"&&(o+=1,r+=i[n][o]);const a=_c(r);a?s+=a:(this.set(L.newByXY(s,n),ce.newBySFEN(r)),s+=1)}}return!0}findKing(e){const i=new ce(e,N.KING);return L.all.find(n=>{const s=this.at(n);if(s&&i.equals(s))return!0})}hasPower(e,i,n){return!!R0.find(s=>{let o=0;for(let r=e.neighbor(s);r.valid&&(o+=1,!(n&&n.filled&&r.equals(n.filled)));r=r.neighbor(s)){if(n&&n.ignore&&r.equals(n.ignore))continue;const a=this.at(r);if(a){if(a.color!==i)return!1;const l=D0(s),c=Ad(a,l);return c===Rs.LONG||c===Rs.SHORT&&o===1}}return!1})}isChecked(e,i){const n=this.findKing(e);return n?this.hasPower(n,Mt(e),{filled:i&&i.filled,ignore:i&&i.ignore}):!1}static isValidSFEN(e){const i=e.split("/");if(i.length!==9)return!1;for(let n=0;n<9;n+=1){let s=0;for(let o=0;o<i[n].length;o+=1){let r=i[n][o];r==="+"&&(o+=1,r+=i[n][o]);const a=_c(r);if(a)s+=a;else if(ce.isValidSFEN(r))s+=1;else return!1}if(s!==9)return!1}return!0}copyFrom(e){L.all.forEach(i=>{this.squares[i.index]=e.at(i)})}}function hn(t,e){return t===0?"":(t!==1?t:"")+e.sfen}class oi{constructor(){P(this,"pieces");this.pieces=new Map,this.pieces.set(N.PAWN,0),this.pieces.set(N.LANCE,0),this.pieces.set(N.KNIGHT,0),this.pieces.set(N.SILVER,0),this.pieces.set(N.GOLD,0),this.pieces.set(N.BISHOP,0),this.pieces.set(N.ROOK,0)}count(e){return this.pieces.get(e)}set(e,i){this.pieces.set(e,i)}add(e,i){let n=this.pieces.get(e);return n+=i,this.pieces.set(e,n),n}reduce(e,i){let n=this.pieces.get(e);return n-=i,this.pieces.set(e,n),n}forEach(e){e(N.PAWN,this.pieces.get(N.PAWN)),e(N.LANCE,this.pieces.get(N.LANCE)),e(N.KNIGHT,this.pieces.get(N.KNIGHT)),e(N.SILVER,this.pieces.get(N.SILVER)),e(N.GOLD,this.pieces.get(N.GOLD)),e(N.BISHOP,this.pieces.get(N.BISHOP)),e(N.ROOK,this.pieces.get(N.ROOK))}get sfenBlack(){return this.formatSFEN(R.BLACK)}get sfenWhite(){return this.formatSFEN(R.WHITE)}formatSFEN(e){let i="";return i+=hn(this.count(N.ROOK),new ce(e,N.ROOK)),i+=hn(this.count(N.BISHOP),new ce(e,N.BISHOP)),i+=hn(this.count(N.GOLD),new ce(e,N.GOLD)),i+=hn(this.count(N.SILVER),new ce(e,N.SILVER)),i+=hn(this.count(N.KNIGHT),new ce(e,N.KNIGHT)),i+=hn(this.count(N.LANCE),new ce(e,N.LANCE)),i+=hn(this.count(N.PAWN),new ce(e,N.PAWN)),i===""?"-":i}static formatSFEN(e,i){const n=e.sfenBlack,s=i.sfenWhite;return n==="-"&&s==="-"?"-":s==="-"?n:n==="-"?s:n+s}static isValidSFEN(e){return e==="-"?!0:!!e.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)}static parseSFEN(e){if(e==="-")return{black:new oi,white:new oi};if(!e.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/))return null;const i=e.match(/([0-9]*[PLNSGBRplnsgbr])/g),n=new oi,s=new oi;for(let o=0;o<i.length;o+=1){const r=i[o];let a=1;r.length>=2&&(a=Number(r.substring(0,r.length-1)));const l=ce.newBySFEN(r[r.length-1]);l.color===R.BLACK?n.add(l.type,a):s.add(l.type,a)}return{black:n,white:s}}copyFrom(e){e.pieces.forEach((i,n)=>{this.pieces.set(n,i)})}}const G0={black:{pawn:{1:!0},lance:{1:!0},knight:{1:!0,2:!0}},white:{pawn:{9:!0},lance:{9:!0},knight:{9:!0,8:!0}}};function bc(t,e,i){const n=G0[t][e];return n?n[i]:!1}function yc(t,e){return t===R.BLACK?e<=3:e>=7}function V0(t,e,i){for(let n=1;n<=9;n+=1){const s=e.at(new L(i,n));if(s&&s.type===N.PAWN&&s.color===t)return!0}return!1}class Bt{constructor(){P(this,"_board",new Vo);P(this,"_color",R.BLACK);P(this,"_blackHand",new oi);P(this,"_whiteHand",new oi)}get board(){return this._board}get color(){return this._color}get blackHand(){return this._blackHand}get whiteHand(){return this._whiteHand}reset(e){switch(this._board.reset(e),this._blackHand=new oi,this._whiteHand=new oi,e){case Se.STANDARD:case Se.EMPTY:case Se.TSUME_SHOGI:case Se.TSUME_SHOGI_2KINGS:this._color=R.BLACK;break;case Se.HANDICAP_LANCE:case Se.HANDICAP_RIGHT_LANCE:case Se.HANDICAP_BISHOP:case Se.HANDICAP_ROOK:case Se.HANDICAP_ROOK_LANCE:case Se.HANDICAP_2PIECES:case Se.HANDICAP_4PIECES:case Se.HANDICAP_6PIECES:case Se.HANDICAP_8PIECES:this._color=R.WHITE;break}(e===Se.TSUME_SHOGI||e===Se.TSUME_SHOGI_2KINGS)&&(this._whiteHand.set(N.PAWN,18),this._whiteHand.set(N.LANCE,4),this._whiteHand.set(N.KNIGHT,4),this._whiteHand.set(N.SILVER,4),this._whiteHand.set(N.GOLD,4),this._whiteHand.set(N.BISHOP,2),this._whiteHand.set(N.ROOK,2))}hand(e){return this._hand(e)}_hand(e){return e===R.BLACK?this._blackHand:this._whiteHand}get checked(){return this._board.isChecked(this.color)}createMove(e,i){let n;if(e instanceof L){const o=this._board.at(e);if(!o)return null;n=o.type}else n=e;const s=this._board.at(i);return new st(e,i,!1,this.color,n,s?s.type:null)}createMoveByUSI(e){const i=xd(e);if(!i)return null;let n=this.createMove(i.from,i.to);return n?(i.promote&&(n=n.withPromote()),n):null}isPawnDropMate(e){if(e.from instanceof L||e.pieceType!==N.PAWN)return!1;const i=e.to.neighbor(e.color===R.BLACK?Lt.UP:Lt.DOWN),n=this.board.at(i);return!n||n.type!==N.KING||n.color===e.color||O0(n).find(o=>{const r=i.neighbor(o);if(!r.valid)return!1;const a=this.board.at(r);return a&&a.color==n.color?!1:!this.board.hasPower(r,e.color,{filled:e.to})})?!1:!this.board.listSquaresByColor(n.color).find(o=>!o.equals(i)&&this.isMovable(o,e.to)&&!this.board.isChecked(n.color,{filled:e.to,ignore:o}))}isValidMove(e){if(e.from instanceof L){const i=this._board.at(e.from);if(!i||i.color!==this.color||!this.isMovable(e.from,e.to))return!1;const n=this._board.at(e.to);if(n&&n.color===this.color)return!1;if(e.promote){if(!i.isPromotable()||!yc(this.color,e.from.rank)&&!yc(this.color,e.to.rank))return!1}else if(bc(this.color,i.type,e.to.rank))return!1;if(e.pieceType!==N.KING?this._board.isChecked(this.color,{filled:e.to,ignore:e.from}):this._board.hasPower(e.to,Mt(this.color),{ignore:e.from}))return!1}else if(e.promote||e.color!==this.color||this.hand(this.color).count(e.from)===0||this._board.at(e.to)||bc(this.color,e.from,e.to.rank)||e.from===N.PAWN&&V0(this.color,this._board,e.to.file)||this._board.isChecked(this.color,{filled:e.to})||this.isPawnDropMate(e))return!1;return!0}doMove(e,i){if(!(i&&i.ignoreValidation)&&!this.isValidMove(e))return!1;if(e.from instanceof L){const n=this._board.at(e.from),s=this._board.at(e.to);this._board.remove(e.from),this._board.set(e.to,e.promote?n.promoted():n),s&&s.type!==N.KING&&this._hand(this.color).add(s.unpromoted().type,1)}else this._hand(this.color).reduce(e.from,1),this._board.set(e.to,new ce(this.color,e.from));return this._color=Mt(this.color),!0}undoMove(e){if(this._color=Mt(this.color),e.from instanceof L)if(this._board.set(e.from,new ce(this.color,e.pieceType)),e.capturedPieceType){const i=new ce(Mt(this.color),e.capturedPieceType);this._board.set(e.to,i),i.type!==N.KING&&this._hand(this.color).reduce(i.unpromoted().type,1)}else this._board.remove(e.to);else this._hand(this.color).add(e.from,1),this._board.remove(e.to)}isValidEditing(e,i){if(e instanceof L){const n=this._board.at(e);if(!n)return!1;if(i instanceof L){if(e.equals(i))return!1}else if(n.type===N.KING)return!1}else{if(!e.color||this.hand(e.color).count(e.type)===0)return!1;if(i instanceof L){if(this._board.at(i))return!1}else if(e.color===i)return!1}return!0}edit(e){if(e.move){if(!this.isValidEditing(e.move.from,e.move.to))return!1;if(!(e.move.from instanceof L))this._hand(e.move.from.color).reduce(e.move.from.type,1),e.move.to instanceof L?this._board.set(e.move.to,e.move.from):this._hand(e.move.to).add(e.move.from.type,1);else if(e.move.to instanceof L)this._board.swap(e.move.from,e.move.to);else{const i=this._board.remove(e.move.from);this._hand(e.move.to).add(i.unpromoted().type,1)}}if(e.rotate){const i=this._board.at(e.rotate);i&&this._board.set(e.rotate,i.rotate())}return!0}get sfen(){return this.getSFEN(1)}getSFEN(e){let i=`${this._board.sfen} ${v0(this.color)} `;return i+=oi.formatSFEN(this._blackHand,this._whiteHand),i+=" "+e,i}resetBySFEN(e){if(!Bt.isValidSFEN(e))return!1;const i=e.split(" ");i[0]==="sfen"&&i.shift(),this._board.resetBySFEN(i[0]),this._color=w0(i[1]);const n=oi.parseSFEN(i[2]);return this._blackHand=n.black,this._whiteHand=n.white,!0}setColor(e){this._color=e}static isValidSFEN(e){const i=e.split(" ");return i.length===5&&i[0]==="sfen"&&i.shift(),!(i.length!==4||!Vo.isValidSFEN(i[0])||!S0(i[1])||!oi.isValidSFEN(i[2])||!i[3].match(/[0-9]+/))}static newBySFEN(e){const i=new Bt;return i.resetBySFEN(e)?i:null}isMovable(e,i){const n=i.x-e.x,s=i.y-e.y,{direction:o,distance:r,ok:a}=L0(n,s);if(!a)return!1;const l=this._board.at(e);if(!l)return!1;switch(Ad(l,o)){default:return!1;case Rs.SHORT:return r===1;case Rs.LONG:{const c=N0[o];for(let u=e.neighbor(c.x,c.y);u.valid;u=u.neighbor(c.x,c.y)){if(u.equals(i))return!0;if(this._board.at(u))return!1}return!1}}}copyFrom(e){this._board.copyFrom(e._board),this._color=e.color,this._blackHand.copyFrom(e._blackHand),this._whiteHand.copyFrom(e._whiteHand)}clone(){const e=new Bt;return e.copyFrom(this),e}}function j0(t){const e={pawn:0,lance:0,knight:0,silver:0,gold:0,bishop:0,rook:0,king:0,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0};return L.all.forEach(i=>{const n=t.board.at(i);n&&(e[n.type]+=1)}),t.blackHand.forEach((i,n)=>{e[i]+=n}),t.whiteHand.forEach((i,n)=>{e[i]+=n}),e}function z0(t){const e=j0(t);return{pawn:18-e.pawn-e.promPawn,lance:4-e.lance-e.promLance,knight:4-e.knight-e.promKnight,silver:4-e.silver-e.promSilver,gold:4-e.gold,bishop:2-e.bishop-e.horse,rook:2-e.rook-e.dragon,king:2-e.king,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0}}function kd(t){return Cd(Math.floor(t/1e3))}function Id(t){return Md(Math.floor(t/1e3))}function Cd(t){const e=Math.floor(t/3600),i=Math.floor((t-e*3600)/60),n=t%60;return e+":"+String(i).padStart(2,"0")+":"+String(n).padStart(2,"0")}function Md(t){const e=Math.floor(t/60),i=t%60;return String(e).padStart(2," ")+":"+String(i).padStart(2,"0")}var re=(t=>(t.TITLE="title",t.BLACK_NAME="blackName",t.WHITE_NAME="whiteName",t.START_DATETIME="startDatetime",t.END_DATETIME="endDatetime",t.DATE="date",t.TOURNAMENT="tournament",t.STRATEGY="strategy",t.TIME_LIMIT="timeLimit",t.TIME_SPENT="timeSpent",t.PLACE="place",t.POSTED_ON="postedOn",t.NOTE="note",t.BLACK_SHORT_NAME="blackShortName",t.WHITE_SHORT_NAME="whiteShortName",t.OPUS_NO="opusNo",t.OPUS_NAME="opusName",t.AUTHOR="author",t.PUBLISHED_ON="publishedOn",t.PUBLISHED_AT="publishedAt",t.SOURCE="source",t.LENGTH="length",t.INTEGRITY="integrity",t.CATEGORY="category",t.AWARD="award",t))(re||{});function K0(t){switch(t){case"blackName":return"";case"whiteName":return"";case"startDatetime":return"";case"endDatetime":return"";case"date":return"";case"tournament":return"";case"strategy":return"";case"title":return"";case"timeLimit":return"";case"timeSpent":return"";case"place":return"";case"postedOn":return"";case"note":return"";case"blackShortName":return"";case"whiteShortName":return"";case"opusNo":return"";case"opusName":return"";case"author":return"";case"publishedOn":return"";case"publishedAt":return"";case"source":return"";case"length":return"";case"integrity":return"";case"category":return"";case"award":return""}}class jo{constructor(){P(this,"standard",new Map);P(this,"custom",new Map)}get standardMetadataKeys(){return this.standard.keys()}getStandardMetadata(e){return this.standard.get(e)}setStandardMetadata(e,i){i?this.standard.set(e,i):this.standard.delete(e)}get customMetadataKeys(){return this.custom.keys()}getCustomMetadata(e){return this.custom.get(e)}setCustomMetadata(e,i){i?this.custom.set(e,i):this.custom.delete(e)}}var ne=(t=>(t.START="start",t.INTERRUPT="interrupt",t.RESIGN="resign",t.IMPASS="impass",t.DRAW="draw",t.REPETITION_DRAW="repetitionDraw",t.MATE="mate",t.TIMEOUT="timeout",t.FOUL_WIN="foulWin",t.FOUL_LOSE="foulLose",t.ENTERING_OF_KING="enteringOfKing",t.WIN_BY_DEFAULT="winByDefault",t.LOSS_BY_DEFAULT="lossByDefault",t))(ne||{});const q0={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",lossByDefault:""};function Pd(t){return q0[t]}class Rn{constructor(e,i,n,s,o,r,a){P(this,"next",null);P(this,"branch",null);P(this,"comment","");P(this,"customData");P(this,"elapsedMs",0);P(this,"totalElapsedMs",0);this.number=e,this.prev=i,this.branchIndex=n,this.activeBranch=s,this.nextColor=o,this.move=r,this.isCheck=a}get displayText(){const e=this.prev&&this.prev.move instanceof st?this.prev.move:null;return this.move instanceof st?this.move.getDisplayText({prev:e}):Pd(this.move)}get timeText(){const e=Id(this.elapsedMs),i=kd(this.totalElapsedMs);return`${e} / ${i}`}get hasBranch(){return!!this.prev&&!!this.prev.next&&!!this.prev.next.branch}get isFirstBranch(){return!this.prev||this.prev.next===this}get isLastMove(){if(!this.next)return!0;for(let e=this.next;e;e=e.branch)if(e.move instanceof st)return!1;return!0}updateTotalElapsedMs(){this.totalElapsedMs=this.elapsedMs,this.prev&&this.prev.prev&&(this.totalElapsedMs+=this.prev.prev.totalElapsedMs)}setElapsedMs(e){this.elapsedMs=e,this.updateTotalElapsedMs();let i=this.next;const n=[];for(;i;)i.updateTotalElapsedMs(),i.branch&&n.push(i.branch),i.next?i=i.next:i=n.pop()||null}static newRootEntry(e){return new Rn(0,null,0,!0,e,"start",!1)}}class At{constructor(e){P(this,"metadata");P(this,"_initialPosition");P(this,"_position");P(this,"_first");P(this,"_current");P(this,"repetitionCounts",{});P(this,"repetitionStart",{});P(this,"onChangePosition",()=>{});this.metadata=new jo,this._initialPosition=e?e.clone():new Bt,this._position=this.initialPosition.clone(),this._first=Rn.newRootEntry(this._initialPosition.color),this._current=this._first,this.incrementRepetition()}get initialPosition(){return this._initialPosition}get position(){return this._position}get first(){return this._first}get current(){return this._current}get moves(){const e=this.movesBefore;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;e.push(i)}return e}get movesBefore(){return this._movesBefore}get _movesBefore(){const e=new Array;e.unshift(this._current);for(let i=this._current.prev;i;i=i.prev)e.unshift(i);return e}get length(){let e=this._current.number;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;e=i.number}return e}get branchBegin(){return this._current.prev?this._current.prev.next:this._current}clear(e){this.metadata=new jo,e&&(this._initialPosition=e.clone()),this._position=this.initialPosition.clone(),this._first=Rn.newRootEntry(this._initialPosition.color),this._current=this._first,this.repetitionCounts={},this.repetitionStart={},this.incrementRepetition(),this.onChangePosition()}goBack(){return this._goBack()?(this.onChangePosition(),!0):!1}_goBack(){return this._current.prev?(this._current.move instanceof st&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=this._current.prev,!0):!1}goForward(){return this._goForward()?(this.onChangePosition(),!0):!1}_goForward(){if(this._current.next){for(this._current=this._current.next;!this._current.activeBranch;)this._current=this._current.branch;return this._current.move instanceof st&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),!0}return!1}goto(e){for(;e<this._current.number&&this._goBack(););for(;e>this._current.number&&this._goForward(););this.onChangePosition()}resetAllBranchSelection(){this._forEach(e=>{e.activeBranch=e.isFirstBranch})}switchBranchByIndex(e){if(this.current.branchIndex===e)return!0;if(!this._current.prev)return!1;let i=!1;for(let n=this._current.prev.next;n;n=n.branch)n.branchIndex===e?(n.activeBranch=!0,this._current.move instanceof st&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=n,this._current.move instanceof st&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),i=!0):n.activeBranch=!1;return i&&this.onChangePosition(),i}append(e,i){let n=!1;if(e instanceof st){if(!this._position.doMove(e,i))return!1;this.incrementRepetition(),n=this.position.checked}if(this._current!==this.first&&!(this._current.move instanceof st)&&this.goBack(),!this._current.next)return this._current.next=new Rn(this._current.number+1,this._current,0,!0,this.position.color,e,n),this._current=this._current.next,this._current.setElapsedMs(0),this.onChangePosition(),!0;let s;for(s=this._current.next;s;s=s.branch)s.activeBranch=!1;let o=this._current.next;for(s=this._current.next;s;s=s.branch){if(s.move instanceof st&&e instanceof st&&e.equals(s.move)||e===s.move)return this._current=s,this._current.activeBranch=!0,this.onChangePosition(),!0;o=s}return this._current=new Rn(this._current.number+1,this._current,o.branchIndex+1,!0,this.position.color,e,n),this._current.setElapsedMs(0),o.branch=this._current,this.onChangePosition(),!0}swapWithNextBranch(){return this._current.branch?At.swapWithPreviousBranch(this._current.branch):!1}swapWithPreviousBranch(){return At.swapWithPreviousBranch(this._current)}static swapWithPreviousBranch(e){const i=e.prev;if(!i||!i.next||i.next==e)return!1;if(i.next.branch===e){const n=i.next;return n.branch=e.branch,e.branch=n,i.next=e,[e.branchIndex,n.branchIndex]=[n.branchIndex,e.branchIndex],!0}for(let n=i.next;n.branch;n=n.branch)if(n.branch.branch===e){const s=n.branch;return s.branch=e.branch,e.branch=s,n.branch=e,[e.branchIndex,s.branchIndex]=[s.branchIndex,e.branchIndex],!0}return!1}removeCurrentMove(){const e=this._current;if(!this.goBack()){this._current.next=null;return}if(this._current.next===e)this._current.next=e.branch;else for(let n=this._current.next;n;n=n.branch)if(n.branch===e){n.branch=e.branch;break}let i=0;for(let n=this._current.next;n;n=n.branch)n.branchIndex=i,i+=1;this._current.next&&(this._current.next.activeBranch=!0),this.onChangePosition()}removeNextMove(){this._current.next=null}incrementRepetition(){const e=this.position.sfen;this.repetitionCounts[e]?this.repetitionCounts[e]+=1:(this.repetitionCounts[e]=1,this.repetitionStart[e]=this.current.number)}decrementRepetition(){const e=this.position.sfen;this.repetitionCounts[e]-=1,this.repetitionCounts[e]===0&&(delete this.repetitionCounts[e],delete this.repetitionStart[e])}get repetition(){return this.repetitionCounts[this.position.sfen]>=4}get perpetualCheck(){if(!this.repetition)return null;const e=this.position.sfen,i=this.repetitionStart[e];let n=!0,s=!0,o=this.position.color;for(let r=this.current;r.number>=i;r=r.prev)o=Mt(o),!r.isCheck&&(o===R.BLACK?n=!1:s=!1);return n?R.BLACK:s?R.WHITE:null}get usi(){let e="position sfen "+this.initialPosition.sfen+" moves";return this.movesBefore.forEach(i=>{i.move instanceof st&&(e+=" "+i.move.usi)}),e}get usiAll(){let e=this.usi;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;i.move instanceof st&&(e+=" "+i.move.usi)}return e}get sfen(){return this.position.getSFEN(this._current.number+1)}forEach(e){this._forEach(e)}_forEach(e){let i=this._first;const n=[];for(;i;)e(i),i.branch&&n.push(i.branch),i.next?i=i.next:i=n.pop()||null}on(e,i){switch(e){case"changePosition":this.onChangePosition=i;break}}static newByUSI(e){const i="position startpos ",n="position sfen ",s="startpos ",o="sfen ",r="moves ";return e.startsWith(i)?At.newByUSIFromMoves(new Bt,e.slice(i.length)):e.startsWith(n)?At.newByUSIFromSFEN(e.slice(n.length)):e.startsWith(s)?At.newByUSIFromMoves(new Bt,e.slice(s.length)):e.startsWith(o)?At.newByUSIFromSFEN(e.slice(o.length)):e.startsWith(r)?At.newByUSIFromMoves(new Bt,e):new Error("USI(1): "+e)}static newByUSIFromSFEN(e){const i=e.split(" ");if(i.length<4)return new Error("USI(2): "+e);const n=Bt.newBySFEN(i.slice(0,4).join(" "));return n?At.newByUSIFromMoves(n,i.slice(4).join(" ")):new Error("USI(3): "+e)}static newByUSIFromMoves(e,i){const n=new At(e);if(i.length===0)return n;const s=i.split(" ");if(s[0]!=="moves")return new Error("USI(4): "+i);for(let o=1;o<s.length;o++){const r=xd(s[o]);if(!r)break;let a=n.position.createMove(r.from,r.to);if(!a)return new Error(": "+s[o]);r.promote&&(a=a.withPromote()),n.append(a,{ignoreValidation:!0})}return n}}function zo(t,e){return(t?vc(t):"")+vc(e)}function vc(t){return t+(t.endsWith(`
`)?"":`
`)}function Td(t){return t instanceof Error?t.message:t instanceof Object?JSON.stringify(t):String(t)}function Sc(t,e,i){return(t/e*100).toFixed(i)+"%"}const Y0={:re.BLACK_NAME,:re.WHITE_NAME,:re.START_DATETIME,:re.END_DATETIME,:re.DATE,:re.TOURNAMENT,:re.STRATEGY,:re.TITLE,:re.TIME_LIMIT,:re.TIME_SPENT,:re.PLACE,:re.POSTED_ON,:re.NOTE,:re.BLACK_SHORT_NAME,:re.WHITE_SHORT_NAME,:re.OPUS_NO,:re.OPUS_NAME,:re.AUTHOR,:re.PUBLISHED_ON,:re.PUBLISHED_AT,:re.SOURCE,:re.LENGTH,:re.INTEGRITY,:re.CATEGORY,:re.AWARD},X0={blackName:"",whiteName:"",startDatetime:"",endDatetime:"",date:"",tournament:"",strategy:"",title:"",timeLimit:"",timeSpent:"",place:"",postedOn:"",note:"",blackShortName:"",whiteShortName:"",opusNo:"",opusName:"",author:"",publishedOn:"",publishedAt:"",source:"",length:"",integrity:"",category:"",award:""},wc=[{prefix:/^#/,type:0,removePrefix:!1,isPosition:!1},{prefix:/^/,type:2,removePrefix:!0,isPosition:!0},{prefix:/^/,type:3,removePrefix:!0,isPosition:!0},{prefix:/^/,type:4,removePrefix:!0,isPosition:!0},{prefix:/^\|/,type:5,removePrefix:!1,isPosition:!0},{prefix:/^/,type:6,removePrefix:!1,isPosition:!0},{prefix:/^/,type:7,removePrefix:!1,isPosition:!0},{prefix:/^ *[0-9]+ +/,type:8,removePrefix:!1,isPosition:!1},{prefix:/^\*/,type:9,removePrefix:!0,isPosition:!1}];function J0(t){for(let i=0;i<wc.length;i++){const n=wc[i],s=t.match(n.prefix);if(s){const o=n.removePrefix?s[0].length:0;return{type:n.type,data:t.substring(o),isPosition:n.isPosition,metadataKey:""}}}const e=t.match(/^[^ ]+/);if(e){const i=e[0];return{type:1,data:t.substring(i.length),isPosition:!1,metadataKey:i.substring(0,i.length-1)}}return{type:10,data:t,isPosition:!1,metadataKey:""}}function Z0(t,e){switch(e.trim()){case"":t.reset(Se.STANDARD);return;case"":t.reset(Se.HANDICAP_LANCE);return;case"":t.reset(Se.HANDICAP_RIGHT_LANCE);return;case"":t.reset(Se.HANDICAP_BISHOP);return;case"":t.reset(Se.HANDICAP_ROOK);return;case"":t.reset(Se.HANDICAP_ROOK_LANCE);return;case"":t.reset(Se.HANDICAP_2PIECES);return;case"":t.reset(Se.HANDICAP_4PIECES);return;case"":t.reset(Se.HANDICAP_6PIECES);return;case"":t.reset(Se.HANDICAP_8PIECES);return;case"":t.reset(Se.EMPTY);return}return new Error(":"+e)}const Q0={"":1,"":2,"":3,"":4,"":5,"":6,"":7,"":8,"":9},Bd={:1,:2,:3,:4,:5,:6,:7,:8,:9},em={:1,:2,:3,:4,:5,:6,:7,:8,:9,:10,:11,:12,:13,:14,:15,:16,:17,:18},Ec={1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},hl={:N.KING,:N.KING,:N.ROOK,:N.DRAGON,:N.DRAGON,:N.BISHOP,:N.HORSE,:N.GOLD,:N.SILVER,:N.PROM_SILVER,:N.PROM_SILVER,:N.KNIGHT,:N.PROM_KNIGHT,:N.PROM_KNIGHT,:N.LANCE,:N.PROM_LANCE,:N.PROM_LANCE,:N.PAWN,:N.PROM_PAWN},tm={:ne.INTERRUPT,:ne.RESIGN,:ne.IMPASS,:ne.REPETITION_DRAW,:ne.MATE,:ne.TIMEOUT,:ne.FOUL_WIN,:ne.FOUL_LOSE,:ne.ENTERING_OF_KING,:ne.WIN_BY_DEFAULT,:ne.LOSS_BY_DEFAULT},im=/^ *([0-9]+) +[]?([][]|\u3000*)(||||||||||||||||||)\u3000*(?)(|\([1-9][1-9]\)) *(.*)$/,nm=/\( *([0-9]+):([0-9]+)\/[0-9: ]*\)/,sm=/^ *([0-9]+) +(||||||||||) *(.*)$/;function om(t,e){if(e.length<21)return new Error(":"+e);const i=e[20],n=Bd[i];if(!n)return new Error(":"+e);for(let s=0;s<9;s+=1){const o=9-s,r=new L(o,n),a=s*2+1,l=e[a+1],c=hl[l];if(!c){t.remove(r);continue}const u=e[a]!=="v"?R.BLACK:R.WHITE;t.set(r,new ce(u,c))}}function Ac(t,e){const i=e.split(/[ ]/);for(const n of i){if(!n||n==="")continue;const s=n[0],o=n.substring(1),r=hl[s],a=em[o]||1;if(!r)return new Error(": "+n);t.add(r,a)}}function xc(t,e){const i=nm.exec(e);if(i){const n=i[1],s=i[2],o=Number.parseInt(n)*60+Number.parseInt(s);t.current.setElapsedMs(o*1e3)}}function rm(t,e){let i=sm.exec(e);if(i){const f=Number(i[1]),p=tm[i[2]],b=i[3];t.goto(f-1),t.append(p,{ignoreValidation:!0}),xc(t,b);return}if(i=im.exec(e),!i)return new Error(":"+e);const n=Number(i[1]),s=i[2],o=i[3],r=i[4],a=i[5],l=i[6];if(n===0)return new Error(":"+e);t.goto(n-1);let c,u;if(s.startsWith("")){if(!(t.current.move instanceof st))return new Error(": "+e);c=t.current.move.to}else{const f=Q0[s[0]],p=Bd[s[1]];c=new L(f,p)}if(a==="")u=hl[o];else{const f=Ec[a[1]],p=Ec[a[2]];u=new L(f,p)}let h=t.position.createMove(u,c);if(!h)return new Error(": "+e);r===""&&(h=h.withPromote()),t.append(h,{ignoreValidation:!0}),xc(t,l)}function kc(t){const e=new jo,i=new At,n=t.split(/\r?\n/),s=new Bt;let o="",r=!1;for(const a of n){if(a==="")continue;const l=J0(a);if(r&&l.isPosition)return new Error(": "+a);let c;switch(l.type){case 1:{const u=Y0[l.metadataKey];u?e.setStandardMetadata(u,l.data):e.setCustomMetadata(l.metadataKey,l.data);break}case 2:c=Z0(s,l.data);break;case 3:c=Ac(s.blackHand,l.data);break;case 4:c=Ac(s.whiteHand,l.data);break;case 5:c=om(s.board,l.data);break;case 6:s.setColor(R.BLACK);break;case 7:s.setColor(R.WHITE);break;case 8:r||(i.clear(s),i.first.comment=o,r=!0),c=rm(i,l.data);break;case 9:r?i.current.comment=zo(i.current.comment,l.data):o=zo(o,l.data);break}if(c)return c}return r||(i.clear(s),i.first.comment=o),i.goto(0),i.resetAllBranchSelection(),i.metadata=e,i}const Dd=["","","","","","","","","","","","","","","","","",""],am=["","","","","","","","",""],Rd=Dd,lm={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""},wa={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""},cm={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",lossByDefault:""};function um(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;for(const s of t.standardMetadataKeys)i+=X0[s]+""+t.getStandardMetadata(s)+n;for(const s of t.customMetadataKeys)i+=s+""+t.getCustomMetadata(s)+n;return i}function hm(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;i+=""+Ic(t.whiteHand)+n,i+="          "+n,i+="+---------------------------+"+n;for(let s=0;s<9;s++){i+="|";for(let o=0;o<9;o++){const r=L.newByXY(o,s),a=t.board.at(r);a?a.color===R.BLACK?i+=" "+wa[a.type]:i+="v"+wa[a.type]:i+=" "}i+="|"+Rd[s]+n}return i+="+---------------------------+"+n,i+=""+Ic(t.blackHand)+n,t.color===R.BLACK?i+=""+n:i+=""+n,i}function dm(t){let e="";return e+=am[t.to.file-1],e+=Rd[t.to.rank-1],e+=lm[t.pieceType],t.promote&&(e+=""),t.from instanceof L?e+="("+t.from.file+t.from.rank+")":e+="",e}function Ic(t){let e="";return t.forEach((i,n)=>{n>=1&&(e+=wa[i],n>=2&&(e+=Dd[n-1]),e+="")}),e}function Od(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;return i+="# KIF Generated by Electron Shogi"+n,i+=um(t.metadata,e),i+=hm(t.initialPosition,e),i+="---------------"+n,t.forEach(s=>{if(s.number!==0){s.isFirstBranch||(i+=n,i+=""+s.number+""+n),i+=s.number+" ",s.move instanceof st?i+=dm(s.move):i+=cm[s.move];const o=Id(s.elapsedMs),r=kd(s.totalElapsedMs);i+=` (${o}/${r})`,s.isFirstBranch&&s.hasBranch&&(i+="+"),i+=n}if(s.comment.length!==0){const o=s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment;i+="*"+o.replaceAll(`
`,n+"*")+n}}),i}const io=[{pattern:/^V/,type:0,sectionType:0},{pattern:/^'\*(.+)$/,type:1,sectionType:2},{pattern:/^'(.+)$/,type:2,sectionType:2},{pattern:/^N\+(.+)$/,type:3,sectionType:0},{pattern:/^N-(.+)$/,type:4,sectionType:0},{pattern:/^\$([^:]+):(.+)$/,type:5,sectionType:0},{pattern:/^PI([1-9]{2}[A-Z]{2})*$/,type:6,sectionType:0},{pattern:/^P[1-9]( \* |[-+][A-Z][A-Z]){9}$/,type:7,sectionType:0},{pattern:/^P[-+]([0-9]{2}[A-Z]{2})*/,type:8,sectionType:0},{pattern:/^[-+]$/,type:9,sectionType:0},{pattern:/^[-+][0-9]{4}[A-Z]{2}/,type:10,sectionType:1},{pattern:/^%[-+A-Z_]+/,type:11,sectionType:1},{pattern:/^T([0-9]+)/,type:12,sectionType:1}];function fm(t){const e=[],i=t.match(/^['N$]/)?[t]:t.split(",");for(const n of i)for(let s=0;s<io.length;s++){const o=io[s].pattern.exec(n);if(o){e.push({type:io[s].type,line:n,args:o.slice(1),sectionType:io[s].sectionType});break}}return e}const pm={EVENT:re.TITLE,SITE:re.PLACE,START_TIME:re.START_DATETIME,END_TIME:re.END_DATETIME,TIME_LIMIT:re.TIME_LIMIT,OPENING:re.STRATEGY},dl={FU:N.PAWN,KY:N.LANCE,KE:N.KNIGHT,GI:N.SILVER,KI:N.GOLD,KA:N.BISHOP,HI:N.ROOK,OU:N.KING,TO:N.PROM_PAWN,NY:N.PROM_LANCE,NK:N.PROM_KNIGHT,NG:N.PROM_SILVER,UM:N.HORSE,RY:N.DRAGON};function gm(t,e){e.reset(Se.STANDARD);for(let i=2;i+4<=t.length;i+=4){const n=Number(t[i]),s=Number(t[i+1]);e.board.remove(new L(n,s))}}function mm(t,e){const i=Number(t[1]);for(let n=0;n<9;n+=1){const s=9-n,o=n*3+2,r=t.slice(o,o+3);if(r[0]===" ")continue;const a=r[0]==="+"?R.BLACK:R.WHITE,l=dl[r.slice(1)];if(!l)return new Error(": "+r);e.board.set(new L(s,i),new ce(a,l))}}function _m(t,e){const i=t[1]==="+"?R.BLACK:R.WHITE;for(let n=2;n+4<=t.length;n+=4){const s=t.slice(n,n+4);if(s==="00AL"){const l=z0(e);i===R.BLACK?e.blackHand.forEach(c=>{e.blackHand.add(c,l[c])}):e.whiteHand.forEach(c=>{e.whiteHand.add(c,l[c])});return}const o=Number(s[0]),r=Number(s[1]),a=dl[s.slice(2)];if(!a)return new Error(": "+s);o!==0&&r!==0?e.board.set(new L(o,r),new ce(i,a)):i===R.BLACK?e.blackHand.add(a,1):e.whiteHand.add(a,1)}}function Nd(t,e){if((t[0]==="+"?R.BLACK:R.WHITE)!=e.color)return new Error(": "+t);const n=Number(t[1]),s=Number(t[2]),o=Number(t[3]),r=Number(t[4]),a=dl[t.slice(5,7)];if(!a)return new Error(": "+t);const l=n===0&&s===0?a:new L(n,s),c=new L(o,r);let u=e.createMove(l,c);if(!u)return new Error(": "+t);if(l instanceof L){const h=e.board.at(l);if(!h)return new Error(": "+t);if(h.type!==a)if(h.promoted().type===a)u=u.withPromote();else return new Error(": "+t)}return u}function bm(t){switch(t){case"%CHUDAN":return ne.INTERRUPT;case"%TORYO":return ne.RESIGN;case"%JISHOGI":return ne.IMPASS;case"%HIKIWAKE":return ne.DRAW;case"%SENNICHITE":return ne.REPETITION_DRAW;case"%TSUMI":return ne.MATE;case"%TIME_UP":return ne.TIMEOUT;case"%ILLEGAL_MOVE":return ne.FOUL_LOSE;case"%KACHI":return ne.ENTERING_OF_KING}}function ym(t,e){return Nd(e,t)}function Cc(t){const e=new jo,i=new At,n=new Bt;n.reset(Se.EMPTY);let s="",o=!1;const r=t.replace(/\r?\n\/(\r?\n[\s\S]*)?$/,"").split(/\r?\n/);for(const a of r)for(const l of fm(a)){if(l.sectionType===0&&o||l.sectionType===1&&!o)return new Error(": "+l.line);switch(l.type){case 0:break;case 1:o?i.current.comment=zo(i.current.comment,l.args[0]):s=zo(s,l.args[0]);break;case 2:break;case 3:e.setStandardMetadata(re.BLACK_NAME,l.args[0]);break;case 4:e.setStandardMetadata(re.WHITE_NAME,l.args[0]);break;case 5:{const c=pm[l.args[0]];c?e.setStandardMetadata(c,l.args[1]):e.setCustomMetadata(l.args[0],l.args[1]);break}case 6:gm(l.line,n);break;case 7:{const c=mm(l.line,n);if(c)return c;break}case 8:{const c=_m(l.line,n);if(c)return c;break}case 9:l.line[0]==="+"?n.setColor(R.BLACK):n.setColor(R.WHITE),i.clear(n),i.first.comment=s,o=!0;break;case 10:{const c=Nd(l.line,i.position);if(c instanceof Error)return c;i.append(c,{ignoreValidation:!0});break}case 11:{const c=bm(l.line);c&&i.append(c,{ignoreValidation:!0});break}case 12:i.current.setElapsedMs(Number(l.args[0])*1e3);break}}return o||(i.clear(n),i.first.comment=s),i.goto(0),i.resetAllBranchSelection(),i.metadata=e,i}function vm(t,e){let i="";const n=e.returnCode?e.returnCode:`
`,s=t.getStandardMetadata(re.BLACK_NAME)||t.getStandardMetadata(re.BLACK_SHORT_NAME);s&&(i+="N+"+s+n);const o=t.getStandardMetadata(re.WHITE_NAME)||t.getStandardMetadata(re.WHITE_SHORT_NAME);o&&(i+="N-"+o+n);const r=t.getStandardMetadata(re.TOURNAMENT)||t.getStandardMetadata(re.TITLE)||t.getStandardMetadata(re.OPUS_NAME)||t.getStandardMetadata(re.PUBLISHED_ON);r&&(i+="$EVENT:"+r+n);const a=t.getStandardMetadata(re.PLACE);a&&(i+="$SITE:"+a+n);const l=t.getStandardMetadata(re.START_DATETIME)||t.getStandardMetadata(re.DATE);l&&(i+="$START_TIME:"+l.slice(10)+n);const c=t.getStandardMetadata(re.DATE);c&&(i+="$END_TIME:"+c.slice(10)+n);const u=t.getStandardMetadata(re.STRATEGY);return u&&(i+="$OPENING:"+u+n),i}const Ko={king:"OU",rook:"HI",dragon:"RY",bishop:"KA",horse:"UM",gold:"KI",silver:"GI",promSilver:"NG",knight:"KE",promKnight:"NK",lance:"KY",promLance:"NY",pawn:"FU",promPawn:"TO"};function Mc(t){let e="";return t.forEach((i,n)=>{for(let s=0;s<n;s++)e+="00"+Ko[i]}),e}function Sm(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;for(let s=1;s<=9;s+=1){i+="P"+s;for(let o=9;o>=1;o-=1){const r=t.board.at(new L(o,s));r?r.color===R.BLACK?i+="+"+Ko[r.type]:i+="-"+Ko[r.type]:i+=" * "}i+=n}return i+="P+"+Mc(t.blackHand)+n,i+="P-"+Mc(t.whiteHand)+n,i+=(t.color===R.BLACK?"+":"-")+n,i}function Pc(t){return t instanceof L?`${t.file}${t.rank}`:"00"}function Ld(t){return(t.color===R.BLACK?"+":"-")+Pc(t.from)+Pc(t.to)+Ko[t.promote?I0(t.pieceType):t.pieceType]}function wm(t){switch(t){case ne.INTERRUPT:return"%CHUDAN";case ne.RESIGN:return"%TORYO";case ne.IMPASS:return"%JISHOGI";case ne.DRAW:return"%HIKIWAKE";case ne.REPETITION_DRAW:return"%SENNICHITE";case ne.MATE:return"%TSUMI";case ne.TIMEOUT:return"%TIME_UP";case ne.FOUL_LOSE:return"%ILLEGAL_MOVE";case ne.ENTERING_OF_KING:return"%KACHI"}}function Tc(t){return Ld(t)}function Fd(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;return i+="' CSA Generated by Electron Shogi"+n,i+="V2.2"+n,i+=vm(t.metadata,e),i+=Sm(t.initialPosition,e),t.moves.forEach(s=>{if(s.number===0)return;let o;s.move instanceof st?o=Ld(s.move):o=wm(s.move),o&&(i+=o+n,i+="T"+Math.floor(s.elapsedMs/1e3)+n),s.comment&&(s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment).split(`
`).forEach(a=>{i+="'*"+a+n})}),i}var On=(t=>(t[t.USI=0]="USI",t[t.SFEN=1]="SFEN",t[t.KIF=2]="KIF",t[t.CSA=3]="CSA",t))(On||{});function Em(t){if(t.startsWith("position sfen ")||t.startsWith("position startpos ")||t.startsWith("sfen ")||t.startsWith("startpos ")||t.startsWith("moves "))return 0;if(Bt.isValidSFEN(t))return 1;const e=/(^|\n)[#0-9]/g,i=/(^|,|\n)[-+$%'VNPT]/g,n=t.match(e),s=t.match(i),o=n?n.length:0,r=s?s.length:0;return o>=r?2:3}const Bc={};function us(t){if(Bc[t])return;const e=document.createElement("img");e.src=t,Bc[t]=e}class kt{constructor(e,i){this.width=e,this.height=i}add(e){return new kt(this.width+e.width,this.height+e.height)}reduce(e){return new kt(this.width-e.width,this.height-e.height)}}var fl=(t=>(t.HITOMOJI="hitomoji",t.HITOMOJI_DARK="hitomojiDark",t.HITOMOJI_GOTHIC="hitomojiGothic",t.HITOMOJI_GOTHIC_DARK="hitomojiGothicDark",t))(fl||{}),pl=(t=>(t.LIGHT="light",t.WARM="warm",t.RESIN="resin",t.RESIN2="resin2",t.RESIN3="resin3",t.DARK="dark",t.GREEN="green",t.CHERRY_BLOSSOM="cherry-blossom",t))(pl||{}),Ss=(t=>(t.NONE="none",t.STANDARD="standard",t))(Ss||{});const ie={frame:{width:1471,height:959},board:{x:296.5,y:0,width:878,height:960,squreWidth:94.8,squreHeight:104,leftSquarePadding:12,topSquarePadding:12.2,leftPiecePadding:17.5,topPiecePadding:18.5,highlight:{selected:{"background-color":"#0088ff",opacity:"0.8"},lastMoveTo:{"background-color":"#44cc44",opacity:"0.8"},lastMoveFrom:{"background-color":"#44cc44",opacity:"0.4"}}},label:{fontSize:24},piece:{width:88,height:93},hand:{black:{x:1184,y:600},white:{x:0,y:0},width:288,height:360,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"}}},turn:{black:{x:1184,y:425},white:{x:0,y:492},width:288,height:45,fontSize:32},playerName:{black:{x:1184,y:480},white:{x:0,y:370},width:288,height:45,fontSize:25},clock:{black:{x:1184,y:535},white:{x:0,y:425},width:288,height:55,fontSize:40},control:{left:{x:0,y:547,width:288,height:412,fontSize:26},right:{x:1184,y:0,width:288,height:412,fontSize:26}}},Dc={hitomoji:{black:{pawn:"./piece/hitomoji/black_pawn.png",lance:"./piece/hitomoji/black_lance.png",knight:"./piece/hitomoji/black_knight.png",silver:"./piece/hitomoji/black_silver.png",gold:"./piece/hitomoji/black_gold.png",bishop:"./piece/hitomoji/black_bishop.png",rook:"./piece/hitomoji/black_rook.png",king:"./piece/hitomoji/black_king.png",king2:"./piece/hitomoji/black_king2.png",promPawn:"./piece/hitomoji/black_prom_pawn.png",promLance:"./piece/hitomoji/black_prom_lance.png",promKnight:"./piece/hitomoji/black_prom_knight.png",promSilver:"./piece/hitomoji/black_prom_silver.png",horse:"./piece/hitomoji/black_horse.png",dragon:"./piece/hitomoji/black_dragon.png"},white:{pawn:"./piece/hitomoji/white_pawn.png",lance:"./piece/hitomoji/white_lance.png",knight:"./piece/hitomoji/white_knight.png",silver:"./piece/hitomoji/white_silver.png",gold:"./piece/hitomoji/white_gold.png",bishop:"./piece/hitomoji/white_bishop.png",rook:"./piece/hitomoji/white_rook.png",king:"./piece/hitomoji/white_king.png",king2:"./piece/hitomoji/white_king2.png",promPawn:"./piece/hitomoji/white_prom_pawn.png",promLance:"./piece/hitomoji/white_prom_lance.png",promKnight:"./piece/hitomoji/white_prom_knight.png",promSilver:"./piece/hitomoji/white_prom_silver.png",horse:"./piece/hitomoji/white_horse.png",dragon:"./piece/hitomoji/white_dragon.png"}},hitomojiDark:{black:{pawn:"./piece/hitomoji_dark/black_pawn.png",lance:"./piece/hitomoji_dark/black_lance.png",knight:"./piece/hitomoji_dark/black_knight.png",silver:"./piece/hitomoji_dark/black_silver.png",gold:"./piece/hitomoji_dark/black_gold.png",bishop:"./piece/hitomoji_dark/black_bishop.png",rook:"./piece/hitomoji_dark/black_rook.png",king:"./piece/hitomoji_dark/black_king.png",king2:"./piece/hitomoji_dark/black_king2.png",promPawn:"./piece/hitomoji_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_dark/black_prom_silver.png",horse:"./piece/hitomoji_dark/black_horse.png",dragon:"./piece/hitomoji_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_dark/white_pawn.png",lance:"./piece/hitomoji_dark/white_lance.png",knight:"./piece/hitomoji_dark/white_knight.png",silver:"./piece/hitomoji_dark/white_silver.png",gold:"./piece/hitomoji_dark/white_gold.png",bishop:"./piece/hitomoji_dark/white_bishop.png",rook:"./piece/hitomoji_dark/white_rook.png",king:"./piece/hitomoji_dark/white_king.png",king2:"./piece/hitomoji_dark/white_king2.png",promPawn:"./piece/hitomoji_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_dark/white_prom_silver.png",horse:"./piece/hitomoji_dark/white_horse.png",dragon:"./piece/hitomoji_dark/white_dragon.png"}},hitomojiGothic:{black:{pawn:"./piece/hitomoji_gothic/black_pawn.png",lance:"./piece/hitomoji_gothic/black_lance.png",knight:"./piece/hitomoji_gothic/black_knight.png",silver:"./piece/hitomoji_gothic/black_silver.png",gold:"./piece/hitomoji_gothic/black_gold.png",bishop:"./piece/hitomoji_gothic/black_bishop.png",rook:"./piece/hitomoji_gothic/black_rook.png",king:"./piece/hitomoji_gothic/black_king.png",king2:"./piece/hitomoji_gothic/black_king2.png",promPawn:"./piece/hitomoji_gothic/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic/black_prom_silver.png",horse:"./piece/hitomoji_gothic/black_horse.png",dragon:"./piece/hitomoji_gothic/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic/white_pawn.png",lance:"./piece/hitomoji_gothic/white_lance.png",knight:"./piece/hitomoji_gothic/white_knight.png",silver:"./piece/hitomoji_gothic/white_silver.png",gold:"./piece/hitomoji_gothic/white_gold.png",bishop:"./piece/hitomoji_gothic/white_bishop.png",rook:"./piece/hitomoji_gothic/white_rook.png",king:"./piece/hitomoji_gothic/white_king.png",king2:"./piece/hitomoji_gothic/white_king2.png",promPawn:"./piece/hitomoji_gothic/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic/white_prom_silver.png",horse:"./piece/hitomoji_gothic/white_horse.png",dragon:"./piece/hitomoji_gothic/white_dragon.png"}},hitomojiGothicDark:{black:{pawn:"./piece/hitomoji_gothic_dark/black_pawn.png",lance:"./piece/hitomoji_gothic_dark/black_lance.png",knight:"./piece/hitomoji_gothic_dark/black_knight.png",silver:"./piece/hitomoji_gothic_dark/black_silver.png",gold:"./piece/hitomoji_gothic_dark/black_gold.png",bishop:"./piece/hitomoji_gothic_dark/black_bishop.png",rook:"./piece/hitomoji_gothic_dark/black_rook.png",king:"./piece/hitomoji_gothic_dark/black_king.png",king2:"./piece/hitomoji_gothic_dark/black_king2.png",promPawn:"./piece/hitomoji_gothic_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/black_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/black_horse.png",dragon:"./piece/hitomoji_gothic_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic_dark/white_pawn.png",lance:"./piece/hitomoji_gothic_dark/white_lance.png",knight:"./piece/hitomoji_gothic_dark/white_knight.png",silver:"./piece/hitomoji_gothic_dark/white_silver.png",gold:"./piece/hitomoji_gothic_dark/white_gold.png",bishop:"./piece/hitomoji_gothic_dark/white_bishop.png",rook:"./piece/hitomoji_gothic_dark/white_rook.png",king:"./piece/hitomoji_gothic_dark/white_king.png",king2:"./piece/hitomoji_gothic_dark/white_king2.png",promPawn:"./piece/hitomoji_gothic_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/white_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/white_horse.png",dragon:"./piece/hitomoji_gothic_dark/white_dragon.png"}}},Am={light:"./board/grid.svg",warm:"./board/grid.svg",resin:"./board/grid.svg",resin2:"./board/grid.svg",resin3:"./board/grid.svg",dark:"./board/grid_white.svg",green:"./board/grid.svg",["cherry-blossom"]:"./board/grid.svg"},xm={light:"./board/wood_light.png",warm:"./board/wood_warm.png",resin:null,resin2:null,resin3:null,dark:null,green:null,["cherry-blossom"]:null},km={light:"rgba(0, 0, 0, 0)",warm:"rgba(0, 0, 0, 0)",resin:"#d69b00",resin2:"#efbf63",resin3:"#ad7624",dark:"#333333",green:"#598459",["cherry-blossom"]:"#ecb6b6"},Im={light:"#8b4513",warm:"#8b4513",resin:"#8b4513",resin2:"#8b4513",resin3:"#8b4513",dark:"#333333",green:"#527a52",["cherry-blossom"]:"#e8a9a9"},Cm={black:{pawn:{row:3,column:0,width:2},lance:{row:2,column:0,width:1},knight:{row:2,column:1,width:1},silver:{row:1,column:0,width:1},gold:{row:1,column:1,width:1},bishop:{row:0,column:0,width:1},rook:{row:0,column:1,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}},white:{pawn:{row:0,column:0,width:2},lance:{row:1,column:1,width:1},knight:{row:1,column:0,width:1},silver:{row:2,column:1,width:1},gold:{row:2,column:0,width:1},bishop:{row:3,column:1,width:1},rook:{row:3,column:0,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}}},Mm={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};class Pm{constructor(e,i,n){P(this,"pieceImages");P(this,"boardGridImage");P(this,"boardTextureImage");this.boardImageType=i,this.boardLabelType=n,this.pieceImages=Dc[e]||Dc.hitomoji,this.boardGridImage=Am[i],this.boardTextureImage=xm[i]}preload(){us(this.boardGridImage),this.boardTextureImage&&us(this.boardTextureImage),Object.values(this.pieceImages.black).forEach(us),Object.values(this.pieceImages.white).forEach(us)}build(e,i,n,s,o,r){let a=e.width/ie.frame.width;ie.frame.height*a>e.height&&(a=e.height/ie.frame.height);const l=()=>{const q=ie.frame.height*a,ee=ie.frame.width*a;return{style:{height:q+"px",width:ee+"px"},size:new kt(ee,q)}},c=()=>{const q=ie.board.x*a,ee=ie.board.y*a,oe=ie.board.width*a,Te=ie.board.height*a,_e={"background-color":km[this.boardImageType],left:q+"px",top:ee+"px",height:Te+"px",width:oe+"px"};return{gridImagePath:this.boardGridImage,textureImagePath:this.boardTextureImage,x:q,y:ee,style:_e}},u=q=>{const ee=[];if(this.boardLabelType=="none")return ee;const oe=ie.label.fontSize*a,Te=oe*.1,ve={color:"black","font-size":oe+"px","font-weight":"bold","text-shadow":`${Te}px ${Te}px  ${Te}px white`};for(let _e=1;_e<=9;_e++){const at=q.x-oe*.5+(r?0:ie.board.width)*a+ie.board.leftPiecePadding*.5*a*(r?1:-1),ct=q.y-oe*.5+(ie.board.topSquarePadding+((r?10-_e:_e)-.5)*ie.board.squreHeight)*a;ee.push({id:"rank"+_e,character:Mm[_e],style:{left:at+"px",top:ct+"px",...ve}})}for(let _e=1;_e<=9;_e++){const at=q.x-oe*.5+(ie.board.leftPiecePadding+(9.5-(r?10-_e:_e))*ie.board.squreWidth)*a,ct=q.y-oe*.5+(r?ie.board.height:0)*a+ie.board.topSquarePadding*.5*a*(r?-1:1);ee.push({id:"file"+_e,character:String(_e),style:{left:at+"px",top:ct+"px",...ve}})}return ee},h=q=>{const ee=[];return i.board.listNonEmptySquares().forEach(oe=>{const Te=i.board.at(oe),ve=Te.id+oe.index,_e=r?Mt(Te.color):Te.color,at=Te.type==N.KING&&Te.color==R.BLACK?"king2":Te.type,ct=this.pieceImages[_e][at],yt=q.x+(ie.board.leftPiecePadding+ie.board.squreWidth*(r?oe.opposite:oe).x)*a,Ke=q.y+(ie.board.topPiecePadding+ie.board.squreHeight*(r?oe.opposite:oe).y)*a,Et=ie.piece.width*a,Ve=ie.piece.height*a;ee.push({id:ve,imagePath:ct,style:{left:yt+"px",top:Ke+"px",width:Et+"px",height:Ve+"px"}})}),ee},f=q=>{const ee=[];return L.all.forEach(oe=>{const Te=oe.index,{file:ve}=oe,{rank:_e}=oe,at=q.x+(ie.board.leftSquarePadding+ie.board.squreWidth*(r?oe.opposite:oe).x)*a,ct=q.y+(ie.board.topSquarePadding+ie.board.squreHeight*(r?oe.opposite:oe).y)*a,yt=ie.board.squreWidth*a,Ke=ie.board.squreHeight*a,Et={left:at+"px",top:ct+"px",width:yt+"px",height:Ke+"px"};let Ve=Et;n&&oe.equals(n.to)&&(Ve={...Ve,...ie.board.highlight.lastMoveTo}),n&&n.from instanceof L&&oe.equals(n.from)&&(Ve={...Ve,...ie.board.highlight.lastMoveFrom}),s instanceof L&&s.equals(oe)&&(Ve={...Ve,...ie.board.highlight.selected}),ee.push({id:Te,file:ve,rank:_e,style:Et,backgroundStyle:Ve})}),ee},p=(q,ee)=>{const oe=r?Mt(q):q,Te=Im[this.boardImageType],ve=ie.hand[oe].x*a,_e=ie.hand[oe].y*a,at=ie.hand.width*a,ct=ie.hand.height*a,yt={"background-color":Te,left:ve+"px",top:_e+"px",width:at+"px",height:ct+"px"},Ke=[],Et=[];return x0.forEach(Ve=>{const vt=ee.count(Ve),ii=Cm[oe][Ve],gi=ie.hand.width/2*ii.width*a,k=ie.hand.height/4*a,M=gi*ii.column,O=k*ii.row,U=ie.piece.width*a,W=ie.piece.height*a,Y=Math.max(gi-U*vt,0)/(vt*2),te=(gi-U-Y*2)/Math.max(vt-1,1);for(let le=vt-1;le>=0;le-=1){const ue=Ve+le,me=this.pieceImages[oe][Ve],be=M+Y+te*le,Ce=O;Ke.push({id:ue,imagePath:me,style:{left:be+"px",top:Ce+"px",width:U+"px",height:W+"px"}})}const X=Ve,J={left:M+"px",top:O+"px",width:gi+"px",height:k+"px"};let j=J;s&&s instanceof ce&&s.color===q&&s.type===Ve&&(j={...j,...ie.hand.highlight.selected}),Et.push({id:X,type:Ve,style:J,backgroundStyle:j})}),{style:yt,pieces:Ke,pointers:Et}},b=(q,ee)=>{if(!ee)return null;const oe=r?Mt(ee.color):ee.color,Te=r?ee.to.opposite:ee.to,ve=new ce(oe,ee.pieceType),_e=ve.promoted(),at=ve.unpromoted(),ct=this.pieceImages[oe][_e.type],yt=this.pieceImages[oe][at.type],Ke=q.x+(ie.board.leftSquarePadding+ie.board.squreWidth*(Te.x===0?0:Te.x===8?7:Te.x-.5))*a,Et=q.y+(ie.board.topSquarePadding+ie.board.squreHeight*Te.y)*a,Ve=ie.board.squreWidth*2*a,vt=ie.board.squreHeight*a,ii={left:Ke+"px",top:Et+"px",width:Ve+"px",height:vt+"px","font-size":vt/4+"px"};return{promoteImagePath:ct,notPromoteImagePath:yt,style:ii}},_=()=>{const q=i.color,ee=r?Mt(q):q,oe=2;return{style:{left:ie.turn[ee].x*a-oe+"px",top:ie.turn[ee].y*a-oe+"px",width:ie.turn.width*a-oe+"px",height:ie.turn.height*a-oe+"px","font-size":ie.turn.fontSize*a+"px","border-radius":ie.turn.height*a*.4+"px","border-width":oe+"px","border-style":"solid"}}},v=q=>{const ee=r?Mt(q):q;return{style:{left:ie.playerName[ee].x*a+"px",top:ie.playerName[ee].y*a+"px",width:ie.playerName.width*a+"px",height:ie.playerName.height*a+"px","font-size":ie.playerName.fontSize*a+"px"}}},y=q=>{const ee=r?Mt(q):q;return{style:{left:ie.clock[ee].x*a+"px",top:ie.clock[ee].y*a+"px",width:ie.clock.width*a+"px",height:ie.clock.height*a+"px","font-size":ie.clock.fontSize*a+"px"}}},w=()=>({left:{style:{left:ie.control.left.x*a+"px",top:ie.control.left.y*a+"px",width:ie.control.left.width*a+"px",height:ie.control.left.height*a+"px","font-size":ie.control.left.fontSize*a+"px"}},right:{style:{left:ie.control.right.x*a+"px",top:ie.control.right.y*a+"px",width:ie.control.right.width*a+"px",height:ie.control.right.height*a+"px","font-size":ie.control.right.fontSize*a+"px"}}}),E=l(),x=c(),I=u(x),T=h(x),H=f(x),V=p(R.BLACK,i.hand(R.BLACK)),Q=p(R.WHITE,i.hand(R.WHITE)),ae=b(x,o),Z=_(),ge=v(R.BLACK),Re=v(R.WHITE),Ye=y(R.BLACK),se=y(R.WHITE),he=w();return{frame:E,board:x,labels:I,piece:T,square:H,blackHand:V,whiteHand:Q,promotion:ae,turn:Z,blackPlayerName:ge,whitePlayerName:Re,blackClock:Ye,whiteClock:se,control:he}}}const Tm=He({name:"BoardView",props:{pieceImageType:{type:String,required:!0},boardImageType:{type:String,required:!0},boardLabelType:{type:String,required:!0},maxSize:{type:kt,required:!0},position:{type:Object,required:!0},lastMove:{type:Object,required:!1,default:null},flip:{type:Boolean,required:!1},allowEdit:{type:Boolean,required:!1},allowMove:{type:Boolean,required:!1},blackPlayerName:{type:String,required:!1,default:""},whitePlayerName:{type:String,required:!1,default:""},blackPlayerTime:{type:Number,required:!1,default:void 0},blackPlayerByoyomi:{type:Number,required:!1,default:void 0},whitePlayerTime:{type:Number,required:!1,default:void 0},whitePlayerByoyomi:{type:Number,required:!1,default:void 0}},emits:["resize","move","edit"],setup(t,e){const i=en({pointer:null,reservedMove:null}),n=()=>{i.pointer=null,i.reservedMove=null};Ji([()=>t.position,()=>t.allowEdit,()=>t.allowMove],()=>{n()});const s=()=>{n()},o=(E,x,I)=>{const T=i.pointer;if(n(),!(E instanceof L&&T instanceof L&&E.equals(T))&&!(E instanceof ce&&T instanceof ce&&E.equals(T))){if(T){const H=T,V=E instanceof L?E:E.color;if(t.allowEdit&&t.position.isValidEditing(H,V)){e.emit("edit",{move:{from:T,to:V}});return}if(t.allowMove&&E instanceof L){const Q=T instanceof L?T:T.type,ae=E,Z=t.position.createMove(Q,ae);if(!Z)return;const ge=t.position.isValidMove(Z),Re=t.position.isValidMove(Z.withPromote());if(ge&&Re){i.reservedMove=Z;return}if(ge){e.emit("move",Z);return}if(Re){e.emit("move",Z.withPromote());return}}}!t.allowMove&&!t.allowEdit||x||!t.allowEdit&&I!==t.position.color||(i.pointer=E)}},r=(E,x,I)=>{E.stopPropagation(),E.preventDefault();const T=new L(x,I),H=t.position.board.at(T);o(T,!H,H==null?void 0:H.color)},a=(E,x,I)=>{E.stopPropagation(),E.preventDefault();const T=t.position.hand(x).count(I)===0;o(new ce(x,I),T,x)},l=(E,x,I)=>{E.stopPropagation(),E.preventDefault(),n();const T=new L(x,I);t.allowEdit&&t.position.board.at(T)&&e.emit("edit",{rotate:T})},c=E=>{E.stopPropagation(),E.preventDefault();const x=i.reservedMove;n(),x&&t.position.isValidMove(x.withPromote())&&e.emit("move",x.withPromote())},u=E=>{E.stopPropagation(),E.preventDefault();const x=i.reservedMove;n(),x&&t.position.isValidMove(x)&&e.emit("move",x)},h=de(()=>{const E=new Pm(t.pieceImageType,t.boardImageType,t.boardLabelType);return E.preload(),E}),f=de(()=>{const E=new kt(20,20),x=h.value.build(t.maxSize.reduce(E),t.position,t.lastMove,i.pointer,i.reservedMove,t.flip);return e.emit("resize",x.frame.size.add(E)),x}),p=(E,x)=>E?Cd(E):x!==void 0?""+x:"0:00:00",b=(E,x)=>{if(!E&&!x)return"normal";const I=(E||0)+(x||0);return I<=5?"danger":I<=10?"warning":"normal"},_=de(()=>p(t.blackPlayerTime,t.blackPlayerByoyomi)),v=de(()=>b(t.blackPlayerTime,t.blackPlayerByoyomi)),y=de(()=>p(t.whitePlayerTime,t.whitePlayerByoyomi)),w=de(()=>b(t.whitePlayerTime,t.whitePlayerByoyomi));return{clickFrame:s,clickSquare:r,clickHand:a,clickSquareR:l,clickPromote:c,clickNotPromote:u,layout:f,blackPlayerTimeText:_,blackPlayerTimeSeverity:v,whitePlayerTimeText:y,whitePlayerTimeSeverity:w,Color:R}}});const Ue=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},Bm=["src"],Dm=["src"],Rm={class:"player-name-text"},Om={class:"clock-text"},Nm={class:"player-name-text"},Lm={class:"clock-text"},Fm=["src"],$m=["onClick","onContextmenu"],Hm=["src"],Um=["onClick"],Wm=["src"],Gm=["onClick"],Vm=["src"],jm=["src"];function zm(t,e,i,n,s,o){return D(),$("div",null,[m("div",{class:"frame",style:We(t.layout.frame.style),onClick:e[2]||(e[2]=r=>t.clickFrame())},[t.layout.board.textureImagePath?(D(),$("div",{key:0,class:"board-texture",style:We(t.layout.board.style)},[m("img",{class:"board-image",src:t.layout.board.textureImagePath},null,8,Bm)],4)):pe("",!0),m("div",{class:"board-grid",style:We(t.layout.board.style)},[m("img",{class:"board-image",src:t.layout.board.gridImagePath},null,8,Dm)],4),m("div",{class:Ze(["player-name",{active:t.position.color=="black"}]),style:We(t.layout.blackPlayerName.style)},[m("span",Rm,""+ye(t.blackPlayerName),1)],6),m("div",{class:Ze(["clock",t.blackPlayerTimeSeverity]),style:We(t.layout.blackClock.style)},[m("span",Om,ye(t.blackPlayerTimeText),1)],6),m("div",{class:Ze(["player-name",{active:t.position.color=="white"}]),style:We(t.layout.whitePlayerName.style)},[m("span",Nm,""+ye(t.whitePlayerName),1)],6),m("div",{class:Ze(["clock",t.whitePlayerTimeSeverity]),style:We(t.layout.whiteClock.style)},[m("span",Lm,ye(t.whitePlayerTimeText),1)],6),(D(!0),$(Pe,null,Qe(t.layout.square,r=>(D(),$("div",{key:r.id,class:"square",style:We(r.backgroundStyle)},null,4))),128)),(D(!0),$(Pe,null,Qe(t.layout.piece,r=>(D(),$("div",{key:r.id,class:"piece",style:We(r.style)},[m("img",{class:"piece-image",src:r.imagePath},null,8,Fm)],4))),128)),(D(!0),$(Pe,null,Qe(t.layout.labels,r=>(D(),$("div",{key:r.id,class:"label",style:We(r.style)},ye(r.character),5))),128)),(D(!0),$(Pe,null,Qe(t.layout.square,r=>(D(),$("div",{key:r.id,class:"square",style:We(r.style),onClick:a=>t.clickSquare(a,r.file,r.rank),onContextmenu:a=>t.clickSquareR(a,r.file,r.rank)},null,44,$m))),128)),m("div",{class:"hand",style:We(t.layout.blackHand.style)},[(D(!0),$(Pe,null,Qe(t.layout.blackHand.pointers,r=>(D(),$("div",{key:r.id,class:"hand-pointer",style:We(r.backgroundStyle)},null,4))),128)),(D(!0),$(Pe,null,Qe(t.layout.blackHand.pieces,r=>(D(),$("div",{key:r.id,class:"piece",style:We(r.style)},[m("img",{class:"piece-image",src:r.imagePath},null,8,Hm)],4))),128)),(D(!0),$(Pe,null,Qe(t.layout.blackHand.pointers,r=>(D(),$("div",{key:r.id,class:"hand-pointer",style:We(r.style),onClick:a=>t.clickHand(a,t.Color.BLACK,r.type)},null,12,Um))),128))],4),m("div",{class:"hand",style:We(t.layout.whiteHand.style)},[(D(!0),$(Pe,null,Qe(t.layout.whiteHand.pointers,r=>(D(),$("div",{key:r.id,class:"hand-pointer",style:We(r.backgroundStyle)},null,4))),128)),(D(!0),$(Pe,null,Qe(t.layout.whiteHand.pieces,r=>(D(),$("div",{key:r.id,class:"piece",style:We(r.style)},[m("img",{class:"piece-image",src:r.imagePath},null,8,Wm)],4))),128)),(D(!0),$(Pe,null,Qe(t.layout.whiteHand.pointers,r=>(D(),$("div",{key:r.id,class:"hand-pointer",style:We(r.style),onClick:a=>t.clickHand(a,t.Color.WHITE,r.type)},null,12,Gm))),128))],4),t.layout.promotion?(D(),$("div",{key:1,class:"promotion-selector",style:We(t.layout.promotion.style)},[m("div",{class:"select-button promote",onClick:e[0]||(e[0]=r=>t.clickPromote(r))},[m("img",{class:"piece-image",src:t.layout.promotion.promoteImagePath},null,8,Vm)]),m("div",{class:"select-button not-promote",onClick:e[1]||(e[1]=r=>t.clickNotPromote(r))},[m("img",{class:"piece-image",src:t.layout.promotion.notPromoteImagePath},null,8,jm)])],4)):pe("",!0),m("div",{class:"turn",style:We(t.layout.turn.style)},"",4),m("div",{style:We(t.layout.control.left.style)},[Ql(t.$slots,"left-control",{},void 0,!0)],4),m("div",{style:We(t.layout.control.right.style)},[Ql(t.$slots,"right-control",{},void 0,!0)],4)],4)])}const $d=Ue(Tm,[["render",zm],["__scopeId","data-v-f4751c65"]]),Ft="es://human",Hd="es://usi-engine/";function Gi(t){return t.startsWith(Hd)}function Km(){const t=Date.now(),e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16);return Hd+`${t}/${e}`}const Ud="USI_Ponder",qm="USI_MultiPV",Ym="Threads",Xm="NumberOfThreads",Jm="MultiPV";function Sn(t){if(t){if(t.value!==void 0)return t.value;if(t.default!==void 0)return t.type==="string"&&t.default==="<empty>"?"":t.default}}function Zm(t){const e=JSON.parse(JSON.stringify(t));return e.uri=Km(),e.name+=" ",e}function Qm(t,e){t.uri=e.uri,t.name=e.name,Object.keys(e.options).forEach(i=>{t.options[i]&&(t.options[i].value=e.options[i].value)})}class Ht{constructor(e){P(this,"engines",{});if(e){const i=JSON.parse(e);i.engines instanceof Object&&(this.engines=i.engines)}}hasEngine(e){return!!this.engines[e]}addEngine(e){this.engines[e.uri]=e}updateEngine(e){return this.engines[e.uri]?(this.engines[e.uri]=e,!0):!1}removeEngine(e){return this.engines[e]?(delete this.engines[e],!0):!1}getEngine(e){return this.engines[e]}get engineList(){return Object.values(this.engines).sort((e,i)=>e.name!==i.name?e.name>i.name?1:-1:e.defaultName!==i.defaultName?e.defaultName>i.defaultName?1:-1:e.uri>i.uri?1:-1)}get json(){return JSON.stringify(this)}get jsonWithIndent(){return JSON.stringify(this,void 0,2)}}function Wd(t){return(t||new Date).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})}function Rc(t){return(t||new Date).toLocaleTimeString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function e1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(e,s);return new o}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}var qo={},t1={get exports(){return qo},set exports(t){qo=t}},gl={},Ar={};Ar.byteLength=s1;Ar.toByteArray=r1;Ar.fromByteArray=c1;var wi=[],si=[],i1=typeof Uint8Array<"u"?Uint8Array:Array,Fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Pn=0,n1=Fr.length;Pn<n1;++Pn)wi[Pn]=Fr[Pn],si[Fr.charCodeAt(Pn)]=Pn;si["-".charCodeAt(0)]=62;si["_".charCodeAt(0)]=63;function Gd(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");i===-1&&(i=e);var n=i===e?0:4-i%4;return[i,n]}function s1(t){var e=Gd(t),i=e[0],n=e[1];return(i+n)*3/4-n}function o1(t,e,i){return(e+i)*3/4-i}function r1(t){var e,i=Gd(t),n=i[0],s=i[1],o=new i1(o1(t,n,s)),r=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)e=si[t.charCodeAt(l)]<<18|si[t.charCodeAt(l+1)]<<12|si[t.charCodeAt(l+2)]<<6|si[t.charCodeAt(l+3)],o[r++]=e>>16&255,o[r++]=e>>8&255,o[r++]=e&255;return s===2&&(e=si[t.charCodeAt(l)]<<2|si[t.charCodeAt(l+1)]>>4,o[r++]=e&255),s===1&&(e=si[t.charCodeAt(l)]<<10|si[t.charCodeAt(l+1)]<<4|si[t.charCodeAt(l+2)]>>2,o[r++]=e>>8&255,o[r++]=e&255),o}function a1(t){return wi[t>>18&63]+wi[t>>12&63]+wi[t>>6&63]+wi[t&63]}function l1(t,e,i){for(var n,s=[],o=e;o<i;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),s.push(a1(n));return s.join("")}function c1(t){for(var e,i=t.length,n=i%3,s=[],o=16383,r=0,a=i-n;r<a;r+=o)s.push(l1(t,r,r+o>a?a:r+o));return n===1?(e=t[i-1],s.push(wi[e>>2]+wi[e<<4&63]+"==")):n===2&&(e=(t[i-2]<<8)+t[i-1],s.push(wi[e>>10]+wi[e>>4&63]+wi[e<<2&63]+"=")),s.join("")}var ml={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ml.read=function(t,e,i,n,s){var o,r,a=s*8-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?s-1:0,f=i?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=o*256+t[e+h],h+=f,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=n;u>0;r=r*256+t[e+h],h+=f,u-=8);if(o===0)o=1-c;else{if(o===l)return r?NaN:(p?-1:1)*(1/0);r=r+Math.pow(2,n),o=o-c}return(p?-1:1)*r*Math.pow(2,o-n)};ml.write=function(t,e,i,n,s,o){var r,a,l,c=o*8-s-1,u=(1<<c)-1,h=u>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,b=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,r=u):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),r+h>=1?e+=f/l:e+=f*Math.pow(2,1-h),e*l>=2&&(r++,l/=2),r+h>=u?(a=0,r=u):r+h>=1?(a=(e*l-1)*Math.pow(2,s),r=r+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),r=0));s>=8;t[i+p]=a&255,p+=b,a/=256,s-=8);for(r=r<<s|a,c+=s;c>0;t[i+p]=r&255,p+=b,r/=256,c-=8);t[i+p-b]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Ar,i=ml,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const S=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(S,d),S.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function r(S){if(S>s)throw new RangeError('The value "'+S+'" is invalid for option "size"');const d=new Uint8Array(S);return Object.setPrototypeOf(d,a.prototype),d}function a(S,d,g){if(typeof S=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(S)}return l(S,d,g)}a.poolSize=8192;function l(S,d,g){if(typeof S=="string")return f(S,d);if(ArrayBuffer.isView(S))return b(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(le(S,ArrayBuffer)||S&&le(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(le(S,SharedArrayBuffer)||S&&le(S.buffer,SharedArrayBuffer)))return _(S,d,g);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=S.valueOf&&S.valueOf();if(A!=null&&A!==S)return a.from(A,d,g);const C=v(S);if(C)return C;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return a.from(S[Symbol.toPrimitive]("string"),d,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}a.from=function(S,d,g){return l(S,d,g)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function u(S,d,g){return c(S),S<=0?r(S):d!==void 0?typeof g=="string"?r(S).fill(d,g):r(S).fill(d):r(S)}a.alloc=function(S,d,g){return u(S,d,g)};function h(S){return c(S),r(S<0?0:y(S)|0)}a.allocUnsafe=function(S){return h(S)},a.allocUnsafeSlow=function(S){return h(S)};function f(S,d){if((typeof d!="string"||d==="")&&(d="utf8"),!a.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const g=E(S,d)|0;let A=r(g);const C=A.write(S,d);return C!==g&&(A=A.slice(0,C)),A}function p(S){const d=S.length<0?0:y(S.length)|0,g=r(d);for(let A=0;A<d;A+=1)g[A]=S[A]&255;return g}function b(S){if(le(S,Uint8Array)){const d=new Uint8Array(S);return _(d.buffer,d.byteOffset,d.byteLength)}return p(S)}function _(S,d,g){if(d<0||S.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<d+(g||0))throw new RangeError('"length" is outside of buffer bounds');let A;return d===void 0&&g===void 0?A=new Uint8Array(S):g===void 0?A=new Uint8Array(S,d):A=new Uint8Array(S,d,g),Object.setPrototypeOf(A,a.prototype),A}function v(S){if(a.isBuffer(S)){const d=y(S.length)|0,g=r(d);return g.length===0||S.copy(g,0,0,d),g}if(S.length!==void 0)return typeof S.length!="number"||ue(S.length)?r(0):p(S);if(S.type==="Buffer"&&Array.isArray(S.data))return p(S.data)}function y(S){if(S>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return S|0}function w(S){return+S!=S&&(S=0),a.alloc(+S)}a.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==a.prototype},a.compare=function(d,g){if(le(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),le(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(d)||!a.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===g)return 0;let A=d.length,C=g.length;for(let B=0,F=Math.min(A,C);B<F;++B)if(d[B]!==g[B]){A=d[B],C=g[B];break}return A<C?-1:C<A?1:0},a.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(d,g){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return a.alloc(0);let A;if(g===void 0)for(g=0,A=0;A<d.length;++A)g+=d[A].length;const C=a.allocUnsafe(g);let B=0;for(A=0;A<d.length;++A){let F=d[A];if(le(F,Uint8Array))B+F.length>C.length?(a.isBuffer(F)||(F=a.from(F)),F.copy(C,B)):Uint8Array.prototype.set.call(C,F,B);else if(a.isBuffer(F))F.copy(C,B);else throw new TypeError('"list" argument must be an Array of Buffers');B+=F.length}return C};function E(S,d){if(a.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||le(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const g=S.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&g===0)return 0;let C=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return Y(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return J(S).length;default:if(C)return A?-1:Y(S).length;d=(""+d).toLowerCase(),C=!0}}a.byteLength=E;function x(S,d,g){let A=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,d>>>=0,g<=d))return"";for(S||(S="utf8");;)switch(S){case"hex":return oe(this,d,g);case"utf8":case"utf-8":return Ye(this,d,g);case"ascii":return q(this,d,g);case"latin1":case"binary":return ee(this,d,g);case"base64":return Re(this,d,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,d,g);default:if(A)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),A=!0}}a.prototype._isBuffer=!0;function I(S,d,g){const A=S[d];S[d]=S[g],S[g]=A}a.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<d;g+=2)I(this,g,g+1);return this},a.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<d;g+=4)I(this,g,g+3),I(this,g+1,g+2);return this},a.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<d;g+=8)I(this,g,g+7),I(this,g+1,g+6),I(this,g+2,g+5),I(this,g+3,g+4);return this},a.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?Ye(this,0,d):x.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(d){if(!a.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:a.compare(this,d)===0},a.prototype.inspect=function(){let d="";const g=t.INSPECT_MAX_BYTES;return d=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(d+=" ... "),"<Buffer "+d+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(d,g,A,C,B){if(le(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(g===void 0&&(g=0),A===void 0&&(A=d?d.length:0),C===void 0&&(C=0),B===void 0&&(B=this.length),g<0||A>d.length||C<0||B>this.length)throw new RangeError("out of range index");if(C>=B&&g>=A)return 0;if(C>=B)return-1;if(g>=A)return 1;if(g>>>=0,A>>>=0,C>>>=0,B>>>=0,this===d)return 0;let F=B-C,ke=A-g;const Be=Math.min(F,ke),Oe=this.slice(C,B),Je=d.slice(g,A);for(let qe=0;qe<Be;++qe)if(Oe[qe]!==Je[qe]){F=Oe[qe],ke=Je[qe];break}return F<ke?-1:ke<F?1:0};function T(S,d,g,A,C){if(S.length===0)return-1;if(typeof g=="string"?(A=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,ue(g)&&(g=C?0:S.length-1),g<0&&(g=S.length+g),g>=S.length){if(C)return-1;g=S.length-1}else if(g<0)if(C)g=0;else return-1;if(typeof d=="string"&&(d=a.from(d,A)),a.isBuffer(d))return d.length===0?-1:H(S,d,g,A,C);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(S,d,g):Uint8Array.prototype.lastIndexOf.call(S,d,g):H(S,[d],g,A,C);throw new TypeError("val must be string, number or Buffer")}function H(S,d,g,A,C){let B=1,F=S.length,ke=d.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(S.length<2||d.length<2)return-1;B=2,F/=2,ke/=2,g/=2}function Be(Je,qe){return B===1?Je[qe]:Je.readUInt16BE(qe*B)}let Oe;if(C){let Je=-1;for(Oe=g;Oe<F;Oe++)if(Be(S,Oe)===Be(d,Je===-1?0:Oe-Je)){if(Je===-1&&(Je=Oe),Oe-Je+1===ke)return Je*B}else Je!==-1&&(Oe-=Oe-Je),Je=-1}else for(g+ke>F&&(g=F-ke),Oe=g;Oe>=0;Oe--){let Je=!0;for(let qe=0;qe<ke;qe++)if(Be(S,Oe+qe)!==Be(d,qe)){Je=!1;break}if(Je)return Oe}return-1}a.prototype.includes=function(d,g,A){return this.indexOf(d,g,A)!==-1},a.prototype.indexOf=function(d,g,A){return T(this,d,g,A,!0)},a.prototype.lastIndexOf=function(d,g,A){return T(this,d,g,A,!1)};function V(S,d,g,A){g=Number(g)||0;const C=S.length-g;A?(A=Number(A),A>C&&(A=C)):A=C;const B=d.length;A>B/2&&(A=B/2);let F;for(F=0;F<A;++F){const ke=parseInt(d.substr(F*2,2),16);if(ue(ke))return F;S[g+F]=ke}return F}function Q(S,d,g,A){return j(Y(d,S.length-g),S,g,A)}function ae(S,d,g,A){return j(te(d),S,g,A)}function Z(S,d,g,A){return j(J(d),S,g,A)}function ge(S,d,g,A){return j(X(d,S.length-g),S,g,A)}a.prototype.write=function(d,g,A,C){if(g===void 0)C="utf8",A=this.length,g=0;else if(A===void 0&&typeof g=="string")C=g,A=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(A)?(A=A>>>0,C===void 0&&(C="utf8")):(C=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const B=this.length-g;if((A===void 0||A>B)&&(A=B),d.length>0&&(A<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let F=!1;for(;;)switch(C){case"hex":return V(this,d,g,A);case"utf8":case"utf-8":return Q(this,d,g,A);case"ascii":case"latin1":case"binary":return ae(this,d,g,A);case"base64":return Z(this,d,g,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,d,g,A);default:if(F)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),F=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Re(S,d,g){return d===0&&g===S.length?e.fromByteArray(S):e.fromByteArray(S.slice(d,g))}function Ye(S,d,g){g=Math.min(S.length,g);const A=[];let C=d;for(;C<g;){const B=S[C];let F=null,ke=B>239?4:B>223?3:B>191?2:1;if(C+ke<=g){let Be,Oe,Je,qe;switch(ke){case 1:B<128&&(F=B);break;case 2:Be=S[C+1],(Be&192)===128&&(qe=(B&31)<<6|Be&63,qe>127&&(F=qe));break;case 3:Be=S[C+1],Oe=S[C+2],(Be&192)===128&&(Oe&192)===128&&(qe=(B&15)<<12|(Be&63)<<6|Oe&63,qe>2047&&(qe<55296||qe>57343)&&(F=qe));break;case 4:Be=S[C+1],Oe=S[C+2],Je=S[C+3],(Be&192)===128&&(Oe&192)===128&&(Je&192)===128&&(qe=(B&15)<<18|(Be&63)<<12|(Oe&63)<<6|Je&63,qe>65535&&qe<1114112&&(F=qe))}}F===null?(F=65533,ke=1):F>65535&&(F-=65536,A.push(F>>>10&1023|55296),F=56320|F&1023),A.push(F),C+=ke}return he(A)}const se=4096;function he(S){const d=S.length;if(d<=se)return String.fromCharCode.apply(String,S);let g="",A=0;for(;A<d;)g+=String.fromCharCode.apply(String,S.slice(A,A+=se));return g}function q(S,d,g){let A="";g=Math.min(S.length,g);for(let C=d;C<g;++C)A+=String.fromCharCode(S[C]&127);return A}function ee(S,d,g){let A="";g=Math.min(S.length,g);for(let C=d;C<g;++C)A+=String.fromCharCode(S[C]);return A}function oe(S,d,g){const A=S.length;(!d||d<0)&&(d=0),(!g||g<0||g>A)&&(g=A);let C="";for(let B=d;B<g;++B)C+=me[S[B]];return C}function Te(S,d,g){const A=S.slice(d,g);let C="";for(let B=0;B<A.length-1;B+=2)C+=String.fromCharCode(A[B]+A[B+1]*256);return C}a.prototype.slice=function(d,g){const A=this.length;d=~~d,g=g===void 0?A:~~g,d<0?(d+=A,d<0&&(d=0)):d>A&&(d=A),g<0?(g+=A,g<0&&(g=0)):g>A&&(g=A),g<d&&(g=d);const C=this.subarray(d,g);return Object.setPrototypeOf(C,a.prototype),C};function ve(S,d,g){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+d>g)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(d,g,A){d=d>>>0,g=g>>>0,A||ve(d,g,this.length);let C=this[d],B=1,F=0;for(;++F<g&&(B*=256);)C+=this[d+F]*B;return C},a.prototype.readUintBE=a.prototype.readUIntBE=function(d,g,A){d=d>>>0,g=g>>>0,A||ve(d,g,this.length);let C=this[d+--g],B=1;for(;g>0&&(B*=256);)C+=this[d+--g]*B;return C},a.prototype.readUint8=a.prototype.readUInt8=function(d,g){return d=d>>>0,g||ve(d,1,this.length),this[d]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(d,g){return d=d>>>0,g||ve(d,2,this.length),this[d]|this[d+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(d,g){return d=d>>>0,g||ve(d,2,this.length),this[d]<<8|this[d+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(d,g){return d=d>>>0,g||ve(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(d,g){return d=d>>>0,g||ve(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},a.prototype.readBigUInt64LE=be(function(d){d=d>>>0,M(d,"offset");const g=this[d],A=this[d+7];(g===void 0||A===void 0)&&O(d,this.length-8);const C=g+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,B=this[++d]+this[++d]*2**8+this[++d]*2**16+A*2**24;return BigInt(C)+(BigInt(B)<<BigInt(32))}),a.prototype.readBigUInt64BE=be(function(d){d=d>>>0,M(d,"offset");const g=this[d],A=this[d+7];(g===void 0||A===void 0)&&O(d,this.length-8);const C=g*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],B=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+A;return(BigInt(C)<<BigInt(32))+BigInt(B)}),a.prototype.readIntLE=function(d,g,A){d=d>>>0,g=g>>>0,A||ve(d,g,this.length);let C=this[d],B=1,F=0;for(;++F<g&&(B*=256);)C+=this[d+F]*B;return B*=128,C>=B&&(C-=Math.pow(2,8*g)),C},a.prototype.readIntBE=function(d,g,A){d=d>>>0,g=g>>>0,A||ve(d,g,this.length);let C=g,B=1,F=this[d+--C];for(;C>0&&(B*=256);)F+=this[d+--C]*B;return B*=128,F>=B&&(F-=Math.pow(2,8*g)),F},a.prototype.readInt8=function(d,g){return d=d>>>0,g||ve(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},a.prototype.readInt16LE=function(d,g){d=d>>>0,g||ve(d,2,this.length);const A=this[d]|this[d+1]<<8;return A&32768?A|4294901760:A},a.prototype.readInt16BE=function(d,g){d=d>>>0,g||ve(d,2,this.length);const A=this[d+1]|this[d]<<8;return A&32768?A|4294901760:A},a.prototype.readInt32LE=function(d,g){return d=d>>>0,g||ve(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},a.prototype.readInt32BE=function(d,g){return d=d>>>0,g||ve(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},a.prototype.readBigInt64LE=be(function(d){d=d>>>0,M(d,"offset");const g=this[d],A=this[d+7];(g===void 0||A===void 0)&&O(d,this.length-8);const C=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(A<<24);return(BigInt(C)<<BigInt(32))+BigInt(g+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),a.prototype.readBigInt64BE=be(function(d){d=d>>>0,M(d,"offset");const g=this[d],A=this[d+7];(g===void 0||A===void 0)&&O(d,this.length-8);const C=(g<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(C)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+A)}),a.prototype.readFloatLE=function(d,g){return d=d>>>0,g||ve(d,4,this.length),i.read(this,d,!0,23,4)},a.prototype.readFloatBE=function(d,g){return d=d>>>0,g||ve(d,4,this.length),i.read(this,d,!1,23,4)},a.prototype.readDoubleLE=function(d,g){return d=d>>>0,g||ve(d,8,this.length),i.read(this,d,!0,52,8)},a.prototype.readDoubleBE=function(d,g){return d=d>>>0,g||ve(d,8,this.length),i.read(this,d,!1,52,8)};function _e(S,d,g,A,C,B){if(!a.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>C||d<B)throw new RangeError('"value" argument is out of bounds');if(g+A>S.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(d,g,A,C){if(d=+d,g=g>>>0,A=A>>>0,!C){const ke=Math.pow(2,8*A)-1;_e(this,d,g,A,ke,0)}let B=1,F=0;for(this[g]=d&255;++F<A&&(B*=256);)this[g+F]=d/B&255;return g+A},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(d,g,A,C){if(d=+d,g=g>>>0,A=A>>>0,!C){const ke=Math.pow(2,8*A)-1;_e(this,d,g,A,ke,0)}let B=A-1,F=1;for(this[g+B]=d&255;--B>=0&&(F*=256);)this[g+B]=d/F&255;return g+A},a.prototype.writeUint8=a.prototype.writeUInt8=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,1,255,0),this[g]=d&255,g+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,2,65535,0),this[g]=d&255,this[g+1]=d>>>8,g+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,2,65535,0),this[g]=d>>>8,this[g+1]=d&255,g+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,4,4294967295,0),this[g+3]=d>>>24,this[g+2]=d>>>16,this[g+1]=d>>>8,this[g]=d&255,g+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,4,4294967295,0),this[g]=d>>>24,this[g+1]=d>>>16,this[g+2]=d>>>8,this[g+3]=d&255,g+4};function at(S,d,g,A,C){k(d,A,C,S,g,7);let B=Number(d&BigInt(4294967295));S[g++]=B,B=B>>8,S[g++]=B,B=B>>8,S[g++]=B,B=B>>8,S[g++]=B;let F=Number(d>>BigInt(32)&BigInt(4294967295));return S[g++]=F,F=F>>8,S[g++]=F,F=F>>8,S[g++]=F,F=F>>8,S[g++]=F,g}function ct(S,d,g,A,C){k(d,A,C,S,g,7);let B=Number(d&BigInt(4294967295));S[g+7]=B,B=B>>8,S[g+6]=B,B=B>>8,S[g+5]=B,B=B>>8,S[g+4]=B;let F=Number(d>>BigInt(32)&BigInt(4294967295));return S[g+3]=F,F=F>>8,S[g+2]=F,F=F>>8,S[g+1]=F,F=F>>8,S[g]=F,g+8}a.prototype.writeBigUInt64LE=be(function(d,g=0){return at(this,d,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=be(function(d,g=0){return ct(this,d,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(d,g,A,C){if(d=+d,g=g>>>0,!C){const Be=Math.pow(2,8*A-1);_e(this,d,g,A,Be-1,-Be)}let B=0,F=1,ke=0;for(this[g]=d&255;++B<A&&(F*=256);)d<0&&ke===0&&this[g+B-1]!==0&&(ke=1),this[g+B]=(d/F>>0)-ke&255;return g+A},a.prototype.writeIntBE=function(d,g,A,C){if(d=+d,g=g>>>0,!C){const Be=Math.pow(2,8*A-1);_e(this,d,g,A,Be-1,-Be)}let B=A-1,F=1,ke=0;for(this[g+B]=d&255;--B>=0&&(F*=256);)d<0&&ke===0&&this[g+B+1]!==0&&(ke=1),this[g+B]=(d/F>>0)-ke&255;return g+A},a.prototype.writeInt8=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,1,127,-128),d<0&&(d=255+d+1),this[g]=d&255,g+1},a.prototype.writeInt16LE=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,2,32767,-32768),this[g]=d&255,this[g+1]=d>>>8,g+2},a.prototype.writeInt16BE=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,2,32767,-32768),this[g]=d>>>8,this[g+1]=d&255,g+2},a.prototype.writeInt32LE=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,4,2147483647,-2147483648),this[g]=d&255,this[g+1]=d>>>8,this[g+2]=d>>>16,this[g+3]=d>>>24,g+4},a.prototype.writeInt32BE=function(d,g,A){return d=+d,g=g>>>0,A||_e(this,d,g,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[g]=d>>>24,this[g+1]=d>>>16,this[g+2]=d>>>8,this[g+3]=d&255,g+4},a.prototype.writeBigInt64LE=be(function(d,g=0){return at(this,d,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=be(function(d,g=0){return ct(this,d,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function yt(S,d,g,A,C,B){if(g+A>S.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Ke(S,d,g,A,C){return d=+d,g=g>>>0,C||yt(S,d,g,4),i.write(S,d,g,A,23,4),g+4}a.prototype.writeFloatLE=function(d,g,A){return Ke(this,d,g,!0,A)},a.prototype.writeFloatBE=function(d,g,A){return Ke(this,d,g,!1,A)};function Et(S,d,g,A,C){return d=+d,g=g>>>0,C||yt(S,d,g,8),i.write(S,d,g,A,52,8),g+8}a.prototype.writeDoubleLE=function(d,g,A){return Et(this,d,g,!0,A)},a.prototype.writeDoubleBE=function(d,g,A){return Et(this,d,g,!1,A)},a.prototype.copy=function(d,g,A,C){if(!a.isBuffer(d))throw new TypeError("argument should be a Buffer");if(A||(A=0),!C&&C!==0&&(C=this.length),g>=d.length&&(g=d.length),g||(g=0),C>0&&C<A&&(C=A),C===A||d.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),d.length-g<C-A&&(C=d.length-g+A);const B=C-A;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,A,C):Uint8Array.prototype.set.call(d,this.subarray(A,C),g),B},a.prototype.fill=function(d,g,A,C){if(typeof d=="string"){if(typeof g=="string"?(C=g,g=0,A=this.length):typeof A=="string"&&(C=A,A=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(d.length===1){const F=d.charCodeAt(0);(C==="utf8"&&F<128||C==="latin1")&&(d=F)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(g<0||this.length<g||this.length<A)throw new RangeError("Out of range index");if(A<=g)return this;g=g>>>0,A=A===void 0?this.length:A>>>0,d||(d=0);let B;if(typeof d=="number")for(B=g;B<A;++B)this[B]=d;else{const F=a.isBuffer(d)?d:a.from(d,C),ke=F.length;if(ke===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(B=0;B<A-g;++B)this[B+g]=F[B%ke]}return this};const Ve={};function vt(S,d,g){Ve[S]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(C){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:C,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(S,d){return`The "${S}" argument must be of type number. Received type ${typeof d}`},TypeError),vt("ERR_OUT_OF_RANGE",function(S,d,g){let A=`The value of "${S}" is out of range.`,C=g;return Number.isInteger(g)&&Math.abs(g)>2**32?C=ii(String(g)):typeof g=="bigint"&&(C=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(C=ii(C)),C+="n"),A+=` It must be ${d}. Received ${C}`,A},RangeError);function ii(S){let d="",g=S.length;const A=S[0]==="-"?1:0;for(;g>=A+4;g-=3)d=`_${S.slice(g-3,g)}${d}`;return`${S.slice(0,g)}${d}`}function gi(S,d,g){M(d,"offset"),(S[d]===void 0||S[d+g]===void 0)&&O(d,S.length-(g+1))}function k(S,d,g,A,C,B){if(S>g||S<d){const F=typeof d=="bigint"?"n":"";let ke;throw B>3?d===0||d===BigInt(0)?ke=`>= 0${F} and < 2${F} ** ${(B+1)*8}${F}`:ke=`>= -(2${F} ** ${(B+1)*8-1}${F}) and < 2 ** ${(B+1)*8-1}${F}`:ke=`>= ${d}${F} and <= ${g}${F}`,new Ve.ERR_OUT_OF_RANGE("value",ke,S)}gi(A,C,B)}function M(S,d){if(typeof S!="number")throw new Ve.ERR_INVALID_ARG_TYPE(d,"number",S)}function O(S,d,g){throw Math.floor(S)!==S?(M(S,g),new Ve.ERR_OUT_OF_RANGE(g||"offset","an integer",S)):d<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${d}`,S)}const U=/[^+/0-9A-Za-z-_]/g;function W(S){if(S=S.split("=")[0],S=S.trim().replace(U,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function Y(S,d){d=d||1/0;let g;const A=S.length;let C=null;const B=[];for(let F=0;F<A;++F){if(g=S.charCodeAt(F),g>55295&&g<57344){if(!C){if(g>56319){(d-=3)>-1&&B.push(239,191,189);continue}else if(F+1===A){(d-=3)>-1&&B.push(239,191,189);continue}C=g;continue}if(g<56320){(d-=3)>-1&&B.push(239,191,189),C=g;continue}g=(C-55296<<10|g-56320)+65536}else C&&(d-=3)>-1&&B.push(239,191,189);if(C=null,g<128){if((d-=1)<0)break;B.push(g)}else if(g<2048){if((d-=2)<0)break;B.push(g>>6|192,g&63|128)}else if(g<65536){if((d-=3)<0)break;B.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((d-=4)<0)break;B.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return B}function te(S){const d=[];for(let g=0;g<S.length;++g)d.push(S.charCodeAt(g)&255);return d}function X(S,d){let g,A,C;const B=[];for(let F=0;F<S.length&&!((d-=2)<0);++F)g=S.charCodeAt(F),A=g>>8,C=g%256,B.push(C),B.push(A);return B}function J(S){return e.toByteArray(W(S))}function j(S,d,g,A){let C;for(C=0;C<A&&!(C+g>=d.length||C>=S.length);++C)d[C+g]=S[C];return C}function le(S,d){return S instanceof d||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===d.name}function ue(S){return S!==S}const me=function(){const S="0123456789abcdef",d=new Array(256);for(let g=0;g<16;++g){const A=g*16;for(let C=0;C<16;++C)d[A+C]=S[g]+S[C]}return d}();function be(S){return typeof BigInt>"u"?Ce:S}function Ce(){throw new Error("BigInt not supported")}})(gl);var Ao=gl,Hn=Ao.Buffer,ri={},ai;for(ai in Ao)Ao.hasOwnProperty(ai)&&(ai==="SlowBuffer"||ai==="Buffer"||(ri[ai]=Ao[ai]));var Un=ri.Buffer={};for(ai in Hn)Hn.hasOwnProperty(ai)&&(ai==="allocUnsafe"||ai==="allocUnsafeSlow"||(Un[ai]=Hn[ai]));ri.Buffer.prototype=Hn.prototype;(!Un.from||Un.from===Uint8Array.from)&&(Un.from=function(t,e,i){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Hn(t,e,i)});Un.alloc||(Un.alloc=function(t,e,i){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=Hn(t);return!e||e.length===0?n.fill(0):typeof i=="string"?n.fill(e,i):n.fill(e),n});if(!ri.kStringMaxLength)try{ri.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}ri.constants||(ri.constants={MAX_LENGTH:ri.kMaxLength},ri.kStringMaxLength&&(ri.constants.MAX_STRING_LENGTH=ri.kStringMaxLength));var rn=ri,_l={},Vd="\uFEFF";_l.PrependBOM=bl;function bl(t,e){this.encoder=t,this.addBOM=!0}bl.prototype.write=function(t){return this.addBOM&&(t=Vd+t,this.addBOM=!1),this.encoder.write(t)};bl.prototype.end=function(){return this.encoder.end()};_l.StripBOM=yl;function yl(t,e){this.decoder=t,this.pass=!1,this.options=e||{}}yl.prototype.write=function(t){var e=this.decoder.write(t);return this.pass||!e||(e[0]===Vd&&(e=e.slice(1),typeof this.options.stripBOM=="function"&&this.options.stripBOM()),this.pass=!0),e};yl.prototype.end=function(){return this.decoder.end()};var $r={},Hr={},ws={},u1={get exports(){return ws},set exports(t){ws=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Oc;function h1(){return Oc||(Oc=1,function(t,e){var i=gl,n=i.Buffer;function s(r,a){for(var l in r)a[l]=r[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=o);function o(r,a,l){return n(r,a,l)}o.prototype=Object.create(n.prototype),s(n,o),o.from=function(r,a,l){if(typeof r=="number")throw new TypeError("Argument must not be a number");return n(r,a,l)},o.alloc=function(r,a,l){if(typeof r!="number")throw new TypeError("Argument must be a number");var c=n(r);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},o.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return n(r)},o.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(r)}}(u1,ws)),ws}var Nc;function d1(){if(Nc)return Hr;Nc=1;var t=h1().Buffer,e=t.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(y){if(!y)return"utf8";for(var w;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(w)return;y=(""+y).toLowerCase(),w=!0}}function n(y){var w=i(y);if(typeof w!="string"&&(t.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return w||y}Hr.StringDecoder=s;function s(y){this.encoding=n(y);var w;switch(this.encoding){case"utf16le":this.text=h,this.end=f,w=4;break;case"utf8":this.fillLast=l,w=4;break;case"base64":this.text=p,this.end=b,w=3;break;default:this.write=_,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(w)}s.prototype.write=function(y){if(y.length===0)return"";var w,E;if(this.lastNeed){if(w=this.fillLast(y),w===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<y.length?w?w+this.text(y,E):this.text(y,E):w||""},s.prototype.end=u,s.prototype.text=c,s.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function r(y,w,E){var x=w.length-1;if(x<E)return 0;var I=o(w[x]);return I>=0?(I>0&&(y.lastNeed=I-1),I):--x<E||I===-2?0:(I=o(w[x]),I>=0?(I>0&&(y.lastNeed=I-2),I):--x<E||I===-2?0:(I=o(w[x]),I>=0?(I>0&&(I===2?I=0:y.lastNeed=I-3),I):0))}function a(y,w,E){if((w[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return y.lastNeed=2,""}}function l(y){var w=this.lastTotal-this.lastNeed,E=a(this,y);if(E!==void 0)return E;if(this.lastNeed<=y.length)return y.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,w,0,y.length),this.lastNeed-=y.length}function c(y,w){var E=r(this,y,w);if(!this.lastNeed)return y.toString("utf8",w);this.lastTotal=E;var x=y.length-(E-this.lastNeed);return y.copy(this.lastChar,0,x),y.toString("utf8",w,x)}function u(y){var w=y&&y.length?this.write(y):"";return this.lastNeed?w+"":w}function h(y,w){if((y.length-w)%2===0){var E=y.toString("utf16le",w);if(E){var x=E.charCodeAt(E.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",w,y.length-1)}function f(y){var w=y&&y.length?this.write(y):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,E)}return w}function p(y,w){var E=(y.length-w)%3;return E===0?y.toString("base64",w):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",w,y.length-E))}function b(y){var w=y&&y.length?this.write(y):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function _(y){return y.toString(this.encoding)}function v(y){return y&&y.length?this.write(y):""}return Hr}var Ur,Lc;function f1(){if(Lc)return Ur;Lc=1;var t=rn.Buffer;Ur={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:e};function e(l,c){this.enc=l.encodingName,this.bomAware=l.bomAware,this.enc==="base64"?this.encoder=o:this.enc==="cesu8"&&(this.enc="utf8",this.encoder=r,t.from("eda0bdedb2a9","hex").toString()!==""&&(this.decoder=a,this.defaultCharUnicode=c.defaultCharUnicode))}e.prototype.encoder=s,e.prototype.decoder=n;var i=d1().StringDecoder;i.prototype.end||(i.prototype.end=function(){});function n(l,c){this.decoder=new i(c.enc)}n.prototype.write=function(l){return t.isBuffer(l)||(l=t.from(l)),this.decoder.write(l)},n.prototype.end=function(){return this.decoder.end()};function s(l,c){this.enc=c.enc}s.prototype.write=function(l){return t.from(l,this.enc)},s.prototype.end=function(){};function o(l,c){this.prevStr=""}o.prototype.write=function(l){l=this.prevStr+l;var c=l.length-l.length%4;return this.prevStr=l.slice(c),l=l.slice(0,c),t.from(l,"base64")},o.prototype.end=function(){return t.from(this.prevStr,"base64")};function r(l,c){}r.prototype.write=function(l){for(var c=t.alloc(l.length*3),u=0,h=0;h<l.length;h++){var f=l.charCodeAt(h);f<128?c[u++]=f:f<2048?(c[u++]=192+(f>>>6),c[u++]=128+(f&63)):(c[u++]=224+(f>>>12),c[u++]=128+(f>>>6&63),c[u++]=128+(f&63))}return c.slice(0,u)},r.prototype.end=function(){};function a(l,c){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=c.defaultCharUnicode}return a.prototype.write=function(l){for(var c=this.acc,u=this.contBytes,h=this.accBytes,f="",p=0;p<l.length;p++){var b=l[p];(b&192)!==128?(u>0&&(f+=this.defaultCharUnicode,u=0),b<128?f+=String.fromCharCode(b):b<224?(c=b&31,u=1,h=1):b<240?(c=b&15,u=2,h=1):f+=this.defaultCharUnicode):u>0?(c=c<<6|b&63,u--,h++,u===0&&(h===2&&c<128&&c>0?f+=this.defaultCharUnicode:h===3&&c<2048?f+=this.defaultCharUnicode:f+=String.fromCharCode(c))):f+=this.defaultCharUnicode}return this.acc=c,this.contBytes=u,this.accBytes=h,f},a.prototype.end=function(){var l=0;return this.contBytes>0&&(l+=this.defaultCharUnicode),l},Ur}var ki={},Fc;function p1(){if(Fc)return ki;Fc=1;var t=rn.Buffer;ki._utf32=e;function e(c,u){this.iconv=u,this.bomAware=!0,this.isLE=c.isLE}ki.utf32le={type:"_utf32",isLE:!0},ki.utf32be={type:"_utf32",isLE:!1},ki.ucs4le="utf32le",ki.ucs4be="utf32be",e.prototype.encoder=i,e.prototype.decoder=n;function i(c,u){this.isLE=u.isLE,this.highSurrogate=0}i.prototype.write=function(c){for(var u=t.from(c,"ucs2"),h=t.alloc(u.length*2),f=this.isLE?h.writeUInt32LE:h.writeUInt32BE,p=0,b=0;b<u.length;b+=2){var _=u.readUInt16LE(b),v=55296<=_&&_<56320,y=56320<=_&&_<57344;if(this.highSurrogate)if(v||!y)f.call(h,this.highSurrogate,p),p+=4;else{var w=(this.highSurrogate-55296<<10|_-56320)+65536;f.call(h,w,p),p+=4,this.highSurrogate=0;continue}v?this.highSurrogate=_:(f.call(h,_,p),p+=4,this.highSurrogate=0)}return p<h.length&&(h=h.slice(0,p)),h},i.prototype.end=function(){if(this.highSurrogate){var c=t.alloc(4);return this.isLE?c.writeUInt32LE(this.highSurrogate,0):c.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,c}};function n(c,u){this.isLE=u.isLE,this.badChar=u.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}n.prototype.write=function(c){if(c.length===0)return"";var u=0,h=0,f=t.alloc(c.length+4),p=0,b=this.isLE,_=this.overflow,v=this.badChar;if(_.length>0){for(;u<c.length&&_.length<4;u++)_.push(c[u]);_.length===4&&(b?h=_[u]|_[u+1]<<8|_[u+2]<<16|_[u+3]<<24:h=_[u+3]|_[u+2]<<8|_[u+1]<<16|_[u]<<24,_.length=0,p=s(f,p,h,v))}for(;u<c.length-3;u+=4)b?h=c[u]|c[u+1]<<8|c[u+2]<<16|c[u+3]<<24:h=c[u+3]|c[u+2]<<8|c[u+1]<<16|c[u]<<24,p=s(f,p,h,v);for(;u<c.length;u++)_.push(c[u]);return f.slice(0,p).toString("ucs2")};function s(c,u,h,f){if((h<0||h>1114111)&&(h=f),h>=65536){h-=65536;var p=55296|h>>10;c[u++]=p&255,c[u++]=p>>8;var h=56320|h&1023}return c[u++]=h&255,c[u++]=h>>8,u}n.prototype.end=function(){this.overflow.length=0},ki.utf32=o,ki.ucs4="utf32";function o(c,u){this.iconv=u}o.prototype.encoder=r,o.prototype.decoder=a;function r(c,u){c=c||{},c.addBOM===void 0&&(c.addBOM=!0),this.encoder=u.iconv.getEncoder(c.defaultEncoding||"utf-32le",c)}r.prototype.write=function(c){return this.encoder.write(c)},r.prototype.end=function(){return this.encoder.end()};function a(c,u){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=c||{},this.iconv=u.iconv}a.prototype.write=function(c){if(!this.decoder){if(this.initialBufs.push(c),this.initialBufsLen+=c.length,this.initialBufsLen<32)return"";var u=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(u,this.options);for(var h="",f=0;f<this.initialBufs.length;f++)h+=this.decoder.write(this.initialBufs[f]);return this.initialBufs.length=this.initialBufsLen=0,h}return this.decoder.write(c)},a.prototype.end=function(){if(!this.decoder){var c=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);var f=this.decoder.end();return f&&(u+=f),this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.end()};function l(c,u){var h=[],f=0,p=0,b=0,_=0,v=0;e:for(var y=0;y<c.length;y++)for(var w=c[y],E=0;E<w.length;E++)if(h.push(w[E]),h.length===4){if(f===0){if(h[0]===255&&h[1]===254&&h[2]===0&&h[3]===0)return"utf-32le";if(h[0]===0&&h[1]===0&&h[2]===254&&h[3]===255)return"utf-32be"}if((h[0]!==0||h[1]>16)&&b++,(h[3]!==0||h[2]>16)&&p++,h[0]===0&&h[1]===0&&(h[2]!==0||h[3]!==0)&&v++,(h[0]!==0||h[1]!==0)&&h[2]===0&&h[3]===0&&_++,h.length=0,f++,f>=100)break e}return v-b>_-p?"utf-32be":v-b<_-p?"utf-32le":u||"utf-32le"}return ki}var no={},$c;function g1(){if($c)return no;$c=1;var t=rn.Buffer;no.utf16be=e;function e(){}e.prototype.encoder=i,e.prototype.decoder=n,e.prototype.bomAware=!0;function i(){}i.prototype.write=function(l){for(var c=t.from(l,"ucs2"),u=0;u<c.length;u+=2){var h=c[u];c[u]=c[u+1],c[u+1]=h}return c},i.prototype.end=function(){};function n(){this.overflowByte=-1}n.prototype.write=function(l){if(l.length==0)return"";var c=t.alloc(l.length+1),u=0,h=0;for(this.overflowByte!==-1&&(c[0]=l[0],c[1]=this.overflowByte,u=1,h=2);u<l.length-1;u+=2,h+=2)c[h]=l[u+1],c[h+1]=l[u];return this.overflowByte=u==l.length-1?l[l.length-1]:-1,c.slice(0,h).toString("ucs2")},n.prototype.end=function(){this.overflowByte=-1},no.utf16=s;function s(l,c){this.iconv=c}s.prototype.encoder=o,s.prototype.decoder=r;function o(l,c){l=l||{},l.addBOM===void 0&&(l.addBOM=!0),this.encoder=c.iconv.getEncoder("utf-16le",l)}o.prototype.write=function(l){return this.encoder.write(l)},o.prototype.end=function(){return this.encoder.end()};function r(l,c){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=l||{},this.iconv=c.iconv}r.prototype.write=function(l){if(!this.decoder){if(this.initialBufs.push(l),this.initialBufsLen+=l.length,this.initialBufsLen<16)return"";var c=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);return this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.write(l)},r.prototype.end=function(){if(!this.decoder){var l=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(l,this.options);for(var c="",u=0;u<this.initialBufs.length;u++)c+=this.decoder.write(this.initialBufs[u]);var h=this.decoder.end();return h&&(c+=h),this.initialBufs.length=this.initialBufsLen=0,c}return this.decoder.end()};function a(l,c){var u=[],h=0,f=0,p=0;e:for(var b=0;b<l.length;b++)for(var _=l[b],v=0;v<_.length;v++)if(u.push(_[v]),u.length===2){if(h===0){if(u[0]===255&&u[1]===254)return"utf-16le";if(u[0]===254&&u[1]===255)return"utf-16be"}if(u[0]===0&&u[1]!==0&&p++,u[0]!==0&&u[1]===0&&f++,u.length=0,h++,h>=100)break e}return p>f?"utf-16be":p<f?"utf-16le":c||"utf-16le"}return no}var ns={},Hc;function m1(){if(Hc)return ns;Hc=1;var t=rn.Buffer;ns.utf7=e,ns.unicode11utf7="utf7";function e(_,v){this.iconv=v}e.prototype.encoder=n,e.prototype.decoder=s,e.prototype.bomAware=!0;var i=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function n(_,v){this.iconv=v.iconv}n.prototype.write=function(_){return t.from(_.replace(i,function(v){return"+"+(v==="+"?"":this.iconv.encode(v,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},n.prototype.end=function(){};function s(_,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}for(var o=/[A-Za-z0-9\/+]/,r=[],a=0;a<256;a++)r[a]=o.test(String.fromCharCode(a));var l="+".charCodeAt(0),c="-".charCodeAt(0),u="&".charCodeAt(0);s.prototype.write=function(_){for(var v="",y=0,w=this.inBase64,E=this.base64Accum,x=0;x<_.length;x++)if(!w)_[x]==l&&(v+=this.iconv.decode(_.slice(y,x),"ascii"),y=x+1,w=!0);else if(!r[_[x]]){if(x==y&&_[x]==c)v+="+";else{var I=E+this.iconv.decode(_.slice(y,x),"ascii");v+=this.iconv.decode(t.from(I,"base64"),"utf16-be")}_[x]!=c&&x--,y=x+1,w=!1,E=""}if(!w)v+=this.iconv.decode(_.slice(y),"ascii");else{var I=E+this.iconv.decode(_.slice(y),"ascii"),T=I.length-I.length%8;E=I.slice(T),I=I.slice(0,T),v+=this.iconv.decode(t.from(I,"base64"),"utf16-be")}return this.inBase64=w,this.base64Accum=E,v},s.prototype.end=function(){var _="";return this.inBase64&&this.base64Accum.length>0&&(_=this.iconv.decode(t.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",_},ns.utf7imap=h;function h(_,v){this.iconv=v}h.prototype.encoder=f,h.prototype.decoder=p,h.prototype.bomAware=!0;function f(_,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=t.alloc(6),this.base64AccumIdx=0}f.prototype.write=function(_){for(var v=this.inBase64,y=this.base64Accum,w=this.base64AccumIdx,E=t.alloc(_.length*5+10),x=0,I=0;I<_.length;I++){var T=_.charCodeAt(I);32<=T&&T<=126?(v&&(w>0&&(x+=E.write(y.slice(0,w).toString("base64").replace(/\//g,",").replace(/=+$/,""),x),w=0),E[x++]=c,v=!1),v||(E[x++]=T,T===u&&(E[x++]=c))):(v||(E[x++]=u,v=!0),v&&(y[w++]=T>>8,y[w++]=T&255,w==y.length&&(x+=E.write(y.toString("base64").replace(/\//g,","),x),w=0)))}return this.inBase64=v,this.base64AccumIdx=w,E.slice(0,x)},f.prototype.end=function(){var _=t.alloc(10),v=0;return this.inBase64&&(this.base64AccumIdx>0&&(v+=_.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),v),this.base64AccumIdx=0),_[v++]=c,this.inBase64=!1),_.slice(0,v)};function p(_,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}var b=r.slice();return b[",".charCodeAt(0)]=!0,p.prototype.write=function(_){for(var v="",y=0,w=this.inBase64,E=this.base64Accum,x=0;x<_.length;x++)if(!w)_[x]==u&&(v+=this.iconv.decode(_.slice(y,x),"ascii"),y=x+1,w=!0);else if(!b[_[x]]){if(x==y&&_[x]==c)v+="&";else{var I=E+this.iconv.decode(_.slice(y,x),"ascii").replace(/,/g,"/");v+=this.iconv.decode(t.from(I,"base64"),"utf16-be")}_[x]!=c&&x--,y=x+1,w=!1,E=""}if(!w)v+=this.iconv.decode(_.slice(y),"ascii");else{var I=E+this.iconv.decode(_.slice(y),"ascii").replace(/,/g,"/"),T=I.length-I.length%8;E=I.slice(T),I=I.slice(0,T),v+=this.iconv.decode(t.from(I,"base64"),"utf16-be")}return this.inBase64=w,this.base64Accum=E,v},p.prototype.end=function(){var _="";return this.inBase64&&this.base64Accum.length>0&&(_=this.iconv.decode(t.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",_},ns}var Wr={},Uc;function _1(){if(Uc)return Wr;Uc=1;var t=rn.Buffer;Wr._sbcs=e;function e(s,o){if(!s)throw new Error("SBCS codec is called without the data.");if(!s.chars||s.chars.length!==128&&s.chars.length!==256)throw new Error("Encoding '"+s.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(s.chars.length===128){for(var r="",a=0;a<128;a++)r+=String.fromCharCode(a);s.chars=r+s.chars}this.decodeBuf=t.from(s.chars,"ucs2");for(var l=t.alloc(65536,o.defaultCharSingleByte.charCodeAt(0)),a=0;a<s.chars.length;a++)l[s.chars.charCodeAt(a)]=a;this.encodeBuf=l}e.prototype.encoder=i,e.prototype.decoder=n;function i(s,o){this.encodeBuf=o.encodeBuf}i.prototype.write=function(s){for(var o=t.alloc(s.length),r=0;r<s.length;r++)o[r]=this.encodeBuf[s.charCodeAt(r)];return o},i.prototype.end=function(){};function n(s,o){this.decodeBuf=o.decodeBuf}return n.prototype.write=function(s){for(var o=this.decodeBuf,r=t.alloc(s.length*2),a=0,l=0,c=0;c<s.length;c++)a=s[c]*2,l=c*2,r[l]=o[a],r[l+1]=o[a+1];return r.toString("ucs2")},n.prototype.end=function(){},Wr}var Gr,Wc;function b1(){return Wc||(Wc=1,Gr={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}),Gr}var Vr,Gc;function y1(){return Gc||(Gc=1,Vr={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},iso646cn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}`},iso646jp:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_\`abcdefghijklmnopqrstuvwxyz{|}`},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}),Vr}var jr={},Vc;function v1(){if(Vc)return jr;Vc=1;var t=rn.Buffer;jr._dbcs=l;for(var e=-1,i=-2,n=-10,s=-1e3,o=new Array(256),r=-1,a=0;a<256;a++)o[a]=e;function l(f,p){if(this.encodingName=f.encodingName,!f)throw new Error("DBCS codec is called without the data.");if(!f.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var b=f.table();this.decodeTables=[],this.decodeTables[0]=o.slice(0),this.decodeTableSeq=[];for(var _=0;_<b.length;_++)this._addDecodeChunk(b[_]);if(typeof f.gb18030=="function"){this.gb18030=f.gb18030();var v=this.decodeTables.length;this.decodeTables.push(o.slice(0));var y=this.decodeTables.length;this.decodeTables.push(o.slice(0));for(var w=this.decodeTables[0],_=129;_<=254;_++)for(var E=this.decodeTables[s-w[_]],x=48;x<=57;x++){if(E[x]===e)E[x]=s-v;else if(E[x]>s)throw new Error("gb18030 decode tables conflict at byte 2");for(var I=this.decodeTables[s-E[x]],T=129;T<=254;T++){if(I[T]===e)I[T]=s-y;else{if(I[T]===s-y)continue;if(I[T]>s)throw new Error("gb18030 decode tables conflict at byte 3")}for(var H=this.decodeTables[s-I[T]],V=48;V<=57;V++)H[V]===e&&(H[V]=i)}}}this.defaultCharUnicode=p.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var Q={};if(f.encodeSkipVals)for(var _=0;_<f.encodeSkipVals.length;_++){var ae=f.encodeSkipVals[_];if(typeof ae=="number")Q[ae]=!0;else for(var x=ae.from;x<=ae.to;x++)Q[x]=!0}if(this._fillEncodeTable(0,0,Q),f.encodeAdd)for(var Z in f.encodeAdd)Object.prototype.hasOwnProperty.call(f.encodeAdd,Z)&&this._setEncodeChar(Z.charCodeAt(0),f.encodeAdd[Z]);this.defCharSB=this.encodeTable[0][p.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===e&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===e&&(this.defCharSB="?".charCodeAt(0))}l.prototype.encoder=c,l.prototype.decoder=u,l.prototype._getDecodeTrieNode=function(f){for(var p=[];f>0;f>>>=8)p.push(f&255);p.length==0&&p.push(0);for(var b=this.decodeTables[0],_=p.length-1;_>0;_--){var v=b[p[_]];if(v==e)b[p[_]]=s-this.decodeTables.length,this.decodeTables.push(b=o.slice(0));else if(v<=s)b=this.decodeTables[s-v];else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+f.toString(16))}return b},l.prototype._addDecodeChunk=function(f){var p=parseInt(f[0],16),b=this._getDecodeTrieNode(p);p=p&255;for(var _=1;_<f.length;_++){var v=f[_];if(typeof v=="string")for(var y=0;y<v.length;){var w=v.charCodeAt(y++);if(55296<=w&&w<56320){var E=v.charCodeAt(y++);if(56320<=E&&E<57344)b[p++]=65536+(w-55296)*1024+(E-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+f[0])}else if(4080<w&&w<=4095){for(var x=4095-w+2,I=[],T=0;T<x;T++)I.push(v.charCodeAt(y++));b[p++]=n-this.decodeTableSeq.length,this.decodeTableSeq.push(I)}else b[p++]=w}else if(typeof v=="number")for(var H=b[p-1]+1,y=0;y<v;y++)b[p++]=H++;else throw new Error("Incorrect type '"+typeof v+"' given in "+this.encodingName+" at chunk "+f[0])}if(p>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+f[0]+": too long"+p)},l.prototype._getEncodeBucket=function(f){var p=f>>8;return this.encodeTable[p]===void 0&&(this.encodeTable[p]=o.slice(0)),this.encodeTable[p]},l.prototype._setEncodeChar=function(f,p){var b=this._getEncodeBucket(f),_=f&255;b[_]<=n?this.encodeTableSeq[n-b[_]][r]=p:b[_]==e&&(b[_]=p)},l.prototype._setEncodeSequence=function(f,p){var b=f[0],_=this._getEncodeBucket(b),v=b&255,y;_[v]<=n?y=this.encodeTableSeq[n-_[v]]:(y={},_[v]!==e&&(y[r]=_[v]),_[v]=n-this.encodeTableSeq.length,this.encodeTableSeq.push(y));for(var w=1;w<f.length-1;w++){var E=y[b];typeof E=="object"?y=E:(y=y[b]={},E!==void 0&&(y[r]=E))}b=f[f.length-1],y[b]=p},l.prototype._fillEncodeTable=function(f,p,b){for(var _=this.decodeTables[f],v=!1,y={},w=0;w<256;w++){var E=_[w],x=p+w;if(!b[x])if(E>=0)this._setEncodeChar(E,x),v=!0;else if(E<=s){var I=s-E;if(!y[I]){var T=x<<8>>>0;this._fillEncodeTable(I,T,b)?v=!0:y[I]=!0}}else E<=n&&(this._setEncodeSequence(this.decodeTableSeq[n-E],x),v=!0)}return v};function c(f,p){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=p.encodeTable,this.encodeTableSeq=p.encodeTableSeq,this.defaultCharSingleByte=p.defCharSB,this.gb18030=p.gb18030}c.prototype.write=function(f){for(var p=t.alloc(f.length*(this.gb18030?4:3)),b=this.leadSurrogate,_=this.seqObj,v=-1,y=0,w=0;;){if(v===-1){if(y==f.length)break;var E=f.charCodeAt(y++)}else{var E=v;v=-1}if(55296<=E&&E<57344)if(E<56320)if(b===-1){b=E;continue}else b=E,E=e;else b!==-1?(E=65536+(b-55296)*1024+(E-56320),b=-1):E=e;else b!==-1&&(v=E,E=e,b=-1);var x=e;if(_!==void 0&&E!=e){var I=_[E];if(typeof I=="object"){_=I;continue}else typeof I=="number"?x=I:I==null&&(I=_[r],I!==void 0&&(x=I,v=E));_=void 0}else if(E>=0){var T=this.encodeTable[E>>8];if(T!==void 0&&(x=T[E&255]),x<=n){_=this.encodeTableSeq[n-x];continue}if(x==e&&this.gb18030){var H=h(this.gb18030.uChars,E);if(H!=-1){var x=this.gb18030.gbChars[H]+(E-this.gb18030.uChars[H]);p[w++]=129+Math.floor(x/12600),x=x%12600,p[w++]=48+Math.floor(x/1260),x=x%1260,p[w++]=129+Math.floor(x/10),x=x%10,p[w++]=48+x;continue}}}x===e&&(x=this.defaultCharSingleByte),x<256?p[w++]=x:x<65536?(p[w++]=x>>8,p[w++]=x&255):x<16777216?(p[w++]=x>>16,p[w++]=x>>8&255,p[w++]=x&255):(p[w++]=x>>>24,p[w++]=x>>>16&255,p[w++]=x>>>8&255,p[w++]=x&255)}return this.seqObj=_,this.leadSurrogate=b,p.slice(0,w)},c.prototype.end=function(){if(!(this.leadSurrogate===-1&&this.seqObj===void 0)){var f=t.alloc(10),p=0;if(this.seqObj){var b=this.seqObj[r];b!==void 0&&(b<256?f[p++]=b:(f[p++]=b>>8,f[p++]=b&255)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(f[p++]=this.defaultCharSingleByte,this.leadSurrogate=-1),f.slice(0,p)}},c.prototype.findIdx=h;function u(f,p){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=p.decodeTables,this.decodeTableSeq=p.decodeTableSeq,this.defaultCharUnicode=p.defaultCharUnicode,this.gb18030=p.gb18030}u.prototype.write=function(f){for(var p=t.alloc(f.length*2),b=this.nodeIdx,_=this.prevBytes,v=this.prevBytes.length,y=-this.prevBytes.length,w,E=0,x=0;E<f.length;E++){var I=E>=0?f[E]:_[E+v],w=this.decodeTables[b][I];if(!(w>=0))if(w===e)w=this.defaultCharUnicode.charCodeAt(0),E=y;else if(w===i){if(E>=3)var T=(f[E-3]-129)*12600+(f[E-2]-48)*1260+(f[E-1]-129)*10+(I-48);else var T=(_[E-3+v]-129)*12600+((E-2>=0?f[E-2]:_[E-2+v])-48)*1260+((E-1>=0?f[E-1]:_[E-1+v])-129)*10+(I-48);var H=h(this.gb18030.gbChars,T);w=this.gb18030.uChars[H]+T-this.gb18030.gbChars[H]}else if(w<=s){b=s-w;continue}else if(w<=n){for(var V=this.decodeTableSeq[n-w],Q=0;Q<V.length-1;Q++)w=V[Q],p[x++]=w&255,p[x++]=w>>8;w=V[V.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+w+" at "+b+"/"+I);if(w>=65536){w-=65536;var ae=55296|w>>10;p[x++]=ae&255,p[x++]=ae>>8,w=56320|w&1023}p[x++]=w&255,p[x++]=w>>8,b=0,y=E+1}return this.nodeIdx=b,this.prevBytes=y>=0?Array.prototype.slice.call(f,y):_.slice(y+v).concat(Array.prototype.slice.call(f)),p.slice(0,x).toString("ucs2")},u.prototype.end=function(){for(var f="";this.prevBytes.length>0;){f+=this.defaultCharUnicode;var p=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,p.length>0&&(f+=this.write(p))}return this.prevBytes=[],this.nodeIdx=0,f};function h(f,p){if(f[0]>p)return-1;for(var b=0,_=f.length;b<_-1;){var v=b+(_-b+1>>1);f[v]<=p?b=v:_=v}return b}return jr}const S1=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]],w1=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]],zr=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]],jc=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]],E1=[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],A1=[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3],x1={uChars:E1,gbChars:A1},k1=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]],zc=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]],I1=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];var Kr,Kc;function C1(){return Kc||(Kc=1,Kr={shiftjis:{type:"_dbcs",table:function(){return S1},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return w1},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return zr}},gbk:{type:"_dbcs",table:function(){return zr.concat(jc)}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return zr.concat(jc)},gb18030:function(){return x1},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return k1}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return zc}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return zc.concat(I1)},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}),Kr}var qc;function M1(){return qc||(qc=1,function(t){for(var e=[f1(),p1(),g1(),m1(),_1(),b1(),y1(),v1(),C1()],i=0;i<e.length;i++){var n=e[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}}($r)),$r}var qr,Yc;function P1(){if(Yc)return qr;Yc=1;var t=rn.Buffer;return qr=function(e){var i=e.Transform;function n(o,r){this.conv=o,r=r||{},r.decodeStrings=!1,i.call(this,r)}n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype._transform=function(o,r,a){if(typeof o!="string")return a(new Error("Iconv encoding stream needs strings as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l),a()}catch(c){a(c)}},n.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r),o()}catch(a){o(a)}},n.prototype.collect=function(o){var r=[];return this.on("error",o),this.on("data",function(a){r.push(a)}),this.on("end",function(){o(null,t.concat(r))}),this};function s(o,r){this.conv=o,r=r||{},r.encoding=this.encoding="utf8",i.call(this,r)}return s.prototype=Object.create(i.prototype,{constructor:{value:s}}),s.prototype._transform=function(o,r,a){if(!t.isBuffer(o)&&!(o instanceof Uint8Array))return a(new Error("Iconv decoding stream needs buffers as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l,this.encoding),a()}catch(c){a(c)}},s.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r,this.encoding),o()}catch(a){o(a)}},s.prototype.collect=function(o){var r="";return this.on("error",o),this.on("data",function(a){r+=a}),this.on("end",function(){o(null,r)}),this},{IconvLiteEncoderStream:n,IconvLiteDecoderStream:s}},qr}const T1={},B1=Object.freeze(Object.defineProperty({__proto__:null,default:T1},Symbol.toStringTag,{value:"Module"})),D1=e1(B1);(function(t){var e=rn.Buffer,i=_l,n=t.exports;n.encodings=null,n.defaultCharUnicode="",n.defaultCharSingleByte="?",n.encode=function(r,a,l){r=""+(r||"");var c=n.getEncoder(a,l),u=c.write(r),h=c.end();return h&&h.length>0?e.concat([u,h]):u},n.decode=function(r,a,l){typeof r=="string"&&(n.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),n.skipDecodeWarning=!0),r=e.from(""+(r||""),"binary"));var c=n.getDecoder(a,l),u=c.write(r),h=c.end();return h?u+h:u},n.encodingExists=function(r){try{return n.getCodec(r),!0}catch{return!1}},n.toEncoding=n.encode,n.fromEncoding=n.decode,n._codecDataCache={},n.getCodec=function(r){n.encodings||(n.encodings=M1());for(var a=n._canonicalizeEncoding(r),l={};;){var c=n._codecDataCache[a];if(c)return c;var u=n.encodings[a];switch(typeof u){case"string":a=u;break;case"object":for(var h in u)l[h]=u[h];l.encodingName||(l.encodingName=a),a=u.type;break;case"function":return l.encodingName||(l.encodingName=a),c=new u(l,n),n._codecDataCache[l.encodingName]=c,c;default:throw new Error("Encoding not recognized: '"+r+"' (searched as: '"+a+"')")}}},n._canonicalizeEncoding=function(o){return(""+o).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},n.getEncoder=function(r,a){var l=n.getCodec(r),c=new l.encoder(a,l);return l.bomAware&&a&&a.addBOM&&(c=new i.PrependBOM(c,a)),c},n.getDecoder=function(r,a){var l=n.getCodec(r),c=new l.decoder(a,l);return l.bomAware&&!(a&&a.stripBOM===!1)&&(c=new i.StripBOM(c,a)),c},n.enableStreamingAPI=function(r){if(!n.supportsStreams){var a=P1()(r);n.IconvLiteEncoderStream=a.IconvLiteEncoderStream,n.IconvLiteDecoderStream=a.IconvLiteDecoderStream,n.encodeStream=function(c,u){return new n.IconvLiteEncoderStream(n.getEncoder(c,u),u)},n.decodeStream=function(c,u){return new n.IconvLiteDecoderStream(n.getDecoder(c,u),u)},n.supportsStreams=!0}};var s;try{s=D1}catch{}s&&s.Transform?n.enableStreamingAPI(s):n.encodeStream=n.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}})(t1);function R1(t){return t>=1500?"":t>=600?"":t>=400?"":t>=200?"":t>=-200?"":t>=-400?"":t>=-600?"":t>=-1500?"":""}function Ea(t,e){return 100/(1+Math.exp(-t/e))}var nn=(t=>(t[t.PLAYER=0]="PLAYER",t[t.RESEARCHER=1]="RESEARCHER",t))(nn||{});function O1(t){const e=/^\*=([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function N1(t){const e=/^#=([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function L1(t){const e=/^\* *([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function Xc(t){t.forEach(e=>{const i=e.customData||{},n=e.comment.split(`
`);for(const s of n){const o=O1(s)||L1(s);o!==void 0&&(i.playerSearchInfo={usi:t.usi,score:o});const r=N1(s);r!==void 0&&(i.researchInfo={usi:t.usi,score:r})}e.customData=i})}function F1(t){switch(t){case 0:return"*";case 1:return"#"}}function vl(t,e){const i=F1(t);let n="";if(e.mate&&(n+=`${Math.abs(e.mate)}
`),e.score!==void 0&&(n+=R1(e.score)+`
`,n+=`${i}=${e.score}
`),e.pv&&e.pv.length!==0){n+=`${i}=`;for(const s of e.pv)n+=`${s.getDisplayText({legacy:!0})}`;n+=`
`}return n}var es=(t=>(t.NONE="none",t.INSERT="insert",t.APPEND="append",t.OVERWRITE="overwrite",t))(es||{});function $1(t){return Md(t.timeSeconds)+"+"+String(t.byoyomi).padStart(2,"0")}class H1{constructor(){P(this,"_record",new At);P(this,"_recordFilePath");P(this,"onChangeFilePath",()=>{});P(this,"onChangePosition",()=>{});this.setupRecordHandler()}get record(){return this._record}get recordFilePath(){return this._recordFilePath}updateRecordFilePath(e){this._recordFilePath=e,this.onChangeFilePath(e)}clearRecordFilePath(){this._recordFilePath=void 0,this.onChangeFilePath()}reset(e){if(e){const i=new Bt;i.reset(e),this._record.clear(i)}else this._record.clear();this.clearRecordFilePath()}resetByCurrentPosition(){this._record.clear(this._record.position),this.clearRecordFilePath()}importRecord(e,i){let n;switch(i||(i=Em(e)),i){case On.SFEN:{const s=Bt.newBySFEN(e);n=s?new At(s):new Error("");break}case On.USI:n=At.newByUSI(e);break;case On.KIF:n=kc(e);break;case On.CSA:n=Cc(e);break;default:n=new Error("");break}if(n instanceof Error)return n;this._record=n,this.setupRecordHandler(),this.clearRecordFilePath(),Xc(this._record)}importRecordFromBuffer(e,i){let n;if(i.match(/\.kif$/)||i.match(/\.kifu$/)){const s=i.match(/\.kif$/)?qo.decode(e,"Shift_JIS"):new TextDecoder().decode(e);n=kc(s)}else i.match(/\.csa$/)?n=Cc(new TextDecoder().decode(e)):n=new Error(": "+i);if(n instanceof Error)return n;this._record=n,this.setupRecordHandler(),this.updateRecordFilePath(i),Xc(this._record)}exportRecordAsBuffer(e,i){let n;if(e.match(/\.kif$/)||e.match(/\.kifu$/)){const s=Od(this.record,i);n=e.match(/\.kif$/)?qo.encode(s,"Shift_JIS"):new TextEncoder().encode(s)}else if(e.match(/\.csa$/))n=new TextEncoder().encode(Fd(this.record,i));else return new Error(": "+e);return this.updateRecordFilePath(e),n}swapNextTurn(){const e=this.record.position.clone();e.setColor(Mt(e.color)),this._record.clear(e),this.clearRecordFilePath()}changePosition(e){const i=this.record.position.clone();i.edit(e),this._record.clear(i),this.clearRecordFilePath()}changePly(e){this._record.goto(e)}changeBranch(e){return this._record.switchBranchByIndex(e)}swapWithNextBranch(){return this._record.swapWithNextBranch()}swapWithPreviousBranch(){return this._record.swapWithPreviousBranch()}removeCurrentMove(){this._record.removeCurrentMove()}removeNextMove(){this._record.removeNextMove()}updateComment(e){this._record.current.comment=e}appendComment(e,i){if(!e)return;const n=this._record.current.comment,s=this.record.current.comment?`
`:"";switch(i){case"none":break;case"insert":this._record.current.comment=e+s+n;break;case"append":this._record.current.comment=n+s+e;break;case"overwrite":this._record.current.comment=e;break}}setGameStartMetadata(e){e.gameTitle&&this._record.metadata.setStandardMetadata(re.TITLE,e.gameTitle),e.blackName&&this._record.metadata.setStandardMetadata(re.BLACK_NAME,e.blackName),e.whiteName&&this._record.metadata.setStandardMetadata(re.WHITE_NAME,e.whiteName),this._record.metadata.setStandardMetadata(re.DATE,Wd()),this._record.metadata.setStandardMetadata(re.START_DATETIME,Rc()),e.timeLimit&&this._record.metadata.setStandardMetadata(re.TIME_LIMIT,$1(e.timeLimit))}setGameEndMetadata(){this._record.metadata.setStandardMetadata(re.END_DATETIME,Rc())}updateSearchInfo(e,i){var s;const n=this.record.current.customData||{};switch(e){case 0:n.playerSearchInfo=i;break;case 1:(i.depth||0)>=(((s=n.researchInfo)==null?void 0:s.depth)||0)&&(n.researchInfo=i);break}this._record.current.customData=n}updateEnemySearchInfo(e){const i=this.record.current.customData||{};i.enemySearchInfo=e,this._record.current.customData=i}appendMove(e){return this._record.append(e.move,e.moveOption)?(e.elapsedMs!==void 0&&this._record.current.setElapsedMs(e.elapsedMs),!0):!1}updateStandardMetadata(e){this._record.metadata.setStandardMetadata(e.key,e.value)}on(e,i){switch(e){case"changeFilePath":this.onChangeFilePath=i;break;case"changePosition":this.onChangePosition=i,this.setupRecordHandler();break}}setupRecordHandler(){this._record.on("changePosition",this.onChangePosition)}}function Aa(){return{startCriteria:{enableNumber:!1,number:20},endCriteria:{enableNumber:!1,number:100},perMoveCriteria:{maxSeconds:5},commentBehavior:es.INSERT}}var Sl=(t=>(t.STANDARD="standard",t.CHERRY_BLOSSOM="cherry-blossom",t.AUTUMN="autumn",t.SNOW="snow",t.DARK="dark",t))(Sl||{}),Vi=(t=>(t.RECORD_INFO="recordInfo",t.COMMENT="comment",t.SEARCH="search",t.PV="pv",t.CHART="chart",t.PERCENTAGE_CHART="percentageChart",t.INVISIBLE="invisible",t))(Vi||{}),xa=(t=>(t.ALL="all",t.ONLY_USER="onlyUser",t))(xa||{});function ka(t){return{thema:"standard",pieceImage:fl.HITOMOJI,boardImage:pl.LIGHT,boardLabelType:Ss.STANDARD,pieceVolume:30,clockVolume:30,clockPitch:500,clockSoundTarget:"onlyUser",boardFlipping:!1,tab:"recordInfo",returnCode:(t==null?void 0:t.returnCode)||`\r
`,autoSaveDirectory:(t==null?void 0:t.autoSaveDirectory)||"",engineTimeoutSeconds:10,coefficientInSigmoid:600,badMoveLevelThreshold1:5,badMoveLevelThreshold2:10,badMoveLevelThreshold3:20,badMoveLevelThreshold4:50,showElapsedTimeInRecordView:!0,showCommentInRecordView:!0,enableAppLog:!1,enableUSILog:!1,enableCSALog:!1}}function U1(t){if(t.pieceVolume<0||t.pieceVolume>100)return new Error("0%100%");if(t.clockVolume<0||t.clockVolume>100)return new Error("0%100%");if(t.clockPitch<220||t.clockPitch>880)return new Error("220Hz880Hz");if(t.engineTimeoutSeconds<1)return new Error(" 1 ");if(t.engineTimeoutSeconds>300)return new Error(" 300 ");if(t.coefficientInSigmoid<=0)return new Error("0");if(t.badMoveLevelThreshold1<1||t.badMoveLevelThreshold1>100)return new Error("1%100%");if(t.badMoveLevelThreshold2<1||t.badMoveLevelThreshold2>100)return new Error("1%100%");if(t.badMoveLevelThreshold3<1||t.badMoveLevelThreshold3>100)return new Error("1%100%");if(t.badMoveLevelThreshold4<1||t.badMoveLevelThreshold4>100)return new Error("1%100%");if(t.badMoveLevelThreshold1>=t.badMoveLevelThreshold2)return new Error("");if(t.badMoveLevelThreshold2>=t.badMoveLevelThreshold3)return new Error("");if(t.badMoveLevelThreshold3>=t.badMoveLevelThreshold4)return new Error("")}function Yo(){return{black:{name:"",uri:Ft},white:{name:"",uri:Ft},timeLimit:{timeSeconds:0,byoyomi:30,increment:0},enableEngineTimeout:!1,humanIsFront:!0,enableComment:!0,enableAutoSave:!0,repeat:1,swapPlayers:!1,maxMoves:1e3}}function jd(t){if(t.timeLimit.timeSeconds===0&&t.timeLimit.byoyomi===0)return new Error("0");if(t.timeLimit.byoyomi!==0&&t.timeLimit.increment!==0)return new Error("")}function W1(t){const e=jd(t);if(e)return e;if(t.enableAutoSave)return new Error("Web")}function Ia(){return{}}var Pt=(t=>(t.INFO="info",t.WARN="warn",t.ERROR="error",t))(Pt||{});const G1={async getRecordPathFromProcArg(){return""},updateMenuState(){},async showOpenRecordDialog(){throw"Web"},async openRecord(){throw"Web"},async showSaveRecordDialog(){throw"Web"},async saveRecord(){throw"Web"},async showSelectFileDialog(){throw"Web"},async showSelectDirectoryDialog(){throw"Web"},async loadAppSetting(){const t=localStorage.getItem("appSetting");return t?JSON.stringify({...ka(),...JSON.parse(t)}):JSON.stringify(ka())},async saveAppSetting(t){localStorage.setItem("appSetting",t)},async loadResearchSetting(){const t=localStorage.getItem("researchSetting");return t?JSON.stringify({...Ia(),...JSON.parse(t)}):JSON.stringify(Ia())},async saveResearchSetting(t){localStorage.setItem("researchSetting",t)},async loadAnalysisSetting(){const t=localStorage.getItem("analysisSetting");return t?JSON.stringify({...Aa(),...JSON.parse(t)}):JSON.stringify(Aa())},async saveAnalysisSetting(t){localStorage.setItem("analysisSetting",t)},async loadGameSetting(){const t=localStorage.getItem("gameSetting");return t?JSON.stringify({...Yo(),...JSON.parse(t)}):JSON.stringify(Yo())},async saveGameSetting(t){localStorage.setItem("gameSetting",t)},async loadCSAGameSettingHistory(){throw"Web"},async saveCSAGameSettingHistory(t){localStorage.setItem("csaGameSettingHistory",t)},async loadUSIEngineSetting(){return new Ht().json},async saveUSIEngineSetting(){},async showSelectUSIEngineDialog(){throw"Web"},async getUSIEngineInfo(){throw"Web"},async sendUSISetOption(){},async usiLaunch(){throw"Web"},async usiGo(){},async usiGoPonder(){},async usiPonderHit(){},async usiGoInfinite(){},async usiStop(){},async usiGameover(){},async usiQuit(){},async csaLogin(){throw"Web"},async csaLogout(){},async csaAgree(){},async csaMove(){},async csaResign(){},async csaWin(){},async csaStop(){},async isEncryptionAvailable(){return!1},log(t,e){switch(t){case Pt.INFO:console.log(e);break;case Pt.WARN:console.warn(e);break;case Pt.ERROR:console.error(e);break}},onSendError(){},onMenuEvent(){},onUSIBestMove(){},onUSIInfo(){},onUSIPonderInfo(){},onCSAGameSummary(){},onCSAReject(){},onCSAStart(){},onCSAMove(){},onCSAGameResult(){},onCSAClose(){}};function wl(){return window}const V1=wl().electronShogi||{},Fe=wl().electronShogiAPI||G1,fe={...Fe,async loadAppSetting(){return JSON.parse(await Fe.loadAppSetting())},saveAppSetting(t){return Fe.saveAppSetting(JSON.stringify(t))},async loadResearchSetting(){return JSON.parse(await Fe.loadResearchSetting())},saveResearchSetting(t){return Fe.saveResearchSetting(JSON.stringify(t))},async loadAnalysisSetting(){return JSON.parse(await Fe.loadAnalysisSetting())},saveAnalysisSetting(t){return Fe.saveAnalysisSetting(JSON.stringify(t))},async loadGameSetting(){return JSON.parse(await Fe.loadGameSetting())},saveGameSetting(t){return Fe.saveGameSetting(JSON.stringify(t))},async loadCSAGameSettingHistory(){return JSON.parse(await Fe.loadCSAGameSettingHistory())},saveCSAGameSettingHistory(t){return Fe.saveCSAGameSettingHistory(JSON.stringify(t))},async loadUSIEngineSetting(){return new Ht(await Fe.loadUSIEngineSetting())},saveUSIEngineSetting(t){return Fe.saveUSIEngineSetting(t.json)},async getUSIEngineInfo(t,e){return JSON.parse(await Fe.getUSIEngineInfo(t,e))},usiLaunch(t,e){return Fe.usiLaunch(JSON.stringify(t),e)},usiGo(t,e,i,n,s){return Fe.usiGo(t,e,JSON.stringify(i),n,s)},usiGoPonder(t,e,i,n,s){return Fe.usiGoPonder(t,e,JSON.stringify(i),n,s)},csaLogin(t){return Fe.csaLogin(JSON.stringify(t))}};function Xo(){return!!wl().electronShogiAPI}function zd(t){const e=(t==null?void 0:t.type)||"sine",i=(t==null?void 0:t.frequency)||440,n=(t==null?void 0:t.volume)||2,s=new AudioContext,o=s.createOscillator(),r=s.createGain();return o.connect(r),r.connect(s.destination),o.type=e,o.frequency.value=i,r.gain.value=n*.005,o.onended=()=>{r.disconnect(s.destination),o.disconnect(r)},o.start(s.currentTime),t!=null&&t.time&&o.stop(s.currentTime+t.time),{stop:()=>{t!=null&&t.time||o.stop()}}}function j1(t){zd({type:"sine",frequency:t.frequency,time:.1,volume:t.volume})}function z1(t){return zd({type:"sine",frequency:t.frequency,volume:t.volume})}let Yr;function Jc(t){const e=Date.now();if(Yr&&e<Yr+200)return;const i=new Audio("sound/piece.mp3");i.volume=t*.01,i.play(),Yr=e}var Ri=(t=>(t.WIN="win",t.LOSE="lose",t.DRAW="draw",t))(Ri||{});class K1{constructor(){P(this,"searchHandler")}isEngine(){return!1}async startSearch(e,i,n,s,o){this.searchHandler=o}async startPonder(){}async stop(){}async gameover(){}async close(){this.searchHandler=void 0}doMove(e){const i=this.searchHandler;this.searchHandler=void 0,i&&i.onMove(e)}resign(){const e=this.searchHandler;this.searchHandler=void 0,e&&e.onResign()}win(){const e=this.searchHandler;this.searchHandler=void 0,e&&e.onWin()}}const Wn=new K1;var xo=(t=>(t.BLACK_PLAYER="blackPlayer",t.WHITE_PLAYER="whitePlayer",t.RESEARCHER="researcher",t))(xo||{});function q1(t,e){const i=[],n=t.clone();for(const s of e){const o=n.createMoveByUSI(s);if(!o||!n.doMove(o))break;i.push(o)}return i}class El{constructor(e,i,n){P(this,"sessionID",0);P(this,"usi");P(this,"position");P(this,"searchHandler");P(this,"ponder");P(this,"inPonder",!1);P(this,"info");P(this,"usiInfoTimeout");this.setting=e,this.timeoutSeconds=i,this.onSearchInfo=n}async launch(){this.sessionID=await fe.usiLaunch(this.setting,this.timeoutSeconds),Jo[this.sessionID]=this}isEngine(){return!0}async startSearch(e,i,n,s,o){this.searchHandler=o,this.usi=e.usi,this.position=e.position.clone(),this.inPonder&&this.ponder===this.usi?fe.usiPonderHit(this.sessionID):(this.info=void 0,await fe.usiGo(this.sessionID,this.usi,i,n,s)),this.inPonder=!1,this.ponder=void 0}async startPonder(e,i,n,s){const o=e.usi;if(!this.ponder||!this.ponder.startsWith(o)||Sn(this.setting.options[Ud])!=="true")return;this.searchHandler=void 0,this.usi=this.ponder,this.position=e.position.clone();const a=this.position.createMoveByUSI(this.ponder.slice(o.length+1));a&&(this.position.doMove(a),this.info=void 0,this.inPonder=!0,await fe.usiGoPonder(this.sessionID,this.ponder,i,n,s))}async startResearch(e){this.searchHandler=void 0,this.usi=e.usi,this.info=void 0,this.position=e.position.clone(),await fe.usiGoInfinite(this.sessionID,e.usi)}async stop(){await fe.usiStop(this.sessionID)}async gameover(e){await fe.usiGameover(this.sessionID,e)}async close(){this.searchHandler=void 0,await fe.usiQuit(this.sessionID),delete Jo[this.sessionID]}onBestMove(e,i,n){const s=this.searchHandler;if(this.searchHandler=void 0,!s||!this.position||e!==this.usi)return;if(i==="resign"){s.onResign();return}if(i==="win"){s.onWin();return}const o=this.position.createMoveByUSI(i);if(!o){s.onError(":"+i),s.onResign();return}if(this.ponder=n&&`${e} ${i} ${n}`,this.flushUSIInfo(),this.info&&this.info.pv&&this.info.pv.length>=1&&this.info.pv[0].equals(o)){const r={...this.info,pv:this.info.pv.slice(1)};s.onMove(o,r)}else s.onMove(o)}onUSIInfo(e,i){if(e!==this.usi||!this.position||i.multipv&&i.multipv!==1)return;const n=this.position.color===R.BLACK?1:-1,s=i.pv&&i.pv.length>=1?i.pv:i.currmove?[i.currmove]:void 0,o={usi:e,depth:i.depth,score:i.scoreCP&&i.scoreCP*n,mate:i.scoreMate&&i.scoreMate*n,pv:s&&q1(this.position,s)};this.updateUSIInfo(o)}updateUSIInfo(e){this.info=e,!this.usiInfoTimeout&&(this.usiInfoTimeout=window.setTimeout(()=>{this.flushUSIInfo()},500))}flushUSIInfo(){this.usiInfoTimeout&&(clearTimeout(this.usiInfoTimeout),this.usiInfoTimeout=void 0),this.onSearchInfo&&this.info&&this.onSearchInfo(this.info)}}const Jo={};function Y1(t,e,i,n){const s=Jo[t];s&&s.onBestMove(e,i,n)}function Zc(t,e,i){const n=Jo[t];n&&n.onUSIInfo(e,i)}function Zo(t){return{async build(e,i){if(e.uri===Ft)return Wn;if(Gi(e.uri)&&e.usi){const n=new El(e.usi,t??10,i);return await n.launch(),n}throw new Error("defaultPlayerBuilder#build: URI: "+e.uri)}}}function Qc(t,e){return{player1:{name:t,win:0},player2:{name:e,win:0},draw:0,invalid:0,total:0}}class X1{constructor(e,i,n,s){P(this,"state");P(this,"_setting");P(this,"startPly",0);P(this,"repeat",0);P(this,"blackPlayer");P(this,"whitePlayer");P(this,"playerBuilder",Zo());P(this,"gameResults",Qc("",""));P(this,"lastEventID");this.recordManager=e,this.blackClock=i,this.whiteClock=n,this.handlers=s,this.state="idle",this._setting=Yo(),this.lastEventID=0}get setting(){return this._setting}async startGame(e,i){if(this.state!=="idle")throw Error("GameManager#startGame: ");this._setting=e,this.playerBuilder=i,this.repeat=0,e.startPosition||(this.startPly=this.recordManager.record.current.number),this.gameResults=Qc(e.black.name,e.white.name),await this.nextGame()}async nextGame(){this.repeat++,this.setting.startPosition?this.recordManager.reset(this.setting.startPosition):this.recordManager.record.current.number!==this.startPly&&(this.recordManager.changePly(this.startPly),this.recordManager.removeNextMove()),this.recordManager.setGameStartMetadata({gameTitle:this.setting.repeat>=2?` ${this.repeat}/${this.setting.repeat}`:void 0,blackName:this.setting.black.name,whiteName:this.setting.white.name,timeLimit:this.setting.timeLimit});const e={timeMs:this.setting.timeLimit.timeSeconds*1e3,byoyomi:this.setting.timeLimit.byoyomi,increment:this.setting.timeLimit.increment,onBeepShort:()=>this.handlers.onBeepShort(),onBeepUnlimited:()=>this.handlers.onBeepUnlimited(),onStopBeep:()=>this.handlers.onStopBeep()};this.blackClock.setup({...e,onTimeout:()=>{this.timeout(R.BLACK)}}),this.whiteClock.setup({...e,onTimeout:()=>{this.timeout(R.WHITE)}});try{this.blackPlayer=await this.playerBuilder.build(this.setting.black,i=>this.recordManager.updateEnemySearchInfo(i)),this.whitePlayer=await this.playerBuilder.build(this.setting.white,i=>this.recordManager.updateEnemySearchInfo(i))}catch(i){try{await this.closePlayers()}catch(n){this.handlers.onError(n)}throw i}this.state="active",this.handlers.onGameNext(),setTimeout(()=>this.nextMove())}nextMove(){if(this.state!=="active"){this.handlers.onError("GameManager#nextMove: :"+this.state);return}if(this._setting.maxMoves&&this.recordManager.record.current.number>=this._setting.maxMoves){this.endGame(ne.IMPASS);return}const e=this.recordManager.record.position.color;this.getActiveClock().start();const i=this.getPlayer(e),n=this.getPlayer(Mt(e));if(!i||!n){this.handlers.onError("GameManager#nextMove: ");return}const s=this.issueEventID();i.startSearch(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs,{onMove:(o,r)=>this.onMove(s,o,r),onResign:()=>this.onResign(s),onWin:()=>this.onWin(s),onError:o=>this.handlers.onError(o)}).catch(o=>{this.handlers.onError(new Error("GameManager#nextMove: : "+o))}),n.startPonder(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs).catch(o=>{this.handlers.onError(new Error("GameManager#nextMove: Ponder: "+o))})}onMove(e,i,n){if(e!==this.lastEventID){fe.log(Pt.ERROR,"GameManager#onMove: event ID already disabled");return}if(this.state!=="active"){fe.log(Pt.ERROR,"GameManager#onMove: invalid state: "+this.state);return}if(!this.recordManager.record.position.isValidMove(i)){this.handlers.onError(": "+i.getDisplayText()),this.endGame(ne.FOUL_LOSE);return}if(this.getActiveClock().stop(),this.recordManager.appendMove({move:i,moveOption:{ignoreValidation:!0},elapsedMs:this.getActiveClock().elapsedMs}),n&&this.recordManager.updateSearchInfo(nn.PLAYER,n),n&&this.setting.enableComment){const o=vl(nn.PLAYER,n);this.recordManager.appendComment(o,es.APPEND)}this.handlers.onPieceBeat();const s=this.recordManager.record.perpetualCheck;if(s)if(s===this.recordManager.record.position.color){this.endGame(ne.FOUL_LOSE);return}else{this.endGame(ne.FOUL_WIN);return}else if(this.recordManager.record.repetition){this.endGame(ne.REPETITION_DRAW);return}this.nextMove()}onResign(e){if(e!==this.lastEventID){fe.log(Pt.ERROR,"GameManager#onResign: event ID already disabled");return}if(this.state!=="active"){fe.log(Pt.ERROR,"GameManager#onResign: invalid state: "+this.state);return}this.endGame(ne.RESIGN)}onWin(e){if(e!==this.lastEventID){fe.log(Pt.ERROR,"GameManager#onWin: event ID already disabled");return}if(this.state!=="active"){fe.log(Pt.ERROR,"GameManager#onWin: invalid state: "+this.state);return}this.endGame(ne.ENTERING_OF_KING)}onTimeout(){if(this.state!=="active"){this.handlers.onError("GameManager#onTimeout: : "+this.state);return}this.endGame(ne.TIMEOUT)}timeout(e){this.handlers.onStopBeep();const i=this.getPlayer(e);if(i&&i.isEngine()&&!this.setting.enableEngineTimeout){i.stop().catch(n=>{this.handlers.onError(new Error("GameManager#timeout: : "+n))});return}this.onTimeout()}endGame(e){if(this.state!=="active"&&this.state!=="pending")return;this.state="bussy";const i=this.recordManager.record.position.color;Promise.resolve().then(()=>this.sendGameResults(i,e)).then(()=>this.closePlayers()).then(()=>{if(this.getActiveClock().pause(),this.recordManager.appendMove({move:e,elapsedMs:this.getActiveClock().elapsedMs}),this.recordManager.setGameEndMetadata(),this.updateGameResults(i,e),this.state="idle",this._setting.enableAutoSave&&this.handlers.onSaveRecord().catch(s=>{this.handlers.onError(`: ${s}`)}),e===ne.INTERRUPT||this.repeat>=this.setting.repeat){this.handlers.onGameEnd(this.gameResults,e);return}this.setting.swapPlayers&&this.swapPlayers(),this.nextGame().catch(s=>{this.handlers.onError(s)})}).catch(n=>{this.handlers.onError(n),this.state="pending"})}updateGameResults(e,i){switch(Xr(e,R.BLACK,i)){case Ri.WIN:this.gameResults.player1.win++;break;case Ri.LOSE:this.gameResults.player2.win++;break;case Ri.DRAW:this.gameResults.draw++;break;default:this.gameResults.invalid++;break}this.gameResults.total++}swapPlayers(){this._setting={...this.setting,black:this.setting.white,white:this.setting.black},this.gameResults={...this.gameResults,player1:this.gameResults.player2,player2:this.gameResults.player1}}async sendGameResults(e,i){if(this.blackPlayer){const n=Xr(e,R.BLACK,i);n&&await this.blackPlayer.gameover(n)}if(this.whitePlayer){const n=Xr(e,R.WHITE,i);n&&await this.whitePlayer.gameover(n)}}async closePlayers(){this.blackPlayer&&(await this.blackPlayer.close(),this.blackPlayer=void 0),this.whitePlayer&&(await this.whitePlayer.close(),this.whitePlayer=void 0)}getPlayer(e){switch(e){case R.BLACK:return this.blackPlayer;case R.WHITE:return this.whitePlayer}}getActiveClock(){switch(this.recordManager.record.position.color){case R.BLACK:return this.blackClock;case R.WHITE:return this.whiteClock}}issueEventID(){return this.lastEventID+=1,this.lastEventID}}function Xr(t,e,i){switch(i){case ne.FOUL_WIN:case ne.ENTERING_OF_KING:return t==e?Ri.WIN:Ri.LOSE;case ne.RESIGN:case ne.MATE:case ne.TIMEOUT:case ne.FOUL_LOSE:return t==e?Ri.LOSE:Ri.WIN;case ne.IMPASS:case ne.REPETITION_DRAW:return Ri.DRAW}return null}function eu(t){let e=J1(t);const i=t.getStandardMetadata(re.TITLE)||t.getStandardMetadata(re.TOURNAMENT)||t.getStandardMetadata(re.OPUS_NAME)||t.getStandardMetadata(re.OPUS_NO)||t.getStandardMetadata(re.PLACE)||t.getStandardMetadata(re.POSTED_ON)||t.getStandardMetadata(re.AUTHOR);i&&(e+="_"+i);const n=t.getStandardMetadata(re.BLACK_NAME)||t.getStandardMetadata(re.BLACK_SHORT_NAME);n&&(e+="_"+n);const s=t.getStandardMetadata(re.WHITE_NAME)||t.getStandardMetadata(re.WHITE_SHORT_NAME);return s&&(e+="_"+s),e.trim().replaceAll("/","_").replaceAll("\\","_")+".kif"}function J1(t){const e=t.getStandardMetadata(re.START_DATETIME)||t.getStandardMetadata(re.DATE);return e?e.trim().replaceAll(" ","_").replaceAll("/","").replaceAll(":",""):Wd().replaceAll("/","")}class Z1{constructor(){P(this,"count",0)}get isBussy(){return this.count!==0}retain(){this.count+=1}release(){this.count-=1}}function Q1(t,e){const i=t.clone();let n,s="";for(const o of e){const r=i.createMoveByUSI(o);if(!r)break;i.doMove(r,{ignoreValidation:!0}),s+=r.getDisplayText({prev:n}),n=r}return s}class ko{constructor(e,i,n){P(this,"nodes");P(this,"nps");P(this,"iterates",[]);P(this,"hashfull");P(this,"currentMove");P(this,"currentMoveText");P(this,"ponderMove");this.sessionID=e,this.name=i,this.sfen=n}get latestIteration(){const e=[],i=new Set,n=new Set;for(const s of this.iterates){const o=s.pv?s.pv[0]:void 0;!i.has(s.multiPV)&&!n.has(o)&&(e.push(s),i.add(s.multiPV),n.add(o))}return e.sort((s,o)=>(s.multiPV||1)-(o.multiPV||1))}update(e,i,n){const s=Bt.newBySFEN(e),o={position:e};if(i.depth!==void 0&&(o.depth=i.depth),i.seldepth!==void 0&&(o.selectiveDepth=i.seldepth),i.timeMs!==void 0&&(o.timeMs=i.timeMs),i.nodes!==void 0&&(this.nodes=i.nodes),i.pv&&(o.pv=i.pv,o.text=s?Q1(s,i.pv):""),i.multipv!==void 0&&(o.multiPV=i.multipv),i.scoreCP!==void 0&&(o.score=i.scoreCP),i.scoreMate!==void 0&&(o.scoreMate=i.scoreMate),i.lowerbound!==void 0&&(o.lowerBound=i.lowerbound),i.upperbound!==void 0&&(o.upperBound=i.upperbound),i.currmove!==void 0){this.currentMove=i.currmove;const r=s&&s.createMoveByUSI(i.currmove);r&&(this.currentMoveText=r.getDisplayText())}i.hashfullPerMill!==void 0&&(this.hashfull=i.hashfullPerMill/1e3),i.nps!==void 0&&(this.nps=i.nps),i.string&&(o.text=i.string),Object.keys(o).length!==0&&(i.nodes!==void 0&&(o.nodes=i.nodes),this.iterates.unshift(o)),this.ponderMove=n==null?void 0:n.getDisplayText()}}class e_{constructor(){P(this,"_blackPlayer");P(this,"_whitePlayer");P(this,"_researcher");P(this,"updateQueue",[]);P(this,"timeoutHandle")}get blackPlayer(){return this._blackPlayer}get whitePlayer(){return this._whitePlayer}get researcher(){return this._researcher}clear(){this._blackPlayer=void 0,this._whitePlayer=void 0,this._researcher=void 0,this.updateQueue=[]}update(e,i,n,s,o,r){this.updateQueue.push({sessionID:e,sfen:i.sfen,sender:n,name:s,info:o,ponderMove:r}),this.timeoutHandle||(this.timeoutHandle=window.setTimeout(()=>{this.dequeue()},500))}dequeue(){for(const e of this.updateQueue)this._update(e);this.updateQueue=[],this.timeoutHandle=void 0}_update(e){switch(e.sender){case xo.BLACK_PLAYER:(!this._blackPlayer||this._blackPlayer.sessionID!==e.sessionID||this._blackPlayer.sfen!==e.sfen)&&(this._blackPlayer=new ko(e.sessionID,e.name,e.sfen)),this._blackPlayer.update(e.sfen,e.info,e.ponderMove),this._researcher=void 0;break;case xo.WHITE_PLAYER:(!this._whitePlayer||this._whitePlayer.sessionID!==e.sessionID||this._whitePlayer.sfen!==e.sfen)&&(this._whitePlayer=new ko(e.sessionID,e.name,e.sfen)),this._whitePlayer.update(e.sfen,e.info,e.ponderMove),this._researcher=void 0;break;case xo.RESEARCHER:(!this._researcher||this._researcher.sessionID!==e.sessionID||this._researcher.sfen!==e.sfen)&&(this._researcher=new ko(e.sessionID,e.name,e.sfen)),this._researcher.update(e.sfen,e.info),this._blackPlayer=void 0,this._whitePlayer=void 0;break}}}var G=(t=>(t.NORMAL="normal",t.PASTE_DIALOG="pasteDialog",t.POSITION_EDITING="positionEditing",t.GAME_DIALOG="gameDialog",t.GAME="game",t.CSA_GAME_DIALOG="csaGameDialog",t.CSA_GAME="csaGame",t.RESEARCH="research",t.RESEARCH_DIALOG="researchDialog",t.ANALYSIS="analysis",t.ANALYSIS_DIALOG="analysisDialog",t.USI_ENGINE_SETTING_DIALOG="usiEngineSettingDialog",t.TEMPORARY="temporary",t))(G||{});class t_{constructor(){P(this,"_queue",[])}get message(){return this._queue[0]}get hasMessage(){return this._queue.length!==0}enqueue(e){this._queue.push(e)}dequeue(){this._queue.shift()}}class i_{constructor(){P(this,"_queue",[])}get errors(){return this._queue}get hasError(){return this._queue.length!==0}push(e){e instanceof Error?this._queue.push(e):this._queue.push(new Error(""+e))}clear(){this._queue=[]}}class n_{constructor(e,i,n,s){P(this,"researcher");P(this,"number");P(this,"actualMove");P(this,"color",R.BLACK);P(this,"lastSearchInfo");P(this,"searchInfo");P(this,"timerHandle");if(this.recordManager=e,this._setting=i,this.appSetting=n,this.handler=s,!i.usi)throw new Error("")}get setting(){return this._setting}async start(){await this.setupEngine(this.setting.usi),setTimeout(()=>this.next())}close(){this.clearTimer(),this.closeEngine().catch(e=>{this.handler.onError(e)})}async setupEngine(e){await this.closeEngine();const i=new El(e,this.appSetting.engineTimeoutSeconds,this.updateSearchInfo.bind(this));await i.launch(),this.researcher=i}next(){if(!this.researcher){this.handler.onError(new Error("")),this.finish();return}if(this.clearTimer(),this.actualMove=void 0,this.lastSearchInfo=this.searchInfo,this.searchInfo=void 0,this.number=this.number!==void 0?this.number+1:this.setting.startCriteria.enableNumber?this.setting.startCriteria.number-1:0,this.setting.endCriteria.enableNumber&&this.number>=this.setting.endCriteria.number){this.finish();return}this.recordManager.changePly(this.number);const e=this.recordManager.record;if(e.current.number!==this.number){this.finish();return}if(!e.current.next&&!(e.current.move instanceof st)){this.finish();return}this.actualMove=e.current.move instanceof st?e.current.move:void 0,this.color=Mt(e.position.color),this.timerHandle=window.setTimeout(()=>{this.onResult(),this.next()},this.setting.perMoveCriteria.maxSeconds*1e3),this.researcher.startResearch(e).catch(i=>{this.handler.onError(i)})}finish(){this.handler.onFinish(),this.close()}clearTimer(){this.timerHandle&&(clearTimeout(this.timerHandle),this.timerHandle=void 0)}onResult(){if(!this.searchInfo||!this.lastSearchInfo)return;const e=this.color===R.BLACK?1:-1,i=this.searchInfo.score!==void 0?this.searchInfo.score*e:void 0,n=this.searchInfo.score!==void 0&&this.lastSearchInfo.score!==void 0?(this.searchInfo.score-this.lastSearchInfo.score)*e:void 0,s=this.actualMove&&this.lastSearchInfo.pv?this.actualMove.equals(this.lastSearchInfo.pv[0]):void 0;let o="";if(n!==void 0&&i!==void 0&&!s){const r=s_(i-n,i,this.appSetting);r&&(o+=`${r}
`)}o+=vl(nn.RESEARCHER,this.searchInfo),this.recordManager.appendComment(o,this.setting.commentBehavior)}async closeEngine(){this.researcher&&(this.researcher.close(),this.researcher=void 0)}updateSearchInfo(e){this.recordManager.updateSearchInfo(nn.RESEARCHER,e),this.searchInfo=e}}function s_(t,e,i){const n=Ea(t,i.coefficientInSigmoid)-Ea(e,i.coefficientInSigmoid);return n>=i.badMoveLevelThreshold4?"":n>=i.badMoveLevelThreshold3?"":n>=i.badMoveLevelThreshold2?"":n>=i.badMoveLevelThreshold1?"":null}function o_(){return{id:"",myColor:R.BLACK,toMove:R.BLACK,position:"",timeUnitMs:1e3,totalTime:0,byoyomi:0,delay:0,increment:0}}var Ci=(t=>(t.UNKNOWN="unknown",t.RESIGN="resign",t.SENNICHITE="sennichite",t.OUTE_SENNICHITE="oute_sennichite",t.ILLEGAL_MOVE="illegal_move",t.ILLEGAL_ACTION="illegal_action",t.TIME_UP="time_up",t.JISHOGI="jishogi",t.MAX_MOVES="max_moves",t))(Ci||{}),Io=(t=>(t.WIN="win",t.LOSE="lose",t.DRAW="draw",t.CENSORED="censored",t.CHUDAN="chudan",t))(Io||{}),Os=(t=>(t.V121="v121",t.V121_FLOODGATE="v121_floodgate",t))(Os||{});function Kd(){return{protocolVersion:"v121",host:"localhost",port:4081,id:"",password:""}}function r_(){return{player:{name:"",uri:Ft},server:Kd(),autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function a_(t){if(t.server.protocolVersion!=="v121"&&t.server.protocolVersion!=="v121_floodgate")return new Error("");if(t.server.host==="")return new Error("");if(t.server.port<0||t.server.port>65535)return new Error("");if(t.server.id==="")return new Error("ID")}function l_(){return{player:{name:"",uri:Ft},serverHistory:[],autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function c_(t,e){var i;return{player:t.player,server:((i=t.serverHistory)==null?void 0:i.length)>e?t.serverHistory[e]:Kd(),autoFlip:t.autoFlip,enableComment:t.enableComment,enableAutoSave:t.enableAutoSave,repeat:t.repeat,autoRelogin:t.autoRelogin}}const qd=10;function u_(t,e){const i=[e.server];for(const n of t.serverHistory)if((n.protocolVersion!==e.server.protocolVersion||n.host!==e.server.host||n.port!==e.server.port||n.id!==e.server.id||n.password!==e.server.password)&&i.push(n),i.length===qd)break;return{player:e.player,serverHistory:i,autoFlip:e.autoFlip,enableComment:e.enableComment,enableAutoSave:e.enableAutoSave,repeat:e.repeat,autoRelogin:e.autoRelogin}}var xr=(t=>(t[t.OFFLINE=0]="OFFLINE",t[t.WAITING_LOGIN=1]="WAITING_LOGIN",t[t.READY=2]="READY",t[t.GAME=3]="GAME",t))(xr||{});class h_{constructor(e,i,n,s){P(this,"_state",0);P(this,"_setting",r_());P(this,"sessionID",0);P(this,"stopRequested",!1);P(this,"repeat",0);P(this,"player");P(this,"gameSummary",o_());P(this,"searchInfo");P(this,"playerBuilder",Zo());this.recordManager=e,this.blackClock=i,this.whiteClock=n,this.handlers=s}get state(){return this._state}get setting(){return this._setting}get isMyTurn(){return this.recordManager.record.position.color===this.gameSummary.myColor}login(e,i){if(this.sessionID)throw new Error("CSAGameManager#start: session already exists");return this._setting=e,this.playerBuilder=i,this.repeat=0,this.relogin()}async relogin(){this._state=1;try{this.player=await this.playerBuilder.build(this._setting.player,e=>this.recordManager.updateEnemySearchInfo(e)),this.sessionID=await fe.csaLogin(this._setting.server),this._state=2,d_(this.sessionID,this),this.handlers.onGameNext()}catch(e){throw this.close(!0),e}}stop(){this.sessionID&&(this.stopRequested=!0,fe.csaStop(this.sessionID))}logout(){this.close(!0)}close(e){if(this._state!==0){if(this.stopRequested&&(e=!0),this.sessionID&&(f_(this.sessionID),fe.csaLogout(this.sessionID).catch(i=>{this.handlers.onError(i)}),this.sessionID=0,this.stopRequested=!1),this.player&&(this.player.close().catch(i=>{this.handlers.onError(i)}),this.player=void 0),this.blackClock.stop(),this.whiteClock.stop(),this._state=0,e||this.repeat>=this.setting.repeat){this.handlers.onGameEnd();return}this.relogin().catch(i=>{this.handlers.onError(i)})}}onGameSummary(e){this.gameSummary=e,fe.csaAgree(this.sessionID,this.gameSummary.id)}onReject(){this.close()}onStart(e){this.repeat++,this.recordManager.importRecord(this.gameSummary.position,On.CSA),this.recordManager.setGameStartMetadata({gameTitle:this.gameSummary.id,blackName:this.gameSummary.blackPlayerName,whiteName:this.gameSummary.whitePlayerName,timeLimit:{timeSeconds:this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,increment:this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3}}),this.setting.autoFlip&&this.handlers.onFlipBoard&&this.handlers.onFlipBoard(this.gameSummary.myColor===R.WHITE),this._state=3,this.next(e)}onMove(e,i){const n=this.isMyTurn,s=ym(this.recordManager.record.position,e);if(s instanceof Error){this.handlers.onError(`CSAGameManager#onMove:  [${e}]: ${s.message}`);return}const o=/^.*,T([0-9]+)$/.exec(e),r=o?Number(parseInt(o[1]))*this.gameSummary.timeUnitMs:0;if(this.recordManager.appendMove({move:s,moveOption:{ignoreValidation:!0},elapsedMs:r}),n&&this.searchInfo&&this.recordManager.updateSearchInfo(nn.PLAYER,this.searchInfo),n&&this.searchInfo&&this.setting.enableComment){const a=vl(nn.PLAYER,this.searchInfo);this.recordManager.appendComment(a,es.APPEND)}this.handlers.onPieceBeat(),this.next(i)}onGameResult(e,i){this.recordManager.appendMove({move:this.gameResultToSpecialMove(e,i)}),this.setting.enableAutoSave&&this.handlers.onSaveRecord().catch(n=>{this.handlers.onError(`: ${n}`)}),this.close()}gameResultToSpecialMove(e,i){const n=this.recordManager.record.position.color;switch(e){case Ci.RESIGN:return ne.RESIGN;case Ci.SENNICHITE:return ne.REPETITION_DRAW;case Ci.OUTE_SENNICHITE:case Ci.ILLEGAL_MOVE:case Ci.ILLEGAL_ACTION:switch(i){case Io.WIN:return n===this.gameSummary.myColor?ne.FOUL_WIN:ne.FOUL_LOSE;case Io.LOSE:return n===this.gameSummary.myColor?ne.FOUL_LOSE:ne.FOUL_WIN}break;case Ci.TIME_UP:return ne.TIMEOUT;case Ci.JISHOGI:return ne.ENTERING_OF_KING;case Ci.MAX_MOVES:return ne.IMPASS}return i===Io.DRAW?ne.DRAW:ne.INTERRUPT}onClose(){this.close(!this.setting.autoRelogin)}next(e){this.blackClock.stop(),this.whiteClock.stop();const i={byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,onBeepShort:()=>this.handlers.onBeepShort(),onBeepUnlimited:()=>this.handlers.onBeepUnlimited(),onStopBeep:()=>this.handlers.onStopBeep()};this.blackClock.setup({...i,timeMs:e.black.time*this.gameSummary.timeUnitMs}),this.whiteClock.setup({...i,timeMs:e.white.time*this.gameSummary.timeUnitMs});const n=this.recordManager.record.position.color;if(n===R.BLACK?this.blackClock.start():this.whiteClock.start(),!this.player){this.handlers.onError("CSA ");return}const s={timeSeconds:this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,increment:this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3};n===this.gameSummary.myColor?this.player.startSearch(this.recordManager.record,s,e.black.time*this.gameSummary.timeUnitMs,e.white.time*this.gameSummary.timeUnitMs,{onMove:this.onPlayerMove.bind(this),onResign:this.onPlayerResign.bind(this),onWin:this.onPlayerWin.bind(this),onError:this.onPlayerError.bind(this)}).catch(o=>{this.handlers.onError(new Error("CSAGameManager#next: : "+o))}):this.player.startPonder(this.recordManager.record,s,this.blackClock.timeMs,this.whiteClock.timeMs).catch(o=>{this.handlers.onError(new Error("CSAGameManager#next: Ponder: "+o))})}onPlayerMove(e,i){this.searchInfo=i;let n,s;switch(this._setting.server.protocolVersion){case Os.V121:break;case Os.V121_FLOODGATE:if(n=i==null?void 0:i.score,i!=null&&i.pv)for(const o of i.pv)s=s?s+" ":"",s+=Tc(o);break}fe.csaMove(this.sessionID,Tc(e),n,s)}onPlayerResign(){fe.csaResign(this.sessionID)}onPlayerWin(){fe.csaWin(this.sessionID)}onPlayerError(e){this.handlers.onError(e)}}const an={};function d_(t,e){an[t]=e}function f_(t){delete an[t]}function p_(t,e){const i=an[t];i&&i.onGameSummary(e)}function g_(t){const e=an[t];e&&e.onReject()}function m_(t,e){const i=an[t];i&&i.onStart(e)}function __(t,e,i){const n=an[t];n&&n.onMove(e,i)}function b_(t,e,i){const n=an[t];n&&n.onGameResult(e,i)}function y_(t){const e=an[t];e&&e.onClose()}class tu{constructor(){P(this,"setting",{timeMs:0,byoyomi:0,increment:0});P(this,"_timeMs",0);P(this,"_byoyomi",0);P(this,"_elapsedMs",0);P(this,"timerHandle",0);P(this,"timerStart",0);P(this,"lastTimeMs",0)}setup(e){this.setting=e,this._timeMs=e.timeMs||0,this._byoyomi=e.byoyomi||0,this._elapsedMs=0}get time(){return Math.ceil(this._timeMs/1e3)}get timeMs(){return this._timeMs}get byoyomi(){return this._byoyomi}get elapsedMs(){return this._elapsedMs}start(){this.clearTimer(),this.timerStart=Date.now(),this.lastTimeMs=this._timeMs,this._byoyomi=this.setting.byoyomi||0,this._elapsedMs=0,this.timerHandle=window.setInterval(()=>{const e=this.timeMs,i=this.byoyomi;this._elapsedMs=Date.now()-this.timerStart;const n=this.lastTimeMs-this._elapsedMs;if(n>=0?this._timeMs=n:(this._timeMs=0,this._byoyomi=Math.max(Math.ceil((this.setting.byoyomi||0)+n/1e3),0)),this.timeMs===0&&this.byoyomi===0){this.timeout();return}this.fireBeep(e,i)},100)}fireBeep(e,i){let n=Math.ceil(this.timeMs/1e3),s=Math.ceil(e/1e3);if(!(n!==0&&this.byoyomi!==0)){if(n===0&&s!==0){this.setting.onBeepShort&&this.setting.onBeepShort();return}this.byoyomi!==0&&(n=this.byoyomi,s=i),n!==s&&(n<=5?this.setting.onBeepUnlimited&&this.setting.onBeepUnlimited():(n<=10||n===20||n===30||n===60)&&this.setting.onBeepShort&&this.setting.onBeepShort())}}pause(){this.clearTimer()}stop(){this.clearTimer(),this.incrementTime()}timeout(){this.clearTimer(),this.setting.onTimeout&&this.setting.onTimeout()}clearTimer(){this.timerHandle&&(window.clearInterval(this.timerHandle),this.timerHandle=0),this.setting.onStopBeep&&this.setting.onStopBeep()}incrementTime(){this._timeMs+=(this.setting.increment||0)*1e3}}class v_{constructor(){P(this,"_bussy",new Z1);P(this,"_message",new t_);P(this,"_error",new i_);P(this,"recordManager",new H1);P(this,"_appSetting",ka());P(this,"_appState",G.NORMAL);P(this,"lastAppState");P(this,"_isAppSettingDialogVisible",!1);P(this,"_confirmation");P(this,"usiMonitor",new e_);P(this,"blackClock",new tu);P(this,"whiteClock",new tu);P(this,"gameManager",new X1(this.recordManager,this.blackClock,this.whiteClock,this));P(this,"csaGameManager",new h_(this.recordManager,this.blackClock,this.whiteClock,this));P(this,"researcher");P(this,"analysisManager");P(this,"unlimitedBeepHandler");this.updateAppTitle(),this.recordManager.on("changeFilePath",e=>{this.updateAppTitle(e)}),this.recordManager.on("changePosition",()=>{this.onUpdatePosition()})}updateAppTitle(e){if(!document)return;const i="Electron",n=V1.appVersion;e?document.title=`${i} Version ${n} - ${e}`:document.title=`${i} Version ${n}`}get isBussy(){return this._bussy.isBussy}retainBussyState(){return this._bussy.retain()}releaseBussyState(){return this._bussy.release()}get message(){return this._message.message}get hasMessage(){return this._message.hasMessage}enqueueMessage(e){this._message.enqueue(e)}dequeueMessage(){this._message.dequeue()}get errors(){return this._error.errors}get hasError(){return this._error.hasError}pushError(e){fe.log(Pt.ERROR,Td(e)),this._error.push(e)}clearErrors(){this._error.clear()}get record(){return this.recordManager.record}get recordFilePath(){return this.recordManager.recordFilePath}updateStandardRecordMetadata(e){this.recordManager.updateStandardMetadata(e)}get appSetting(){return this._appSetting}async updateAppSetting(e){const i={...this.appSetting,...e},n=U1(i);if(n)throw n;await fe.saveAppSetting(i),this._appSetting=i}flipBoard(){this._appSetting.boardFlipping=!this.appSetting.boardFlipping,fe.saveAppSetting(this.appSetting)}get appState(){return this._appState}get confirmation(){var e;return(e=this._confirmation)==null?void 0:e.message}showConfirmation(e){if(this.appState==G.TEMPORARY){fe.log(Pt.ERROR,`Store#showConfirmation:  lastAppState=${this.lastAppState}`+(this._confirmation?` currentMessage=${this._confirmation.message}`:"")+` newMessage=${e.message}`),e.onCancel&&e.onCancel();return}this._confirmation=e,this.lastAppState=this.appState,this._appState=G.TEMPORARY}confirmationOk(){var i;const e=(i=this._confirmation)==null?void 0:i.onOk;this._confirmation=void 0,this.lastAppState&&(this._appState=this.lastAppState,this.lastAppState=void 0),e&&e()}confirmationCancel(){var i;const e=(i=this._confirmation)==null?void 0:i.onCancel;this._confirmation=void 0,this.lastAppState&&(this._appState=this.lastAppState,this.lastAppState=void 0),e&&e()}showPasteDialog(){this.appState===G.NORMAL&&(this._appState=G.PASTE_DIALOG)}showGameDialog(){this.appState===G.NORMAL&&(this._appState=G.GAME_DIALOG)}showCSAGameDialog(){this.appState===G.NORMAL&&(this._appState=G.CSA_GAME_DIALOG)}showResearchDialog(){this.appState===G.NORMAL&&(this._appState=G.RESEARCH_DIALOG)}showAnalysisDialog(){this.appState===G.NORMAL&&(this._appState=G.ANALYSIS_DIALOG)}showUsiEngineManagementDialog(){this.appState===G.NORMAL&&(this._appState=G.USI_ENGINE_SETTING_DIALOG)}destroyModalDialog(){(this.appState===G.PASTE_DIALOG||this.appState===G.GAME_DIALOG||this.appState===G.CSA_GAME_DIALOG||this.appState===G.RESEARCH_DIALOG||this.appState===G.ANALYSIS_DIALOG||this.appState===G.USI_ENGINE_SETTING_DIALOG)&&(this._appState=G.NORMAL)}closeModalDialog(){this.isBussy||this.destroyModalDialog()}get isAppSettingDialogVisible(){return this._isAppSettingDialogVisible}showAppSettingDialog(){this._isAppSettingDialogVisible=!0}closeAppSettingDialog(){this._isAppSettingDialogVisible=!1}get usiBlackPlayerMonitor(){return this.usiMonitor.blackPlayer}get usiWhitePlayerMonitor(){return this.usiMonitor.whitePlayer}get usiResearcherMonitor(){return this.usiMonitor.researcher}updateUSIInfo(e,i,n,s,o){this.recordManager.record.usi===i&&this.usiMonitor.update(e,this.recordManager.record.position,n,s,o)}updateUSIPonderInfo(e,i,n,s,o){const r=At.newByUSI(i);if(r instanceof Error){fe.log(Pt.ERROR,`invalid USI: ${i} (updateUSIPonderInfo)`);return}const a=r.current.move;a instanceof st&&this.usiMonitor.update(e,r.position,n,s,o,a)}get blackTime(){return this.blackClock.time}get blackByoyomi(){return this.blackClock.byoyomi}get whiteTime(){return this.whiteClock.time}get whiteByoyomi(){return this.whiteClock.byoyomi}startGame(e){this.appState!==G.GAME_DIALOG||this.isBussy||(this.retainBussyState(),fe.saveGameSetting(e).then(()=>{this.initializeDisplaySettingForGame(e);const i=Zo(this.appSetting.engineTimeoutSeconds);return this.gameManager.startGame(e,i)}).then(()=>this._appState=G.GAME).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}get csaGameState(){return this.csaGameManager.state}loginCSAGame(e,i){this.appState!==G.CSA_GAME_DIALOG||this.isBussy||(this.retainBussyState(),Promise.resolve().then(async()=>{if(i.saveHistory){const n=await fe.loadCSAGameSettingHistory(),s=u_(n,e);await fe.saveCSAGameSettingHistory(s)}}).then(()=>{const n=Zo(this.appSetting.engineTimeoutSeconds);return this.csaGameManager.login(e,n)}).then(()=>this._appState=G.CSA_GAME).catch(n=>{this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()}))}logoutCSAGame(){if(this.appState===G.CSA_GAME){if(this.csaGameManager.state===xr.GAME){this.pushError("");return}this.csaGameManager.logout(),this._appState=G.NORMAL}}initializeDisplaySettingForGame(e){if(e.humanIsFront){let i=this.appSetting.boardFlipping;e.black.uri===Ft&&e.white.uri!==Ft?i=!1:e.black.uri!==Ft&&e.white.uri===Ft&&(i=!0),i!==this.appSetting.boardFlipping&&this.flipBoard()}}stopGame(){this.appState===G.GAME?this.gameManager.endGame(ne.INTERRUPT):this.appState===G.CSA_GAME&&this.showConfirmation({message:"",onOk:()=>{this.csaGameManager.stop()}})}onGameNext(){this.usiMonitor.clear()}onGameEnd(e,i){if(this.appState===G.TEMPORARY&&this._confirmation&&this.confirmationCancel(),!(this.appState!==G.GAME&&this.appState!==G.CSA_GAME)){if(e&&e.total>=2){const n=e.total-e.invalid;this.enqueueMessage({text:"",attachments:[{type:"list",items:[{text:e.player1.name,children:[`: ${e.player1.win}`,`: ${Sc(e.player1.win,n,1)}`]},{text:e.player2.name,children:[`: ${e.player2.win}`,`: ${Sc(e.player2.win,n,1)}`]},{text:`: ${e.draw}`},{text:`: ${n}`},{text:`: ${e.invalid}`}]}]})}else i&&this.enqueueMessage({text:`${Pd(i)})`});this._appState=G.NORMAL}}onFlipBoard(e){this._appSetting.boardFlipping!==e&&this.flipBoard()}onSaveRecord(){const e=eu(this.recordManager.record.metadata),i=`${this.appSetting.autoSaveDirectory}/${e}`;return this.saveRecordByPath(i)}onPieceBeat(){Jc(this.appSetting.pieceVolume)}onBeepShort(){this.appSetting.clockSoundTarget===xa.ONLY_USER&&!this.isMovableByUser||this.unlimitedBeepHandler||j1({frequency:this.appSetting.clockPitch,volume:this.appSetting.clockVolume})}onBeepUnlimited(){this.appSetting.clockSoundTarget===xa.ONLY_USER&&!this.isMovableByUser||this.unlimitedBeepHandler||(this.unlimitedBeepHandler=z1({frequency:this.appSetting.clockPitch,volume:this.appSetting.clockVolume}))}onStopBeep(){this.unlimitedBeepHandler&&(this.unlimitedBeepHandler.stop(),this.unlimitedBeepHandler=void 0)}doMove(e){this.appState!==G.NORMAL&&this.appState!==G.RESEARCH||this.recordManager.appendMove({move:e})&&Jc(this.appSetting.pieceVolume)}onFinish(){this.appState===G.ANALYSIS&&(this._message.enqueue({text:""}),this._appState=G.NORMAL)}onError(e){this.pushError(e)}startResearch(e){if(this.appState!==G.RESEARCH_DIALOG||this.isBussy)return;if(this.retainBussyState(),!e.usi){this.pushError(new Error(""));return}const i=e.usi;fe.saveResearchSetting(e).then(()=>(this.researcher=new El(i,this.appSetting.engineTimeoutSeconds,n=>{this.recordManager.updateSearchInfo(nn.RESEARCHER,n)}),this.researcher.launch())).then(()=>{this._appState=G.RESEARCH,this.onUpdatePosition(),this.appSetting.tab!==Vi.SEARCH&&this.appSetting.tab!==Vi.PV&&this.appSetting.tab!==Vi.CHART&&this.appSetting.tab!==Vi.PERCENTAGE_CHART&&this.updateAppSetting({tab:Vi.PV})}).catch(n=>{this.researcher=void 0,this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()})}stopResearch(){this.appState===G.RESEARCH&&(this.researcher&&(this.researcher.close(),this.researcher=void 0),this._appState=G.NORMAL)}startAnalysis(e){this.appState!==G.ANALYSIS_DIALOG||this.isBussy||(this.retainBussyState(),fe.saveAnalysisSetting(e).then(()=>(this.analysisManager=new n_(this.recordManager,e,this.appSetting,this),this.analysisManager.start())).then(()=>{this._appState=G.ANALYSIS}).catch(i=>{this.analysisManager=void 0,this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}stopAnalysis(){this.appState===G.ANALYSIS&&(this.analysisManager&&(this.analysisManager.close(),this.analysisManager=void 0),this._appState=G.NORMAL)}onUpdatePosition(){this.researcher&&this.researcher.startResearch(this.recordManager.record)}resetRecord(){this.appState==G.NORMAL&&this.showConfirmation({message:"",onOk:()=>{this.recordManager.reset()}})}updateRecordComment(e){this.recordManager.updateComment(e)}insertSpecialMove(e){this.appState!==G.NORMAL&&this.appState!==G.RESEARCH||this.recordManager.appendMove({move:e})}startPositionEditing(){this.appState===G.NORMAL&&this.showConfirmation({message:"",onOk:()=>{this._appState=G.POSITION_EDITING,this.recordManager.resetByCurrentPosition()}})}endPositionEditing(){this.appState===G.POSITION_EDITING&&(this._appState=G.NORMAL)}initializePosition(e){this.appState==G.POSITION_EDITING&&this.showConfirmation({message:"",onOk:()=>{this.recordManager.reset(e)}})}changeTurn(){this.appState==G.POSITION_EDITING&&this.recordManager.swapNextTurn()}editPosition(e){this.appState===G.POSITION_EDITING&&this.recordManager.changePosition(e)}changePly(e){(this.appState===G.NORMAL||this.appState===G.RESEARCH)&&this.recordManager.changePly(e)}changeBranch(e){(this.appState===G.NORMAL||this.appState===G.RESEARCH)&&this.recordManager.changeBranch(e)}swapWithNextBranch(){return this.recordManager.swapWithNextBranch()}swapWithPreviousBranch(){return this.recordManager.swapWithPreviousBranch()}removeCurrentMove(){if(!(this.appState!==G.NORMAL&&this.appState!==G.RESEARCH)){if(this.recordManager.record.current.isLastMove){this.recordManager.removeCurrentMove();return}this.showConfirmation({message:`${this.recordManager.record.current.number}`,onOk:()=>{this.recordManager.removeCurrentMove()}})}}copyRecordKIF(){const e=Od(this.recordManager.record,{returnCode:this.appSetting.returnCode});navigator.clipboard.writeText(e)}copyRecordCSA(){const e=Fd(this.recordManager.record,{returnCode:this.appSetting.returnCode});navigator.clipboard.writeText(e)}copyRecordUSIBefore(){const e=this.recordManager.record.usi;navigator.clipboard.writeText(e)}copyRecordUSIAll(){const e=this.recordManager.record.usiAll;navigator.clipboard.writeText(e)}copyBoardSFEN(){const e=this.recordManager.record.sfen;navigator.clipboard.writeText(e)}pasteRecord(e){if(this.appState!==G.NORMAL)return;const i=this.recordManager.importRecord(e);if(i){this.pushError(i);return}}openRecord(e){this.appState!==G.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>e||fe.showOpenRecordDialog()).then(i=>{if(i)return fe.openRecord(i).then(n=>{const s=this.recordManager.importRecordFromBuffer(n,i);return s&&Promise.reject(s)})}).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}saveRecord(e){this.appState!==G.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>{const i=this.recordManager.recordFilePath;if(e!=null&&e.overwrite&&i)return i;const n=eu(this.recordManager.record.metadata);return fe.showSaveRecordDialog(n)}).then(i=>{if(i)return this.saveRecordByPath(i)}).catch(i=>{this.pushError(i)}).finally(()=>{this.releaseBussyState()}))}async saveRecordByPath(e){const i=this.recordManager.exportRecordAsBuffer(e,{returnCode:this.appSetting.returnCode});if(i instanceof Error)throw i;this.retainBussyState();try{await fe.saveRecord(e,i)}catch(n){throw new Error(`: ${n}`)}finally{this.releaseBussyState()}}get isMovableByUser(){switch(this.appState){case G.NORMAL:case G.RESEARCH:return!0;case G.GAME:return(this.recordManager.record.position.color===R.BLACK?this.gameManager.setting.black.uri:this.gameManager.setting.white.uri)===Ft;case G.CSA_GAME:return this.csaGameManager.isMyTurn&&this.csaGameManager.setting.player.uri===Ft}return!1}}const S_=en(new v_);function ze(){return S_}var It=(t=>(t.BUSSY="bussy",t.ERROR="error",t.INFO="info",t.GAME="game",t.INTERNET="internet",t.STOP="stop",t.RESIGN="resign",t.RESEARCH="research",t.END="end",t.QUIZ="quiz",t.EDIT="edit",t.CHECK="check",t.SWAP="swap",t.SWAP_H="swap_h",t.SETTINGS="settings",t.ENGINE_SETTINGS="engineSettings",t.FLIP="flip",t.FILE="file",t.OPEN="open",t.SAVE="save",t.SAVE_AS="saveAs",t.PASTE="paste",t.COPY="copy",t.DELETE="delete",t.COMMENT="comment",t.BRAIN="brain",t.PV="pv",t.CHART="chart",t.PERCENT="percent",t.ARROW_DROP="arrowDrop",t.ARROW_UP="arrowUp",t.FIRST="first",t.BACK="back",t.NEXT="next",t.LAST="last",t.QUESTION="question",t.ANALYSIS="analysis",t.DESCRIPTION="description",t.PLAY="play",t.CLOSE="close",t.CALL="call",t))(It||{});const Yd={bussy:"icon/hourglass_empty_white_24dp.svg",error:"icon/error_outline_white_24dp.svg",info:"icon/info_white_24dp.svg",game:"icon/sports_esports_white_24dp.svg",internet:"icon/language_FILL0_wght400_GRAD0_opsz48.svg",stop:"icon/block_white_24dp.svg",resign:"icon/flag_white_24dp.svg",research:"icon/science_white_24dp.svg",end:"icon/do_disturb_on_white_24dp.svg",quiz:"icon/quiz_FILL0_wght400_GRAD0_opsz48.svg",edit:"icon/app_registration_white_24dp.svg",check:"icon/check_circle_white_24dp.svg",swap:"icon/swap_vert_white_24dp.svg",swap_h:"icon/swap_horiz_white_24dp.svg",settings:"icon/settings_white_24dp.svg",engineSettings:"icon/settings_input_component_white_24dp.svg",flip:"icon/flip_camera_android_white_24dp.svg",file:"icon/draft_FILL0_wght400_GRAD0_opsz48.svg",open:"icon/file_open_FILL0_wght400_GRAD0_opsz48.svg",save:"icon/save_FILL0_wght400_GRAD0_opsz48.svg",saveAs:"icon/save_as_FILL0_wght400_GRAD0_opsz48.svg",paste:"icon/content_paste_white_24dp.svg",copy:"icon/content_copy_white_24dp.svg",delete:"icon/backspace_white_24dp.svg",comment:"icon/edit_note_white_24dp.svg",brain:"icon/psychology_white_24dp.svg",pv:"icon/manage_search_FILL0_wght400_GRAD0_opsz48.svg",chart:"icon/show_chart_white_24dp.svg",percent:"icon/percent_white_24dp.svg",arrowDrop:"icon/arrow_drop_down_white_24dp.svg",arrowUp:"icon/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg",first:"icon/first_page_white_24dp.svg",back:"icon/chevron_left_white_24dp.svg",next:"icon/chevron_right_white_24dp.svg",last:"icon/last_page_white_24dp.svg",question:"icon/help_white_24dp.svg",analysis:"icon/query_stats_white_24dp.svg",description:"icon/description_white_24dp.svg",play:"icon/play_arrow_FILL1_wght400_GRAD0_opsz48.svg",close:"icon/close_FILL0_wght400_GRAD0_opsz48.svg",call:"icon/record_voice_over_FILL0_wght400_GRAD0_opsz48.svg"};Object.values(Yd).forEach(t=>{us(t)});const w_=He({name:"ButtonIcon",props:{icon:{type:String,required:!0}},setup(t){return{source:Yd[t.icon]}}}),E_=["src"];function A_(t,e,i,n,s,o){return D(),$("img",{class:"icon",src:t.source,draggable:"false"},null,8,E_)}const Vt=Ue(w_,[["render",A_]]);function wt(t,e){t.addEventListener("cancel",i=>{i.preventDefault(),i.stopPropagation(),e&&e()}),t.addEventListener("copy",i=>{i.stopPropagation()}),t.addEventListener("paste",i=>{i.stopPropagation()}),t.showModal()}function so(t){return document.getElementById(t)}const x_=He({name:"GameMenu",components:{ButtonIcon:Vt},emits:["close"],setup(t,e){const i=ze(),n=z(null),s=()=>{e.emit("close")};return it(()=>{wt(n.value,s)}),{dialog:n,Icon:It,onClose:s,onLocalGame:()=>{i.showGameDialog(),e.emit("close")},onCSAGame:()=>{i.showCSAGameDialog(),e.emit("close")}}}}),k_={ref:"dialog",class:"menu"},I_={class:"groups"},C_={class:"group"},M_=m("div",{class:"label"},"",-1),P_={class:"group"},T_=m("div",{class:"label"},"",-1),B_=m("div",{class:"label"},"CSA",-1);function D_(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",k_,[m("div",I_,[m("div",C_,[m("button",{class:"close",onClick:e[0]||(e[0]=(...a)=>t.onClose&&t.onClose(...a))},[K(r,{class:"icon",icon:t.Icon.CLOSE},null,8,["icon"]),M_])]),m("div",P_,[m("button",{onClick:e[1]||(e[1]=(...a)=>t.onLocalGame&&t.onLocalGame(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),T_]),m("button",{onClick:e[2]||(e[2]=(...a)=>t.onCSAGame&&t.onCSAGame(...a))},[K(r,{class:"icon",icon:t.Icon.INTERNET},null,8,["icon"]),B_])])])],512)])}const R_=Ue(x_,[["render",D_]]),O_=He({name:"FileMenu",components:{ButtonIcon:Vt},emits:["close"],setup(t,e){const i=ze(),n=z(null),s=()=>{e.emit("close")};it(()=>{wt(n.value,s)});const o=()=>{i.resetRecord(),e.emit("close")},r=()=>{i.openRecord(),e.emit("close")},a=()=>{i.saveRecord({overwrite:!0}),e.emit("close")},l=()=>{i.saveRecord(),e.emit("close")},c=()=>{i.copyRecordKIF(),e.emit("close")},u=()=>{i.copyRecordCSA(),e.emit("close")},h=()=>{i.copyRecordUSIAll(),e.emit("close")},f=()=>{i.copyBoardSFEN(),e.emit("close")},p=()=>{i.showPasteDialog(),e.emit("close")},b=de(()=>({newFile:i.appState===G.NORMAL,open:i.appState===G.NORMAL,save:i.appState===G.NORMAL,saveAs:i.appState===G.NORMAL,paste:i.appState===G.NORMAL}));return{dialog:n,Icon:It,onClose:s,onNewFile:o,onOpen:r,onSave:a,onSaveAs:l,onCopyKIF:c,onCopyCSA:u,onCopyUSI:h,onCopySFEN:f,onPaste:p,states:b}}}),N_={ref:"dialog",class:"menu"},L_={class:"groups"},F_={class:"group"},$_=m("div",{class:"label"},"",-1),H_={class:"group"},U_=["disabled"],W_=m("div",{class:"label"},"",-1),G_=["disabled"],V_=m("div",{class:"label"},"",-1),j_=["disabled"],z_=m("div",{class:"label"},"",-1),K_=["disabled"],q_=m("div",{class:"label"},"",-1),Y_={class:"group"},X_=m("div",{class:"label"},"KIF",-1),J_=m("div",{class:"label"},"CSA",-1),Z_=m("div",{class:"label"},"USI",-1),Q_=m("div",{class:"label"},"SFEN",-1),eb=["disabled"],tb=m("div",{class:"label"},"",-1);function ib(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",N_,[m("div",L_,[m("div",F_,[m("button",{class:"close",onClick:e[0]||(e[0]=(...a)=>t.onClose&&t.onClose(...a))},[K(r,{class:"icon",icon:t.Icon.CLOSE},null,8,["icon"]),$_])]),m("div",H_,[m("button",{disabled:!t.states.newFile,onClick:e[1]||(e[1]=(...a)=>t.onNewFile&&t.onNewFile(...a))},[K(r,{class:"icon",icon:t.Icon.FILE},null,8,["icon"]),W_],8,U_),m("button",{disabled:!t.states.open,onClick:e[2]||(e[2]=(...a)=>t.onOpen&&t.onOpen(...a))},[K(r,{class:"icon",icon:t.Icon.OPEN},null,8,["icon"]),V_],8,G_),m("button",{disabled:!t.states.saveAs,onClick:e[3]||(e[3]=(...a)=>t.onSave&&t.onSave(...a))},[K(r,{class:"icon",icon:t.Icon.SAVE},null,8,["icon"]),z_],8,j_),m("button",{disabled:!t.states.save,onClick:e[4]||(e[4]=(...a)=>t.onSaveAs&&t.onSaveAs(...a))},[K(r,{class:"icon",icon:t.Icon.SAVE_AS},null,8,["icon"]),q_],8,K_)]),m("div",Y_,[m("button",{onClick:e[5]||(e[5]=(...a)=>t.onCopyKIF&&t.onCopyKIF(...a))},[K(r,{class:"icon",icon:t.Icon.COPY},null,8,["icon"]),X_]),m("button",{onClick:e[6]||(e[6]=(...a)=>t.onCopyCSA&&t.onCopyCSA(...a))},[K(r,{class:"icon",icon:t.Icon.COPY},null,8,["icon"]),J_]),m("button",{onClick:e[7]||(e[7]=(...a)=>t.onCopyUSI&&t.onCopyUSI(...a))},[K(r,{class:"icon",icon:t.Icon.COPY},null,8,["icon"]),Z_]),m("button",{onClick:e[8]||(e[8]=(...a)=>t.onCopySFEN&&t.onCopySFEN(...a))},[K(r,{class:"icon",icon:t.Icon.COPY},null,8,["icon"]),Q_]),m("button",{disabled:!t.states.paste,onClick:e[9]||(e[9]=(...a)=>t.onPaste&&t.onPaste(...a))},[K(r,{class:"icon",icon:t.Icon.PASTE},null,8,["icon"]),tb],8,eb)])])],512)])}const nb=Ue(O_,[["render",ib]]),sb=He({name:"InitialPositionMenu",components:{ButtonIcon:Vt},emits:["close"],setup(t,e){const i=ze(),n=z(null),s=()=>{e.emit("close")};return it(()=>{wt(n.value,s)}),{dialog:n,Icon:It,onClose:s,onStandard:()=>{i.initializePosition(Se.STANDARD),e.emit("close")},onHandicapLance:()=>{i.initializePosition(Se.HANDICAP_LANCE),e.emit("close")},onHandicapRightLance:()=>{i.initializePosition(Se.HANDICAP_RIGHT_LANCE),e.emit("close")},onHandicapBishop:()=>{i.initializePosition(Se.HANDICAP_BISHOP),e.emit("close")},onHandicapRook:()=>{i.initializePosition(Se.HANDICAP_ROOK),e.emit("close")},onHandicapRookLance:()=>{i.initializePosition(Se.HANDICAP_ROOK_LANCE),e.emit("close")},onHandicap2Pieces:()=>{i.initializePosition(Se.HANDICAP_2PIECES),e.emit("close")},onHandicap4Pieces:()=>{i.initializePosition(Se.HANDICAP_4PIECES),e.emit("close")},onHandicap6Pieces:()=>{i.initializePosition(Se.HANDICAP_6PIECES),e.emit("close")},onHandicap8Pieces:()=>{i.initializePosition(Se.HANDICAP_8PIECES),e.emit("close")},onTsumeShogi:()=>{i.initializePosition(Se.TSUME_SHOGI),e.emit("close")},onTsumeShogi2Kings:()=>{i.initializePosition(Se.TSUME_SHOGI_2KINGS),e.emit("close")}}}}),ob={ref:"dialog",class:"menu"},rb={class:"groups"},ab={class:"group"},lb=m("div",{class:"label"},"",-1),cb={class:"group"},ub=m("div",{class:"label"},"",-1),hb=m("div",{class:"label"},"",-1),db=m("div",{class:"label"},"",-1),fb=m("div",{class:"label"},"",-1),pb=m("div",{class:"label"},"",-1),gb=m("div",{class:"label"},"",-1),mb=m("div",{class:"label"},"2",-1),_b=m("div",{class:"label"},"4",-1),bb=m("div",{class:"label"},"6",-1),yb=m("div",{class:"label"},"8",-1),vb=m("div",{class:"label"},"",-1),Sb=m("div",{class:"label"},"",-1);function wb(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",ob,[m("div",rb,[m("div",ab,[m("button",{class:"close",onClick:e[0]||(e[0]=(...a)=>t.onClose&&t.onClose(...a))},[K(r,{class:"icon",icon:t.Icon.CLOSE},null,8,["icon"]),lb])]),m("div",cb,[m("button",{onClick:e[1]||(e[1]=(...a)=>t.onStandard&&t.onStandard(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),ub]),m("button",{onClick:e[2]||(e[2]=(...a)=>t.onHandicapLance&&t.onHandicapLance(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),hb]),m("button",{onClick:e[3]||(e[3]=(...a)=>t.onHandicapRightLance&&t.onHandicapRightLance(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),db]),m("button",{onClick:e[4]||(e[4]=(...a)=>t.onHandicapBishop&&t.onHandicapBishop(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),fb]),m("button",{onClick:e[5]||(e[5]=(...a)=>t.onHandicapRook&&t.onHandicapRook(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),pb]),m("button",{onClick:e[6]||(e[6]=(...a)=>t.onHandicapRookLance&&t.onHandicapRookLance(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),gb]),m("button",{onClick:e[7]||(e[7]=(...a)=>t.onHandicap2Pieces&&t.onHandicap2Pieces(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),mb]),m("button",{onClick:e[8]||(e[8]=(...a)=>t.onHandicap4Pieces&&t.onHandicap4Pieces(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),_b]),m("button",{onClick:e[9]||(e[9]=(...a)=>t.onHandicap6Pieces&&t.onHandicap6Pieces(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),bb]),m("button",{onClick:e[10]||(e[10]=(...a)=>t.onHandicap8Pieces&&t.onHandicap8Pieces(...a))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),yb]),m("button",{onClick:e[11]||(e[11]=(...a)=>t.onTsumeShogi&&t.onTsumeShogi(...a))},[K(r,{class:"icon",icon:t.Icon.QUIZ},null,8,["icon"]),vb]),m("button",{onClick:e[12]||(e[12]=(...a)=>t.onTsumeShogi2Kings&&t.onTsumeShogi2Kings(...a))},[K(r,{class:"icon",icon:t.Icon.QUIZ},null,8,["icon"]),Sb])])])],512)])}const Eb=Ue(sb,[["render",wb]]);class Ca{constructor(e){this.children=[],this.parent=e}delete(e){const i=this.children.indexOf(e);return i===-1?!1:(this.children=this.children.slice(0,i).concat(this.children.slice(i+1)),this.children.length===0&&this.parent.delete(this),!0)}add(e){return this.children.push(e),this}}class Qo{constructor(e){this.parent=null,this.children={},this.parent=e||null}get(e){return this.children[e]}insert(e){let i=this;for(let n=0;n<e.length;n+=1){const s=e[n];let o=i.get(s);if(n===e.length-1)return o instanceof Qo&&(i.delete(o),o=null),o||(o=new Ca(i),i.children[s]=o),o;o instanceof Ca&&(o=null),o||(o=new Qo(i),i.children[s]=o),i=o}return i}delete(e){for(const i in this.children)if(this.children[i]===e){const s=delete this.children[i];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),s}return!1}}function Ma(t){if(!(t instanceof HTMLElement))return!1;const e=t.nodeName.toLowerCase(),i=(t.getAttribute("type")||"").toLowerCase();return e==="select"||e==="textarea"||e==="input"&&i!=="submit"&&i!=="reset"&&i!=="checkbox"&&i!=="radio"&&i!=="file"||t.isContentEditable}function Ab(t,e){const i=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:e}});t.dispatchEvent(i)&&(Ma(t)?t.focus():t.click())}function xb(t){const e=[];let i=[""],n=!1;for(let s=0;s<t.length;s++){if(n&&t[s]===","){e.push(i),i=[""],n=!1;continue}if(t[s]===" "){i.push(""),n=!1;continue}else t[s]==="+"?n=!1:n=!0;i[i.length-1]+=t[s]}return e.push(i),e.map(s=>s.filter(o=>o!=="")).filter(s=>s.length>0)}function iu(t){const{ctrlKey:e,altKey:i,metaKey:n,key:s}=t,o=[],r=[e,i,n,kb(t)];for(const[a,l]of r.entries())l&&o.push(nu[a]);return nu.includes(s)||o.push(s),o.join("+")}const nu=["Control","Alt","Meta","Shift"];function kb(t){const{shiftKey:e,code:i,key:n}=t;return e&&!(i.startsWith("Key")&&n.toUpperCase()===n)}const Ns=new Qo,Xd=new WeakMap;let Pa=Ns,Co=null,Ta=[];function Jr(){Ta=[],Co=null,Pa=Ns}function Jd(t){if(t.defaultPrevented||!(t.target instanceof Node))return;if(Ma(t.target)){const i=t.target;if(!i.id||!i.ownerDocument.querySelector(`[data-hotkey-scope="${i.id}"]`))return}Co!=null&&window.clearTimeout(Co),Co=window.setTimeout(Jr,1500);const e=Pa.get(iu(t));if(!e){Jr();return}if(Ta.push(iu(t)),Pa=e,e instanceof Ca){const i=t.target;let n=!1,s;const o=Ma(i);for(let r=e.children.length-1;r>=0;r-=1){s=e.children[r];const a=s.getAttribute("data-hotkey-scope");if(!o&&!a||o&&i.id===a){n=!0;break}}s&&n&&(Ab(s,Ta),t.preventDefault()),Jr()}}function Ib(t,e){Object.keys(Ns.children).length===0&&document.addEventListener("keydown",Jd);const n=xb(e||t.getAttribute("data-hotkey")||"").map(s=>Ns.insert(s).add(t));Xd.set(t,n)}function Cb(t){const e=Xd.get(t);if(e&&e.length)for(const i of e)i&&i.delete(t);Object.keys(Ns.children).length===0&&document.removeEventListener("keydown",Jd)}function er(t){for(const e of t.querySelectorAll("[data-hotkey]"))Ib(e)}function tr(t){for(const e of t.querySelectorAll("[data-hotkey]"))Cb(e)}const Gn=[],Jt=[];function hs(t){Jt.length===0&&er(t),Gn.push(t)}function ds(t){Jt.length===0&&tr(t);for(let e=0;e<Gn.length;e++)if(Gn[e]===t){Gn.splice(e,1);break}}function ei(t){if(Jt.length===0)for(const e of Gn)tr(e);else tr(Jt[Jt.length-1]);er(t),Jt.push(t)}function ti(t){for(let e=0;e<Jt.length;e++)if(Jt[e]===t){Jt.splice(e,1),e===Jt.length&&tr(t);break}if(Jt.length===0)for(const e of Gn)er(e);else er(Jt[Jt.length-1])}const Mb=He({name:"BoardPane",components:{BoardView:$d,ButtonIcon:Vt,GameMenu:R_,FileMenu:nb,InitialPositionMenu:Eb},props:{maxSize:{type:kt,required:!0}},emits:["resize"],setup(t,e){const i=ze(),n=z(),s=z(),o=z(!1),r=z(!1),a=z(!1);it(()=>{hs(n.value),hs(s.value)}),js(()=>{hs(n.value),hs(s.value)}),sd(()=>{ds(n.value),ds(s.value)}),Wt(()=>{ds(n.value),ds(s.value)});const l=ve=>{e.emit("resize",ve)},c=ve=>{i.appState===G.GAME||i.appState===G.CSA_GAME?Wn.doMove(ve):i.doMove(ve)},u=ve=>{i.editPosition(ve)},h=()=>{o.value=!0},f=()=>{i.stopGame()},p=()=>{Wn.win()},b=()=>{Wn.resign()},_=()=>{i.showResearchDialog()},v=()=>{i.stopResearch()},y=()=>{i.showAnalysisDialog()},w=()=>{i.stopAnalysis()},E=()=>{i.startPositionEditing()},x=()=>{i.endPositionEditing()},I=()=>{a.value=!0},T=()=>{i.changeTurn()},H=()=>{i.showAppSettingDialog()},V=()=>{i.showUsiEngineManagementDialog()},Q=()=>{ze().flipBoard()},ae=()=>{r.value=!0},Z=()=>{i.removeCurrentMove()},ge=de(()=>i.appState===G.POSITION_EDITING),Re=de(()=>i.isMovableByUser),Ye=de(()=>i.appSetting),se=de(()=>i.record.position),he=de(()=>{const ve=i.record.current.move;return ve instanceof st?ve:void 0}),q=de(()=>i.record.metadata.getStandardMetadata(re.BLACK_NAME)),ee=de(()=>i.record.metadata.getStandardMetadata(re.WHITE_NAME)),oe=de(()=>{if(i.appState===G.GAME||i.csaGameState===xr.GAME)return{black:{time:i.blackTime,byoyomi:i.blackByoyomi},white:{time:i.whiteTime,byoyomi:i.whiteByoyomi}}}),Te=de(()=>({game:i.appState===G.NORMAL,stop:i.appState===G.GAME||i.appState===G.CSA_GAME,win:i.appState===G.CSA_GAME&&i.isMovableByUser,resign:(i.appState===G.GAME||i.appState===G.CSA_GAME)&&i.isMovableByUser,research:i.appState===G.NORMAL,endResearch:i.appState===G.RESEARCH,analysis:i.appState===G.NORMAL,endAnalysis:i.appState===G.ANALYSIS,startEditPosition:i.appState===G.NORMAL,endEditPosition:i.appState===G.POSITION_EDITING,initPosition:i.appState===G.POSITION_EDITING,removeCurrentMove:i.appState===G.NORMAL||i.appState===G.RESEARCH,engineSettings:i.appState===G.NORMAL}));return{rightControl:n,leftControl:s,isGameMenuVisible:o,isFileMenuVisible:r,isInitialPositionMenuVisible:a,appSetting:Ye,position:se,lastMove:he,blackPlayerName:q,whitePlayerName:ee,clock:oe,controlStates:Te,onResize:l,onMove:c,onEdit:u,onGame:h,onStop:f,onWin:p,onResign:b,onResearch:_,onEndResearch:v,onAnalysis:y,onEndAnalysis:w,onStartEditPosition:E,onEndEditPosition:x,onInitPosition:I,onChangeTurn:T,onOpenAppSettings:H,onOpenEngineSettings:V,onFlip:Q,onFileAction:ae,onRemoveCurrentMove:Z,allowEdit:ge,allowMove:Re,Icon:It}}});const Pb={ref:"rightControl",class:"control top"},Tb={ref:"leftControl",class:"control bottom"},Bb=["disabled"],Db=["disabled"];function Rb(t,e,i,n,s,o){var h,f,p,b;const r=Ee("ButtonIcon"),a=Ee("BoardView"),l=Ee("GameMenu"),c=Ee("FileMenu"),u=Ee("InitialPositionMenu");return D(),$("div",null,[K(a,{"piece-image-type":t.appSetting.pieceImage,"board-image-type":t.appSetting.boardImage,"board-label-type":t.appSetting.boardLabelType,"max-size":t.maxSize,position:t.position,"last-move":t.lastMove,flip:t.appSetting.boardFlipping,"allow-move":t.allowMove,"allow-edit":t.allowEdit,"black-player-name":t.blackPlayerName,"white-player-name":t.whitePlayerName,"black-player-time":(h=t.clock)==null?void 0:h.black.time,"black-player-byoyomi":(f=t.clock)==null?void 0:f.black.byoyomi,"white-player-time":(p=t.clock)==null?void 0:p.white.time,"white-player-byoyomi":(b=t.clock)==null?void 0:b.white.byoyomi,onResize:t.onResize,onMove:t.onMove,onEdit:t.onEdit},{"right-control":Wo(()=>[m("div",Pb,[t.controlStates.game?(D(),$("button",{key:0,class:"control-item",onClick:e[0]||(e[0]=(..._)=>t.onGame&&t.onGame(..._))},[K(r,{class:"icon",icon:t.Icon.GAME},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.stop?(D(),$("button",{key:1,class:"control-item",onClick:e[1]||(e[1]=(..._)=>t.onStop&&t.onStop(..._))},[K(r,{class:"icon",icon:t.Icon.STOP,"data-hotkey":"Escape"},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.win?(D(),$("button",{key:2,class:"control-item",onClick:e[2]||(e[2]=(..._)=>t.onWin&&t.onWin(..._))},[K(r,{class:"icon",icon:t.Icon.CALL},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.resign?(D(),$("button",{key:3,class:"control-item",onClick:e[3]||(e[3]=(..._)=>t.onResign&&t.onResign(..._))},[K(r,{class:"icon",icon:t.Icon.RESIGN},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.research?(D(),$("button",{key:4,class:"control-item",onClick:e[4]||(e[4]=(..._)=>t.onResearch&&t.onResearch(..._))},[K(r,{class:"icon",icon:t.Icon.RESEARCH,"data-hotkey":"Control+r"},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.endResearch?(D(),$("button",{key:5,class:"control-item","data-hotkey":"Escape",onClick:e[5]||(e[5]=(..._)=>t.onEndResearch&&t.onEndResearch(..._))},[K(r,{class:"icon",icon:t.Icon.END},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.analysis?(D(),$("button",{key:6,class:"control-item",onClick:e[6]||(e[6]=(..._)=>t.onAnalysis&&t.onAnalysis(..._))},[K(r,{class:"icon",icon:t.Icon.ANALYSIS,"data-hotkey":"Control+a"},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.endAnalysis?(D(),$("button",{key:7,class:"control-item","data-hotkey":"Escape",onClick:e[7]||(e[7]=(..._)=>t.onEndAnalysis&&t.onEndAnalysis(..._))},[K(r,{class:"icon",icon:t.Icon.STOP},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.startEditPosition?(D(),$("button",{key:8,class:"control-item",onClick:e[8]||(e[8]=(..._)=>t.onStartEditPosition&&t.onStartEditPosition(..._))},[K(r,{class:"icon",icon:t.Icon.EDIT},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.endEditPosition?(D(),$("button",{key:9,class:"control-item",onClick:e[9]||(e[9]=(..._)=>t.onEndEditPosition&&t.onEndEditPosition(..._))},[K(r,{class:"icon",icon:t.Icon.CHECK},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.initPosition?(D(),$("button",{key:10,class:"control-item",onClick:e[10]||(e[10]=(..._)=>t.onChangeTurn&&t.onChangeTurn(..._))},[K(r,{class:"icon",icon:t.Icon.SWAP},null,8,["icon"]),$e("  ")])):pe("",!0),t.controlStates.initPosition?(D(),$("button",{key:11,class:"control-item",onClick:e[11]||(e[11]=(..._)=>t.onInitPosition&&t.onInitPosition(..._))},"  ")):pe("",!0)],512)]),"left-control":Wo(()=>[m("div",Tb,[m("button",{class:"control-item",onClick:e[12]||(e[12]=(..._)=>t.onOpenAppSettings&&t.onOpenAppSettings(..._))},[K(r,{class:"icon",icon:t.Icon.SETTINGS,"data-hotkey":"Control+,"},null,8,["icon"]),$e("  ")]),m("button",{class:"control-item",disabled:!t.controlStates.engineSettings,onClick:e[13]||(e[13]=(..._)=>t.onOpenEngineSettings&&t.onOpenEngineSettings(..._))},[K(r,{class:"icon",icon:t.Icon.ENGINE_SETTINGS,"data-hotkey":"Control+."},null,8,["icon"]),$e("  ")],8,Bb),m("button",{class:"control-item",onClick:e[14]||(e[14]=(..._)=>t.onFlip&&t.onFlip(..._))},[K(r,{class:"icon",icon:t.Icon.FLIP,"data-hotkey":"Control+t"},null,8,["icon"]),$e("  ")]),m("button",{class:"control-item",onClick:e[15]||(e[15]=(..._)=>t.onFileAction&&t.onFileAction(..._))},[K(r,{class:"icon",icon:t.Icon.FILE},null,8,["icon"]),$e("  ")]),m("button",{class:"control-item",disabled:!t.controlStates.removeCurrentMove,onClick:e[16]||(e[16]=(..._)=>t.onRemoveCurrentMove&&t.onRemoveCurrentMove(..._))},[K(r,{class:"icon",icon:t.Icon.DELETE,"data-hotkey":"Control+d"},null,8,["icon"]),$e("  ")],8,Db)],512)]),_:1},8,["piece-image-type","board-image-type","board-label-type","max-size","position","last-move","flip","allow-move","allow-edit","black-player-name","white-player-name","black-player-time","black-player-byoyomi","white-player-time","white-player-byoyomi","onResize","onMove","onEdit"]),t.isGameMenuVisible?(D(),nt(l,{key:0,onClose:e[17]||(e[17]=_=>t.isGameMenuVisible=!1)})):pe("",!0),t.isFileMenuVisible?(D(),nt(c,{key:1,onClose:e[18]||(e[18]=_=>t.isFileMenuVisible=!1)})):pe("",!0),t.isInitialPositionMenuVisible?(D(),nt(u,{key:2,onClose:e[19]||(e[19]=_=>t.isInitialPositionMenuVisible=!1)})):pe("",!0)])}const Ob=Ue(Mb,[["render",Rb],["__scopeId","data-v-6bdfc0b9"]]),Nb=He({name:"RecordView",components:{ButtonIcon:Vt},props:{record:{type:Object,required:!0},operational:{type:Boolean,required:!1},showElapsedTime:{type:Boolean,required:!1},showComment:{type:Boolean,required:!1}},emits:["goBegin","goBack","goForward","goEnd","selectMove","selectBranch","swapWithPreviousBranch","swapWithNextBranch"],setup(t,e){const i=z(null),n=z(null),s=()=>{t.operational&&e.emit("goBegin")},o=()=>{t.operational&&e.emit("goBack")},r=()=>{t.operational&&e.emit("goForward")},a=()=>{t.operational&&e.emit("goEnd")},l=_=>{t.operational&&e.emit("selectMove",Number(_))},c=_=>{t.operational&&e.emit("selectBranch",Number(_))},u=()=>{t.operational&&e.emit("swapWithPreviousBranch")},h=()=>{t.operational&&e.emit("swapWithNextBranch")},f=de(()=>t.record.current.number===0),p=de(()=>{const _=[];return t.record.moves.forEach(v=>{_.push({number:v.number,text:v.displayText,time:v.number!=0?v.timeText:"",hasBranch:v.hasBranch,comment:v.comment,selected:v===t.record.current})}),_}),b=de(()=>{if(!t.record.branchBegin.branch)return null;const _=[];let v;for(v=t.record.branchBegin;v&&v.move;v=v.branch)_.push({index:_.length,text:v.displayText,comment:v.comment,selected:v.activeBranch});return _});return js(()=>{i.value.childNodes.forEach(y=>{y instanceof HTMLElement&&y.classList.contains("selected")&&y.scrollIntoView({behavior:"auto",block:"nearest"})}),n.value.childNodes.forEach(y=>{y instanceof HTMLElement&&y.classList.contains("selected")&&y.scrollIntoView({behavior:"auto",block:"nearest"})})}),{beginPosSelected:f,moves:p,branches:b,moveList:i,branchList:n,goBegin:s,goBack:o,goForward:r,goEnd:a,changeNumber:l,changeBranch:c,swapWithPreviousBranch:u,swapWithNextBranch:h,Icon:It}}});const Lb={class:"record-view"},Fb={class:"controller"},$b=["disabled"],Hb=["disabled"],Ub=["disabled"],Wb=["disabled"],Gb={ref:"moveList",class:"move-list"},Vb=["value","onClick"],jb={class:"move-number"},zb={class:"move-text"},Kb={key:0,class:"move-time"},qb={key:1,class:"move-comment"},Yb={class:"branch-list-area"},Xb={ref:"branchList",class:"branch-list"},Jb=["value","onClick"],Zb={class:"move-text"},Qb={key:0,class:"move-comment"},ey={class:"branch-list-control"},ty=["disabled"],iy=["disabled"];function ny(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",Lb,[m("div",Fb,[m("button",{class:"control-button",disabled:!t.operational,"data-hotkey":"ArrowLeft",onClick:e[0]||(e[0]=a=>t.goBegin())},[K(r,{class:"icon",icon:t.Icon.FIRST},null,8,["icon"])],8,$b),m("button",{class:"control-button",disabled:!t.operational,"data-hotkey":"ArrowUp",onClick:e[1]||(e[1]=a=>t.goBack())},[K(r,{class:"icon",icon:t.Icon.BACK},null,8,["icon"])],8,Hb),m("button",{class:"control-button",disabled:!t.operational,"data-hotkey":"ArrowDown",onClick:e[2]||(e[2]=a=>t.goForward())},[K(r,{class:"icon",icon:t.Icon.NEXT},null,8,["icon"])],8,Ub),m("button",{class:"control-button",disabled:!t.operational,"data-hotkey":"ArrowRight",onClick:e[3]||(e[3]=a=>t.goEnd())},[K(r,{class:"icon",icon:t.Icon.LAST},null,8,["icon"])],8,Wb)]),m("div",Gb,[(D(!0),$(Pe,null,Qe(t.moves,a=>(D(),$("div",{key:a.number,class:Ze(["move-element",{"has-branch":a.hasBranch,selected:a.selected}]),value:a.number,onClick:l=>t.changeNumber(a.number)},[m("div",jb,ye(a.number!==0?a.number:""),1),m("div",zb,ye(a.text),1),t.showElapsedTime?(D(),$("div",Kb,ye(a.time),1)):pe("",!0),t.showComment?(D(),$("div",qb,ye(a.comment),1)):pe("",!0)],10,Vb))),128))],512),m("div",Yb,[m("div",Xb,[(D(!0),$(Pe,null,Qe(t.branches,a=>(D(),$("div",{key:a.index,class:Ze(["move-element",{selected:a.selected}]),value:a.index,onClick:l=>t.changeBranch(a.index)},[m("div",Zb,ye(a.text),1),t.showComment?(D(),$("div",Qb,ye(a.comment),1)):pe("",!0)],10,Jb))),128))],512),m("div",ey,[m("button",{class:"branch-list-control-button",disabled:!t.operational,onClick:e[4]||(e[4]=a=>t.swapWithPreviousBranch())},[K(r,{class:"icon",icon:t.Icon.ARROW_UP},null,8,["icon"])],8,ty),m("button",{class:"branch-list-control-button",disabled:!t.operational,onClick:e[5]||(e[5]=a=>t.swapWithNextBranch())},[K(r,{class:"icon",icon:t.Icon.ARROW_DROP},null,8,["icon"])],8,iy)])])])}const sy=Ue(Nb,[["render",ny],["__scopeId","data-v-45c9fda5"]]),oy=200,ry=He({name:"RecordPane",components:{RecordView:sy},setup(){const t=ze(),e=z();it(()=>{hs(e.value)}),zs(()=>{ds(e.value)});const i=y=>{t.changePly(y)},n=()=>{i(0)},s=()=>{i(t.record.current.number-1)},o=()=>{i(t.record.current.number+1)},r=()=>{i(Number.MAX_SAFE_INTEGER)},a=y=>{i(y)},l=y=>{t.changeBranch(y)},c=()=>{t.swapWithPreviousBranch()},u=()=>{t.swapWithNextBranch()},h=y=>{const w=y.target;t.updateAppSetting({showElapsedTimeInRecordView:w.checked})},f=y=>{const w=y.target;t.updateAppSetting({showCommentInRecordView:w.checked})},p=de(()=>t.appState===G.NORMAL||t.appState===G.RESEARCH),b=de(()=>t.appSetting.showCommentInRecordView),_=de(()=>t.appSetting.showElapsedTimeInRecordView),v=de(()=>t.record);return{root:e,isRecordOperational:p,showElapsedTime:_,showComment:b,record:v,goBegin:n,goBack:s,goForward:o,goEnd:r,selectMove:a,selectBranch:l,swapWithPreviousBranch:c,swapWithNextBranch:u,onToggleElapsedTime:h,onToggleComment:f}}});const Zd=t=>(qt("data-v-fe159f9f"),t=t(),Yt(),t),ay={ref:"root",class:"record-pane"},ly={class:"record"},cy={class:"options"},uy={class:"option"},hy=["checked"],dy=Zd(()=>m("label",{for:"show-elapsed-time"},"",-1)),fy={class:"option"},py=["checked"],gy=Zd(()=>m("label",{for:"show-comment"},"",-1));function my(t,e,i,n,s,o){const r=Ee("RecordView");return D(),$("div",ay,[m("div",ly,[K(r,{record:t.record,operational:t.isRecordOperational,"show-comment":t.showComment,"show-elapsed-time":t.showElapsedTime,onGoBegin:t.goBegin,onGoBack:t.goBack,onGoForward:t.goForward,onGoEnd:t.goEnd,onSelectMove:t.selectMove,onSelectBranch:t.selectBranch,onSwapWithPreviousBranch:t.swapWithPreviousBranch,onSwapWithNextBranch:t.swapWithNextBranch},null,8,["record","operational","show-comment","show-elapsed-time","onGoBegin","onGoBack","onGoForward","onGoEnd","onSelectMove","onSelectBranch","onSwapWithPreviousBranch","onSwapWithNextBranch"])]),m("div",cy,[m("div",uy,[m("input",{id:"show-elapsed-time",type:"checkbox",checked:t.showElapsedTime,onChange:e[0]||(e[0]=(...a)=>t.onToggleElapsedTime&&t.onToggleElapsedTime(...a))},null,40,hy),dy]),m("div",fy,[m("input",{id:"show-comment",type:"checkbox",checked:t.showComment,onChange:e[1]||(e[1]=(...a)=>t.onToggleComment&&t.onToggleComment(...a))},null,40,py),gy])])],512)}const _y=Ue(ry,[["render",my],["__scopeId","data-v-fe159f9f"]]),by=He({name:"RecordComment",setup(){const t=ze(),e=de(()=>t.record.current.comment),i=de(()=>t.appState!=G.NORMAL),n=z(null),s=o=>{const r=o.target.value;t.updateRecordComment(r)};return it(()=>{n.value.addEventListener("copy",o=>{o.stopPropagation()}),n.value.addEventListener("paste",o=>{o.stopPropagation()})}),{textarea:n,comment:e,readonly:i,change:s}}});const yy={class:"root"},vy=["value","readonly"];function Sy(t,e,i,n,s,o){return D(),$("div",null,[m("div",yy,[m("textarea",{ref:"textarea",class:"text",value:t.comment,readonly:!!t.readonly,onInput:e[0]||(e[0]=(...r)=>t.change&&t.change(...r))},null,40,vy)])])}const wy=Ue(by,[["render",Sy],["__scopeId","data-v-18eda5e3"]]),Ey=He({name:"PVPreviewDialog",components:{BoardView:$d,ButtonIcon:Vt},props:{position:{type:String,required:!0},pv:{type:Object,required:!0},infos:{type:Object,default:[],required:!1}},emits:["close"],setup(t,e){const i=ze(),n=z(null),s=en(new kt(0,0)),o=en(new At),r=z(i.appSetting.boardFlipping),a=()=>{s.width=window.innerWidth*.8,s.height=window.innerHeight*.8-80},l=()=>{const w=Bt.newBySFEN(t.position);if(w){o.clear(w);for(const E of t.pv){const x=o.position.createMoveByUSI(E);if(!x)break;o.append(x,{ignoreValidation:!0})}o.goto(1)}};it(async()=>{a(),l(),window.addEventListener("resize",a),wt(n.value),ei(n.value)}),Wt(()=>{window.removeEventListener("resize",a),ti(n.value)}),Ji([()=>t.position,()=>t.pv],()=>{l(),wt(n.value)});const c=()=>{e.emit("close")},u=()=>{o.goto(0)},h=()=>{o.goto(Number.MAX_SAFE_INTEGER)},f=()=>{o.goBack()},p=()=>{o.goForward()},b=()=>{r.value=!r.value},_=de(()=>o.position),v=de(()=>o.current.move instanceof st?o.current.move:null),y=de(()=>o.moves.slice(1).map(w=>({number:w.number,text:w.displayText,selected:w.number===o.current.number})));return{dialog:n,appSetting:i.appSetting,pos:_,lastMove:v,maxSize:s,flip:r,displayPV:y,close:c,goBegin:u,goEnd:h,goBack:f,goForward:p,doFlip:b,Icon:It}}});const Ay={ref:"dialog"},xy={class:"control top"},ky={class:"control-row"},Iy={class:"control-row"},Cy={class:"control-row"},My={class:"informations"},Py={class:"information"};function Ty(t,e,i,n,s,o){const r=Ee("ButtonIcon"),a=Ee("BoardView");return D(),$("div",null,[m("dialog",Ay,[K(a,{class:"board","piece-image-type":t.appSetting.pieceImage,"board-image-type":t.appSetting.boardImage,"board-label-type":t.appSetting.boardLabelType,"max-size":t.maxSize,position:t.pos,"last-move":t.lastMove,flip:t.flip},{"right-control":Wo(()=>[m("div",xy,[m("div",ky,[m("button",{class:"control-item","data-hotkey":"Control+t",onClick:e[0]||(e[0]=(...l)=>t.doFlip&&t.doFlip(...l))},[K(r,{class:"icon",icon:t.Icon.FLIP},null,8,["icon"])]),m("button",{class:"control-item",autofocus:"","data-hotkey":"Escape",onClick:e[1]||(e[1]=(...l)=>t.close&&t.close(...l))},[K(r,{class:"icon",icon:t.Icon.CLOSE},null,8,["icon"])])]),m("div",Iy,[m("button",{class:"control-item","data-hotkey":"ArrowLeft",onClick:e[2]||(e[2]=(...l)=>t.goBegin&&t.goBegin(...l))},[K(r,{class:"icon",icon:t.Icon.FIRST},null,8,["icon"])]),m("button",{class:"control-item","data-hotkey":"ArrowRight",onClick:e[3]||(e[3]=(...l)=>t.goEnd&&t.goEnd(...l))},[K(r,{class:"icon",icon:t.Icon.LAST},null,8,["icon"])])]),m("div",Cy,[m("button",{class:"control-item","data-hotkey":"ArrowUp",onClick:e[4]||(e[4]=(...l)=>t.goBack&&t.goBack(...l))},[K(r,{class:"icon",icon:t.Icon.BACK},null,8,["icon"])]),m("button",{class:"control-item","data-hotkey":"ArrowDown",onClick:e[5]||(e[5]=(...l)=>t.goForward&&t.goForward(...l))},[K(r,{class:"icon",icon:t.Icon.NEXT},null,8,["icon"])])])])]),_:1},8,["piece-image-type","board-image-type","board-label-type","max-size","position","last-move","flip"]),m("div",My,[(D(!0),$(Pe,null,Qe(t.infos,l=>(D(),$("div",{key:l,class:"information"},ye(l),1))),128)),m("div",Py,[(D(!0),$(Pe,null,Qe(t.displayPV,l=>(D(),$("span",{key:l.number},[m("span",{class:Ze(["move-element",{selected:l.selected}])},""+ye(l.text)+"",3)]))),128))])])],512)])}const By=Ue(Ey,[["render",Ty],["__scopeId","data-v-f23680e1"]]),Dy=He({name:"EngineAnalyticsElement",components:{ButtonIcon:Vt,PVPreviewDialog:By},props:{historyMode:{type:Boolean,required:!0},name:{type:String,required:!0},info:{type:ko,required:!0},height:{type:Number,required:!0}},setup:t=>{const e=de(()=>{if(!t.historyMode)return!1;for(const o of t.info.iterates)if(o.multiPV&&o.multiPV!==1)return!0;return!1}),i=z(null);return{Icon:It,enableHighlight:e,preview:i,showPreview:o=>{const r=[];o.depth!==void 0&&r.push(`=${o.depth}`),o.selectiveDepth!==void 0&&r.push(`=${o.selectiveDepth}`),o.score&&(r.push(`=${o.score}`),o.lowerBound&&r.push(""),o.upperBound&&r.push("")),o.scoreMate&&r.push(`=${o.scoreMate}`),o.multiPV&&r.push(`=${o.multiPV}`),i.value={position:o.position,pv:o.pv||[],infos:[r.join(" / ")]}},closePreview:()=>{i.value=null}}}});const ts=t=>(qt("data-v-364f988c"),t=t(),Yt(),t),Ry={class:"root"},Oy={class:"headers"},Ny={class:"header"},Ly=ts(()=>m("span",{class:"label"},": ",-1)),Fy={class:"value"},$y={class:"header"},Hy=ts(()=>m("span",{class:"label"},": ",-1)),Uy={class:"value"},Wy={class:"header"},Gy=ts(()=>m("span",{class:"label"},": ",-1)),Vy={class:"value"},jy={class:"header"},zy=ts(()=>m("span",{class:"label"},"(NPS): ",-1)),Ky={class:"value"},qy={class:"header"},Yy=ts(()=>m("span",{class:"label"},": ",-1)),Xy={class:"value"},Jy={class:"header"},Zy=ts(()=>m("span",{class:"label"},": ",-1)),Qy={class:"value"},ev=bd('<div class="list-header" data-v-364f988c><div class="list-column time" data-v-364f988c></div><div class="list-column multipv-index" data-v-364f988c></div><div class="list-column depth" data-v-364f988c></div><div class="list-column nodes" data-v-364f988c></div><div class="list-column score" data-v-364f988c></div></div>',1),tv={class:"list-column time"},iv={class:"list-column multipv-index"},nv={class:"list-column depth"},sv={class:"list-column nodes"},ov={class:"list-column score"},rv={class:"list-column score-flag"},av={class:"list-column text"},lv=["onClick"];function cv(t,e,i,n,s,o){const r=Ee("ButtonIcon"),a=Ee("PVPreviewDialog");return D(),$("div",null,[m("div",Ry,[m("div",Oy,[m("div",Ny,[Ly,m("span",Fy,ye(t.name),1)]),m("div",$y,[Hy,m("span",Uy,ye(t.info.ponderMove?t.info.ponderMove:"---"),1)]),m("div",Wy,[Gy,m("span",Vy,ye(t.info.currentMoveText||"---"),1)]),m("div",jy,[zy,m("span",Ky,ye(t.info.nps||"---"),1)]),m("div",qy,[Yy,m("span",Xy,ye(t.info.nodes||"---"),1)]),m("div",Jy,[Zy,m("span",Qy,ye(t.info.hashfull?(t.info.hashfull*100).toFixed(1):"---")+" % ",1)])]),ev,m("div",{class:"list",style:We(`height:${t.height-37}px`)},[(D(!0),$(Pe,null,Qe(t.historyMode?t.info.iterates:t.info.latestIteration,(l,c)=>(D(),$("div",{key:c,class:Ze(["list-item",{highlight:t.enableHighlight&&l.multiPV===1}])},[m("div",tv,ye(l.timeMs?(l.timeMs/1e3).toFixed(1)+"s":""),1),m("div",iv,ye(l.multiPV||""),1),m("div",nv,ye(l.depth)+ye(l.selectiveDepth&&l.depth?"/":"")+ye(l.selectiveDepth),1),m("div",sv,ye(l.nodes),1),m("div",ov,ye(l.score)+" "+ye(l.scoreMate?l.scoreMate:""),1),m("div",rv,ye(l.lowerBound?"++":"")+" "+ye(l.upperBound?"--":"")+" "+ye(l.scoreMate?"":""),1),m("div",av,[l.pv&&l.pv.length!==0&&l.text?(D(),$("button",{key:0,onClick:u=>t.showPreview(l)},[K(r,{class:"icon",icon:t.Icon.PLAY},null,8,["icon"]),$e("  ")],8,lv)):pe("",!0),$e(" "+ye(l.text),1)])],2))),128))],4),t.preview?(D(),nt(a,{key:0,position:t.preview.position,pv:t.preview.pv,infos:t.preview.infos,onClose:t.closePreview},null,8,["position","pv","infos","onClose"])):pe("",!0)])])}const uv=Ue(Dy,[["render",cv],["__scopeId","data-v-364f988c"]]),hv=He({name:"EngineAnalytics",components:{EngineAnalyticsElement:uv},props:{size:{type:kt,required:!0},historyMode:{type:Boolean,required:!0}},setup(t){const e=ze(),i=de(()=>e.usiBlackPlayerMonitor),n=de(()=>e.usiWhitePlayerMonitor),s=de(()=>e.usiResearcherMonitor),o=de(()=>{const r=(e.usiBlackPlayerMonitor?1:0)+(e.usiWhitePlayerMonitor?1:0)+(e.usiResearcherMonitor?1:0);return r!==0?t.size.height/r:0});return{blackPlayer:i,whitePlayer:n,researcher:s,elementHeight:o}}});const dv={class:"root"};function fv(t,e,i,n,s,o){const r=Ee("EngineAnalyticsElement");return D(),$("div",null,[m("div",dv,[t.blackPlayer?(D(),nt(r,{key:0,"history-mode":t.historyMode,name:t.blackPlayer.name,info:t.blackPlayer,height:t.elementHeight},null,8,["history-mode","name","info","height"])):pe("",!0),t.whitePlayer?(D(),nt(r,{key:1,"history-mode":t.historyMode,name:t.whitePlayer.name,info:t.whitePlayer,height:t.elementHeight},null,8,["history-mode","name","info","height"])):pe("",!0),t.researcher?(D(),nt(r,{key:2,"history-mode":t.historyMode,name:t.researcher.name,info:t.researcher,height:t.elementHeight},null,8,["history-mode","name","info","height"])):pe("",!0)])])}const pv=Ue(hv,[["render",fv],["__scopeId","data-v-66947172"]]);/*!
 * @kurkle/color v0.3.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function Ks(t){return t+.5|0}const ji=(t,e,i)=>Math.max(Math.min(t,i),e);function fs(t){return ji(Ks(t*2.55),0,255)}function Zi(t){return ji(Ks(t*255),0,255)}function Bi(t){return ji(Ks(t/2.55)/100,0,1)}function su(t){return ji(Ks(t*100),0,100)}const ni={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ba=[..."0123456789ABCDEF"],gv=t=>Ba[t&15],mv=t=>Ba[(t&240)>>4]+Ba[t&15],oo=t=>(t&240)>>4===(t&15),_v=t=>oo(t.r)&&oo(t.g)&&oo(t.b)&&oo(t.a);function bv(t){var e=t.length,i;return t[0]==="#"&&(e===4||e===5?i={r:255&ni[t[1]]*17,g:255&ni[t[2]]*17,b:255&ni[t[3]]*17,a:e===5?ni[t[4]]*17:255}:(e===7||e===9)&&(i={r:ni[t[1]]<<4|ni[t[2]],g:ni[t[3]]<<4|ni[t[4]],b:ni[t[5]]<<4|ni[t[6]],a:e===9?ni[t[7]]<<4|ni[t[8]]:255})),i}const yv=(t,e)=>t<255?e(t):"";function vv(t){var e=_v(t)?gv:mv;return t?"#"+e(t.r)+e(t.g)+e(t.b)+yv(t.a,e):void 0}const Sv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Qd(t,e,i){const n=e*Math.min(i,1-i),s=(o,r=(o+t/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function wv(t,e,i){const n=(s,o=(s+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Ev(t,e,i){const n=Qd(t,1,.5);let s;for(e+i>1&&(s=1/(e+i),e*=s,i*=s),s=0;s<3;s++)n[s]*=1-e-i,n[s]+=e;return n}function Av(t,e,i,n,s){return t===s?(e-i)/n+(e<i?6:0):e===s?(i-t)/n+2:(t-e)/n+4}function Al(t){const i=t.r/255,n=t.g/255,s=t.b/255,o=Math.max(i,n,s),r=Math.min(i,n,s),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=Av(i,n,s,u,o),l=l*60+.5),[l|0,c||0,a]}function xl(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(Zi)}function kl(t,e,i){return xl(Qd,t,e,i)}function xv(t,e,i){return xl(Ev,t,e,i)}function kv(t,e,i){return xl(wv,t,e,i)}function ef(t){return(t%360+360)%360}function Iv(t){const e=Sv.exec(t);let i=255,n;if(!e)return;e[5]!==n&&(i=e[6]?fs(+e[5]):Zi(+e[5]));const s=ef(+e[2]),o=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?n=xv(s,o,r):e[1]==="hsv"?n=kv(s,o,r):n=kl(s,o,r),{r:n[0],g:n[1],b:n[2],a:i}}function Cv(t,e){var i=Al(t);i[0]=ef(i[0]+e),i=kl(i),t.r=i[0],t.g=i[1],t.b=i[2]}function Mv(t){if(!t)return;const e=Al(t),i=e[0],n=su(e[1]),s=su(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${s}%, ${Bi(t.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const ou={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ru={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Pv(){const t={},e=Object.keys(ru),i=Object.keys(ou);let n,s,o,r,a;for(n=0;n<e.length;n++){for(r=a=e[n],s=0;s<i.length;s++)o=i[s],a=a.replace(o,ou[o]);o=parseInt(ru[r],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}let ro;function Tv(t){ro||(ro=Pv(),ro.transparent=[0,0,0,0]);const e=ro[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Bv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Dv(t){const e=Bv.exec(t);let i=255,n,s,o;if(e){if(e[7]!==n){const r=+e[7];i=e[8]?fs(r):ji(r*255,0,255)}return n=+e[1],s=+e[3],o=+e[5],n=255&(e[2]?fs(n):ji(n,0,255)),s=255&(e[4]?fs(s):ji(s,0,255)),o=255&(e[6]?fs(o):ji(o,0,255)),{r:n,g:s,b:o,a:i}}}function Rv(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Bi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Zr=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Tn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ov(t,e,i){const n=Tn(Bi(t.r)),s=Tn(Bi(t.g)),o=Tn(Bi(t.b));return{r:Zi(Zr(n+i*(Tn(Bi(e.r))-n))),g:Zi(Zr(s+i*(Tn(Bi(e.g))-s))),b:Zi(Zr(o+i*(Tn(Bi(e.b))-o))),a:t.a+i*(e.a-t.a)}}function ao(t,e,i){if(t){let n=Al(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,e===0?360:1)),n=kl(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function tf(t,e){return t&&Object.assign(e||{},t)}function au(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Zi(t[3]))):(e=tf(t,{r:0,g:0,b:0,a:1}),e.a=Zi(e.a)),e}function Nv(t){return t.charAt(0)==="r"?Dv(t):Iv(t)}class Ls{constructor(e){if(e instanceof Ls)return e;const i=typeof e;let n;i==="object"?n=au(e):i==="string"&&(n=bv(e)||Tv(e)||Nv(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=tf(this._rgb);return e&&(e.a=Bi(e.a)),e}set rgb(e){this._rgb=au(e)}rgbString(){return this._valid?Rv(this._rgb):void 0}hexString(){return this._valid?vv(this._rgb):void 0}hslString(){return this._valid?Mv(this._rgb):void 0}mix(e,i){if(e){const n=this.rgb,s=e.rgb;let o;const r=i===o?.5:i,a=2*r-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*s.r+.5,n.g=255&c*n.g+o*s.g+.5,n.b=255&c*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(e,i){return e&&(this._rgb=Ov(this._rgb,e._rgb,i)),this}clone(){return new Ls(this.rgb)}alpha(e){return this._rgb.a=Zi(e),this}clearer(e){const i=this._rgb;return i.a*=1-e,this}greyscale(){const e=this._rgb,i=Ks(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){const i=this._rgb;return i.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ao(this._rgb,2,e),this}darken(e){return ao(this._rgb,2,-e),this}saturate(e){return ao(this._rgb,1,e),this}desaturate(e){return ao(this._rgb,1,-e),this}rotate(e){return Cv(this._rgb,e),this}}/*!
 * Chart.js v4.1.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */function Ii(){}const Lv=(()=>{let t=0;return()=>t++})();function Le(t){return t===null||typeof t>"u"}function et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function De(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ut(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Xt(t,e){return ut(t)?t:e}function xe(t,e){return typeof t>"u"?e:t}const Fv=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,nf=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Xe(t,e,i){if(t&&typeof t.call=="function")return t.apply(i,e)}function je(t,e,i,n){let s,o,r;if(et(t))if(o=t.length,n)for(s=o-1;s>=0;s--)e.call(i,t[s],s);else for(s=0;s<o;s++)e.call(i,t[s],s);else if(De(t))for(r=Object.keys(t),o=r.length,s=0;s<o;s++)e.call(i,t[r[s]],r[s])}function ir(t,e){let i,n,s,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(s=t[i],o=e[i],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function nr(t){if(et(t))return t.map(nr);if(De(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let s=0;for(;s<n;++s)e[i[s]]=nr(t[i[s]]);return e}return t}function sf(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $v(t,e,i,n){if(!sf(t))return;const s=e[t],o=i[t];De(s)&&De(o)?Fs(s,o,n):e[t]=nr(o)}function Fs(t,e,i){const n=et(e)?e:[e],s=n.length;if(!De(t))return t;i=i||{};const o=i.merger||$v;let r;for(let a=0;a<s;++a){if(r=n[a],!De(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],t,r,i)}return t}function Es(t,e){return Fs(t,e,{merger:Hv})}function Hv(t,e,i){if(!sf(t))return;const n=e[t],s=i[t];De(n)&&De(s)?Es(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=nr(s))}const lu={"":t=>t,x:t=>t.x,y:t=>t.y};function Uv(t){const e=t.split("."),i=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function Wv(t){const e=Uv(t);return i=>{for(const n of e){if(n==="")break;i=i&&i[n]}return i}}function sn(t,e){return(lu[e]||(lu[e]=Wv(e)))(t)}function Il(t){return t.charAt(0).toUpperCase()+t.slice(1)}const li=t=>typeof t<"u",on=t=>typeof t=="function",cu=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function Gv(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const rt=Math.PI,tt=2*rt,Vv=tt+rt,sr=Number.POSITIVE_INFINITY,jv=rt/180,ht=rt/2,dn=rt/4,uu=rt*2/3,zi=Math.log10,Ei=Math.sign;function As(t,e,i){return Math.abs(t-e)<i}function hu(t){const e=Math.round(t);t=As(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(zi(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function zv(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n===0&&(e.push(n),e.push(t/n));return i===(i|0)&&e.push(i),e.sort((s,o)=>s-o).pop(),e}function qn(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Kv(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function of(t,e,i){let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function hi(t){return t*(rt/180)}function Cl(t){return t*(180/rt)}function du(t){if(!ut(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function rf(t,e){const i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i);return o<-.5*rt&&(o+=tt),{angle:o,distance:s}}function Da(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function qv(t,e){return(t-e+Vv)%tt-rt}function Zt(t){return(t%tt+tt)%tt}function $s(t,e,i,n){const s=Zt(t),o=Zt(e),r=Zt(i),a=Zt(o-s),l=Zt(r-s),c=Zt(s-o),u=Zt(s-r);return s===o||s===r||n&&o===r||a>l&&c<u}function St(t,e,i){return Math.max(e,Math.min(i,t))}function Yv(t){return St(t,-32768,32767)}function Oi(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function Ml(t,e,i){i=i||(r=>t[r]<e);let n=t.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,i(o)?s=o:n=o;return{lo:s,hi:n}}const Ni=(t,e,i,n)=>Ml(t,i,n?s=>{const o=t[s][e];return o<i||o===i&&t[s+1][e]===i}:s=>t[s][e]<i),Xv=(t,e,i)=>Ml(t,i,n=>t[n][e]>=i);function Jv(t,e,i){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>i;)s--;return n>0||s<t.length?t.slice(n,s):t}const af=["push","pop","shift","splice","unshift"];function Zv(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),af.forEach(i=>{const n="_onData"+Il(i),s=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function fu(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(af.forEach(o=>{delete t[o]}),delete t._chartjs)}function lf(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}const cf=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function uf(t,e){let i=[],n=!1;return function(...s){i=s,n||(n=!0,cf.call(window,()=>{n=!1,t.apply(e,i)}))}}function Qv(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const Pl=t=>t==="start"?"left":t==="end"?"right":"center",Ct=(t,e,i)=>t==="start"?e:t==="end"?i:(e+i)/2,eS=(t,e,i,n)=>t===(n?"left":"right")?i:t==="center"?(e+i)/2:e;function hf(t,e,i){const n=e.length;let s=0,o=n;if(t._sorted){const{iScale:r,_parsed:a}=t,l=r.axis,{min:c,max:u,minDefined:h,maxDefined:f}=r.getUserBounds();h&&(s=St(Math.min(Ni(a,r.axis,c).lo,i?n:Ni(e,l,r.getPixelForValue(c)).lo),0,n-1)),f?o=St(Math.max(Ni(a,r.axis,u,!0).hi+1,i?0:Ni(e,l,r.getPixelForValue(u),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function df(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=s,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),o}const lo=t=>t===0||t===1,pu=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*tt/i)),gu=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*tt/i)+1,xs={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ht)+1,easeOutSine:t=>Math.sin(t*ht),easeInOutSine:t=>-.5*(Math.cos(rt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>lo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>lo(t)?t:pu(t,.075,.3),easeOutElastic:t=>lo(t)?t:gu(t,.075,.3),easeInOutElastic(t){return lo(t)?t:t<.5?.5*pu(t*2,.1125,.45):.5+.5*gu(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-xs.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?xs.easeInBounce(t*2)*.5:xs.easeOutBounce(t*2-1)*.5+.5};function ff(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function mu(t){return ff(t)?t:new Ls(t)}function Qr(t){return ff(t)?t:new Ls(t).saturate(.5).darken(.1).hexString()}const tS=["x","y","borderWidth","radius","tension"],iS=["color","borderColor","backgroundColor"];function nS(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:iS},numbers:{type:"number",properties:tS}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function sS(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _u=new Map;function oS(t,e){e=e||{};const i=t+JSON.stringify(e);let n=_u.get(i);return n||(n=new Intl.NumberFormat(t,e),_u.set(i,n)),n}function qs(t,e,i){return oS(e,i).format(t)}const pf={values(t){return et(t)?t:""+t},numeric(t,e,i){if(t===0)return"0";const n=this.chart.options.locale;let s,o=t;if(i.length>1){const c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=rS(t,i)}const r=zi(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),qs(t,n,l)},logarithmic(t,e,i){if(t===0)return"0";const n=i[e].significand||t/Math.pow(10,Math.floor(zi(t)));return[1,2,3,5,10,15].includes(n)||e>.8*i.length?pf.numeric.call(this,t,e,i):""}};function rS(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var kr={formatters:pf};function aS(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const In=Object.create(null),Ra=Object.create(null);function ks(t,e){if(!e)return t;const i=e.split(".");for(let n=0,s=i.length;n<s;++n){const o=i[n];t=t[o]||(t[o]=Object.create(null))}return t}function ea(t,e,i){return typeof e=="string"?Fs(ks(t,e),i):Fs(ks(t,""),e)}class lS{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Qr(s.backgroundColor),this.hoverBorderColor=(n,s)=>Qr(s.borderColor),this.hoverColor=(n,s)=>Qr(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return ea(this,e,i)}get(e){return ks(this,e)}describe(e,i){return ea(Ra,e,i)}override(e,i){return ea(In,e,i)}route(e,i,n,s){const o=ks(this,e),r=ks(this,n),a="_"+i;Object.defineProperties(o,{[a]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],c=r[s];return De(l)?Object.assign({},c,l):xe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(i=>i(this))}}var dt=new lS({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nS,sS,aS]);function cS(t){return!t||Le(t.size)||Le(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function or(t,e,i,n,s){let o=e[s];return o||(o=e[s]=t.measureText(s).width,i.push(s)),o>n&&(n=o),n}function uS(t,e,i,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let r=0;const a=i.length;let l,c,u,h,f;for(l=0;l<a;l++)if(h=i[l],h!=null&&et(h)!==!0)r=or(t,s,o,r,h);else if(et(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!et(f)&&(r=or(t,s,o,r,f));t.restore();const p=o.length/2;if(p>i.length){for(l=0;l<p;l++)delete s[o[l]];o.splice(0,p)}return r}function fn(t,e,i){const n=t.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((e-s)*n)/n+s}function bu(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Oa(t,e,i,n){gf(t,e,i,n,null)}function gf(t,e,i,n,s){let o,r,a,l,c,u,h,f;const p=e.pointStyle,b=e.rotation,_=e.radius;let v=(b||0)*jv;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(i,n),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),p){default:s?t.ellipse(i,n,s/2,_,0,0,tt):t.arc(i,n,_,0,tt),t.closePath();break;case"triangle":u=s?s/2:_,t.moveTo(i+Math.sin(v)*u,n-Math.cos(v)*_),v+=uu,t.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*_),v+=uu,t.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,r=Math.cos(v+dn)*l,h=Math.cos(v+dn)*(s?s/2-c:l),a=Math.sin(v+dn)*l,f=Math.sin(v+dn)*(s?s/2-c:l),t.arc(i-h,n-a,c,v-rt,v-ht),t.arc(i+f,n-r,c,v-ht,v),t.arc(i+h,n+a,c,v,v+ht),t.arc(i-f,n+r,c,v+ht,v+rt),t.closePath();break;case"rect":if(!b){l=Math.SQRT1_2*_,u=s?s/2:l,t.rect(i-u,n-l,2*u,2*l);break}v+=dn;case"rectRot":h=Math.cos(v)*(s?s/2:_),r=Math.cos(v)*_,a=Math.sin(v)*_,f=Math.sin(v)*(s?s/2:_),t.moveTo(i-h,n-a),t.lineTo(i+f,n-r),t.lineTo(i+h,n+a),t.lineTo(i-f,n+r),t.closePath();break;case"crossRot":v+=dn;case"cross":h=Math.cos(v)*(s?s/2:_),r=Math.cos(v)*_,a=Math.sin(v)*_,f=Math.sin(v)*(s?s/2:_),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+f,n-r),t.lineTo(i-f,n+r);break;case"star":h=Math.cos(v)*(s?s/2:_),r=Math.cos(v)*_,a=Math.sin(v)*_,f=Math.sin(v)*(s?s/2:_),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+f,n-r),t.lineTo(i-f,n+r),v+=dn,h=Math.cos(v)*(s?s/2:_),r=Math.cos(v)*_,a=Math.sin(v)*_,f=Math.sin(v)*(s?s/2:_),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+f,n-r),t.lineTo(i-f,n+r);break;case"line":r=s?s/2:Math.cos(v)*_,a=Math.sin(v)*_,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(v)*(s?s/2:_),n+Math.sin(v)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Hs(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Ir(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Cr(t){t.restore()}function hS(t,e,i,n,s){if(!e)return t.lineTo(i.x,i.y);if(s==="middle"){const o=(e.x+i.x)/2;t.lineTo(o,e.y),t.lineTo(o,i.y)}else s==="after"!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function dS(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Cn(t,e,i,n,s,o={}){const r=et(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,fS(t,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&gS(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Le(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,i,n,o.maxWidth)),t.fillText(c,i,n,o.maxWidth),pS(t,i,n,c,o),n+=s.lineHeight;t.restore()}function fS(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Le(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function pS(t,e,i,n,s){if(s.strikethrough||s.underline){const o=t.measureText(n),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(r,u),t.lineTo(a,u),t.stroke()}}function gS(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function Us(t,e){const{x:i,y:n,w:s,h:o,radius:r}=e;t.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-ht,rt,!0),t.lineTo(i,n+o-r.bottomLeft),t.arc(i+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,rt,ht,!0),t.lineTo(i+s-r.bottomRight,n+o),t.arc(i+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,ht,0,!0),t.lineTo(i+s,n+r.topRight),t.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-ht,!0),t.lineTo(i+r.topLeft,n)}const mS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_S=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bS(t,e){const i=(""+t).match(mS);if(!i||i[1]==="normal")return e*1.2;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const yS=t=>+t||0;function Tl(t,e){const i={},n=De(e),s=n?Object.keys(e):e,o=De(t)?n?r=>xe(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of s)i[r]=yS(o(r));return i}function mf(t){return Tl(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xn(t){return Tl(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ot(t){const e=mf(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function _t(t,e){t=t||{},e=e||dt.font;let i=xe(t.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let n=xe(t.style,e.style);n&&!(""+n).match(_S)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:xe(t.family,e.family),lineHeight:bS(xe(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:xe(t.weight,e.weight),string:""};return s.string=cS(s),s}function ps(t,e,i,n){let s=!0,o,r,a;for(o=0,r=t.length;o<r;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),i!==void 0&&et(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function vS(t,e,i){const{min:n,max:s}=t,o=nf(e,(s-n)/2),r=(a,l)=>i&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function ln(t,e){return Object.assign(Object.create(t),e)}function Bl(t,e=[""],i=t,n,s=()=>t[0]){li(n)||(n=vf("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:s,override:r=>Bl([r,...t],e,i,n)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete t[0][a],!0},get(r,a){return bf(r,a,()=>CS(a,e,t,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(r,a){return vu(r).includes(a)},ownKeys(r){return vu(r)},set(r,a,l){const c=r._storage||(r._storage=s());return r[a]=c[a]=l,delete r._keys,!0}})}function Yn(t,e,i,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:_f(t,n),setContext:o=>Yn(t,o,i,n),override:o=>Yn(t.override(o),e,i,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete t[r],!0},get(o,r,a){return bf(o,r,()=>wS(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(o,r,a){return t[r]=a,delete o[r],!0}})}function _f(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:i,indexable:n,isScriptable:on(i)?i:()=>i,isIndexable:on(n)?n:()=>n}}const SS=(t,e)=>t?t+Il(e):e,Dl=(t,e)=>De(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function bf(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=i();return t[e]=n,n}function wS(t,e,i){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=t;let a=n[e];return on(a)&&r.isScriptable(e)&&(a=ES(e,a,t,i)),et(a)&&a.length&&(a=AS(e,a,t,r.isIndexable)),Dl(e,a)&&(a=Yn(a,s,o&&o[e],r)),a}function ES(t,e,i,n){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(o,r||n),a.delete(t),Dl(t,e)&&(e=Rl(s._scopes,s,t,e)),e}function AS(t,e,i,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=i;if(li(o.index)&&n(t))e=e[o.index%e.length];else if(De(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Rl(c,s,t,u);e.push(Yn(h,o,r&&r[t],a))}}return e}function yf(t,e,i){return on(t)?t(e,i):t}const xS=(t,e)=>t===!0?e:typeof t=="string"?sn(e,t):void 0;function kS(t,e,i,n,s){for(const o of e){const r=xS(i,o);if(r){t.add(r);const a=yf(r._fallback,i,s);if(li(a)&&a!==i&&a!==n)return a}else if(r===!1&&li(n)&&i!==n)return null}return!1}function Rl(t,e,i,n){const s=e._rootScopes,o=yf(e._fallback,i,n),r=[...t,...s],a=new Set;a.add(n);let l=yu(a,r,i,o||i,n);return l===null||li(o)&&o!==i&&(l=yu(a,r,o,l,n),l===null)?!1:Bl(Array.from(a),[""],s,o,()=>IS(e,i,n))}function yu(t,e,i,n,s){for(;i;)i=kS(t,e,i,n,s);return i}function IS(t,e,i){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return et(s)&&De(i)?i:s||{}}function CS(t,e,i,n){let s;for(const o of e)if(s=vf(SS(o,t),i),li(s))return Dl(t,s)?Rl(i,n,t,s):s}function vf(t,e){for(const i of e){if(!i)continue;const n=i[t];if(li(n))return n}}function vu(t){let e=t._keys;return e||(e=t._keys=MS(t._scopes)),e}function MS(t){const e=new Set;for(const i of t)for(const n of Object.keys(i).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}function Sf(t,e,i,n){const{iScale:s}=t,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+i,u=e[c],r[a]={r:s.parse(sn(u,o),c)};return r}const PS=Number.EPSILON||1e-14,Xn=(t,e)=>e<t.length&&!t[e].skip&&t[e],wf=t=>t==="x"?"y":"x";function TS(t,e,i,n){const s=t.skip?e:t,o=e,r=i.skip?e:i,a=Da(o,s),l=Da(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=n*c,f=n*u;return{previous:{x:o.x-h*(r.x-s.x),y:o.y-h*(r.y-s.y)},next:{x:o.x+f*(r.x-s.x),y:o.y+f*(r.y-s.y)}}}function BS(t,e,i){const n=t.length;let s,o,r,a,l,c=Xn(t,0);for(let u=0;u<n-1;++u)if(l=c,c=Xn(t,u+1),!(!l||!c)){if(As(e[u],0,PS)){i[u]=i[u+1]=0;continue}s=i[u]/e[u],o=i[u+1]/e[u],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),i[u]=s*r*e[u],i[u+1]=o*r*e[u])}}function DS(t,e,i="x"){const n=wf(i),s=t.length;let o,r,a,l=Xn(t,0);for(let c=0;c<s;++c){if(r=a,a=l,l=Xn(t,c+1),!a)continue;const u=a[i],h=a[n];r&&(o=(u-r[i])/3,a[`cp1${i}`]=u-o,a[`cp1${n}`]=h-o*e[c]),l&&(o=(l[i]-u)/3,a[`cp2${i}`]=u+o,a[`cp2${n}`]=h+o*e[c])}}function RS(t,e="x"){const i=wf(e),n=t.length,s=Array(n).fill(0),o=Array(n);let r,a,l,c=Xn(t,0);for(r=0;r<n;++r)if(a=l,l=c,c=Xn(t,r+1),!!l){if(c){const u=c[e]-l[e];s[r]=u!==0?(c[i]-l[i])/u:0}o[r]=a?c?Ei(s[r-1])!==Ei(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}BS(t,s,o),DS(t,o,e)}function co(t,e,i){return Math.max(Math.min(t,i),e)}function OS(t,e){let i,n,s,o,r,a=Hs(t[0],e);for(i=0,n=t.length;i<n;++i)r=o,o=a,a=i<n-1&&Hs(t[i+1],e),o&&(s=t[i],r&&(s.cp1x=co(s.cp1x,e.left,e.right),s.cp1y=co(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=co(s.cp2x,e.left,e.right),s.cp2y=co(s.cp2y,e.top,e.bottom)))}function NS(t,e,i,n,s){let o,r,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")RS(t,s);else{let c=n?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],l=TS(c,a,t[Math.min(o+1,r-(n?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&OS(t,i)}function Ef(){return typeof window<"u"&&typeof document<"u"}function Ol(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function rr(t,e,i){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[i])):n=t,n}const Mr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function LS(t,e){return Mr(t).getPropertyValue(e)}const FS=["top","right","bottom","left"];function kn(t,e,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const o=FS[s];n[o]=parseFloat(t[e+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const $S=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function HS(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:s,offsetY:o}=n;let r=!1,a,l;if($S(s,o,t.target))a=s,l=o;else{const c=e.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function _n(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:n}=e,s=Mr(i),o=s.boxSizing==="border-box",r=kn(s,"padding"),a=kn(s,"border","width"),{x:l,y:c,box:u}=HS(t,i),h=r.left+(u&&a.left),f=r.top+(u&&a.top);let{width:p,height:b}=e;return o&&(p-=r.width+a.width,b-=r.height+a.height),{x:Math.round((l-h)/p*i.width/n),y:Math.round((c-f)/b*i.height/n)}}function US(t,e,i){let n,s;if(e===void 0||i===void 0){const o=Ol(t);if(!o)e=t.clientWidth,i=t.clientHeight;else{const r=o.getBoundingClientRect(),a=Mr(o),l=kn(a,"border","width"),c=kn(a,"padding");e=r.width-c.width-l.width,i=r.height-c.height-l.height,n=rr(a.maxWidth,o,"clientWidth"),s=rr(a.maxHeight,o,"clientHeight")}}return{width:e,height:i,maxWidth:n||sr,maxHeight:s||sr}}const uo=t=>Math.round(t*10)/10;function WS(t,e,i,n){const s=Mr(t),o=kn(s,"margin"),r=rr(s.maxWidth,t,"clientWidth")||sr,a=rr(s.maxHeight,t,"clientHeight")||sr,l=US(t,e,i);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=kn(s,"border","width"),p=kn(s,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=uo(Math.min(c,r,l.maxWidth)),u=uo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=uo(c/2)),(e!==void 0||i!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=uo(Math.floor(u*n))),{width:c,height:u}}function Su(t,e,i){const n=e||1,s=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const r=t.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(t.currentDevicePixelRatio=n,r.height=s,r.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const GS=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function wu(t,e){const i=LS(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function bn(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function VS(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:n==="middle"?i<.5?t.y:e.y:n==="after"?i<1?t.y:e.y:i>0?e.y:t.y}}function jS(t,e,i,n){const s={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=bn(t,s,i),a=bn(s,o,i),l=bn(o,e,i),c=bn(r,a,i),u=bn(a,l,i);return bn(c,u,i)}const zS=function(t,e){return{x(i){return t+t+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},KS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Vn(t,e,i){return t?zS(e,i):KS()}function Af(t,e){let i,n;(e==="ltr"||e==="rtl")&&(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function xf(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function kf(t){return t==="angle"?{between:$s,compare:qv,normalize:Zt}:{between:Oi,compare:(e,i)=>e-i,normalize:e=>e}}function Eu({start:t,end:e,count:i,loop:n,style:s}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i===0,style:s}}function qS(t,e,i){const{property:n,start:s,end:o}=i,{between:r,normalize:a}=kf(n),l=e.length;let{start:c,end:u,loop:h}=t,f,p;if(h){for(c+=l,u+=l,f=0,p=l;f<p&&r(a(e[c%l][n]),s,o);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function If(t,e,i){if(!i)return[t];const{property:n,start:s,end:o}=i,r=e.length,{compare:a,between:l,normalize:c}=kf(n),{start:u,end:h,loop:f,style:p}=qS(t,e,i),b=[];let _=!1,v=null,y,w,E;const x=()=>l(s,E,y)&&a(s,E)!==0,I=()=>a(o,y)===0||l(o,E,y),T=()=>_||x(),H=()=>!_||I();for(let V=u,Q=u;V<=h;++V)w=e[V%r],!w.skip&&(y=c(w[n]),y!==E&&(_=l(y,s,o),v===null&&T()&&(v=a(y,s)===0?V:Q),v!==null&&H()&&(b.push(Eu({start:v,end:V,loop:f,count:r,style:p})),v=null),Q=V,E=y));return v!==null&&b.push(Eu({start:v,end:h,loop:f,count:r,style:p})),b}function Cf(t,e){const i=[],n=t.segments;for(let s=0;s<n.length;s++){const o=If(n[s],t.points,e);o.length&&i.push(...o)}return i}function YS(t,e,i,n){let s=0,o=e-1;if(i&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,i&&(o+=s);o>s&&t[o%e].skip;)o--;return o%=e,{start:s,end:o}}function XS(t,e,i,n){const s=t.length,o=[];let r=e,a=t[e],l;for(l=e+1;l<=i;++l){const c=t[l%s];c.skip||c.stop?a.skip||(n=!1,o.push({start:e%s,end:(l-1)%s,loop:n}),e=r=c.stop?l:null):(r=l,a.skip&&(e=l)),a=c}return r!==null&&o.push({start:e%s,end:r%s,loop:n}),o}function JS(t,e){const i=t.points,n=t.options.spanGaps,s=i.length;if(!s)return[];const o=!!t._loop,{start:r,end:a}=YS(i,s,o,n);if(n===!0)return Au(t,[{start:r,end:a,loop:o}],i,e);const l=a<r?a+s:a,c=!!t._fullLoop&&r===0&&a===s-1;return Au(t,XS(i,r,l,c),i,e)}function Au(t,e,i,n){return!n||!n.setContext||!i?e:ZS(t,e,i,n)}function ZS(t,e,i,n){const s=t._chart.getContext(),o=xu(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=i.length,c=[];let u=o,h=e[0].start,f=h;function p(b,_,v,y){const w=a?-1:1;if(b!==_){for(b+=l;i[b%l].skip;)b-=w;for(;i[_%l].skip;)_+=w;b%l!==_%l&&(c.push({start:b%l,end:_%l,loop:v,style:y}),u=y,h=_%l)}}for(const b of e){h=a?h:b.start;let _=i[h%l],v;for(f=h+1;f<=b.end;f++){const y=i[f%l];v=xu(n.setContext(ln(s,{type:"segment",p0:_,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),QS(v,u)&&p(h,f-1,b.loop,u),_=y,u=v}h<f-1&&p(h,f-1,b.loop,u)}return c}function xu(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function QS(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}/*!
 * Chart.js v4.1.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class ew{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,n,s){const o=i.listeners[s],r=i.duration;o.forEach(a=>a({chart:e,initial:i.initial,numSteps:r,currentStep:Math.min(n-i.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=cf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,e,"progress")),o.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),i+=o.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){const i=this._charts;let n=i.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,n)),n}listen(e,i,n){this._getAnims(e).listeners[i].push(n)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){const i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){const i=this._charts.get(e);if(!i||!i.items.length)return;const n=i.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Mi=new ew;const ku="transparent",tw={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const n=mu(t||ku),s=n.valid&&mu(e||ku);return s&&s.valid?s.mix(n,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class iw{constructor(e,i,n,s){const o=i[n];s=ps([e.to,s,o,e.from]);const r=ps([e.from,o,s]);this._active=!0,this._fn=e.fn||tw[e.type||typeof r],this._easing=xs[e.easing]||xs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(e,i,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=ps([e.to,i,s,e.from]),this._from=ps([e.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const i=e-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=o;return}l=i/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((i,n)=>{e.push({res:i,rej:n})})}_notify(e){const i=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}}class Mf{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!De(e))return;const i=Object.keys(dt.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!De(o))return;const r={};for(const a of i)r[a]=o[a];(et(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(e,i){const n=i.options,s=sw(e,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&nw(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,i){const n=this._properties,s=[],o=e.$animations||(e.$animations={}),r=Object.keys(i),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,i));continue}const u=i[c];let h=o[c];const f=n.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}o[c]=h=new iw(f,e,c,u),s.push(h)}return s}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}const n=this._createAnimations(e,i);if(n.length)return Mi.add(this._chart,n),!0}}function nw(t,e){const i=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const o=t[n[s]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function sw(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Iu(t,e){const i=t&&t.options||{},n=i.reverse,s=i.min===void 0?e:0,o=i.max===void 0?e:0;return{start:n?o:s,end:n?s:o}}function ow(t,e,i){if(i===!1)return!1;const n=Iu(t,i),s=Iu(e,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function rw(t){let e,i,n,s;return De(t)?(e=t.top,i=t.right,n=t.bottom,s=t.left):e=i=n=s=t,{top:e,right:i,bottom:n,left:s,disabled:t===!1}}function Pf(t,e){const i=[],n=t._getSortedDatasetMetas(e);let s,o;for(s=0,o=n.length;s<o;++s)i.push(n[s].index);return i}function Cu(t,e,i,n={}){const s=t.keys,o=n.mode==="single";let r,a,l,c;if(e!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===i){if(n.all)continue;break}c=t.values[l],ut(c)&&(o||e===0||Ei(e)===Ei(c))&&(e+=c)}return e}}function aw(t){const e=Object.keys(t),i=new Array(e.length);let n,s,o;for(n=0,s=e.length;n<s;++n)o=e[n],i[n]={x:o,y:t[o]};return i}function Mu(t,e){const i=t&&t.options.stacked;return i||i===void 0&&e.stack!==void 0}function lw(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function cw(t){const{min:e,max:i,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function uw(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function Pu(t,e,i,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const o=t[s.index];if(i&&o>0||!i&&o<0)return s.index}return null}function Tu(t,e){const{chart:i,_cachedMeta:n}=t,s=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=lw(o,r,n),h=e.length;let f;for(let p=0;p<h;++p){const b=e[p],{[l]:_,[c]:v}=b,y=b._stacks||(b._stacks={});f=y[c]=uw(s,u,_),f[a]=v,f._top=Pu(f,r,!0,n.type),f._bottom=Pu(f,r,!1,n.type);const w=f._visualValues||(f._visualValues={});w[a]=v}}function ta(t,e){const i=t.scales;return Object.keys(i).filter(n=>i[n].axis===e).shift()}function hw(t,e){return ln(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function dw(t,e,i){return ln(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function ss(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const s of e){const o=s._stacks;if(!o||o[n]===void 0||o[n][i]===void 0)return;delete o[n][i],o[n]._visualValues!==void 0&&o[n]._visualValues[i]!==void 0&&delete o[n]._visualValues[i]}}}const ia=t=>t==="reset"||t==="none",Bu=(t,e)=>e?t:Object.assign({},t),fw=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Pf(i,!0),values:null};class pi{constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Mu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ss(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(h,f,p,b)=>h==="x"?f:h==="r"?b:p,o=i.xAxisID=xe(n.xAxisID,ta(e,"x")),r=i.yAxisID=xe(n.yAxisID,ta(e,"y")),a=i.rAxisID=xe(n.rAxisID,ta(e,"r")),l=i.indexAxis,c=i.iAxisID=s(l,o,r,a),u=i.vAxisID=s(l,r,o,a);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&fu(this._data,this),e._stacked&&ss(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),n=this._data;if(De(i))this._data=aw(i);else if(n!==i){if(n){fu(n,this);const s=this._cachedMeta;ss(s),s._parsed=[]}i&&Object.isExtensible(i)&&Zv(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=Mu(i.vScale,i),i.stack!==n.stack&&(s=!0,ss(i),i.stack=n.stack),this._resyncElements(e),(s||o!==i._stacked)&&Tu(this,i._parsed)}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=e===0&&i===s.length?!0:n._sorted,c=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=s,n._sorted=!0,f=s;else{et(s[e])?f=this.parseArrayData(n,s,e,i):De(s[e])?f=this.parseObjectData(n,s,e,i):f=this.parsePrimitiveData(n,s,e,i);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<i;++u)n._parsed[u+e]=h=f[u],l&&(p()&&(l=!1),c=h);n._sorted=l}r&&Tu(this,f)}parsePrimitiveData(e,i,n,s){const{iScale:o,vScale:r}=e,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,h=new Array(s);let f,p,b;for(f=0,p=s;f<p;++f)b=f+n,h[f]={[a]:u||o.parse(c[b],b),[l]:r.parse(i[b],b)};return h}parseArrayData(e,i,n,s){const{xScale:o,yScale:r}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+n,h=i[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(e,i,n,s){const{xScale:o,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,f,p;for(u=0,h=s;u<h;++u)f=u+n,p=i[f],c[u]={x:o.parse(sn(p,a),f),y:r.parse(sn(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,n){const s=this.chart,o=this._cachedMeta,r=i[e.axis],a={keys:Pf(s,!0),values:i._stacks[e.axis]._visualValues};return Cu(a,r,o.index,{mode:n})}updateRangeFromParsed(e,i,n,s){const o=n[i.axis];let r=o===null?NaN:o;const a=s&&n._stacks[i.axis];s&&a&&(s.values=a,r=Cu(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,i){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&e===n.iScale,r=s.length,a=this._getOtherScale(e),l=fw(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=cw(a);let f,p;function b(){p=s[f];const _=p[a.axis];return!ut(p[e.axis])||u>_||h<_}for(f=0;f<r&&!(!b()&&(this.updateRangeFromParsed(c,e,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!b()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const i=this._cachedMeta._parsed,n=[];let s,o,r;for(s=0,o=i.length;s<o;++s)r=i[s][e.axis],ut(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,n=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=rw(xe(this.options.clip,ow(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],o=i.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,o,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?r.push(h):h.draw(e,o))}for(u=0;u<r.length;++u)r[u].draw(e,o)}getStyle(e,i){const n=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,i,n){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];o=r.$context||(r.$context=dw(this.getContext(),e,r)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=hw(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",n){const s=i==="active",o=this._cachedDataOpts,r=e+"-"+i,a=o[r],l=this.enableOptionSharing&&li(n);if(a)return Bu(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(dt.elements[e]),b=()=>this.getContext(n,s,i),_=c.resolveNamedOptions(f,p,b,h);return _.$shared&&(_.$shared=l,o[r]=Object.freeze(Bu(_,l))),_}_resolveAnimations(e,i,n){const s=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,i),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,n,i))}const c=new Mf(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||ia(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const n=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,n),{sharedOptions:o,includeOptions:r}}updateElement(e,i,n,s){ia(s)?Object.assign(e,n):this._resolveAnimations(i,s).update(e,n)}updateSharedOptions(e,i,n){e&&!ia(i)&&this._resolveAnimations(void 0,i).update(e,n)}_setStyle(e,i,n,s){e.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,i,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=n.length,o=i.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,n=!0){const s=this._cachedMeta,o=s.data,r=e+i;let a;const l=c=>{for(c.length+=i,a=c.length-1;a>=r;a--)c[a]=c[a-i]};for(l(o),a=e;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,i),n&&this.updateElements(o,e,i,"reset")}updateElements(e,i,n,s){}_removeElements(e,i){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,i);n._stacked&&ss(n,s)}n.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,n,s]=e;this[i](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}P(pi,"defaults",{}),P(pi,"datasetElementType",null),P(pi,"dataElementType",null);function pw(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let s=0,o=i.length;s<o;s++)n=n.concat(i[s].controller.getAllParsedValues(t));t._cache.$bar=lf(n.sort((s,o)=>s-o))}return t._cache.$bar}function gw(t){const e=t.iScale,i=pw(e,t.type);let n=e._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(li(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(s=0,o=i.length;s<o;++s)r=e.getPixelForValue(i[s]),l();for(a=void 0,s=0,o=e.ticks.length;s<o;++s)r=e.getPixelForTick(s),l();return n}function mw(t,e,i,n){const s=i.barThickness;let o,r;return Le(s)?(o=e.min*i.categoryPercentage,r=i.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:e.pixels[t]-o/2}}function _w(t,e,i,n){const s=e.pixels,o=s[t];let r=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=i.categoryPercentage;r===null&&(r=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:i.barPercentage,start:c}}function bw(t,e,i,n){const s=i.parse(t[0],n),o=i.parse(t[1],n),r=Math.min(s,o),a=Math.max(s,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),e[i.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function Tf(t,e,i,n){return et(t)?bw(t,e,i,n):e[i.axis]=i.parse(t,n),e}function Du(t,e,i,n){const s=t.iScale,o=t.vScale,r=s.getLabels(),a=s===o,l=[];let c,u,h,f;for(c=i,u=i+n;c<u;++c)f=e[c],h={},h[s.axis]=a||s.parse(r[c],c),l.push(Tf(f,h,o,c));return l}function na(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function yw(t,e,i){return t!==0?Ei(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function vw(t){let e,i,n,s,o;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(s="end",o="start"):(s="start",o="end"),{start:i,end:n,reverse:e,top:s,bottom:o}}function Sw(t,e,i,n){let s=e.borderSkipped;const o={};if(!s){t.borderSkipped=o;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=vw(t);s==="middle"&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=u:(o[Ru(u,r,a,l)]=!0,s=c)),o[Ru(s,r,a,l)]=!0,t.borderSkipped=o}function Ru(t,e,i,n){return n?(t=ww(t,e,i),t=Ou(t,i,e)):t=Ou(t,e,i),t}function ww(t,e,i){return t===e?i:t===i?e:t}function Ou(t,e,i){return t==="start"?e:t==="end"?i:t}function Ew(t,{inflateAmount:e},i){t.inflateAmount=e==="auto"?i===1?.33:0:e}class Mo extends pi{parsePrimitiveData(e,i,n,s){return Du(e,i,n,s)}parseArrayData(e,i,n,s){return Du(e,i,n,s)}parseObjectData(e,i,n,s){const{iScale:o,vScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let f,p,b,_;for(f=n,p=n+s;f<p;++f)_=i[f],b={},b[o.axis]=o.parse(sn(_,c),f),h.push(Tf(sn(_,u),b,r,f));return h}updateRangeFromParsed(e,i,n,s){super.updateRangeFromParsed(e,i,n,s);const o=n._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:n,vScale:s}=i,o=this.getParsed(e),r=o._custom,a=na(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,n,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,s);for(let p=i;p<i+n;p++){const b=this.getParsed(p),_=o||Le(b[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,u),y=(b._stacks||{})[a.axis],w={horizontal:c,base:_.base,enableBorderRadius:!y||na(b._custom)||r===y._top||r===y._bottom,x:c?_.head:v.center,y:c?v.center:_.head,height:c?v.size:Math.abs(_.size),width:c?Math.abs(_.size):v.size};f&&(w.options=h||this.resolveDataElementOptions(p,e[p].active?"active":s));const E=w.options||e[p].options;Sw(w,E,y,r),Ew(w,E,u.ratio),this.updateElement(e[p],p,w,s)}}_getStacks(e,i){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=n.options.stacked,r=[],a=l=>{const c=l.controller.getParsed(i),u=c&&c[l.vScale.axis];if(Le(u)||isNaN(u))return!0};for(const l of s)if(!(i!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,n){const s=this._getStacks(e,n),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){const e=this.options,i=this._cachedMeta,n=i.iScale,s=[];let o,r;for(o=0,r=i.data.length;o<r;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=e.barThickness;return{min:a||gw(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(e),c=l._custom,u=na(c);let h=l[i.axis],f=0,p=n?this.applyStack(i,l,n):h,b,_;p!==h&&(f=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&Ei(h)!==Ei(c.barEnd)&&(f=0),f+=h);const v=!Le(o)&&!u?o:f;let y=i.getPixelForValue(v);if(this.chart.getDataVisibility(e)?b=i.getPixelForValue(f+p):b=y,_=b-y,Math.abs(_)<r){_=yw(_,i,a)*r,h===a&&(y-=_/2);const w=i.getPixelForDecimal(0),E=i.getPixelForDecimal(1),x=Math.min(w,E),I=Math.max(w,E);y=Math.max(Math.min(y,I),x),b=y+_,n&&!u&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(b)-i.getValueForPixel(y))}if(y===i.getPixelForValue(a)){const w=Ei(_)*i.getLineWidthForValue(a)/2;y+=w,_-=w}return{size:_,base:y,head:b,center:b+_/2}}_calculateBarIndexPixels(e,i){const n=i.scale,s=this.options,o=s.skipNull,r=xe(s.maxBarThickness,1/0);let a,l;if(i.grouped){const c=o?this._getStackCount(e):i.stackCount,u=s.barThickness==="flex"?_w(e,i,s,c):mw(e,i,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(r,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,i=e.vScale,n=e.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&n[o].draw(this._ctx)}}P(Mo,"id","bar"),P(Mo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),P(Mo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Po extends pi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,n,s){const o=super.parsePrimitiveData(e,i,n,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(e,i,n,s){const o=super.parseArrayData(e,i,n,s);for(let r=0;r<o.length;r++){const a=i[n+r];o[r]._custom=xe(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(e,i,n,s){const o=super.parseObjectData(e,i,n,s);for(let r=0;r<o.length;r++){const a=i[n+r];o[r]._custom=xe(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let n=e.length-1;n>=0;--n)i=Math.max(i,e[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(e),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(i,s),u=r.axis,h=a.axis;for(let f=i;f<i+n;f++){const p=e[f],b=!o&&this.getParsed(f),_={},v=_[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(b[u]),y=_[h]=o?a.getBasePixel():a.getPixelForValue(b[h]);_.skip=isNaN(v)||isNaN(y),c&&(_.options=l||this.resolveDataElementOptions(f,p.active?"active":s),o&&(_.options.radius=0)),this.updateElement(p,f,_,s)}}resolveDataElementOptions(e,i){const n=this.getParsed(e);let s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=xe(n&&n._custom,o),s}}P(Po,"id","bubble"),P(Po,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),P(Po,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Aw(t,e,i){let n=1,s=1,o=0,r=0;if(e<tt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),p=(E,x,I)=>$s(E,a,l,!0)?1:Math.max(x,x*i,I,I*i),b=(E,x,I)=>$s(E,a,l,!0)?-1:Math.min(x,x*i,I,I*i),_=p(0,c,h),v=p(ht,u,f),y=b(rt,c,h),w=b(rt+ht,u,f);n=(_-y)/2,s=(v-w)/2,o=-(_+y)/2,r=-(v+w)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}class wn extends pi{constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=l=>+n[l];if(De(n[e])){const{key:l="value"}=this._parsing;o=c=>+sn(n[c],l)}let r,a;for(r=e,a=e+i;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return hi(this.options.rotation-90)}_getCircumference(){return hi(this.options.circumference)}_getRotationExtents(){let e=tt,i=-tt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+r)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:n}=i,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(Fv(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:b,offsetY:_}=Aw(h,u,l),v=(n.width-r)/f,y=(n.height-r)/p,w=Math.max(Math.min(v,y)/2,0),E=nf(this.options.radius,w),x=Math.max(E*l,0),I=(E-x)/this._getVisibleDatasetWeightTotal();this.offsetX=b*E,this.offsetY=_*E,s.total=this.calculateTotal(),this.outerRadius=E-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*c,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/tt)}updateElements(e,i,n,s){const o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=o&&c.animateScale,p=f?0:this.innerRadius,b=f?0:this.outerRadius,{sharedOptions:_,includeOptions:v}=this._getSharedOptions(i,s);let y=this._getRotation(),w;for(w=0;w<i;++w)y+=this._circumference(w,o);for(w=i;w<i+n;++w){const E=this._circumference(w,o),x=e[w],I={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+E,circumference:E,outerRadius:b,innerRadius:p};v&&(I.options=_||this.resolveDataElementOptions(w,x.active?"active":s)),y+=E,this.updateElement(x,w,I,s)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let n=0,s;for(s=0;s<i.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?tt*(Math.abs(e)/i):0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=qs(i._parsed[e],n.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0;const n=this.chart;let s,o,r,a,l;if(!e){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),e=r.data,a=r.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let n=0,s=e.length;n<s;++n){const o=this.resolveDataElementOptions(n);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(e){return Math.max(xe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}P(wn,"id","doughnut"),P(wn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),P(wn,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"}),P(wn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return i.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});class To extends pi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=i,r=this.chart._animationsDisabled;let{start:a,count:l}=hf(i,s,r);this._drawStart=a,this._drawCount=l,df(i)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(i,s),f=r.axis,p=a.axis,{spanGaps:b,segment:_}=this.options,v=qn(b)?b:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||s==="none",w=i+n,E=e.length;let x=i>0&&this.getParsed(i-1);for(let I=0;I<E;++I){const T=e[I],H=y?T:{};if(I<i||I>=w){H.skip=!0;continue}const V=this.getParsed(I),Q=Le(V[p]),ae=H[f]=r.getPixelForValue(V[f],I),Z=H[p]=o||Q?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,V,l):V[p],I);H.skip=isNaN(ae)||isNaN(Z)||Q,H.stop=I>0&&Math.abs(V[f]-x[f])>v,_&&(H.parsed=V,H.raw=c.data[I]),h&&(H.options=u||this.resolveDataElementOptions(I,T.active?"active":s)),y||this.updateElement(T,I,H,s),x=V}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,n=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}P(To,"id","line"),P(To,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),P(To,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Is extends pi{constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=qs(i._parsed[e].r,n.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,n,s){return Sf.bind(this)(e,i,n,s)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,n=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/e.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,i,n,s){const o=s==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,f=c.getIndexAngle(0)-.5*rt;let p=f,b;const _=360/this.countVisibleElements();for(b=0;b<i;++b)p+=this._computeAngle(b,s,_);for(b=i;b<i+n;b++){const v=e[b];let y=p,w=p+this._computeAngle(b,s,_),E=r.getDataVisibility(b)?c.getDistanceFromCenterForValue(this.getParsed(b).r):0;p=w,o&&(l.animateScale&&(E=0),l.animateRotate&&(y=w=f));const x={x:u,y:h,innerRadius:0,outerRadius:E,startAngle:y,endAngle:w,options:this.resolveDataElementOptions(b,v.active?"active":s)};this.updateElement(v,b,x,s)}}countVisibleElements(){const e=this._cachedMeta;let i=0;return e.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,n){return this.chart.getDataVisibility(e)?hi(this.resolveDataElementOptions(e,i).angle||n):0}}P(Is,"id","polarArea"),P(Is,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),P(Is,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return i.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Na extends wn{}P(Na,"id","pie"),P(Na,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Bo extends pi{getLabelAndValue(e){const i=this._cachedMeta.vScale,n=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(e,i,n,s){return Sf.bind(this)(e,i,n,s)}update(e){const i=this._cachedMeta,n=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(n.points=s,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(n,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,n,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let a=i;a<i+n;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:u.x,f=r?o.yCenter:u.y,p={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(l,a,p,s)}}}P(Bo,"id","radar"),P(Bo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),P(Bo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Do extends pi{getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(e),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[e]||"",value:"("+a+", "+l+")"}}update(e){const i=this._cachedMeta,{data:n=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:r}=hf(i,n,s);if(this._drawStart=o,this._drawCount=r,df(i)&&(o=0,r=n.length),this.options.showLine){const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}this.updateElements(n,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(u),f=this.includeOptions(s,h),p=r.axis,b=a.axis,{spanGaps:_,segment:v}=this.options,y=qn(_)?_:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||s==="none";let E=i>0&&this.getParsed(i-1);for(let x=i;x<i+n;++x){const I=e[x],T=this.getParsed(x),H=w?I:{},V=Le(T[b]),Q=H[p]=r.getPixelForValue(T[p],x),ae=H[b]=o||V?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[b],x);H.skip=isNaN(Q)||isNaN(ae)||V,H.stop=x>0&&Math.abs(T[p]-E[p])>y,v&&(H.parsed=T,H.raw=c.data[x]),f&&(H.options=h||this.resolveDataElementOptions(x,I.active?"active":s)),w||this.updateElement(I,x,H,s),E=T}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=e.dataset,s=n.options&&n.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,r)/2}}P(Do,"id","scatter"),P(Do,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),P(Do,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var xw=Object.freeze({__proto__:null,BarController:Mo,BubbleController:Po,DoughnutController:wn,LineController:To,PolarAreaController:Is,PieController:Na,RadarController:Bo,ScatterController:Do});function pn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Nl{static override(e){Object.assign(Nl.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return pn()}parse(){return pn()}format(){return pn()}add(){return pn()}diff(){return pn()}startOf(){return pn()}endOf(){return pn()}}var kw={_date:Nl};function Iw(t,e,i,n){const{controller:s,data:o,_sorted:r}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&r&&o.length){const l=a._reversePixels?Xv:Ni;if(n){if(s._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(o,e,i-u),f=l(o,e,i+u);return{lo:h.lo,hi:f.hi}}}}else return l(o,e,i)}return{lo:0,hi:o.length-1}}function Ys(t,e,i,n,s){const o=t.getSortedVisibleDatasetMetas(),r=i[e];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:h,hi:f}=Iw(o[a],e,r,s);for(let p=h;p<=f;++p){const b=u[p];b.skip||n(b,c,p)}}}function Cw(t){const e=t.indexOf("x")!==-1,i=t.indexOf("y")!==-1;return function(n,s){const o=e?Math.abs(n.x-s.x):0,r=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function sa(t,e,i,n,s){const o=[];return!s&&!t.isPointInArea(e)||Ys(t,i,e,function(a,l,c){!s&&!Hs(a,t.chartArea,0)||a.inRange(e.x,e.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function Mw(t,e,i,n){let s=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:h}=rf(r,{x:e.x,y:e.y});$s(h,c,u)&&s.push({element:r,datasetIndex:a,index:l})}return Ys(t,i,e,o),s}function Pw(t,e,i,n,s,o){let r=[];const a=Cw(i);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const p=u.inRange(e.x,e.y,s);if(n&&!p)return;const b=u.getCenterPoint(s);if(!(!!o||t.isPointInArea(b))&&!p)return;const v=a(e,b);v<l?(r=[{element:u,datasetIndex:h,index:f}],l=v):v===l&&r.push({element:u,datasetIndex:h,index:f})}return Ys(t,i,e,c),r}function oa(t,e,i,n,s,o){return!o&&!t.isPointInArea(e)?[]:i==="r"&&!n?Mw(t,e,i,s):Pw(t,e,i,n,s,o)}function Nu(t,e,i,n,s){const o=[],r=i==="x"?"inXRange":"inYRange";let a=!1;return Ys(t,i,e,(l,c,u)=>{l[r](e[i],s)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),n&&!a?[]:o}var Tw={evaluateInteractionItems:Ys,modes:{index(t,e,i,n){const s=_n(e,t),o=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?sa(t,s,o,n,r):oa(t,s,o,!1,n,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,i,n){const s=_n(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;let a=i.intersect?sa(t,s,o,n,r):oa(t,s,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,i,n){const s=_n(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;return sa(t,s,o,n,r)},nearest(t,e,i,n){const s=_n(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;return oa(t,s,o,i.intersect,n,r)},x(t,e,i,n){const s=_n(e,t);return Nu(t,s,"x",i.intersect,n)},y(t,e,i,n){const s=_n(e,t);return Nu(t,s,"y",i.intersect,n)}}};const Bf=["left","top","right","bottom"];function os(t,e){return t.filter(i=>i.pos===e)}function Lu(t,e){return t.filter(i=>Bf.indexOf(i.pos)===-1&&i.box.axis===e)}function rs(t,e){return t.sort((i,n)=>{const s=e?n:i,o=e?i:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function Bw(t){const e=[];let i,n,s,o,r,a;for(i=0,n=(t||[]).length;i<n;++i)s=t[i],{position:o,options:{stack:r,stackWeight:a=1}}=s,e.push({index:i,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return e}function Dw(t){const e={};for(const i of t){const{stack:n,pos:s,stackWeight:o}=i;if(!n||!Bf.includes(s))continue;const r=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function Rw(t,e){const i=Dw(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];const{fullSize:l}=a.box,c=i[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&e.availableWidth,a.height=s):(a.width=n,a.height=u?u*s:l&&e.availableHeight)}return i}function Ow(t){const e=Bw(t),i=rs(e.filter(c=>c.box.fullSize),!0),n=rs(os(e,"left"),!0),s=rs(os(e,"right")),o=rs(os(e,"top"),!0),r=rs(os(e,"bottom")),a=Lu(e,"x"),l=Lu(e,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:os(e,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function Fu(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function Df(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Nw(t,e,i,n){const{pos:s,box:o}=i,r=t.maxPadding;if(!De(s)){i.size&&(t[s]-=i.size);const h=n[i.stack]||{size:0,count:1};h.size=Math.max(h.size,i.horizontal?o.height:o.width),i.size=h.size/h.count,t[s]+=i.size}o.getPadding&&Df(r,o.getPadding());const a=Math.max(0,e.outerWidth-Fu(r,t,"left","right")),l=Math.max(0,e.outerHeight-Fu(r,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:c,other:u}:{same:u,other:c}}function Lw(t){const e=t.maxPadding;function i(n){const s=Math.max(e[n]-t[n],0);return t[n]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function Fw(t,e){const i=e.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(e[r],i[r])}),o}return n(t?["left","right"]:["top","bottom"])}function gs(t,e,i,n){const s=[];let o,r,a,l,c,u;for(o=0,r=t.length,c=0;o<r;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,Fw(a.horizontal,e));const{same:h,other:f}=Nw(e,i,a,n);c|=h&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&gs(s,e,i,n)||u}function ho(t,e,i,n,s){t.top=i,t.left=e,t.right=e+n,t.bottom=i+s,t.width=n,t.height=s}function $u(t,e,i,n){const s=i.padding;let{x:o,y:r}=e;for(const a of t){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;li(c.start)&&(r=c.start),l.fullSize?ho(l,s.left,r,i.outerWidth-s.right-s.left,f):ho(l,e.left+c.placed,r,h,f),c.start=r,c.placed+=h,r=l.bottom}else{const h=e.h*u,f=c.size||l.width;li(c.start)&&(o=c.start),l.fullSize?ho(l,o,s.top,f,i.outerHeight-s.bottom-s.top):ho(l,o,e.top+c.placed,f,h),c.start=o,c.placed+=h,o=l.right}}e.x=o,e.y=r}var Rt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;i!==-1&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const s=Ot(t.options.layout.padding),o=Math.max(e-s.width,0),r=Math.max(i-s.height,0),a=Ow(t.boxes),l=a.vertical,c=a.horizontal;je(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,v)=>v.box.options&&v.box.options.display===!1?_:_+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:i,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),f=Object.assign({},s);Df(f,Ot(n));const p=Object.assign({maxPadding:f,w:o,h:r,x:s.left,y:s.top},s),b=Rw(l.concat(c),h);gs(a.fullSize,p,h,b),gs(l,p,h,b),gs(c,p,h,b)&&gs(l,p,h,b),Lw(p),$u(a.leftAndTop,p,h,b),p.x+=p.w,p.y+=p.h,$u(a.rightAndBottom,p,h,b),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},je(a.chartArea,_=>{const v=_.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Rf{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,n){}removeEventListener(e,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,n,s){return i=Math.max(0,i||e.width),n=n||e.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(e){return!0}updateConfig(e){}}class $w extends Rf{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ro="$chartjs",Hw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Hu=t=>t===null||t==="";function Uw(t,e){const i=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[Ro]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Hu(s)){const o=wu(t,"width");o!==void 0&&(t.width=o)}if(Hu(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=wu(t,"height");o!==void 0&&(t.height=o)}return t}const Of=GS?{passive:!0}:!1;function Ww(t,e,i){t.addEventListener(e,i,Of)}function Gw(t,e,i){t.canvas.removeEventListener(e,i,Of)}function Vw(t,e){const i=Hw[t.type]||t.type,{x:n,y:s}=_n(t,e);return{type:i,chart:e,native:t,x:n!==void 0?n:null,y:s!==void 0?s:null}}function ar(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function jw(t,e,i){const n=t.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||ar(a.addedNodes,n),r=r&&!ar(a.removedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function zw(t,e,i){const n=t.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||ar(a.removedNodes,n),r=r&&!ar(a.addedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ws=new Map;let Uu=0;function Nf(){const t=window.devicePixelRatio;t!==Uu&&(Uu=t,Ws.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function Kw(t,e){Ws.size||window.addEventListener("resize",Nf),Ws.set(t,e)}function qw(t){Ws.delete(t),Ws.size||window.removeEventListener("resize",Nf)}function Yw(t,e,i){const n=t.canvas,s=n&&Ol(n);if(!s)return;const o=uf((a,l)=>{const c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(s),Kw(t,o),r}function ra(t,e,i){i&&i.disconnect(),e==="resize"&&qw(t)}function Xw(t,e,i){const n=t.canvas,s=uf(o=>{t.ctx!==null&&i(Vw(o,t))},t);return Ww(n,e,s),s}class Jw extends Rf{acquireContext(e,i){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Uw(e,i),n):null}releaseContext(e){const i=e.canvas;if(!i[Ro])return!1;const n=i[Ro].initial;["height","width"].forEach(o=>{const r=n[o];Le(r)?i.removeAttribute(o):i.setAttribute(o,r)});const s=n.style||{};return Object.keys(s).forEach(o=>{i.style[o]=s[o]}),i.width=i.width,delete i[Ro],!0}addEventListener(e,i,n){this.removeEventListener(e,i);const s=e.$proxies||(e.$proxies={}),r={attach:jw,detach:zw,resize:Yw}[i]||Xw;s[i]=r(e,i,n)}removeEventListener(e,i){const n=e.$proxies||(e.$proxies={}),s=n[i];if(!s)return;({attach:ra,detach:ra,resize:ra}[i]||Gw)(e,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,n,s){return WS(e,i,n,s)}isAttached(e){const i=Ol(e);return!!(i&&i.isConnected)}}function Zw(t){return!Ef()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?$w:Jw}var yo;let $i=(yo=class{constructor(){P(this,"active",!1)}tooltipPosition(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}hasValue(){return qn(this.x)&&qn(this.y)}getProps(e,i){const n=this.$animations;if(!i||!n)return this;const s={};return e.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},P(yo,"defaults",{}),P(yo,"defaultRoutes"),yo);function Qw(t,e){const i=t.options.ticks,n=e8(t),s=Math.min(i.maxTicksLimit||n,n),o=i.major.enabled?i8(e):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return n8(e,c,o,r/s),c;const u=t8(o,e,s);if(r>0){let h,f;const p=r>1?Math.round((l-a)/(r-1)):null;for(fo(e,c,u,Le(p)?0:a-p,a),h=0,f=r-1;h<f;h++)fo(e,c,u,o[h],o[h+1]);return fo(e,c,u,l,Le(p)?e.length:l+p),c}return fo(e,c,u),c}function e8(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),s=t._maxLength/i;return Math.floor(Math.min(n,s))}function t8(t,e,i){const n=s8(t),s=e.length/i;if(!n)return Math.max(s,1);const o=zv(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function i8(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}function n8(t,e,i,n){let s=0,o=i[0],r;for(n=Math.ceil(n),r=0;r<t.length;r++)r===o&&(e.push(t[r]),s++,o=i[s*n])}function fo(t,e,i,n,s){const o=xe(n,0),r=Math.min(xe(s,t.length),t.length);let a=0,l,c,u;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),u=o;u<0;)a++,u=Math.round(o+a*i);for(c=Math.max(o,0);c<r;c++)c===u&&(e.push(t[c]),a++,u=Math.round(o+a*i))}function s8(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}const o8=t=>t==="left"?"right":t==="right"?"left":t,Wu=(t,e,i)=>e==="top"||e==="left"?t[e]+i:t[e]-i;function Gu(t,e){const i=[],n=t.length/e,s=t.length;let o=0;for(;o<s;o+=n)i.push(t[Math.floor(o)]);return i}function r8(t,e,i){const n=t.ticks.length,s=Math.min(e,n-1),o=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-o,r-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<o-a||l>r+a)))return l}function a8(t,e){je(t,i=>{const n=i.gc,s=n.length/2;let o;if(s>e){for(o=0;o<s;++o)delete i.data[n[o]];n.splice(0,s)}})}function as(t){return t.drawTicks?t.tickLength:0}function Vu(t,e){if(!t.display)return 0;const i=_t(t.font,e),n=Ot(t.padding);return(et(t.text)?t.text.length:1)*i.lineHeight+n.height}function l8(t,e){return ln(t,{scale:e,type:"scale"})}function c8(t,e,i){return ln(t,{tick:i,index:e,type:"tick"})}function u8(t,e,i){let n=Pl(t);return(i&&e!=="right"||!i&&e==="right")&&(n=o8(n)),n}function h8(t,e,i,n){const{top:s,left:o,bottom:r,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,p,b;const _=r-s,v=a-o;if(t.isHorizontal()){if(p=Ct(n,o,a),De(i)){const y=Object.keys(i)[0],w=i[y];b=u[y].getPixelForValue(w)+_-e}else i==="center"?b=(c.bottom+c.top)/2+_-e:b=Wu(t,i,e);f=a-o}else{if(De(i)){const y=Object.keys(i)[0],w=i[y];p=u[y].getPixelForValue(w)-v+e}else i==="center"?p=(c.left+c.right)/2-v+e:p=Wu(t,i,e);b=Ct(n,r,s),h=i==="left"?-ht:ht}return{titleX:p,titleY:b,maxWidth:f,rotation:h}}class Mn extends $i{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return e=Xt(e,Number.POSITIVE_INFINITY),i=Xt(i,Number.NEGATIVE_INFINITY),n=Xt(n,Number.POSITIVE_INFINITY),s=Xt(s,Number.NEGATIVE_INFINITY),{min:Xt(e,n),max:Xt(i,s),minDefined:ut(e),maxDefined:ut(i)}}getMinMax(e){let{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,e),s||(i=Math.min(i,r.min)),o||(n=Math.max(n,r.max));return i=o&&i>n?n:i,n=s&&i>n?i:n,{min:Xt(i,Xt(n,i)),max:Xt(n,Xt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xe(this.options.beforeUpdate,[this])}update(e,i,n){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=vS(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Gu(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Qw(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,e=!e),this._startPixel=i,this._endPixel=n,this._reversePixels=e,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xe(this.options.afterUpdate,[this])}beforeSetDimensions(){Xe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Xe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const i=this.options.ticks;let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n],o.label=Xe(i.callback,[o.value,n,e],this)}afterTickToLabelConversion(){Xe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,i=e.ticks,n=this.ticks.length,s=i.minRotation||0,o=i.maxRotation;let r=s,a,l,c;if(!this._isVisible()||!i.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=St(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/n:p/(n-1),h+6>a&&(a=p/(n-(e.offset?.5:1)),l=this.maxHeight-as(e.grid)-i.padding-Vu(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),r=Cl(Math.min(Math.asin(St((u.highest.height+6)/a,-1,1)),Math.asin(St(l/c,-1,1))-Math.asin(St(f/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Xe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Vu(s,i.options.font);if(a?(e.width=this.maxWidth,e.height=as(o)+l):(e.height=this.maxHeight,e.width=as(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),p=n.padding*2,b=hi(this.labelRotation),_=Math.cos(b),v=Math.sin(b);if(a){const y=n.mirror?0:v*h.width+_*f.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{const y=n.mirror?0:_*h.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+y+p)}this._calculatePadding(c,u,v,_)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,n,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=s*e.width,p=n*i.height):(f=n*e.height,p=s*i.width):o==="start"?p=i.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,p=i.width/2),this.paddingLeft=Math.max((f-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+r)*this.width/(this.width-h),0)}else{let u=i.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=i.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,n;for(i=0,n=e.length;i<n;i++)Le(e[i].label)&&(e.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=Gu(n,i)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,i){const{ctx:n,_longestTextCache:s}=this,o=[],r=[];let a=0,l=0,c,u,h,f,p,b,_,v,y,w,E;for(c=0;c<i;++c){if(f=e[c].label,p=this._resolveTickFontOptions(c),n.font=b=p.string,_=s[b]=s[b]||{data:{},gc:[]},v=p.lineHeight,y=w=0,!Le(f)&&!et(f))y=or(n,_.data,_.gc,y,f),w=v;else if(et(f))for(u=0,h=f.length;u<h;++u)E=f[u],!Le(E)&&!et(E)&&(y=or(n,_.data,_.gc,y,E),w+=v);o.push(y),r.push(w),a=Math.max(y,a),l=Math.max(w,l)}a8(s,i);const x=o.indexOf(a),I=r.indexOf(l),T=H=>({width:o[H]||0,height:r[H]||0});return{first:T(0),last:T(i-1),widest:T(x),highest:T(I),widths:o,heights:r}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const i=this._startPixel+e*this._length;return Yv(this._alignToPixels?fn(this.chart,i,0):i)}getDecimalForPixel(e){const i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){const i=this.ticks||[];if(e>=0&&e<i.length){const n=i[e];return n.$context||(n.$context=c8(this.getContext(),e,n))}return this.$context||(this.$context=l8(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,i=hi(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const i=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=as(o),p=[],b=a.setContext(this.getContext()),_=b.display?b.width:0,v=_/2,y=function(he){return fn(n,he,_)};let w,E,x,I,T,H,V,Q,ae,Z,ge,Re;if(r==="top")w=y(this.bottom),H=this.bottom-f,Q=w-v,Z=y(e.top)+v,Re=e.bottom;else if(r==="bottom")w=y(this.top),Z=e.top,Re=y(e.bottom)-v,H=w+v,Q=this.top+f;else if(r==="left")w=y(this.right),T=this.right-f,V=w-v,ae=y(e.left)+v,ge=e.right;else if(r==="right")w=y(this.left),ae=e.left,ge=y(e.right)-v,T=w+v,V=this.left+f;else if(i==="x"){if(r==="center")w=y((e.top+e.bottom)/2+.5);else if(De(r)){const he=Object.keys(r)[0],q=r[he];w=y(this.chart.scales[he].getPixelForValue(q))}Z=e.top,Re=e.bottom,H=w+v,Q=H+f}else if(i==="y"){if(r==="center")w=y((e.left+e.right)/2);else if(De(r)){const he=Object.keys(r)[0],q=r[he];w=y(this.chart.scales[he].getPixelForValue(q))}T=w-v,V=T-f,ae=e.left,ge=e.right}const Ye=xe(s.ticks.maxTicksLimit,h),se=Math.max(1,Math.ceil(h/Ye));for(E=0;E<h;E+=se){const he=this.getContext(E),q=o.setContext(he),ee=a.setContext(he),oe=q.lineWidth,Te=q.color,ve=ee.dash||[],_e=ee.dashOffset,at=q.tickWidth,ct=q.tickColor,yt=q.tickBorderDash||[],Ke=q.tickBorderDashOffset;x=r8(this,E,l),x!==void 0&&(I=fn(n,x,oe),c?T=V=ae=ge=I:H=Q=Z=Re=I,p.push({tx1:T,ty1:H,tx2:V,ty2:Q,x1:ae,y1:Z,x2:ge,y2:Re,width:oe,color:Te,borderDash:ve,borderDashOffset:_e,tickWidth:at,tickColor:ct,tickBorderDash:yt,tickBorderDashOffset:Ke}))}return this._ticksLength=h,this._borderValue=w,p}_computeLabelItems(e){const i=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=o,f=as(n.grid),p=f+u,b=h?-u:p,_=-hi(this.labelRotation),v=[];let y,w,E,x,I,T,H,V,Q,ae,Z,ge,Re="middle";if(s==="top")T=this.bottom-b,H=this._getXAxisLabelAlignment();else if(s==="bottom")T=this.top+b,H=this._getXAxisLabelAlignment();else if(s==="left"){const se=this._getYAxisLabelAlignment(f);H=se.textAlign,I=se.x}else if(s==="right"){const se=this._getYAxisLabelAlignment(f);H=se.textAlign,I=se.x}else if(i==="x"){if(s==="center")T=(e.top+e.bottom)/2+p;else if(De(s)){const se=Object.keys(s)[0],he=s[se];T=this.chart.scales[se].getPixelForValue(he)+p}H=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")I=(e.left+e.right)/2-p;else if(De(s)){const se=Object.keys(s)[0],he=s[se];I=this.chart.scales[se].getPixelForValue(he)}H=this._getYAxisLabelAlignment(f).textAlign}i==="y"&&(l==="start"?Re="top":l==="end"&&(Re="bottom"));const Ye=this._getLabelSizes();for(y=0,w=a.length;y<w;++y){E=a[y],x=E.label;const se=o.setContext(this.getContext(y));V=this.getPixelForTick(y)+o.labelOffset,Q=this._resolveTickFontOptions(y),ae=Q.lineHeight,Z=et(x)?x.length:1;const he=Z/2,q=se.color,ee=se.textStrokeColor,oe=se.textStrokeWidth;let Te=H;r?(I=V,H==="inner"&&(y===w-1?Te=this.options.reverse?"left":"right":y===0?Te=this.options.reverse?"right":"left":Te="center"),s==="top"?c==="near"||_!==0?ge=-Z*ae+ae/2:c==="center"?ge=-Ye.highest.height/2-he*ae+ae:ge=-Ye.highest.height+ae/2:c==="near"||_!==0?ge=ae/2:c==="center"?ge=Ye.highest.height/2-he*ae:ge=Ye.highest.height-Z*ae,h&&(ge*=-1),_!==0&&!se.showLabelBackdrop&&(I+=ae/2*Math.sin(_))):(T=V,ge=(1-Z)*ae/2);let ve;if(se.showLabelBackdrop){const _e=Ot(se.backdropPadding),at=Ye.heights[y],ct=Ye.widths[y];let yt=ge-_e.top,Ke=0-_e.left;switch(Re){case"middle":yt-=at/2;break;case"bottom":yt-=at;break}switch(H){case"center":Ke-=ct/2;break;case"right":Ke-=ct;break}ve={left:Ke,top:yt,width:ct+_e.width,height:at+_e.height,color:se.backdropColor}}v.push({label:x,font:Q,textOffset:ge,options:{rotation:_,color:q,strokeColor:ee,strokeWidth:oe,textAlign:Te,textBaseline:Re,translation:[I,T],backdrop:ve}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:i}=this.options;if(-hi(this.labelRotation))return e==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:i,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=e+o,l=r.widest.width;let c,u;return i==="left"?s?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):i==="right"?s?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:i},left:n,top:s,width:o,height:r}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(n,s,o,r),e.restore())}getLineWidthForValue(e){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(o=0,r=s.length;o<r;++o){const l=s[o];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:i,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=fn(e,this.left,r)-r/2,u=fn(e,this.right,a)+a/2,h=f=l):(h=fn(e,this.top,r)-r/2,f=fn(e,this.bottom,a)+a/2,c=u=l),i.save(),i.lineWidth=o.width,i.strokeStyle=o.color,i.beginPath(),i.moveTo(c,h),i.lineTo(u,f),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Ir(n,s);const o=this.getLabelItems(e);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;Cn(n,c,0,u,l,a)}s&&Cr(n)}drawTitle(){const{ctx:e,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;const o=_t(n.font),r=Ot(n.padding),a=n.align;let l=o.lineHeight/2;i==="bottom"||i==="center"||De(i)?(l+=r.bottom,et(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=h8(this,l,i,a);Cn(e,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:f,textAlign:u8(a,i,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,i=e.ticks&&e.ticks.z||0,n=xe(e.grid&&e.grid.z,-1),s=xe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Mn.prototype.draw?[{z:i,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,r;for(o=0,r=i.length;o<r;++o){const a=i[o];a[n]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const i=this.options.ticks.setContext(this.getContext(e));return _t(i.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class po{constructor(e,i,n){this.type=e,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const i=Object.getPrototypeOf(e);let n;p8(i)&&(n=this.register(i));const s=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,d8(e,r,n),this.override&&dt.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const i=this.items,n=e.id,s=this.scope;n in i&&delete i[n],s&&n in dt[s]&&(delete dt[s][n],this.override&&delete In[n])}}function d8(t,e,i){const n=Fs(Object.create(null),[i?dt.get(i):{},dt.get(e),t.defaults]);dt.set(e,n),t.defaultRoutes&&f8(e,t.defaultRoutes),t.descriptors&&dt.describe(e,t.descriptors)}function f8(t,e){Object.keys(e).forEach(i=>{const n=i.split("."),s=n.pop(),o=[t].concat(n).join("."),r=e[i].split("."),a=r.pop(),l=r.join(".");dt.route(o,s,l,a)})}function p8(t){return"id"in t&&"defaults"in t}class g8{constructor(){this.controllers=new po(pi,"datasets",!0),this.elements=new po($i,"elements"),this.plugins=new po(Object,"plugins"),this.scales=new po(Mn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,n){[...i].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):je(s,r=>{const a=n||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,i,n){const s=Il(e);Xe(n["before"+s],[],n),i[e](n),Xe(n["after"+s],[],n)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(e))return n}return this.plugins}_get(e,i,n){const s=i.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var yi=new g8;class m8{constructor(){this._init=[]}notify(e,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(o,e,i,n);return i==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,i,n,s){s=s||{};for(const o of e){const r=o.plugin,a=r[n],l=[i,s,o.options];if(Xe(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){Le(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){const n=e&&e.config,s=xe(n.options&&n.options.plugins,{}),o=_8(n);return s===!1&&!i?[]:y8(e,o,s,i)}_notifyStateChanges(e){const i=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),e,"stop"),this._notify(s(n,i),e,"start")}}function _8(t){const e={},i=[],n=Object.keys(yi.plugins.items);for(let o=0;o<n.length;o++)i.push(yi.getPlugin(n[o]));const s=t.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];i.indexOf(r)===-1&&(i.push(r),e[r.id]=!0)}return{plugins:i,localIds:e}}function b8(t,e){return!e&&t===!1?null:t===!0?{}:t}function y8(t,{plugins:e,localIds:i},n,s){const o=[],r=t.getContext();for(const a of e){const l=a.id,c=b8(n[l],s);c!==null&&o.push({plugin:a,options:v8(t.config,{plugin:a,local:i[l]},c,r)})}return o}function v8(t,{plugin:e,local:i},n,s){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(n,o);return i&&e.defaults&&r.push(e.defaults),t.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function La(t,e){const i=dt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function S8(t,e){let i=t;return t==="_index_"?i=e:t==="_value_"&&(i=e==="x"?"y":"x"),i}function w8(t,e){return t===e?"_index_":"_value_"}function E8(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function lr(t,e){if(t==="x"||t==="y"||t==="r"||(t=e.axis||E8(e.position)||t.length>1&&lr(t[0].toLowerCase(),e),t))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function A8(t,e){const i=In[t.type]||{scales:{}},n=e.scales||{},s=La(t.type,e),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!De(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=lr(r,a),c=w8(l,s),u=i.scales||{};o[r]=Es(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||La(a,e),u=(In[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=S8(h,l),p=r[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Es(o[p],[{axis:f},n[p],u[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];Es(a,[dt.scales[a.type],dt.scale])}),o}function Lf(t){const e=t.options||(t.options={});e.plugins=xe(e.plugins,{}),e.scales=A8(t,e)}function Ff(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function x8(t){return t=t||{},t.data=Ff(t.data),Lf(t),t}const ju=new Map,$f=new Set;function go(t,e){let i=ju.get(t);return i||(i=e(),ju.set(t,i),$f.add(i)),i}const ls=(t,e,i)=>{const n=sn(e,i);n!==void 0&&t.add(n)};class k8{constructor(e){this._config=x8(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ff(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Lf(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return go(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return go(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return go(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){const i=e.id,n=this.type;return go(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){const n=this._scopeCache;let s=n.get(e);return(!s||i)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,i,n){const{options:s,type:o}=this,r=this._cachedScopes(e,n),a=r.get(i);if(a)return a;const l=new Set;i.forEach(u=>{e&&(l.add(e),u.forEach(h=>ls(l,e,h))),u.forEach(h=>ls(l,s,h)),u.forEach(h=>ls(l,In[o]||{},h)),u.forEach(h=>ls(l,dt,h)),u.forEach(h=>ls(l,Ra,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),$f.has(i)&&r.set(i,c),c}chartOptionScopes(){const{options:e,type:i}=this;return[e,In[i]||{},dt.datasets[i]||{},{type:i},dt,Ra]}resolveNamedOptions(e,i,n,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=zu(this._resolverCache,e,s);let l=r;if(C8(r,i)){o.$shared=!1,n=on(n)?n():n;const c=this.createResolver(e,n,a);l=Yn(r,n,c)}for(const c of i)o[c]=l[c];return o}createResolver(e,i,n=[""],s){const{resolver:o}=zu(this._resolverCache,e,n);return De(i)?Yn(o,i,void 0,s):o}}function zu(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=i.join();let o=n.get(s);return o||(o={resolver:Bl(e,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}const I8=t=>De(t)&&Object.getOwnPropertyNames(t).reduce((e,i)=>e||on(t[i]),!1);function C8(t,e){const{isScriptable:i,isIndexable:n}=_f(t);for(const s of e){const o=i(s),r=n(s),a=(r||o)&&t[s];if(o&&(on(a)||I8(a))||r&&et(a))return!0}return!1}var M8="4.1.1";const P8=["top","bottom","left","right","chartArea"];function Ku(t,e){return t==="top"||t==="bottom"||P8.indexOf(t)===-1&&e==="x"}function qu(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function Yu(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),Xe(i&&i.onComplete,[t],e)}function T8(t){const e=t.chart,i=e.options.animation;Xe(i&&i.onProgress,[t],e)}function Hf(t){return Ef()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Oo={},Xu=t=>{const e=Hf(t);return Object.values(Oo).filter(i=>i.canvas===e).pop()};function B8(t,e,i){const n=Object.keys(t);for(const s of n){const o=+s;if(o>=e){const r=t[s];delete t[s],(i>0||o>e)&&(t[o+i]=r)}}}function D8(t,e,i,n){return!i||t.type==="mouseout"?null:n?e:t}function R8(t){const{xScale:e,yScale:i}=t;if(e&&i)return{left:e.left,right:e.right,top:i.top,bottom:i.bottom}}class Di{static register(...e){yi.add(...e),Ju()}static unregister(...e){yi.remove(...e),Ju()}constructor(e,i){const n=this.config=new k8(i),s=Hf(e),o=Xu(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Zw(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Lv(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new m8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Qv(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Oo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Mi.listen(this,"complete",Yu),Mi.listen(this,"progress",T8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:n,height:s,_aspectRatio:o}=this;return Le(e)?i&&o?o:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return yi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Su(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bu(this.canvas,this.ctx),this}stop(){return Mi.stop(this),this}resize(e,i){Mi.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,i,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Su(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Xe(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};je(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,i=e.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];i&&(o=o.concat(Object.keys(i).map(r=>{const a=i[r],l=lr(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),je(o,r=>{const a=r.options,l=a.id,c=lr(l,a),u=xe(a.type,r.dtype);(a.position===void 0||Ku(a.position,c)!==Ku(r.dposition))&&(a.position=r.dposition),s[l]=!0;let h=null;if(l in n&&n[l].type===u)h=n[l];else{const f=yi.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,e)}),je(s,(r,a)=>{r||delete n[a]}),je(n,r=>{Rt.configure(this,r,r.options),Rt.addBox(this,r)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,n=e.length;if(e.sort((s,o)=>s.index-o.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);e.splice(i,n-i)}this._sortedMetasets=e.slice(0).sort(qu("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((n,s)=>{i.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){const o=i[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||La(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=yi.getController(a),{datasetElementType:c,dataElementType:u}=dt.datasets[a];Object.assign(l,{dataElementType:yi.getElement(u),datasetElementType:c&&yi.getElement(c)}),r.controller=new l(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){je(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||je(o,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(qu("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){je(this.scales,e=>{Rt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!cu(i,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of i){const r=n==="_removeElements"?-o:o;B8(e,s,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=o=>new Set(e.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<i;o++)if(!cu(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Rt.update(this,this.width,this.height,e);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],je(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,on(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Mi.has(this)?this.attached&&!Mi.running(this)&&Mi.start(this):(this.draw(),Yu({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resize(n,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,n=[];let s,o;for(s=0,o=i.length;s<o;++s){const r=i[s];(!e||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,n=e._clip,s=!n.disabled,o=R8(e)||this.chartArea,r={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Ir(i,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),e.controller.draw(),s&&Cr(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Hs(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,n,s){const o=Tw.modes[i];return typeof o=="function"?o(this,e,n,s):[]}getDatasetMeta(e){const i=this.data.datasets[e],n=this._metasets;let s=n.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=ln(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(e,i){const n=this.getDatasetMeta(e);n.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,n){const s=n?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,s);li(i)?(o.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Mi.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),bu(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Oo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,n=(o,r)=>{i.addEventListener(this,o,r),e[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};je(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(i.removeEventListener(this,l,c),delete e[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():r()}unbindEvents(){je(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},je(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,n){const s=n?"set":"remove";let o,r,a,l;for(i==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],n=e.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!ir(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(e,i,n){return this._plugins.notify(this,e,i,n)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,n){const s=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(i,e),a=n?e:o(e,i);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,i){const n={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(e,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(e,i,n){const{_active:s=[],options:o}=this,r=i,a=this._getActiveElements(e,s,n,r),l=Gv(e),c=D8(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Xe(o.onHover,[e,a,this],this),l&&Xe(o.onClick,[e,a,this],this));const u=!ir(a,s);return(u||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,u}_getActiveElements(e,i,n,s){if(e.type==="mouseout")return[];if(!n)return i;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}P(Di,"defaults",dt),P(Di,"instances",Oo),P(Di,"overrides",In),P(Di,"registry",yi),P(Di,"version",M8),P(Di,"getChart",Xu);function Ju(){return je(Di.instances,t=>t._plugins.invalidate())}function O8(t,e,i){const{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(o,r,a,n-c,i+c),l>s?(c=s/l,t.arc(o,r,l,i+c,n-c,!0)):t.arc(o,r,s,i+ht,n-ht),t.closePath(),t.clip()}function N8(t){return Tl(t,["outerStart","outerEnd","innerStart","innerEnd"])}function L8(t,e,i,n){const s=N8(t.options.borderRadius),o=(i-e)/2,r=Math.min(o,n*e/2),a=l=>{const c=(i-Math.min(o,l))*n/2;return St(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:St(s.innerStart,0,r),innerEnd:St(s.innerEnd,0,r)}}function Bn(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function cr(t,e,i,n,s,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+n+i-c,0),f=u>0?u+n+i+c:0;let p=0;const b=s-l;if(n){const se=u>0?u-n:0,he=h>0?h-n:0,q=(se+he)/2,ee=q!==0?b*q/(q+n):b;p=(b-ee)/2}const _=Math.max(.001,b*h-i/rt)/h,v=(b-_)/2,y=l+v+p,w=s-v-p,{outerStart:E,outerEnd:x,innerStart:I,innerEnd:T}=L8(e,f,h,w-y),H=h-E,V=h-x,Q=y+E/H,ae=w-x/V,Z=f+I,ge=f+T,Re=y+I/Z,Ye=w-T/ge;if(t.beginPath(),o){const se=(Q+ae)/2;if(t.arc(r,a,h,Q,se),t.arc(r,a,h,se,ae),x>0){const oe=Bn(V,ae,r,a);t.arc(oe.x,oe.y,x,ae,w+ht)}const he=Bn(ge,w,r,a);if(t.lineTo(he.x,he.y),T>0){const oe=Bn(ge,Ye,r,a);t.arc(oe.x,oe.y,T,w+ht,Ye+Math.PI)}const q=(w-T/f+(y+I/f))/2;if(t.arc(r,a,f,w-T/f,q,!0),t.arc(r,a,f,q,y+I/f,!0),I>0){const oe=Bn(Z,Re,r,a);t.arc(oe.x,oe.y,I,Re+Math.PI,y-ht)}const ee=Bn(H,y,r,a);if(t.lineTo(ee.x,ee.y),E>0){const oe=Bn(H,Q,r,a);t.arc(oe.x,oe.y,E,y-ht,Q)}}else{t.moveTo(r,a);const se=Math.cos(Q)*h+r,he=Math.sin(Q)*h+a;t.lineTo(se,he);const q=Math.cos(ae)*h+r,ee=Math.sin(ae)*h+a;t.lineTo(q,ee)}t.closePath()}function F8(t,e,i,n,s){const{fullCircles:o,startAngle:r,circumference:a}=e;let l=e.endAngle;if(o){cr(t,e,i,n,l,s);for(let c=0;c<o;++c)t.fill();isNaN(a)||(l=r+(a%tt||tt))}return cr(t,e,i,n,l,s),t.fill(),l}function $8(t,e,i,n,s){const{fullCircles:o,startAngle:r,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=l.borderAlign==="inner";if(!c)return;h?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let f=e.endAngle;if(o){cr(t,e,i,n,f,s);for(let p=0;p<o;++p)t.stroke();isNaN(a)||(f=r+(a%tt||tt))}h&&O8(t,e,f),o||(cr(t,e,i,n,f,s),t.stroke())}class No extends $i{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,n){const s=this.getProps(["x","y"],n),{angle:o,distance:r}=rf(s,{x:e,y:i}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=this.options.spacing/2,b=xe(h,l-a)>=tt||$s(o,a,l),_=Oi(r,c+f,u+f);return b&&_}getCenterPoint(e){const{x:i,y:n,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,u=(s+o)/2,h=(r+a+c+l)/2;return{x:i+Math.cos(u)*h,y:n+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:n}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,r=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>tt?Math.floor(n/tt):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(rt,n||0)),c=s*l;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,F8(e,this,c,o,r),$8(e,this,c,o,r),e.restore()}}P(No,"id","arc"),P(No,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),P(No,"defaultRoutes",{backgroundColor:"backgroundColor"});function Uf(t,e,i=e){t.lineCap=xe(i.borderCapStyle,e.borderCapStyle),t.setLineDash(xe(i.borderDash,e.borderDash)),t.lineDashOffset=xe(i.borderDashOffset,e.borderDashOffset),t.lineJoin=xe(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=xe(i.borderWidth,e.borderWidth),t.strokeStyle=xe(i.borderColor,e.borderColor)}function H8(t,e,i){t.lineTo(i.x,i.y)}function U8(t){return t.stepped?hS:t.tension||t.cubicInterpolationMode==="monotone"?dS:H8}function Wf(t,e,i={}){const n=t.length,{start:s=0,end:o=n-1}=i,{start:r,end:a}=e,l=Math.max(s,r),c=Math.min(o,a),u=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!u?n+c-l:c-l}}function W8(t,e,i,n){const{points:s,options:o}=e,{count:r,start:a,loop:l,ilen:c}=Wf(s,i,n),u=U8(o);let{move:h=!0,reverse:f}=n||{},p,b,_;for(p=0;p<=c;++p)b=s[(a+(f?c-p:p))%r],!b.skip&&(h?(t.moveTo(b.x,b.y),h=!1):u(t,_,b,f,o.stepped),_=b);return l&&(b=s[(a+(f?c:0))%r],u(t,_,b,f,o.stepped)),!!l}function G8(t,e,i,n){const s=e.points,{count:o,start:r,ilen:a}=Wf(s,i,n),{move:l=!0,reverse:c}=n||{};let u=0,h=0,f,p,b,_,v,y;const w=x=>(r+(c?a-x:x))%o,E=()=>{_!==v&&(t.lineTo(u,v),t.lineTo(u,_),t.lineTo(u,y))};for(l&&(p=s[w(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=s[w(f)],p.skip)continue;const x=p.x,I=p.y,T=x|0;T===b?(I<_?_=I:I>v&&(v=I),u=(h*u+x)/++h):(E(),t.lineTo(x,I),b=T,h=0,_=v=I),y=I}E()}function Fa(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!i?G8:W8}function V8(t){return t.stepped?VS:t.tension||t.cubicInterpolationMode==="monotone"?jS:bn}function j8(t,e,i,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,i,n)&&s.closePath()),Uf(t,e.options),t.stroke(s)}function z8(t,e,i,n){const{segments:s,options:o}=e,r=Fa(e);for(const a of s)Uf(t,o,a.style),t.beginPath(),r(t,e,a,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}const K8=typeof Path2D=="function";function q8(t,e,i,n){K8&&!e.options.segment?j8(t,e,i,n):z8(t,e,i,n)}class Ki extends $i{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;NS(this._points,n,e,s,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=JS(this,this.options.segment))}first(){const e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){const e=this.segments,i=this.points,n=e.length;return n&&i[e[n-1].end]}interpolate(e,i){const n=this.options,s=e[i],o=this.points,r=Cf(this,{property:i,start:s,end:s});if(!r.length)return;const a=[],l=V8(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:h,end:f}=r[c],p=o[h],b=o[f];if(p===b){a.push(p);continue}const _=Math.abs((s-p[i])/(b[i]-p[i])),v=l(p,b,_,n.stepped);v[i]=e[i],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,i,n){return Fa(this)(e,this,i,n)}path(e,i,n){const s=this.segments,o=Fa(this);let r=this._loop;i=i||0,n=n||this.points.length-i;for(const a of s)r&=o(e,this,a,{start:i,end:i+n-1});return!!r}draw(e,i,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),q8(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}P(Ki,"id","line"),P(Ki,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),P(Ki,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),P(Ki,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Zu(t,e,i,n){const s=t.options,{[i]:o}=t.getProps([i],n);return Math.abs(e-o)<s.radius+s.hitRadius}class Lo extends $i{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,n){const s=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(e-o,2)+Math.pow(i-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return Zu(this,e,"x",i)}inYRange(e,i){return Zu(this,e,"y",i)}getCenterPoint(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const n=i&&e.borderWidth||0;return(i+n)*2}draw(e,i){const n=this.options;this.skip||n.radius<.1||!Hs(this,i,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Oa(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}P(Lo,"id","point"),P(Lo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),P(Lo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Gf(t,e){const{x:i,y:n,base:s,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=r/2,a=Math.min(i,s),l=Math.max(i,s),c=n-h,u=n+h):(h=o/2,a=i-h,l=i+h,c=Math.min(n,s),u=Math.max(n,s)),{left:a,top:c,right:l,bottom:u}}function qi(t,e,i,n){return t?0:St(e,i,n)}function Y8(t,e,i){const n=t.options.borderWidth,s=t.borderSkipped,o=mf(n);return{t:qi(s.top,o.top,0,i),r:qi(s.right,o.right,0,e),b:qi(s.bottom,o.bottom,0,i),l:qi(s.left,o.left,0,e)}}function X8(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,o=xn(s),r=Math.min(e,i),a=t.borderSkipped,l=n||De(s);return{topLeft:qi(!l||a.top||a.left,o.topLeft,0,r),topRight:qi(!l||a.top||a.right,o.topRight,0,r),bottomLeft:qi(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:qi(!l||a.bottom||a.right,o.bottomRight,0,r)}}function J8(t){const e=Gf(t),i=e.right-e.left,n=e.bottom-e.top,s=Y8(t,i/2,n/2),o=X8(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function aa(t,e,i,n){const s=e===null,o=i===null,a=t&&!(s&&o)&&Gf(t,n);return a&&(s||Oi(e,a.left,a.right))&&(o||Oi(i,a.top,a.bottom))}function Z8(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Q8(t,e){t.rect(e.x,e.y,e.w,e.h)}function la(t,e,i={}){const n=t.x!==i.x?-e:0,s=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-n,r=(t.y+t.h!==i.y+i.h?e:0)-s;return{x:t.x+n,y:t.y+s,w:t.w+o,h:t.h+r,radius:t.radius}}class Fo extends $i{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=J8(this),a=Z8(r.radius)?Us:Q8;e.save(),(r.w!==o.w||r.h!==o.h)&&(e.beginPath(),a(e,la(r,i,o)),e.clip(),a(e,la(o,-i,r)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,la(o,i)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,i,n){return aa(this,e,i,n)}inXRange(e,i){return aa(this,e,null,i)}inYRange(e,i){return aa(this,null,e,i)}getCenterPoint(e){const{x:i,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(i+s)/2:i,y:o?n:(n+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}P(Fo,"id","bar"),P(Fo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),P(Fo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var eE=Object.freeze({__proto__:null,ArcElement:No,LineElement:Ki,PointElement:Lo,BarElement:Fo});const $a=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Qu=$a.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Vf(t){return $a[t%$a.length]}function jf(t){return Qu[t%Qu.length]}function tE(t,e){return t.borderColor=Vf(e),t.backgroundColor=jf(e),++e}function iE(t,e){return t.backgroundColor=t.data.map(()=>Vf(e++)),e}function nE(t,e){return t.backgroundColor=t.data.map(()=>jf(e++)),e}function sE(t){let e=0;return(i,n)=>{const s=t.getDatasetMeta(n).controller;s instanceof wn?e=iE(i,e):s instanceof Is?e=nE(i,e):s&&(e=tE(i,e))}}function eh(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var oE={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;const{options:{elements:n},data:{datasets:s}}=t.config;if(!i.forceOverride&&(eh(s)||n&&eh(n)))return;const o=sE(t);s.forEach(o)}};function rE(t,e,i,n,s){const o=s.samples||n;if(o>=i)return t.slice(e,e+i);const r=[],a=(i-2)/(o-2);let l=0;const c=e+i-1;let u=e,h,f,p,b,_;for(r[l++]=t[u],h=0;h<o-2;h++){let v=0,y=0,w;const E=Math.floor((h+1)*a)+1+e,x=Math.min(Math.floor((h+2)*a)+1,i)+e,I=x-E;for(w=E;w<x;w++)v+=t[w].x,y+=t[w].y;v/=I,y/=I;const T=Math.floor(h*a)+1+e,H=Math.min(Math.floor((h+1)*a)+1,i)+e,{x:V,y:Q}=t[u];for(p=b=-1,w=T;w<H;w++)b=.5*Math.abs((V-v)*(t[w].y-Q)-(V-t[w].x)*(y-Q)),b>p&&(p=b,f=t[w],_=w);r[l++]=f,u=_}return r[l++]=t[c],r}function aE(t,e,i,n){let s=0,o=0,r,a,l,c,u,h,f,p,b,_;const v=[],y=e+i-1,w=t[e].x,x=t[y].x-w;for(r=e;r<e+i;++r){a=t[r],l=(a.x-w)/x*n,c=a.y;const I=l|0;if(I===u)c<b?(b=c,h=r):c>_&&(_=c,f=r),s=(o*s+a.x)/++o;else{const T=r-1;if(!Le(h)&&!Le(f)){const H=Math.min(h,f),V=Math.max(h,f);H!==p&&H!==T&&v.push({...t[H],x:s}),V!==p&&V!==T&&v.push({...t[V],x:s})}r>0&&T!==p&&v.push(t[T]),v.push(a),u=I,o=0,b=_=c,h=f=p=r}}return v}function zf(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function th(t){t.data.datasets.forEach(e=>{zf(e)})}function lE(t,e){const i=e.length;let n=0,s;const{iScale:o}=t,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=St(Ni(e,o.axis,r).lo,0,i-1)),c?s=St(Ni(e,o.axis,a).hi+1,n,i)-n:s=i-n,{start:n,count:s}}var cE={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled){th(t);return}const n=t.width;t.data.datasets.forEach((s,o)=>{const{_data:r,indexAxis:a}=s,l=t.getDatasetMeta(o),c=r||s.data;if(ps([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:f}=lE(l,c);const p=i.threshold||4*n;if(f<=p){zf(s);return}Le(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(_){this._data=_}}));let b;switch(i.algorithm){case"lttb":b=rE(c,h,f,n,i);break;case"min-max":b=aE(c,h,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=b})},destroy(t){th(t)}};function uE(t,e,i){const n=t.segments,s=t.points,o=e.points,r=[];for(const a of n){let{start:l,end:c}=a;c=Ll(l,c,s);const u=Ha(i,s[l],s[c],a.loop);if(!e.segments){r.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=Cf(e,u);for(const f of h){const p=Ha(i,o[f.start],o[f.end],f.loop),b=If(a,s,p);for(const _ of b)r.push({source:_,target:f,start:{[i]:ih(u,p,"start",Math.max)},end:{[i]:ih(u,p,"end",Math.min)}})}}return r}function Ha(t,e,i,n){if(n)return;let s=e[t],o=i[t];return t==="angle"&&(s=Zt(s),o=Zt(o)),{property:t,start:s,end:o}}function hE(t,e){const{x:i=null,y:n=null}=t||{},s=e.points,o=[];return e.segments.forEach(({start:r,end:a})=>{a=Ll(r,a,s);const l=s[r],c=s[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):i!==null&&(o.push({x:i,y:l.y}),o.push({x:i,y:c.y}))}),o}function Ll(t,e,i){for(;e>t;e--){const n=i[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function ih(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function Kf(t,e){let i=[],n=!1;return et(t)?(n=!0,i=t):i=hE(t,e),i.length?new Ki({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function nh(t){return t&&t.fill!==!1}function dE(t,e,i){let s=t[e].fill;const o=[e];let r;if(!i)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!ut(s))return s;if(r=t[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function fE(t,e,i){const n=_E(t);if(De(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return ut(s)&&Math.floor(s)===s?pE(n[0],e,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function pE(t,e,i,n){return(t==="-"||t==="+")&&(i=e+i),i===e||i<0||i>=n?!1:i}function gE(t,e){let i=null;return t==="start"?i=e.bottom:t==="end"?i=e.top:De(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}function mE(t,e,i){let n;return t==="start"?n=i:t==="end"?n=e.options.reverse?e.min:e.max:De(t)?n=t.value:n=e.getBaseValue(),n}function _E(t){const e=t.options,i=e.fill;let n=xe(i&&i.target,i);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function bE(t){const{scale:e,index:i,line:n}=t,s=[],o=n.segments,r=n.points,a=yE(e,i);a.push(Kf({x:null,y:e.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)vE(s,r[u],a)}return new Ki({points:s,options:{}})}function yE(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const o=n[s];if(o.index===e)break;o.hidden||i.unshift(o.dataset)}return i}function vE(t,e,i){const n=[];for(let s=0;s<i.length;s++){const o=i[s],{first:r,last:a,point:l}=SE(o,e,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(t.push(l),!a)break}}t.push(...n)}function SE(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const s=n[i],o=t.segments,r=t.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],h=r[u.start][i],f=r[u.end][i];if(Oi(s,h,f)){a=s===h,l=s===f;break}}return{first:a,last:l,point:n}}class qf{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,i,n){const{x:s,y:o,radius:r}=this;return i=i||{start:0,end:tt},e.arc(s,o,r,i.end,i.start,!0),!n.bounds}interpolate(e){const{x:i,y:n,radius:s}=this,o=e.angle;return{x:i+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}}function wE(t){const{chart:e,fill:i,line:n}=t;if(ut(i))return EE(e,i);if(i==="stack")return bE(t);if(i==="shape")return!0;const s=AE(t);return s instanceof qf?s:Kf(s,n)}function EE(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}function AE(t){return(t.scale||{}).getPointPositionForValue?kE(t):xE(t)}function xE(t){const{scale:e={},fill:i}=t,n=gE(i,e);if(ut(n)){const s=e.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function kE(t){const{scale:e,fill:i}=t,n=e.options,s=e.getLabels().length,o=n.reverse?e.max:e.min,r=mE(i,e,o),a=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,o);return new qf({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,r));return a}function ca(t,e,i){const n=wE(e),{line:s,scale:o,axis:r}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};n&&s.points.length&&(Ir(t,i),IE(t,{line:s,target:n,above:u,below:h,area:i,scale:o,axis:r}),Cr(t))}function IE(t,e){const{line:i,target:n,above:s,below:o,area:r,scale:a}=e,l=i._loop?"angle":e.axis;t.save(),l==="x"&&o!==s&&(sh(t,n,r.top),oh(t,{line:i,target:n,color:s,scale:a,property:l}),t.restore(),t.save(),sh(t,n,r.bottom)),oh(t,{line:i,target:n,color:o,scale:a,property:l}),t.restore()}function sh(t,e,i){const{segments:n,points:s}=e;let o=!0,r=!1;t.beginPath();for(const a of n){const{start:l,end:c}=a,u=s[l],h=s[Ll(l,c,s)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,i),t.lineTo(u.x,u.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(h.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function oh(t,e){const{line:i,target:n,property:s,color:o,scale:r}=e,a=uE(i,n,s);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:f=o}={}}=l,p=n!==!0;t.save(),t.fillStyle=f,CE(t,r,p&&Ha(s,u,h)),t.beginPath();const b=!!i.pathSegment(t,l);let _;if(p){b?t.closePath():rh(t,n,h,s);const v=!!n.pathSegment(t,c,{move:b,reverse:!0});_=b&&v,_||rh(t,n,u,s)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function CE(t,e,i){const{top:n,bottom:s}=e.chart.chartArea,{property:o,start:r,end:a}=i||{};o==="x"&&(t.beginPath(),t.rect(r,n,a-r,s-n),t.clip())}function rh(t,e,i,n){const s=e.interpolate(i,n);s&&t.lineTo(s.x,s.y)}var ME={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,s=[];let o,r,a,l;for(r=0;r<n;++r)o=t.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Ki&&(l={visible:t.isDatasetVisible(r),index:r,fill:fE(a,r,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=dE(s,r,i.propagate))},beforeDraw(t,e,i){const n=i.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let r=s.length-1;r>=0;--r){const a=s[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&ca(t.ctx,a,o))}},beforeDatasetsDraw(t,e,i){if(i.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const o=n[s].$filler;nh(o)&&ca(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;!nh(n)||i.drawTime!=="beforeDatasetDraw"||ca(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ah=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}},PE=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class lh extends $i{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,n){this.maxWidth=e,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let i=Xe(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(n=>e.filter(n,this.chart.data))),e.sort&&(i=i.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=_t(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ah(n,o);let c,u;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,i,n,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((b,_)=>{const v=n+i/2+o.measureText(b.text).width;(_===0||c[c.length-1]+v+2*a>r)&&(h+=u,c[c.length-(_>0?0:1)]=0,p+=u,f++),l[_]={left:0,top:p,row:f,width:v,height:s},c[c.length-1]+=v+a}),h}_fitCols(e,i,n,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-e;let h=a,f=0,p=0,b=0,_=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:w,itemHeight:E}=TE(n,i,o,v,s);y>0&&p+E+2*a>u&&(h+=f+a,c.push({width:f,height:p}),b+=f+a,_++,f=p=0),l[y]={left:b,top:p,col:_,width:w,height:E},f=Math.max(f,w),p+=E+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:o}}=this,r=Vn(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ct(n,this.left+s,this.right-this.lineWidths[a]);for(const c of i)a!==c.row&&(a=c.row,l=Ct(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=Ct(n,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of i)c.col!==a&&(a=c.col,l=Ct(n,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ir(e,this),this._draw(),Cr(e)}}_draw(){const{options:e,columnSizes:i,lineWidths:n,ctx:s}=this,{align:o,labels:r}=e,a=dt.color,l=Vn(e.rtl,this.left,this.width),c=_t(r.font),{padding:u}=r,h=c.size,f=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:b,boxHeight:_,itemHeight:v}=ah(r,h),y=function(T,H,V){if(isNaN(b)||b<=0||isNaN(_)||_<0)return;s.save();const Q=xe(V.lineWidth,1);if(s.fillStyle=xe(V.fillStyle,a),s.lineCap=xe(V.lineCap,"butt"),s.lineDashOffset=xe(V.lineDashOffset,0),s.lineJoin=xe(V.lineJoin,"miter"),s.lineWidth=Q,s.strokeStyle=xe(V.strokeStyle,a),s.setLineDash(xe(V.lineDash,[])),r.usePointStyle){const ae={radius:_*Math.SQRT2/2,pointStyle:V.pointStyle,rotation:V.rotation,borderWidth:Q},Z=l.xPlus(T,b/2),ge=H+f;gf(s,ae,Z,ge,r.pointStyleWidth&&b)}else{const ae=H+Math.max((h-_)/2,0),Z=l.leftForLtr(T,b),ge=xn(V.borderRadius);s.beginPath(),Object.values(ge).some(Re=>Re!==0)?Us(s,{x:Z,y:ae,w:b,h:_,radius:ge}):s.rect(Z,ae,b,_),s.fill(),Q!==0&&s.stroke()}s.restore()},w=function(T,H,V){Cn(s,V.text,T,H+v/2,c,{strikethrough:V.hidden,textAlign:l.textAlign(V.textAlign)})},E=this.isHorizontal(),x=this._computeTitleHeight();E?p={x:Ct(o,this.left+u,this.right-n[0]),y:this.top+u+x,line:0}:p={x:this.left+u,y:Ct(o,this.top+x+u,this.bottom-i[0].height),line:0},Af(this.ctx,e.textDirection);const I=v+u;this.legendItems.forEach((T,H)=>{s.strokeStyle=T.fontColor,s.fillStyle=T.fontColor;const V=s.measureText(T.text).width,Q=l.textAlign(T.textAlign||(T.textAlign=r.textAlign)),ae=b+f+V;let Z=p.x,ge=p.y;l.setWidth(this.width),E?H>0&&Z+ae+u>this.right&&(ge=p.y+=I,p.line++,Z=p.x=Ct(o,this.left+u,this.right-n[p.line])):H>0&&ge+I>this.bottom&&(Z=p.x=Z+i[p.line].width+u,p.line++,ge=p.y=Ct(o,this.top+x+u,this.bottom-i[p.line].height));const Re=l.x(Z);if(y(Re,ge,T),Z=eS(Q,Z+b+f,E?Z+ae:this.right,e.rtl),w(l.x(Z),ge,T),E)p.x+=ae+u;else if(typeof T.text!="string"){const Ye=c.lineHeight;p.y+=Yf(T,Ye)}else p.y+=I}),xf(this.ctx,e.textDirection)}drawTitle(){const e=this.options,i=e.title,n=_t(i.font),s=Ot(i.padding);if(!i.display)return;const o=Vn(e.rtl,this.left,this.width),r=this.ctx,a=i.position,l=n.size/2,c=s.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Ct(e.align,h,this.right-f);else{const b=this.columnSizes.reduce((_,v)=>Math.max(_,v.height),0);u=c+Ct(e.align,this.top,this.bottom-b-e.labels.padding-this._computeTitleHeight())}const p=Ct(a,h,h+f);r.textAlign=o.textAlign(Pl(a)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=n.string,Cn(r,i.text,p,u,n)}_computeTitleHeight(){const e=this.options.title,i=_t(e.font),n=Ot(e.padding);return e.display?i.lineHeight+n.height:0}_getLegendItemAt(e,i){let n,s,o;if(Oi(e,this.left,this.right)&&Oi(i,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],Oi(e,s.left,s.left+s.width)&&Oi(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const i=this.options;if(!RE(e.type,i))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=PE(s,n);s&&!o&&Xe(i.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!o&&Xe(i.onHover,[e,n,this],this)}else n&&Xe(i.onClick,[e,n,this],this)}}function TE(t,e,i,n,s){const o=BE(n,t,e,i),r=DE(s,n,e.lineHeight);return{itemWidth:o,itemHeight:r}}function BE(t,e,i,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),e+i.size/2+n.measureText(s).width}function DE(t,e,i){let n=t;return typeof e.text!="string"&&(n=Yf(e,i)),n}function Yf(t,e){const i=t.text?t.text.length+.5:0;return e*i}function RE(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var OE={id:"legend",_element:lh,start(t,e,i){const n=t.legend=new lh({ctx:t.ctx,options:i,chart:t});Rt.configure(t,n,i),Rt.addBox(t,n)},stop(t){Rt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;Rt.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(i?0:void 0),u=Ot(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Fl extends $i{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;const s=et(n.text)?n.text.length:1;this._padding=Ot(n.padding);const o=s*_t(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:i,left:n,bottom:s,right:o,options:r}=this,a=r.align;let l=0,c,u,h;return this.isHorizontal()?(u=Ct(a,n,o),h=i+e,c=o-n):(r.position==="left"?(u=n+e,h=Ct(a,s,i),l=rt*-.5):(u=o-e,h=Ct(a,i,s),l=rt*.5),c=s-i),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,i=this.options;if(!i.display)return;const n=_t(i.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Cn(e,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:Pl(i.align),textBaseline:"middle",translation:[r,a]})}}function NE(t,e){const i=new Fl({ctx:t.ctx,options:e,chart:t});Rt.configure(t,i,e),Rt.addBox(t,i),t.titleBlock=i}var LE={id:"title",_element:Fl,start(t,e,i){NE(t,i)},stop(t){const e=t.titleBlock;Rt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;Rt.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mo=new WeakMap;var FE={id:"subtitle",start(t,e,i){const n=new Fl({ctx:t.ctx,options:i,chart:t});Rt.configure(t,n,i),Rt.addBox(t,n),mo.set(t,n)},stop(t){Rt.removeBox(t,mo.get(t)),mo.delete(t)},beforeUpdate(t,e,i){const n=mo.get(t);Rt.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ms={average(t){if(!t.length)return!1;let e,i,n=0,s=0,o=0;for(e=0,i=t.length;e<i;++e){const r=t[e].element;if(r&&r.hasValue()){const a=r.tooltipPosition();n+=a.x,s+=a.y,++o}}return{x:n/o,y:s/o}},nearest(t,e){if(!t.length)return!1;let i=e.x,n=e.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=t.length;o<r;++o){const l=t[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Da(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function bi(t,e){return e&&(et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Pi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function $E(t,e){const{element:i,datasetIndex:n,index:s}=e,o=t.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:t,label:r,parsed:o.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function ch(t,e){const i=t.chart.ctx,{body:n,footer:s,title:o}=t,{boxWidth:r,boxHeight:a}=e,l=_t(e.bodyFont),c=_t(e.titleFont),u=_t(e.footerFont),h=o.length,f=s.length,p=n.length,b=Ot(e.padding);let _=b.height,v=0,y=n.reduce((x,I)=>x+I.before.length+I.lines.length+I.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(_+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=p*x+(y-p)*l.lineHeight+(y-1)*e.bodySpacing}f&&(_+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let w=0;const E=function(x){v=Math.max(v,i.measureText(x).width+w)};return i.save(),i.font=c.string,je(t.title,E),i.font=l.string,je(t.beforeBody.concat(t.afterBody),E),w=e.displayColors?r+2+e.boxPadding:0,je(n,x=>{je(x.before,E),je(x.lines,E),je(x.after,E)}),w=0,i.font=u.string,je(t.footer,E),i.restore(),v+=b.width,{width:v,height:_}}function HE(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}function UE(t,e,i,n){const{x:s,width:o}=n,r=i.caretSize+i.caretPadding;if(t==="left"&&s+o+r>e.width||t==="right"&&s-o-r<0)return!0}function WE(t,e,i,n){const{x:s,width:o}=i,{width:r,chartArea:{left:a,right:l}}=t;let c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),UE(c,t,e,i)&&(c="center"),c}function uh(t,e,i){const n=i.yAlign||e.yAlign||HE(t,i);return{xAlign:i.xAlign||e.xAlign||WE(t,e,i,n),yAlign:n}}function GE(t,e){let{x:i,width:n}=t;return e==="right"?i-=n:e==="center"&&(i-=n/2),i}function VE(t,e,i){let{y:n,height:s}=t;return e==="top"?n+=i:e==="bottom"?n-=s+i:n-=s/2,n}function hh(t,e,i,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:l}=i,c=s+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=xn(r);let b=GE(e,a);const _=VE(e,l,c);return l==="center"?a==="left"?b+=c:a==="right"&&(b-=c):a==="left"?b-=Math.max(u,f)+s:a==="right"&&(b+=Math.max(h,p)+s),{x:St(b,0,n.width-e.width),y:St(_,0,n.height-e.height)}}function _o(t,e,i){const n=Ot(i.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function dh(t){return bi([],Pi(t))}function jE(t,e,i){return ln(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function fh(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const Xf={beforeTitle:Ii,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:Ii,beforeBody:Ii,beforeLabel:Ii,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return Le(i)||(e+=i),e},labelColor(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Ii,afterBody:Ii,beforeFooter:Ii,footer:Ii,afterFooter:Ii};function jt(t,e,i,n){const s=t[e].call(i,n);return typeof s>"u"?Xf[e].call(i,n):s}class Ua extends $i{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,o=new Mf(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=jE(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:n}=i,s=jt(n,"beforeTitle",this,e),o=jt(n,"title",this,e),r=jt(n,"afterTitle",this,e);let a=[];return a=bi(a,Pi(s)),a=bi(a,Pi(o)),a=bi(a,Pi(r)),a}getBeforeBody(e,i){return dh(jt(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:n}=i,s=[];return je(e,o=>{const r={before:[],lines:[],after:[]},a=fh(n,o);bi(r.before,Pi(jt(a,"beforeLabel",this,o))),bi(r.lines,jt(a,"label",this,o)),bi(r.after,Pi(jt(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(e,i){return dh(jt(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:n}=i,s=jt(n,"beforeFooter",this,e),o=jt(n,"footer",this,e),r=jt(n,"afterFooter",this,e);let a=[];return a=bi(a,Pi(s)),a=bi(a,Pi(o)),a=bi(a,Pi(r)),a}_createItems(e){const i=this._active,n=this.chart.data,s=[],o=[],r=[];let a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push($E(this.chart,i[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,n))),je(a,u=>{const h=fh(e.callbacks,u);s.push(jt(h,"labelColor",this,u)),o.push(jt(h,"labelPointStyle",this,u)),r.push(jt(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(e,i){const n=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=ms[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=ch(this,n),c=Object.assign({},a,l),u=uh(this.chart,n,c),h=hh(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,n,s){const o=this.getCaretPosition(e,n,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,n){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=xn(a),{x:f,y:p}=e,{width:b,height:_}=i;let v,y,w,E,x,I;return o==="center"?(x=p+_/2,s==="left"?(v=f,y=v-r,E=x+r,I=x-r):(v=f+b,y=v+r,E=x-r,I=x+r),w=v):(s==="left"?y=f+Math.max(l,u)+r:s==="right"?y=f+b-Math.max(c,h)-r:y=this.caretX,o==="top"?(E=p,x=E-r,v=y-r,w=y+r):(E=p+_,x=E+r,v=y+r,w=y-r),I=E),{x1:v,x2:y,x3:w,y1:E,y2:x,y3:I}}drawTitle(e,i,n){const s=this.title,o=s.length;let r,a,l;if(o){const c=Vn(n.rtl,this.x,this.width);for(e.x=_o(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",r=_t(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=r.string,l=0;l<o;++l)i.fillText(s[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===o&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,i,n,s,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c,boxPadding:u}=o,h=_t(o.bodyFont),f=_o(this,"left",o),p=s.x(f),b=l<h.lineHeight?(h.lineHeight-l)/2:0,_=i.y+b;if(o.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=s.leftForLtr(p,c)+c/2,w=_+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Oa(e,v,y,w),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Oa(e,v,y,w)}else{e.lineWidth=De(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const v=s.leftForLtr(p,c-u),y=s.leftForLtr(s.xPlus(p,1),c-u-2),w=xn(r.borderRadius);Object.values(w).some(E=>E!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Us(e,{x:v,y:_,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),Us(e,{x:y,y:_+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(v,_,c,l),e.strokeRect(v,_,c,l),e.fillStyle=r.backgroundColor,e.fillRect(y,_+1,c-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,i,n){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,h=_t(n.bodyFont);let f=h.lineHeight,p=0;const b=Vn(n.rtl,this.x,this.width),_=function(V){i.fillText(V,b.x(e.x+p),e.y+f/2),e.y+=f+o},v=b.textAlign(r);let y,w,E,x,I,T,H;for(i.textAlign=r,i.textBaseline="middle",i.font=h.string,e.x=_o(this,v,n),i.fillStyle=n.bodyColor,je(this.beforeBody,_),p=a&&v!=="right"?r==="center"?c/2+u:c+2+u:0,x=0,T=s.length;x<T;++x){for(y=s[x],w=this.labelTextColors[x],i.fillStyle=w,je(y.before,_),E=y.lines,a&&E.length&&(this._drawColorBox(i,e,x,b,n),f=Math.max(h.lineHeight,l)),I=0,H=E.length;I<H;++I)_(E[I]),f=h.lineHeight;je(y.after,_)}p=0,f=h.lineHeight,je(this.afterBody,_),e.y-=o}drawFooter(e,i,n){const s=this.footer,o=s.length;let r,a;if(o){const l=Vn(n.rtl,this.x,this.width);for(e.x=_o(this,n.footerAlign,n),e.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",r=_t(n.footerFont),i.fillStyle=n.footerColor,i.font=r.string,a=0;a<o;++a)i.fillText(s[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}drawBackground(e,i,n,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=e,{width:c,height:u}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:b}=xn(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+h,l),r==="top"&&this.drawCaret(e,i,n,s),i.lineTo(a+c-f,l),i.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(e,i,n,s),i.lineTo(a+c,l+u-b),i.quadraticCurveTo(a+c,l+u,a+c-b,l+u),r==="bottom"&&this.drawCaret(e,i,n,s),i.lineTo(a+p,l+u),i.quadraticCurveTo(a,l+u,a,l+u-p),r==="center"&&o==="left"&&this.drawCaret(e,i,n,s),i.lineTo(a,l+h),i.quadraticCurveTo(a,l,a+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const r=ms[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=ch(this,e),l=Object.assign({},r,this._size),c=uh(i,e,l),u=hh(e,l,c,i);(s._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=Ot(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,s,i),Af(e,i.textDirection),o.y+=r.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),xf(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const n=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!ir(n,s),r=this._positionChanged(s,i);(o||r)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(e,o,i,n),a=this._positionChanged(r,e),l=i||!ir(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),l}_getActiveElements(e,i,n,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return i;const r=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(e,i){const{caretX:n,caretY:s,options:o}=this,r=ms[o.position].call(this,e,i);return r!==!1&&(n!==r.x||s!==r.y)}}P(Ua,"positioners",ms);var zE={id:"tooltip",_element:Ua,positioners:ms,afterInit(t,e,i){i&&(t.tooltip=new Ua({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Xf},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},KE=Object.freeze({__proto__:null,Colors:oE,Decimation:cE,Filler:ME,Legend:OE,SubTitle:FE,Title:LE,Tooltip:zE});const qE=(t,e,i,n)=>(typeof e=="string"?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function YE(t,e,i,n){const s=t.indexOf(e);if(s===-1)return qE(t,e,i,n);const o=t.lastIndexOf(e);return s!==o?i:s}const XE=(t,e)=>t===null?null:St(Math.round(t),0,e);function ph(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Wa extends Mn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:s,label:o}of i)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(Le(e))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===e?i:YE(n,e,xe(i,e),this._addedLabels),XE(i,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,i=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=e===0&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=e;r<=i;r++)s.push({value:r});return s}getLabelForValue(e){return ph.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}P(Wa,"id","category"),P(Wa,"defaults",{ticks:{callback:ph}});function JE(t,e){const i=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,p=o||1,b=u-1,{min:_,max:v}=e,y=!Le(r),w=!Le(a),E=!Le(c),x=(v-_)/(h+1);let I=hu((v-_)/b/p)*p,T,H,V,Q;if(I<1e-14&&!y&&!w)return[{value:_},{value:v}];Q=Math.ceil(v/I)-Math.floor(_/I),Q>b&&(I=hu(Q*I/b/p)*p),Le(l)||(T=Math.pow(10,l),I=Math.ceil(I*T)/T),s==="ticks"?(H=Math.floor(_/I)*I,V=Math.ceil(v/I)*I):(H=_,V=v),y&&w&&o&&Kv((a-r)/o,I/1e3)?(Q=Math.round(Math.min((a-r)/I,u)),I=(a-r)/Q,H=r,V=a):E?(H=y?r:H,V=w?a:V,Q=c-1,I=(V-H)/Q):(Q=(V-H)/I,As(Q,Math.round(Q),I/1e3)?Q=Math.round(Q):Q=Math.ceil(Q));const ae=Math.max(du(I),du(H));T=Math.pow(10,Le(l)?ae:l),H=Math.round(H*T)/T,V=Math.round(V*T)/T;let Z=0;for(y&&(f&&H!==r?(i.push({value:r}),H<r&&Z++,As(Math.round((H+Z*I)*T)/T,r,gh(r,x,t))&&Z++):H<r&&Z++);Z<Q;++Z)i.push({value:Math.round((H+Z*I)*T)/T});return w&&f&&V!==a?i.length&&As(i[i.length-1].value,a,gh(a,x,t))?i[i.length-1].value=a:i.push({value:a}):(!w||V===a)&&i.push({value:V}),i}function gh(t,e,{horizontal:i,minRotation:n}){const s=hi(n),o=(i?Math.sin(s):Math.cos(s))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}class ur extends Mn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return Le(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=i?s:l,a=l=>o=n?o:l;if(e){const l=Ei(s),c=Ei(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||r(s-l)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,i=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,r=JE(s,o);return e.bounds==="ticks"&&of(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-i)/Math.max(e.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(e){return qs(e,this.chart.options.locale,this.options.ticks.format)}}class Ga extends ur{determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=ut(e)?e:0,this.max=ut(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),i=e?this.width:this.height,n=hi(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}P(Ga,"id","linear"),P(Ga,"defaults",{ticks:{callback:kr.formatters.numeric}});const Gs=t=>Math.floor(zi(t)),gn=(t,e)=>Math.pow(10,Gs(t)+e);function mh(t){return t/Math.pow(10,Gs(t))===1}function _h(t,e,i){const n=Math.pow(10,i),s=Math.floor(t/n);return Math.ceil(e/n)-s}function ZE(t,e){const i=e-t;let n=Gs(i);for(;_h(t,e,n)>10;)n++;for(;_h(t,e,n)<10;)n--;return Math.min(n,Gs(t))}function QE(t,{min:e,max:i}){e=Xt(t.min,e);const n=[],s=Gs(e);let o=ZE(e,i),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((e-l)*r)/r,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,o)),f=Xt(t.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;f<i;)n.push({value:f,major:mh(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),f=Math.round((l+u+h*Math.pow(10,o))*r)/r;const p=Xt(t.max,f);return n.push({value:p,major:mh(p),significand:h}),n}class Va extends Mn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,i){const n=ur.prototype.parse.apply(this,[e,i]);if(n===0){this._zero=!0;return}return ut(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=ut(e)?Math.max(0,e):null,this.max=ut(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ut(this._userMin)&&(this.min=e===gn(this.min,0)?gn(this.min,-1):gn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let n=this.min,s=this.max;const o=a=>n=e?n:a,r=a=>s=i?s:a;n===s&&(n<=0?(o(1),r(10)):(o(gn(n,-1)),r(gn(s,1)))),n<=0&&o(gn(s,-1)),s<=0&&r(gn(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,i={min:this._userMin,max:this._userMax},n=QE(i,this);return e.bounds==="ticks"&&of(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":qs(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=zi(e),this._valueRange=zi(this.max)-zi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(zi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const i=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+i*this._valueRange)}}P(Va,"id","logarithmic"),P(Va,"defaults",{ticks:{callback:kr.formatters.logarithmic,major:{enabled:!0}}});function ja(t){const e=t.ticks;if(e.display&&t.display){const i=Ot(e.backdropPadding);return xe(e.font&&e.font.size,dt.font.size)+i.height}return 0}function e4(t,e,i){return i=et(i)?i:[i],{w:uS(t,e.string,i),h:i.length*e.lineHeight}}function bh(t,e,i,n,s){return t===n||t===s?{start:e-i/2,end:e+i/2}:t<n||t>s?{start:e-i,end:e}:{start:e,end:e+i}}function t4(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),n=[],s=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?rt/o:0;for(let l=0;l<o;l++){const c=r.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=_t(c.font),f=e4(t.ctx,h,t._pointLabels[l]);n[l]=f;const p=Zt(t.getIndexAngle(l)+a),b=Math.round(Cl(p)),_=bh(b,u.x,f.w,0,180),v=bh(b,u.y,f.h,90,270);i4(i,e,p,_,v)}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=n4(t,n,s)}function i4(t,e,i,n,s){const o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/r,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function n4(t,e,i){const n=[],s=t._pointLabels.length,o=t.options,r=ja(o)/2,a=t.drawingArea,l=o.pointLabels.centerPointLabels?rt/s:0;for(let c=0;c<s;c++){const u=t.getPointPosition(c,a+r+i[c],l),h=Math.round(Cl(Zt(u.angle+ht))),f=e[c],p=r4(u.y,f.h,h),b=s4(h),_=o4(u.x,f.w,b);n.push({x:u.x,y:p,textAlign:b,left:_,top:p,right:_+f.w,bottom:p+f.h})}return n}function s4(t){return t===0||t===180?"center":t<180?"left":"right"}function o4(t,e,i){return i==="right"?t-=e:i==="center"&&(t-=e/2),t}function r4(t,e,i){return i===90||i===270?t-=e/2:(i>270||i<90)&&(t-=e),t}function a4(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let s=e-1;s>=0;s--){const o=n.setContext(t.getPointLabelContext(s)),r=_t(o.font),{x:a,y:l,textAlign:c,left:u,top:h,right:f,bottom:p}=t._pointLabelItems[s],{backdropColor:b}=o;if(!Le(b)){const _=xn(o.borderRadius),v=Ot(o.backdropPadding);i.fillStyle=b;const y=u-v.left,w=h-v.top,E=f-u+v.width,x=p-h+v.height;Object.values(_).some(I=>I!==0)?(i.beginPath(),Us(i,{x:y,y:w,w:E,h:x,radius:_}),i.fill()):i.fillRect(y,w,E,x)}Cn(i,t._pointLabels[s],a,l+r.lineHeight/2,r,{color:o.color,textAlign:c,textBaseline:"middle"})}}function Jf(t,e,i,n){const{ctx:s}=t;if(i)s.arc(t.xCenter,t.yCenter,e,0,tt);else{let o=t.getPointPosition(0,e);s.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=t.getPointPosition(r,e),s.lineTo(o.x,o.y)}}function l4(t,e,i,n,s){const o=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!n||!a||!l||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),Jf(t,i,r,n),o.closePath(),o.stroke(),o.restore())}function c4(t,e,i){return ln(t,{label:i,index:e,type:"pointLabel"})}class _s extends ur{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ot(ja(this.options)/2),i=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+i/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!1);this.min=ut(e)&&!isNaN(e)?e:0,this.max=ut(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ja(this.options))}generateTickLabels(e){ur.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((i,n)=>{const s=Xe(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?t4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,i,n,s){this.xCenter+=Math.floor((e-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,i,n,s))}getIndexAngle(e){const i=tt/(this._pointLabels.length||1),n=this.options.startAngle||0;return Zt(e*i+hi(n))}getDistanceFromCenterForValue(e){if(Le(e))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*i:(e-this.min)*i}getValueForDistanceFromCenter(e){if(Le(e))return NaN;const i=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(e){const i=this._pointLabels||[];if(e>=0&&e<i.length){const n=i[e];return c4(this.getContext(),e,n)}}getPointPosition(e,i,n=0){const s=this.getIndexAngle(e)-ht+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(e,i){return this.getPointPosition(e,this.getDistanceFromCenterForValue(i))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:i,top:n,right:s,bottom:o}=this._pointLabelItems[e];return{left:i,top:n,right:s,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:i}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Jf(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,i=this.options,{angleLines:n,grid:s,border:o}=i,r=this._pointLabels.length;let a,l,c;if(i.pointLabels.display&&a4(this,r),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),p=s.setContext(f),b=o.setContext(f);l4(this,p,l,r,b)}}),n.display){for(e.save(),a=r-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!i.reverse)return;const c=n.setContext(this.getContext(l)),u=_t(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,r=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=Ot(c.backdropPadding);e.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}Cn(e,a.label,0,-o,u,{color:c.color})}),e.restore()}drawTitle(){}}P(_s,"id","radialLinear"),P(_s,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:kr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),P(_s,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),P(_s,"descriptors",{angleLines:{_fallback:"grid"}});const Pr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kt=Object.keys(Pr);function u4(t,e){return t-e}function yh(t,e){if(Le(e))return null;const i=t._adapter,{parser:n,round:s,isoWeekday:o}=t._parseOpts;let r=e;return typeof n=="function"&&(r=n(r)),ut(r)||(r=typeof n=="string"?i.parse(r,n):i.parse(r)),r===null?null:(s&&(r=s==="week"&&(qn(o)||o===!0)?i.startOf(r,"isoWeek",o):i.startOf(r,s)),+r)}function vh(t,e,i,n){const s=Kt.length;for(let o=Kt.indexOf(t);o<s-1;++o){const r=Pr[Kt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((i-e)/(a*r.size))<=n)return Kt[o]}return Kt[s-1]}function h4(t,e,i,n,s){for(let o=Kt.length-1;o>=Kt.indexOf(i);o--){const r=Kt[o];if(Pr[r].common&&t._adapter.diff(s,n,r)>=e-1)return r}return Kt[i?Kt.indexOf(i):0]}function d4(t){for(let e=Kt.indexOf(t)+1,i=Kt.length;e<i;++e)if(Pr[Kt[e]].common)return Kt[e]}function Sh(t,e,i){if(!i)t[e]=!0;else if(i.length){const{lo:n,hi:s}=Ml(i,e),o=i[n]>=e?i[n]:i[s];t[o]=!0}}function f4(t,e,i,n){const s=t._adapter,o=+s.startOf(e[0].value,n),r=e[e.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=i[a],l>=0&&(e[l].major=!0);return e}function wh(t,e,i){const n=[],s={},o=e.length;let r,a;for(r=0;r<o;++r)a=e[r],s[a]=r,n.push({value:a,major:!1});return o===0||!i?n:f4(t,n,s,i)}class Vs extends Mn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const n=e.time||(e.time={}),s=this._adapter=new kw._date(e.adapters.date);s.init(i),Es(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:yh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,n=e.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ut(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),o=ut(o)&&!isNaN(o)?o:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],n=e[e.length-1]),{min:i,max:n}}buildTicks(){const e=this.options,i=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=Jv(s,o,r);return this._unit=i.unit||(n.autoSkip?vh(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):h4(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:d4(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),wh(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,n=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?i=1-s:i=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;i=St(i,0,r),n=St(n,0,r),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const e=this._adapter,i=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||vh(o.minUnit,i,n,this._getLabelCapacity(i)),a=xe(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=qn(l)||l===!0,u={};let h=i,f,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":r),e.diff(n,i,r)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+r);const b=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<n;f=+e.add(f,a,r),p++)Sh(u,f,b);return(f===n||s.bounds==="ticks"||p===1)&&Sh(u,f,b),Object.keys(u).sort((_,v)=>_-v).map(_=>+_)}getLabelForValue(e){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(e,n.tooltipFormat):i.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,i,n,s){const o=this.options,r=o.ticks.callback;if(r)return Xe(r,[e,i,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=n[i],p=c&&h&&f&&f.major;return this._adapter.format(e,s||(p?h:u))}generateTickLabels(e){let i,n,s;for(i=0,n=e.length;i<n;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,n=this.ctx.measureText(e).width,s=hi(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(e){const i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,o=this._tickFormatFunction(e,0,wh(this,[e],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],i,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,n;if(e.length)return e;const s=this.getLabels();for(i=0,n=s.length;i<n;++i)e.push(yh(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lf(e.sort(u4))}}P(Vs,"id","time"),P(Vs,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bo(t,e,i){let n=0,s=t.length-1,o,r,a,l;i?(e>=t[n].pos&&e<=t[s].pos&&({lo:n,hi:s}=Ni(t,"pos",e)),{pos:o,time:a}=t[n],{pos:r,time:l}=t[s]):(e>=t[n].time&&e<=t[s].time&&({lo:n,hi:s}=Ni(t,"time",e)),{time:o,pos:a}=t[n],{time:r,pos:l}=t[s]);const c=r-o;return c?a+(l-a)*(e-o)/c:a}class za extends Vs{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=bo(i,this.min),this._tableRange=bo(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:i,max:n}=this,s=[],o=[];let r,a,l,c,u;for(r=0,a=e.length;r<a;++r)c=e[r],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)u=s[r+1],l=s[r-1],c=s[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?e=this.normalize(i.concat(n)):e=i.length?i:n,e=this._cache.all=e,e}getDecimalForValue(e){return(bo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return bo(this._table,n*this._tableRange+this._minPos,!0)}}P(za,"id","timeseries"),P(za,"defaults",Vs.defaults);var p4=Object.freeze({__proto__:null,CategoryScale:Wa,LinearScale:Ga,LogarithmicScale:Va,RadialLinearScale:_s,TimeScale:Vs,TimeSeriesScale:za});const g4=[xw,eE,KE,p4],Eh=1e6,$l=2e3,Zf=-$l;function m4(t){switch(t){case 0:return"";case 1:return"";case 2:return""}}function _4(t,e){const i=t.customData;if(i)switch(e){case 0:return t.nextColor===R.BLACK?void 0:i.playerSearchInfo;case 1:return t.nextColor===R.WHITE?void 0:i.playerSearchInfo;case 2:return i.researchInfo}}function Ah(t,e,i){const n=t.score!==void 0?t.score:t.mate!==void 0?t.mate>0?Eh:-Eh:void 0;if(n!==void 0)switch(e){case hr.RAW:return Math.min(Math.max(n,Zf),$l);case hr.WIN_RATE:return Ea(n,i)}}function b4(t){switch(t){default:return{main:"black",ticks:"dimgray",grid:"lightgray",head:"red",blackPlayer:"royalblue",whitePlayer:"darkorange",researcher:"darkgreen"};case Sl.DARK:return{main:"white",ticks:"darkgray",grid:"dimgray",head:"red",blackPlayer:"deepskyblue",whitePlayer:"orange",researcher:"mediumseagreen"}}}var hr=(t=>(t.RAW="raw",t.WIN_RATE="winRate",t))(hr||{});const y4=He({name:"EvaluationChart",props:{size:{type:kt,required:!0},type:{type:String,required:!0}},setup(t){const e=z(null),i=ze();let n,s=$l,o=Zf;t.type==="winRate"&&(s=100,o=0);const r=(f,p,b,_)=>{const v=[],y=b.moves;for(const E of y){const x=_4(E,p);if(!x)continue;const I=Ah(x,t.type,_.coefficientInSigmoid);I!==void 0&&v.push({x:E.number,y:I})}const w=y[y.length-1];if(p===0&&w.nextColor===R.BLACK||p===1&&w.nextColor===R.WHITE){const E=w.customData;if(E&&E.enemySearchInfo){const x=Ah(E.enemySearchInfo,t.type,_.coefficientInSigmoid);x!==void 0&&v.push({x:w.number+1,y:x})}}return{label:m4(p),borderColor:f,data:v,showLine:!0}},a=(f,p)=>({label:"",borderColor:p.head,data:[{x:f.current.number,y:s},{x:f.current.number,y:o}],showLine:!0,pointBorderWidth:0,pointRadius:0}),l=(f,p,b)=>[a(f,b),r(b.blackPlayer,0,f,p),r(b.whitePlayer,1,f,p),r(b.researcher,2,f,p)],c=(f,p)=>({x:{min:0,max:f.length+10,ticks:{color:p.ticks},grid:{color:p.grid}},y:{min:o,max:s,ticks:{color:p.ticks},grid:{color:p.grid}}}),u=(f,p)=>{const b=b4(p.thema);n.data.datasets=l(f,p,b),n.options.color=b.main,n.options.scales=c(f,b),n.update()},h=(f,p,b)=>{if(f.x===null)return;const _=b.scales.x.max-b.scales.x.min,v=b.scales.x.right-b.scales.x.left,y=(f.x-b.scales.x.left)/v*_+b.scales.x.min,w=Math.round(y);i.changePly(w)};return it(()=>{const p=e.value.getContext("2d");n=new Di(p,{type:"scatter",data:{datasets:[]},options:{animation:{duration:0},maintainAspectRatio:!1,events:["click"],onClick:h}}),n.draw()}),zs(()=>{n.destroy()}),Ji(()=>[i.record,i.appSetting],([f,p])=>u(f,p),{deep:!0}),Ji(()=>[t.size],([f])=>{n.resize(f.width,f.height)},{deep:!0}),{canvas:e}}});const v4={class:"root"},S4=["width","height"];function w4(t,e,i,n,s,o){return D(),$("div",null,[m("div",v4,[m("canvas",{ref:"canvas",width:t.size.width.toFixed(0),height:t.size.height.toFixed(0)},null,8,S4)])])}const E4=Ue(y4,[["render",w4],["__scopeId","data-v-9e169cf2"]]),A4=He({name:"RecordComment",props:{size:{type:kt,required:!0}},setup(){const t=z(null),e=ze(),i=de(()=>e.recordFilePath),n=de(()=>Object.values(re).map(o=>{const r=e.record.metadata;return{key:o,displayName:K0(o),value:r.getStandardMetadata(o)||""}}));return it(()=>{t.value.addEventListener("copy",o=>{o.stopPropagation()}),t.value.addEventListener("paste",o=>{o.stopPropagation()})}),{root:t,filePath:i,list:n,change:(o,r)=>{const a=o.target;e.updateStandardRecordMetadata({key:r,value:a.value})}}}});const x4=t=>(qt("data-v-65713d0b"),t=t(),Yt(),t),k4={class:"element"},I4=x4(()=>m("div",{class:"key"},"",-1)),C4={class:"value"},M4={class:"key"},P4=["value","onInput"];function T4(t,e,i,n,s,o){return D(),$("div",null,[m("div",{ref:"root",class:"root",style:We(`height:${t.size.height}px`)},[m("div",k4,[I4,m("div",C4,ye(t.filePath||""),1)]),(D(!0),$(Pe,null,Qe(t.list,r=>(D(),$("div",{key:r.key,class:"element"},[m("div",M4,ye(r.displayName),1),m("input",{class:"value",value:r.value,onInput:a=>t.change(a,r.key)},null,40,P4)]))),128))],4)])}const B4=Ue(A4,[["render",T4],["__scopeId","data-v-65713d0b"]]),dr=30,D4=240+dr,R4=He({name:"TabPane",components:{RecordComment:wy,EngineAnalytics:pv,EvaluationChart:E4,RecordInfo:B4,ButtonIcon:Vt},props:{size:{type:kt,required:!0}},setup(t){const e=ze(),i=o=>{e.updateAppSetting({tab:o}).catch(r=>{fe.log(Pt.WARN,"TabPane: failed to update app setting: "+Td(r))})},n=de(()=>e.appSetting.tab),s=de(()=>t.size.reduce(new kt(0,dr)));return{activeTab:n,contentSize:s,headerHeight:dr,changeSelect:i,Icon:It,Tab:Vi,EvaluationChartType:hr}}});const O4={class:"root"},N4={class:"tabs"},L4={class:"tab-contents"};function F4(t,e,i,n,s,o){const r=Ee("ButtonIcon"),a=Ee("RecordInfo"),l=Ee("RecordComment"),c=Ee("EngineAnalytics"),u=Ee("EvaluationChart");return D(),$("div",null,[m("div",O4,[t.activeTab==="invisible"?(D(),$("div",{key:0,style:We(`height: calc(100% - ${t.headerHeight}px);`)},null,4)):pe("",!0),m("div",N4,[m("span",{class:Ze(["tab",{selected:t.activeTab===t.Tab.RECORD_INFO}]),onClick:e[0]||(e[0]=h=>t.changeSelect(t.Tab.RECORD_INFO))},[K(r,{class:"icon",icon:t.Icon.DESCRIPTION},null,8,["icon"]),$e("  ")],2),m("span",{class:Ze(["tab",{selected:t.activeTab===t.Tab.COMMENT}]),onClick:e[1]||(e[1]=h=>t.changeSelect(t.Tab.COMMENT))},[K(r,{class:"icon",icon:t.Icon.COMMENT},null,8,["icon"]),$e("  ")],2),m("span",{class:Ze(["tab",{selected:t.activeTab===t.Tab.SEARCH}]),onClick:e[2]||(e[2]=h=>t.changeSelect(t.Tab.SEARCH))},[K(r,{class:"icon",icon:t.Icon.BRAIN},null,8,["icon"]),$e("  ")],2),m("span",{class:Ze(["tab",{selected:t.activeTab===t.Tab.PV}]),onClick:e[3]||(e[3]=h=>t.changeSelect(t.Tab.PV))},[K(r,{class:"icon",icon:t.Icon.PV},null,8,["icon"]),$e("  ")],2),m("span",{class:Ze(["tab",{selected:t.activeTab===t.Tab.CHART}]),onClick:e[4]||(e[4]=h=>t.changeSelect(t.Tab.CHART))},[K(r,{class:"icon",icon:t.Icon.CHART},null,8,["icon"]),$e("  ")],2),m("span",{class:Ze(["tab",{selected:t.activeTab===t.Tab.PERCENTAGE_CHART}]),onClick:e[5]||(e[5]=h=>t.changeSelect(t.Tab.PERCENTAGE_CHART))},[K(r,{class:"icon",icon:t.Icon.PERCENT},null,8,["icon"]),$e("  ")],2),m("span",{class:Ze(["tab",{selected:t.activeTab===t.Tab.INVISIBLE}]),onClick:e[6]||(e[6]=h=>t.changeSelect(t.Tab.INVISIBLE))},[K(r,{class:"icon",icon:t.Icon.ARROW_DROP},null,8,["icon"]),$e("  ")],2)]),m("div",L4,[K(a,{class:Ze(["tab-content",{selected:t.activeTab===t.Tab.RECORD_INFO}]),size:t.contentSize},null,8,["class","size"]),K(l,{class:Ze(["tab-content",{selected:t.activeTab===t.Tab.COMMENT}])},null,8,["class"]),K(c,{class:Ze(["tab-content",{selected:t.activeTab===t.Tab.SEARCH}]),size:t.contentSize,"history-mode":!0},null,8,["class","size"]),K(c,{class:Ze(["tab-content",{selected:t.activeTab===t.Tab.PV}]),size:t.contentSize,"history-mode":!1},null,8,["class","size"]),K(u,{class:Ze(["tab-content",{selected:t.activeTab===t.Tab.CHART}]),size:t.contentSize,type:t.EvaluationChartType.RAW},null,8,["class","size","type"]),K(u,{class:Ze(["tab-content",{selected:t.activeTab===t.Tab.PERCENTAGE_CHART}]),size:t.contentSize,type:t.EvaluationChartType.WIN_RATE},null,8,["class","size","type"])])])])}const $4=Ue(R4,[["render",F4],["__scopeId","data-v-d1f440ed"]]),H4=He({name:"StandardLayout",components:{BoardPane:Ob,RecordPane:_y,TabPane:$4},setup(){const t=en(new kt(0,0)),e=z(new kt(0,0)),i=()=>{t.width=window.innerWidth,t.height=window.innerHeight};it(()=>{i(),window.addEventListener("resize",i)}),zs(()=>{window.removeEventListener("resize",i)});const n=a=>{e.value=a},s=de(()=>{const a=ze().appSetting.tab!==Vi.INVISIBLE?D4:dr;return new kt(t.width-oy,t.height-a)}),o=de(()=>({width:`${t.width-e.value.width}px`,height:`${e.value.height}px`})),r=de(()=>new kt(t.width,t.height-e.value.height));return{boardPaneMaxSize:s,recordPaneStyle:o,bottomPaneSize:r,onBoardPaneResize:n}}});const U4={class:"main"},W4={class:"top-pane"};function G4(t,e,i,n,s,o){const r=Ee("BoardPane"),a=Ee("RecordPane"),l=Ee("TabPane");return D(),$("div",null,[m("div",U4,[m("div",W4,[K(r,{class:"top-left-pane","max-size":t.boardPaneMaxSize,onResize:t.onBoardPaneResize},null,8,["max-size","onResize"]),K(a,{class:"top-right-pane",style:We(t.recordPaneStyle)},null,8,["style"])]),K(l,{class:"bottom-pane",size:t.bottomPaneSize},null,8,["size"])])])}const V4=Ue(H4,[["render",G4],["__scopeId","data-v-5cb4a1cf"]]);function ft(t){let e=Number(t.value);return t.max&&(e=Math.min(e,Number(t.max))),t.min&&(e=Math.max(e,Number(t.min))),e}const j4=He({name:"USIEngineOptionDialog",props:{latestEngineSetting:{type:Object,required:!0},okButtonText:{type:String,required:!1,default:"OK"}},emits:["ok","cancel"],setup(t,e){const i=ze(),n=z(null),s=z(null),o=t.latestEngineSetting,r=z(o),a=de(()=>Object.values(r.value.options).sort((p,b)=>{const _=p.name.startsWith("USI_"),v=b.name.startsWith("USI_");return _!==v?_?-1:1:p.name<b.name?-1:1}).map((p,b)=>({...p,inputId:"usiEngineOptionDialogOption"+b,value:Sn(p)})));return i.retainBussyState(),it(async()=>{wt(n.value),ei(n.value);try{const p=i.appSetting.engineTimeoutSeconds;r.value=await fe.getUSIEngineInfo(o.path,p),Qm(r.value,o),s.value.value=r.value.name;for(const b of a.value){const _=so(b.inputId);_&&b.value!==void 0&&(_.value=b.value+"")}}catch(p){i.pushError(p),e.emit("cancel")}finally{i.releaseBussyState()}}),Wt(()=>{ti(n.value)}),{engine:r,dialog:n,engineNameInput:s,options:a,selectFile:async p=>{i.retainBussyState();try{const b=await fe.showSelectFileDialog(),_=so(p);b&&_&&(_.value=b)}catch(b){i.pushError(b)}finally{i.releaseBussyState()}},sendOption:async p=>{i.retainBussyState();try{const b=i.appSetting.engineTimeoutSeconds;await fe.sendUSISetOption(r.value.path,p,b)}catch(b){i.pushError(b)}finally{i.releaseBussyState()}},reset:()=>{s.value.value=r.value.defaultName;for(const p of a.value){const b=so(p.inputId);b&&(r.value.options[p.name].default!==void 0?b.value=r.value.options[p.name].default+"":b.value="")}},ok:()=>{r.value.name=s.value.value;for(const p of a.value){const b=so(p.inputId);b&&(r.value.options[p.name].value=b.value?p.type==="spin"?ft(b):b.value:void 0)}e.emit("ok",r.value)},cancel:()=>{e.emit("cancel")}}}});const Hi=t=>(qt("data-v-4174ef8f"),t=t(),Yt(),t),z4={ref:"dialog"},K4=Hi(()=>m("div",{class:"dialog-title"},"",-1)),q4={class:"dialog-form-area option-list"},Y4={class:"option"},X4=Hi(()=>m("div",{class:"option-name"},"",-1)),J4={class:"option-unchangeable"},Z4={class:"option"},Q4=Hi(()=>m("div",{class:"option-name"},"",-1)),e3={class:"option-unchangeable"},t3={class:"option"},i3=Hi(()=>m("div",{class:"option-name"},"",-1)),n3={class:"option-unchangeable"},s3={class:"option"},o3=Hi(()=>m("div",{class:"option-name"},"",-1)),r3={ref:"engineNameInput",class:"option-value-text",type:"text",name:"ElectronShogiEngineName"},a3={class:"option-name"},l3=["id","min","max","name"],c3=["id","name"],u3=["id","name"],h3=["onClick"],d3=["id"],f3=Hi(()=>m("option",{value:""},"",-1)),p3=Hi(()=>m("option",{value:"true"},"ON",-1)),g3=Hi(()=>m("option",{value:"false"},"OFF",-1)),m3=[f3,p3,g3],_3=["id"],b3=Hi(()=>m("option",{value:""},"",-1)),y3=["value"],v3=["onClick"],S3={class:"dialog-main-buttons"};function w3(t,e,i,n,s,o){return D(),$("div",null,[m("dialog",z4,[K4,m("div",q4,[m("div",Y4,[X4,m("div",J4,ye(t.engine.defaultName),1)]),m("div",Z4,[Q4,m("div",e3,ye(t.engine.author),1)]),m("div",t3,[i3,m("div",n3,ye(t.engine.path),1)]),m("div",s3,[o3,m("input",r3,null,512)]),(D(!0),$(Pe,null,Qe(t.options,r=>(D(),$("div",{key:r.name,class:"option"},[m("div",a3,ye(r.name),1),r.type==="spin"?(D(),$("input",{key:0,id:r.inputId,class:"option-value-number",type:"number",min:r.min,max:r.max,step:"1",name:r.name},null,8,l3)):pe("",!0),r.type==="string"?(D(),$("input",{key:1,id:r.inputId,class:"option-value-text",type:"text",name:r.name},null,8,c3)):pe("",!0),r.type==="filename"?(D(),$("input",{key:2,id:r.inputId,class:"option-value-filename",type:"text",name:r.name},null,8,u3)):pe("",!0),r.type==="filename"?(D(),$("button",{key:3,class:"dialog-button",onClick:a=>t.selectFile(r.inputId)},"  ",8,h3)):pe("",!0),r.type==="check"?(D(),$("select",{key:4,id:r.inputId,class:"option-value-check"},m3,8,d3)):pe("",!0),r.type==="combo"?(D(),$("select",{key:5,id:r.inputId,class:"option-value-combo"},[b3,(D(!0),$(Pe,null,Qe(r.vars,a=>(D(),$("option",{key:a,value:a},ye(a),9,y3))),128))],8,_3)):pe("",!0),r.type==="button"?(D(),$("button",{key:6,class:"dialog-button",onClick:a=>t.sendOption(r.name)},"  ",8,v3)):pe("",!0)]))),128))]),m("button",{class:"dialog-wide-button",onClick:e[0]||(e[0]=r=>t.reset())},"  "),m("div",S3,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[1]||(e[1]=r=>t.ok())},ye(t.okButtonText),1),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[2]||(e[2]=r=>t.cancel())},"  ")])],512)])}const Qf=Ue(j4,[["render",w3],["__scopeId","data-v-4174ef8f"]]),E3=He({name:"PlayerSelector",components:{ButtonIcon:Vt,USIEngineOptionDialog:Qf},props:{players:{type:Array,required:!0},playerUri:{type:String,required:!0},engineSettings:{type:String,required:!0},displayPonderState:{type:Boolean,default:!1},displayThreadState:{type:Boolean,default:!1},displayMultiPvState:{type:Boolean,default:!1}},emits:["select-player","update-engine-setting"],setup(t,e){const i=ze(),n=z(null),s=z(null),o=de(()=>{if(!Gi(t.playerUri))return null;const b=new Ht(t.engineSettings).getEngine(t.playerUri);return b&&Sn(b.options[Ud])==="true"?"ON":"OFF"}),r=de(()=>{if(!Gi(t.playerUri))return null;const b=new Ht(t.engineSettings).getEngine(t.playerUri);return b?Sn(b.options[Ym])||Sn(b.options[Xm]):null}),a=de(()=>{if(!Gi(t.playerUri))return null;const b=new Ht(t.engineSettings).getEngine(t.playerUri);return b?Sn(b.options[qm])||Sn(b.options[Jm]):null}),l=de(()=>Gi(t.playerUri));return{playerSelect:n,ponderState:o,threadState:r,multiPVState:a,isPlayerSettingEnabled:l,engineSettingDialog:s,onPlayerChange:()=>{e.emit("select-player",n.value.value)},openPlayerSetting:()=>{if(Gi(t.playerUri)){const b=new Ht(t.engineSettings).getEngine(t.playerUri);if(!b){i.pushError("");return}s.value=b}},savePlayerSetting:p=>{s.value=null,e.emit("update-engine-setting",p)},closePlayerSetting:()=>{s.value=null},Icon:It}}});const Hl=t=>(qt("data-v-0e11ae8d"),t=t(),Yt(),t),A3={class:"root"},x3=["value"],k3=["value"],I3={key:0,class:"player-info"},C3=Hl(()=>m("span",{class:"player-info-key"},"(Ponder):",-1)),M3={class:"player-info-value"},P3={key:1,class:"player-info"},T3=Hl(()=>m("span",{class:"player-info-key"},":",-1)),B3={class:"player-info-value"},D3={key:2,class:"player-info"},R3=Hl(()=>m("span",{class:"player-info-key"},"PV:",-1)),O3={class:"player-info-value"},N3=["disabled"];function L3(t,e,i,n,s,o){const r=Ee("ButtonIcon"),a=Ee("USIEngineOptionDialog");return D(),$(Pe,null,[m("div",null,[m("div",A3,[m("select",{ref:"playerSelect",class:"player-select",size:"1",value:t.playerUri,onChange:e[0]||(e[0]=(...l)=>t.onPlayerChange&&t.onPlayerChange(...l))},[(D(!0),$(Pe,null,Qe(t.players,l=>(D(),$("option",{key:l.uri,value:l.uri},ye(l.name),9,k3))),128))],40,x3),t.displayPonderState?(D(),$("div",I3,[C3,m("span",M3,ye(t.ponderState||"---"),1)])):pe("",!0),t.displayThreadState?(D(),$("div",P3,[T3,m("span",B3,ye(t.threadState||"---"),1)])):pe("",!0),t.displayMultiPvState?(D(),$("div",D3,[R3,m("span",O3,ye(t.multiPVState||"---"),1)])):pe("",!0),m("button",{class:"player-setting",disabled:!t.isPlayerSettingEnabled,onClick:e[1]||(e[1]=(...l)=>t.openPlayerSetting&&t.openPlayerSetting(...l))},[K(r,{class:"icon",icon:t.Icon.SETTINGS},null,8,["icon"]),$e("  ")],8,N3)])]),t.engineSettingDialog?(D(),nt(a,{key:0,"latest-engine-setting":t.engineSettingDialog,"ok-button-text":"",onOk:t.savePlayerSetting,onCancel:t.closePlayerSetting},null,8,["latest-engine-setting","onOk","onCancel"])):pe("",!0)],64)}const Tr=Ue(E3,[["render",L3],["__scopeId","data-v-0e11ae8d"]]),F3=He({name:"GameDialog",components:{ButtonIcon:Vt,PlayerSelector:Tr},setup(){const t=ze(),e=z(null),i=z(null),n=z(null),s=z(null),o=z(null),r=z(null),a=z(null),l=z(null),c=z(null),u=z(null),h=z(null),f=z(null),p=z(null),b=z(Yo()),_=z(new Ht),v=z(""),y=z("");t.retainBussyState(),it(async()=>{try{b.value=await fe.loadGameSetting(),_.value=await fe.loadUSIEngineSetting(),v.value=b.value.black.uri,y.value=b.value.white.uri,wt(e.value),ei(e.value)}catch(Z){t.pushError(Z),t.destroyModalDialog()}finally{t.releaseBussyState()}}),Wt(()=>{ti(e.value)});let w=!1;js(()=>{w||(i.value.value=Math.floor(b.value.timeLimit.timeSeconds/3600),n.value.value=Math.floor(b.value.timeLimit.timeSeconds/60)%60,s.value.value=b.value.timeLimit.byoyomi,o.value.value=b.value.timeLimit.increment,r.value.value=b.value.startPosition!==void 0?b.value.startPosition:"current",a.value.checked=b.value.enableEngineTimeout,l.value.value=b.value.maxMoves,c.value.checked=b.value.humanIsFront,u.value.value=b.value.repeat,h.value.checked=b.value.swapPlayers,f.value.checked=b.value.enableComment,p.value.checked=b.value.enableAutoSave,w=!0)});const E=Z=>{if(Gi(Z)&&_.value.hasEngine(Z)){const ge=_.value.getEngine(Z);return{name:ge.name,uri:Z,usi:ge}}return{name:"",uri:Ft}},x=()=>{const Z={black:E(v.value),white:E(y.value),timeLimit:{timeSeconds:(ft(i.value)*60+ft(n.value))*60,byoyomi:ft(s.value),increment:ft(o.value)},startPosition:r.value.value!=="current"?r.value.value:void 0,enableEngineTimeout:a.value.checked,maxMoves:ft(l.value),humanIsFront:c.value.checked,repeat:ft(u.value),swapPlayers:h.value.checked,enableComment:f.value.checked,enableAutoSave:p.value.checked},ge=Xo()?jd(Z):W1(Z);ge?t.pushError(ge):t.startGame(Z)},I=()=>{t.closeModalDialog()},T=async Z=>{const ge=new Ht(_.value.json);ge.updateEngine(Z),t.retainBussyState();try{await fe.saveUSIEngineSetting(ge),_.value=ge}catch(Re){t.pushError(Re)}finally{t.releaseBussyState()}},H=Z=>{v.value=Z},V=Z=>{y.value=Z},Q=()=>{[v.value,y.value]=[y.value,v.value]},ae=de(()=>[{name:"",uri:Ft},..._.value.engineList]);return{CommentBehavior:es,dialog:e,hours:i,minutes:n,byoyomi:s,increment:o,startPosition:r,enableEngineTimeout:a,maxMoves:l,humanIsFront:c,repeat:u,swapPlayers:h,enableComment:f,enableAutoSave:p,engineSettings:_,blackPlayerURI:v,whitePlayerURI:y,players:ae,onStart:x,onCancel:I,onUpdatePlayerSetting:T,onSelectBlackPlayer:H,onSelectWhitePlayer:V,onSwapColor:Q,Icon:It}}});const pt=t=>(qt("data-v-2e3b1271"),t=t(),Yt(),t),$3={ref:"dialog"},H3=pt(()=>m("div",{class:"dialog-title"},"",-1)),U3={class:"dialog-form-area"},W3={class:"players"},G3={class:"player"},V3=pt(()=>m("div",{class:"top-label"},"",-1)),j3={class:"player"},z3=pt(()=>m("div",{class:"top-label"},"",-1)),K3={class:"players-control"},q3={class:"dialog-form-areas-h"},Y3={class:"dialog-form-area time-limit"},X3=pt(()=>m("div",{class:"top-label"},"",-1)),J3={class:"dialog-form-item"},Z3=pt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),Q3={ref:"hours",class:"time",type:"number",min:"0",max:"99",step:"1"},eA=pt(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),tA={ref:"minutes",class:"time",type:"number",min:"0",max:"59",step:"1"},iA=pt(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),nA={class:"dialog-form-item"},sA=pt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),oA={ref:"byoyomi",class:"time",type:"number",min:"0",max:"60",step:"1"},rA=pt(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),aA={class:"dialog-form-item"},lA=pt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),cA={ref:"increment",class:"time",type:"number",min:"0",max:"99",step:"1"},uA=pt(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),hA={class:"dialog-form-item"},dA={id:"enable-engine-timeout",ref:"enableEngineTimeout",type:"checkbox"},fA=pt(()=>m("label",{for:"enable-engine-timeout"},"",-1)),pA={class:"dialog-form-area flags"},gA=pt(()=>m("div",{class:"top-label"},"",-1)),mA={class:"dialog-form-item"},_A=pt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),bA={ref:"startPosition"},yA=bd('<option value="current" data-v-2e3b1271></option><option value="standard" data-v-2e3b1271></option><option value="handicapLance" data-v-2e3b1271></option><option value="handicapRightLance" data-v-2e3b1271></option><option value="handicapBishop" data-v-2e3b1271></option><option value="handicapRook" data-v-2e3b1271></option><option value="handicapRookLance" data-v-2e3b1271></option><option value="handicap2Pieces" data-v-2e3b1271>2</option><option value="handicap4Pieces" data-v-2e3b1271>4</option><option value="handicap6Pieces" data-v-2e3b1271>6</option><option value="handicap8Pieces" data-v-2e3b1271>8</option>',11),vA=[yA],SA={class:"dialog-form-item"},wA=pt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),EA={ref:"maxMoves",class:"number",type:"number",min:"1"},AA={class:"dialog-form-item"},xA=pt(()=>m("div",{class:"dialog-form-item-label"},"",-1)),kA={ref:"repeat",class:"number",type:"number",min:"1"},IA={class:"dialog-form-item"},CA={id:"swap-players",ref:"swapPlayers",type:"checkbox"},MA=pt(()=>m("label",{for:"swap-players"},"1",-1)),PA={class:"dialog-form-item"},TA={id:"enable-comment",ref:"enableComment",type:"checkbox"},BA=pt(()=>m("label",{for:"enable-comment"},"",-1)),DA={class:"dialog-form-item"},RA={id:"enable-auto-save",ref:"enableAutoSave",type:"checkbox"},OA=pt(()=>m("label",{for:"enable-auto-save"},"",-1)),NA={class:"dialog-form-item"},LA={id:"human-is-front",ref:"humanIsFront",type:"checkbox"},FA=pt(()=>m("label",{for:"human-is-front"},"",-1)),$A={class:"dialog-main-buttons"};function HA(t,e,i,n,s,o){const r=Ee("PlayerSelector"),a=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",$3,[H3,m("div",U3,[m("div",W3,[m("div",G3,[V3,K(r,{players:t.players,"player-uri":t.blackPlayerURI,"engine-settings":t.engineSettings.json,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectBlackPlayer},null,8,["players","player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),m("div",j3,[z3,t.whitePlayerURI?(D(),nt(r,{key:0,players:t.players,"player-uri":t.whitePlayerURI,"engine-settings":t.engineSettings.json,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectWhitePlayer},null,8,["players","player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])):pe("",!0)])]),m("div",K3,[m("button",{onClick:e[0]||(e[0]=(...l)=>t.onSwapColor&&t.onSwapColor(...l))},[K(a,{class:"icon",icon:t.Icon.SWAP_H},null,8,["icon"]),$e("  ")])])]),m("div",q3,[m("div",Y3,[X3,m("div",J3,[Z3,m("input",Q3,null,512),eA,m("input",tA,null,512),iA]),m("div",nA,[sA,m("input",oA,null,512),rA]),m("div",aA,[lA,m("input",cA,null,512),uA]),m("div",hA,[m("input",dA,null,512),fA])]),m("div",pA,[gA,m("div",mA,[_A,m("select",bA,vA,512)]),m("div",SA,[wA,m("input",EA,null,512)]),m("div",AA,[xA,m("input",kA,null,512)]),m("div",IA,[m("input",CA,null,512),MA]),m("div",PA,[m("input",TA,null,512),BA]),m("div",DA,[m("input",RA,null,512),OA]),m("div",NA,[m("input",LA,null,512),FA])])]),m("div",$A,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[1]||(e[1]=l=>t.onStart())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[2]||(e[2]=l=>t.onCancel())},"  ")])],512)])}const UA=Ue(F3,[["render",HA],["__scopeId","data-v-2e3b1271"]]),WA=He({name:"CSAGameDialog",components:{PlayerSelector:Tr},setup(){const t=ze(),e=z(null),i=z(null),n=z(Os.V121),s=z(null),o=z(null),r=z(null),a=z(null),l=z(null),c=z(null),u=z(null),h=z(null),f=z(null),p=z(null),b=z(!1),_=z(l_()),v=z(new Ht),y=z("");let w=!1,E=!1;t.retainBussyState(),it(async()=>{try{b.value=await fe.isEncryptionAvailable(),_.value=await fe.loadCSAGameSettingHistory(),v.value=await fe.loadUSIEngineSetting(),wt(e.value),ei(e.value),w=!0}catch(se){t.pushError(se),t.destroyModalDialog()}finally{t.releaseBussyState()}}),Wt(()=>{ti(e.value)}),js(()=>{if(!w||E)return;const se=c_(_.value,0);i.value.value=n.value=se.server.protocolVersion,s.value.value=se.server.host,o.value.value=se.server.port,r.value.value=se.server.id,a.value.value=se.server.password,c.value.checked=se.enableComment,u.value.checked=se.enableAutoSave,h.value.value=se.repeat,f.value.checked=se.autoRelogin,p.value.checked=se.autoFlip,y.value=se.player.uri,E=!0});const x=se=>{if(Gi(se)&&v.value.hasEngine(se)){const he=v.value.getEngine(se);return{name:he.name,uri:se,usi:he}}return{name:"",uri:Ft}},I=()=>{const se={player:x(y.value),server:{protocolVersion:i.value.value,host:String(s.value.value||"").trim(),port:Number(o.value.value),id:String(r.value.value||""),password:String(a.value.value||"")},enableComment:c.value.checked,enableAutoSave:u.value.checked,repeat:ft(h.value),autoRelogin:f.value.checked,autoFlip:p.value.checked},he=a_(se);he?t.pushError(he):t.loginCSAGame(se,{saveHistory:l.value.checked})},T=()=>{t.closeModalDialog()},H=async se=>{const he=new Ht(v.value.json);he.updateEngine(se),t.retainBussyState();try{await fe.saveUSIEngineSetting(he),v.value=he}catch(q){t.pushError(q)}finally{t.releaseBussyState()}},V=se=>{y.value=se},Q=se=>{const he=se.target;a.value.type=he.checked?"text":"password"},ae=se=>{const he=se.target,q=_.value.serverHistory[Number(he.value)];q&&(i.value.value=q.protocolVersion,s.value.value=q.host,o.value.value=q.port,r.value.value=q.id,a.value.value=q.password)},Z=()=>{n.value=i.value.value},ge=de(()=>[{name:"",uri:Ft},...v.value.engineList]),Re=de(()=>_.value.serverHistory.map((se,he)=>({index:he,...se}))),Ye=de(()=>t.appSetting.enableCSALog&&t.appSetting.enableAppLog&&t.appSetting.enableUSILog);return{CSAProtocolVersion:Os,maxServerHistoryLenght:qd,dialog:e,protocolVersion:i,host:s,port:o,id:r,password:a,saveHistory:l,enableComment:c,enableAutoSave:u,repeat:h,autoRelogin:f,autoFlip:p,engineSettings:v,playerURI:y,players:ge,serverHistory:Re,selectedProtocolVersion:n,onChangeProtocolVersion:Z,logEnabled:Ye,isEncryptionAvailable:b,onStart:I,onCancel:T,onUpdatePlayerSetting:H,onSelectPlayer:V,onTogglePasswordVisibility:Q,onChangeHistory:ae,Icon:It}}});const gt=t=>(qt("data-v-c4599750"),t=t(),Yt(),t),GA={ref:"dialog",class:"root"},VA=gt(()=>m("div",{class:"dialog-title"},"CSA ",-1)),jA={class:"dialog-scroll-area"},zA={key:0,class:"dialog-form-area dialog-form-warning"},KA=gt(()=>m("div",{class:"dialog-form-note"},"  CSA  ",-1)),qA=[KA],YA={class:"dialog-form-area"},XA=gt(()=>m("div",null,"",-1)),JA={class:"dialog-form-area"},ZA={class:"dialog-form-item"},QA=gt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),e2={key:0,value:"0"},t2=["value"],i2=gt(()=>m("hr",null,null,-1)),n2={class:"dialog-form-item"},s2=gt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),o2=["value"],r2=["value"],a2={key:0,class:"dialog-form-area dialog-form-item dialog-form-warning"},l2=gt(()=>m("div",{class:"dialog-form-note"}," CSA ",-1)),c2=[l2],u2={key:1,class:"dialog-form-area dialog-form-item dialog-form-warning"},h2=gt(()=>m("div",{class:"dialog-form-note"}," FloodgateWCSC ",-1)),d2=[h2],f2={class:"dialog-form-item"},p2=gt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),g2={ref:"host",class:"long-text",list:"csa-server-host",type:"text"},m2=gt(()=>m("datalist",{id:"csa-server-host"},[m("option",{value:"gserver.computer-shogi.org"}),m("option",{value:"wdoor.c.u-tokyo.ac.jp"}),m("option",{value:"localhost"})],-1)),_2={class:"dialog-form-item"},b2=gt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),y2={ref:"port",class:"number",list:"csa-server-port-number",type:"number"},v2=gt(()=>m("datalist",{id:"csa-server-port-number"},[m("option",{value:"4081"})],-1)),S2={class:"dialog-form-item"},w2=gt(()=>m("div",{class:"dialog-form-item-label-wide"},"ID",-1)),E2={ref:"id",class:"long-text",type:"text"},A2={class:"dialog-form-item"},x2=gt(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),k2={ref:"password",class:"long-text",type:"password"},I2={class:"dialog-form-item"},C2=gt(()=>m("label",{for:"show-password"},"",-1)),M2={class:"dialog-form-area dialog-form-item dialog-form-warning"},P2={key:0,class:"dialog-form-note"},T2={key:1,class:"dialog-form-note"},B2={class:"dialog-form-item"},D2={id:"save-history",ref:"saveHistory",type:"checkbox",checked:""},R2={for:"save-history"},O2={class:"dialog-form-area"},N2={class:"dialog-form-item"},L2=gt(()=>m("div",{class:"dialog-form-item-label-wide number"},"",-1)),F2={ref:"repeat",class:"number",type:"number",min:"1"},$2={class:"dialog-form-item"},H2={id:"auto-relogin",ref:"autoRelogin",type:"checkbox"},U2=gt(()=>m("label",{for:"auto-relogin"},"",-1)),W2={class:"dialog-form-item"},G2={id:"enable-comment",ref:"enableComment",type:"checkbox"},V2=gt(()=>m("label",{for:"enable-comment"},"",-1)),j2={class:"dialog-form-item"},z2={id:"enable-auto-save",ref:"enableAutoSave",type:"checkbox"},K2=gt(()=>m("label",{for:"enable-auto-save"},"",-1)),q2={class:"dialog-form-item"},Y2={id:"auto-flip",ref:"autoFlip",type:"checkbox"},X2=gt(()=>m("label",{for:"auto-flip"},"",-1)),J2={class:"dialog-main-buttons"};function Z2(t,e,i,n,s,o){const r=Ee("PlayerSelector");return D(),$("div",null,[m("dialog",GA,[VA,m("div",jA,[t.logEnabled?pe("",!0):(D(),$("div",zA,qA)),m("div",YA,[XA,K(r,{players:t.players,"player-uri":t.playerURI,"engine-settings":t.engineSettings.json,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectPlayer},null,8,["players","player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),m("div",JA,[m("div",ZA,[QA,m("select",{class:"long-text",value:"0",onChange:e[0]||(e[0]=(...a)=>t.onChangeHistory&&t.onChangeHistory(...a))},[t.serverHistory.length===0?(D(),$("option",e2,"  ")):pe("",!0),(D(!0),$(Pe,null,Qe(t.serverHistory,a=>(D(),$("option",{key:a.index,value:a.index},ye(a.host)+":"+ye(a.port)+" "+ye(a.id),9,t2))),128))],32)]),i2,m("div",n2,[s2,m("select",{ref:"protocolVersion",class:"long-text",value:"CSA_v121",onChange:e[1]||(e[1]=(...a)=>t.onChangeProtocolVersion&&t.onChangeProtocolVersion(...a))},[m("option",{value:t.CSAProtocolVersion.V121}," CSA1.2.1  ",8,o2),m("option",{value:t.CSAProtocolVersion.V121_FLOODGATE}," CSA1.2.1  ",8,r2)],544)]),t.selectedProtocolVersion===t.CSAProtocolVersion.V121?(D(),$("div",a2,c2)):pe("",!0),t.selectedProtocolVersion===t.CSAProtocolVersion.V121_FLOODGATE?(D(),$("div",u2,d2)):pe("",!0),m("div",f2,[p2,m("input",g2,null,512),m2]),m("div",_2,[b2,m("input",y2,null,512),v2]),m("div",S2,[w2,m("input",E2,null,512)]),m("div",A2,[x2,m("input",k2,null,512)]),m("div",I2,[m("input",{id:"show-password",type:"checkbox",onChange:e[2]||(e[2]=(...a)=>t.onTogglePasswordVisibility&&t.onTogglePasswordVisibility(...a))},null,32),C2]),m("div",M2,[t.isEncryptionAvailable?(D(),$("div",P2," CSA ")):(D(),$("div",T2," OS  CSA "))]),m("div",B2,[m("input",D2,null,512),m("label",R2," "+ye(t.maxServerHistoryLenght)+" ",1)])]),m("div",O2,[m("div",N2,[L2,m("input",F2,null,512)]),m("div",$2,[m("input",H2,null,512),U2]),m("div",W2,[m("input",G2,null,512),V2]),m("div",j2,[m("input",z2,null,512),K2]),m("div",q2,[m("input",Y2,null,512),X2])])]),m("div",J2,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[3]||(e[3]=a=>t.onStart())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[4]||(e[4]=a=>t.onCancel())},"  ")])],512)])}const Q2=Ue(WA,[["render",Z2],["__scopeId","data-v-c4599750"]]),ex=He({name:"ResearchDialog",components:{PlayerSelector:Tr},setup(){const t=ze(),e=z(null),i=z(Ia()),n=z(new Ht),s=z("");t.retainBussyState(),it(async()=>{var u;wt(e.value),ei(e.value);try{i.value=await fe.loadResearchSetting(),n.value=await fe.loadUSIEngineSetting(),s.value=((u=i.value.usi)==null?void 0:u.uri)||""}catch(h){t.pushError(h),t.destroyModalDialog()}finally{t.releaseBussyState()}}),Wt(()=>{ti(e.value)});const o=de(()=>n.value.engineList);return{dialog:e,engineSettings:n,engineURI:s,engines:o,onStart:()=>{if(!s.value||!n.value.hasEngine(s.value)){t.pushError("");return}const h={usi:n.value.getEngine(s.value)};t.startResearch(h)},onCancel:()=>{t.closeModalDialog()},onUpdatePlayerSetting:async u=>{const h=new Ht(n.value.json);h.updateEngine(u),t.retainBussyState();try{await fe.saveUSIEngineSetting(h),n.value=h}catch(f){t.pushError(f)}finally{t.releaseBussyState()}},onSelectPlayer:u=>{s.value=u}}}});const tx=t=>(qt("data-v-d50ab7fd"),t=t(),Yt(),t),ix={ref:"dialog",class:"root"},nx=tx(()=>m("div",{class:"dialog-title"},"",-1)),sx={class:"dialog-form-area"},ox={class:"dialog-main-buttons"};function rx(t,e,i,n,s,o){const r=Ee("PlayerSelector");return D(),$("div",null,[m("dialog",ix,[nx,m("div",sx,[K(r,{players:t.engines,"player-uri":t.engineURI,"engine-settings":t.engineSettings.json,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectPlayer},null,8,["players","player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),m("div",ox,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[0]||(e[0]=a=>t.onStart())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[1]||(e[1]=a=>t.onCancel())},"  ")])],512)])}const ax=Ue(ex,[["render",rx],["__scopeId","data-v-d50ab7fd"]]),lx=He({name:"USIEngineManagementDialog",components:{USIEngineOptionDialog:Qf},setup(){const t=ze(),e=z(null),i=z(null),n=z(new Ht);t.retainBussyState(),it(async()=>{wt(e.value),ei(e.value);try{n.value=await fe.loadUSIEngineSetting()}catch(p){t.pushError(p),t.destroyModalDialog()}finally{t.releaseBussyState()}}),Wt(()=>{ti(e.value)});const s=async()=>{try{t.retainBussyState();const p=await fe.showSelectUSIEngineDialog();if(!p)return;const b=t.appSetting.engineTimeoutSeconds;n.value.addEngine(await fe.getUSIEngineInfo(p,b))}catch(p){t.pushError(p)}finally{t.releaseBussyState()}},o=p=>{n.value.removeEngine(p)},r=p=>{i.value=n.value.getEngine(p)},a=p=>{const b=n.value.getEngine(p),_=Zm(b);n.value.addEngine(_)},l=async()=>{try{t.retainBussyState(),await fe.saveUSIEngineSetting(n.value),t.destroyModalDialog()}catch(p){t.pushError(p)}finally{t.releaseBussyState()}},c=()=>{t.closeModalDialog()},u=p=>{n.value.updateEngine(p),i.value=null},h=()=>{i.value=null},f=de(()=>n.value.engineList);return{optionDialog:i,dialog:e,engines:f,add:s,remove:o,openOptions:r,duplicate:a,saveAndClose:l,cancel:c,optionOk:u,optionCancel:h}}});const cx=t=>(qt("data-v-0924b571"),t=t(),Yt(),t),ux={ref:"dialog"},hx=cx(()=>m("div",{class:"dialog-title"},"",-1)),dx={class:"dialog-form-area engine-list"},fx={key:0,class:"engine"},px=["value"],gx={class:"engine-name"},mx=["onClick"],_x=["onClick"],bx=["onClick"],yx={class:"dialog-main-buttons"};function vx(t,e,i,n,s,o){const r=Ee("USIEngineOptionDialog");return D(),$(Pe,null,[m("div",null,[m("dialog",ux,[hx,m("div",dx,[t.engines.length===0?(D(),$("div",fx,"  ")):pe("",!0),(D(!0),$(Pe,null,Qe(t.engines,a=>(D(),$("div",{key:a.uri,class:"engine",value:a.uri},[m("div",gx,ye(a.name),1),m("button",{onClick:l=>t.openOptions(a.uri)},"",8,mx),m("button",{onClick:l=>t.duplicate(a.uri)},"",8,_x),m("button",{onClick:l=>t.remove(a.uri)},"",8,bx)],8,px))),128))]),m("button",{class:"dialog-wide-button",onClick:e[0]||(e[0]=a=>t.add())},""),m("div",yx,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[1]||(e[1]=a=>t.saveAndClose())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[2]||(e[2]=a=>t.cancel())},"  ")])],512)]),t.optionDialog?(D(),nt(r,{key:0,"latest-engine-setting":t.optionDialog,onOk:t.optionOk,onCancel:t.optionCancel},null,8,["latest-engine-setting","onOk","onCancel"])):pe("",!0)],64)}const Sx=Ue(lx,[["render",vx],["__scopeId","data-v-0924b571"]]),wx={"\r\n":"crlf","\n":"lf","\r":"cr"},Ex={crlf:`\r
`,lf:`
`,cr:"\r"},Ax=He({name:"AppSettingDialog",setup(){const t=ze(),e=z(null),i=z(null),n=z(null),s=z(null),o=z(null),r=z(null),a=z(null),l=z(null),c=z(null),u=z(null),h=z(null),f=z(null),p=z(null),b=z(null),_=z(null),v=z(null),y=z(null),w=z(null),E=z(null),x=z(null);it(()=>{wt(e.value),ei(e.value)}),Wt(()=>{ti(e.value)});const I=async()=>{const Q={thema:i.value.value,pieceImage:n.value.value,boardImage:s.value.value,boardLabelType:o.value.checked?Ss.STANDARD:Ss.NONE,pieceVolume:ft(r.value),clockVolume:ft(a.value),clockPitch:ft(l.value),clockSoundTarget:c.value.value,returnCode:Ex[u.value.value],autoSaveDirectory:h.value.value,engineTimeoutSeconds:ft(f.value),coefficientInSigmoid:ft(p.value),badMoveLevelThreshold1:ft(b.value),badMoveLevelThreshold2:ft(_.value),badMoveLevelThreshold3:ft(v.value),badMoveLevelThreshold4:ft(y.value),enableAppLog:w.value.checked,enableUSILog:E.value.checked,enableCSALog:x.value.checked};t.retainBussyState();try{await t.updateAppSetting(Q),t.closeAppSettingDialog()}catch(ae){t.pushError(ae)}finally{t.releaseBussyState()}},T=async()=>{t.retainBussyState();try{const Q=await fe.showSelectDirectoryDialog(h.value.value);Q&&(h.value.value=Q)}catch(Q){t.pushError(Q)}finally{t.releaseBussyState()}},H=()=>{t.closeAppSettingDialog()},V=de(()=>({...t.appSetting,returnCode:wx[t.appSetting.returnCode]}));return{Thema:Sl,PieceImageType:fl,BoardImageType:pl,BoardLabelType:Ss,dialog:e,thema:i,pieceImage:n,boardImage:s,displayBoardLabels:o,pieceVolume:r,clockVolume:a,clockPitch:l,clockSoundTarget:c,returnCode:u,autoSaveDirectory:h,engineTimeoutSeconds:f,coefficientInSigmoid:p,badMoveLevelThreshold1:b,badMoveLevelThreshold2:_,badMoveLevelThreshold3:v,badMoveLevelThreshold4:y,enableAppLog:w,enableUSILog:E,enableCSALog:x,appSetting:V,isNative:Xo(),selectAutoSaveDirectory:T,saveAndClose:I,cancel:H}}});const Ae=t=>(qt("data-v-c5651568"),t=t(),Yt(),t),xx={ref:"dialog"},kx=Ae(()=>m("div",{class:"dialog-title"},"",-1)),Ix={class:"dialog-scroll-area settings"},Cx={class:"section"},Mx=Ae(()=>m("div",{class:"section-title"},"",-1)),Px={class:"dialog-form-item"},Tx=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Bx=["value"],Dx=["value"],Rx=["value"],Ox=["value"],Nx=["value"],Lx=["value"],Fx={class:"dialog-form-item"},$x=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Hx=["value"],Ux=["value"],Wx=["value"],Gx=["value"],Vx=["value"],jx={class:"dialog-form-item"},zx=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Kx=["value"],qx=["value"],Yx=["value"],Xx=["value"],Jx=["value"],Zx=["value"],Qx=["value"],ek=["value"],tk=["value"],ik={class:"dialog-form-item"},nk=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),sk=["checked"],ok=Ae(()=>m("hr",null,null,-1)),rk={class:"section"},ak=Ae(()=>m("div",{class:"section-title"},"",-1)),lk={class:"dialog-form-item"},ck=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),uk=["value"],hk=Ae(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),dk={class:"dialog-form-item"},fk=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),pk=["value"],gk=Ae(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),mk={class:"dialog-form-item"},_k=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),bk=["value"],yk=Ae(()=>m("div",{class:"dialog-form-item-unit"},"Hz (220  880 )",-1)),vk={class:"dialog-form-item"},Sk=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),wk=["value"],Ek=Ae(()=>m("option",{value:"all"},"",-1)),Ak=Ae(()=>m("option",{value:"onlyUser"},"",-1)),xk=[Ek,Ak],kk=Ae(()=>m("hr",null,null,-1)),Ik={class:"section"},Ck=Ae(()=>m("div",{class:"section-title"},"",-1)),Mk={class:"dialog-form-item"},Pk=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Tk=["value"],Bk=Ae(()=>m("option",{value:"crlf"},"CR + LF (Windows)",-1)),Dk=Ae(()=>m("option",{value:"lf"},"LF (UNIX/Mac)",-1)),Rk=Ae(()=>m("option",{value:"cr"},"CR (90Mac)",-1)),Ok=[Bk,Dk,Rk],Nk={class:"dialog-form-item"},Lk=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Fk=["value"],$k=Ae(()=>m("hr",null,null,-1)),Hk={class:"section"},Uk=Ae(()=>m("div",{class:"section-title"},"USI",-1)),Wk={class:"dialog-form-item"},Gk=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Vk=["value"],jk=Ae(()=>m("div",{class:"dialog-form-item-unit"}," (1  300 )",-1)),zk=Ae(()=>m("hr",null,null,-1)),Kk={class:"section"},qk=Ae(()=>m("div",{class:"section-title"},"",-1)),Yk={class:"dialog-form-item"},Xk=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),Jk=["value"],Zk=Ae(()=>m("div",{class:"dialog-form-item-unit"},"(: 600  1500 )",-1)),Qk={class:"dialog-form-item"},eI=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),tI=["value"],iI=Ae(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),nI={class:"dialog-form-item"},sI=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),oI=["value"],rI=Ae(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),aI={class:"dialog-form-item"},lI=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),cI=["value"],uI=Ae(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),hI={class:"dialog-form-item"},dI=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),fI=["value"],pI=Ae(()=>m("div",{class:"dialog-form-item-unit"},"%",-1)),gI=Ae(()=>m("hr",null,null,-1)),mI={class:"section"},_I=Ae(()=>m("div",{class:"section-title"},"",-1)),bI={class:"dialog-form-area dialog-form-warning"},yI={key:0,class:"dialog-form-note"},vI=Ae(()=>m("div",{class:"dialog-form-note"},"  ",-1)),SI=Ae(()=>m("div",{class:"dialog-form-note"}," - ",-1)),wI=Ae(()=>m("div",{class:"dialog-form-note"},"  ",-1)),EI={class:"dialog-form-item"},AI=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),xI=["checked"],kI={class:"dialog-form-item"},II=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"USI",-1)),CI=["checked"],MI={class:"dialog-form-item"},PI=Ae(()=>m("div",{class:"dialog-form-item-label-wide"},"CSA",-1)),TI=["checked"],BI={class:"dialog-main-buttons"};function DI(t,e,i,n,s,o){return D(),$("div",null,[m("dialog",xx,[kx,m("div",Ix,[m("div",Cx,[Mx,m("div",Px,[Tx,m("select",{ref:"thema",value:t.appSetting.thema},[m("option",{value:t.Thema.STANDARD},"",8,Dx),m("option",{value:t.Thema.CHERRY_BLOSSOM},"",8,Rx),m("option",{value:t.Thema.AUTUMN},"",8,Ox),m("option",{value:t.Thema.SNOW},"",8,Nx),m("option",{value:t.Thema.DARK},"",8,Lx)],8,Bx)]),m("div",Fx,[$x,m("select",{ref:"pieceImage",value:t.appSetting.pieceImage},[m("option",{value:t.PieceImageType.HITOMOJI},"",8,Ux),m("option",{value:t.PieceImageType.HITOMOJI_GOTHIC},"  ",8,Wx),m("option",{value:t.PieceImageType.HITOMOJI_DARK},"  ",8,Gx),m("option",{value:t.PieceImageType.HITOMOJI_GOTHIC_DARK},"  ",8,Vx)],8,Hx)]),m("div",jx,[zx,m("select",{ref:"boardImage",value:t.appSetting.boardImage},[m("option",{value:t.BoardImageType.LIGHT},"",8,qx),m("option",{value:t.BoardImageType.WARM},"",8,Yx),m("option",{value:t.BoardImageType.RESIN},"",8,Xx),m("option",{value:t.BoardImageType.RESIN2},"2",8,Jx),m("option",{value:t.BoardImageType.RESIN3},"3",8,Zx),m("option",{value:t.BoardImageType.DARK},"",8,Qx),m("option",{value:t.BoardImageType.GREEN},"",8,ek),m("option",{value:t.BoardImageType.CHERRY_BLOSSOM},"",8,tk)],8,Kx)]),m("div",ik,[nk,m("input",{ref:"displayBoardLabels",class:"toggle",checked:t.appSetting.boardLabelType!=t.BoardLabelType.NONE,type:"checkbox"},null,8,sk)])]),ok,m("div",rk,[ak,m("div",lk,[ck,m("input",{ref:"pieceVolume",value:t.appSetting.pieceVolume,type:"number",max:"100",min:"0"},null,8,uk),hk]),m("div",dk,[fk,m("input",{ref:"clockVolume",value:t.appSetting.clockVolume,type:"number",max:"100",min:"0"},null,8,pk),gk]),m("div",mk,[_k,m("input",{ref:"clockPitch",value:t.appSetting.clockPitch,type:"number",max:"880",min:"220"},null,8,bk),yk]),m("div",vk,[Sk,m("select",{ref:"clockSoundTarget",value:t.appSetting.clockSoundTarget},xk,8,wk)])]),kk,m("div",Ik,[Ck,m("div",Mk,[Pk,m("select",{ref:"returnCode",value:t.appSetting.returnCode},Ok,8,Tk)]),m("div",Nk,[Lk,m("input",{ref:"autoSaveDirectory",class:"directory",value:t.appSetting.autoSaveDirectory,type:"text"},null,8,Fk),m("button",{class:"dialog-button",onClick:e[0]||(e[0]=(...r)=>t.selectAutoSaveDirectory&&t.selectAutoSaveDirectory(...r))},"  ")])]),$k,m("div",Hk,[Uk,m("div",Wk,[Gk,m("input",{ref:"engineTimeoutSeconds",value:t.appSetting.engineTimeoutSeconds,type:"number",max:"300",min:"1"},null,8,Vk),jk])]),zk,m("div",Kk,[qk,m("div",Yk,[Xk,m("input",{ref:"coefficientInSigmoid",value:t.appSetting.coefficientInSigmoid,type:"number",max:"10000",min:"1"},null,8,Jk),Zk]),m("div",Qk,[eI,m("input",{ref:"badMoveLevelThreshold1",value:t.appSetting.badMoveLevelThreshold1,type:"number",max:"100",min:"0"},null,8,tI),iI]),m("div",nI,[sI,m("input",{ref:"badMoveLevelThreshold2",value:t.appSetting.badMoveLevelThreshold2,type:"number",max:"100",min:"0"},null,8,oI),rI]),m("div",aI,[lI,m("input",{ref:"badMoveLevelThreshold3",value:t.appSetting.badMoveLevelThreshold3,type:"number",max:"100",min:"0"},null,8,cI),uI]),m("div",hI,[dI,m("input",{ref:"badMoveLevelThreshold4",value:t.appSetting.badMoveLevelThreshold4,type:"number",max:"100",min:"0"},null,8,fI),pI])]),gI,m("div",mI,[_I,m("div",bI,[t.isNative?pe("",!0):(D(),$("div",yI,"  ")),vI,SI,wI]),m("div",EI,[AI,m("input",{ref:"enableAppLog",class:"toggle",checked:t.appSetting.enableAppLog,type:"checkbox"},null,8,xI)]),m("div",kI,[II,m("input",{ref:"enableUSILog",class:"toggle",checked:t.appSetting.enableUSILog,type:"checkbox"},null,8,CI)]),m("div",MI,[PI,m("input",{ref:"enableCSALog",class:"toggle",checked:t.appSetting.enableCSALog,type:"checkbox"},null,8,TI)])])]),m("div",BI,[m("button",{class:"dialog-button","data-hotkey":"Enter",autofocus:"",onClick:e[1]||(e[1]=r=>t.saveAndClose())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[2]||(e[2]=r=>t.cancel())},"  ")])],512)])}const RI=Ue(Ax,[["render",DI],["__scopeId","data-v-c5651568"]]),OI=He({name:"PasteDialog",setup(){const t=ze(),e=z(null),i=z(null);return t.retainBussyState(),it(async()=>{try{wt(e.value),ei(e.value),Xo()&&(i.value.value=await navigator.clipboard.readText())}finally{t.releaseBussyState()}}),Wt(()=>{ti(e.value)}),{dialog:e,textarea:i,onOk:()=>{const o=i.value.value;if(!o){t.pushError(new Error(""));return}t.closeModalDialog(),t.pasteRecord(o)},onCancel:()=>{t.closeModalDialog()},isNative:Xo()}}});const Ul=t=>(qt("data-v-78c1478b"),t=t(),Yt(),t),NI={ref:"dialog"},LI={ref:"content"},FI={class:"dialog-form-area"},$I=Ul(()=>m("div",{class:"message"},"()",-1)),HI=Ul(()=>m("div",{class:"message"},"KIF/CSA/SFEN",-1)),UI={key:0,class:"message"},WI=Ul(()=>m("br",null,null,-1)),GI={ref:"textarea"},VI={class:"dialog-main-buttons"};function jI(t,e,i,n,s,o){return D(),$("div",null,[m("dialog",NI,[m("div",LI,[m("div",FI,[$I,HI,t.isNative?pe("",!0):(D(),$("div",UI,[$e(" "),WI,$e("  ")])),m("textarea",GI,null,512)])],512),m("div",VI,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[0]||(e[0]=(...r)=>t.onOk&&t.onOk(...r))},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[1]||(e[1]=(...r)=>t.onCancel&&t.onCancel(...r))},"  ")])],512)])}const zI=Ue(OI,[["render",jI],["__scopeId","data-v-78c1478b"]]),KI=He({name:"BussyMessage",components:{ButtonIcon:Vt},setup(){const t=z(null);return it(()=>{wt(t.value)}),{dialog:t,Icon:It}}});const qI=t=>(qt("data-v-6133dbac"),t=t(),Yt(),t),YI={ref:"dialog",class:"bussy"},XI={class:"message-box"},JI=qI(()=>m("div",{class:"message"},"",-1));function ZI(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",YI,[m("div",XI,[K(r,{class:"icon",icon:t.Icon.BUSSY},null,8,["icon"]),JI])],512)])}const QI=Ue(KI,[["render",ZI],["__scopeId","data-v-6133dbac"]]),e5=He({name:"InfoMessage",components:{ButtonIcon:Vt},setup(){const t=ze(),e=z(null),i=de(()=>t.confirmation),n=()=>{t.confirmationOk()},s=()=>{t.confirmationCancel()};return it(()=>{wt(e.value,s),ei(e.value)}),Wt(()=>{ti(e.value)}),{dialog:e,message:i,onOk:n,onClose:s,Icon:It}}});const t5={ref:"dialog",class:"confirm"},i5={class:"message-box"},n5={class:"message"},s5={class:"dialog-main-buttons"};function o5(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",t5,[m("div",i5,[K(r,{class:"icon",icon:t.Icon.QUESTION},null,8,["icon"]),m("div",n5,ye(t.message),1)]),m("div",s5,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[0]||(e[0]=a=>t.onOk())}," OK "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[1]||(e[1]=a=>t.onClose())},"  ")])],512)])}const r5=Ue(e5,[["render",o5],["__scopeId","data-v-7705d878"]]),a5=He({name:"InfoMessage",components:{ButtonIcon:Vt},setup(){const t=ze(),e=z(null);it(()=>{wt(e.value),ei(e.value)}),Wt(()=>{ti(e.value)});const i=de(()=>t.message);return{dialog:e,message:i,onClose:()=>{t.dequeueMessage()},Icon:It}}});const l5={ref:"dialog",class:"info"},c5={class:"message-box"},u5={class:"message"},h5={key:0,class:"list"},d5={class:"dialog-main-buttons"};function f5(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",l5,[m("div",c5,[K(r,{class:"icon",icon:t.Icon.INFO},null,8,["icon"]),m("div",u5,ye(t.message.text),1)]),(D(!0),$(Pe,null,Qe(t.message.attachments,(a,l)=>(D(),$("div",{key:l,class:"attachment"},[a.type==="list"?(D(),$("ul",h5,[(D(!0),$(Pe,null,Qe(a.items,(c,u)=>(D(),$("li",{key:u,class:"list-item"},[$e(ye(c.text)+" ",1),m("ul",null,[(D(!0),$(Pe,null,Qe(c.children,(h,f)=>(D(),$("li",{key:f,class:"list-child-item"},ye(h),1))),128))])]))),128))])):pe("",!0)]))),128)),m("div",d5,[m("button",{autofocus:"","data-hotkey":"Escape",onClick:e[0]||(e[0]=a=>t.onClose())},"  ")])],512)])}const p5=Ue(a5,[["render",f5],["__scopeId","data-v-9daec433"]]),g5=He({name:"ErrorMessage",components:{ButtonIcon:Vt},setup(){const t=ze(),e=z(null);it(()=>{wt(e.value),ei(e.value)}),Wt(()=>{ti(e.value)});const i=de(()=>t.errors.map((s,o)=>({message:s.message,index:o})));return{dialog:e,errors:i,onClose:()=>{t.clearErrors()},Icon:It}}});const m5={ref:"dialog",class:"error"},_5={class:"message-box"},b5={class:"items"},y5={class:"notice"},v5={class:"index"},S5={class:"message"},w5={class:"dialog-main-buttons"};function E5(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",m5,[m("div",_5,[K(r,{class:"icon",icon:t.Icon.ERROR},null,8,["icon"]),m("div",b5,[m("div",y5,ye(t.errors.length)+"  ",1),(D(!0),$(Pe,null,Qe(t.errors,a=>(D(),$("div",{key:a.index,class:"item"},[m("p",v5,ye(a.index+1)+" ",1),m("p",S5,ye(a.message),1)]))),128))])]),m("div",w5,[m("button",{autofocus:"","data-hotkey":"Escape",onClick:e[0]||(e[0]=a=>t.onClose())},"  ")])],512)])}const A5=Ue(g5,[["render",E5],["__scopeId","data-v-fc079014"]]),x5=He({name:"ResearchDialog",components:{PlayerSelector:Tr},setup(){const t=ze(),e=z(null),i=z(null),n=z(null),s=z(null),o=z(null),r=z(null),a=z(null),l=z(Aa()),c=z(new Ht),u=z("");t.retainBussyState(),it(async()=>{var w;wt(e.value),ei(e.value);try{l.value=await fe.loadAnalysisSetting(),c.value=await fe.loadUSIEngineSetting(),u.value=((w=l.value.usi)==null?void 0:w.uri)||""}catch(E){t.pushError(E),t.destroyModalDialog()}finally{t.releaseBussyState()}}),Wt(()=>{ti(e.value)});const h=()=>{n.value.disabled=!i.value.checked,o.value.disabled=!s.value.checked},f=()=>{if(!u.value||!c.value.hasEngine(u.value)){t.pushError("");return}const E={usi:c.value.getEngine(u.value),startCriteria:{enableNumber:i.value.checked,number:ft(n.value)},endCriteria:{enableNumber:s.value.checked,number:ft(o.value)},perMoveCriteria:{maxSeconds:ft(r.value)},commentBehavior:a.value.value};t.startAnalysis(E)},p=()=>{t.closeModalDialog()},b=async w=>{const E=new Ht(c.value.json);E.updateEngine(w),t.retainBussyState();try{await fe.saveUSIEngineSetting(E),c.value=E}catch(x){t.pushError(x)}finally{t.releaseBussyState()}},_=w=>{u.value=w},v=de(()=>c.value.engineList),y=de(()=>({enableStartNumber:l.value.startCriteria.enableNumber,startNumber:l.value.startCriteria.number,enableEndNumber:l.value.endCriteria.enableNumber,endNumber:l.value.endCriteria.number,maxSecondsPerMove:l.value.perMoveCriteria.maxSeconds,commentBehavior:l.value.commentBehavior}));return{CommentBehavior:es,dialog:e,engineSettings:c,engineURI:u,enableStartNumber:i,startNumber:n,enableEndNumber:s,endNumber:o,maxSecondsPerMove:r,commentBehavior:a,engines:v,defaultValues:y,updateToggle:h,onStart:f,onCancel:p,onUpdatePlayerSetting:b,onSelectPlayer:_}}});const xi=t=>(qt("data-v-564d763a"),t=t(),Yt(),t),k5={ref:"dialog",class:"root"},I5=xi(()=>m("div",{class:"dialog-title"},"",-1)),C5={class:"dialog-form-area"},M5=xi(()=>m("div",null,"",-1)),P5={class:"dialog-form-area"},T5=xi(()=>m("div",null,"",-1)),B5={class:"dialog-form-item"},D5=["checked"],R5=["disabled","value"],O5=xi(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),N5={class:"dialog-form-area"},L5=xi(()=>m("div",null,"",-1)),F5={class:"dialog-form-item"},$5=["checked"],H5=["disabled","value"],U5=xi(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),W5={class:"dialog-form-area"},G5=xi(()=>m("div",null,"",-1)),V5={class:"dialog-form-item"},j5=["value"],z5=xi(()=>m("div",{class:"dialog-form-item-unit"},"",-1)),K5={class:"dialog-form-area"},q5=xi(()=>m("div",null,"",-1)),Y5={class:"dialog-form-item"},X5=xi(()=>m("div",{class:"dialog-form-item-label-wide"},"",-1)),J5=["value"],Z5=["value"],Q5=["value"],e6=["value"],t6=["value"],i6={class:"dialog-main-buttons"};function n6(t,e,i,n,s,o){const r=Ee("PlayerSelector");return D(),$("div",null,[m("dialog",k5,[I5,m("div",C5,[M5,K(r,{players:t.engines,"player-uri":t.engineURI,"engine-settings":t.engineSettings.json,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:t.onUpdatePlayerSetting,onSelectPlayer:t.onSelectPlayer},null,8,["players","player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),m("div",P5,[T5,m("div",B5,[m("input",{ref:"enableStartNumber",class:"toggle",type:"checkbox",checked:t.defaultValues.enableStartNumber,onChange:e[0]||(e[0]=(...a)=>t.updateToggle&&t.updateToggle(...a))},null,40,D5),m("input",{ref:"startNumber",class:"small",type:"number",min:"1",step:"1",disabled:!t.defaultValues.enableStartNumber,value:t.defaultValues.startNumber},null,8,R5),O5])]),m("div",N5,[L5,m("div",F5,[m("input",{ref:"enableEndNumber",class:"toggle",type:"checkbox",checked:t.defaultValues.enableEndNumber,onChange:e[1]||(e[1]=(...a)=>t.updateToggle&&t.updateToggle(...a))},null,40,$5),m("input",{ref:"endNumber",class:"small",type:"number",min:"1",step:"1",disabled:!t.defaultValues.enableEndNumber,value:t.defaultValues.endNumber},null,8,H5),U5])]),m("div",W5,[G5,m("div",V5,[m("input",{ref:"maxSecondsPerMove",class:"small",type:"number",min:"0",step:"1",value:t.defaultValues.maxSecondsPerMove},null,8,j5),z5])]),m("div",K5,[q5,m("div",Y5,[X5,m("select",{ref:"commentBehavior",size:"1",value:t.defaultValues.commentBehavior},[m("option",{value:t.CommentBehavior.NONE},"",8,Z5),m("option",{value:t.CommentBehavior.INSERT},"",8,Q5),m("option",{value:t.CommentBehavior.APPEND},"",8,e6),m("option",{value:t.CommentBehavior.OVERWRITE},"",8,t6)],8,J5)])]),m("div",i6,[m("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:e[2]||(e[2]=a=>t.onStart())},"  "),m("button",{class:"dialog-button","data-hotkey":"Escape",onClick:e[3]||(e[3]=a=>t.onCancel())},"  ")])],512)])}const s6=Ue(x5,[["render",n6],["__scopeId","data-v-564d763a"]]),o6=He({name:"CSAGameReadyDialog",components:{ButtonIcon:Vt},setup(){const t=ze(),e=z(null);return it(()=>{wt(e.value),ei(e.value)}),Wt(()=>{ti(e.value)}),{dialog:e,Icon:It,onLogout:()=>{t.logoutCSAGame()}}}});const r6=t=>(qt("data-v-a8d91316"),t=t(),Yt(),t),a6={ref:"dialog",class:"bussy"},l6={class:"message-box"},c6=r6(()=>m("div",{class:"message"},"",-1)),u6={class:"dialog-main-buttons"};function h6(t,e,i,n,s,o){const r=Ee("ButtonIcon");return D(),$("div",null,[m("dialog",a6,[m("div",l6,[K(r,{class:"icon",icon:t.Icon.BUSSY},null,8,["icon"]),c6]),m("div",u6,[m("button",{autofocus:"","data-hotkey":"Escape",onClick:e[0]||(e[0]=a=>t.onLogout())},"  ")])],512)])}const d6=Ue(o6,[["render",h6],["__scopeId","data-v-a8d91316"]]),f6=He({name:"App",components:{StandardLayout:V4,GameDialog:UA,CSAGameDialog:Q2,ResearchDialog:ax,USIEngineManagementDialog:Sx,AppSettingDialog:RI,PasteDialog:zI,BussyMessage:QI,ConfirmDialog:r5,InfoMessage:p5,ErrorMessage:A5,AnalysisDialog:s6,CSAGameReadyDialog:d6},setup(){const t=ze(),e=de(()=>t.appSetting.thema),i=de(()=>({game:t.appState===G.GAME_DIALOG,csaGame:t.appState===G.CSA_GAME_DIALOG,research:t.appState===G.RESEARCH_DIALOG,analysis:t.appState===G.ANALYSIS_DIALOG,usiEngineSetting:t.appState===G.USI_ENGINE_SETTING_DIALOG,appSetting:t.isAppSettingDialogVisible,paste:t.appState===G.PASTE_DIALOG,bussy:t.isBussy,confirm:t.confirmation!==void 0,csaGameReady:t.csaGameState===xr.READY})),n=de(()=>t.hasMessage),s=de(()=>t.hasError);return it(()=>{const o=document.getElementsByTagName("body")[0];o.addEventListener("copy",r=>{t.copyRecordKIF(),r.preventDefault()}),o.addEventListener("paste",r=>{t.showPasteDialog(),r.preventDefault()}),o.addEventListener("dragover",r=>{r.preventDefault()}),o.addEventListener("drop",r=>{if(r.dataTransfer&&r.dataTransfer.files[0]){const a=r.dataTransfer.files[0].path;t.openRecord(a)}r.preventDefault()})}),{thema:e,dialogVisibilities:i,hasMessage:n,hasErrors:s}}});function p6(t,e,i,n,s,o){const r=Ee("StandardLayout"),a=Ee("GameDialog"),l=Ee("CSAGameDialog"),c=Ee("ResearchDialog"),u=Ee("AnalysisDialog"),h=Ee("USIEngineManagementDialog"),f=Ee("AppSettingDialog"),p=Ee("PasteDialog"),b=Ee("BussyMessage"),_=Ee("ConfirmDialog"),v=Ee("CSAGameReadyDialog"),y=Ee("InfoMessage"),w=Ee("ErrorMessage");return D(),$("div",{class:Ze(["root",t.thema])},[K(r,{class:"main"}),t.dialogVisibilities.game?(D(),nt(a,{key:0})):pe("",!0),t.dialogVisibilities.csaGame?(D(),nt(l,{key:1})):pe("",!0),t.dialogVisibilities.research?(D(),nt(c,{key:2})):pe("",!0),t.dialogVisibilities.analysis?(D(),nt(u,{key:3})):pe("",!0),t.dialogVisibilities.usiEngineSetting?(D(),nt(h,{key:4})):pe("",!0),t.dialogVisibilities.appSetting?(D(),nt(f,{key:5})):pe("",!0),t.dialogVisibilities.paste?(D(),nt(p,{key:6})):pe("",!0),t.dialogVisibilities.bussy?(D(),nt(b,{key:7})):pe("",!0),t.dialogVisibilities.confirm?(D(),nt(_,{key:8})):pe("",!0),t.dialogVisibilities.csaGameReady?(D(),nt(v,{key:9})):pe("",!0),t.hasMessage?(D(),nt(y,{key:10})):pe("",!0),t.hasErrors?(D(),nt(w,{key:11})):pe("",!0)],2)}const g6=Ue(f6,[["render",p6],["__scopeId","data-v-926aa44a"]]);var we=(t=>(t.NEW_RECORD="resetRecord",t.OPEN_RECORD="openRecord",t.SAVE_RECORD="saveRecord",t.SAVE_RECORD_AS="saveRecordAs",t.COPY_RECORD="copyRecord",t.COPY_RECORD_CSA="copyRecordCsa",t.COPY_RECORD_USI_BEFORE="copyRecordUsiBefore",t.COPY_RECORD_USI_ALL="copyRecordUsiAll",t.COPY_BOARD_SFEN="copyRecordSfen",t.PASTE_RECORD="pasteRecord",t.INSERT_INTERRUPT="insertInterrupt",t.INSERT_RESIGN="insertResign",t.INSERT_DRAW="insertDraw",t.INSERT_IMPASS="insertImpass",t.INSERT_REPETITION_DRAW="insertRepetitionDraw",t.INSERT_MATE="insertMate",t.INSERT_TIMEOUT="insertTimeout",t.INSERT_FOUL_WIN="insertFoulWin",t.INSERT_FOUL_LOSE="insertFoulLose",t.INSERT_ENTERING_OF_KING="insertEnteringOfKing",t.INSERT_WIN_BY_DEFAULT="insertWinByDefault",t.INSERT_LOSS_BY_DEFAULT="insertLossByDefault",t.REMOVE_CURRENT_MOVE="remvoeCurrentMove",t.START_POSITION_EDITING="startPositionEditing",t.END_POSITION_EDITING="endPositionEditing",t.CHANGE_TURN="changeTurn",t.INIT_POSITION_STANDARD="initPositionStandard",t.INIT_POSITION_HANDICAP_LANCE="initPositionHandicapLance",t.INIT_POSITION_HANDICAP_RIGHT_LANCE="initPositionHandicapRightLance",t.INIT_POSITION_HANDICAP_BISHOP="initPositionHandicapBishop",t.INIT_POSITION_HANDICAP_ROOK="initPositionHandicapRook",t.INIT_POSITION_HANDICAP_ROOK_LANCE="initPositionHandicapRookLance",t.INIT_POSITION_HANDICAP_2PIECES="initPositionHandicap2Pieces",t.INIT_POSITION_HANDICAP_4PIECES="initPositionHandicap4Pieces",t.INIT_POSITION_HANDICAP_6PIECES="initPositionHandicap6Pieces",t.INIT_POSITION_HANDICAP_8PIECES="initPositionHandicap8Pieces",t.INIT_POSITION_TSUME_SHOGI="initPositionTsumeShogi",t.INIT_POSITION_TSUME_SHOGI_2KINGS="initPositionTsumeShogi2Kings",t.START_RESEARCH="startResearch",t.STOP_RESEARCH="stopResearch",t.START_ANALYSIS="startAnalysis",t.STOP_ANALYSIS="stopAnalysis",t.START_GAME="startGame",t.START_CSA_GAME="startCSAGame",t.STOP_GAME="stopGame",t.RESIGN="resign",t.WIN="win",t.LOGOUT="logout",t.FLIP_BOARD="flipBoard",t.APP_SETTING_DIALOG="appSetting",t.USI_ENGINE_SETTING_DIALOG="usiEngineSetting",t))(we||{});function m6(){const t=ze();Fe.onSendError(e=>{t.pushError(e)}),Fe.onMenuEvent(e=>{if(!t.isBussy)switch(e){case we.NEW_RECORD:t.resetRecord();break;case we.OPEN_RECORD:t.openRecord();break;case we.SAVE_RECORD:t.saveRecord({overwrite:!0});break;case we.SAVE_RECORD_AS:t.saveRecord();break;case we.COPY_RECORD:t.copyRecordKIF();break;case we.COPY_RECORD_CSA:t.copyRecordCSA();break;case we.COPY_RECORD_USI_BEFORE:t.copyRecordUSIBefore();break;case we.COPY_RECORD_USI_ALL:t.copyRecordUSIAll();break;case we.COPY_BOARD_SFEN:t.copyBoardSFEN();break;case we.PASTE_RECORD:t.showPasteDialog();break;case we.INSERT_INTERRUPT:t.insertSpecialMove(ne.INTERRUPT);break;case we.INSERT_RESIGN:t.insertSpecialMove(ne.RESIGN);break;case we.INSERT_DRAW:t.insertSpecialMove(ne.DRAW);break;case we.INSERT_IMPASS:t.insertSpecialMove(ne.IMPASS);break;case we.INSERT_REPETITION_DRAW:t.insertSpecialMove(ne.REPETITION_DRAW);break;case we.INSERT_MATE:t.insertSpecialMove(ne.MATE);break;case we.INSERT_TIMEOUT:t.insertSpecialMove(ne.TIMEOUT);break;case we.INSERT_FOUL_WIN:t.insertSpecialMove(ne.FOUL_WIN);break;case we.INSERT_FOUL_LOSE:t.insertSpecialMove(ne.FOUL_LOSE);break;case we.INSERT_ENTERING_OF_KING:t.insertSpecialMove(ne.ENTERING_OF_KING);break;case we.INSERT_WIN_BY_DEFAULT:t.insertSpecialMove(ne.WIN_BY_DEFAULT);break;case we.INSERT_LOSS_BY_DEFAULT:t.insertSpecialMove(ne.LOSS_BY_DEFAULT);break;case we.REMOVE_CURRENT_MOVE:t.removeCurrentMove();break;case we.START_POSITION_EDITING:t.startPositionEditing();break;case we.END_POSITION_EDITING:t.endPositionEditing();break;case we.CHANGE_TURN:t.changeTurn();break;case we.INIT_POSITION_STANDARD:t.initializePosition(Se.STANDARD);break;case we.INIT_POSITION_HANDICAP_LANCE:t.initializePosition(Se.HANDICAP_LANCE);break;case we.INIT_POSITION_HANDICAP_RIGHT_LANCE:t.initializePosition(Se.HANDICAP_RIGHT_LANCE);break;case we.INIT_POSITION_HANDICAP_BISHOP:t.initializePosition(Se.HANDICAP_BISHOP);break;case we.INIT_POSITION_HANDICAP_ROOK:t.initializePosition(Se.HANDICAP_ROOK);break;case we.INIT_POSITION_HANDICAP_ROOK_LANCE:t.initializePosition(Se.HANDICAP_ROOK_LANCE);break;case we.INIT_POSITION_HANDICAP_2PIECES:t.initializePosition(Se.HANDICAP_2PIECES);break;case we.INIT_POSITION_HANDICAP_4PIECES:t.initializePosition(Se.HANDICAP_4PIECES);break;case we.INIT_POSITION_HANDICAP_6PIECES:t.initializePosition(Se.HANDICAP_6PIECES);break;case we.INIT_POSITION_HANDICAP_8PIECES:t.initializePosition(Se.HANDICAP_8PIECES);break;case we.INIT_POSITION_TSUME_SHOGI:t.initializePosition(Se.TSUME_SHOGI);break;case we.INIT_POSITION_TSUME_SHOGI_2KINGS:t.initializePosition(Se.TSUME_SHOGI_2KINGS);break;case we.START_GAME:t.showGameDialog();break;case we.START_CSA_GAME:t.showCSAGameDialog();break;case we.STOP_GAME:t.stopGame();break;case we.RESIGN:Wn.resign();break;case we.WIN:Wn.win();break;case we.LOGOUT:t.logoutCSAGame();break;case we.START_RESEARCH:t.showResearchDialog();break;case we.STOP_RESEARCH:t.stopResearch();break;case we.START_ANALYSIS:t.showAnalysisDialog();break;case we.STOP_ANALYSIS:t.stopAnalysis();break;case we.FLIP_BOARD:t.flipBoard();break;case we.APP_SETTING_DIALOG:t.showAppSettingDialog();break;case we.USI_ENGINE_SETTING_DIALOG:t.showUsiEngineManagementDialog();break}}),Fe.onUSIBestMove((e,i,n,s)=>{Y1(e,i,n,s)}),Fe.onUSIInfo((e,i,n,s,o)=>{const r=JSON.parse(o);t.updateUSIInfo(e,i,n,s,r),Zc(e,i,r)}),Fe.onUSIPonderInfo((e,i,n,s,o)=>{const r=JSON.parse(o);t.updateUSIPonderInfo(e,i,n,s,r),Zc(e,i,r)}),Fe.onCSAGameSummary((e,i)=>{p_(e,JSON.parse(i))}),Fe.onCSAReject(e=>{g_(e)}),Fe.onCSAStart((e,i)=>{m_(e,JSON.parse(i))}),Fe.onCSAMove((e,i,n)=>{__(e,i,JSON.parse(n))}),Fe.onCSAGameResult((e,i,n)=>{b_(e,i,n)}),Fe.onCSAClose(e=>{y_(e)}),Ji(()=>[t.appState,t.isBussy],([e,i])=>{Fe.updateMenuState(e,i)}),Fe.updateMenuState(t.appState,t.isBussy)}fe.log(Pt.INFO,"start renderer process");Di.register(...g4);m6();const ua=ze();Promise.allSettled([fe.loadAppSetting().then(t=>{ua.updateAppSetting(t)}).catch(t=>{ua.pushError(new Error(" :"+t))}),fe.getRecordPathFromProcArg().then(t=>{t&&ua.openRecord(t)})]).finally(()=>{fe.log(Pt.INFO,"mount app"),b0(g6).mount("#app")});
