var Up=Object.defineProperty;var zp=(e,t,i)=>t in e?Up(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var T=(e,t,i)=>(zp(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();function wl(e,t){const i=Object.create(null),n=e.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return t?s=>!!i[s.toLowerCase()]:s=>!!i[s]}function Se(e){if(Te(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=St(n)?jp(n):Se(n);if(s)for(const o in s)t[o]=s[o]}return t}else{if(St(e))return e;if(at(e))return e}}const Gp=/;(?![^(]*\))/g,Wp=/:([^]+)/,Vp=/\/\*.*?\*\//gs;function jp(e){const t={};return e.replace(Vp,"").split(Gp).forEach(i=>{if(i){const n=i.split(Wp);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function yt(e){let t="";if(St(e))t=e;else if(Te(e))for(let i=0;i<e.length;i++){const n=yt(e[i]);n&&(t+=n+" ")}else if(at(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Kp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qp=wl(Kp);function id(e){return!!e||e===""}const I=e=>St(e)?e:e==null?"":Te(e)||at(e)&&(e.toString===rd||!Ne(e.toString))?JSON.stringify(e,nd,2):String(e),nd=(e,t)=>t&&t.__v_isRef?nd(e,t.value):Gn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:sd(t)?{[`Set(${t.size})`]:[...t.values()]}:at(t)&&!Te(t)&&!ad(t)?String(t):t,rt={},zn=[],fi=()=>{},Yp=()=>!1,Xp=/^on[^a-z]/,Rr=e=>Xp.test(e),El=e=>e.startsWith("onUpdate:"),zt=Object.assign,Il=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Jp=Object.prototype.hasOwnProperty,Ge=(e,t)=>Jp.call(e,t),Te=Array.isArray,Gn=e=>Nr(e)==="[object Map]",sd=e=>Nr(e)==="[object Set]",Ne=e=>typeof e=="function",St=e=>typeof e=="string",Pl=e=>typeof e=="symbol",at=e=>e!==null&&typeof e=="object",od=e=>at(e)&&Ne(e.then)&&Ne(e.catch),rd=Object.prototype.toString,Nr=e=>rd.call(e),Qp=e=>Nr(e).slice(8,-1),ad=e=>Nr(e)==="[object Object]",kl=e=>St(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ro=wl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Or=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Zp=/-(\w)/g,Ai=Or(e=>e.replace(Zp,(t,i)=>i?i.toUpperCase():"")),eg=/\B([A-Z])/g,ns=Or(e=>e.replace(eg,"-$1").toLowerCase()),Lr=Or(e=>e.charAt(0).toUpperCase()+e.slice(1)),ea=Or(e=>e?`on${Lr(e)}`:""),Ds=(e,t)=>!Object.is(e,t),ta=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},Zo=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},tg=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let yc;const ig=()=>yc||(yc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ci;class ng{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ci,!t&&ci&&(this.index=(ci.scopes||(ci.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=ci;try{return ci=this,t()}finally{ci=i}}}on(){ci=this}off(){ci=this.parent}stop(t){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function sg(e,t=ci){t&&t.active&&t.effects.push(e)}function og(){return ci}const Al=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ld=e=>(e.w&tn)>0,cd=e=>(e.n&tn)>0,rg=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=tn},ag=e=>{const{deps:t}=e;if(t.length){let i=0;for(let n=0;n<t.length;n++){const s=t[n];ld(s)&&!cd(s)?s.delete(e):t[i++]=s,s.w&=~tn,s.n&=~tn}t.length=i}},Da=new WeakMap;let ms=0,tn=1;const Fa=30;let ui;const Pn=Symbol(""),$a=Symbol("");class Cl{constructor(t,i=null,n){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,sg(this,n)}run(){if(!this.active)return this.fn();let t=ui,i=Xi;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ui,ui=this,Xi=!0,tn=1<<++ms,ms<=Fa?rg(this):_c(this),this.fn()}finally{ms<=Fa&&ag(this),tn=1<<--ms,ui=this.parent,Xi=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ui===this?this.deferStop=!0:this.active&&(_c(this),this.onStop&&this.onStop(),this.active=!1)}}function _c(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Xi=!0;const ud=[];function ss(){ud.push(Xi),Xi=!1}function os(){const e=ud.pop();Xi=e===void 0?!0:e}function qt(e,t,i){if(Xi&&ui){let n=Da.get(e);n||Da.set(e,n=new Map);let s=n.get(i);s||n.set(i,s=Al()),hd(s)}}function hd(e,t){let i=!1;ms<=Fa?cd(e)||(e.n|=tn,i=!ld(e)):i=!e.has(ui),i&&(e.add(ui),ui.deps.push(e))}function Hi(e,t,i,n,s,o){const r=Da.get(e);if(!r)return;let a=[];if(t==="clear")a=[...r.values()];else if(i==="length"&&Te(e)){const l=Number(n);r.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(i!==void 0&&a.push(r.get(i)),t){case"add":Te(e)?kl(i)&&a.push(r.get("length")):(a.push(r.get(Pn)),Gn(e)&&a.push(r.get($a)));break;case"delete":Te(e)||(a.push(r.get(Pn)),Gn(e)&&a.push(r.get($a)));break;case"set":Gn(e)&&a.push(r.get(Pn));break}if(a.length===1)a[0]&&Ha(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Ha(Al(l))}}function Ha(e,t){const i=Te(e)?e:[...e];for(const n of i)n.computed&&vc(n);for(const n of i)n.computed||vc(n)}function vc(e,t){(e!==ui||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const lg=wl("__proto__,__v_isRef,__isVue"),dd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pl)),cg=Tl(),ug=Tl(!1,!0),hg=Tl(!0),Sc=dg();function dg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const n=Ke(this);for(let o=0,r=this.length;o<r;o++)qt(n,"get",o+"");const s=n[t](...i);return s===-1||s===!1?n[t](...i.map(Ke)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){ss();const n=Ke(this)[t].apply(this,i);return os(),n}}),e}function fg(e){const t=Ke(this);return qt(t,"has",e),t.hasOwnProperty(e)}function Tl(e=!1,t=!1){return function(n,s,o){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&o===(e?t?Tg:bd:t?md:gd).get(n))return n;const r=Te(n);if(!e){if(r&&Ge(Sc,s))return Reflect.get(Sc,s,o);if(s==="hasOwnProperty")return fg}const a=Reflect.get(n,s,o);return(Pl(s)?dd.has(s):lg(s))||(e||qt(n,"get",s),t)?a:Ot(a)?r&&kl(s)?a:a.value:at(a)?e?yd(a):mi(a):a}}const pg=fd(),gg=fd(!0);function fd(e=!1){return function(i,n,s,o){let r=i[n];if(Jn(r)&&Ot(r)&&!Ot(s))return!1;if(!e&&(!er(s)&&!Jn(s)&&(r=Ke(r),s=Ke(s)),!Te(i)&&Ot(r)&&!Ot(s)))return r.value=s,!0;const a=Te(i)&&kl(n)?Number(n)<i.length:Ge(i,n),l=Reflect.set(i,n,s,o);return i===Ke(o)&&(a?Ds(s,r)&&Hi(i,"set",n,s):Hi(i,"add",n,s)),l}}function mg(e,t){const i=Ge(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Hi(e,"delete",t,void 0),n}function bg(e,t){const i=Reflect.has(e,t);return(!Pl(t)||!dd.has(t))&&qt(e,"has",t),i}function yg(e){return qt(e,"iterate",Te(e)?"length":Pn),Reflect.ownKeys(e)}const pd={get:cg,set:pg,deleteProperty:mg,has:bg,ownKeys:yg},_g={get:hg,set(e,t){return!0},deleteProperty(e,t){return!0}},vg=zt({},pd,{get:ug,set:gg}),Ml=e=>e,Br=e=>Reflect.getPrototypeOf(e);function ro(e,t,i=!1,n=!1){e=e.__v_raw;const s=Ke(e),o=Ke(t);i||(t!==o&&qt(s,"get",t),qt(s,"get",o));const{has:r}=Br(s),a=n?Ml:i?Nl:Fs;if(r.call(s,t))return a(e.get(t));if(r.call(s,o))return a(e.get(o));e!==s&&e.get(t)}function ao(e,t=!1){const i=this.__v_raw,n=Ke(i),s=Ke(e);return t||(e!==s&&qt(n,"has",e),qt(n,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function lo(e,t=!1){return e=e.__v_raw,!t&&qt(Ke(e),"iterate",Pn),Reflect.get(e,"size",e)}function wc(e){e=Ke(e);const t=Ke(this);return Br(t).has.call(t,e)||(t.add(e),Hi(t,"add",e,e)),this}function Ec(e,t){t=Ke(t);const i=Ke(this),{has:n,get:s}=Br(i);let o=n.call(i,e);o||(e=Ke(e),o=n.call(i,e));const r=s.call(i,e);return i.set(e,t),o?Ds(t,r)&&Hi(i,"set",e,t):Hi(i,"add",e,t),this}function Ic(e){const t=Ke(this),{has:i,get:n}=Br(t);let s=i.call(t,e);s||(e=Ke(e),s=i.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return s&&Hi(t,"delete",e,void 0),o}function Pc(){const e=Ke(this),t=e.size!==0,i=e.clear();return t&&Hi(e,"clear",void 0,void 0),i}function co(e,t){return function(n,s){const o=this,r=o.__v_raw,a=Ke(r),l=t?Ml:e?Nl:Fs;return!e&&qt(a,"iterate",Pn),r.forEach((c,u)=>n.call(s,l(c),l(u),o))}}function uo(e,t,i){return function(...n){const s=this.__v_raw,o=Ke(s),r=Gn(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=s[e](...n),u=i?Ml:t?Nl:Fs;return!t&&qt(o,"iterate",l?$a:Pn),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:a?[u(h[0]),u(h[1])]:u(h),done:p}},[Symbol.iterator](){return this}}}}function Wi(e){return function(...t){return e==="delete"?!1:this}}function Sg(){const e={get(o){return ro(this,o)},get size(){return lo(this)},has:ao,add:wc,set:Ec,delete:Ic,clear:Pc,forEach:co(!1,!1)},t={get(o){return ro(this,o,!1,!0)},get size(){return lo(this)},has:ao,add:wc,set:Ec,delete:Ic,clear:Pc,forEach:co(!1,!0)},i={get(o){return ro(this,o,!0)},get size(){return lo(this,!0)},has(o){return ao.call(this,o,!0)},add:Wi("add"),set:Wi("set"),delete:Wi("delete"),clear:Wi("clear"),forEach:co(!0,!1)},n={get(o){return ro(this,o,!0,!0)},get size(){return lo(this,!0)},has(o){return ao.call(this,o,!0)},add:Wi("add"),set:Wi("set"),delete:Wi("delete"),clear:Wi("clear"),forEach:co(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=uo(o,!1,!1),i[o]=uo(o,!0,!1),t[o]=uo(o,!1,!0),n[o]=uo(o,!0,!0)}),[e,i,t,n]}const[wg,Eg,Ig,Pg]=Sg();function xl(e,t){const i=t?e?Pg:Ig:e?Eg:wg;return(n,s,o)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(Ge(i,s)&&s in n?i:n,s,o)}const kg={get:xl(!1,!1)},Ag={get:xl(!1,!0)},Cg={get:xl(!0,!1)},gd=new WeakMap,md=new WeakMap,bd=new WeakMap,Tg=new WeakMap;function Mg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xg(e){return e.__v_skip||!Object.isExtensible(e)?0:Mg(Qp(e))}function mi(e){return Jn(e)?e:Rl(e,!1,pd,kg,gd)}function Rg(e){return Rl(e,!1,vg,Ag,md)}function yd(e){return Rl(e,!0,_g,Cg,bd)}function Rl(e,t,i,n,s){if(!at(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=s.get(e);if(o)return o;const r=xg(e);if(r===0)return e;const a=new Proxy(e,r===2?n:i);return s.set(e,a),a}function Wn(e){return Jn(e)?Wn(e.__v_raw):!!(e&&e.__v_isReactive)}function Jn(e){return!!(e&&e.__v_isReadonly)}function er(e){return!!(e&&e.__v_isShallow)}function _d(e){return Wn(e)||Jn(e)}function Ke(e){const t=e&&e.__v_raw;return t?Ke(t):e}function vd(e){return Zo(e,"__v_skip",!0),e}const Fs=e=>at(e)?mi(e):e,Nl=e=>at(e)?yd(e):e;function Sd(e){Xi&&ui&&(e=Ke(e),hd(e.dep||(e.dep=Al())))}function wd(e,t){e=Ke(e);const i=e.dep;i&&Ha(i)}function Ot(e){return!!(e&&e.__v_isRef===!0)}function z(e){return Ng(e,!1)}function Ng(e,t){return Ot(e)?e:new Og(e,t)}class Og{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:Ke(t),this._value=i?t:Fs(t)}get value(){return Sd(this),this._value}set value(t){const i=this.__v_isShallow||er(t)||Jn(t);t=i?t:Ke(t),Ds(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:Fs(t),wd(this))}}function Lg(e){return Ot(e)?e.value:e}const Bg={get:(e,t,i)=>Lg(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return Ot(s)&&!Ot(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function Ed(e){return Wn(e)?e:new Proxy(e,Bg)}var Id;class Dg{constructor(t,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[Id]=!1,this._dirty=!0,this.effect=new Cl(t,()=>{this._dirty||(this._dirty=!0,wd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const t=Ke(this);return Sd(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Id="__v_isReadonly";function Fg(e,t,i=!1){let n,s;const o=Ne(e);return o?(n=e,s=fi):(n=e.get,s=e.set),new Dg(n,s,o||!s,i)}function Ji(e,t,i,n){let s;try{s=n?e(...n):e()}catch(o){Dr(o,t,i)}return s}function pi(e,t,i,n){if(Ne(e)){const o=Ji(e,t,i,n);return o&&od(o)&&o.catch(r=>{Dr(r,t,i)}),o}const s=[];for(let o=0;o<e.length;o++)s.push(pi(e[o],t,i,n));return s}function Dr(e,t,i,n=!0){const s=t?t.vnode:null;if(t){let o=t.parent;const r=t.proxy,a=i;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,r,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Ji(l,null,10,[e,r,a]);return}}$g(e,i,s,n)}function $g(e,t,i,n=!0){console.error(e)}let $s=!1,Ua=!1;const Rt=[];let Ei=0;const Vn=[];let Ni=null,vn=0;const Pd=Promise.resolve();let Ol=null;function Hg(e){const t=Ol||Pd;return e?t.then(this?e.bind(this):e):t}function Ug(e){let t=Ei+1,i=Rt.length;for(;t<i;){const n=t+i>>>1;Hs(Rt[n])<e?t=n+1:i=n}return t}function Ll(e){(!Rt.length||!Rt.includes(e,$s&&e.allowRecurse?Ei+1:Ei))&&(e.id==null?Rt.push(e):Rt.splice(Ug(e.id),0,e),kd())}function kd(){!$s&&!Ua&&(Ua=!0,Ol=Pd.then(Cd))}function zg(e){const t=Rt.indexOf(e);t>Ei&&Rt.splice(t,1)}function Gg(e){Te(e)?Vn.push(...e):(!Ni||!Ni.includes(e,e.allowRecurse?vn+1:vn))&&Vn.push(e),kd()}function kc(e,t=$s?Ei+1:0){for(;t<Rt.length;t++){const i=Rt[t];i&&i.pre&&(Rt.splice(t,1),t--,i())}}function Ad(e){if(Vn.length){const t=[...new Set(Vn)];if(Vn.length=0,Ni){Ni.push(...t);return}for(Ni=t,Ni.sort((i,n)=>Hs(i)-Hs(n)),vn=0;vn<Ni.length;vn++)Ni[vn]();Ni=null,vn=0}}const Hs=e=>e.id==null?1/0:e.id,Wg=(e,t)=>{const i=Hs(e)-Hs(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function Cd(e){Ua=!1,$s=!0,Rt.sort(Wg);const t=fi;try{for(Ei=0;Ei<Rt.length;Ei++){const i=Rt[Ei];i&&i.active!==!1&&Ji(i,null,14)}}finally{Ei=0,Rt.length=0,Ad(),$s=!1,Ol=null,(Rt.length||Vn.length)&&Cd()}}function Vg(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||rt;let s=i;const o=t.startsWith("update:"),r=o&&t.slice(7);if(r&&r in n){const u=`${r==="modelValue"?"model":r}Modifiers`,{number:h,trim:p}=n[u]||rt;p&&(s=i.map(g=>St(g)?g.trim():g)),h&&(s=i.map(tg))}let a,l=n[a=ea(t)]||n[a=ea(Ai(t))];!l&&o&&(l=n[a=ea(ns(t))]),l&&pi(l,e,6,s);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,pi(c,e,6,s)}}function Td(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const o=e.emits;let r={},a=!1;if(!Ne(e)){const l=c=>{const u=Td(c,t,!0);u&&(a=!0,zt(r,u))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(at(e)&&n.set(e,null),null):(Te(o)?o.forEach(l=>r[l]=null):zt(r,o),at(e)&&n.set(e,r),r)}function Fr(e,t){return!e||!Rr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ge(e,t[0].toLowerCase()+t.slice(1))||Ge(e,ns(t))||Ge(e,t))}let Ut=null,$r=null;function tr(e){const t=Ut;return Ut=e,$r=e&&e.type.__scopeId||null,t}function rs(e){$r=e}function as(){$r=null}function Si(e,t=Ut,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&Lc(-1);const o=tr(t);let r;try{r=e(...s)}finally{tr(o),n._d&&Lc(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function ia(e){const{type:t,vnode:i,proxy:n,withProxy:s,props:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:p,setupState:g,ctx:y,inheritAttrs:b}=e;let v,_;const E=tr(e);try{if(i.shapeFlag&4){const P=s||n;v=wi(u.call(P,P,h,o,g,p,y)),_=l}else{const P=t;v=wi(P.length>1?P(o,{attrs:l,slots:a,emit:c}):P(o,null)),_=t.props?l:jg(l)}}catch(P){Cs.length=0,Dr(P,e,1),v=X(nn)}let w=v;if(_&&b!==!1){const P=Object.keys(_),{shapeFlag:A}=w;P.length&&A&7&&(r&&P.some(El)&&(_=Kg(_,r)),w=Qn(w,_))}return i.dirs&&(w=Qn(w),w.dirs=w.dirs?w.dirs.concat(i.dirs):i.dirs),i.transition&&(w.transition=i.transition),v=w,tr(E),v}const jg=e=>{let t;for(const i in e)(i==="class"||i==="style"||Rr(i))&&((t||(t={}))[i]=e[i]);return t},Kg=(e,t)=>{const i={};for(const n in e)(!El(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function qg(e,t,i){const{props:n,children:s,component:o}=e,{props:r,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Ac(n,r,c):!!r;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const p=u[h];if(r[p]!==n[p]&&!Fr(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Ac(n,r,c):!0:!!r;return!1}function Ac(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const o=n[s];if(t[o]!==e[o]&&!Fr(i,o))return!0}return!1}function Yg({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Xg=e=>e.__isSuspense;function Jg(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):Gg(e)}function Qg(e,t){if(mt){let i=mt.provides;const n=mt.parent&&mt.parent.provides;n===i&&(i=mt.provides=Object.create(n)),i[e]=t}}function No(e,t,i=!1){const n=mt||Ut;if(n){const s=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Ne(t)?t.call(n.proxy):t}}const ho={};function Qi(e,t,i){return Md(e,t,i)}function Md(e,t,{immediate:i,deep:n,flush:s,onTrack:o,onTrigger:r}=rt){const a=og()===(mt==null?void 0:mt.scope)?mt:null;let l,c=!1,u=!1;if(Ot(e)?(l=()=>e.value,c=er(e)):Wn(e)?(l=()=>e,n=!0):Te(e)?(u=!0,c=e.some(w=>Wn(w)||er(w)),l=()=>e.map(w=>{if(Ot(w))return w.value;if(Wn(w))return $n(w);if(Ne(w))return Ji(w,a,2)})):Ne(e)?t?l=()=>Ji(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),pi(e,a,3,[p])}:l=fi,t&&n){const w=l;l=()=>$n(w())}let h,p=w=>{h=_.onStop=()=>{Ji(w,a,4)}},g;if(zs)if(p=fi,t?i&&pi(t,a,3,[l(),u?[]:void 0,p]):l(),s==="sync"){const w=zm();g=w.__watcherHandles||(w.__watcherHandles=[])}else return fi;let y=u?new Array(e.length).fill(ho):ho;const b=()=>{if(_.active)if(t){const w=_.run();(n||c||(u?w.some((P,A)=>Ds(P,y[A])):Ds(w,y)))&&(h&&h(),pi(t,a,3,[w,y===ho?void 0:u&&y[0]===ho?[]:y,p]),y=w)}else _.run()};b.allowRecurse=!!t;let v;s==="sync"?v=b:s==="post"?v=()=>Vt(b,a&&a.suspense):(b.pre=!0,a&&(b.id=a.uid),v=()=>Ll(b));const _=new Cl(l,v);t?i?b():y=_.run():s==="post"?Vt(_.run.bind(_),a&&a.suspense):_.run();const E=()=>{_.stop(),a&&a.scope&&Il(a.scope.effects,_)};return g&&g.push(E),E}function Zg(e,t,i){const n=this.proxy,s=St(e)?e.includes(".")?xd(n,e):()=>n[e]:e.bind(n,n);let o;Ne(t)?o=t:(o=t.handler,i=t);const r=mt;Zn(this);const a=Md(s,o.bind(n),i);return r?Zn(r):kn(),a}function xd(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function $n(e,t){if(!at(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ot(e))$n(e.value,t);else if(Te(e))for(let i=0;i<e.length;i++)$n(e[i],t);else if(sd(e)||Gn(e))e.forEach(i=>{$n(i,t)});else if(ad(e))for(const i in e)$n(e[i],t);return e}function Ve(e){return Ne(e)?{setup:e,name:e.name}:e}const ks=e=>!!e.type.__asyncLoader,Rd=e=>e.type.__isKeepAlive;function em(e,t){Nd(e,"a",t)}function tm(e,t){Nd(e,"da",t)}function Nd(e,t,i=mt){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Hr(t,n,i),i){let s=i.parent;for(;s&&s.parent;)Rd(s.parent.vnode)&&im(n,t,i,s),s=s.parent}}function im(e,t,i,n){const s=Hr(t,e,n,!0);to(()=>{Il(n[t],s)},i)}function Hr(e,t,i=mt,n=!1){if(i){const s=i[e]||(i[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(i.isUnmounted)return;ss(),Zn(i);const a=pi(t,i,e,r);return kn(),os(),a});return n?s.unshift(o):s.push(o),o}}const Ui=e=>(t,i=mt)=>(!zs||e==="sp")&&Hr(e,(...n)=>t(...n),i),nm=Ui("bm"),et=Ui("m"),Od=Ui("bu"),ls=Ui("u"),Dt=Ui("bum"),to=Ui("um"),sm=Ui("sp"),om=Ui("rtg"),rm=Ui("rtc");function am(e,t=mt){Hr("ec",e,t)}function cn(e,t,i,n){const s=e.dirs,o=t&&t.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(ss(),pi(l,i,8,[e.el,a,e,t]),os())}}const Ld="components";function ge(e,t){return cm(Ld,e,!0,t)||e}const lm=Symbol();function cm(e,t,i=!0,n=!1){const s=Ut||mt;if(s){const o=s.type;if(e===Ld){const a=Fm(o,!1);if(a&&(a===t||a===Ai(t)||a===Lr(Ai(t))))return o}const r=Cc(s[e]||o[e],t)||Cc(s.appContext[e],t);return!r&&n?o:r}}function Cc(e,t){return e&&(e[t]||e[Ai(t)]||e[Lr(Ai(t))])}function He(e,t,i,n){let s;const o=i&&i[n];if(Te(e)||St(e)){s=new Array(e.length);for(let r=0,a=e.length;r<a;r++)s[r]=t(e[r],r,void 0,o&&o[r])}else if(typeof e=="number"){s=new Array(e);for(let r=0;r<e;r++)s[r]=t(r+1,r,void 0,o&&o[r])}else if(at(e))if(e[Symbol.iterator])s=Array.from(e,(r,a)=>t(r,a,void 0,o&&o[a]));else{const r=Object.keys(e);s=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];s[a]=t(e[c],c,a,o&&o[a])}}else s=[];return i&&(i[n]=s),s}function za(e,t,i={},n,s){if(Ut.isCE||Ut.parent&&ks(Ut.parent)&&Ut.parent.isCE)return t!=="default"&&(i.name=t),X("slot",i,n&&n());let o=e[t];o&&o._c&&(o._d=!1),x();const r=o&&Bd(o(i)),a=$e(Ie,{key:i.key||r&&r.key||`_${t}`},r||(n?n():[]),r&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function Bd(e){return e.some(t=>nr(t)?!(t.type===nn||t.type===Ie&&!Bd(t.children)):!0)?e:null}const Ga=e=>e?Kd(e)?$l(e)||e.proxy:Ga(e.parent):null,As=zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ga(e.parent),$root:e=>Ga(e.root),$emit:e=>e.emit,$options:e=>Bl(e),$forceUpdate:e=>e.f||(e.f=()=>Ll(e.update)),$nextTick:e=>e.n||(e.n=Hg.bind(e.proxy)),$watch:e=>Zg.bind(e)}),na=(e,t)=>e!==rt&&!e.__isScriptSetup&&Ge(e,t),um={get({_:e},t){const{ctx:i,setupState:n,data:s,props:o,accessCache:r,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const g=r[t];if(g!==void 0)switch(g){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return o[t]}else{if(na(n,t))return r[t]=1,n[t];if(s!==rt&&Ge(s,t))return r[t]=2,s[t];if((c=e.propsOptions[0])&&Ge(c,t))return r[t]=3,o[t];if(i!==rt&&Ge(i,t))return r[t]=4,i[t];Wa&&(r[t]=0)}}const u=As[t];let h,p;if(u)return t==="$attrs"&&qt(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(i!==rt&&Ge(i,t))return r[t]=4,i[t];if(p=l.config.globalProperties,Ge(p,t))return p[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:o}=e;return na(s,t)?(s[t]=i,!0):n!==rt&&Ge(n,t)?(n[t]=i,!0):Ge(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:o}},r){let a;return!!i[r]||e!==rt&&Ge(e,r)||na(t,r)||(a=o[0])&&Ge(a,r)||Ge(n,r)||Ge(As,r)||Ge(s.config.globalProperties,r)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Ge(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};let Wa=!0;function hm(e){const t=Bl(e),i=e.proxy,n=e.ctx;Wa=!1,t.beforeCreate&&Tc(t.beforeCreate,e,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:p,beforeUpdate:g,updated:y,activated:b,deactivated:v,beforeDestroy:_,beforeUnmount:E,destroyed:w,unmounted:P,render:A,renderTracked:O,renderTriggered:U,errorCaptured:W,serverPrefetch:Z,expose:q,inheritAttrs:Q,components:ye,directives:de,filters:Me}=t;if(c&&dm(c,n,null,e.appContext.config.unwrapInjectedRef),r)for(const ne in r){const re=r[ne];Ne(re)&&(n[ne]=re.bind(i))}if(s){const ne=s.call(i,i);at(ne)&&(e.data=mi(ne))}if(Wa=!0,o)for(const ne in o){const re=o[ne],oe=Ne(re)?re.bind(i,i):Ne(re.get)?re.get.bind(i,i):fi,Be=!Ne(re)&&Ne(re.set)?re.set.bind(i):fi,Ae=ke({get:oe,set:Be});Object.defineProperty(n,ne,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:be=>Ae.value=be})}if(a)for(const ne in a)Dd(a[ne],n,i,ne);if(l){const ne=Ne(l)?l.call(i):l;Reflect.ownKeys(ne).forEach(re=>{Qg(re,ne[re])})}u&&Tc(u,e,"c");function Pe(ne,re){Te(re)?re.forEach(oe=>ne(oe.bind(i))):re&&ne(re.bind(i))}if(Pe(nm,h),Pe(et,p),Pe(Od,g),Pe(ls,y),Pe(em,b),Pe(tm,v),Pe(am,W),Pe(rm,O),Pe(om,U),Pe(Dt,E),Pe(to,P),Pe(sm,Z),Te(q))if(q.length){const ne=e.exposed||(e.exposed={});q.forEach(re=>{Object.defineProperty(ne,re,{get:()=>i[re],set:oe=>i[re]=oe})})}else e.exposed||(e.exposed={});A&&e.render===fi&&(e.render=A),Q!=null&&(e.inheritAttrs=Q),ye&&(e.components=ye),de&&(e.directives=de)}function dm(e,t,i=fi,n=!1){Te(e)&&(e=Va(e));for(const s in e){const o=e[s];let r;at(o)?"default"in o?r=No(o.from||s,o.default,!0):r=No(o.from||s):r=No(o),Ot(r)&&n?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[s]=r}}function Tc(e,t,i){pi(Te(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function Dd(e,t,i,n){const s=n.includes(".")?xd(i,n):()=>i[n];if(St(e)){const o=t[e];Ne(o)&&Qi(s,o)}else if(Ne(e))Qi(s,e.bind(i));else if(at(e))if(Te(e))e.forEach(o=>Dd(o,t,i,n));else{const o=Ne(e.handler)?e.handler.bind(i):t[e.handler];Ne(o)&&Qi(s,o,e)}}function Bl(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(c=>ir(l,c,r,!0)),ir(l,t,r)),at(t)&&o.set(t,l),l}function ir(e,t,i,n=!1){const{mixins:s,extends:o}=t;o&&ir(e,o,i,!0),s&&s.forEach(r=>ir(e,r,i,!0));for(const r in t)if(!(n&&r==="expose")){const a=fm[r]||i&&i[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const fm={data:Mc,props:bn,emits:bn,methods:bn,computed:bn,beforeCreate:Ft,created:Ft,beforeMount:Ft,mounted:Ft,beforeUpdate:Ft,updated:Ft,beforeDestroy:Ft,beforeUnmount:Ft,destroyed:Ft,unmounted:Ft,activated:Ft,deactivated:Ft,errorCaptured:Ft,serverPrefetch:Ft,components:bn,directives:bn,watch:gm,provide:Mc,inject:pm};function Mc(e,t){return t?e?function(){return zt(Ne(e)?e.call(this,this):e,Ne(t)?t.call(this,this):t)}:t:e}function pm(e,t){return bn(Va(e),Va(t))}function Va(e){if(Te(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Ft(e,t){return e?[...new Set([].concat(e,t))]:t}function bn(e,t){return e?zt(zt(Object.create(null),e),t):t}function gm(e,t){if(!e)return t;if(!t)return e;const i=zt(Object.create(null),e);for(const n in t)i[n]=Ft(e[n],t[n]);return i}function mm(e,t,i,n=!1){const s={},o={};Zo(o,zr,1),e.propsDefaults=Object.create(null),Fd(e,t,s,o);for(const r in e.propsOptions[0])r in s||(s[r]=void 0);i?e.props=n?s:Rg(s):e.type.props?e.props=s:e.props=o,e.attrs=o}function bm(e,t,i,n){const{props:s,attrs:o,vnode:{patchFlag:r}}=e,a=Ke(s),[l]=e.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let p=u[h];if(Fr(e.emitsOptions,p))continue;const g=t[p];if(l)if(Ge(o,p))g!==o[p]&&(o[p]=g,c=!0);else{const y=Ai(p);s[y]=ja(l,a,y,g,e,!1)}else g!==o[p]&&(o[p]=g,c=!0)}}}else{Fd(e,t,s,o)&&(c=!0);let u;for(const h in a)(!t||!Ge(t,h)&&((u=ns(h))===h||!Ge(t,u)))&&(l?i&&(i[h]!==void 0||i[u]!==void 0)&&(s[h]=ja(l,a,h,void 0,e,!0)):delete s[h]);if(o!==a)for(const h in o)(!t||!Ge(t,h))&&(delete o[h],c=!0)}c&&Hi(e,"set","$attrs")}function Fd(e,t,i,n){const[s,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(Ro(l))continue;const c=t[l];let u;s&&Ge(s,u=Ai(l))?!o||!o.includes(u)?i[u]=c:(a||(a={}))[u]=c:Fr(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=Ke(i),c=a||rt;for(let u=0;u<o.length;u++){const h=o[u];i[h]=ja(s,l,h,c[h],e,!Ge(c,h))}}return r}function ja(e,t,i,n,s,o){const r=e[i];if(r!=null){const a=Ge(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&Ne(l)){const{propsDefaults:c}=s;i in c?n=c[i]:(Zn(s),n=c[i]=l.call(null,t),kn())}else n=l}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===ns(i))&&(n=!0))}return n}function $d(e,t,i=!1){const n=t.propsCache,s=n.get(e);if(s)return s;const o=e.props,r={},a=[];let l=!1;if(!Ne(e)){const u=h=>{l=!0;const[p,g]=$d(h,t,!0);zt(r,p),g&&a.push(...g)};!i&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return at(e)&&n.set(e,zn),zn;if(Te(o))for(let u=0;u<o.length;u++){const h=Ai(o[u]);xc(h)&&(r[h]=rt)}else if(o)for(const u in o){const h=Ai(u);if(xc(h)){const p=o[u],g=r[h]=Te(p)||Ne(p)?{type:p}:Object.assign({},p);if(g){const y=Oc(Boolean,g.type),b=Oc(String,g.type);g[0]=y>-1,g[1]=b<0||y<b,(y>-1||Ge(g,"default"))&&a.push(h)}}}const c=[r,a];return at(e)&&n.set(e,c),c}function xc(e){return e[0]!=="$"}function Rc(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Nc(e,t){return Rc(e)===Rc(t)}function Oc(e,t){return Te(t)?t.findIndex(i=>Nc(i,e)):Ne(t)&&Nc(t,e)?0:-1}const Hd=e=>e[0]==="_"||e==="$stable",Dl=e=>Te(e)?e.map(wi):[wi(e)],ym=(e,t,i)=>{if(t._n)return t;const n=Si((...s)=>Dl(t(...s)),i);return n._c=!1,n},Ud=(e,t,i)=>{const n=e._ctx;for(const s in e){if(Hd(s))continue;const o=e[s];if(Ne(o))t[s]=ym(s,o,n);else if(o!=null){const r=Dl(o);t[s]=()=>r}}},zd=(e,t)=>{const i=Dl(t);e.slots.default=()=>i},_m=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=Ke(t),Zo(t,"_",i)):Ud(t,e.slots={})}else e.slots={},t&&zd(e,t);Zo(e.slots,zr,1)},vm=(e,t,i)=>{const{vnode:n,slots:s}=e;let o=!0,r=rt;if(n.shapeFlag&32){const a=t._;a?i&&a===1?o=!1:(zt(s,t),!i&&a===1&&delete s._):(o=!t.$stable,Ud(t,s)),r=t}else t&&(zd(e,t),r={default:1});if(o)for(const a in s)!Hd(a)&&!(a in r)&&delete s[a]};function Gd(){return{app:null,config:{isNativeTag:Yp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sm=0;function wm(e,t){return function(n,s=null){Ne(n)||(n=Object.assign({},n)),s!=null&&!at(s)&&(s=null);const o=Gd(),r=new Set;let a=!1;const l=o.app={_uid:Sm++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:Gm,get config(){return o.config},set config(c){},use(c,...u){return r.has(c)||(c&&Ne(c.install)?(r.add(c),c.install(l,...u)):Ne(c)&&(r.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,h){if(!a){const p=X(n,s);return p.appContext=o,u&&t?t(p,c):e(p,c,h),a=!0,l._container=c,c.__vue_app__=l,$l(p.component)||p.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l}};return l}}function Ka(e,t,i,n,s=!1){if(Te(e)){e.forEach((p,g)=>Ka(p,t&&(Te(t)?t[g]:t),i,n,s));return}if(ks(n)&&!s)return;const o=n.shapeFlag&4?$l(n.component)||n.component.proxy:n.el,r=s?null:o,{i:a,r:l}=e,c=t&&t.r,u=a.refs===rt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(St(c)?(u[c]=null,Ge(h,c)&&(h[c]=null)):Ot(c)&&(c.value=null)),Ne(l))Ji(l,a,12,[r,u]);else{const p=St(l),g=Ot(l);if(p||g){const y=()=>{if(e.f){const b=p?Ge(h,l)?h[l]:u[l]:l.value;s?Te(b)&&Il(b,o):Te(b)?b.includes(o)||b.push(o):p?(u[l]=[o],Ge(h,l)&&(h[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else p?(u[l]=r,Ge(h,l)&&(h[l]=r)):g&&(l.value=r,e.k&&(u[e.k]=r))};r?(y.id=-1,Vt(y,i)):y()}}}const Vt=Jg;function Em(e){return Im(e)}function Im(e,t){const i=ig();i.__VUE__=!0;const{insert:n,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:p,setScopeId:g=fi,insertStaticContent:y}=e,b=(C,R,F,j=null,K=null,ee=null,ae=!1,te=null,ie=!!R.dynamicChildren)=>{if(C===R)return;C&&!cs(C,R)&&(j=Ct(C),be(C,K,ee,!0),C=null),R.patchFlag===-2&&(ie=!1,R.dynamicChildren=null);const{type:Y,ref:he,shapeFlag:fe}=R;switch(Y){case Ur:v(C,R,F,j);break;case nn:_(C,R,F,j);break;case sa:C==null&&E(R,F,j,ae);break;case Ie:ye(C,R,F,j,K,ee,ae,te,ie);break;default:fe&1?A(C,R,F,j,K,ee,ae,te,ie):fe&6?de(C,R,F,j,K,ee,ae,te,ie):(fe&64||fe&128)&&Y.process(C,R,F,j,K,ee,ae,te,ie,It)}he!=null&&K&&Ka(he,C&&C.ref,ee,R||C,!R)},v=(C,R,F,j)=>{if(C==null)n(R.el=a(R.children),F,j);else{const K=R.el=C.el;R.children!==C.children&&c(K,R.children)}},_=(C,R,F,j)=>{C==null?n(R.el=l(R.children||""),F,j):R.el=C.el},E=(C,R,F,j)=>{[C.el,C.anchor]=y(C.children,R,F,j,C.el,C.anchor)},w=({el:C,anchor:R},F,j)=>{let K;for(;C&&C!==R;)K=p(C),n(C,F,j),C=K;n(R,F,j)},P=({el:C,anchor:R})=>{let F;for(;C&&C!==R;)F=p(C),s(C),C=F;s(R)},A=(C,R,F,j,K,ee,ae,te,ie)=>{ae=ae||R.type==="svg",C==null?O(R,F,j,K,ee,ae,te,ie):Z(C,R,K,ee,ae,te,ie)},O=(C,R,F,j,K,ee,ae,te)=>{let ie,Y;const{type:he,props:fe,shapeFlag:me,transition:_e,dirs:Re}=C;if(ie=C.el=r(C.type,ee,fe&&fe.is,fe),me&8?u(ie,C.children):me&16&&W(C.children,ie,null,j,K,ee&&he!=="foreignObject",ae,te),Re&&cn(C,null,j,"created"),U(ie,C,C.scopeId,ae,j),fe){for(const f in fe)f!=="value"&&!Ro(f)&&o(ie,f,null,fe[f],ee,C.children,j,K,Xe);"value"in fe&&o(ie,"value",null,fe.value),(Y=fe.onVnodeBeforeMount)&&yi(Y,j,C)}Re&&cn(C,null,j,"beforeMount");const S=(!K||K&&!K.pendingBranch)&&_e&&!_e.persisted;S&&_e.beforeEnter(ie),n(ie,R,F),((Y=fe&&fe.onVnodeMounted)||S||Re)&&Vt(()=>{Y&&yi(Y,j,C),S&&_e.enter(ie),Re&&cn(C,null,j,"mounted")},K)},U=(C,R,F,j,K)=>{if(F&&g(C,F),j)for(let ee=0;ee<j.length;ee++)g(C,j[ee]);if(K){let ee=K.subTree;if(R===ee){const ae=K.vnode;U(C,ae,ae.scopeId,ae.slotScopeIds,K.parent)}}},W=(C,R,F,j,K,ee,ae,te,ie=0)=>{for(let Y=ie;Y<C.length;Y++){const he=C[Y]=te?Vi(C[Y]):wi(C[Y]);b(null,he,R,F,j,K,ee,ae,te)}},Z=(C,R,F,j,K,ee,ae)=>{const te=R.el=C.el;let{patchFlag:ie,dynamicChildren:Y,dirs:he}=R;ie|=C.patchFlag&16;const fe=C.props||rt,me=R.props||rt;let _e;F&&un(F,!1),(_e=me.onVnodeBeforeUpdate)&&yi(_e,F,R,C),he&&cn(R,C,F,"beforeUpdate"),F&&un(F,!0);const Re=K&&R.type!=="foreignObject";if(Y?q(C.dynamicChildren,Y,te,F,j,Re,ee):ae||re(C,R,te,null,F,j,Re,ee,!1),ie>0){if(ie&16)Q(te,R,fe,me,F,j,K);else if(ie&2&&fe.class!==me.class&&o(te,"class",null,me.class,K),ie&4&&o(te,"style",fe.style,me.style,K),ie&8){const S=R.dynamicProps;for(let f=0;f<S.length;f++){const m=S[f],k=fe[m],M=me[m];(M!==k||m==="value")&&o(te,m,k,M,K,C.children,F,j,Xe)}}ie&1&&C.children!==R.children&&u(te,R.children)}else!ae&&Y==null&&Q(te,R,fe,me,F,j,K);((_e=me.onVnodeUpdated)||he)&&Vt(()=>{_e&&yi(_e,F,R,C),he&&cn(R,C,F,"updated")},j)},q=(C,R,F,j,K,ee,ae)=>{for(let te=0;te<R.length;te++){const ie=C[te],Y=R[te],he=ie.el&&(ie.type===Ie||!cs(ie,Y)||ie.shapeFlag&70)?h(ie.el):F;b(ie,Y,he,null,j,K,ee,ae,!0)}},Q=(C,R,F,j,K,ee,ae)=>{if(F!==j){if(F!==rt)for(const te in F)!Ro(te)&&!(te in j)&&o(C,te,F[te],null,ae,R.children,K,ee,Xe);for(const te in j){if(Ro(te))continue;const ie=j[te],Y=F[te];ie!==Y&&te!=="value"&&o(C,te,Y,ie,ae,R.children,K,ee,Xe)}"value"in j&&o(C,"value",F.value,j.value)}},ye=(C,R,F,j,K,ee,ae,te,ie)=>{const Y=R.el=C?C.el:a(""),he=R.anchor=C?C.anchor:a("");let{patchFlag:fe,dynamicChildren:me,slotScopeIds:_e}=R;_e&&(te=te?te.concat(_e):_e),C==null?(n(Y,F,j),n(he,F,j),W(R.children,F,he,K,ee,ae,te,ie)):fe>0&&fe&64&&me&&C.dynamicChildren?(q(C.dynamicChildren,me,F,K,ee,ae,te),(R.key!=null||K&&R===K.subTree)&&Wd(C,R,!0)):re(C,R,F,he,K,ee,ae,te,ie)},de=(C,R,F,j,K,ee,ae,te,ie)=>{R.slotScopeIds=te,C==null?R.shapeFlag&512?K.ctx.activate(R,F,j,ae,ie):Me(R,F,j,K,ee,ae,ie):Ee(C,R,ie)},Me=(C,R,F,j,K,ee,ae)=>{const te=C.component=Nm(C,j,K);if(Rd(C)&&(te.ctx.renderer=It),Om(te),te.asyncDep){if(K&&K.registerDep(te,Pe),!C.el){const ie=te.subTree=X(nn);_(null,ie,R,F)}return}Pe(te,C,R,F,K,ee,ae)},Ee=(C,R,F)=>{const j=R.component=C.component;if(qg(C,R,F))if(j.asyncDep&&!j.asyncResolved){ne(j,R,F);return}else j.next=R,zg(j.update),j.update();else R.el=C.el,j.vnode=R},Pe=(C,R,F,j,K,ee,ae)=>{const te=()=>{if(C.isMounted){let{next:he,bu:fe,u:me,parent:_e,vnode:Re}=C,S=he,f;un(C,!1),he?(he.el=Re.el,ne(C,he,ae)):he=Re,fe&&ta(fe),(f=he.props&&he.props.onVnodeBeforeUpdate)&&yi(f,_e,he,Re),un(C,!0);const m=ia(C),k=C.subTree;C.subTree=m,b(k,m,h(k.el),Ct(k),C,K,ee),he.el=m.el,S===null&&Yg(C,m.el),me&&Vt(me,K),(f=he.props&&he.props.onVnodeUpdated)&&Vt(()=>yi(f,_e,he,Re),K)}else{let he;const{el:fe,props:me}=R,{bm:_e,m:Re,parent:S}=C,f=ks(R);if(un(C,!1),_e&&ta(_e),!f&&(he=me&&me.onVnodeBeforeMount)&&yi(he,S,R),un(C,!0),fe&&bi){const m=()=>{C.subTree=ia(C),bi(fe,C.subTree,C,K,null)};f?R.type.__asyncLoader().then(()=>!C.isUnmounted&&m()):m()}else{const m=C.subTree=ia(C);b(null,m,F,j,C,K,ee),R.el=m.el}if(Re&&Vt(Re,K),!f&&(he=me&&me.onVnodeMounted)){const m=R;Vt(()=>yi(he,S,m),K)}(R.shapeFlag&256||S&&ks(S.vnode)&&S.vnode.shapeFlag&256)&&C.a&&Vt(C.a,K),C.isMounted=!0,R=F=j=null}},ie=C.effect=new Cl(te,()=>Ll(Y),C.scope),Y=C.update=()=>ie.run();Y.id=C.uid,un(C,!0),Y()},ne=(C,R,F)=>{R.component=C;const j=C.vnode.props;C.vnode=R,C.next=null,bm(C,R.props,j,F),vm(C,R.children,F),ss(),kc(),os()},re=(C,R,F,j,K,ee,ae,te,ie=!1)=>{const Y=C&&C.children,he=C?C.shapeFlag:0,fe=R.children,{patchFlag:me,shapeFlag:_e}=R;if(me>0){if(me&128){Be(Y,fe,F,j,K,ee,ae,te,ie);return}else if(me&256){oe(Y,fe,F,j,K,ee,ae,te,ie);return}}_e&8?(he&16&&Xe(Y,K,ee),fe!==Y&&u(F,fe)):he&16?_e&16?Be(Y,fe,F,j,K,ee,ae,te,ie):Xe(Y,K,ee,!0):(he&8&&u(F,""),_e&16&&W(fe,F,j,K,ee,ae,te,ie))},oe=(C,R,F,j,K,ee,ae,te,ie)=>{C=C||zn,R=R||zn;const Y=C.length,he=R.length,fe=Math.min(Y,he);let me;for(me=0;me<fe;me++){const _e=R[me]=ie?Vi(R[me]):wi(R[me]);b(C[me],_e,F,null,K,ee,ae,te,ie)}Y>he?Xe(C,K,ee,!0,!1,fe):W(R,F,j,K,ee,ae,te,ie,fe)},Be=(C,R,F,j,K,ee,ae,te,ie)=>{let Y=0;const he=R.length;let fe=C.length-1,me=he-1;for(;Y<=fe&&Y<=me;){const _e=C[Y],Re=R[Y]=ie?Vi(R[Y]):wi(R[Y]);if(cs(_e,Re))b(_e,Re,F,null,K,ee,ae,te,ie);else break;Y++}for(;Y<=fe&&Y<=me;){const _e=C[fe],Re=R[me]=ie?Vi(R[me]):wi(R[me]);if(cs(_e,Re))b(_e,Re,F,null,K,ee,ae,te,ie);else break;fe--,me--}if(Y>fe){if(Y<=me){const _e=me+1,Re=_e<he?R[_e].el:j;for(;Y<=me;)b(null,R[Y]=ie?Vi(R[Y]):wi(R[Y]),F,Re,K,ee,ae,te,ie),Y++}}else if(Y>me)for(;Y<=fe;)be(C[Y],K,ee,!0),Y++;else{const _e=Y,Re=Y,S=new Map;for(Y=Re;Y<=me;Y++){const Oe=R[Y]=ie?Vi(R[Y]):wi(R[Y]);Oe.key!=null&&S.set(Oe.key,Y)}let f,m=0;const k=me-Re+1;let M=!1,L=0;const H=new Array(k);for(Y=0;Y<k;Y++)H[Y]=0;for(Y=_e;Y<=fe;Y++){const Oe=C[Y];if(m>=k){be(Oe,K,ee,!0);continue}let De;if(Oe.key!=null)De=S.get(Oe.key);else for(f=Re;f<=me;f++)if(H[f-Re]===0&&cs(Oe,R[f])){De=f;break}De===void 0?be(Oe,K,ee,!0):(H[De-Re]=Y+1,De>=L?L=De:M=!0,b(Oe,R[De],F,null,K,ee,ae,te,ie),m++)}const xe=M?Pm(H):zn;for(f=xe.length-1,Y=k-1;Y>=0;Y--){const Oe=Re+Y,De=R[Oe],it=Oe+1<he?R[Oe+1].el:j;H[Y]===0?b(null,De,F,it,K,ee,ae,te,ie):M&&(f<0||Y!==xe[f]?Ae(De,F,it,2):f--)}}},Ae=(C,R,F,j,K=null)=>{const{el:ee,type:ae,transition:te,children:ie,shapeFlag:Y}=C;if(Y&6){Ae(C.component.subTree,R,F,j);return}if(Y&128){C.suspense.move(R,F,j);return}if(Y&64){ae.move(C,R,F,It);return}if(ae===Ie){n(ee,R,F);for(let fe=0;fe<ie.length;fe++)Ae(ie[fe],R,F,j);n(C.anchor,R,F);return}if(ae===sa){w(C,R,F);return}if(j!==2&&Y&1&&te)if(j===0)te.beforeEnter(ee),n(ee,R,F),Vt(()=>te.enter(ee),K);else{const{leave:fe,delayLeave:me,afterLeave:_e}=te,Re=()=>n(ee,R,F),S=()=>{fe(ee,()=>{Re(),_e&&_e()})};me?me(ee,Re,S):S()}else n(ee,R,F)},be=(C,R,F,j=!1,K=!1)=>{const{type:ee,props:ae,ref:te,children:ie,dynamicChildren:Y,shapeFlag:he,patchFlag:fe,dirs:me}=C;if(te!=null&&Ka(te,null,F,C,!0),he&256){R.ctx.deactivate(C);return}const _e=he&1&&me,Re=!ks(C);let S;if(Re&&(S=ae&&ae.onVnodeBeforeUnmount)&&yi(S,R,C),he&6)Et(C.component,F,j);else{if(he&128){C.suspense.unmount(F,j);return}_e&&cn(C,null,R,"beforeUnmount"),he&64?C.type.remove(C,R,F,K,It,j):Y&&(ee!==Ie||fe>0&&fe&64)?Xe(Y,R,F,!1,!0):(ee===Ie&&fe&384||!K&&he&16)&&Xe(ie,R,F),j&&ct(C)}(Re&&(S=ae&&ae.onVnodeUnmounted)||_e)&&Vt(()=>{S&&yi(S,R,C),_e&&cn(C,null,R,"unmounted")},F)},ct=C=>{const{type:R,el:F,anchor:j,transition:K}=C;if(R===Ie){ut(F,j);return}if(R===sa){P(C);return}const ee=()=>{s(F),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(C.shapeFlag&1&&K&&!K.persisted){const{leave:ae,delayLeave:te}=K,ie=()=>ae(F,ee);te?te(C.el,ee,ie):ie()}else ee()},ut=(C,R)=>{let F;for(;C!==R;)F=p(C),s(C),C=F;s(R)},Et=(C,R,F)=>{const{bum:j,scope:K,update:ee,subTree:ae,um:te}=C;j&&ta(j),K.stop(),ee&&(ee.active=!1,be(ae,C,R,F)),te&&Vt(te,R),Vt(()=>{C.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Xe=(C,R,F,j=!1,K=!1,ee=0)=>{for(let ae=ee;ae<C.length;ae++)be(C[ae],R,F,j,K)},Ct=C=>C.shapeFlag&6?Ct(C.component.subTree):C.shapeFlag&128?C.suspense.next():p(C.anchor||C.el),qe=(C,R,F)=>{C==null?R._vnode&&be(R._vnode,null,null,!0):b(R._vnode||null,C,R,null,null,null,F),kc(),Ad(),R._vnode=C},It={p:b,um:be,m:Ae,r:ct,mt:Me,mc:W,pc:re,pbc:q,n:Ct,o:e};let ii,bi;return t&&([ii,bi]=t(It)),{render:qe,hydrate:ii,createApp:wm(qe,ii)}}function un({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function Wd(e,t,i=!1){const n=e.children,s=t.children;if(Te(n)&&Te(s))for(let o=0;o<n.length;o++){const r=n[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=Vi(s[o]),a.el=r.el),i||Wd(r,a)),a.type===Ur&&(a.el=r.el)}}function Pm(e){const t=e.slice(),i=[0];let n,s,o,r,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(s=i[i.length-1],e[s]<c){t[n]=s,i.push(n);continue}for(o=0,r=i.length-1;o<r;)a=o+r>>1,e[i[a]]<c?o=a+1:r=a;c<e[i[o]]&&(o>0&&(t[n]=i[o-1]),i[o]=n)}}for(o=i.length,r=i[o-1];o-- >0;)i[o]=r,r=t[r];return i}const km=e=>e.__isTeleport,Ie=Symbol(void 0),Ur=Symbol(void 0),nn=Symbol(void 0),sa=Symbol(void 0),Cs=[];let hi=null;function x(e=!1){Cs.push(hi=e?null:[])}function Am(){Cs.pop(),hi=Cs[Cs.length-1]||null}let Us=1;function Lc(e){Us+=e}function Vd(e){return e.dynamicChildren=Us>0?hi||zn:null,Am(),Us>0&&hi&&hi.push(e),e}function N(e,t,i,n,s,o){return Vd(d(e,t,i,n,s,o,!0))}function $e(e,t,i,n,s){return Vd(X(e,t,i,n,s,!0))}function nr(e){return e?e.__v_isVNode===!0:!1}function cs(e,t){return e.type===t.type&&e.key===t.key}const zr="__vInternal",jd=({key:e})=>e??null,Oo=({ref:e,ref_key:t,ref_for:i})=>e!=null?St(e)||Ot(e)||Ne(e)?{i:Ut,r:e,k:t,f:!!i}:e:null;function d(e,t=null,i=null,n=0,s=null,o=e===Ie?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&jd(t),ref:t&&Oo(t),scopeId:$r,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ut};return a?(Fl(l,i),o&128&&e.normalize(l)):i&&(l.shapeFlag|=St(i)?8:16),Us>0&&!r&&hi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&hi.push(l),l}const X=Cm;function Cm(e,t=null,i=null,n=0,s=null,o=!1){if((!e||e===lm)&&(e=nn),nr(e)){const a=Qn(e,t,!0);return i&&Fl(a,i),Us>0&&!o&&hi&&(a.shapeFlag&6?hi[hi.indexOf(e)]=a:hi.push(a)),a.patchFlag|=-2,a}if($m(e)&&(e=e.__vccOpts),t){t=Tm(t);let{class:a,style:l}=t;a&&!St(a)&&(t.class=yt(a)),at(l)&&(_d(l)&&!Te(l)&&(l=zt({},l)),t.style=Se(l))}const r=St(e)?1:Xg(e)?128:km(e)?64:at(e)?4:Ne(e)?2:0;return d(e,t,i,n,s,r,o,!0)}function Tm(e){return e?_d(e)||zr in e?zt({},e):e:null}function Qn(e,t,i=!1){const{props:n,ref:s,patchFlag:o,children:r}=e,a=t?Mm(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&jd(a),ref:t&&t.ref?i&&s?Te(s)?s.concat(Oo(t)):[s,Oo(t)]:Oo(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ie?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qn(e.ssContent),ssFallback:e.ssFallback&&Qn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function io(e=" ",t=0){return X(Ur,null,e,t)}function se(e="",t=!1){return t?(x(),$e(nn,null,e)):X(nn,null,e)}function wi(e){return e==null||typeof e=="boolean"?X(nn):Te(e)?X(Ie,null,e.slice()):typeof e=="object"?Vi(e):X(Ur,null,String(e))}function Vi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Qn(e)}function Fl(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Te(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),Fl(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(zr in t)?t._ctx=Ut:s===3&&Ut&&(Ut.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ne(t)?(t={default:t,_ctx:Ut},i=32):(t=String(t),n&64?(i=16,t=[io(t)]):i=8);e.children=t,e.shapeFlag|=i}function Mm(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=yt([t.class,n.class]));else if(s==="style")t.style=Se([t.style,n.style]);else if(Rr(s)){const o=t[s],r=n[s];r&&o!==r&&!(Te(o)&&o.includes(r))&&(t[s]=o?[].concat(o,r):r)}else s!==""&&(t[s]=n[s])}return t}function yi(e,t,i,n=null){pi(e,t,7,[i,n])}const xm=Gd();let Rm=0;function Nm(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||xm,o={uid:Rm++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ng(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$d(n,s),emitsOptions:Td(n,s),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:n.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Vg.bind(null,o),e.ce&&e.ce(o),o}let mt=null;const Zn=e=>{mt=e,e.scope.on()},kn=()=>{mt&&mt.scope.off(),mt=null};function Kd(e){return e.vnode.shapeFlag&4}let zs=!1;function Om(e,t=!1){zs=t;const{props:i,children:n}=e.vnode,s=Kd(e);mm(e,i,s,t),_m(e,n);const o=s?Lm(e,t):void 0;return zs=!1,o}function Lm(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=vd(new Proxy(e.ctx,um));const{setup:n}=i;if(n){const s=e.setupContext=n.length>1?Dm(e):null;Zn(e),ss();const o=Ji(n,e,0,[e.props,s]);if(os(),kn(),od(o)){if(o.then(kn,kn),t)return o.then(r=>{Bc(e,r,t)}).catch(r=>{Dr(r,e,0)});e.asyncDep=o}else Bc(e,o,t)}else qd(e,t)}function Bc(e,t,i){Ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:at(t)&&(e.setupState=Ed(t)),qd(e,i)}let Dc;function qd(e,t,i){const n=e.type;if(!e.render){if(!t&&Dc&&!n.render){const s=n.template||Bl(e).template;if(s){const{isCustomElement:o,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,c=zt(zt({isCustomElement:o,delimiters:a},r),l);n.render=Dc(s,c)}}e.render=n.render||fi}Zn(e),ss(),hm(e),os(),kn()}function Bm(e){return new Proxy(e.attrs,{get(t,i){return qt(e,"get","$attrs"),t[i]}})}function Dm(e){const t=n=>{e.exposed=n||{}};let i;return{get attrs(){return i||(i=Bm(e))},slots:e.slots,emit:e.emit,expose:t}}function $l(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ed(vd(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in As)return As[i](e)},has(t,i){return i in t||i in As}}))}function Fm(e,t=!0){return Ne(e)?e.displayName||e.name:e.name||t&&e.__name}function $m(e){return Ne(e)&&"__vccOpts"in e}const ke=(e,t)=>Fg(e,t,zs);function Hm(e,t,i){const n=arguments.length;return n===2?at(t)&&!Te(t)?nr(t)?X(e,null,[t]):X(e,t):X(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&nr(i)&&(i=[i]),X(e,t,i))}const Um=Symbol(""),zm=()=>No(Um),Gm="3.2.47",Wm="http://www.w3.org/2000/svg",Sn=typeof document<"u"?document:null,Fc=Sn&&Sn.createElement("template"),Vm={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t?Sn.createElementNS(Wm,e):Sn.createElement(e,i?{is:i}:void 0);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>Sn.createTextNode(e),createComment:e=>Sn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Sn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,o){const r=i?i.previousSibling:t.lastChild;if(s&&(s===o||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===o||!(s=s.nextSibling)););else{Fc.innerHTML=n?`<svg>${e}</svg>`:e;const a=Fc.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[r?r.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function jm(e,t,i){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Km(e,t,i){const n=e.style,s=St(i);if(i&&!s){if(t&&!St(t))for(const o in t)i[o]==null&&qa(n,o,"");for(const o in i)qa(n,o,i[o])}else{const o=n.display;s?t!==i&&(n.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const $c=/\s*!important$/;function qa(e,t,i){if(Te(i))i.forEach(n=>qa(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=qm(e,t);$c.test(i)?e.setProperty(ns(n),i.replace($c,""),"important"):e[n]=i}}const Hc=["Webkit","Moz","ms"],oa={};function qm(e,t){const i=oa[t];if(i)return i;let n=Ai(t);if(n!=="filter"&&n in e)return oa[t]=n;n=Lr(n);for(let s=0;s<Hc.length;s++){const o=Hc[s]+n;if(o in e)return oa[t]=o}return t}const Uc="http://www.w3.org/1999/xlink";function Ym(e,t,i,n,s){if(n&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Uc,t.slice(6,t.length)):e.setAttributeNS(Uc,t,i);else{const o=qp(t);i==null||o&&!id(i)?e.removeAttribute(t):e.setAttribute(t,o?"":i)}}function Xm(e,t,i,n,s,o,r){if(t==="innerHTML"||t==="textContent"){n&&r(n,s,o),e[t]=i??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const l=i??"";(e.value!==l||e.tagName==="OPTION")&&(e.value=l),i==null&&e.removeAttribute(t);return}let a=!1;if(i===""||i==null){const l=typeof e[t];l==="boolean"?i=id(i):i==null&&l==="string"?(i="",a=!0):l==="number"&&(i=0,a=!0)}try{e[t]=i}catch{}a&&e.removeAttribute(t)}function Jm(e,t,i,n){e.addEventListener(t,i,n)}function Qm(e,t,i,n){e.removeEventListener(t,i,n)}function Zm(e,t,i,n,s=null){const o=e._vei||(e._vei={}),r=o[t];if(n&&r)r.value=n;else{const[a,l]=e0(t);if(n){const c=o[t]=n0(n,s);Jm(e,a,c,l)}else r&&(Qm(e,a,r,l),o[t]=void 0)}}const zc=/(?:Once|Passive|Capture)$/;function e0(e){let t;if(zc.test(e)){t={};let n;for(;n=e.match(zc);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ns(e.slice(2)),t]}let ra=0;const t0=Promise.resolve(),i0=()=>ra||(t0.then(()=>ra=0),ra=Date.now());function n0(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;pi(s0(n,i.value),t,5,[n])};return i.value=e,i.attached=i0(),i}function s0(e,t){if(Te(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const Gc=/^on[a-z]/,o0=(e,t,i,n,s=!1,o,r,a,l)=>{t==="class"?jm(e,n,s):t==="style"?Km(e,i,n):Rr(t)?El(t)||Zm(e,t,i,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):r0(e,t,n,s))?Xm(e,t,n,o,r,a,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Ym(e,t,n,s))};function r0(e,t,i,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&Gc.test(t)&&Ne(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Gc.test(t)&&St(i)?!1:t in e}const a0=zt({patchProp:o0},Vm);let Wc;function l0(){return Wc||(Wc=Em(a0))}const c0=(...e)=>{const t=l0().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=u0(n);if(!s)return;const o=t._component;!Ne(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const r=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},t};function u0(e){return St(e)?document.querySelector(e):e}function sr(e,t){return(e?Vc(e):"")+Vc(t)}function Vc(e){return e+(e.endsWith(`
`)?"":`
`)}function Yd(e){return e instanceof Error?e.message:e instanceof Object?JSON.stringify(e):String(e)}function jc(e,t,i){return t===0?"0%":(e/t*100).toFixed(i)+"%"}function h0(e){switch(e%100){case 11:case 12:case 13:return e+"th"}switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}function or(e,t){const i=e.toLowerCase();return t.every(n=>i.includes(n.toLowerCase()))}var Mn=(e=>(e.JA="ja",e.EN="en",e))(Mn||{});const Ya={electronShogi:"Electron",clear:"",open:"",saveOverwrite:"",newRecord:"",newRecordWithBrackets:"",openRecord:"",saveRecord:"",saveRecordAs:"",openAutoSavingDirectory:"",exportPositionImage:"",positionImage:"",close:"",quit:"",editing:"",copyAsKIF:"KIF",copyAsCSA:"CSA",copyAsUSI:"USI",copyAsSFEN:"SFEN",paste:"",copyRecord:"",asKIF:"KIF",asCSA:"CSA",asUSIUntilCurrentMove:"USI()",asUSIAll:"USI()",copyPositionAsSFEN:"(SFEN)",pasteRecordOrPosition:"",appendSpecialMove:"",deleteMoves:"",view:"",toggleFullScreen:"",defaultFontSize:"",largerFontSize:"",smallerFontSize:"",settings:"",config:"",debug:"",toggleDevTools:"",openAppDirectory:"",openSettingDirectory:"",openLogDirectory:"",help:"",openWebSite:"Web",howToUse:"",checkForUpdates:"",game:"",player:"",selectFromHistory:"",noHistory:"",saveHistory:"",version:"",gameProgress:"",allGamesCompleted:"",gameEnded:"",offlineGame:"",csaOnlineGame:"CSA",csaProtocolOnlineGame:"CSA",csaProtocolV121:"CSA1.2.1 ",csaProtocolV121WithPVComment:"CSA1.2.1 ",hostToConnect:"",portNumber:"",password:"",showPassword:"",logout:"",displayGameResults:"",interrupt:"",stopGame:"",resign:"",draw:"",impass:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:"",winByDeclaration:"",declareWinning:"",research:"",startResearch:"",endResearch:"",recordAnalysis:"",analysis:"",analyze:"",stopAnalysis:"",setupPosition:"",startPositionSetup:"",completePositionSetup:"",changeTurn:"",initializePosition:"",appSettings:"",language:"",theme:"",standardGreen:"",green:"",cherryBlossom:"",autumn:"",snow:"",dark:"",pieceImages:"",singleKanjiPiece:"",singleKanjiGothicPiece:"",singleKanjiDarkPiece:"",singleKanjiGothicDarkPiece:"",boardImage:"",lightWoodyTexture:"",warmWoodTexture:"",regin:"",displayFileAndRank:"",tabViewStyle:"",oneColumn:"1",twoColumns:"2",sounds:"",pieceLoudness:"",clockLoudness:"",clockPitch:"",clockSoundTarget:"",anyTurn:"",onlyHumanTurn:"",newlineCharacter:"",old90sMac:"90Mac",autoSavingDirectory:"",select:"",usiProtocol:"USI",translateOptionName:"",maxStartupTime:"",forDevelopers:"",enableAppLog:"",enableUSILog:"USI",enableCSALog:"CSA",logLevel:"",engineSettings:"",flipBoard:"",file:"",recordFile:"",executableFile:"",remove:"",deleteMove:"",recordProperties:"",comments:"",moveComments:"",searchLog:"",pv:"",mateShort:"",displayPVShort:"",evaluation:"",eval:"",estimatedWinRate:"",evaluationAndEstimatedWinRate:"",swapEachTurnChange:"",alwaysSenteIsPositive:"",signOfEvaluation:"",winRateCoefficient:"",hideTabView:"",expandTabView:"",sente:"",senteOrShitate:"",gote:"",goteOrUwate:"",swapSenteGote:"",currentPosition:"",time:"",enableEngineTimeout:"",others:"",nextTurn:"",elapsedTime:"",elapsed:"",rank:"",depth:"",searchEngine:"",ponder:"(Ponder)",numberOfThreads:"",multiPV:"PV",startPosition:"",maxMoves:"",gameRepetition:"",autoRelogin:"",swapTurnWhenGameRepetition:"1",outputComments:"",saveRecordAutomatically:"",adjustBoardToHumanPlayer:"",adjustBoardAutomatically:"",startGame:"",startCriteria:"",endCriteria:"",endCriteria1Move:"",outputSettings:"",noOutputs:"",insertCommentToTop:"",appendCommentToBottom:"",overwrite:"",fromPrefix:"",fromSuffix:"",toPrefix:"",toSuffix:"",plySuffix:"",hoursSuffix:"",minutesSuffix:"",secondsSuffix:"",engineManagement:"",engineName:"",author:"",enginePath:"",openDirectory:"",displayName:"",invoke:"",resetToEngineDefaultValues:"",defaultValue:"",noEngineRegistered:"",duplicate:"",add:"",recommended:"",import:"",saveAndClose:"",save:"",saveAs:"",cancel:"",back:"",name:"",prediction:"",best:"",nodes:"Node",hashUsage:"Hash",nonHandicap:"",lanceHandicap:"",rightLanceHandicap:"",bishopHandicap:"",rookHandicap:"",rookLanceHandicap:"",twoPiecesHandicap:"",fourPiecesHandicap:"",sixPiecesHandicap:"",eightPiecesHandicap:"",tsumeShogi:"",doubleKingTsumeShogi:"",startDateTime:"",endDateTime:"",gameDate:"",tournament:"",strategy:"",gameTitle:"",timeLimit:"",place:"",postedOn:"",note:"",senteShortName:"",goteShortName:"",opusNo:"",opusName:"",publishedBy:"",publishedOn:"",source:"",numberOfMoves:"",integrity:"",recordCategory:"",award:"",filterByOptionName:"",filterByEngineName:"",bookStyle:"",gameStyle:"",size:"",title:"",typeCustomTitleHere:"",inBrowserLogsOutputToConsoleAndIgnoreThisSetting:"",shouldRestartToApplyLogSettings:"",canOpenLogDirectoryFromMenu:"-",hasNoOldLogCleanUpFeature:"",processingPleaseWait:"",importingFollowingRecordOrPosition:"()",supportsKIFCSAUSI:"KIF/CSA/SFEN",plesePasteRecordIntoTextArea:"",desktopVersionPastesAutomatically:"",someLogsDisabled:"",logsRecommendedForCSAProtocol:"CSA",pleaseEnableLogsAndRestart:"",notSendPVOnStandardCSAProtocol:"CSA",sendPVDoNotUseOnWCSC:"FloodgateWCSC",csaProtocolSendPlaintextPassword:"CSA",passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable:"OS",pleaseUncheckSaveHistoryIfNotWantSave:"",csaProtocolSendPlaintextPasswordRegardlessOfHistory:"CSA",areYouSureWantToQuitGames:"",areYouSureWantToRequestQuit:"",areYouSureWantToClearRecord:"",areYouSureWantToDiscardPosition:"",youCanNotCloseAppWhileCSAOnlineGame:"CSA",fileExtensionNotSupported:"",errorOccuredWhileDisconnectingFromCSAServer:"CSA",failedToConnectToCSAServer:"CSA",disconnectedFromCSAServer:"CSA",csaServerLoginDenied:"CSA",thisFeatureNotAvailableOnWebApp:"Web",failedToSendGoCommand:"go",failedToSendPonderCommand:"ponder",failedToSendStopCommand:"stop",failedToSaveRecord:"",failedToParseSFEN:"SFEN",failedToDetectRecordFormat:"",unknownFileExtension:"",emptyRecordInput:"",invalidPieceName:"",invalidTurn:"",invalidMove:"",invalidMoveNumber:"",invalidDestination:"",pieceNotExists:"",invalidLine:"",invalidHandicap:"",invalidBoard:"",invalidHandPiece:"",invalidUSI:"USI",errorsOccurred:e=>`${e} `,between:(e,t)=>`${e}  ${t} `,addNthEngine:e=>`${e} `,copyOf:e=>`${e} `,keepLatest:e=>`${e}`,areYouSureWantToDeleteFollowingMove:e=>`${e}`,failedToOpenDirectory:e=>`: ${e}`,unexpectedEventSenderPleaseReport(e){return` [${e}]`},unexpectedHTTPMethodPleaseReport(e){return`HTTP [${e}]`},unexpectedRequestURLPleaseReport(e){return`URL [${e}]`},noResponseFromEnginePleaseExtendTimeout(e){return`${e}`}},d0={electronShogi:"Electron Shogi",clear:"Clear",open:"Open",saveOverwrite:"Overwrite",newRecord:"New Record",newRecordWithBrackets:"(New Record)",openRecord:"Open Record",saveRecord:"Save Record",saveRecordAs:"Save Record As",openAutoSavingDirectory:"Open Auto-Saving Directory",exportPositionImage:"Export Position Image",positionImage:"Position Image",close:"Close",quit:"Quit",editing:"Edit",copyAsKIF:"Copy (KIF)",copyAsCSA:"Copy (CSA)",copyAsUSI:"Copy (USI)",copyAsSFEN:"Copy (SFEN)",paste:"Paste",copyRecord:"Copy Record",asKIF:"as KIF",asCSA:"as CSA",asUSIUntilCurrentMove:"as USI (until current move)",asUSIAll:"as USI (all)",copyPositionAsSFEN:"Copy Position (as SFEN)",pasteRecordOrPosition:"Paste Record/Position",appendSpecialMove:"Append Special Move",deleteMoves:"Delete Current Move and Following Moves",view:"View",toggleFullScreen:"Toggle Full Screen",defaultFontSize:"Default Font Size",largerFontSize:"Larger Font Size",smallerFontSize:"Smaller Font Size",settings:"Settings",config:"Config",debug:"Debug",toggleDevTools:"Toggle Developer Tools",openAppDirectory:"Open App Directory",openSettingDirectory:"Open Setting Directory",openLogDirectory:"Open Log Directory",help:"Help",openWebSite:"Open Web Site",howToUse:"How to Use",checkForUpdates:"Check for Updates",game:"Game",player:"Player",selectFromHistory:"Select from History",noHistory:"Empty",saveHistory:"Save History",version:"Version",gameProgress:"Game Progress",allGamesCompleted:"All Games Completed",gameEnded:"Game Ended",offlineGame:"Offline Game",csaOnlineGame:"CSA Online Game",csaProtocolOnlineGame:"Online Game (CSA Protocol)",csaProtocolV121:"CSA Protocol 1.2.1 Standard",csaProtocolV121WithPVComment:"CSA Protocol 1.2.1 with PV Comment",hostToConnect:"Hostname",portNumber:"Port",password:"Password",showPassword:"Show Password",logout:"Logout",displayGameResults:"Display Results",interrupt:"Stop",stopGame:"Stop",resign:"Resign",draw:"Draw",impass:"Impass",repetitionDraw:"Repetition Draw",mate:"Mate",timeout:"Timeout",foulWin:"Foul Win",foulLose:"Foul Lose",enteringOfKing:"Entering of King",winByDefault:"Win by Default",loseByDefault:"Lose by Default",winByDeclaration:"Win by Declaration",declareWinning:"Declare Winning",research:"Research",startResearch:"Start Research",endResearch:"End Research",recordAnalysis:"Record Analysis",analysis:"Analyze",analyze:"Analyze",stopAnalysis:"Stop Analysis",setupPosition:"Setup Position",startPositionSetup:"Start Position Setup",completePositionSetup:"Complete Setup",changeTurn:"Change Turn",initializePosition:"Initialize Position",appSettings:"Preferences",language:"Languages",theme:"Theme",standardGreen:"Green (Standard)",green:"Green",cherryBlossom:"Cherry Blossom",autumn:"Autumn",snow:"Snow",dark:"Dark",pieceImages:"Piece Images",singleKanjiPiece:"Single Kanji",singleKanjiGothicPiece:"Single Kanji (Gothic)",singleKanjiDarkPiece:"Single Kanji (Dark)",singleKanjiGothicDarkPiece:"Single Kanji (Gothic, Dark)",boardImage:"Board Image",lightWoodyTexture:"Woody Texture (Light)",warmWoodTexture:"Woody Texture (Warm)",regin:"Regin",displayFileAndRank:"Display File & Rank",tabViewStyle:"Tab View Style",oneColumn:"1 Column",twoColumns:"2 Columns",sounds:"Sounds",pieceLoudness:"Piece Loudness",clockLoudness:"Clock Loudness",clockPitch:"Clock Pitch",clockSoundTarget:"Clock Sound Target",anyTurn:"Any",onlyHumanTurn:"Human",newlineCharacter:"Newline Character",old90sMac:"90's Mac",autoSavingDirectory:"Auto-Saving Directory",select:"Select",usiProtocol:"USI Protocol",translateOptionName:"Translate Option Name",maxStartupTime:"Max Startup Time",forDevelopers:"For Developers",enableAppLog:"Enable App Log",enableUSILog:"Enable USI Log",enableCSALog:"Enable CSA Log",logLevel:"Log Level",engineSettings:"Engine Settings",flipBoard:"Flip Board",file:"File",recordFile:"Record File",executableFile:"Executable",remove:"Remove",deleteMove:"Delete Move",recordProperties:"Record Properties",comments:"Comments",moveComments:"Move Comments",searchLog:"Search Log",pv:"PV",mateShort:"M",displayPVShort:"Play",evaluation:"Evaluation",eval:"Eval",estimatedWinRate:"Estimated Win Rate",evaluationAndEstimatedWinRate:"Evaluation & Estimated Win Rate",swapEachTurnChange:"Swap Each Turn Change",alwaysSenteIsPositive:"Always Sente is Positive",signOfEvaluation:"Sign of Evaluation",winRateCoefficient:"Win Rate Coefficient",hideTabView:"Hide",expandTabView:"Expand Tab View",sente:"Sente",senteOrShitate:"Sente (Shitate)",gote:"Gote",goteOrUwate:"Gote (Uwate)",swapSenteGote:"Swap Sente/Gote",currentPosition:"Current Position",time:"Time",enableEngineTimeout:"Enable Engine Timeout",others:"Others",nextTurn:"Next Move",elapsedTime:"Elapsed Time",elapsed:"Elapsed",rank:"Rank",depth:"Depth",searchEngine:"Search Engine",ponder:"Ponder",numberOfThreads:"Threads",multiPV:"Multi PV",startPosition:"Position",maxMoves:"Max Moves",gameRepetition:"Repeat",autoRelogin:"Auto Re-Login",swapTurnWhenGameRepetition:"Swap Turns When Repeat",outputComments:"Output Comments",saveRecordAutomatically:"Save Record Automatically",adjustBoardToHumanPlayer:"Adjust Board to Human Player",adjustBoardAutomatically:"Adjust Board Automatically",startGame:"Start Game",startCriteria:"Start Criteria",endCriteria:"End Criteria",endCriteria1Move:"End Criteria for 1 Move",outputSettings:"Output Settings",noOutputs:"No Outputs",insertCommentToTop:"Insert to Top",appendCommentToBottom:"Append to Bottom",overwrite:"Overwrite",fromPrefix:"from",fromSuffix:"",toPrefix:"to",toSuffix:"",plySuffix:"th move",hoursSuffix:"h",minutesSuffix:"min",secondsSuffix:"sec",engineManagement:"Engine Management",engineName:"Engine Name",author:"Author",enginePath:"Engine Path",openDirectory:"Open Directory",displayName:"Display Name",invoke:"Invoke",resetToEngineDefaultValues:"Reset to default values",defaultValue:"Default Value",noEngineRegistered:"No engine",duplicate:"Copy",add:"Add",recommended:"Recommended",import:"Import",saveAndClose:"Save & Close",save:"Save",saveAs:"Save As",cancel:"Cancel",back:"Back",name:"Name",prediction:"Prediction",best:"Best",nodes:"Nodes",hashUsage:"Hash Usage",nonHandicap:"Non-Handicap",lanceHandicap:"Lance Handicap",rightLanceHandicap:"Right Lance Handicap",bishopHandicap:"Bishop Handicap",rookHandicap:"Rook Handicap",rookLanceHandicap:"Rook-Lance Handicap",twoPiecesHandicap:"2 Pieces Handicap",fourPiecesHandicap:"4 Pieces Handicap",sixPiecesHandicap:"6 Pieces Handicap",eightPiecesHandicap:"8 Pieces Handicap",tsumeShogi:"Tsume Shogi",doubleKingTsumeShogi:"2-Kings Tsume Shogi",startDateTime:"Start",endDateTime:"End",gameDate:"Date",tournament:"Tournament",strategy:"Strategy",gameTitle:"Title",timeLimit:"Time Limit",place:"Place",postedOn:"Posted On",note:"Note",senteShortName:"Sente(short)",goteShortName:"Gote(short)",opusNo:"Opus No.",opusName:"Opus Name",publishedBy:"Published By",publishedOn:"Published On",source:"Source",numberOfMoves:"Number of Moves",integrity:"Integrity",recordCategory:"Category",award:"Award",filterByOptionName:"Filter by Option Name",filterByEngineName:"Filter by Engine Name",bookStyle:"Book Style",gameStyle:"Game Style",size:"Size",title:"Title",typeCustomTitleHere:"Type custom title here",inBrowserLogsOutputToConsoleAndIgnoreThisSetting:"*In web browser version, it will output logs to console and ignore this setting.",shouldRestartToApplyLogSettings:"*You should restart this app to apply log settings.",canOpenLogDirectoryFromMenu:'*You can open log directory from "Debug" - "Open Log Directory" menu.',hasNoOldLogCleanUpFeature:"*This app has no clean-up feature. Please remove old logs manually.",processingPleaseWait:"Processing, please wait.",importingFollowingRecordOrPosition:"Importing the following record(or position).",supportsKIFCSAUSI:"*Supports KIF, CSA, USI.",plesePasteRecordIntoTextArea:"*Please paste record data into the text area.",desktopVersionPastesAutomatically:"*In desktop version, it will paste automatically from clipboard.",someLogsDisabled:"Some log settings are disabled.",logsRecommendedForCSAProtocol:"Log settings are recommended for CSA protocol.",pleaseEnableLogsAndRestart:"Please enable log settings and restart this app.",notSendPVOnStandardCSAProtocol:"Client do not send PV on standard CSA protocol.",sendPVDoNotUseOnWCSC:"Client send PV by floodgate extension. Do not use on WCSC.",csaProtocolSendPlaintextPassword:"On CSA protocol, client send plaintext password.",passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable:"Password will saved as plaintext because OS side encryption is not available.",pleaseUncheckSaveHistoryIfNotWantSave:"Please uncheck Save History, if you don't want to save.",csaProtocolSendPlaintextPasswordRegardlessOfHistory:"On CSA protocol, client send plaintext password regardless of history.",areYouSureWantToQuitGames:"Are you sure you want to quit games?",areYouSureWantToRequestQuit:"You have possibility to be loser. Are you sure you want to request quit?",areYouSureWantToClearRecord:"Are you sure you want to clear record?",areYouSureWantToDiscardPosition:"Are you sure you want to discard the position?",youCanNotCloseAppWhileCSAOnlineGame:"You can not close app while CSA online game.",fileExtensionNotSupported:"File extension is not supported.",errorOccuredWhileDisconnectingFromCSAServer:"An error occured while disconnecting from CSA server.",failedToConnectToCSAServer:"Failed to connect to CSA server.",disconnectedFromCSAServer:"Disconnected from CSA server.",csaServerLoginDenied:"CSA server login denied.",thisFeatureNotAvailableOnWebApp:"This feature is not available on web app.",failedToSendGoCommand:"Failed to send go-command.",failedToSendPonderCommand:"Failed to send ponder-command.",failedToSendStopCommand:"Failed to send stop-command.",failedToSaveRecord:"Failed to save record.",failedToParseSFEN:"Failed to parse SFEN.",failedToDetectRecordFormat:"Failed to detect record format.",unknownFileExtension:"Unknown file extension.",emptyRecordInput:"Empty record input.",invalidPieceName:"Invalid piece name",invalidTurn:"Invalid turn",invalidMove:"Invalid move",invalidMoveNumber:"Invalid move number",invalidDestination:"Invalid destination",pieceNotExists:"Piece not exists",invalidLine:"Invalid line",invalidHandicap:"Invalid handicap",invalidBoard:"Invalid board",invalidHandPiece:"Invalid hand piece",invalidUSI:"Invalid USI",errorsOccurred:e=>e>=2?`${e} errors have occurred.`:`${e} error has occurred.`,between:(e,t)=>`between ${e} and ${t}`,addNthEngine:e=>`Add ${h0(e)} engine`,copyOf:e=>`${e} (copy)`,keepLatest:e=>`keep latest ${e}`,areYouSureWantToDeleteFollowingMove:e=>`Are you sure you want to delete ${e}th move and the following move?`,failedToOpenDirectory:e=>`Failed to open directory of the file: ${e}`,unexpectedEventSenderPleaseReport(e){return`Unexpected event sender. Please report this error message to developer. [${e}]`},unexpectedHTTPMethodPleaseReport(e){return`Unexpected HTTP method. Please report this error message to developer. [${e}]`},unexpectedRequestURLPleaseReport(e){return`Unexpected request URL. Please report this error message to developer. [${e}]`},noResponseFromEnginePleaseExtendTimeout(e){return`No response from engine while ${e} seconds. Please extend timeout at app settings, if your engine is slow.`}},G=Ya;function f0(e){switch(e){case Mn.JA:return Ya;case Mn.EN:return d0;default:return Ya}}function p0(e){Object.entries(f0(e)).forEach(([t,i])=>{G[t]=i})}const g0={USI_Ponder:"",Ponder:"",USI_Hash:"",Hash:"",Clear_Hash:"",Threads:"",NumberOfThreads:"",thread_num_per_gpu:"GPU",ThreadIdOffset:"ID",MultiPV:"PV",BookFile:"",Book_File:"",Book_Enable:"",BookEvalDiff:"",book_file_name:"",use_book:"",BookPvMoves:"PV",TinyBook:"",BookMoves:"",BookMaxPly:"",BookIgnoreRate:"",RandomBookSelect:"",IgnoreBookPly:"",DepthLimit:"",NarrowBook:"",WriteDebugLog:"",Write_Debug_Log:"",ResignValue:"",ResignScore:"",PvInterval:"PV",NodesLimit:"",USI_OwnBook:"",OwnBook:"",EvalDir:"",Eval_Dir:"",EvalFile:"",EvalHash:"",Eval_Hash:"",EvalSaveDir:"",EvalShare:"",BookDir:"",Stochastic_Ponder:"",MinimumThinkingTime:"",Minimum_Thinking_Time:"",MinThinkingTime:"",MaxMovesToDraw:"",SlowMover:"",Slow_Mover:"",OutputFailLHPV:"Fail Low/High",NetworkDelay:"",NetworkDelay2:"2",FV_SCALE:"",UseBook:"",MaxDepth:"",MarginMs:"",Time_Margin:"",ByoyomiMargin:"",Byoyomi_Margin:"",byoyomi_margin:"",Move_Overhead:"",FischerMargin:"",SuddenDeathMargin:"",Snappy:"",EnteringKingRule:"",Do_YoTsume_Search:"",gpu_num:"GPU",ConsiderationMode:"",ConsiderBookMoveCount:"",GenerateAllLegalMoves:"",DrawScore:"",DrawValue:"",DrawValueBlack:"",DrawValueWhite:"",LargePageEnable:"LargePage",SkillLevel:"",Skill_Level:""},Lo={};function m0(e){switch(e){case Mn.JA:return g0;case Mn.EN:return{};default:return{}}}function b0(e){Object.keys(Lo).forEach(t=>{delete Lo[t]}),Object.entries(m0(e)).forEach(([t,i])=>{Lo[t]=i})}class Gr extends Error{constructor(t){super(`Invalid piece name: ${t}`),this.data=t,this.name="InvalidPieceNameError"}}class Xd extends Error{constructor(t){super(`Invalid turn: ${t}`),this.data=t,this.name="InvalidTurnError"}}class Gs extends Error{constructor(t){super(`Invalid move: ${t}`),this.data=t,this.name="InvalidMoveError"}}class Jd extends Error{constructor(t){super(`Invalid move number: ${t}`),this.data=t,this.name="InvalidMoveNumberError"}}class Qd extends Error{constructor(t){super(`Invalid destination: ${t}`),this.data=t,this.name="InvalidDestinationError"}}class Xa extends Error{constructor(t){super(`Piece not exists: ${t}`),this.data=t,this.name="PieceNotExistsError"}}class Hl extends Error{constructor(t){super(`Invalid line: ${t}`),this.data=t,this.name="InvalidLineError"}}class Zd extends Error{constructor(t){super(`Invalid handicap: ${t}`),this.data=t,this.name="InvalidHandicapError"}}class Ja extends Error{constructor(t){super(`Invalid board: ${t}`),this.data=t,this.name="InvalidBoardError"}}class ef extends Error{constructor(t){super(`Invalid hand piece: ${t}`),this.data=t,this.name="InvalidHandPieceError"}}class bs extends Error{constructor(t){super(`Invalid USI: ${t}`),this.data=t,this.name="InvalidUSIError"}}var D=(e=>(e.BLACK="black",e.WHITE="white",e))(D||{});function xt(e){return e==="black"?"white":"black"}function y0(e){return e==="black"?"b":"w"}function _0(e){return e==="b"||e==="w"}function v0(e){return e==="b"?"black":"white"}var B=(e=>(e.PAWN="pawn",e.LANCE="lance",e.KNIGHT="knight",e.SILVER="silver",e.GOLD="gold",e.BISHOP="bishop",e.ROOK="rook",e.KING="king",e.PROM_PAWN="promPawn",e.PROM_LANCE="promLance",e.PROM_KNIGHT="promKnight",e.PROM_SILVER="promSilver",e.HORSE="horse",e.DRAGON="dragon",e))(B||{});const S0=["pawn","lance","knight","silver","gold","bishop","rook"],w0={pawn:!0,lance:!0,knight:!0,silver:!0,gold:!1,bishop:!0,rook:!0,king:!1,promPawn:!1,promLance:!1,promKnight:!1,promSilver:!1,horse:!1,dragon:!1},tf={pawn:"promPawn",lance:"promLance",knight:"promKnight",silver:"promSilver",bishop:"horse",rook:"dragon"};function E0(e){return tf[e]||e}const I0={promPawn:"pawn",promLance:"lance",promKnight:"knight",promSilver:"silver",horse:"bishop",dragon:"rook"},nf={pawn:"P",lance:"L",knight:"N",silver:"S",gold:"G",bishop:"B",rook:"R",king:"K",promPawn:"+P",promLance:"+L",promKnight:"+N",promSilver:"+S",horse:"+B",dragon:"+R"};function P0(e){return nf[e]}const k0={pawn:"p",lance:"l",knight:"n",silver:"s",gold:"g",bishop:"b",rook:"r",king:"k",promPawn:"+p",promLance:"+l",promKnight:"+n",promSilver:"+s",horse:"+b",dragon:"+r"},Kc={P:"pawn",L:"lance",N:"knight",S:"silver",G:"gold",B:"bishop",R:"rook",K:"king","+P":"promPawn","+L":"promLance","+N":"promKnight","+S":"promSilver","+B":"horse","+R":"dragon",p:"pawn",l:"lance",n:"knight",s:"silver",g:"gold",b:"bishop",r:"rook",k:"king","+p":"promPawn","+l":"promLance","+n":"promKnight","+s":"promSilver","+b":"horse","+r":"dragon"},A0={P:D.BLACK,L:D.BLACK,N:D.BLACK,S:D.BLACK,G:D.BLACK,B:D.BLACK,R:D.BLACK,K:D.BLACK,"+P":D.BLACK,"+L":D.BLACK,"+N":D.BLACK,"+S":D.BLACK,"+B":D.BLACK,"+R":D.BLACK,p:D.WHITE,l:D.WHITE,n:D.WHITE,s:D.WHITE,g:D.WHITE,b:D.WHITE,r:D.WHITE,k:D.WHITE,"+p":D.WHITE,"+l":D.WHITE,"+n":D.WHITE,"+s":D.WHITE,"+b":D.WHITE,"+r":D.WHITE},Gt=new Map;Gt.set("pawn",{type:"promPawn",reverseColor:!1});Gt.set("lance",{type:"promLance",reverseColor:!1});Gt.set("knight",{type:"promKnight",reverseColor:!1});Gt.set("silver",{type:"promSilver",reverseColor:!1});Gt.set("gold",{type:"gold",reverseColor:!0});Gt.set("bishop",{type:"horse",reverseColor:!1});Gt.set("rook",{type:"dragon",reverseColor:!1});Gt.set("king",{type:"king",reverseColor:!0});Gt.set("promPawn",{type:"pawn",reverseColor:!0});Gt.set("promLance",{type:"lance",reverseColor:!0});Gt.set("promKnight",{type:"knight",reverseColor:!0});Gt.set("promSilver",{type:"silver",reverseColor:!0});Gt.set("horse",{type:"bishop",reverseColor:!0});Gt.set("dragon",{type:"rook",reverseColor:!0});class ue{constructor(t,i){this.color=t,this.type=i}black(){return this.withColor(D.BLACK)}white(){return this.withColor(D.WHITE)}withColor(t){return new ue(t,this.type)}equals(t){return this.type===t.type&&this.color===t.color}promoted(){const t=tf[this.type];return new ue(this.color,t||this.type)}unpromoted(){const t=I0[this.type];return new ue(this.color,t||this.type)}isPromotable(){return!!w0[this.type]}rotate(){const t=Gt.get(this.type),i=new ue(this.color,t?t.type:this.type);return t&&t.reverseColor&&(i.color=xt(this.color)),i}get id(){return this.color+"_"+this.type}get sfen(){switch(this.color){default:case D.BLACK:return nf[this.type];case D.WHITE:return k0[this.type]}}static isValidSFEN(t){return!!Kc[t]}static newBySFEN(t){const i=Kc[t];if(!i)return null;const n=A0[t];return n?new ue(n,i):null}}var $t=(e=>(e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right",e.LEFT_UP="left_up",e.RIGHT_UP="right_up",e.LEFT_DOWN="left_down",e.RIGHT_DOWN="right_down",e.LEFT_UP_KNIGHT="left_up_knight",e.RIGHT_UP_KNIGHT="right_up_knight",e.LEFT_DOWN_KNIGHT="left_down_knight",e.RIGHT_DOWN_KNIGHT="right_down_knight",e))($t||{});const C0={up:"down",down:"up",left:"right",right:"left",left_up:"right_down",right_up:"left_down",left_down:"right_up",right_down:"left_up",left_up_knight:"right_down_knight",right_up_knight:"left_down_knight",left_down_knight:"right_up_knight",right_down_knight:"left_up_knight"};function rr(e){return C0[e]}const T0=["up","down","left","right","left_up","right_up","left_down","right_down","left_up_knight","right_up_knight","left_down_knight","right_down_knight"];var Ws=(e=>(e.SHORT="short",e.LONG="long",e))(Ws||{});const sf={black:{pawn:{up:"short"},lance:{up:"long"},knight:{left_up_knight:"short",right_up_knight:"short"},silver:{left_up:"short",up:"short",right_up:"short",left_down:"short",right_down:"short"},gold:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},bishop:{left_up:"long",right_up:"long",left_down:"long",right_down:"long"},rook:{up:"long",left:"long",right:"long",down:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promLance:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promKnight:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promSilver:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},horse:{left_up:"long",right_up:"long",left_down:"long",right_down:"long",up:"short",left:"short",right:"short",down:"short"},dragon:{up:"long",left:"long",right:"long",down:"long",left_up:"short",right_up:"short",left_down:"short",right_down:"short"}},white:{pawn:{down:"short"},lance:{down:"long"},knight:{left_down_knight:"short",right_down_knight:"short"},silver:{left_down:"short",down:"short",right_down:"short",left_up:"short",right_up:"short"},gold:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},bishop:{left_down:"long",right_down:"long",left_up:"long",right_up:"long"},rook:{down:"long",left:"long",right:"long",up:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promLance:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promKnight:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promSilver:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},horse:{left_down:"long",right_down:"long",left_up:"long",right_up:"long",down:"short",left:"short",right:"short",up:"short"},dragon:{down:"long",left:"long",right:"long",up:"long",left_down:"short",right_down:"short",left_up:"short",right_up:"short"}}};function M0(e){return Object.keys(sf[e.color][e.type])}function of(e,t){return sf[e.color][e.type][t]}const x0={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},left_up:{x:-1,y:-1},right_up:{x:1,y:-1},left_down:{x:-1,y:1},right_down:{x:1,y:1},left_up_knight:{x:-1,y:-2},right_up_knight:{x:1,y:-2},left_down_knight:{x:-1,y:2},right_down_knight:{x:1,y:2}};function rf(e,t){if(e===1&&t===-2)return{direction:"right_up_knight",distance:1,ok:!0};if(e===-1&&t===-2)return{direction:"left_up_knight",distance:1,ok:!0};if(e===1&&t===2)return{direction:"right_down_knight",distance:1,ok:!0};if(e===-1&&t===2)return{direction:"left_down_knight",distance:1,ok:!0};if(e!==0&&t!==0&&Math.abs(e)!==Math.abs(t))return{direction:"",distance:0,ok:!1};let i=e,n=t,s=0;return i!==0&&(s=Math.abs(i),i/=s),n!==0&&(s=Math.abs(n),n/=s),i===-1&&n===-1?{direction:"left_up",distance:s,ok:!0}:i===0&&n===-1?{direction:"up",distance:s,ok:!0}:i===1&&n===-1?{direction:"right_up",distance:s,ok:!0}:i===-1&&n===0?{direction:"left",distance:s,ok:!0}:i===1&&n===0?{direction:"right",distance:s,ok:!0}:i===-1&&n===1?{direction:"left_down",distance:s,ok:!0}:i===0&&n===1?{direction:"down",distance:s,ok:!0}:i===1&&n===1?{direction:"right_down",distance:s,ok:!0}:{direction:"",distance:0,ok:!1}}var An=(e=>(e.UP="up",e.NONE="none",e.DOWN="down",e))(An||{});function Bo(e){switch(e){case"up":case"left_up":case"right_up":case"left_up_knight":case"right_up_knight":return"up";case"down":case"left_down":case"right_down":case"left_down_knight":case"right_down_knight":return"down";default:return"none"}}var Qt=(e=>(e.LEFT="left",e.NONE="none",e.RIGHT="right",e))(Qt||{});function Do(e){switch(e){case"left":case"left_up":case"left_down":case"left_up_knight":case"left_down_knight":return"left";case"right":case"right_up":case"right_down":case"right_up_knight":case"right_down_knight":return"right";default:return"none"}}function R0(e){switch(e){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}function N0(e){switch(e){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;case"i":return 9;default:return null}}const O0=["a","b","c","d","e","f","g","h","i"],_t=class{constructor(t,i){this.file=t,this.rank=i}get x(){return 9-this.file}get y(){return this.rank-1}get index(){return this.y*9+this.x}get opposite(){return new _t(10-this.file,10-this.rank)}neighbor(t,i){switch(t){case $t.UP:return new _t(this.file,this.rank-1);case $t.DOWN:return new _t(this.file,this.rank+1);case $t.LEFT:return new _t(this.file+1,this.rank);case $t.RIGHT:return new _t(this.file-1,this.rank);case $t.LEFT_UP:return new _t(this.file+1,this.rank-1);case $t.RIGHT_UP:return new _t(this.file-1,this.rank-1);case $t.LEFT_DOWN:return new _t(this.file+1,this.rank+1);case $t.RIGHT_DOWN:return new _t(this.file-1,this.rank+1);case $t.LEFT_UP_KNIGHT:return new _t(this.file+1,this.rank-2);case $t.RIGHT_UP_KNIGHT:return new _t(this.file-1,this.rank-2);case $t.LEFT_DOWN_KNIGHT:return new _t(this.file+1,this.rank+2);case $t.RIGHT_DOWN_KNIGHT:return new _t(this.file-1,this.rank+2)}const n=t,s=i;return new _t(this.file-n,this.rank+s)}directionTo(t){return rf(t.x-this.x,t.y-this.y).direction}get valid(){return this.file>=1&&this.file<=9&&this.rank>=1&&this.rank<=9}equals(t){return!!t&&this.file===t.file&&this.rank===t.rank}static newByXY(t,i){return new _t(9-t,i+1)}static newByIndex(t){return new _t(9-t%9,Math.trunc(t/9)+1)}get sfen(){return this.file+O0[this.rank-1]}static parseSFENSquare(t){const i=R0(t[0]),n=N0(t[1]);return!i||!n?null:new _t(i,n)}};let $=_t;T($,"all",[]);for(let e=0;e<81;e+=1)$.all.push($.newByIndex(e));class nt{constructor(t,i,n,s,o,r){this.from=t,this.to=i,this.promote=n,this.color=s,this.pieceType=o,this.capturedPieceType=r}equals(t){return t?(this.from instanceof $&&t.from instanceof $&&this.from.equals(t.from)||!(this.from instanceof $)&&!(t.from instanceof $)&&this.from===t.from)&&this.to.equals(t.to)&&this.promote===t.promote&&this.color===t.color&&this.pieceType===t.pieceType&&this.capturedPieceType===t.capturedPieceType:!1}withPromote(){return new nt(this.from,this.to,!0,this.color,this.pieceType,this.capturedPieceType)}get usi(){let t="";return this.from instanceof $?t+=this.from.sfen:t+=P0(this.from)+"*",t+=this.to.sfen,this.promote&&(t+="+"),t}}function af(e){let t;if(e[1]==="*"){const s=ue.newBySFEN(e[0]);if(!s)return null;t=s.type}else{const s=$.parseSFENSquare(e);if(!s)return null;t=s}const i=$.parseSFENSquare(e.substring(2));if(!i)return null;const n=e.length>=5&&e[4]==="+";return{from:t,to:i,promote:n}}var we=(e=>(e.STANDARD="standard",e.EMPTY="empty",e.HANDICAP_LANCE="handicapLance",e.HANDICAP_RIGHT_LANCE="handicapRightLance",e.HANDICAP_BISHOP="handicapBishop",e.HANDICAP_ROOK="handicapRook",e.HANDICAP_ROOK_LANCE="handicapRookLance",e.HANDICAP_2PIECES="handicap2Pieces",e.HANDICAP_4PIECES="handicap4Pieces",e.HANDICAP_6PIECES="handicap6Pieces",e.HANDICAP_8PIECES="handicap8Pieces",e.TSUME_SHOGI="tsumeShogi",e.TSUME_SHOGI_2KINGS="tsumeShogi2Kings",e))(we||{});function qc(e){switch(e){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}class ar{constructor(){T(this,"squares");this.squares=new Array;for(let t=0;t<81;t+=1)this.squares.push(null);this.reset("standard")}at(t){return this.squares[t.index]}set(t,i){this.squares[t.index]=i}swap(t,i){const n=this.squares[t.index];this.squares[t.index]=this.squares[i.index],this.squares[i.index]=n}remove(t){const i=this.squares[t.index];return this.squares[t.index]=null,i}listNonEmptySquares(){return $.all.filter(t=>this.squares[t.index])}listSquaresByColor(t){return $.all.filter(i=>{const n=this.squares[i.index];return n&&n.color===t})}listSquaresByPiece(t){return $.all.filter(i=>{const n=this.squares[i.index];return n&&t.equals(n)})}clear(){$.all.forEach(t=>{this.squares[t.index]=null})}reset(t){if(this.clear(),t!=="empty"&&(this.squares[new $(5,1).index]=new ue(D.WHITE,B.KING),t!=="tsumeShogi"&&(this.squares[new $(5,9).index]=new ue(D.BLACK,B.KING),t!=="tsumeShogi2Kings")))switch(this.squares[new $(2,8).index]=new ue(D.BLACK,B.ROOK),this.squares[new $(8,2).index]=new ue(D.WHITE,B.ROOK),this.squares[new $(8,8).index]=new ue(D.BLACK,B.BISHOP),this.squares[new $(2,2).index]=new ue(D.WHITE,B.BISHOP),this.squares[new $(4,9).index]=new ue(D.BLACK,B.GOLD),this.squares[new $(6,9).index]=new ue(D.BLACK,B.GOLD),this.squares[new $(6,1).index]=new ue(D.WHITE,B.GOLD),this.squares[new $(4,1).index]=new ue(D.WHITE,B.GOLD),this.squares[new $(3,9).index]=new ue(D.BLACK,B.SILVER),this.squares[new $(7,9).index]=new ue(D.BLACK,B.SILVER),this.squares[new $(7,1).index]=new ue(D.WHITE,B.SILVER),this.squares[new $(3,1).index]=new ue(D.WHITE,B.SILVER),this.squares[new $(2,9).index]=new ue(D.BLACK,B.KNIGHT),this.squares[new $(8,9).index]=new ue(D.BLACK,B.KNIGHT),this.squares[new $(8,1).index]=new ue(D.WHITE,B.KNIGHT),this.squares[new $(2,1).index]=new ue(D.WHITE,B.KNIGHT),this.squares[new $(1,9).index]=new ue(D.BLACK,B.LANCE),this.squares[new $(9,9).index]=new ue(D.BLACK,B.LANCE),this.squares[new $(9,1).index]=new ue(D.WHITE,B.LANCE),this.squares[new $(1,1).index]=new ue(D.WHITE,B.LANCE),this.squares[new $(1,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(2,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(3,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(4,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(5,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(6,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(7,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(8,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(9,7).index]=new ue(D.BLACK,B.PAWN),this.squares[new $(1,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(2,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(3,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(4,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(5,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(6,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(7,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(8,3).index]=new ue(D.WHITE,B.PAWN),this.squares[new $(9,3).index]=new ue(D.WHITE,B.PAWN),t){default:case"standard":return;case"handicapLance":this.squares[new $(1,1).index]=null;return;case"handicapRightLance":this.squares[new $(9,1).index]=null;return;case"handicapBishop":this.squares[new $(2,2).index]=null;return;case"handicapRook":this.squares[new $(8,2).index]=null;return;case"handicapRookLance":this.squares[new $(8,2).index]=null,this.squares[new $(1,1).index]=null;return;case"handicap2Pieces":this.squares[new $(8,2).index]=null,this.squares[new $(2,2).index]=null;return;case"handicap4Pieces":this.squares[new $(8,2).index]=null,this.squares[new $(2,2).index]=null,this.squares[new $(1,1).index]=null,this.squares[new $(9,1).index]=null;return;case"handicap6Pieces":this.squares[new $(8,2).index]=null,this.squares[new $(2,2).index]=null,this.squares[new $(1,1).index]=null,this.squares[new $(2,1).index]=null,this.squares[new $(8,1).index]=null,this.squares[new $(9,1).index]=null;return;case"handicap8Pieces":this.squares[new $(8,2).index]=null,this.squares[new $(2,2).index]=null,this.squares[new $(1,1).index]=null,this.squares[new $(2,1).index]=null,this.squares[new $(3,1).index]=null,this.squares[new $(7,1).index]=null,this.squares[new $(8,1).index]=null,this.squares[new $(9,1).index]=null;return}}get sfen(){let t="",i=0;for(let n=0;n<9;n+=1){for(let s=0;s<9;s+=1){const o=this.at($.newByXY(s,n));o?(i&&(t+=i,i=0),t+=o.sfen):i+=1}i&&(t+=i,i=0),n!==8&&(t+="/")}return t}resetBySFEN(t){if(!ar.isValidSFEN(t))return!1;this.clear();const i=t.split("/");for(let n=0;n<9;n+=1){let s=0;for(let o=0;o<i[n].length;o+=1){let r=i[n][o];r==="+"&&(o+=1,r+=i[n][o]);const a=qc(r);a?s+=a:(this.set($.newByXY(s,n),ue.newBySFEN(r)),s+=1)}}return!0}findKing(t){const i=new ue(t,B.KING);return $.all.find(n=>{const s=this.at(n);if(s&&i.equals(s))return!0})}hasPower(t,i,n){return!!T0.find(s=>{let o=0;for(let r=t.neighbor(s);r.valid&&(o+=1,!(n&&n.filled&&r.equals(n.filled)));r=r.neighbor(s)){if(n&&n.ignore&&r.equals(n.ignore))continue;const a=this.at(r);if(a){if(a.color!==i)return!1;const l=rr(s),c=of(a,l);return c===Ws.LONG||c===Ws.SHORT&&o===1}}return!1})}isChecked(t,i){const n=this.findKing(t);return n?this.hasPower(n,xt(t),{filled:i&&i.filled,ignore:i&&i.ignore}):!1}static isValidSFEN(t){const i=t.split("/");if(i.length!==9)return!1;for(let n=0;n<9;n+=1){let s=0;for(let o=0;o<i[n].length;o+=1){let r=i[n][o];r==="+"&&(o+=1,r+=i[n][o]);const a=qc(r);if(a)s+=a;else if(ue.isValidSFEN(r))s+=1;else return!1}if(s!==9)return!1}return!0}copyFrom(t){$.all.forEach(i=>{this.squares[i.index]=t.at(i)})}}function hn(e,t){return e===0?"":(e!==1?e:"")+t.sfen}class oi{constructor(){T(this,"pieces");this.pieces=new Map,this.pieces.set(B.PAWN,0),this.pieces.set(B.LANCE,0),this.pieces.set(B.KNIGHT,0),this.pieces.set(B.SILVER,0),this.pieces.set(B.GOLD,0),this.pieces.set(B.BISHOP,0),this.pieces.set(B.ROOK,0)}get counts(){return[{type:B.ROOK,count:this.count(B.ROOK)},{type:B.BISHOP,count:this.count(B.BISHOP)},{type:B.GOLD,count:this.count(B.GOLD)},{type:B.SILVER,count:this.count(B.SILVER)},{type:B.KNIGHT,count:this.count(B.KNIGHT)},{type:B.LANCE,count:this.count(B.LANCE)},{type:B.PAWN,count:this.count(B.PAWN)}]}count(t){return this.pieces.get(t)}set(t,i){this.pieces.set(t,i)}add(t,i){let n=this.pieces.get(t);return n+=i,this.pieces.set(t,n),n}reduce(t,i){let n=this.pieces.get(t);return n-=i,this.pieces.set(t,n),n}forEach(t){t(B.PAWN,this.pieces.get(B.PAWN)),t(B.LANCE,this.pieces.get(B.LANCE)),t(B.KNIGHT,this.pieces.get(B.KNIGHT)),t(B.SILVER,this.pieces.get(B.SILVER)),t(B.GOLD,this.pieces.get(B.GOLD)),t(B.BISHOP,this.pieces.get(B.BISHOP)),t(B.ROOK,this.pieces.get(B.ROOK))}get sfenBlack(){return this.formatSFEN(D.BLACK)}get sfenWhite(){return this.formatSFEN(D.WHITE)}formatSFEN(t){let i="";return i+=hn(this.count(B.ROOK),new ue(t,B.ROOK)),i+=hn(this.count(B.BISHOP),new ue(t,B.BISHOP)),i+=hn(this.count(B.GOLD),new ue(t,B.GOLD)),i+=hn(this.count(B.SILVER),new ue(t,B.SILVER)),i+=hn(this.count(B.KNIGHT),new ue(t,B.KNIGHT)),i+=hn(this.count(B.LANCE),new ue(t,B.LANCE)),i+=hn(this.count(B.PAWN),new ue(t,B.PAWN)),i===""?"-":i}static formatSFEN(t,i){const n=t.sfenBlack,s=i.sfenWhite;return n==="-"&&s==="-"?"-":s==="-"?n:n==="-"?s:n+s}static isValidSFEN(t){return t==="-"?!0:!!t.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)}static parseSFEN(t){if(t==="-")return{black:new oi,white:new oi};if(!t.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/))return null;const i=t.match(/([0-9]*[PLNSGBRplnsgbr])/g),n=new oi,s=new oi;for(let o=0;o<i.length;o+=1){const r=i[o];let a=1;r.length>=2&&(a=Number(r.substring(0,r.length-1)));const l=ue.newBySFEN(r[r.length-1]);l.color===D.BLACK?n.add(l.type,a):s.add(l.type,a)}return{black:n,white:s}}copyFrom(t){t.pieces.forEach((i,n)=>{this.pieces.set(n,i)})}}const L0={black:{pawn:{1:!0},lance:{1:!0},knight:{1:!0,2:!0}},white:{pawn:{9:!0},lance:{9:!0},knight:{9:!0,8:!0}}};function Yc(e,t,i){const n=L0[e][t];return n?n[i]:!1}function lr(e,t){return e===D.BLACK?t<=3:t>=7}function B0(e,t,i){for(let n=1;n<=9;n+=1){const s=t.at(new $(i,n));if(s&&s.type===B.PAWN&&s.color===e)return!0}return!1}class Nt{constructor(){T(this,"_board",new ar);T(this,"_color",D.BLACK);T(this,"_blackHand",new oi);T(this,"_whiteHand",new oi)}get board(){return this._board}get color(){return this._color}get blackHand(){return this._blackHand}get whiteHand(){return this._whiteHand}reset(t){switch(this._board.reset(t),this._blackHand=new oi,this._whiteHand=new oi,t){case we.STANDARD:case we.EMPTY:case we.TSUME_SHOGI:case we.TSUME_SHOGI_2KINGS:this._color=D.BLACK;break;case we.HANDICAP_LANCE:case we.HANDICAP_RIGHT_LANCE:case we.HANDICAP_BISHOP:case we.HANDICAP_ROOK:case we.HANDICAP_ROOK_LANCE:case we.HANDICAP_2PIECES:case we.HANDICAP_4PIECES:case we.HANDICAP_6PIECES:case we.HANDICAP_8PIECES:this._color=D.WHITE;break}(t===we.TSUME_SHOGI||t===we.TSUME_SHOGI_2KINGS)&&(this._whiteHand.set(B.PAWN,18),this._whiteHand.set(B.LANCE,4),this._whiteHand.set(B.KNIGHT,4),this._whiteHand.set(B.SILVER,4),this._whiteHand.set(B.GOLD,4),this._whiteHand.set(B.BISHOP,2),this._whiteHand.set(B.ROOK,2))}hand(t){return this._hand(t)}_hand(t){return t===D.BLACK?this._blackHand:this._whiteHand}get checked(){return this._board.isChecked(this.color)}createMove(t,i){let n;if(t instanceof $){const o=this._board.at(t);if(!o)return null;n=o.type}else n=t;const s=this._board.at(i);return new nt(t,i,!1,this.color,n,s?s.type:null)}createMoveByUSI(t){const i=af(t);if(!i)return null;let n=this.createMove(i.from,i.to);return n?(i.promote&&(n=n.withPromote()),n):null}isPawnDropMate(t){if(t.from instanceof $||t.pieceType!==B.PAWN)return!1;const i=t.to.neighbor(t.color===D.BLACK?$t.UP:$t.DOWN),n=this.board.at(i);return!n||n.type!==B.KING||n.color===t.color||M0(n).find(o=>{const r=i.neighbor(o);if(!r.valid)return!1;const a=this.board.at(r);return a&&a.color==n.color?!1:!this.board.hasPower(r,t.color,{filled:t.to})})?!1:!this.board.listSquaresByColor(n.color).find(o=>!o.equals(i)&&this.isMovable(o,t.to)&&!this.board.isChecked(n.color,{filled:t.to,ignore:o}))}listAttackersByPiece(t,i){return this.board.listSquaresByPiece(i).filter(n=>this.isMovable(n,t))}isValidMove(t){if(t.from instanceof $){const i=this._board.at(t.from);if(!i||i.color!==this.color||!this.isMovable(t.from,t.to))return!1;const n=this._board.at(t.to);if(n&&n.color===this.color)return!1;if(t.promote){if(!i.isPromotable()||!lr(this.color,t.from.rank)&&!lr(this.color,t.to.rank))return!1}else if(Yc(this.color,i.type,t.to.rank))return!1;if(t.pieceType!==B.KING?this._board.isChecked(this.color,{filled:t.to,ignore:t.from}):this._board.hasPower(t.to,xt(this.color),{ignore:t.from}))return!1}else if(t.promote||t.color!==this.color||this.hand(this.color).count(t.from)===0||this._board.at(t.to)||Yc(this.color,t.from,t.to.rank)||t.from===B.PAWN&&B0(this.color,this._board,t.to.file)||this._board.isChecked(this.color,{filled:t.to})||this.isPawnDropMate(t))return!1;return!0}doMove(t,i){if(!(i&&i.ignoreValidation)&&!this.isValidMove(t))return!1;if(t.from instanceof $){const n=this._board.at(t.from),s=this._board.at(t.to);this._board.remove(t.from),this._board.set(t.to,t.promote?n.promoted():n),s&&s.type!==B.KING&&this._hand(this.color).add(s.unpromoted().type,1)}else this._hand(this.color).reduce(t.from,1),this._board.set(t.to,new ue(this.color,t.from));return this._color=xt(this.color),!0}undoMove(t){if(this._color=xt(this.color),t.from instanceof $)if(this._board.set(t.from,new ue(this.color,t.pieceType)),t.capturedPieceType){const i=new ue(xt(this.color),t.capturedPieceType);this._board.set(t.to,i),i.type!==B.KING&&this._hand(this.color).reduce(i.unpromoted().type,1)}else this._board.remove(t.to);else this._hand(this.color).add(t.from,1),this._board.remove(t.to)}isValidEditing(t,i){if(t instanceof $){const n=this._board.at(t);if(!n)return!1;if(i instanceof $){if(t.equals(i))return!1}else if(n.type===B.KING)return!1}else{if(!t.color||this.hand(t.color).count(t.type)===0)return!1;if(i instanceof $){if(this._board.at(i))return!1}else if(t.color===i)return!1}return!0}edit(t){if(t.move){if(!this.isValidEditing(t.move.from,t.move.to))return!1;if(!(t.move.from instanceof $))this._hand(t.move.from.color).reduce(t.move.from.type,1),t.move.to instanceof $?this._board.set(t.move.to,t.move.from):this._hand(t.move.to).add(t.move.from.type,1);else if(t.move.to instanceof $)this._board.swap(t.move.from,t.move.to);else{const i=this._board.remove(t.move.from);this._hand(t.move.to).add(i.unpromoted().type,1)}}if(t.rotate){const i=this._board.at(t.rotate);i&&this._board.set(t.rotate,i.rotate())}return!0}get sfen(){return this.getSFEN(1)}getSFEN(t){let i=`${this._board.sfen} ${y0(this.color)} `;return i+=oi.formatSFEN(this._blackHand,this._whiteHand),i+=" "+t,i}resetBySFEN(t){if(!Nt.isValidSFEN(t))return!1;const i=t.split(" ");i[0]==="sfen"&&i.shift(),this._board.resetBySFEN(i[0]),this._color=v0(i[1]);const n=oi.parseSFEN(i[2]);return this._blackHand=n.black,this._whiteHand=n.white,!0}setColor(t){this._color=t}static isValidSFEN(t){const i=t.split(" ");return i.length===5&&i[0]==="sfen"&&i.shift(),!(i.length!==4||!ar.isValidSFEN(i[0])||!_0(i[1])||!oi.isValidSFEN(i[2])||!i[3].match(/[0-9]+/))}static newBySFEN(t){const i=new Nt;return i.resetBySFEN(t)?i:null}isMovable(t,i){const n=i.x-t.x,s=i.y-t.y,{direction:o,distance:r,ok:a}=rf(n,s);if(!a)return!1;const l=this._board.at(t);if(!l)return!1;switch(of(l,o)){default:return!1;case Ws.SHORT:return r===1;case Ws.LONG:{const c=x0[o];for(let u=t.neighbor(c.x,c.y);u.valid;u=u.neighbor(c.x,c.y)){if(u.equals(i))return!0;if(this._board.at(u))return!1}return!1}}}copyFrom(t){this._board.copyFrom(t._board),this._color=t.color,this._blackHand.copyFrom(t._blackHand),this._whiteHand.copyFrom(t._whiteHand)}clone(){const t=new Nt;return t.copyFrom(this),t}}function D0(e){const t={pawn:0,lance:0,knight:0,silver:0,gold:0,bishop:0,rook:0,king:0,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0};return $.all.forEach(i=>{const n=e.board.at(i);n&&(t[n.type]+=1)}),e.blackHand.forEach((i,n)=>{t[i]+=n}),e.whiteHand.forEach((i,n)=>{t[i]+=n}),t}function F0(e){const t=D0(e);return{pawn:18-t.pawn-t.promPawn,lance:4-t.lance-t.promLance,knight:4-t.knight-t.promKnight,silver:4-t.silver-t.promSilver,gold:4-t.gold,bishop:2-t.bishop-t.horse,rook:2-t.rook-t.dragon,king:2-t.king,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0}}const $0={"":1,"":2,"":3,"":4,"":5,"":6,"":7,"":8,"":9},H0={:1,:2,:3,:4,:5,:6,:7,:8,:9,:10,:11,:12,:13,:14,:15,:16,:17,:18},U0={1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},z0={:B.KING,:B.KING,:B.ROOK,:B.DRAGON,:B.DRAGON,:B.BISHOP,:B.HORSE,:B.GOLD,:B.SILVER,:B.PROM_SILVER,:B.PROM_SILVER,:B.KNIGHT,:B.PROM_KNIGHT,:B.PROM_KNIGHT,:B.LANCE,:B.PROM_LANCE,:B.PROM_LANCE,:B.PAWN,:B.PROM_PAWN};function lf(e){return $0[e]}function Wr(e){return H0[e]}function cr(e){return U0[e]}function Vr(e){return z0[e]}const cf=["","","","","","","","","","","","","","","","","",""],G0=["","","","","","","","",""];function W0(e){return cf[e-1]}function uf(e){return G0[e-1]}function Ul(e){return cf[e-1]}const V0={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""};function hf(e){return V0[e]}const j0={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""};function Qa(e){return j0[e]}const K0={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:""};function df(e){return K0[e]}function xn(e,t,i){let n="";switch(t.color){case D.BLACK:n+=i!=null&&i.compatible?"":"";break;case D.WHITE:n+=i!=null&&i.compatible?"":"";break}i!=null&&i.prev&&i.prev.to.equals(t.to)?n+="":(n+=uf(t.to.file),n+=Ul(t.to.rank)),n+=hf(t.pieceType);const s=new ue(t.color,t.pieceType),o=e.listAttackersByPiece(t.to,s).filter(r=>!(t.from instanceof $)||!r.equals(t.from));if(t.from instanceof $){let r=t.from.directionTo(t.to);r=t.color===D.BLACK?r:rr(r);const a=Bo(r),l=Do(r),c=o.map(g=>{const y=g.directionTo(t.to);return t.color===D.BLACK?y:rr(y)}),u=c.filter(g=>Do(g)==l).map(g=>Bo(g)),h=c.filter(g=>Bo(g)==a).map(g=>Do(g));let p=!1;if(h.length)if(t.pieceType===B.HORSE||t.pieceType===B.DRAGON)l===Qt.LEFT||l===Qt.NONE&&h[0]===Qt.RIGHT?n+="":(l===Qt.RIGHT||l===Qt.NONE&&h[0]===Qt.LEFT)&&(n+="");else switch(l){case Qt.LEFT:n+="";break;case Qt.NONE:n+="",p=!0;break;case Qt.RIGHT:n+="";break}if(!p&&(u.length||!h.length&&o.length))switch(a){case An.DOWN:n+="";break;case An.NONE:n+="";break;case An.UP:n+="";break}t.promote?n+="":t.from instanceof $&&s.isPromotable()&&(lr(t.color,t.from.rank)||lr(t.color,t.to.rank))&&(n+="")}else o.length&&(n+="");return n}function q0(e,t){let i="",n;const s=e.clone();for(const o of t)i+=`${xn(s,o,{prev:n,compatible:!0})}`,s.doMove(o,{ignoreValidation:!0}),n=o;return i}const Y0=/^[]?([][]|)(||||||||||||||||||)(|||)(|||)(|||)(\([1-9][1-9]\)|)/;function X0(e,t){const i=t.replaceAll(/[\s\u3000]/g,""),n=[];let s=0;for(let a=1;a<=i.length;a++){const l=i[a];(!l||l===""||l===""||l===""||l==="")&&(n.push(i.substring(s,a)),s=a)}const o=e.clone(),r=[];for(const a of n){const l=Y0.exec(a);if(!l)break;const c=l[1],u=Vr(l[2]),h=l[3],p=l[4],g=l[5],y=l[6];let b;if(c.startsWith(""))b=r[r.length-1].to;else{const E=lf(c[0]),w=Wr(c[1]);b=new $(E,w)}let v;if(g==="")v=u;else if(y){const E=cr(y[1]),w=cr(y[2]);v=new $(E,w)}else{const E=o.listAttackersByPiece(b,new ue(o.color,u)).filter(w=>{let P=w.directionTo(b);P=o.color===D.BLACK?P:rr(P);const A=Bo(P),O=Do(P);return!(p.indexOf("")>=0&&A!==An.DOWN||p.indexOf("")>=0&&A!==An.NONE||p.indexOf("")>=0&&A!==An.UP||h.indexOf("")>=0&&O!==Qt.RIGHT||h.indexOf("")>=0&&O!==Qt.NONE||h.indexOf("")>=0&&O!==Qt.LEFT)});if(E.length===1)v=E[0];else if(E.length===0&&o.hand(o.color).count(u)!==0)v=u;else break}let _=o.createMove(v,b);if(!_||(g===""&&(_=_.withPromote()),!o.doMove(_,{ignoreValidation:!0})))break;r.push(_)}return r}function ff(e){return gf(Math.floor(e/1e3))}function pf(e){return mf(Math.floor(e/1e3))}function gf(e){const t=Math.floor(e/3600),i=Math.floor((e-t*3600)/60),n=e%60;return t+":"+String(i).padStart(2,"0")+":"+String(n).padStart(2,"0")}function mf(e){const t=Math.floor(e/60),i=e%60;return String(t).padStart(2," ")+":"+String(i).padStart(2,"0")}var J=(e=>(e.TITLE="title",e.BLACK_NAME="blackName",e.WHITE_NAME="whiteName",e.START_DATETIME="startDatetime",e.END_DATETIME="endDatetime",e.DATE="date",e.TOURNAMENT="tournament",e.STRATEGY="strategy",e.TIME_LIMIT="timeLimit",e.TIME_SPENT="timeSpent",e.PLACE="place",e.POSTED_ON="postedOn",e.NOTE="note",e.BLACK_SHORT_NAME="blackShortName",e.WHITE_SHORT_NAME="whiteShortName",e.OPUS_NO="opusNo",e.OPUS_NAME="opusName",e.AUTHOR="author",e.PUBLISHED_BY="publishedBy",e.PUBLISHED_AT="publishedAt",e.SOURCE="source",e.LENGTH="length",e.INTEGRITY="integrity",e.CATEGORY="category",e.AWARD="award",e))(J||{});class ur{constructor(){T(this,"standard",new Map);T(this,"custom",new Map)}get standardMetadataKeys(){return this.standard.keys()}getStandardMetadata(t){return this.standard.get(t)}setStandardMetadata(t,i){i?this.standard.set(t,i):this.standard.delete(t)}get customMetadataKeys(){return this.custom.keys()}getCustomMetadata(t){return this.custom.get(t)}setCustomMetadata(t,i){i?this.custom.set(t,i):this.custom.delete(t)}}var ce=(e=>(e.START="start",e.INTERRUPT="interrupt",e.RESIGN="resign",e.IMPASS="impass",e.DRAW="draw",e.REPETITION_DRAW="repetitionDraw",e.MATE="mate",e.TIMEOUT="timeout",e.FOUL_WIN="foulWin",e.FOUL_LOSE="foulLose",e.ENTERING_OF_KING="enteringOfKing",e.WIN_BY_DEFAULT="winByDefault",e.LOSE_BY_DEFAULT="loseByDefault",e))(ce||{});class Hn{constructor(t,i,n,s,o,r,a,l){T(this,"next",null);T(this,"branch",null);T(this,"comment","");T(this,"customData");T(this,"elapsedMs",0);T(this,"totalElapsedMs",0);this.number=t,this.prev=i,this.branchIndex=n,this.activeBranch=s,this.nextColor=o,this.move=r,this.isCheck=a,this.displayText=l}get timeText(){const t=pf(this.elapsedMs),i=ff(this.totalElapsedMs);return`${t} / ${i}`}get hasBranch(){return!!this.prev&&!!this.prev.next&&!!this.prev.next.branch}get isFirstBranch(){return!this.prev||this.prev.next===this}get isLastMove(){if(!this.next)return!0;for(let t=this.next;t;t=t.branch)if(t.move instanceof nt)return!1;return!0}updateTotalElapsedMs(){this.totalElapsedMs=this.elapsedMs,this.prev&&this.prev.prev&&(this.totalElapsedMs+=this.prev.prev.totalElapsedMs)}setElapsedMs(t){this.elapsedMs=t,this.updateTotalElapsedMs();let i=this.next;const n=[];for(;i;)i.updateTotalElapsedMs(),i.branch&&n.push(i.branch),i.next?i=i.next:i=n.pop()||null}static newRootEntry(t){return new Hn(0,null,0,!0,t,"start",!1,"")}}class Tt{constructor(t){T(this,"metadata");T(this,"_initialPosition");T(this,"_position");T(this,"_first");T(this,"_current");T(this,"repetitionCounts",{});T(this,"repetitionStart",{});T(this,"onChangePosition",()=>{});this.metadata=new ur,this._initialPosition=t?t.clone():new Nt,this._position=this.initialPosition.clone(),this._first=Hn.newRootEntry(this._initialPosition.color),this._current=this._first,this.incrementRepetition()}get initialPosition(){return this._initialPosition}get position(){return this._position}get first(){return this._first}get current(){return this._current}get moves(){const t=this.movesBefore;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;t.push(i)}return t}get movesBefore(){return this._movesBefore}get _movesBefore(){const t=new Array;t.unshift(this._current);for(let i=this._current.prev;i;i=i.prev)t.unshift(i);return t}get length(){let t=this._current.number;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;t=i.number}return t}get branchBegin(){return this._current.prev?this._current.prev.next:this._current}clear(t){this.metadata=new ur,t&&(this._initialPosition=t.clone()),this._position=this.initialPosition.clone(),this._first=Hn.newRootEntry(this._initialPosition.color),this._current=this._first,this.repetitionCounts={},this.repetitionStart={},this.incrementRepetition(),this.onChangePosition()}goBack(){return this._goBack()?(this.onChangePosition(),!0):!1}_goBack(){return this._current.prev?(this._current.move instanceof nt&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=this._current.prev,!0):!1}goForward(){return this._goForward()?(this.onChangePosition(),!0):!1}_goForward(){if(this._current.next){for(this._current=this._current.next;!this._current.activeBranch;)this._current=this._current.branch;return this._current.move instanceof nt&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),!0}return!1}goto(t){for(;t<this._current.number&&this._goBack(););for(;t>this._current.number&&this._goForward(););this.onChangePosition()}resetAllBranchSelection(){this._forEach(t=>{t.activeBranch=t.isFirstBranch})}switchBranchByIndex(t){if(this.current.branchIndex===t)return!0;if(!this._current.prev)return!1;let i=!1;for(let n=this._current.prev.next;n;n=n.branch)n.branchIndex===t?(n.activeBranch=!0,this._current.move instanceof nt&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=n,this._current.move instanceof nt&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),i=!0):n.activeBranch=!1;return i&&this.onChangePosition(),i}append(t,i){const n=this.current.move instanceof nt?this.current.move:void 0,s=t instanceof nt?xn(this.position,t,{prev:n}):df(t);let o=!1;if(t instanceof nt){if(!this._position.doMove(t,i))return!1;this.incrementRepetition(),o=this.position.checked}if(this._current!==this.first&&!(this._current.move instanceof nt)&&this.goBack(),!this._current.next)return this._current.next=new Hn(this._current.number+1,this._current,0,!0,this.position.color,t,o,s),this._current=this._current.next,this._current.setElapsedMs(0),this.onChangePosition(),!0;let r;for(r=this._current.next;r;r=r.branch)r.activeBranch=!1;let a=this._current.next;for(r=this._current.next;r;r=r.branch){if(r.move instanceof nt&&t instanceof nt&&t.equals(r.move)||t===r.move)return this._current=r,this._current.activeBranch=!0,this.onChangePosition(),!0;a=r}return this._current=new Hn(this._current.number+1,this._current,a.branchIndex+1,!0,this.position.color,t,o,s),this._current.setElapsedMs(0),a.branch=this._current,this.onChangePosition(),!0}swapWithNextBranch(){return this._current.branch?Tt.swapWithPreviousBranch(this._current.branch):!1}swapWithPreviousBranch(){return Tt.swapWithPreviousBranch(this._current)}static swapWithPreviousBranch(t){const i=t.prev;if(!i||!i.next||i.next==t)return!1;if(i.next.branch===t){const n=i.next;return n.branch=t.branch,t.branch=n,i.next=t,[t.branchIndex,n.branchIndex]=[n.branchIndex,t.branchIndex],!0}for(let n=i.next;n.branch;n=n.branch)if(n.branch.branch===t){const s=n.branch;return s.branch=t.branch,t.branch=s,n.branch=t,[t.branchIndex,s.branchIndex]=[s.branchIndex,t.branchIndex],!0}return!1}removeCurrentMove(){const t=this._current;if(!this.goBack()){this._current.next=null;return}if(this._current.next===t)this._current.next=t.branch;else for(let n=this._current.next;n;n=n.branch)if(n.branch===t){n.branch=t.branch;break}let i=0;for(let n=this._current.next;n;n=n.branch)n.branchIndex=i,i+=1;this._current.next&&(this._current.next.activeBranch=!0),this.onChangePosition()}removeNextMove(){this._current.next=null}incrementRepetition(){const t=this.position.sfen;this.repetitionCounts[t]?this.repetitionCounts[t]+=1:(this.repetitionCounts[t]=1,this.repetitionStart[t]=this.current.number)}decrementRepetition(){const t=this.position.sfen;this.repetitionCounts[t]-=1,this.repetitionCounts[t]===0&&(delete this.repetitionCounts[t],delete this.repetitionStart[t])}get repetition(){return this.repetitionCounts[this.position.sfen]>=4}get perpetualCheck(){if(!this.repetition)return null;const t=this.position.sfen,i=this.repetitionStart[t];let n=!0,s=!0,o=this.position.color;for(let r=this.current;r.number>=i;r=r.prev)o=xt(o),!r.isCheck&&(o===D.BLACK?n=!1:s=!1);return n?D.BLACK:s?D.WHITE:null}get usi(){let t="position sfen "+this.initialPosition.sfen+" moves";return this.movesBefore.forEach(i=>{i.move instanceof nt&&(t+=" "+i.move.usi)}),t}get usiAll(){let t=this.usi;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;i.move instanceof nt&&(t+=" "+i.move.usi)}return t}get sfen(){return this.position.getSFEN(this._current.number+1)}forEach(t){this._forEach(t)}_forEach(t){let i=this._first;const n=[];for(;i;)t(i),i.branch&&n.push(i.branch),i.next?i=i.next:i=n.pop()||null}on(t,i){switch(t){case"changePosition":this.onChangePosition=i;break}}static newByUSI(t){const i="position startpos ",n="position sfen ",s="startpos ",o="sfen ",r="moves ";return t.startsWith(i)?Tt.newByUSIFromMoves(new Nt,t.slice(i.length)):t.startsWith(n)?Tt.newByUSIFromSFEN(t.slice(n.length)):t.startsWith(s)?Tt.newByUSIFromMoves(new Nt,t.slice(s.length)):t.startsWith(o)?Tt.newByUSIFromSFEN(t.slice(o.length)):t.startsWith(r)?Tt.newByUSIFromMoves(new Nt,t):new bs(t)}static newByUSIFromSFEN(t){const i=t.split(" ");if(i.length<4)return new bs(t);const n=Nt.newBySFEN(i.slice(0,4).join(" "));return n?Tt.newByUSIFromMoves(n,i.slice(4).join(" ")):new bs(t)}static newByUSIFromMoves(t,i){const n=new Tt(t);if(i.length===0)return n;const s=i.split(" ");if(s[0]!=="moves")return new bs(i);for(let o=1;o<s.length;o++){const r=af(s[o]);if(!r)break;let a=n.position.createMove(r.from,r.to);if(!a)return new Gs(s[o]);r.promote&&(a=a.withPromote()),n.append(a,{ignoreValidation:!0})}return n}}const J0={:J.BLACK_NAME,:J.WHITE_NAME,:J.START_DATETIME,:J.END_DATETIME,:J.DATE,:J.TOURNAMENT,:J.STRATEGY,:J.TITLE,:J.TIME_LIMIT,:J.TIME_SPENT,:J.PLACE,:J.POSTED_ON,:J.NOTE,:J.BLACK_SHORT_NAME,:J.WHITE_SHORT_NAME,:J.OPUS_NO,:J.OPUS_NAME,:J.AUTHOR,:J.PUBLISHED_BY,:J.PUBLISHED_AT,:J.SOURCE,:J.LENGTH,:J.INTEGRITY,:J.CATEGORY,:J.AWARD},Q0={blackName:"",whiteName:"",startDatetime:"",endDatetime:"",date:"",tournament:"",strategy:"",title:"",timeLimit:"",timeSpent:"",place:"",postedOn:"",note:"",blackShortName:"",whiteShortName:"",opusNo:"",opusName:"",author:"",publishedBy:"",publishedAt:"",source:"",length:"",integrity:"",category:"",award:""},Xc=[{prefix:/^#/,type:0,removePrefix:!1,isPosition:!1},{prefix:/^/,type:2,removePrefix:!0,isPosition:!0},{prefix:/^/,type:3,removePrefix:!0,isPosition:!0},{prefix:/^/,type:4,removePrefix:!0,isPosition:!0},{prefix:/^\|/,type:5,removePrefix:!1,isPosition:!0},{prefix:/^/,type:6,removePrefix:!1,isPosition:!0},{prefix:/^/,type:7,removePrefix:!1,isPosition:!0},{prefix:/^ *[0-9]+ +/,type:8,removePrefix:!1,isPosition:!1},{prefix:/^\*/,type:9,removePrefix:!0,isPosition:!1}];function Z0(e){for(let i=0;i<Xc.length;i++){const n=Xc[i],s=e.match(n.prefix);if(s){const o=n.removePrefix?s[0].length:0;return{type:n.type,data:e.substring(o),isPosition:n.isPosition,metadataKey:""}}}const t=e.match(/^[^ ]+/);if(t){const i=t[0];return{type:1,data:e.substring(i.length),isPosition:!1,metadataKey:i.substring(0,i.length-1)}}return{type:10,data:e,isPosition:!1,metadataKey:""}}function eb(e,t){switch(t.trim()){case"":e.reset(we.STANDARD);return;case"":e.reset(we.HANDICAP_LANCE);return;case"":e.reset(we.HANDICAP_RIGHT_LANCE);return;case"":e.reset(we.HANDICAP_BISHOP);return;case"":e.reset(we.HANDICAP_ROOK);return;case"":e.reset(we.HANDICAP_ROOK_LANCE);return;case"":e.reset(we.HANDICAP_2PIECES);return;case"":e.reset(we.HANDICAP_4PIECES);return;case"":e.reset(we.HANDICAP_6PIECES);return;case"":e.reset(we.HANDICAP_8PIECES);return;case"":e.reset(we.EMPTY);return}return new Zd(t)}const tb={:ce.INTERRUPT,:ce.RESIGN,:ce.IMPASS,:ce.REPETITION_DRAW,:ce.MATE,:ce.TIMEOUT,:ce.FOUL_WIN,:ce.FOUL_LOSE,:ce.ENTERING_OF_KING,:ce.WIN_BY_DEFAULT,:ce.LOSE_BY_DEFAULT},ib=/^ *([0-9]+) +[]?([][]|\u3000*)(||||||||||||||||||)\u3000*(?)(|\([1-9][1-9]\)) *(.*)$/,nb=/\( *([0-9]+):([0-9]+)\/[0-9: ]*\)/,sb=/^ *([0-9]+) +(||||||||||) *(.*)$/;function ob(e,t){if(t.length<21)return new Ja(t);const i=t[20],n=Wr(i);if(!n)return new Ja(t);for(let s=0;s<9;s+=1){const o=9-s,r=new $(o,n),a=s*2+1,l=t[a+1],c=Vr(l);if(!c){e.remove(r);continue}const u=t[a]!=="v"?D.BLACK:D.WHITE;e.set(r,new ue(u,c))}}function Jc(e,t){const i=t.split(/[ ]/);for(const n of i){if(!n||n==="")continue;const s=n[0],o=n.substring(1),r=Vr(s),a=Wr(o)||1;if(!r)return new ef(n);e.add(r,a)}}function Qc(e,t){const i=nb.exec(t);if(i){const n=i[1],s=i[2],o=Number.parseInt(n)*60+Number.parseInt(s);e.current.setElapsedMs(o*1e3)}}function rb(e,t){let i=sb.exec(t);if(i){const p=Number(i[1]),g=tb[i[2]],y=i[3];e.goto(p-1),e.append(g,{ignoreValidation:!0}),Qc(e,y);return}if(i=ib.exec(t),!i)return new Gs(t);const n=Number(i[1]),s=i[2],o=i[3],r=i[4],a=i[5],l=i[6];if(n===0)return new Jd(t);e.goto(n-1);let c,u;if(s.startsWith("")){if(!(e.current.move instanceof nt))return new Qd(t);c=e.current.move.to}else{const p=lf(s[0]),g=Wr(s[1]);c=new $(p,g)}if(a==="")u=Vr(o);else{const p=cr(a[1]),g=cr(a[2]);u=new $(p,g)}let h=e.position.createMove(u,c);if(!h)return new Gs(t);r===""&&(h=h.withPromote()),e.append(h,{ignoreValidation:!0}),Qc(e,l)}function Zc(e){const t=new ur,i=new Tt,n=e.split(/\r?\n/),s=new Nt;let o="",r=!1;for(const a of n){if(a==="")continue;const l=Z0(a);if(r&&l.isPosition)return new Hl(a);let c;switch(l.type){case 1:{const u=J0[l.metadataKey];u?t.setStandardMetadata(u,l.data):t.setCustomMetadata(l.metadataKey,l.data);break}case 2:c=eb(s,l.data);break;case 3:c=Jc(s.blackHand,l.data);break;case 4:c=Jc(s.whiteHand,l.data);break;case 5:c=ob(s.board,l.data);break;case 6:s.setColor(D.BLACK);break;case 7:s.setColor(D.WHITE);break;case 8:r||(i.clear(s),i.first.comment=o,r=!0),c=rb(i,l.data);break;case 9:r?i.current.comment=sr(i.current.comment,l.data):o=sr(o,l.data);break}if(c)return c}return r||(i.clear(s),i.first.comment=o),i.goto(0),i.resetAllBranchSelection(),i.metadata=t,i}const ab={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:""};function lb(e,t){let i="";const n=t.returnCode?t.returnCode:`
`;for(const s of e.standardMetadataKeys)i+=Q0[s]+""+e.getStandardMetadata(s)+n;for(const s of e.customMetadataKeys)i+=s+""+e.getCustomMetadata(s)+n;return i}function cb(e,t){let i="";const n=t.returnCode?t.returnCode:`
`;i+=""+eu(e.whiteHand)+n,i+="          "+n,i+="+---------------------------+"+n;for(let s=0;s<9;s++){i+="|";for(let o=0;o<9;o++){const r=$.newByXY(o,s),a=e.board.at(r);a?a.color===D.BLACK?i+=" "+Qa(a.type):i+="v"+Qa(a.type):i+=" "}i+="|"+Ul(s+1)+n}return i+="+---------------------------+"+n,i+=""+eu(e.blackHand)+n,e.color===D.BLACK?i+=""+n:i+=""+n,i}function ub(e){let t="";return t+=uf(e.to.file),t+=Ul(e.to.rank),t+=hf(e.pieceType),e.promote&&(t+=""),e.from instanceof $?t+="("+e.from.file+e.from.rank+")":t+="",t}function eu(e){let t="";return e.forEach((i,n)=>{n>=1&&(t+=Qa(i),n>=2&&(t+=W0(n)),t+="")}),t}function bf(e,t){let i="";const n=t.returnCode?t.returnCode:`
`;return i+="# KIF Generated by Electron Shogi"+n,i+=lb(e.metadata,t),i+=cb(e.initialPosition,t),i+="---------------"+n,e.forEach(s=>{if(s.number!==0){s.isFirstBranch||(i+=n,i+=""+s.number+""+n),i+=s.number+" ",s.move instanceof nt?i+=ub(s.move):i+=ab[s.move];const o=pf(s.elapsedMs),r=ff(s.totalElapsedMs);i+=` (${o}/${r})`,s.isFirstBranch&&s.hasBranch&&(i+="+"),i+=n}if(s.comment.length!==0){const o=s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment;i+="*"+o.replaceAll(`
`,n+"*")+n}}),i}const fo=[{pattern:/^V/,type:0,sectionType:0},{pattern:/^'\*(.+)$/,type:1,sectionType:2},{pattern:/^'(.+)$/,type:2,sectionType:2},{pattern:/^N\+(.+)$/,type:3,sectionType:0},{pattern:/^N-(.+)$/,type:4,sectionType:0},{pattern:/^\$([^:]+):(.+)$/,type:5,sectionType:0},{pattern:/^PI([1-9]{2}[A-Z]{2})*$/,type:6,sectionType:0},{pattern:/^P[1-9]( \* |[-+][A-Z][A-Z]){9}$/,type:7,sectionType:0},{pattern:/^P[-+]([0-9]{2}[A-Z]{2})*/,type:8,sectionType:0},{pattern:/^[-+]$/,type:9,sectionType:0},{pattern:/^[-+][0-9]{4}[A-Z]{2}/,type:10,sectionType:1},{pattern:/^%[-+A-Z_]+/,type:11,sectionType:1},{pattern:/^T([0-9]+)/,type:12,sectionType:1}];function hb(e){const t=[],i=e.match(/^['N$]/)?[e]:e.split(",");for(const n of i)for(let s=0;s<fo.length;s++){const o=fo[s].pattern.exec(n);if(o){t.push({type:fo[s].type,line:n,args:o.slice(1),sectionType:fo[s].sectionType});break}}return t}const db={EVENT:J.TITLE,SITE:J.PLACE,START_TIME:J.START_DATETIME,END_TIME:J.END_DATETIME,TIME_LIMIT:J.TIME_LIMIT,OPENING:J.STRATEGY},zl={FU:B.PAWN,KY:B.LANCE,KE:B.KNIGHT,GI:B.SILVER,KI:B.GOLD,KA:B.BISHOP,HI:B.ROOK,OU:B.KING,TO:B.PROM_PAWN,NY:B.PROM_LANCE,NK:B.PROM_KNIGHT,NG:B.PROM_SILVER,UM:B.HORSE,RY:B.DRAGON};function fb(e,t){t.reset(we.STANDARD);for(let i=2;i+4<=e.length;i+=4){const n=Number(e[i]),s=Number(e[i+1]);t.board.remove(new $(n,s))}}function pb(e,t){const i=Number(e[1]);for(let n=0;n<9;n+=1){const s=9-n,o=n*3+2,r=e.slice(o,o+3);if(r[0]===" ")continue;const a=r[0]==="+"?D.BLACK:D.WHITE,l=zl[r.slice(1)];if(!l)return new Gr(r);t.board.set(new $(s,i),new ue(a,l))}}function gb(e,t){const i=e[1]==="+"?D.BLACK:D.WHITE;for(let n=2;n+4<=e.length;n+=4){const s=e.slice(n,n+4);if(s==="00AL"){const l=F0(t);i===D.BLACK?t.blackHand.forEach(c=>{t.blackHand.add(c,l[c])}):t.whiteHand.forEach(c=>{t.whiteHand.add(c,l[c])});return}const o=Number(s[0]),r=Number(s[1]),a=zl[s.slice(2)];if(!a)return new Gr(s);o!==0&&r!==0?t.board.set(new $(o,r),new ue(i,a)):i===D.BLACK?t.blackHand.add(a,1):t.whiteHand.add(a,1)}}function yf(e,t){if((e[0]==="+"?D.BLACK:D.WHITE)!=t.color)return new Xd(e);const n=Number(e[1]),s=Number(e[2]),o=Number(e[3]),r=Number(e[4]),a=zl[e.slice(5,7)];if(!a)return new Gr(e);const l=n===0&&s===0?a:new $(n,s),c=new $(o,r);let u=t.createMove(l,c);if(!u)return new Gs(e);if(l instanceof $){const h=t.board.at(l);if(!h)return new Xa(e);if(h.type!==a)if(h.promoted().type===a)u=u.withPromote();else return new Xa(e)}return u}function mb(e){switch(e){case"%CHUDAN":return ce.INTERRUPT;case"%TORYO":return ce.RESIGN;case"%JISHOGI":return ce.IMPASS;case"%HIKIWAKE":return ce.DRAW;case"%SENNICHITE":return ce.REPETITION_DRAW;case"%TSUMI":return ce.MATE;case"%TIME_UP":return ce.TIMEOUT;case"%ILLEGAL_MOVE":return ce.FOUL_LOSE;case"%KACHI":return ce.ENTERING_OF_KING}}function bb(e,t){return yf(t,e)}function tu(e){const t=new ur,i=new Tt,n=new Nt;n.reset(we.EMPTY);let s="",o=!1;const r=e.replace(/\r?\n\/(\r?\n[\s\S]*)?$/,"").split(/\r?\n/);for(const a of r)for(const l of hb(a)){if(l.sectionType===0&&o||l.sectionType===1&&!o)return new Hl(l.line);switch(l.type){case 0:break;case 1:o?i.current.comment=sr(i.current.comment,l.args[0]):s=sr(s,l.args[0]);break;case 2:break;case 3:t.setStandardMetadata(J.BLACK_NAME,l.args[0]);break;case 4:t.setStandardMetadata(J.WHITE_NAME,l.args[0]);break;case 5:{const c=db[l.args[0]];c?t.setStandardMetadata(c,l.args[1]):t.setCustomMetadata(l.args[0],l.args[1]);break}case 6:fb(l.line,n);break;case 7:{const c=pb(l.line,n);if(c)return c;break}case 8:{const c=gb(l.line,n);if(c)return c;break}case 9:l.line[0]==="+"?n.setColor(D.BLACK):n.setColor(D.WHITE),i.clear(n),i.first.comment=s,o=!0;break;case 10:{const c=yf(l.line,i.position);if(c instanceof Error)return c;i.append(c,{ignoreValidation:!0});break}case 11:{const c=mb(l.line);c&&i.append(c,{ignoreValidation:!0});break}case 12:i.current.setElapsedMs(Number(l.args[0])*1e3);break}}return o||(i.clear(n),i.first.comment=s),i.goto(0),i.resetAllBranchSelection(),i.metadata=t,i}function yb(e,t){let i="";const n=t.returnCode?t.returnCode:`
`,s=e.getStandardMetadata(J.BLACK_NAME)||e.getStandardMetadata(J.BLACK_SHORT_NAME);s&&(i+="N+"+s+n);const o=e.getStandardMetadata(J.WHITE_NAME)||e.getStandardMetadata(J.WHITE_SHORT_NAME);o&&(i+="N-"+o+n);const r=e.getStandardMetadata(J.TOURNAMENT)||e.getStandardMetadata(J.TITLE)||e.getStandardMetadata(J.OPUS_NAME)||e.getStandardMetadata(J.PUBLISHED_BY);r&&(i+="$EVENT:"+r+n);const a=e.getStandardMetadata(J.PLACE);a&&(i+="$SITE:"+a+n);const l=e.getStandardMetadata(J.START_DATETIME)||e.getStandardMetadata(J.DATE);l&&(i+="$START_TIME:"+l.slice(10)+n);const c=e.getStandardMetadata(J.DATE);c&&(i+="$END_TIME:"+c.slice(10)+n);const u=e.getStandardMetadata(J.STRATEGY);return u&&(i+="$OPENING:"+u+n),i}const hr={king:"OU",rook:"HI",dragon:"RY",bishop:"KA",horse:"UM",gold:"KI",silver:"GI",promSilver:"NG",knight:"KE",promKnight:"NK",lance:"KY",promLance:"NY",pawn:"FU",promPawn:"TO"};function iu(e){let t="";return e.forEach((i,n)=>{for(let s=0;s<n;s++)t+="00"+hr[i]}),t}function _b(e,t){let i="";const n=t.returnCode?t.returnCode:`
`;for(let s=1;s<=9;s+=1){i+="P"+s;for(let o=9;o>=1;o-=1){const r=e.board.at(new $(o,s));r?r.color===D.BLACK?i+="+"+hr[r.type]:i+="-"+hr[r.type]:i+=" * "}i+=n}return i+="P+"+iu(e.blackHand)+n,i+="P-"+iu(e.whiteHand)+n,i+=(e.color===D.BLACK?"+":"-")+n,i}function nu(e){return e instanceof $?`${e.file}${e.rank}`:"00"}function _f(e){return(e.color===D.BLACK?"+":"-")+nu(e.from)+nu(e.to)+hr[e.promote?E0(e.pieceType):e.pieceType]}function vb(e){switch(e){case ce.INTERRUPT:return"%CHUDAN";case ce.RESIGN:return"%TORYO";case ce.IMPASS:return"%JISHOGI";case ce.DRAW:return"%HIKIWAKE";case ce.REPETITION_DRAW:return"%SENNICHITE";case ce.MATE:return"%TSUMI";case ce.TIMEOUT:return"%TIME_UP";case ce.FOUL_LOSE:return"%ILLEGAL_MOVE";case ce.ENTERING_OF_KING:return"%KACHI"}}function su(e){return _f(e)}function vf(e,t){let i="";const n=t.returnCode?t.returnCode:`
`;return i+="' CSA Generated by Electron Shogi"+n,i+="V2.2"+n,i+=yb(e.metadata,t),i+=_b(e.initialPosition,t),e.moves.forEach(s=>{if(s.number===0)return;let o;s.move instanceof nt?o=_f(s.move):o=vb(s.move),o&&(i+=o+n,i+="T"+Math.floor(s.elapsedMs/1e3)+n),s.comment&&(s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment).split(`
`).forEach(a=>{i+="'*"+a+n})}),i}var Un=(e=>(e[e.USI=0]="USI",e[e.SFEN=1]="SFEN",e[e.KIF=2]="KIF",e[e.CSA=3]="CSA",e))(Un||{});function Sb(e){if(e.startsWith("position sfen ")||e.startsWith("position startpos ")||e.startsWith("sfen ")||e.startsWith("startpos ")||e.startsWith("moves "))return 0;if(Nt.isValidSFEN(e))return 1;const t=/(^|\n)[#0-9]/g,i=/(^|,|\n)[-+$%'VNPT]/g,n=e.match(t),s=e.match(i),o=n?n.length:0,r=s?s.length:0;return o>=r?2:3}function ou(e){return e instanceof Gr?new Error(`${G.invalidPieceName}: ${e.data}`):e instanceof Xd?new Error(`${G.invalidTurn}: ${e.data}`):e instanceof Gs?new Error(`${G.invalidMove}: ${e.data}`):e instanceof Jd?new Error(`${G.invalidMoveNumber}: ${e.data}`):e instanceof Qd?new Error(`${G.invalidDestination}: ${e.data}`):e instanceof Xa?new Error(`${G.pieceNotExists}: ${e.data}`):e instanceof Hl?new Error(`${G.invalidLine}: ${e.data}`):e instanceof Zd?new Error(`${G.invalidHandicap}: ${e.data}`):e instanceof Ja?new Error(`${G.invalidBoard}: ${e.data}`):e instanceof ef?new Error(`${G.invalidHandPiece}: ${e.data}`):e instanceof bs?new Error(`${G.invalidUSI}: ${e.data}`):e}function wb(e){switch(e){case J.BLACK_NAME:return G.sente;case J.WHITE_NAME:return G.gote;case J.START_DATETIME:return G.startDateTime;case J.END_DATETIME:return G.endDateTime;case J.DATE:return G.gameDate;case J.TOURNAMENT:return G.tournament;case J.STRATEGY:return G.strategy;case J.TITLE:return G.gameTitle;case J.TIME_LIMIT:return G.timeLimit;case J.TIME_SPENT:return G.elapsedTime;case J.PLACE:return G.place;case J.POSTED_ON:return G.postedOn;case J.NOTE:return G.note;case J.BLACK_SHORT_NAME:return G.senteShortName;case J.WHITE_SHORT_NAME:return G.goteShortName;case J.OPUS_NO:return G.opusNo;case J.OPUS_NAME:return G.opusName;case J.AUTHOR:return G.author;case J.PUBLISHED_BY:return G.publishedBy;case J.PUBLISHED_AT:return G.publishedOn;case J.SOURCE:return G.source;case J.LENGTH:return G.numberOfMoves;case J.INTEGRITY:return G.integrity;case J.CATEGORY:return G.recordCategory;case J.AWARD:return G.award}}function Eb(e){p0(e),b0(e)}class bt{constructor(t,i){this.width=t,this.height=i}add(t){return new bt(this.width+t.width,this.height+t.height)}reduce(t){return new bt(this.width-t.width,this.height-t.height)}}class Ib{constructor(t,i,n,s){T(this,"x");T(this,"y");T(this,"width");T(this,"height");if(i&&n&&s)this.x=t,this.y=i,this.width=n,this.height=s;else{const o=JSON.parse(t);this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height}}get json(){return JSON.stringify({x:this.x,y:this.y,width:this.width,height:this.height})}}var gt=(e=>(e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e))(gt||{}),Gl=(e=>(e.STANDARD="standard",e.CHERRY_BLOSSOM="cherry-blossom",e.AUTUMN="autumn",e.SNOW="snow",e.DARK="dark",e))(Gl||{}),En=(e=>(e.HITOMOJI="hitomoji",e.HITOMOJI_DARK="hitomojiDark",e.HITOMOJI_GOTHIC="hitomojiGothic",e.HITOMOJI_GOTHIC_DARK="hitomojiGothicDark",e))(En||{}),Ue=(e=>(e.LIGHT="light",e.WARM="warm",e.RESIN="resin",e.RESIN2="resin2",e.RESIN3="resin3",e.DARK="dark",e.GREEN="green",e.CHERRY_BLOSSOM="cherry-blossom",e))(Ue||{}),Ts=(e=>(e.NONE="none",e.STANDARD="standard",e))(Ts||{}),dr=(e=>(e.SINGLE="single",e.DOUBLE="double",e))(dr||{}),Ht=(e=>(e.RECORD_INFO="recordInfo",e.COMMENT="comment",e.SEARCH="search",e.PV="pv",e.CHART="chart",e.PERCENTAGE_CHART="percentageChart",e.INVISIBLE="invisible",e))(Ht||{}),Wl=(e=>(e.BLACK="black",e.EACH="each",e))(Wl||{}),Za=(e=>(e.ALL="all",e.ONLY_USER="onlyUser",e))(Za||{}),Sf=(e=>(e.BOOK="book",e.GAME="game",e))(Sf||{});function Pb(e,t){const i={...e,...t};switch(i.tabPaneType){case"double":switch(i.tab){case"comment":i.tab="recordInfo";break;case"chart":case"percentageChart":i.tab="pv";break}break}return e.topPaneHeightPercentage!==0&&e.topPaneHeightPercentage!==100&&(i.topPanePreviousHeightPercentage=e.topPaneHeightPercentage),kb(i)||i}function el(e){return{language:Mn.JA,thema:"standard",pieceImage:"hitomoji",boardImage:"resin2",boardLabelType:"standard",pieceVolume:30,clockVolume:30,clockPitch:500,clockSoundTarget:"onlyUser",boardFlipping:!1,tabPaneType:"double",tab:"recordInfo",tab2:"comment",topPaneHeightPercentage:60,topPanePreviousHeightPercentage:60,bottomLeftPaneWidthPercentage:60,returnCode:(e==null?void 0:e.returnCode)||`\r
`,autoSaveDirectory:(e==null?void 0:e.autoSaveDirectory)||"",translateEngineOptionName:!0,engineTimeoutSeconds:10,evaluationViewFrom:"each",coefficientInSigmoid:600,badMoveLevelThreshold1:5,badMoveLevelThreshold2:10,badMoveLevelThreshold3:20,badMoveLevelThreshold4:50,showElapsedTimeInRecordView:!0,showCommentInRecordView:!0,enableAppLog:!1,enableUSILog:!1,enableCSALog:!1,logLevel:gt.INFO,positionImageStyle:"book",positionImageSize:500,positionImageHeader:""}}function kb(e){if(e.pieceVolume<0||e.pieceVolume>100)return new Error("0%100%");if(e.clockVolume<0||e.clockVolume>100)return new Error("0%100%");if(e.clockPitch<220||e.clockPitch>880)return new Error("220Hz880Hz");if(e.engineTimeoutSeconds<1)return new Error(" 1 ");if(e.engineTimeoutSeconds>300)return new Error(" 300 ");if(e.coefficientInSigmoid<=0)return new Error("0");if(e.badMoveLevelThreshold1<1||e.badMoveLevelThreshold1>100)return new Error("1%100%");if(e.badMoveLevelThreshold2<1||e.badMoveLevelThreshold2>100)return new Error("1%100%");if(e.badMoveLevelThreshold3<1||e.badMoveLevelThreshold3>100)return new Error("1%100%");if(e.badMoveLevelThreshold4<1||e.badMoveLevelThreshold4>100)return new Error("1%100%");if(e.badMoveLevelThreshold1>=e.badMoveLevelThreshold2)return new Error("");if(e.badMoveLevelThreshold2>=e.badMoveLevelThreshold3)return new Error("");if(e.badMoveLevelThreshold3>=e.badMoveLevelThreshold4)return new Error("")}const ru={};function ys(e){if(ru[e])return;const t=document.createElement("img");t.src=e,ru[e]=t}const le={frame:{width:1471,height:959},board:{x:296.5,y:0,width:878,height:960,squreWidth:94.8,squreHeight:104,leftSquarePadding:12,topSquarePadding:12.2,leftPiecePadding:17.5,topPiecePadding:18.5,highlight:{selected:{"background-color":"#0088ff",opacity:"0.8"},lastMoveTo:{"background-color":"#44cc44",opacity:"0.8"},lastMoveFrom:{"background-color":"#44cc44",opacity:"0.4"}}},label:{fontSize:24},piece:{width:88,height:93},hand:{black:{x:1184,y:600},white:{x:0,y:0},width:288,height:360,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"}}},turn:{black:{x:1184,y:425},white:{x:0,y:492},width:288,height:45,fontSize:32},playerName:{black:{x:1184,y:480},white:{x:0,y:370},width:288,height:45,fontSize:25},clock:{black:{x:1184,y:535},white:{x:0,y:425},width:288,height:55,fontSize:40},control:{left:{x:0,y:547,width:288,height:412,fontSize:26},right:{x:1184,y:0,width:288,height:412,fontSize:26}}},au={[En.HITOMOJI]:{black:{pawn:"./piece/hitomoji/black_pawn.png",lance:"./piece/hitomoji/black_lance.png",knight:"./piece/hitomoji/black_knight.png",silver:"./piece/hitomoji/black_silver.png",gold:"./piece/hitomoji/black_gold.png",bishop:"./piece/hitomoji/black_bishop.png",rook:"./piece/hitomoji/black_rook.png",king:"./piece/hitomoji/black_king.png",king2:"./piece/hitomoji/black_king2.png",promPawn:"./piece/hitomoji/black_prom_pawn.png",promLance:"./piece/hitomoji/black_prom_lance.png",promKnight:"./piece/hitomoji/black_prom_knight.png",promSilver:"./piece/hitomoji/black_prom_silver.png",horse:"./piece/hitomoji/black_horse.png",dragon:"./piece/hitomoji/black_dragon.png"},white:{pawn:"./piece/hitomoji/white_pawn.png",lance:"./piece/hitomoji/white_lance.png",knight:"./piece/hitomoji/white_knight.png",silver:"./piece/hitomoji/white_silver.png",gold:"./piece/hitomoji/white_gold.png",bishop:"./piece/hitomoji/white_bishop.png",rook:"./piece/hitomoji/white_rook.png",king:"./piece/hitomoji/white_king.png",king2:"./piece/hitomoji/white_king2.png",promPawn:"./piece/hitomoji/white_prom_pawn.png",promLance:"./piece/hitomoji/white_prom_lance.png",promKnight:"./piece/hitomoji/white_prom_knight.png",promSilver:"./piece/hitomoji/white_prom_silver.png",horse:"./piece/hitomoji/white_horse.png",dragon:"./piece/hitomoji/white_dragon.png"}},[En.HITOMOJI_DARK]:{black:{pawn:"./piece/hitomoji_dark/black_pawn.png",lance:"./piece/hitomoji_dark/black_lance.png",knight:"./piece/hitomoji_dark/black_knight.png",silver:"./piece/hitomoji_dark/black_silver.png",gold:"./piece/hitomoji_dark/black_gold.png",bishop:"./piece/hitomoji_dark/black_bishop.png",rook:"./piece/hitomoji_dark/black_rook.png",king:"./piece/hitomoji_dark/black_king.png",king2:"./piece/hitomoji_dark/black_king2.png",promPawn:"./piece/hitomoji_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_dark/black_prom_silver.png",horse:"./piece/hitomoji_dark/black_horse.png",dragon:"./piece/hitomoji_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_dark/white_pawn.png",lance:"./piece/hitomoji_dark/white_lance.png",knight:"./piece/hitomoji_dark/white_knight.png",silver:"./piece/hitomoji_dark/white_silver.png",gold:"./piece/hitomoji_dark/white_gold.png",bishop:"./piece/hitomoji_dark/white_bishop.png",rook:"./piece/hitomoji_dark/white_rook.png",king:"./piece/hitomoji_dark/white_king.png",king2:"./piece/hitomoji_dark/white_king2.png",promPawn:"./piece/hitomoji_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_dark/white_prom_silver.png",horse:"./piece/hitomoji_dark/white_horse.png",dragon:"./piece/hitomoji_dark/white_dragon.png"}},[En.HITOMOJI_GOTHIC]:{black:{pawn:"./piece/hitomoji_gothic/black_pawn.png",lance:"./piece/hitomoji_gothic/black_lance.png",knight:"./piece/hitomoji_gothic/black_knight.png",silver:"./piece/hitomoji_gothic/black_silver.png",gold:"./piece/hitomoji_gothic/black_gold.png",bishop:"./piece/hitomoji_gothic/black_bishop.png",rook:"./piece/hitomoji_gothic/black_rook.png",king:"./piece/hitomoji_gothic/black_king.png",king2:"./piece/hitomoji_gothic/black_king2.png",promPawn:"./piece/hitomoji_gothic/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic/black_prom_silver.png",horse:"./piece/hitomoji_gothic/black_horse.png",dragon:"./piece/hitomoji_gothic/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic/white_pawn.png",lance:"./piece/hitomoji_gothic/white_lance.png",knight:"./piece/hitomoji_gothic/white_knight.png",silver:"./piece/hitomoji_gothic/white_silver.png",gold:"./piece/hitomoji_gothic/white_gold.png",bishop:"./piece/hitomoji_gothic/white_bishop.png",rook:"./piece/hitomoji_gothic/white_rook.png",king:"./piece/hitomoji_gothic/white_king.png",king2:"./piece/hitomoji_gothic/white_king2.png",promPawn:"./piece/hitomoji_gothic/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic/white_prom_silver.png",horse:"./piece/hitomoji_gothic/white_horse.png",dragon:"./piece/hitomoji_gothic/white_dragon.png"}},[En.HITOMOJI_GOTHIC_DARK]:{black:{pawn:"./piece/hitomoji_gothic_dark/black_pawn.png",lance:"./piece/hitomoji_gothic_dark/black_lance.png",knight:"./piece/hitomoji_gothic_dark/black_knight.png",silver:"./piece/hitomoji_gothic_dark/black_silver.png",gold:"./piece/hitomoji_gothic_dark/black_gold.png",bishop:"./piece/hitomoji_gothic_dark/black_bishop.png",rook:"./piece/hitomoji_gothic_dark/black_rook.png",king:"./piece/hitomoji_gothic_dark/black_king.png",king2:"./piece/hitomoji_gothic_dark/black_king2.png",promPawn:"./piece/hitomoji_gothic_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/black_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/black_horse.png",dragon:"./piece/hitomoji_gothic_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic_dark/white_pawn.png",lance:"./piece/hitomoji_gothic_dark/white_lance.png",knight:"./piece/hitomoji_gothic_dark/white_knight.png",silver:"./piece/hitomoji_gothic_dark/white_silver.png",gold:"./piece/hitomoji_gothic_dark/white_gold.png",bishop:"./piece/hitomoji_gothic_dark/white_bishop.png",rook:"./piece/hitomoji_gothic_dark/white_rook.png",king:"./piece/hitomoji_gothic_dark/white_king.png",king2:"./piece/hitomoji_gothic_dark/white_king2.png",promPawn:"./piece/hitomoji_gothic_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/white_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/white_horse.png",dragon:"./piece/hitomoji_gothic_dark/white_dragon.png"}}},Ab={[Ue.LIGHT]:"./board/grid.svg",[Ue.WARM]:"./board/grid.svg",[Ue.RESIN]:"./board/grid.svg",[Ue.RESIN2]:"./board/grid.svg",[Ue.RESIN3]:"./board/grid.svg",[Ue.DARK]:"./board/grid_white.svg",[Ue.GREEN]:"./board/grid.svg",[Ue.CHERRY_BLOSSOM]:"./board/grid.svg"},Cb={[Ue.LIGHT]:"./board/wood_light.png",[Ue.WARM]:"./board/wood_warm.png",[Ue.RESIN]:null,[Ue.RESIN2]:null,[Ue.RESIN3]:null,[Ue.DARK]:null,[Ue.GREEN]:null,[Ue.CHERRY_BLOSSOM]:null},Tb={[Ue.LIGHT]:"rgba(0, 0, 0, 0)",[Ue.WARM]:"rgba(0, 0, 0, 0)",[Ue.RESIN]:"#d69b00",[Ue.RESIN2]:"#efbf63",[Ue.RESIN3]:"#ad7624",[Ue.DARK]:"#333333",[Ue.GREEN]:"#598459",[Ue.CHERRY_BLOSSOM]:"#ecb6b6"},Mb={[Ue.LIGHT]:"#8b4513",[Ue.WARM]:"#8b4513",[Ue.RESIN]:"#8b4513",[Ue.RESIN2]:"#8b4513",[Ue.RESIN3]:"#8b4513",[Ue.DARK]:"#333333",[Ue.GREEN]:"#527a52",[Ue.CHERRY_BLOSSOM]:"#e8a9a9"},xb={black:{pawn:{row:3,column:0,width:2},lance:{row:2,column:0,width:1},knight:{row:2,column:1,width:1},silver:{row:1,column:0,width:1},gold:{row:1,column:1,width:1},bishop:{row:0,column:0,width:1},rook:{row:0,column:1,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}},white:{pawn:{row:0,column:0,width:2},lance:{row:1,column:1,width:1},knight:{row:1,column:0,width:1},silver:{row:2,column:1,width:1},gold:{row:2,column:0,width:1},bishop:{row:3,column:1,width:1},rook:{row:3,column:0,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}}},Rb={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};class Nb{constructor(t,i,n){T(this,"pieceImages");T(this,"boardGridImage");T(this,"boardTextureImage");this.boardImageType=i,this.boardLabelType=n,this.pieceImages=au[t]||au[En.HITOMOJI],this.boardGridImage=Ab[i],this.boardTextureImage=Cb[i]}preload(){ys(this.boardGridImage),this.boardTextureImage&&ys(this.boardTextureImage),Object.values(this.pieceImages.black).forEach(ys),Object.values(this.pieceImages.white).forEach(ys)}build(t,i,n,s,o,r){let a=t.width/le.frame.width;le.frame.height*a>t.height&&(a=t.height/le.frame.height);const l=()=>{const ne=le.frame.height*a,re=le.frame.width*a;return{style:{height:ne+"px",width:re+"px"},size:new bt(re,ne)}},c=()=>{const ne=le.board.x*a,re=le.board.y*a,oe=le.board.width*a,Be=le.board.height*a,be={"background-color":Tb[this.boardImageType],left:ne+"px",top:re+"px",height:Be+"px",width:oe+"px"};return{gridImagePath:this.boardGridImage,textureImagePath:this.boardTextureImage,x:ne,y:re,style:be}},u=ne=>{const re=[];if(this.boardLabelType==Ts.NONE)return re;const oe=le.label.fontSize*a,Be=oe*.1,Ae={color:"black","font-size":oe+"px","font-weight":"bold","text-shadow":`${Be}px ${Be}px  ${Be}px white`};for(let be=1;be<=9;be++){const ct=ne.x-oe*.5+(r?0:le.board.width)*a+le.board.leftPiecePadding*.5*a*(r?1:-1),ut=ne.y-oe*.5+(le.board.topSquarePadding+((r?10-be:be)-.5)*le.board.squreHeight)*a;re.push({id:"rank"+be,character:Rb[be],style:{left:ct+"px",top:ut+"px",...Ae}})}for(let be=1;be<=9;be++){const ct=ne.x-oe*.5+(le.board.leftPiecePadding+(9.5-(r?10-be:be))*le.board.squreWidth)*a,ut=ne.y-oe*.5+(r?le.board.height:0)*a+le.board.topSquarePadding*.5*a*(r?-1:1);re.push({id:"file"+be,character:String(be),style:{left:ct+"px",top:ut+"px",...Ae}})}return re},h=ne=>{const re=[];return i.board.listNonEmptySquares().forEach(oe=>{const Be=i.board.at(oe),Ae=Be.id+oe.index,be=r?xt(Be.color):Be.color,ct=Be.type==B.KING&&Be.color==D.BLACK?"king2":Be.type,ut=this.pieceImages[be][ct],Et=ne.x+(le.board.leftPiecePadding+le.board.squreWidth*(r?oe.opposite:oe).x)*a,Xe=ne.y+(le.board.topPiecePadding+le.board.squreHeight*(r?oe.opposite:oe).y)*a,Ct=le.piece.width*a,qe=le.piece.height*a;re.push({id:Ae,imagePath:ut,style:{left:Et+"px",top:Xe+"px",width:Ct+"px",height:qe+"px"}})}),re},p=ne=>{const re=[];return $.all.forEach(oe=>{const Be=oe.index,{file:Ae}=oe,{rank:be}=oe,ct=ne.x+(le.board.leftSquarePadding+le.board.squreWidth*(r?oe.opposite:oe).x)*a,ut=ne.y+(le.board.topSquarePadding+le.board.squreHeight*(r?oe.opposite:oe).y)*a,Et=le.board.squreWidth*a,Xe=le.board.squreHeight*a,Ct={left:ct+"px",top:ut+"px",width:Et+"px",height:Xe+"px"};let qe=Ct;n&&oe.equals(n.to)&&(qe={...qe,...le.board.highlight.lastMoveTo}),n&&n.from instanceof $&&oe.equals(n.from)&&(qe={...qe,...le.board.highlight.lastMoveFrom}),s instanceof $&&s.equals(oe)&&(qe={...qe,...le.board.highlight.selected}),re.push({id:Be,file:Ae,rank:be,style:Ct,backgroundStyle:qe})}),re},g=(ne,re)=>{const oe=r?xt(ne):ne,Be=Mb[this.boardImageType],Ae=le.hand[oe].x*a,be=le.hand[oe].y*a,ct=le.hand.width*a,ut=le.hand.height*a,Et={"background-color":Be,left:Ae+"px",top:be+"px",width:ct+"px",height:ut+"px"},Xe=[],Ct=[];return S0.forEach(qe=>{const It=re.count(qe),ii=xb[oe][qe],bi=le.hand.width/2*ii.width*a,C=le.hand.height/4*a,R=bi*ii.column,F=C*ii.row,j=le.piece.width*a,K=le.piece.height*a,ee=Math.max(bi-j*It,0)/(It*2),ae=(bi-j-ee*2)/Math.max(It-1,1);for(let he=It-1;he>=0;he-=1){const fe=qe+he,me=this.pieceImages[oe][qe],_e=R+ee+ae*he,Re=F;Xe.push({id:fe,imagePath:me,style:{left:_e+"px",top:Re+"px",width:j+"px",height:K+"px"}})}const te=qe,ie={left:R+"px",top:F+"px",width:bi+"px",height:C+"px"};let Y=ie;s&&s instanceof ue&&s.color===ne&&s.type===qe&&(Y={...Y,...le.hand.highlight.selected}),Ct.push({id:te,type:qe,style:ie,backgroundStyle:Y})}),{style:Et,pieces:Xe,pointers:Ct}},y=(ne,re)=>{if(!re)return null;const oe=r?xt(re.color):re.color,Be=r?re.to.opposite:re.to,Ae=new ue(oe,re.pieceType),be=Ae.promoted(),ct=Ae.unpromoted(),ut=this.pieceImages[oe][be.type],Et=this.pieceImages[oe][ct.type],Xe=ne.x+(le.board.leftSquarePadding+le.board.squreWidth*(Be.x===0?0:Be.x===8?7:Be.x-.5))*a,Ct=ne.y+(le.board.topSquarePadding+le.board.squreHeight*Be.y)*a,qe=le.board.squreWidth*2*a,It=le.board.squreHeight*a,ii={left:Xe+"px",top:Ct+"px",width:qe+"px",height:It+"px","font-size":It/4+"px"};return{promoteImagePath:ut,notPromoteImagePath:Et,style:ii}},b=()=>{const ne=i.color,re=r?xt(ne):ne,oe=2;return{style:{left:le.turn[re].x*a-oe+"px",top:le.turn[re].y*a-oe+"px",width:le.turn.width*a-oe+"px",height:le.turn.height*a-oe+"px","font-size":le.turn.fontSize*a+"px","border-radius":le.turn.height*a*.4+"px","border-width":oe+"px","border-style":"solid"}}},v=ne=>{const re=r?xt(ne):ne;return{style:{left:le.playerName[re].x*a+"px",top:le.playerName[re].y*a+"px",width:le.playerName.width*a+"px",height:le.playerName.height*a+"px","font-size":le.playerName.fontSize*a+"px"}}},_=ne=>{const re=r?xt(ne):ne;return{style:{left:le.clock[re].x*a+"px",top:le.clock[re].y*a+"px",width:le.clock.width*a+"px",height:le.clock.height*a+"px","font-size":le.clock.fontSize*a+"px"}}},E=()=>({left:{style:{left:le.control.left.x*a+"px",top:le.control.left.y*a+"px",width:le.control.left.width*a+"px",height:le.control.left.height*a+"px","font-size":le.control.left.fontSize*a+"px"}},right:{style:{left:le.control.right.x*a+"px",top:le.control.right.y*a+"px",width:le.control.right.width*a+"px",height:le.control.right.height*a+"px","font-size":le.control.right.fontSize*a+"px"}}}),w=l(),P=c(),A=u(P),O=h(P),U=p(P),W=g(D.BLACK,i.hand(D.BLACK)),Z=g(D.WHITE,i.hand(D.WHITE)),q=y(P,o),Q=b(),ye=v(D.BLACK),de=v(D.WHITE),Me=_(D.BLACK),Ee=_(D.WHITE),Pe=E();return{frame:w,board:P,labels:A,piece:O,square:U,blackHand:W,whiteHand:Z,promotion:q,turn:Q,blackPlayerName:ye,whitePlayerName:de,blackClock:Me,whiteClock:Ee,control:Pe}}}const Ob=Ve({name:"BoardView",props:{pieceImageType:{type:String,required:!0},boardImageType:{type:String,required:!0},boardLabelType:{type:String,required:!0},maxSize:{type:bt,required:!0},position:{type:Object,required:!0},lastMove:{type:Object,required:!1,default:null},flip:{type:Boolean,required:!1},allowEdit:{type:Boolean,required:!1},allowMove:{type:Boolean,required:!1},blackPlayerName:{type:String,required:!1,default:""},whitePlayerName:{type:String,required:!1,default:""},blackPlayerTime:{type:Number,required:!1,default:void 0},blackPlayerByoyomi:{type:Number,required:!1,default:void 0},whitePlayerTime:{type:Number,required:!1,default:void 0},whitePlayerByoyomi:{type:Number,required:!1,default:void 0},nextMoveLabel:{type:String,required:!1,default:""}},emits:["resize","move","edit"],setup(e,t){const i=mi({pointer:null,reservedMove:null}),n=()=>{i.pointer=null,i.reservedMove=null};Qi([()=>e.position,()=>e.allowEdit,()=>e.allowMove],()=>{n()});const s=()=>{n()},o=(w,P,A)=>{const O=i.pointer;if(n(),!(w instanceof $&&O instanceof $&&w.equals(O))&&!(w instanceof ue&&O instanceof ue&&w.equals(O))){if(O){const U=O,W=w instanceof $?w:w.color;if(e.allowEdit&&e.position.isValidEditing(U,W)){t.emit("edit",{move:{from:O,to:W}});return}if(e.allowMove&&w instanceof $){const Z=O instanceof $?O:O.type,q=w,Q=e.position.createMove(Z,q);if(!Q)return;const ye=e.position.isValidMove(Q),de=e.position.isValidMove(Q.withPromote());if(ye&&de){i.reservedMove=Q;return}if(ye){t.emit("move",Q);return}if(de){t.emit("move",Q.withPromote());return}}}!e.allowMove&&!e.allowEdit||P||!e.allowEdit&&A!==e.position.color||(i.pointer=w)}},r=(w,P,A)=>{w.stopPropagation(),w.preventDefault();const O=new $(P,A),U=e.position.board.at(O);o(O,!U,U==null?void 0:U.color)},a=(w,P,A)=>{w.stopPropagation(),w.preventDefault();const O=e.position.hand(P).count(A)===0;o(new ue(P,A),O,P)},l=(w,P,A)=>{w.stopPropagation(),w.preventDefault(),n();const O=new $(P,A);e.allowEdit&&e.position.board.at(O)&&t.emit("edit",{rotate:O})},c=w=>{w.stopPropagation(),w.preventDefault();const P=i.reservedMove;n(),P&&e.position.isValidMove(P.withPromote())&&t.emit("move",P.withPromote())},u=w=>{w.stopPropagation(),w.preventDefault();const P=i.reservedMove;n(),P&&e.position.isValidMove(P)&&t.emit("move",P)},h=ke(()=>{const w=new Nb(e.pieceImageType,e.boardImageType,e.boardLabelType);return w.preload(),w}),p=ke(()=>{const w=h.value.build(e.maxSize,e.position,e.lastMove,i.pointer,i.reservedMove,e.flip);return t.emit("resize",w.frame.size),w}),g=(w,P)=>w?gf(w):P!==void 0?""+P:"0:00:00",y=(w,P)=>{if(!w&&!P)return"normal";const A=(w||0)+(P||0);return A<=5?"danger":A<=10?"warning":"normal"},b=ke(()=>g(e.blackPlayerTime,e.blackPlayerByoyomi)),v=ke(()=>y(e.blackPlayerTime,e.blackPlayerByoyomi)),_=ke(()=>g(e.whitePlayerTime,e.whitePlayerByoyomi)),E=ke(()=>y(e.whitePlayerTime,e.whitePlayerByoyomi));return{clickFrame:s,clickSquare:r,clickHand:a,clickSquareR:l,clickPromote:c,clickNotPromote:u,layout:p,blackPlayerTimeText:b,blackPlayerTimeSeverity:v,whitePlayerTimeText:_,whitePlayerTimeSeverity:E,Color:D}}});const je=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},Lb=["src"],Bb=["src"],Db={class:"player-name-text"},Fb={class:"clock-text"},$b={class:"player-name-text"},Hb={class:"clock-text"},Ub=["src"],zb=["onClick","onContextmenu"],Gb=["src"],Wb=["onClick"],Vb=["src"],jb=["onClick"],Kb=["src"],qb=["src"];function Yb(e,t,i,n,s,o){return x(),N("div",null,[d("div",{class:"frame",style:Se(e.layout.frame.style),onClick:t[2]||(t[2]=r=>e.clickFrame())},[e.layout.board.textureImagePath?(x(),N("div",{key:0,class:"board-texture",style:Se(e.layout.board.style)},[d("img",{class:"board-image",src:e.layout.board.textureImagePath},null,8,Lb)],4)):se("",!0),d("div",{class:"board-grid",style:Se(e.layout.board.style)},[d("img",{class:"board-image",src:e.layout.board.gridImagePath},null,8,Bb)],4),d("div",{class:yt(["player-name",{active:e.position.color=="black"}]),style:Se(e.layout.blackPlayerName.style)},[d("span",Db,""+I(e.blackPlayerName),1)],6),d("div",{class:yt(["clock",e.blackPlayerTimeSeverity]),style:Se(e.layout.blackClock.style)},[d("span",Fb,I(e.blackPlayerTimeText),1)],6),d("div",{class:yt(["player-name",{active:e.position.color=="white"}]),style:Se(e.layout.whitePlayerName.style)},[d("span",$b,""+I(e.whitePlayerName),1)],6),d("div",{class:yt(["clock",e.whitePlayerTimeSeverity]),style:Se(e.layout.whiteClock.style)},[d("span",Hb,I(e.whitePlayerTimeText),1)],6),(x(!0),N(Ie,null,He(e.layout.square,r=>(x(),N("div",{key:r.id,class:"square",style:Se(r.backgroundStyle)},null,4))),128)),(x(!0),N(Ie,null,He(e.layout.piece,r=>(x(),N("div",{key:r.id,class:"piece",style:Se(r.style)},[d("img",{class:"piece-image",src:r.imagePath},null,8,Ub)],4))),128)),(x(!0),N(Ie,null,He(e.layout.labels,r=>(x(),N("div",{key:r.id,class:"label",style:Se(r.style)},I(r.character),5))),128)),(x(!0),N(Ie,null,He(e.layout.square,r=>(x(),N("div",{key:r.id,class:"square",style:Se(r.style),onClick:a=>e.clickSquare(a,r.file,r.rank),onContextmenu:a=>e.clickSquareR(a,r.file,r.rank)},null,44,zb))),128)),d("div",{class:"hand",style:Se(e.layout.blackHand.style)},[(x(!0),N(Ie,null,He(e.layout.blackHand.pointers,r=>(x(),N("div",{key:r.id,class:"hand-pointer",style:Se(r.backgroundStyle)},null,4))),128)),(x(!0),N(Ie,null,He(e.layout.blackHand.pieces,r=>(x(),N("div",{key:r.id,class:"piece",style:Se(r.style)},[d("img",{class:"piece-image",src:r.imagePath},null,8,Gb)],4))),128)),(x(!0),N(Ie,null,He(e.layout.blackHand.pointers,r=>(x(),N("div",{key:r.id,class:"hand-pointer",style:Se(r.style),onClick:a=>e.clickHand(a,e.Color.BLACK,r.type)},null,12,Wb))),128))],4),d("div",{class:"hand",style:Se(e.layout.whiteHand.style)},[(x(!0),N(Ie,null,He(e.layout.whiteHand.pointers,r=>(x(),N("div",{key:r.id,class:"hand-pointer",style:Se(r.backgroundStyle)},null,4))),128)),(x(!0),N(Ie,null,He(e.layout.whiteHand.pieces,r=>(x(),N("div",{key:r.id,class:"piece",style:Se(r.style)},[d("img",{class:"piece-image",src:r.imagePath},null,8,Vb)],4))),128)),(x(!0),N(Ie,null,He(e.layout.whiteHand.pointers,r=>(x(),N("div",{key:r.id,class:"hand-pointer",style:Se(r.style),onClick:a=>e.clickHand(a,e.Color.WHITE,r.type)},null,12,jb))),128))],4),e.layout.promotion?(x(),N("div",{key:1,class:"promotion-selector",style:Se(e.layout.promotion.style)},[d("div",{class:"select-button promote",onClick:t[0]||(t[0]=r=>e.clickPromote(r))},[d("img",{class:"piece-image",src:e.layout.promotion.promoteImagePath},null,8,Kb)]),d("div",{class:"select-button not-promote",onClick:t[1]||(t[1]=r=>e.clickNotPromote(r))},[d("img",{class:"piece-image",src:e.layout.promotion.notPromoteImagePath},null,8,qb)])],4)):se("",!0),d("div",{class:"turn",style:Se(e.layout.turn.style)},I(e.nextMoveLabel),5),d("div",{style:Se(e.layout.control.left.style)},[za(e.$slots,"left-control",{},void 0,!0)],4),d("div",{style:Se(e.layout.control.right.style)},[za(e.$slots,"right-control",{},void 0,!0)],4)],4)])}const Vl=je(Ob,[["render",Yb],["__scopeId","data-v-1b66760d"]]),ti="es://human",jl="es://usi-engine/";function Ii(e){return e.startsWith(jl)}function wf(){const e=Date.now(),t=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16);return jl+`${e}/${t}`}const Xb=Object.freeze(Object.defineProperty({__proto__:null,ES_HUMAN:ti,ES_USI_ENGINE:jl,isUSIEngine:Ii,issueEngineURI:wf},Symbol.toStringTag,{value:"Module"})),Ef="USI_Ponder",Jb="USI_MultiPV",Qb="Threads",Zb="NumberOfThreads",e1="MultiPV";function wn(e){if(e){if(e.value!==void 0)return e.value;if(e.default!==void 0)return e.type==="string"&&e.default==="<empty>"?"":e.default}}function If(){return{uri:"",name:"",defaultName:"",author:"",path:"",options:{}}}function t1(e){const t=JSON.parse(JSON.stringify(e));return t.uri=wf(),t.name=G.copyOf(t.name),t}function i1(e,t){e.uri=t.uri,e.name=t.name,Object.keys(t.options).forEach(i=>{e.options[i]&&(e.options[i].value=t.options[i].value)})}class zi{constructor(t){T(this,"engines",{});if(t){const i=JSON.parse(t);for(const n in i.engines)Ii(n)&&(this.engines[n]={...If(),...i.engines[n],uri:n})}}hasEngine(t){return!!this.engines[t]}addEngine(t){this.engines[t.uri]=t}updateEngine(t){return this.engines[t.uri]?(this.engines[t.uri]=t,!0):!1}removeEngine(t){return this.engines[t]?(delete this.engines[t],!0):!1}getEngine(t){return this.engines[t]}get engineList(){return Object.values(this.engines).sort((t,i)=>t.name!==i.name?t.name>i.name?1:-1:t.defaultName!==i.defaultName?t.defaultName>i.defaultName?1:-1:t.uri>i.uri?1:-1)}get json(){return JSON.stringify(this)}get jsonWithIndent(){return JSON.stringify(this,void 0,2)}getClone(){return new zi(this.json)}}function n1(){return{enableNumber:!1,number:20}}function s1(){return{enableNumber:!1,number:100}}function o1(){return{maxSeconds:5}}var Di=(e=>(e.NONE="none",e.INSERT="insert",e.APPEND="append",e.OVERWRITE="overwrite",e))(Di||{});function fr(){return{startCriteria:n1(),endCriteria:s1(),perMoveCriteria:o1(),commentBehavior:"insert"}}function lu(){return{name:"",uri:ti}}function pr(){return{black:lu(),white:lu(),timeLimit:{timeSeconds:0,byoyomi:30,increment:0},enableEngineTimeout:!1,humanIsFront:!0,enableComment:!0,enableAutoSave:!0,repeat:1,swapPlayers:!1,maxMoves:1e3}}function Pf(e){if(e.timeLimit.timeSeconds===0&&e.timeLimit.byoyomi===0)return new Error("0");if(e.timeLimit.byoyomi!==0&&e.timeLimit.increment!==0)return new Error("")}function r1(e){const t=Pf(e);if(t)return t;if(e.enableAutoSave)return new Error("Web")}function tl(){return{}}function a1(e){if(!e.usi)return new Error("");for(const t of e.secondaries||[])if(!t.usi)return new Error("")}const l1={async getRecordPathFromProcArg(){return""},updateAppState(){},openExplorer(){},async showOpenRecordDialog(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async openRecord(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async showSaveRecordDialog(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async saveRecord(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async showSelectFileDialog(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async showSelectDirectoryDialog(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async exportCaptureAsPNG(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async exportCaptureAsJPEG(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async loadAppSetting(){const e=localStorage.getItem("appSetting");return JSON.stringify(e?{...el(),...JSON.parse(e)}:el())},async saveAppSetting(e){localStorage.setItem("appSetting",e)},async loadResearchSetting(){const e=localStorage.getItem("researchSetting");return JSON.stringify(e?{...tl(),...JSON.parse(e)}:tl())},async saveResearchSetting(e){localStorage.setItem("researchSetting",e)},async loadAnalysisSetting(){const e=localStorage.getItem("analysisSetting");return JSON.stringify(e?{...fr(),...JSON.parse(e)}:fr())},async saveAnalysisSetting(e){localStorage.setItem("analysisSetting",e)},async loadGameSetting(){const e=localStorage.getItem("gameSetting");return JSON.stringify(e?{...pr(),...JSON.parse(e)}:pr())},async saveGameSetting(e){localStorage.setItem("gameSetting",e)},async loadCSAGameSettingHistory(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async saveCSAGameSettingHistory(e){localStorage.setItem("csaGameSettingHistory",e)},async loadUSIEngineSetting(){return new zi().json},async saveUSIEngineSetting(){},async showSelectUSIEngineDialog(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async getUSIEngineInfo(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async sendUSISetOption(){},async usiLaunch(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async usiGo(){},async usiGoPonder(){},async usiPonderHit(){},async usiGoInfinite(){},async usiStop(){},async usiGameover(){},async usiQuit(){},async csaLogin(){throw new Error(G.thisFeatureNotAvailableOnWebApp)},async csaLogout(){},async csaAgree(){},async csaMove(){},async csaResign(){},async csaWin(){},async csaStop(){},async isEncryptionAvailable(){return!1},log(e,t){switch(e){case gt.DEBUG:console.debug(t);break;case gt.INFO:console.log(t);break;case gt.WARN:console.warn(t);break;case gt.ERROR:console.error(t);break}},onSendError(){},onMenuEvent(){},onUSIBestMove(){},onUSIInfo(){},onUSIPonderInfo(){},onCSAGameSummary(){},onCSAReject(){},onCSAStart(){},onCSAMove(){},onCSAGameResult(){},onCSAClose(){}};function Kl(){return window}const kf=Kl().electronShogi||{},ze=Kl().electronShogiAPI||l1,pe={...ze,exportCaptureAsPNG(e){return ze.exportCaptureAsPNG(e.json)},exportCaptureAsJPEG(e){return ze.exportCaptureAsJPEG(e.json)},async loadAppSetting(){return JSON.parse(await ze.loadAppSetting())},saveAppSetting(e){return ze.saveAppSetting(JSON.stringify(e))},async loadResearchSetting(){return JSON.parse(await ze.loadResearchSetting())},saveResearchSetting(e){return ze.saveResearchSetting(JSON.stringify(e))},async loadAnalysisSetting(){return JSON.parse(await ze.loadAnalysisSetting())},saveAnalysisSetting(e){return ze.saveAnalysisSetting(JSON.stringify(e))},async loadGameSetting(){return JSON.parse(await ze.loadGameSetting())},saveGameSetting(e){return ze.saveGameSetting(JSON.stringify(e))},async loadCSAGameSettingHistory(){return JSON.parse(await ze.loadCSAGameSettingHistory())},saveCSAGameSettingHistory(e){return ze.saveCSAGameSettingHistory(JSON.stringify(e))},async loadUSIEngineSetting(){return new zi(await ze.loadUSIEngineSetting())},saveUSIEngineSetting(e){return ze.saveUSIEngineSetting(e.json)},async getUSIEngineInfo(e,t){return JSON.parse(await ze.getUSIEngineInfo(e,t))},usiLaunch(e,t){return ze.usiLaunch(JSON.stringify(e),t)},usiGo(e,t,i,n,s){return ze.usiGo(e,t,JSON.stringify(i),n,s)},usiGoPonder(e,t,i,n,s){return ze.usiGoPonder(e,t,JSON.stringify(i),n,s)},csaLogin(e){return ze.csaLogin(JSON.stringify(e))}};function gr(){return!!Kl().electronShogiAPI}let Ms;function Af(e){if(Ms)return;const t=(e==null?void 0:e.type)||"sine",i=(e==null?void 0:e.frequency)||440,n=(e==null?void 0:e.volume)||2,s=new AudioContext,o=s.createOscillator(),r=s.createGain();o.connect(r),r.connect(s.destination),o.type=t,o.frequency.value=i,r.gain.value=n*.005,o.onended=()=>{r.disconnect(s.destination),o.disconnect(r)},o.start(s.currentTime),e!=null&&e.time&&o.stop(s.currentTime+e.time),e!=null&&e.time||(Ms=o)}function c1(e){Af({type:"sine",frequency:e.frequency,time:.1,volume:e.volume})}function u1(e){Af({type:"sine",frequency:e.frequency,volume:e.volume})}function cu(){Ms&&(Ms.stop(),Ms=void 0)}let aa;function la(e){const t=Date.now();if(aa&&t<aa+200)return;const i=new Audio("sound/piece.mp3");i.volume=e*.01,i.play(),aa=t}function Cf(e){return(e||new Date).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})}function uu(e){return(e||new Date).toLocaleTimeString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function h1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(t,s);return new o}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),i}var mr={},d1={get exports(){return mr},set exports(e){mr=e}},ql={},jr={};jr.byteLength=g1;jr.toByteArray=b1;jr.fromByteArray=v1;var Pi=[],si=[],f1=typeof Uint8Array<"u"?Uint8Array:Array,ca="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ln=0,p1=ca.length;Ln<p1;++Ln)Pi[Ln]=ca[Ln],si[ca.charCodeAt(Ln)]=Ln;si["-".charCodeAt(0)]=62;si["_".charCodeAt(0)]=63;function Tf(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var n=i===t?0:4-i%4;return[i,n]}function g1(e){var t=Tf(e),i=t[0],n=t[1];return(i+n)*3/4-n}function m1(e,t,i){return(t+i)*3/4-i}function b1(e){var t,i=Tf(e),n=i[0],s=i[1],o=new f1(m1(e,n,s)),r=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)t=si[e.charCodeAt(l)]<<18|si[e.charCodeAt(l+1)]<<12|si[e.charCodeAt(l+2)]<<6|si[e.charCodeAt(l+3)],o[r++]=t>>16&255,o[r++]=t>>8&255,o[r++]=t&255;return s===2&&(t=si[e.charCodeAt(l)]<<2|si[e.charCodeAt(l+1)]>>4,o[r++]=t&255),s===1&&(t=si[e.charCodeAt(l)]<<10|si[e.charCodeAt(l+1)]<<4|si[e.charCodeAt(l+2)]>>2,o[r++]=t>>8&255,o[r++]=t&255),o}function y1(e){return Pi[e>>18&63]+Pi[e>>12&63]+Pi[e>>6&63]+Pi[e&63]}function _1(e,t,i){for(var n,s=[],o=t;o<i;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),s.push(y1(n));return s.join("")}function v1(e){for(var t,i=e.length,n=i%3,s=[],o=16383,r=0,a=i-n;r<a;r+=o)s.push(_1(e,r,r+o>a?a:r+o));return n===1?(t=e[i-1],s.push(Pi[t>>2]+Pi[t<<4&63]+"==")):n===2&&(t=(e[i-2]<<8)+e[i-1],s.push(Pi[t>>10]+Pi[t>>4&63]+Pi[t<<2&63]+"=")),s.join("")}var Yl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Yl.read=function(e,t,i,n,s){var o,r,a=s*8-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?s-1:0,p=i?-1:1,g=e[t+h];for(h+=p,o=g&(1<<-u)-1,g>>=-u,u+=a;u>0;o=o*256+e[t+h],h+=p,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=n;u>0;r=r*256+e[t+h],h+=p,u-=8);if(o===0)o=1-c;else{if(o===l)return r?NaN:(g?-1:1)*(1/0);r=r+Math.pow(2,n),o=o-c}return(g?-1:1)*r*Math.pow(2,o-n)};Yl.write=function(e,t,i,n,s,o){var r,a,l,c=o*8-s-1,u=(1<<c)-1,h=u>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,y=n?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),r+h>=1?t+=p/l:t+=p*Math.pow(2,1-h),t*l>=2&&(r++,l/=2),r+h>=u?(a=0,r=u):r+h>=1?(a=(t*l-1)*Math.pow(2,s),r=r+h):(a=t*Math.pow(2,h-1)*Math.pow(2,s),r=0));s>=8;e[i+g]=a&255,g+=y,a/=256,s-=8);for(r=r<<s|a,c+=s;c>0;e[i+g]=r&255,g+=y,r/=256,c-=8);e[i+g-y]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=jr,i=Yl,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const S=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(S,f),S.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function r(S){if(S>s)throw new RangeError('The value "'+S+'" is invalid for option "size"');const f=new Uint8Array(S);return Object.setPrototypeOf(f,a.prototype),f}function a(S,f,m){if(typeof S=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(S)}return l(S,f,m)}a.poolSize=8192;function l(S,f,m){if(typeof S=="string")return p(S,f);if(ArrayBuffer.isView(S))return y(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(he(S,ArrayBuffer)||S&&he(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(he(S,SharedArrayBuffer)||S&&he(S.buffer,SharedArrayBuffer)))return b(S,f,m);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=S.valueOf&&S.valueOf();if(k!=null&&k!==S)return a.from(k,f,m);const M=v(S);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return a.from(S[Symbol.toPrimitive]("string"),f,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}a.from=function(S,f,m){return l(S,f,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function u(S,f,m){return c(S),S<=0?r(S):f!==void 0?typeof m=="string"?r(S).fill(f,m):r(S).fill(f):r(S)}a.alloc=function(S,f,m){return u(S,f,m)};function h(S){return c(S),r(S<0?0:_(S)|0)}a.allocUnsafe=function(S){return h(S)},a.allocUnsafeSlow=function(S){return h(S)};function p(S,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const m=w(S,f)|0;let k=r(m);const M=k.write(S,f);return M!==m&&(k=k.slice(0,M)),k}function g(S){const f=S.length<0?0:_(S.length)|0,m=r(f);for(let k=0;k<f;k+=1)m[k]=S[k]&255;return m}function y(S){if(he(S,Uint8Array)){const f=new Uint8Array(S);return b(f.buffer,f.byteOffset,f.byteLength)}return g(S)}function b(S,f,m){if(f<0||S.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<f+(m||0))throw new RangeError('"length" is outside of buffer bounds');let k;return f===void 0&&m===void 0?k=new Uint8Array(S):m===void 0?k=new Uint8Array(S,f):k=new Uint8Array(S,f,m),Object.setPrototypeOf(k,a.prototype),k}function v(S){if(a.isBuffer(S)){const f=_(S.length)|0,m=r(f);return m.length===0||S.copy(m,0,0,f),m}if(S.length!==void 0)return typeof S.length!="number"||fe(S.length)?r(0):g(S);if(S.type==="Buffer"&&Array.isArray(S.data))return g(S.data)}function _(S){if(S>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return S|0}function E(S){return+S!=S&&(S=0),a.alloc(+S)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,m){if(he(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),he(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(f)||!a.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===m)return 0;let k=f.length,M=m.length;for(let L=0,H=Math.min(k,M);L<H;++L)if(f[L]!==m[L]){k=f[L],M=m[L];break}return k<M?-1:M<k?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,m){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);let k;if(m===void 0)for(m=0,k=0;k<f.length;++k)m+=f[k].length;const M=a.allocUnsafe(m);let L=0;for(k=0;k<f.length;++k){let H=f[k];if(he(H,Uint8Array))L+H.length>M.length?(a.isBuffer(H)||(H=a.from(H)),H.copy(M,L)):Uint8Array.prototype.set.call(M,H,L);else if(a.isBuffer(H))H.copy(M,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=H.length}return M};function w(S,f){if(a.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||he(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const m=S.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&m===0)return 0;let M=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return ee(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return ie(S).length;default:if(M)return k?-1:ee(S).length;f=(""+f).toLowerCase(),M=!0}}a.byteLength=w;function P(S,f,m){let k=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,f>>>=0,m<=f))return"";for(S||(S="utf8");;)switch(S){case"hex":return oe(this,f,m);case"utf8":case"utf-8":return Me(this,f,m);case"ascii":return ne(this,f,m);case"latin1":case"binary":return re(this,f,m);case"base64":return de(this,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,f,m);default:if(k)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),k=!0}}a.prototype._isBuffer=!0;function A(S,f,m){const k=S[f];S[f]=S[m],S[m]=k}a.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<f;m+=2)A(this,m,m+1);return this},a.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<f;m+=4)A(this,m,m+3),A(this,m+1,m+2);return this},a.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<f;m+=8)A(this,m,m+7),A(this,m+1,m+6),A(this,m+2,m+5),A(this,m+3,m+4);return this},a.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?Me(this,0,f):P.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){let f="";const m=e.INSPECT_MAX_BYTES;return f=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(f+=" ... "),"<Buffer "+f+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(f,m,k,M,L){if(he(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(m===void 0&&(m=0),k===void 0&&(k=f?f.length:0),M===void 0&&(M=0),L===void 0&&(L=this.length),m<0||k>f.length||M<0||L>this.length)throw new RangeError("out of range index");if(M>=L&&m>=k)return 0;if(M>=L)return-1;if(m>=k)return 1;if(m>>>=0,k>>>=0,M>>>=0,L>>>=0,this===f)return 0;let H=L-M,xe=k-m;const Oe=Math.min(H,xe),De=this.slice(M,L),it=f.slice(m,k);for(let Je=0;Je<Oe;++Je)if(De[Je]!==it[Je]){H=De[Je],xe=it[Je];break}return H<xe?-1:xe<H?1:0};function O(S,f,m,k,M){if(S.length===0)return-1;if(typeof m=="string"?(k=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,fe(m)&&(m=M?0:S.length-1),m<0&&(m=S.length+m),m>=S.length){if(M)return-1;m=S.length-1}else if(m<0)if(M)m=0;else return-1;if(typeof f=="string"&&(f=a.from(f,k)),a.isBuffer(f))return f.length===0?-1:U(S,f,m,k,M);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(S,f,m):Uint8Array.prototype.lastIndexOf.call(S,f,m):U(S,[f],m,k,M);throw new TypeError("val must be string, number or Buffer")}function U(S,f,m,k,M){let L=1,H=S.length,xe=f.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(S.length<2||f.length<2)return-1;L=2,H/=2,xe/=2,m/=2}function Oe(it,Je){return L===1?it[Je]:it.readUInt16BE(Je*L)}let De;if(M){let it=-1;for(De=m;De<H;De++)if(Oe(S,De)===Oe(f,it===-1?0:De-it)){if(it===-1&&(it=De),De-it+1===xe)return it*L}else it!==-1&&(De-=De-it),it=-1}else for(m+xe>H&&(m=H-xe),De=m;De>=0;De--){let it=!0;for(let Je=0;Je<xe;Je++)if(Oe(S,De+Je)!==Oe(f,Je)){it=!1;break}if(it)return De}return-1}a.prototype.includes=function(f,m,k){return this.indexOf(f,m,k)!==-1},a.prototype.indexOf=function(f,m,k){return O(this,f,m,k,!0)},a.prototype.lastIndexOf=function(f,m,k){return O(this,f,m,k,!1)};function W(S,f,m,k){m=Number(m)||0;const M=S.length-m;k?(k=Number(k),k>M&&(k=M)):k=M;const L=f.length;k>L/2&&(k=L/2);let H;for(H=0;H<k;++H){const xe=parseInt(f.substr(H*2,2),16);if(fe(xe))return H;S[m+H]=xe}return H}function Z(S,f,m,k){return Y(ee(f,S.length-m),S,m,k)}function q(S,f,m,k){return Y(ae(f),S,m,k)}function Q(S,f,m,k){return Y(ie(f),S,m,k)}function ye(S,f,m,k){return Y(te(f,S.length-m),S,m,k)}a.prototype.write=function(f,m,k,M){if(m===void 0)M="utf8",k=this.length,m=0;else if(k===void 0&&typeof m=="string")M=m,k=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(k)?(k=k>>>0,M===void 0&&(M="utf8")):(M=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-m;if((k===void 0||k>L)&&(k=L),f.length>0&&(k<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let H=!1;for(;;)switch(M){case"hex":return W(this,f,m,k);case"utf8":case"utf-8":return Z(this,f,m,k);case"ascii":case"latin1":case"binary":return q(this,f,m,k);case"base64":return Q(this,f,m,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,f,m,k);default:if(H)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),H=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function de(S,f,m){return f===0&&m===S.length?t.fromByteArray(S):t.fromByteArray(S.slice(f,m))}function Me(S,f,m){m=Math.min(S.length,m);const k=[];let M=f;for(;M<m;){const L=S[M];let H=null,xe=L>239?4:L>223?3:L>191?2:1;if(M+xe<=m){let Oe,De,it,Je;switch(xe){case 1:L<128&&(H=L);break;case 2:Oe=S[M+1],(Oe&192)===128&&(Je=(L&31)<<6|Oe&63,Je>127&&(H=Je));break;case 3:Oe=S[M+1],De=S[M+2],(Oe&192)===128&&(De&192)===128&&(Je=(L&15)<<12|(Oe&63)<<6|De&63,Je>2047&&(Je<55296||Je>57343)&&(H=Je));break;case 4:Oe=S[M+1],De=S[M+2],it=S[M+3],(Oe&192)===128&&(De&192)===128&&(it&192)===128&&(Je=(L&15)<<18|(Oe&63)<<12|(De&63)<<6|it&63,Je>65535&&Je<1114112&&(H=Je))}}H===null?(H=65533,xe=1):H>65535&&(H-=65536,k.push(H>>>10&1023|55296),H=56320|H&1023),k.push(H),M+=xe}return Pe(k)}const Ee=4096;function Pe(S){const f=S.length;if(f<=Ee)return String.fromCharCode.apply(String,S);let m="",k=0;for(;k<f;)m+=String.fromCharCode.apply(String,S.slice(k,k+=Ee));return m}function ne(S,f,m){let k="";m=Math.min(S.length,m);for(let M=f;M<m;++M)k+=String.fromCharCode(S[M]&127);return k}function re(S,f,m){let k="";m=Math.min(S.length,m);for(let M=f;M<m;++M)k+=String.fromCharCode(S[M]);return k}function oe(S,f,m){const k=S.length;(!f||f<0)&&(f=0),(!m||m<0||m>k)&&(m=k);let M="";for(let L=f;L<m;++L)M+=me[S[L]];return M}function Be(S,f,m){const k=S.slice(f,m);let M="";for(let L=0;L<k.length-1;L+=2)M+=String.fromCharCode(k[L]+k[L+1]*256);return M}a.prototype.slice=function(f,m){const k=this.length;f=~~f,m=m===void 0?k:~~m,f<0?(f+=k,f<0&&(f=0)):f>k&&(f=k),m<0?(m+=k,m<0&&(m=0)):m>k&&(m=k),m<f&&(m=f);const M=this.subarray(f,m);return Object.setPrototypeOf(M,a.prototype),M};function Ae(S,f,m){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+f>m)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,m,k){f=f>>>0,m=m>>>0,k||Ae(f,m,this.length);let M=this[f],L=1,H=0;for(;++H<m&&(L*=256);)M+=this[f+H]*L;return M},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,m,k){f=f>>>0,m=m>>>0,k||Ae(f,m,this.length);let M=this[f+--m],L=1;for(;m>0&&(L*=256);)M+=this[f+--m]*L;return M},a.prototype.readUint8=a.prototype.readUInt8=function(f,m){return f=f>>>0,m||Ae(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,m){return f=f>>>0,m||Ae(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,m){return f=f>>>0,m||Ae(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,m){return f=f>>>0,m||Ae(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,m){return f=f>>>0,m||Ae(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readBigUInt64LE=_e(function(f){f=f>>>0,R(f,"offset");const m=this[f],k=this[f+7];(m===void 0||k===void 0)&&F(f,this.length-8);const M=m+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,L=this[++f]+this[++f]*2**8+this[++f]*2**16+k*2**24;return BigInt(M)+(BigInt(L)<<BigInt(32))}),a.prototype.readBigUInt64BE=_e(function(f){f=f>>>0,R(f,"offset");const m=this[f],k=this[f+7];(m===void 0||k===void 0)&&F(f,this.length-8);const M=m*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],L=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+k;return(BigInt(M)<<BigInt(32))+BigInt(L)}),a.prototype.readIntLE=function(f,m,k){f=f>>>0,m=m>>>0,k||Ae(f,m,this.length);let M=this[f],L=1,H=0;for(;++H<m&&(L*=256);)M+=this[f+H]*L;return L*=128,M>=L&&(M-=Math.pow(2,8*m)),M},a.prototype.readIntBE=function(f,m,k){f=f>>>0,m=m>>>0,k||Ae(f,m,this.length);let M=m,L=1,H=this[f+--M];for(;M>0&&(L*=256);)H+=this[f+--M]*L;return L*=128,H>=L&&(H-=Math.pow(2,8*m)),H},a.prototype.readInt8=function(f,m){return f=f>>>0,m||Ae(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,m){f=f>>>0,m||Ae(f,2,this.length);const k=this[f]|this[f+1]<<8;return k&32768?k|4294901760:k},a.prototype.readInt16BE=function(f,m){f=f>>>0,m||Ae(f,2,this.length);const k=this[f+1]|this[f]<<8;return k&32768?k|4294901760:k},a.prototype.readInt32LE=function(f,m){return f=f>>>0,m||Ae(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,m){return f=f>>>0,m||Ae(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readBigInt64LE=_e(function(f){f=f>>>0,R(f,"offset");const m=this[f],k=this[f+7];(m===void 0||k===void 0)&&F(f,this.length-8);const M=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(k<<24);return(BigInt(M)<<BigInt(32))+BigInt(m+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),a.prototype.readBigInt64BE=_e(function(f){f=f>>>0,R(f,"offset");const m=this[f],k=this[f+7];(m===void 0||k===void 0)&&F(f,this.length-8);const M=(m<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(M)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+k)}),a.prototype.readFloatLE=function(f,m){return f=f>>>0,m||Ae(f,4,this.length),i.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,m){return f=f>>>0,m||Ae(f,4,this.length),i.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,m){return f=f>>>0,m||Ae(f,8,this.length),i.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,m){return f=f>>>0,m||Ae(f,8,this.length),i.read(this,f,!1,52,8)};function be(S,f,m,k,M,L){if(!a.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>M||f<L)throw new RangeError('"value" argument is out of bounds');if(m+k>S.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,m,k,M){if(f=+f,m=m>>>0,k=k>>>0,!M){const xe=Math.pow(2,8*k)-1;be(this,f,m,k,xe,0)}let L=1,H=0;for(this[m]=f&255;++H<k&&(L*=256);)this[m+H]=f/L&255;return m+k},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,m,k,M){if(f=+f,m=m>>>0,k=k>>>0,!M){const xe=Math.pow(2,8*k)-1;be(this,f,m,k,xe,0)}let L=k-1,H=1;for(this[m+L]=f&255;--L>=0&&(H*=256);)this[m+L]=f/H&255;return m+k},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,1,255,0),this[m]=f&255,m+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,2,65535,0),this[m]=f&255,this[m+1]=f>>>8,m+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,2,65535,0),this[m]=f>>>8,this[m+1]=f&255,m+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,4,4294967295,0),this[m+3]=f>>>24,this[m+2]=f>>>16,this[m+1]=f>>>8,this[m]=f&255,m+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,4,4294967295,0),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=f&255,m+4};function ct(S,f,m,k,M){C(f,k,M,S,m,7);let L=Number(f&BigInt(4294967295));S[m++]=L,L=L>>8,S[m++]=L,L=L>>8,S[m++]=L,L=L>>8,S[m++]=L;let H=Number(f>>BigInt(32)&BigInt(4294967295));return S[m++]=H,H=H>>8,S[m++]=H,H=H>>8,S[m++]=H,H=H>>8,S[m++]=H,m}function ut(S,f,m,k,M){C(f,k,M,S,m,7);let L=Number(f&BigInt(4294967295));S[m+7]=L,L=L>>8,S[m+6]=L,L=L>>8,S[m+5]=L,L=L>>8,S[m+4]=L;let H=Number(f>>BigInt(32)&BigInt(4294967295));return S[m+3]=H,H=H>>8,S[m+2]=H,H=H>>8,S[m+1]=H,H=H>>8,S[m]=H,m+8}a.prototype.writeBigUInt64LE=_e(function(f,m=0){return ct(this,f,m,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=_e(function(f,m=0){return ut(this,f,m,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(f,m,k,M){if(f=+f,m=m>>>0,!M){const Oe=Math.pow(2,8*k-1);be(this,f,m,k,Oe-1,-Oe)}let L=0,H=1,xe=0;for(this[m]=f&255;++L<k&&(H*=256);)f<0&&xe===0&&this[m+L-1]!==0&&(xe=1),this[m+L]=(f/H>>0)-xe&255;return m+k},a.prototype.writeIntBE=function(f,m,k,M){if(f=+f,m=m>>>0,!M){const Oe=Math.pow(2,8*k-1);be(this,f,m,k,Oe-1,-Oe)}let L=k-1,H=1,xe=0;for(this[m+L]=f&255;--L>=0&&(H*=256);)f<0&&xe===0&&this[m+L+1]!==0&&(xe=1),this[m+L]=(f/H>>0)-xe&255;return m+k},a.prototype.writeInt8=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,1,127,-128),f<0&&(f=255+f+1),this[m]=f&255,m+1},a.prototype.writeInt16LE=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,2,32767,-32768),this[m]=f&255,this[m+1]=f>>>8,m+2},a.prototype.writeInt16BE=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,2,32767,-32768),this[m]=f>>>8,this[m+1]=f&255,m+2},a.prototype.writeInt32LE=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,4,2147483647,-2147483648),this[m]=f&255,this[m+1]=f>>>8,this[m+2]=f>>>16,this[m+3]=f>>>24,m+4},a.prototype.writeInt32BE=function(f,m,k){return f=+f,m=m>>>0,k||be(this,f,m,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=f&255,m+4},a.prototype.writeBigInt64LE=_e(function(f,m=0){return ct(this,f,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=_e(function(f,m=0){return ut(this,f,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(S,f,m,k,M,L){if(m+k>S.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Xe(S,f,m,k,M){return f=+f,m=m>>>0,M||Et(S,f,m,4),i.write(S,f,m,k,23,4),m+4}a.prototype.writeFloatLE=function(f,m,k){return Xe(this,f,m,!0,k)},a.prototype.writeFloatBE=function(f,m,k){return Xe(this,f,m,!1,k)};function Ct(S,f,m,k,M){return f=+f,m=m>>>0,M||Et(S,f,m,8),i.write(S,f,m,k,52,8),m+8}a.prototype.writeDoubleLE=function(f,m,k){return Ct(this,f,m,!0,k)},a.prototype.writeDoubleBE=function(f,m,k){return Ct(this,f,m,!1,k)},a.prototype.copy=function(f,m,k,M){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(k||(k=0),!M&&M!==0&&(M=this.length),m>=f.length&&(m=f.length),m||(m=0),M>0&&M<k&&(M=k),M===k||f.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),f.length-m<M-k&&(M=f.length-m+k);const L=M-k;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,k,M):Uint8Array.prototype.set.call(f,this.subarray(k,M),m),L},a.prototype.fill=function(f,m,k,M){if(typeof f=="string"){if(typeof m=="string"?(M=m,m=0,k=this.length):typeof k=="string"&&(M=k,k=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!a.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(f.length===1){const H=f.charCodeAt(0);(M==="utf8"&&H<128||M==="latin1")&&(f=H)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(m<0||this.length<m||this.length<k)throw new RangeError("Out of range index");if(k<=m)return this;m=m>>>0,k=k===void 0?this.length:k>>>0,f||(f=0);let L;if(typeof f=="number")for(L=m;L<k;++L)this[L]=f;else{const H=a.isBuffer(f)?f:a.from(f,M),xe=H.length;if(xe===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(L=0;L<k-m;++L)this[L+m]=H[L%xe]}return this};const qe={};function It(S,f,m){qe[S]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}It("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),It("ERR_INVALID_ARG_TYPE",function(S,f){return`The "${S}" argument must be of type number. Received type ${typeof f}`},TypeError),It("ERR_OUT_OF_RANGE",function(S,f,m){let k=`The value of "${S}" is out of range.`,M=m;return Number.isInteger(m)&&Math.abs(m)>2**32?M=ii(String(m)):typeof m=="bigint"&&(M=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(M=ii(M)),M+="n"),k+=` It must be ${f}. Received ${M}`,k},RangeError);function ii(S){let f="",m=S.length;const k=S[0]==="-"?1:0;for(;m>=k+4;m-=3)f=`_${S.slice(m-3,m)}${f}`;return`${S.slice(0,m)}${f}`}function bi(S,f,m){R(f,"offset"),(S[f]===void 0||S[f+m]===void 0)&&F(f,S.length-(m+1))}function C(S,f,m,k,M,L){if(S>m||S<f){const H=typeof f=="bigint"?"n":"";let xe;throw L>3?f===0||f===BigInt(0)?xe=`>= 0${H} and < 2${H} ** ${(L+1)*8}${H}`:xe=`>= -(2${H} ** ${(L+1)*8-1}${H}) and < 2 ** ${(L+1)*8-1}${H}`:xe=`>= ${f}${H} and <= ${m}${H}`,new qe.ERR_OUT_OF_RANGE("value",xe,S)}bi(k,M,L)}function R(S,f){if(typeof S!="number")throw new qe.ERR_INVALID_ARG_TYPE(f,"number",S)}function F(S,f,m){throw Math.floor(S)!==S?(R(S,m),new qe.ERR_OUT_OF_RANGE(m||"offset","an integer",S)):f<0?new qe.ERR_BUFFER_OUT_OF_BOUNDS:new qe.ERR_OUT_OF_RANGE(m||"offset",`>= ${m?1:0} and <= ${f}`,S)}const j=/[^+/0-9A-Za-z-_]/g;function K(S){if(S=S.split("=")[0],S=S.trim().replace(j,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function ee(S,f){f=f||1/0;let m;const k=S.length;let M=null;const L=[];for(let H=0;H<k;++H){if(m=S.charCodeAt(H),m>55295&&m<57344){if(!M){if(m>56319){(f-=3)>-1&&L.push(239,191,189);continue}else if(H+1===k){(f-=3)>-1&&L.push(239,191,189);continue}M=m;continue}if(m<56320){(f-=3)>-1&&L.push(239,191,189),M=m;continue}m=(M-55296<<10|m-56320)+65536}else M&&(f-=3)>-1&&L.push(239,191,189);if(M=null,m<128){if((f-=1)<0)break;L.push(m)}else if(m<2048){if((f-=2)<0)break;L.push(m>>6|192,m&63|128)}else if(m<65536){if((f-=3)<0)break;L.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((f-=4)<0)break;L.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return L}function ae(S){const f=[];for(let m=0;m<S.length;++m)f.push(S.charCodeAt(m)&255);return f}function te(S,f){let m,k,M;const L=[];for(let H=0;H<S.length&&!((f-=2)<0);++H)m=S.charCodeAt(H),k=m>>8,M=m%256,L.push(M),L.push(k);return L}function ie(S){return t.toByteArray(K(S))}function Y(S,f,m,k){let M;for(M=0;M<k&&!(M+m>=f.length||M>=S.length);++M)f[M+m]=S[M];return M}function he(S,f){return S instanceof f||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===f.name}function fe(S){return S!==S}const me=function(){const S="0123456789abcdef",f=new Array(256);for(let m=0;m<16;++m){const k=m*16;for(let M=0;M<16;++M)f[k+M]=S[m]+S[M]}return f}();function _e(S){return typeof BigInt>"u"?Re:S}function Re(){throw new Error("BigInt not supported")}})(ql);var Fo=ql,jn=Fo.Buffer,ri={},ai;for(ai in Fo)Fo.hasOwnProperty(ai)&&(ai==="SlowBuffer"||ai==="Buffer"||(ri[ai]=Fo[ai]));var Kn=ri.Buffer={};for(ai in jn)jn.hasOwnProperty(ai)&&(ai==="allocUnsafe"||ai==="allocUnsafeSlow"||(Kn[ai]=jn[ai]));ri.Buffer.prototype=jn.prototype;(!Kn.from||Kn.from===Uint8Array.from)&&(Kn.from=function(e,t,i){if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&typeof e.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return jn(e,t,i)});Kn.alloc||(Kn.alloc=function(e,t,i){if(typeof e!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=jn(e);return!t||t.length===0?n.fill(0):typeof i=="string"?n.fill(t,i):n.fill(t),n});if(!ri.kStringMaxLength)try{ri.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}ri.constants||(ri.constants={MAX_LENGTH:ri.kMaxLength},ri.kStringMaxLength&&(ri.constants.MAX_STRING_LENGTH=ri.kStringMaxLength));var rn=ri,Xl={},Mf="\uFEFF";Xl.PrependBOM=Jl;function Jl(e,t){this.encoder=e,this.addBOM=!0}Jl.prototype.write=function(e){return this.addBOM&&(e=Mf+e,this.addBOM=!1),this.encoder.write(e)};Jl.prototype.end=function(){return this.encoder.end()};Xl.StripBOM=Ql;function Ql(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}Ql.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t||(t[0]===Mf&&(t=t.slice(1),typeof this.options.stripBOM=="function"&&this.options.stripBOM()),this.pass=!0),t};Ql.prototype.end=function(){return this.decoder.end()};var ua={},ha={},xs={},S1={get exports(){return xs},set exports(e){xs=e}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hu;function w1(){return hu||(hu=1,function(e,t){var i=ql,n=i.Buffer;function s(r,a){for(var l in r)a[l]=r[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=o);function o(r,a,l){return n(r,a,l)}o.prototype=Object.create(n.prototype),s(n,o),o.from=function(r,a,l){if(typeof r=="number")throw new TypeError("Argument must not be a number");return n(r,a,l)},o.alloc=function(r,a,l){if(typeof r!="number")throw new TypeError("Argument must be a number");var c=n(r);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},o.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return n(r)},o.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(r)}}(S1,xs)),xs}var du;function E1(){if(du)return ha;du=1;var e=w1().Buffer,t=e.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(_){if(!_)return"utf8";for(var E;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(E)return;_=(""+_).toLowerCase(),E=!0}}function n(_){var E=i(_);if(typeof E!="string"&&(e.isEncoding===t||!t(_)))throw new Error("Unknown encoding: "+_);return E||_}ha.StringDecoder=s;function s(_){this.encoding=n(_);var E;switch(this.encoding){case"utf16le":this.text=h,this.end=p,E=4;break;case"utf8":this.fillLast=l,E=4;break;case"base64":this.text=g,this.end=y,E=3;break;default:this.write=b,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(E)}s.prototype.write=function(_){if(_.length===0)return"";var E,w;if(this.lastNeed){if(E=this.fillLast(_),E===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<_.length?E?E+this.text(_,w):this.text(_,w):E||""},s.prototype.end=u,s.prototype.text=c,s.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function o(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function r(_,E,w){var P=E.length-1;if(P<w)return 0;var A=o(E[P]);return A>=0?(A>0&&(_.lastNeed=A-1),A):--P<w||A===-2?0:(A=o(E[P]),A>=0?(A>0&&(_.lastNeed=A-2),A):--P<w||A===-2?0:(A=o(E[P]),A>=0?(A>0&&(A===2?A=0:_.lastNeed=A-3),A):0))}function a(_,E,w){if((E[0]&192)!==128)return _.lastNeed=0,"";if(_.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return _.lastNeed=1,"";if(_.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return _.lastNeed=2,""}}function l(_){var E=this.lastTotal-this.lastNeed,w=a(this,_);if(w!==void 0)return w;if(this.lastNeed<=_.length)return _.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,E,0,_.length),this.lastNeed-=_.length}function c(_,E){var w=r(this,_,E);if(!this.lastNeed)return _.toString("utf8",E);this.lastTotal=w;var P=_.length-(w-this.lastNeed);return _.copy(this.lastChar,0,P),_.toString("utf8",E,P)}function u(_){var E=_&&_.length?this.write(_):"";return this.lastNeed?E+"":E}function h(_,E){if((_.length-E)%2===0){var w=_.toString("utf16le",E);if(w){var P=w.charCodeAt(w.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",E,_.length-1)}function p(_){var E=_&&_.length?this.write(_):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,w)}return E}function g(_,E){var w=(_.length-E)%3;return w===0?_.toString("base64",E):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",E,_.length-w))}function y(_){var E=_&&_.length?this.write(_):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function b(_){return _.toString(this.encoding)}function v(_){return _&&_.length?this.write(_):""}return ha}var da,fu;function I1(){if(fu)return da;fu=1;var e=rn.Buffer;da={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:t};function t(l,c){this.enc=l.encodingName,this.bomAware=l.bomAware,this.enc==="base64"?this.encoder=o:this.enc==="cesu8"&&(this.enc="utf8",this.encoder=r,e.from("eda0bdedb2a9","hex").toString()!==""&&(this.decoder=a,this.defaultCharUnicode=c.defaultCharUnicode))}t.prototype.encoder=s,t.prototype.decoder=n;var i=E1().StringDecoder;i.prototype.end||(i.prototype.end=function(){});function n(l,c){this.decoder=new i(c.enc)}n.prototype.write=function(l){return e.isBuffer(l)||(l=e.from(l)),this.decoder.write(l)},n.prototype.end=function(){return this.decoder.end()};function s(l,c){this.enc=c.enc}s.prototype.write=function(l){return e.from(l,this.enc)},s.prototype.end=function(){};function o(l,c){this.prevStr=""}o.prototype.write=function(l){l=this.prevStr+l;var c=l.length-l.length%4;return this.prevStr=l.slice(c),l=l.slice(0,c),e.from(l,"base64")},o.prototype.end=function(){return e.from(this.prevStr,"base64")};function r(l,c){}r.prototype.write=function(l){for(var c=e.alloc(l.length*3),u=0,h=0;h<l.length;h++){var p=l.charCodeAt(h);p<128?c[u++]=p:p<2048?(c[u++]=192+(p>>>6),c[u++]=128+(p&63)):(c[u++]=224+(p>>>12),c[u++]=128+(p>>>6&63),c[u++]=128+(p&63))}return c.slice(0,u)},r.prototype.end=function(){};function a(l,c){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=c.defaultCharUnicode}return a.prototype.write=function(l){for(var c=this.acc,u=this.contBytes,h=this.accBytes,p="",g=0;g<l.length;g++){var y=l[g];(y&192)!==128?(u>0&&(p+=this.defaultCharUnicode,u=0),y<128?p+=String.fromCharCode(y):y<224?(c=y&31,u=1,h=1):y<240?(c=y&15,u=2,h=1):p+=this.defaultCharUnicode):u>0?(c=c<<6|y&63,u--,h++,u===0&&(h===2&&c<128&&c>0?p+=this.defaultCharUnicode:h===3&&c<2048?p+=this.defaultCharUnicode:p+=String.fromCharCode(c))):p+=this.defaultCharUnicode}return this.acc=c,this.contBytes=u,this.accBytes=h,p},a.prototype.end=function(){var l=0;return this.contBytes>0&&(l+=this.defaultCharUnicode),l},da}var Ci={},pu;function P1(){if(pu)return Ci;pu=1;var e=rn.Buffer;Ci._utf32=t;function t(c,u){this.iconv=u,this.bomAware=!0,this.isLE=c.isLE}Ci.utf32le={type:"_utf32",isLE:!0},Ci.utf32be={type:"_utf32",isLE:!1},Ci.ucs4le="utf32le",Ci.ucs4be="utf32be",t.prototype.encoder=i,t.prototype.decoder=n;function i(c,u){this.isLE=u.isLE,this.highSurrogate=0}i.prototype.write=function(c){for(var u=e.from(c,"ucs2"),h=e.alloc(u.length*2),p=this.isLE?h.writeUInt32LE:h.writeUInt32BE,g=0,y=0;y<u.length;y+=2){var b=u.readUInt16LE(y),v=55296<=b&&b<56320,_=56320<=b&&b<57344;if(this.highSurrogate)if(v||!_)p.call(h,this.highSurrogate,g),g+=4;else{var E=(this.highSurrogate-55296<<10|b-56320)+65536;p.call(h,E,g),g+=4,this.highSurrogate=0;continue}v?this.highSurrogate=b:(p.call(h,b,g),g+=4,this.highSurrogate=0)}return g<h.length&&(h=h.slice(0,g)),h},i.prototype.end=function(){if(this.highSurrogate){var c=e.alloc(4);return this.isLE?c.writeUInt32LE(this.highSurrogate,0):c.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,c}};function n(c,u){this.isLE=u.isLE,this.badChar=u.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}n.prototype.write=function(c){if(c.length===0)return"";var u=0,h=0,p=e.alloc(c.length+4),g=0,y=this.isLE,b=this.overflow,v=this.badChar;if(b.length>0){for(;u<c.length&&b.length<4;u++)b.push(c[u]);b.length===4&&(y?h=b[u]|b[u+1]<<8|b[u+2]<<16|b[u+3]<<24:h=b[u+3]|b[u+2]<<8|b[u+1]<<16|b[u]<<24,b.length=0,g=s(p,g,h,v))}for(;u<c.length-3;u+=4)y?h=c[u]|c[u+1]<<8|c[u+2]<<16|c[u+3]<<24:h=c[u+3]|c[u+2]<<8|c[u+1]<<16|c[u]<<24,g=s(p,g,h,v);for(;u<c.length;u++)b.push(c[u]);return p.slice(0,g).toString("ucs2")};function s(c,u,h,p){if((h<0||h>1114111)&&(h=p),h>=65536){h-=65536;var g=55296|h>>10;c[u++]=g&255,c[u++]=g>>8;var h=56320|h&1023}return c[u++]=h&255,c[u++]=h>>8,u}n.prototype.end=function(){this.overflow.length=0},Ci.utf32=o,Ci.ucs4="utf32";function o(c,u){this.iconv=u}o.prototype.encoder=r,o.prototype.decoder=a;function r(c,u){c=c||{},c.addBOM===void 0&&(c.addBOM=!0),this.encoder=u.iconv.getEncoder(c.defaultEncoding||"utf-32le",c)}r.prototype.write=function(c){return this.encoder.write(c)},r.prototype.end=function(){return this.encoder.end()};function a(c,u){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=c||{},this.iconv=u.iconv}a.prototype.write=function(c){if(!this.decoder){if(this.initialBufs.push(c),this.initialBufsLen+=c.length,this.initialBufsLen<32)return"";var u=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(u,this.options);for(var h="",p=0;p<this.initialBufs.length;p++)h+=this.decoder.write(this.initialBufs[p]);return this.initialBufs.length=this.initialBufsLen=0,h}return this.decoder.write(c)},a.prototype.end=function(){if(!this.decoder){var c=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);var p=this.decoder.end();return p&&(u+=p),this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.end()};function l(c,u){var h=[],p=0,g=0,y=0,b=0,v=0;e:for(var _=0;_<c.length;_++)for(var E=c[_],w=0;w<E.length;w++)if(h.push(E[w]),h.length===4){if(p===0){if(h[0]===255&&h[1]===254&&h[2]===0&&h[3]===0)return"utf-32le";if(h[0]===0&&h[1]===0&&h[2]===254&&h[3]===255)return"utf-32be"}if((h[0]!==0||h[1]>16)&&y++,(h[3]!==0||h[2]>16)&&g++,h[0]===0&&h[1]===0&&(h[2]!==0||h[3]!==0)&&v++,(h[0]!==0||h[1]!==0)&&h[2]===0&&h[3]===0&&b++,h.length=0,p++,p>=100)break e}return v-y>b-g?"utf-32be":v-y<b-g?"utf-32le":u||"utf-32le"}return Ci}var po={},gu;function k1(){if(gu)return po;gu=1;var e=rn.Buffer;po.utf16be=t;function t(){}t.prototype.encoder=i,t.prototype.decoder=n,t.prototype.bomAware=!0;function i(){}i.prototype.write=function(l){for(var c=e.from(l,"ucs2"),u=0;u<c.length;u+=2){var h=c[u];c[u]=c[u+1],c[u+1]=h}return c},i.prototype.end=function(){};function n(){this.overflowByte=-1}n.prototype.write=function(l){if(l.length==0)return"";var c=e.alloc(l.length+1),u=0,h=0;for(this.overflowByte!==-1&&(c[0]=l[0],c[1]=this.overflowByte,u=1,h=2);u<l.length-1;u+=2,h+=2)c[h]=l[u+1],c[h+1]=l[u];return this.overflowByte=u==l.length-1?l[l.length-1]:-1,c.slice(0,h).toString("ucs2")},n.prototype.end=function(){this.overflowByte=-1},po.utf16=s;function s(l,c){this.iconv=c}s.prototype.encoder=o,s.prototype.decoder=r;function o(l,c){l=l||{},l.addBOM===void 0&&(l.addBOM=!0),this.encoder=c.iconv.getEncoder("utf-16le",l)}o.prototype.write=function(l){return this.encoder.write(l)},o.prototype.end=function(){return this.encoder.end()};function r(l,c){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=l||{},this.iconv=c.iconv}r.prototype.write=function(l){if(!this.decoder){if(this.initialBufs.push(l),this.initialBufsLen+=l.length,this.initialBufsLen<16)return"";var c=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);return this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.write(l)},r.prototype.end=function(){if(!this.decoder){var l=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(l,this.options);for(var c="",u=0;u<this.initialBufs.length;u++)c+=this.decoder.write(this.initialBufs[u]);var h=this.decoder.end();return h&&(c+=h),this.initialBufs.length=this.initialBufsLen=0,c}return this.decoder.end()};function a(l,c){var u=[],h=0,p=0,g=0;e:for(var y=0;y<l.length;y++)for(var b=l[y],v=0;v<b.length;v++)if(u.push(b[v]),u.length===2){if(h===0){if(u[0]===255&&u[1]===254)return"utf-16le";if(u[0]===254&&u[1]===255)return"utf-16be"}if(u[0]===0&&u[1]!==0&&g++,u[0]!==0&&u[1]===0&&p++,u.length=0,h++,h>=100)break e}return g>p?"utf-16be":g<p?"utf-16le":c||"utf-16le"}return po}var us={},mu;function A1(){if(mu)return us;mu=1;var e=rn.Buffer;us.utf7=t,us.unicode11utf7="utf7";function t(b,v){this.iconv=v}t.prototype.encoder=n,t.prototype.decoder=s,t.prototype.bomAware=!0;var i=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function n(b,v){this.iconv=v.iconv}n.prototype.write=function(b){return e.from(b.replace(i,function(v){return"+"+(v==="+"?"":this.iconv.encode(v,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},n.prototype.end=function(){};function s(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}for(var o=/[A-Za-z0-9\/+]/,r=[],a=0;a<256;a++)r[a]=o.test(String.fromCharCode(a));var l="+".charCodeAt(0),c="-".charCodeAt(0),u="&".charCodeAt(0);s.prototype.write=function(b){for(var v="",_=0,E=this.inBase64,w=this.base64Accum,P=0;P<b.length;P++)if(!E)b[P]==l&&(v+=this.iconv.decode(b.slice(_,P),"ascii"),_=P+1,E=!0);else if(!r[b[P]]){if(P==_&&b[P]==c)v+="+";else{var A=w+this.iconv.decode(b.slice(_,P),"ascii");v+=this.iconv.decode(e.from(A,"base64"),"utf16-be")}b[P]!=c&&P--,_=P+1,E=!1,w=""}if(!E)v+=this.iconv.decode(b.slice(_),"ascii");else{var A=w+this.iconv.decode(b.slice(_),"ascii"),O=A.length-A.length%8;w=A.slice(O),A=A.slice(0,O),v+=this.iconv.decode(e.from(A,"base64"),"utf16-be")}return this.inBase64=E,this.base64Accum=w,v},s.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(e.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},us.utf7imap=h;function h(b,v){this.iconv=v}h.prototype.encoder=p,h.prototype.decoder=g,h.prototype.bomAware=!0;function p(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=e.alloc(6),this.base64AccumIdx=0}p.prototype.write=function(b){for(var v=this.inBase64,_=this.base64Accum,E=this.base64AccumIdx,w=e.alloc(b.length*5+10),P=0,A=0;A<b.length;A++){var O=b.charCodeAt(A);32<=O&&O<=126?(v&&(E>0&&(P+=w.write(_.slice(0,E).toString("base64").replace(/\//g,",").replace(/=+$/,""),P),E=0),w[P++]=c,v=!1),v||(w[P++]=O,O===u&&(w[P++]=c))):(v||(w[P++]=u,v=!0),v&&(_[E++]=O>>8,_[E++]=O&255,E==_.length&&(P+=w.write(_.toString("base64").replace(/\//g,","),P),E=0)))}return this.inBase64=v,this.base64AccumIdx=E,w.slice(0,P)},p.prototype.end=function(){var b=e.alloc(10),v=0;return this.inBase64&&(this.base64AccumIdx>0&&(v+=b.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),v),this.base64AccumIdx=0),b[v++]=c,this.inBase64=!1),b.slice(0,v)};function g(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}var y=r.slice();return y[",".charCodeAt(0)]=!0,g.prototype.write=function(b){for(var v="",_=0,E=this.inBase64,w=this.base64Accum,P=0;P<b.length;P++)if(!E)b[P]==u&&(v+=this.iconv.decode(b.slice(_,P),"ascii"),_=P+1,E=!0);else if(!y[b[P]]){if(P==_&&b[P]==c)v+="&";else{var A=w+this.iconv.decode(b.slice(_,P),"ascii").replace(/,/g,"/");v+=this.iconv.decode(e.from(A,"base64"),"utf16-be")}b[P]!=c&&P--,_=P+1,E=!1,w=""}if(!E)v+=this.iconv.decode(b.slice(_),"ascii");else{var A=w+this.iconv.decode(b.slice(_),"ascii").replace(/,/g,"/"),O=A.length-A.length%8;w=A.slice(O),A=A.slice(0,O),v+=this.iconv.decode(e.from(A,"base64"),"utf16-be")}return this.inBase64=E,this.base64Accum=w,v},g.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(e.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},us}var fa={},bu;function C1(){if(bu)return fa;bu=1;var e=rn.Buffer;fa._sbcs=t;function t(s,o){if(!s)throw new Error("SBCS codec is called without the data.");if(!s.chars||s.chars.length!==128&&s.chars.length!==256)throw new Error("Encoding '"+s.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(s.chars.length===128){for(var r="",a=0;a<128;a++)r+=String.fromCharCode(a);s.chars=r+s.chars}this.decodeBuf=e.from(s.chars,"ucs2");for(var l=e.alloc(65536,o.defaultCharSingleByte.charCodeAt(0)),a=0;a<s.chars.length;a++)l[s.chars.charCodeAt(a)]=a;this.encodeBuf=l}t.prototype.encoder=i,t.prototype.decoder=n;function i(s,o){this.encodeBuf=o.encodeBuf}i.prototype.write=function(s){for(var o=e.alloc(s.length),r=0;r<s.length;r++)o[r]=this.encodeBuf[s.charCodeAt(r)];return o},i.prototype.end=function(){};function n(s,o){this.decodeBuf=o.decodeBuf}return n.prototype.write=function(s){for(var o=this.decodeBuf,r=e.alloc(s.length*2),a=0,l=0,c=0;c<s.length;c++)a=s[c]*2,l=c*2,r[l]=o[a],r[l+1]=o[a+1];return r.toString("ucs2")},n.prototype.end=function(){},fa}var pa,yu;function T1(){return yu||(yu=1,pa={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}),pa}var ga,_u;function M1(){return _u||(_u=1,ga={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},iso646cn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}`},iso646jp:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_\`abcdefghijklmnopqrstuvwxyz{|}`},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}),ga}var ma={},vu;function x1(){if(vu)return ma;vu=1;var e=rn.Buffer;ma._dbcs=l;for(var t=-1,i=-2,n=-10,s=-1e3,o=new Array(256),r=-1,a=0;a<256;a++)o[a]=t;function l(p,g){if(this.encodingName=p.encodingName,!p)throw new Error("DBCS codec is called without the data.");if(!p.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var y=p.table();this.decodeTables=[],this.decodeTables[0]=o.slice(0),this.decodeTableSeq=[];for(var b=0;b<y.length;b++)this._addDecodeChunk(y[b]);if(typeof p.gb18030=="function"){this.gb18030=p.gb18030();var v=this.decodeTables.length;this.decodeTables.push(o.slice(0));var _=this.decodeTables.length;this.decodeTables.push(o.slice(0));for(var E=this.decodeTables[0],b=129;b<=254;b++)for(var w=this.decodeTables[s-E[b]],P=48;P<=57;P++){if(w[P]===t)w[P]=s-v;else if(w[P]>s)throw new Error("gb18030 decode tables conflict at byte 2");for(var A=this.decodeTables[s-w[P]],O=129;O<=254;O++){if(A[O]===t)A[O]=s-_;else{if(A[O]===s-_)continue;if(A[O]>s)throw new Error("gb18030 decode tables conflict at byte 3")}for(var U=this.decodeTables[s-A[O]],W=48;W<=57;W++)U[W]===t&&(U[W]=i)}}}this.defaultCharUnicode=g.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var Z={};if(p.encodeSkipVals)for(var b=0;b<p.encodeSkipVals.length;b++){var q=p.encodeSkipVals[b];if(typeof q=="number")Z[q]=!0;else for(var P=q.from;P<=q.to;P++)Z[P]=!0}if(this._fillEncodeTable(0,0,Z),p.encodeAdd)for(var Q in p.encodeAdd)Object.prototype.hasOwnProperty.call(p.encodeAdd,Q)&&this._setEncodeChar(Q.charCodeAt(0),p.encodeAdd[Q]);this.defCharSB=this.encodeTable[0][g.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===t&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===t&&(this.defCharSB="?".charCodeAt(0))}l.prototype.encoder=c,l.prototype.decoder=u,l.prototype._getDecodeTrieNode=function(p){for(var g=[];p>0;p>>>=8)g.push(p&255);g.length==0&&g.push(0);for(var y=this.decodeTables[0],b=g.length-1;b>0;b--){var v=y[g[b]];if(v==t)y[g[b]]=s-this.decodeTables.length,this.decodeTables.push(y=o.slice(0));else if(v<=s)y=this.decodeTables[s-v];else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+p.toString(16))}return y},l.prototype._addDecodeChunk=function(p){var g=parseInt(p[0],16),y=this._getDecodeTrieNode(g);g=g&255;for(var b=1;b<p.length;b++){var v=p[b];if(typeof v=="string")for(var _=0;_<v.length;){var E=v.charCodeAt(_++);if(55296<=E&&E<56320){var w=v.charCodeAt(_++);if(56320<=w&&w<57344)y[g++]=65536+(E-55296)*1024+(w-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+p[0])}else if(4080<E&&E<=4095){for(var P=4095-E+2,A=[],O=0;O<P;O++)A.push(v.charCodeAt(_++));y[g++]=n-this.decodeTableSeq.length,this.decodeTableSeq.push(A)}else y[g++]=E}else if(typeof v=="number")for(var U=y[g-1]+1,_=0;_<v;_++)y[g++]=U++;else throw new Error("Incorrect type '"+typeof v+"' given in "+this.encodingName+" at chunk "+p[0])}if(g>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+p[0]+": too long"+g)},l.prototype._getEncodeBucket=function(p){var g=p>>8;return this.encodeTable[g]===void 0&&(this.encodeTable[g]=o.slice(0)),this.encodeTable[g]},l.prototype._setEncodeChar=function(p,g){var y=this._getEncodeBucket(p),b=p&255;y[b]<=n?this.encodeTableSeq[n-y[b]][r]=g:y[b]==t&&(y[b]=g)},l.prototype._setEncodeSequence=function(p,g){var y=p[0],b=this._getEncodeBucket(y),v=y&255,_;b[v]<=n?_=this.encodeTableSeq[n-b[v]]:(_={},b[v]!==t&&(_[r]=b[v]),b[v]=n-this.encodeTableSeq.length,this.encodeTableSeq.push(_));for(var E=1;E<p.length-1;E++){var w=_[y];typeof w=="object"?_=w:(_=_[y]={},w!==void 0&&(_[r]=w))}y=p[p.length-1],_[y]=g},l.prototype._fillEncodeTable=function(p,g,y){for(var b=this.decodeTables[p],v=!1,_={},E=0;E<256;E++){var w=b[E],P=g+E;if(!y[P])if(w>=0)this._setEncodeChar(w,P),v=!0;else if(w<=s){var A=s-w;if(!_[A]){var O=P<<8>>>0;this._fillEncodeTable(A,O,y)?v=!0:_[A]=!0}}else w<=n&&(this._setEncodeSequence(this.decodeTableSeq[n-w],P),v=!0)}return v};function c(p,g){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=g.encodeTable,this.encodeTableSeq=g.encodeTableSeq,this.defaultCharSingleByte=g.defCharSB,this.gb18030=g.gb18030}c.prototype.write=function(p){for(var g=e.alloc(p.length*(this.gb18030?4:3)),y=this.leadSurrogate,b=this.seqObj,v=-1,_=0,E=0;;){if(v===-1){if(_==p.length)break;var w=p.charCodeAt(_++)}else{var w=v;v=-1}if(55296<=w&&w<57344)if(w<56320)if(y===-1){y=w;continue}else y=w,w=t;else y!==-1?(w=65536+(y-55296)*1024+(w-56320),y=-1):w=t;else y!==-1&&(v=w,w=t,y=-1);var P=t;if(b!==void 0&&w!=t){var A=b[w];if(typeof A=="object"){b=A;continue}else typeof A=="number"?P=A:A==null&&(A=b[r],A!==void 0&&(P=A,v=w));b=void 0}else if(w>=0){var O=this.encodeTable[w>>8];if(O!==void 0&&(P=O[w&255]),P<=n){b=this.encodeTableSeq[n-P];continue}if(P==t&&this.gb18030){var U=h(this.gb18030.uChars,w);if(U!=-1){var P=this.gb18030.gbChars[U]+(w-this.gb18030.uChars[U]);g[E++]=129+Math.floor(P/12600),P=P%12600,g[E++]=48+Math.floor(P/1260),P=P%1260,g[E++]=129+Math.floor(P/10),P=P%10,g[E++]=48+P;continue}}}P===t&&(P=this.defaultCharSingleByte),P<256?g[E++]=P:P<65536?(g[E++]=P>>8,g[E++]=P&255):P<16777216?(g[E++]=P>>16,g[E++]=P>>8&255,g[E++]=P&255):(g[E++]=P>>>24,g[E++]=P>>>16&255,g[E++]=P>>>8&255,g[E++]=P&255)}return this.seqObj=b,this.leadSurrogate=y,g.slice(0,E)},c.prototype.end=function(){if(!(this.leadSurrogate===-1&&this.seqObj===void 0)){var p=e.alloc(10),g=0;if(this.seqObj){var y=this.seqObj[r];y!==void 0&&(y<256?p[g++]=y:(p[g++]=y>>8,p[g++]=y&255)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(p[g++]=this.defaultCharSingleByte,this.leadSurrogate=-1),p.slice(0,g)}},c.prototype.findIdx=h;function u(p,g){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=g.decodeTables,this.decodeTableSeq=g.decodeTableSeq,this.defaultCharUnicode=g.defaultCharUnicode,this.gb18030=g.gb18030}u.prototype.write=function(p){for(var g=e.alloc(p.length*2),y=this.nodeIdx,b=this.prevBytes,v=this.prevBytes.length,_=-this.prevBytes.length,E,w=0,P=0;w<p.length;w++){var A=w>=0?p[w]:b[w+v],E=this.decodeTables[y][A];if(!(E>=0))if(E===t)E=this.defaultCharUnicode.charCodeAt(0),w=_;else if(E===i){if(w>=3)var O=(p[w-3]-129)*12600+(p[w-2]-48)*1260+(p[w-1]-129)*10+(A-48);else var O=(b[w-3+v]-129)*12600+((w-2>=0?p[w-2]:b[w-2+v])-48)*1260+((w-1>=0?p[w-1]:b[w-1+v])-129)*10+(A-48);var U=h(this.gb18030.gbChars,O);E=this.gb18030.uChars[U]+O-this.gb18030.gbChars[U]}else if(E<=s){y=s-E;continue}else if(E<=n){for(var W=this.decodeTableSeq[n-E],Z=0;Z<W.length-1;Z++)E=W[Z],g[P++]=E&255,g[P++]=E>>8;E=W[W.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+E+" at "+y+"/"+A);if(E>=65536){E-=65536;var q=55296|E>>10;g[P++]=q&255,g[P++]=q>>8,E=56320|E&1023}g[P++]=E&255,g[P++]=E>>8,y=0,_=w+1}return this.nodeIdx=y,this.prevBytes=_>=0?Array.prototype.slice.call(p,_):b.slice(_+v).concat(Array.prototype.slice.call(p)),g.slice(0,P).toString("ucs2")},u.prototype.end=function(){for(var p="";this.prevBytes.length>0;){p+=this.defaultCharUnicode;var g=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,g.length>0&&(p+=this.write(g))}return this.prevBytes=[],this.nodeIdx=0,p};function h(p,g){if(p[0]>g)return-1;for(var y=0,b=p.length;y<b-1;){var v=y+(b-y+1>>1);p[v]<=g?y=v:b=v}return y}return ma}const R1=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]],N1=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]],ba=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]],Su=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]],O1=[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],L1=[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3],B1={uChars:O1,gbChars:L1},D1=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]],wu=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]],F1=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];var ya,Eu;function $1(){return Eu||(Eu=1,ya={shiftjis:{type:"_dbcs",table:function(){return R1},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return N1},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return ba}},gbk:{type:"_dbcs",table:function(){return ba.concat(Su)}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return ba.concat(Su)},gb18030:function(){return B1},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return D1}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return wu}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return wu.concat(F1)},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}),ya}var Iu;function H1(){return Iu||(Iu=1,function(e){for(var t=[I1(),P1(),k1(),A1(),C1(),T1(),M1(),x1(),$1()],i=0;i<t.length;i++){var n=t[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}}(ua)),ua}var _a,Pu;function U1(){if(Pu)return _a;Pu=1;var e=rn.Buffer;return _a=function(t){var i=t.Transform;function n(o,r){this.conv=o,r=r||{},r.decodeStrings=!1,i.call(this,r)}n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype._transform=function(o,r,a){if(typeof o!="string")return a(new Error("Iconv encoding stream needs strings as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l),a()}catch(c){a(c)}},n.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r),o()}catch(a){o(a)}},n.prototype.collect=function(o){var r=[];return this.on("error",o),this.on("data",function(a){r.push(a)}),this.on("end",function(){o(null,e.concat(r))}),this};function s(o,r){this.conv=o,r=r||{},r.encoding=this.encoding="utf8",i.call(this,r)}return s.prototype=Object.create(i.prototype,{constructor:{value:s}}),s.prototype._transform=function(o,r,a){if(!e.isBuffer(o)&&!(o instanceof Uint8Array))return a(new Error("Iconv decoding stream needs buffers as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l,this.encoding),a()}catch(c){a(c)}},s.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r,this.encoding),o()}catch(a){o(a)}},s.prototype.collect=function(o){var r="";return this.on("error",o),this.on("data",function(a){r+=a}),this.on("end",function(){o(null,r)}),this},{IconvLiteEncoderStream:n,IconvLiteDecoderStream:s}},_a}const z1={},G1=Object.freeze(Object.defineProperty({__proto__:null,default:z1},Symbol.toStringTag,{value:"Module"})),W1=h1(G1);(function(e){var t=rn.Buffer,i=Xl,n=e.exports;n.encodings=null,n.defaultCharUnicode="",n.defaultCharSingleByte="?",n.encode=function(r,a,l){r=""+(r||"");var c=n.getEncoder(a,l),u=c.write(r),h=c.end();return h&&h.length>0?t.concat([u,h]):u},n.decode=function(r,a,l){typeof r=="string"&&(n.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),n.skipDecodeWarning=!0),r=t.from(""+(r||""),"binary"));var c=n.getDecoder(a,l),u=c.write(r),h=c.end();return h?u+h:u},n.encodingExists=function(r){try{return n.getCodec(r),!0}catch{return!1}},n.toEncoding=n.encode,n.fromEncoding=n.decode,n._codecDataCache={},n.getCodec=function(r){n.encodings||(n.encodings=H1());for(var a=n._canonicalizeEncoding(r),l={};;){var c=n._codecDataCache[a];if(c)return c;var u=n.encodings[a];switch(typeof u){case"string":a=u;break;case"object":for(var h in u)l[h]=u[h];l.encodingName||(l.encodingName=a),a=u.type;break;case"function":return l.encodingName||(l.encodingName=a),c=new u(l,n),n._codecDataCache[l.encodingName]=c,c;default:throw new Error("Encoding not recognized: '"+r+"' (searched as: '"+a+"')")}}},n._canonicalizeEncoding=function(o){return(""+o).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},n.getEncoder=function(r,a){var l=n.getCodec(r),c=new l.encoder(a,l);return l.bomAware&&a&&a.addBOM&&(c=new i.PrependBOM(c,a)),c},n.getDecoder=function(r,a){var l=n.getCodec(r),c=new l.decoder(a,l);return l.bomAware&&!(a&&a.stripBOM===!1)&&(c=new i.StripBOM(c,a)),c},n.enableStreamingAPI=function(r){if(!n.supportsStreams){var a=U1()(r);n.IconvLiteEncoderStream=a.IconvLiteEncoderStream,n.IconvLiteDecoderStream=a.IconvLiteDecoderStream,n.encodeStream=function(c,u){return new n.IconvLiteEncoderStream(n.getEncoder(c,u),u)},n.decodeStream=function(c,u){return new n.IconvLiteDecoderStream(n.getDecoder(c,u),u)},n.supportsStreams=!0}};var s;try{s=W1}catch{}s&&s.Transform?n.enableStreamingAPI(s):n.encodeStream=n.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}})(d1);function V1(e){return e>=1500?"":e>=600?"":e>=400?"":e>=200?"":e>=-200?"":e>=-400?"":e>=-600?"":e>=-1500?"":""}function il(e,t){return 100/(1+Math.exp(-e/t))}var Kt=(e=>(e[e.PLAYER=0]="PLAYER",e[e.OPPONENT=1]="OPPONENT",e[e.RESEARCHER=2]="RESEARCHER",e[e.RESEARCHER_2=3]="RESEARCHER_2",e[e.RESEARCHER_3=4]="RESEARCHER_3",e[e.RESEARCHER_4=5]="RESEARCHER_4",e))(Kt||{});function j1(e){const t=/^\*=([+-]?[.0-9]+)/.exec(e);return t?Number(t[1]):void 0}function K1(e){const t=/^#=([+-]?[.0-9]+)/.exec(e);return t?Number(t[1]):void 0}function q1(e){const t=/^\* *([+-]?[.0-9]+)/.exec(e);return t?Number(t[1]):void 0}function ku(e){e.forEach(t=>{const i=t.customData||{},n=t.comment.split(`
`);for(const s of n){const o=j1(s)||q1(s);o!==void 0&&(i.playerSearchInfo={usi:e.usi,score:o});const r=K1(s);r!==void 0&&(i.researchInfo={usi:e.usi,score:r})}t.customData=i})}function Y1(e){switch(e){case 0:return"*";default:return"#"}}function X1(e,t,i){const n=Y1(t);let s="";return i.mate&&(s+=`${Math.abs(i.mate)}
`),i.score!==void 0&&(s+=V1(i.score)+`
`,s+=`${n}=${i.score}
`),i.pv&&i.pv.length!==0&&(s+=`${n}=${q0(e,i.pv)}
`),s}function J1(e,t){return t.split(`
`).filter(i=>i.match(/^[#*]=/)).map(i=>X0(e,i.split("=",2)[1]))}function Q1(e){return mf(e.timeSeconds)+"+"+String(e.byoyomi).padStart(2,"0")}class Z1{constructor(){T(this,"_record",new Tt);T(this,"_recordFilePath");T(this,"onChangeFilePath",()=>{});T(this,"onChangePosition",()=>{});this.setupRecordHandler()}get record(){return this._record}get recordFilePath(){return this._recordFilePath}updateRecordFilePath(t){this._recordFilePath=t,this.onChangeFilePath(t)}clearRecordFilePath(){this._recordFilePath=void 0,this.onChangeFilePath()}reset(t){if(t){const i=new Nt;i.reset(t),this._record.clear(i)}else this._record.clear();this.clearRecordFilePath()}resetByCurrentPosition(){this._record.clear(this._record.position),this.clearRecordFilePath()}importRecord(t,i){let n;switch(i||(i=Sb(t)),i){case Un.SFEN:{const s=Nt.newBySFEN(t);n=s?new Tt(s):new Error(G.failedToParseSFEN);break}case Un.USI:n=Tt.newByUSI(t);break;case Un.KIF:n=Zc(t);break;case Un.CSA:n=tu(t);break;default:n=new Error(G.failedToDetectRecordFormat);break}if(n instanceof Error)return ou(n);this._record=n,this.setupRecordHandler(),this.clearRecordFilePath(),ku(this._record)}importRecordFromBuffer(t,i){let n;if(i.match(/\.kif$/)||i.match(/\.kifu$/)){const s=i.match(/\.kif$/)?mr.decode(t,"Shift_JIS"):new TextDecoder().decode(t);n=Zc(s)}else i.match(/\.csa$/)?n=tu(new TextDecoder().decode(t)):n=new Error(`${G.unknownFileExtension}: ${i}`);if(n instanceof Error)return ou(n);this._record=n,this.setupRecordHandler(),this.updateRecordFilePath(i),ku(this._record)}exportRecordAsBuffer(t,i){let n;if(t.match(/\.kif$/)||t.match(/\.kifu$/)){const s=bf(this.record,i);n=t.match(/\.kif$/)?mr.encode(s,"Shift_JIS"):new TextEncoder().encode(s)}else if(t.match(/\.csa$/))n=new TextEncoder().encode(vf(this.record,i));else return new Error(`${G.unknownFileExtension}: ${t}`);return this.updateRecordFilePath(t),n}swapNextTurn(){const t=this.record.position.clone();t.setColor(xt(t.color)),this._record.clear(t),this.clearRecordFilePath()}changePosition(t){const i=this.record.position.clone();i.edit(t),this._record.clear(i),this.clearRecordFilePath()}changePly(t){this._record.goto(t)}changeBranch(t){return this._record.switchBranchByIndex(t)}swapWithNextBranch(){return this._record.swapWithNextBranch()}swapWithPreviousBranch(){return this._record.swapWithPreviousBranch()}removeCurrentMove(){this._record.removeCurrentMove()}removeNextMove(){this._record.removeNextMove()}updateComment(t){this._record.current.comment=t}appendComment(t,i){if(!t)return;const n=this._record.current.comment,s=this.record.current.comment?`
`:"";switch(i){case Di.NONE:break;case Di.INSERT:this._record.current.comment=t+s+n;break;case Di.APPEND:this._record.current.comment=n+s+t;break;case Di.OVERWRITE:this._record.current.comment=t;break}}appendSearchComment(t,i,n,s){const o=X1(this.record.position,t,i);this.appendComment((s?s+`
`:"")+o,n)}get inCommentPVs(){return J1(this.record.position,this.record.current.comment)}setGameStartMetadata(t){t.gameTitle&&this._record.metadata.setStandardMetadata(J.TITLE,t.gameTitle),t.blackName&&this._record.metadata.setStandardMetadata(J.BLACK_NAME,t.blackName),t.whiteName&&this._record.metadata.setStandardMetadata(J.WHITE_NAME,t.whiteName),this._record.metadata.setStandardMetadata(J.DATE,Cf()),this._record.metadata.setStandardMetadata(J.START_DATETIME,uu()),t.timeLimit&&this._record.metadata.setStandardMetadata(J.TIME_LIMIT,Q1(t.timeLimit))}setGameEndMetadata(){this._record.metadata.setStandardMetadata(J.END_DATETIME,uu())}updateSearchInfo(t,i){var s,o,r,a;const n=this.record.current.customData||{};switch(t){case 0:n.playerSearchInfo=i;break;case 1:n.opponentSearchInfo=i;break;case 2:(i.depth||0)>=(((s=n.researchInfo)==null?void 0:s.depth)||0)&&(n.researchInfo=i);break;case 3:(i.depth||0)>=(((o=n.researchInfo2)==null?void 0:o.depth)||0)&&(n.researchInfo2=i);break;case 4:(i.depth||0)>=(((r=n.researchInfo3)==null?void 0:r.depth)||0)&&(n.researchInfo3=i);break;case 5:(i.depth||0)>=(((a=n.researchInfo4)==null?void 0:a.depth)||0)&&(n.researchInfo4=i);break}this._record.current.customData=n}appendMove(t){return this._record.append(t.move,t.moveOption)?(t.elapsedMs!==void 0&&this._record.current.setElapsedMs(t.elapsedMs),!0):!1}updateStandardMetadata(t){this._record.metadata.setStandardMetadata(t.key,t.value)}on(t,i){switch(t){case"changeFilePath":this.onChangeFilePath=i;break;case"changePosition":this.onChangePosition=i,this.setupRecordHandler();break}}setupRecordHandler(){this._record.on("changePosition",this.onChangePosition)}}class ey{constructor(){T(this,"searchHandler")}isEngine(){return!1}async startSearch(t,i,n,s,o){this.searchHandler=o}async startPonder(){}async stop(){}async gameover(){}async close(){this.searchHandler=void 0}doMove(t){const i=this.searchHandler;this.searchHandler=void 0,i&&i.onMove(t)}resign(){const t=this.searchHandler;this.searchHandler=void 0,t&&t.onResign()}win(){const t=this.searchHandler;this.searchHandler=void 0,t&&t.onWin()}}const qn=new ey;function ty(e,t){const i=[],n=e.clone();for(const s of t){const o=n.createMoveByUSI(s);if(!o||!n.doMove(o))break;i.push(o)}return i}class Zl{constructor(t,i,n){T(this,"sessionID",0);T(this,"usi");T(this,"position");T(this,"searchHandler");T(this,"ponder");T(this,"inPonder",!1);T(this,"info");T(this,"usiInfoTimeout");this.setting=t,this.timeoutSeconds=i,this.onSearchInfo=n}async launch(){this.sessionID=await pe.usiLaunch(this.setting,this.timeoutSeconds),br[this.sessionID]=this}isEngine(){return!0}async startSearch(t,i,n,s,o){this.searchHandler=o,this.usi=t.usi,this.position=t.position.clone(),this.inPonder&&this.ponder===this.usi?pe.usiPonderHit(this.sessionID):(this.info=void 0,await pe.usiGo(this.sessionID,this.usi,i,n,s)),this.inPonder=!1,this.ponder=void 0}async startPonder(t,i,n,s){const o=t.usi;if(!this.ponder||!this.ponder.startsWith(o)||wn(this.setting.options[Ef])!=="true")return;this.searchHandler=void 0,this.usi=this.ponder,this.position=t.position.clone();const a=this.position.createMoveByUSI(this.ponder.slice(o.length+1));a&&(this.position.doMove(a),this.info=void 0,this.inPonder=!0,await pe.usiGoPonder(this.sessionID,this.ponder,i,n,s))}async startResearch(t){this.searchHandler=void 0,this.usi=t.usi,this.info=void 0,this.position=t.position.clone(),await pe.usiGoInfinite(this.sessionID,t.usi)}async stop(){await pe.usiStop(this.sessionID)}async gameover(t){await pe.usiGameover(this.sessionID,t)}async close(){this.searchHandler=void 0,await pe.usiQuit(this.sessionID),delete br[this.sessionID]}onBestMove(t,i,n){const s=this.searchHandler;if(this.searchHandler=void 0,!s||!this.position||t!==this.usi)return;if(i==="resign"){s.onResign();return}if(i==="win"){s.onWin();return}const o=this.position.createMoveByUSI(i);if(!o){s.onError(":"+i),s.onResign();return}if(this.ponder=n&&`${t} ${i} ${n}`,this.flushUSIInfo(),this.info&&this.info.pv&&this.info.pv.length>=1&&this.info.pv[0].equals(o)){const r={...this.info,pv:this.info.pv.slice(1)};s.onMove(o,r)}else s.onMove(o)}onUSIInfo(t,i){if(t!==this.usi||!this.position||i.multipv&&i.multipv!==1)return;const n=this.position.color===D.BLACK?1:-1,s=i.pv&&i.pv.length>=1?i.pv:i.currmove?[i.currmove]:void 0,o={usi:t,depth:i.depth,score:i.scoreCP&&i.scoreCP*n,mate:i.scoreMate&&i.scoreMate*n,pv:s&&ty(this.position,s)};this.updateUSIInfo(o)}updateUSIInfo(t){this.info=t,!this.usiInfoTimeout&&(this.usiInfoTimeout=window.setTimeout(()=>{this.flushUSIInfo()},500))}flushUSIInfo(){this.usiInfoTimeout&&(clearTimeout(this.usiInfoTimeout),this.usiInfoTimeout=void 0),this.onSearchInfo&&this.info&&this.onSearchInfo(this.info)}}const br={};function iy(e,t,i,n){const s=br[e];s&&s.onBestMove(t,i,n)}function Au(e,t,i){const n=br[e];n&&n.onUSIInfo(t,i)}function yr(e){return{async build(t,i){if(t.uri===ti)return qn;if(Ii(t.uri)&&t.usi){const n=new Zl(t.usi,e??10,i);return await n.launch(),n}throw new Error("defaultPlayerBuilder#build: URI: "+t.uri)}}}var Bi=(e=>(e.WIN="win",e.LOSE="lose",e.DRAW="draw",e))(Bi||{});function Cu(e,t){return{player1:{name:e,win:0},player2:{name:t,win:0},draw:0,invalid:0,total:0}}class ny{constructor(t,i,n){T(this,"state");T(this,"_setting");T(this,"startPly",0);T(this,"repeat",0);T(this,"blackPlayer");T(this,"whitePlayer");T(this,"playerBuilder",yr());T(this,"_results",Cu("",""));T(this,"lastEventID");T(this,"onSaveRecord",()=>{});T(this,"onGameNext",()=>{});T(this,"onGameEnd",()=>{});T(this,"onPieceBeat",()=>{});T(this,"onBeepShort",()=>{});T(this,"onBeepUnlimited",()=>{});T(this,"onStopBeep",()=>{});T(this,"onError",()=>{});this.recordManager=t,this.blackClock=i,this.whiteClock=n,this.state="idle",this._setting=pr(),this.lastEventID=0}on(t,i){switch(t){case"saveRecord":this.onSaveRecord=i;break;case"gameNext":this.onGameNext=i;break;case"gameEnd":this.onGameEnd=i;break;case"pieceBeat":this.onPieceBeat=i;break;case"beepShort":this.onBeepShort=i;break;case"beepUnlimited":this.onBeepUnlimited=i;break;case"stopBeep":this.onStopBeep=i;break;case"error":this.onError=i;break}return this}get setting(){return this._setting}get results(){return this._results}async startGame(t,i){if(this.state!=="idle")throw Error("GameManager#startGame: ");this._setting=t,this.playerBuilder=i,this.repeat=0,t.startPosition||(this.startPly=this.recordManager.record.current.number),this._results=Cu(t.black.name,t.white.name),await this.nextGame()}async nextGame(){this.repeat++,this.setting.startPosition?this.recordManager.reset(this.setting.startPosition):this.recordManager.record.current.number!==this.startPly&&(this.recordManager.changePly(this.startPly),this.recordManager.removeNextMove()),this.recordManager.setGameStartMetadata({gameTitle:this.setting.repeat>=2?` ${this.repeat}/${this.setting.repeat}`:void 0,blackName:this.setting.black.name,whiteName:this.setting.white.name,timeLimit:this.setting.timeLimit});const t={timeMs:this.setting.timeLimit.timeSeconds*1e3,byoyomi:this.setting.timeLimit.byoyomi,increment:this.setting.timeLimit.increment,onBeepShort:()=>this.onBeepShort(),onBeepUnlimited:()=>this.onBeepUnlimited(),onStopBeep:()=>this.onStopBeep()};this.blackClock.setup({...t,onTimeout:()=>{this.timeout(D.BLACK)}}),this.whiteClock.setup({...t,onTimeout:()=>{this.timeout(D.WHITE)}});try{this.blackPlayer=await this.playerBuilder.build(this.setting.black,i=>this.recordManager.updateSearchInfo(Kt.OPPONENT,i)),this.whitePlayer=await this.playerBuilder.build(this.setting.white,i=>this.recordManager.updateSearchInfo(Kt.OPPONENT,i))}catch(i){try{await this.closePlayers()}catch(n){this.onError(n)}throw i}this.state="active",this.onGameNext(),setTimeout(()=>this.nextMove())}nextMove(){if(this.state!=="active")return;if(this._setting.maxMoves&&this.recordManager.record.current.number>=this._setting.maxMoves){this.endGame(ce.IMPASS);return}this.getActiveClock().start();const t=this.recordManager.record.position.color,i=this.getPlayer(t),n=this.getPlayer(xt(t));if(!i||!n){this.onError(new Error("GameManager#nextMove: "));return}const s=this.issueEventID();i.startSearch(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs,{onMove:(o,r)=>this.onMove(s,o,r),onResign:()=>this.onResign(s),onWin:()=>this.onWin(s),onError:o=>this.onError(o)}).catch(o=>{this.onError(new Error(`GameManager#nextMove: ${G.failedToSendGoCommand}: ${o}`))}),n.startPonder(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs).catch(o=>{this.onError(new Error(`GameManager#nextMove: ${G.failedToSendPonderCommand}: ${o}`))})}onMove(t,i,n){if(t!==this.lastEventID){pe.log(gt.ERROR,"GameManager#onMove: event ID already disabled");return}if(this.state!=="active"){pe.log(gt.ERROR,"GameManager#onMove: invalid state: "+this.state);return}if(!this.recordManager.record.position.isValidMove(i)){this.onError(": "+xn(this.recordManager.record.position,i)),this.endGame(ce.FOUL_LOSE);return}this.getActiveClock().stop(),this.recordManager.appendMove({move:i,moveOption:{ignoreValidation:!0},elapsedMs:this.getActiveClock().elapsedMs}),n&&this.recordManager.updateSearchInfo(Kt.PLAYER,n),n&&this.setting.enableComment&&this.recordManager.appendSearchComment(Kt.PLAYER,n,Di.APPEND),this.onPieceBeat();const s=this.recordManager.record.perpetualCheck;if(s)if(s===this.recordManager.record.position.color){this.endGame(ce.FOUL_LOSE);return}else{this.endGame(ce.FOUL_WIN);return}else if(this.recordManager.record.repetition){this.endGame(ce.REPETITION_DRAW);return}this.nextMove()}onResign(t){if(t!==this.lastEventID){pe.log(gt.ERROR,"GameManager#onResign: event ID already disabled");return}if(this.state!=="active"){pe.log(gt.ERROR,"GameManager#onResign: invalid state: "+this.state);return}this.endGame(ce.RESIGN)}onWin(t){if(t!==this.lastEventID){pe.log(gt.ERROR,"GameManager#onWin: event ID already disabled");return}if(this.state!=="active"){pe.log(gt.ERROR,"GameManager#onWin: invalid state: "+this.state);return}this.endGame(ce.ENTERING_OF_KING)}timeout(t){this.onStopBeep();const i=this.getPlayer(t);if(i&&i.isEngine()&&!this.setting.enableEngineTimeout){i.stop().catch(n=>{this.onError(new Error(`GameManager#timeout: ${G.failedToSendStopCommand}: ${n}`))});return}this.endGame(ce.TIMEOUT)}endGame(t){if(this.state!=="active"&&this.state!=="pending")return;this.state="bussy";const i=this.recordManager.record.position.color;Promise.resolve().then(()=>this.sendGameResults(i,t)).then(()=>this.closePlayers()).then(()=>{if(this.getActiveClock().pause(),this.recordManager.appendMove({move:t,elapsedMs:this.getActiveClock().elapsedMs}),this.recordManager.setGameEndMetadata(),this.addGameResults(i,t),this.state="idle",this._setting.enableAutoSave&&this.onSaveRecord(),t===ce.INTERRUPT||this.repeat>=this.setting.repeat){this.onGameEnd(this.results,t);return}this.setting.swapPlayers&&this.swapPlayers(),this.nextGame().catch(s=>{this.onError(s)})}).catch(n=>{this.onError(n),this.state="pending"})}addGameResults(t,i){switch(va(t,D.BLACK,i)){case Bi.WIN:this._results.player1.win++;break;case Bi.LOSE:this._results.player2.win++;break;case Bi.DRAW:this._results.draw++;break;default:this._results.invalid++;break}this._results.total++}swapPlayers(){this._setting={...this.setting,black:this.setting.white,white:this.setting.black},this._results={...this.results,player1:this.results.player2,player2:this.results.player1}}async sendGameResults(t,i){if(this.blackPlayer){const n=va(t,D.BLACK,i);n&&await this.blackPlayer.gameover(n)}if(this.whitePlayer){const n=va(t,D.WHITE,i);n&&await this.whitePlayer.gameover(n)}}async closePlayers(){this.blackPlayer&&(await this.blackPlayer.close(),this.blackPlayer=void 0),this.whitePlayer&&(await this.whitePlayer.close(),this.whitePlayer=void 0)}getPlayer(t){switch(t){case D.BLACK:return this.blackPlayer;case D.WHITE:return this.whitePlayer}}getActiveClock(){switch(this.recordManager.record.position.color){case D.BLACK:return this.blackClock;case D.WHITE:return this.whiteClock}}issueEventID(){return this.lastEventID+=1,this.lastEventID}}function va(e,t,i){switch(i){case ce.FOUL_WIN:case ce.ENTERING_OF_KING:return e==t?Bi.WIN:Bi.LOSE;case ce.RESIGN:case ce.MATE:case ce.TIMEOUT:case ce.FOUL_LOSE:return e==t?Bi.LOSE:Bi.WIN;case ce.IMPASS:case ce.REPETITION_DRAW:return Bi.DRAW}return null}function Tu(e){let t=sy(e);const i=e.getStandardMetadata(J.TITLE)||e.getStandardMetadata(J.TOURNAMENT)||e.getStandardMetadata(J.OPUS_NAME)||e.getStandardMetadata(J.OPUS_NO)||e.getStandardMetadata(J.PLACE)||e.getStandardMetadata(J.POSTED_ON)||e.getStandardMetadata(J.AUTHOR);i&&(t+="_"+i);const n=e.getStandardMetadata(J.BLACK_NAME)||e.getStandardMetadata(J.BLACK_SHORT_NAME);n&&(t+="_"+n);const s=e.getStandardMetadata(J.WHITE_NAME)||e.getStandardMetadata(J.WHITE_SHORT_NAME);return s&&(t+="_"+s),t.trim().replaceAll("/","_").replaceAll("\\","_")+".kif"}function sy(e){const t=e.getStandardMetadata(J.START_DATETIME)||e.getStandardMetadata(J.DATE);return t?t.trim().replaceAll(" ","_").replaceAll("/","").replaceAll(":",""):Cf().replaceAll("/","")}class oy{constructor(){T(this,"count",0)}get isBussy(){return this.count!==0}retain(){this.count+=1}release(){this.count-=1}}function ry(e,t){const i=e.clone();let n,s="";for(const o of t){const r=i.createMoveByUSI(o);if(!r)break;s+=xn(i,r,{prev:n}),i.doMove(r,{ignoreValidation:!0}),n=r}return s}class xf{constructor(t,i){T(this,"sfen","");T(this,"nodes");T(this,"nps");T(this,"iterates",[]);T(this,"hashfull");T(this,"currentMove");T(this,"currentMoveText");T(this,"ponderMove");this.sessionID=t,this.name=i}get latestIteration(){const t=[],i=new Set,n=new Set;for(const s of this.iterates){const o=s.pv?s.pv[0]:void 0;!i.has(s.multiPV)&&!n.has(o)&&(t.push(s),i.add(s.multiPV),n.add(o))}return t.sort((s,o)=>(s.multiPV||1)-(o.multiPV||1))}update(t,i,n){this.sfen!==t&&(this.sfen=t,this.nodes=void 0,this.nps=void 0,this.iterates=[],this.hashfull=void 0,this.currentMove=void 0,this.currentMoveText=void 0,this.ponderMove=void 0);const s=Nt.newBySFEN(t);if(!s)return;const o={position:t,color:s.color};if(i.depth!==void 0&&(o.depth=i.depth),i.seldepth!==void 0&&(o.selectiveDepth=i.seldepth),i.timeMs!==void 0&&(o.timeMs=i.timeMs),i.nodes!==void 0&&(this.nodes=i.nodes),i.pv&&(o.pv=i.pv,o.text=ry(s,i.pv)),i.multipv!==void 0&&(o.multiPV=i.multipv),i.scoreCP!==void 0&&(o.score=i.scoreCP),i.scoreMate!==void 0&&(o.scoreMate=i.scoreMate),i.lowerbound!==void 0&&(o.lowerBound=i.lowerbound),i.upperbound!==void 0&&(o.upperBound=i.upperbound),i.currmove!==void 0){this.currentMove=i.currmove;const r=s.createMoveByUSI(i.currmove);r&&(this.currentMoveText=xn(s,r))}i.hashfullPerMill!==void 0&&(this.hashfull=i.hashfullPerMill/1e3),i.nps!==void 0&&(this.nps=i.nps),i.string&&(o.text=i.string),Object.keys(o).length!==0&&(i.nodes!==void 0&&(o.nodes=i.nodes),this.iterates.unshift(o)),this.ponderMove=n&&xn(s,n)}}class ay{constructor(){T(this,"_sessions",[]);T(this,"updateQueue",[]);T(this,"timeoutHandle")}get sessions(){return this._sessions}clear(){this._sessions=[],this.updateQueue=[],this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}update(t,i,n,s,o){this.updateQueue.push({sessionID:t,sfen:i.sfen,name:n,info:s,ponderMove:o}),this.timeoutHandle||(this.timeoutHandle=window.setTimeout(()=>{this.dequeue()},500))}dequeue(){for(const t of this.updateQueue)this._update(t);this.updateQueue=[],this.timeoutHandle=void 0}_update(t){let i=this._sessions.find(n=>n.sessionID===t.sessionID);i||(i=this.addSession(t.sessionID,t.name)),i.update(t.sfen,t.info,t.ponderMove)}addSession(t,i){const n=new xf(t,i);return this.sessions.push(n),this.sessions.sort((s,o)=>s.sessionID-o.sessionID),n}}var V=(e=>(e.NORMAL="normal",e.PASTE_DIALOG="pasteDialog",e.POSITION_EDITING="positionEditing",e.EXPORT_POSITION_IMAGE_DIALOG="exportBoardImageDialog",e.GAME_DIALOG="gameDialog",e.GAME="game",e.CSA_GAME_DIALOG="csaGameDialog",e.CSA_GAME="csaGame",e.RESEARCH="research",e.RESEARCH_DIALOG="researchDialog",e.ANALYSIS="analysis",e.ANALYSIS_DIALOG="analysisDialog",e.USI_ENGINE_SETTING_DIALOG="usiEngineSettingDialog",e))(V||{});class ly{constructor(){T(this,"_queue",[])}get message(){return this._queue[0]}get hasMessage(){return this._queue.length!==0}enqueue(t){this._queue.push(t)}dequeue(){this._queue.shift()}}class cy{constructor(){T(this,"errorCounts",{})}get errors(){return Object.entries(this.errorCounts).sort(([t],[i])=>t<i?-1:t>i?1:0).map(([t,i])=>({message:t,count:i}))}get hasError(){return!!Object.keys(this.errorCounts).length}add(t){const i=t instanceof Error?t.message:""+t,n=this.errorCounts[i]||0;this.errorCounts[i]=n+1}clear(){this.errorCounts={}}}class uy{constructor(){T(this,"setting",el())}get raw(){return this.setting}get language(){return this.setting.language}get thema(){return this.setting.thema}get pieceImage(){return this.setting.pieceImage}get boardImage(){return this.setting.boardImage}get boardLabelType(){return this.setting.boardLabelType}get pieceVolume(){return this.setting.pieceVolume}get clockVolume(){return this.setting.clockVolume}get clockPitch(){return this.setting.clockPitch}get clockSoundTarget(){return this.setting.clockSoundTarget}get boardFlipping(){return this.setting.boardFlipping}get tabPaneType(){return this.setting.tabPaneType}get tab(){return this.setting.tab}get tab2(){return this.setting.tab2}get topPaneHeightPercentage(){return this.setting.topPaneHeightPercentage}get topPanePreviousHeightPercentage(){return this.setting.topPanePreviousHeightPercentage}get bottomLeftPaneWidthPercentage(){return this.setting.bottomLeftPaneWidthPercentage}get returnCode(){return this.setting.returnCode}get autoSaveDirectory(){return this.setting.autoSaveDirectory}get translateEngineOptionName(){return this.setting.translateEngineOptionName}get engineTimeoutSeconds(){return this.setting.engineTimeoutSeconds}get evaluationViewFrom(){return this.setting.evaluationViewFrom}get coefficientInSigmoid(){return this.setting.coefficientInSigmoid}get badMoveLevelThreshold1(){return this.setting.badMoveLevelThreshold1}get badMoveLevelThreshold2(){return this.setting.badMoveLevelThreshold2}get badMoveLevelThreshold3(){return this.setting.badMoveLevelThreshold3}get badMoveLevelThreshold4(){return this.setting.badMoveLevelThreshold4}get showElapsedTimeInRecordView(){return this.setting.showElapsedTimeInRecordView}get showCommentInRecordView(){return this.setting.showCommentInRecordView}get enableAppLog(){return this.setting.enableAppLog}get enableUSILog(){return this.setting.enableUSILog}get enableCSALog(){return this.setting.enableCSALog}get logLevel(){return this.setting.logLevel}get positionImageStyle(){return this.setting.positionImageStyle}get positionImageSize(){return this.setting.positionImageSize}get positionImageHeader(){return this.setting.positionImageHeader}async loadAppSetting(){this.setting=await pe.loadAppSetting()}async updateAppSetting(t){const i=Pb(this.setting,t);if(i instanceof Error)throw i;await pe.saveAppSetting(i),this.setting=i}flipBoard(){this.setting.boardFlipping=!this.setting.boardFlipping,pe.saveAppSetting(this.setting)}}function hy(){return mi(new uy)}let Sa;function Fe(){return Sa||(Sa=hy()),Sa}class dy{constructor(t){T(this,"researcher");T(this,"setting",fr());T(this,"number");T(this,"actualMove");T(this,"lastSearchInfo");T(this,"searchInfo");T(this,"timerHandle");T(this,"onFinish",()=>{});T(this,"onError",()=>{});this.recordManager=t}on(t,i){switch(t){case"finish":this.onFinish=i;break;case"error":this.onError=i;break}return this}async start(t){if(!t.usi)throw new Error("");await this.setupEngine(t.usi),this.setting=t,this.number=void 0,this.actualMove=void 0,this.lastSearchInfo=void 0,this.searchInfo=void 0,setTimeout(()=>this.next())}close(){this.clearTimer(),this.closeEngine().catch(t=>{this.onError(t)})}async setupEngine(t){if(this.researcher)throw new Error("AnalysisManager#setupEngine: ");const i=Fe(),n=new Zl(t,i.engineTimeoutSeconds,this.updateSearchInfo.bind(this));await n.launch(),this.researcher=n}async closeEngine(){this.researcher&&(await this.researcher.close(),this.researcher=void 0)}next(){if(this.clearTimer(),!this.researcher){this.onError(new Error("")),this.finish();return}if(this.lastSearchInfo=this.searchInfo,this.searchInfo=void 0,this.number!==void 0?this.number=this.number+1:this.setting.startCriteria.enableNumber?this.number=this.setting.startCriteria.number-1:this.number=0,this.setting.endCriteria.enableNumber&&this.number>=this.setting.endCriteria.number){this.finish();return}this.recordManager.changePly(this.number);const t=this.recordManager.record;if(t.current.number!==this.number){this.finish();return}if(!t.current.next&&!(t.current.move instanceof nt)){this.finish();return}this.actualMove=t.current.move instanceof nt?t.current.move:void 0,this.setTimer(),this.researcher.startResearch(t).catch(i=>{this.onError(i)})}finish(){this.onFinish(),this.close()}setTimer(){this.timerHandle=window.setTimeout(()=>{this.onResult(),this.next()},this.setting.perMoveCriteria.maxSeconds*1e3)}clearTimer(){this.timerHandle&&(clearTimeout(this.timerHandle),this.timerHandle=void 0)}onResult(){if(!this.searchInfo||!this.lastSearchInfo)return;const t=this.recordManager.record,n=xt(t.position.color)===D.BLACK?1:-1,s=this.searchInfo.score!==void 0?this.searchInfo.score*n:void 0,o=this.searchInfo.score!==void 0&&this.lastSearchInfo.score!==void 0?(this.searchInfo.score-this.lastSearchInfo.score)*n:void 0,r=this.actualMove&&this.lastSearchInfo.pv?this.actualMove.equals(this.lastSearchInfo.pv[0]):void 0,a=Fe();let l="";if(o!==void 0&&s!==void 0&&!r){const c=fy(s-o,s,a);c&&(l=`${c}`)}this.recordManager.appendSearchComment(Kt.RESEARCHER,this.searchInfo,this.setting.commentBehavior,l)}updateSearchInfo(t){this.recordManager.updateSearchInfo(Kt.RESEARCHER,t),this.searchInfo=t}}function fy(e,t,i){const n=il(e,i.coefficientInSigmoid)-il(t,i.coefficientInSigmoid);return n>=i.badMoveLevelThreshold4?"":n>=i.badMoveLevelThreshold3?"":n>=i.badMoveLevelThreshold2?"":n>=i.badMoveLevelThreshold1?"":null}function py(){return{id:"",myColor:D.BLACK,toMove:D.BLACK,position:"",timeUnitMs:1e3,totalTime:0,byoyomi:0,delay:0,increment:0}}var Mi=(e=>(e.UNKNOWN="unknown",e.RESIGN="resign",e.SENNICHITE="sennichite",e.OUTE_SENNICHITE="oute_sennichite",e.ILLEGAL_MOVE="illegal_move",e.ILLEGAL_ACTION="illegal_action",e.TIME_UP="time_up",e.JISHOGI="jishogi",e.MAX_MOVES="max_moves",e))(Mi||{}),$o=(e=>(e.WIN="win",e.LOSE="lose",e.DRAW="draw",e.CENSORED="censored",e.CHUDAN="chudan",e))($o||{}),Vs=(e=>(e.V121="v121",e.V121_FLOODGATE="v121_floodgate",e))(Vs||{});function Rf(){return{protocolVersion:"v121",host:"localhost",port:4081,id:"",password:""}}function gy(){return{player:{name:"",uri:ti},server:Rf(),autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function my(e){if(e.server.protocolVersion!=="v121"&&e.server.protocolVersion!=="v121_floodgate")return new Error("");if(e.server.host==="")return new Error("");if(e.server.port<0||e.server.port>65535)return new Error("");if(e.server.id==="")return new Error("ID")}function by(){return{player:{name:"",uri:ti},serverHistory:[],autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function yy(e,t){var i;return{player:e.player,server:((i=e.serverHistory)==null?void 0:i.length)>t?e.serverHistory[t]:Rf(),autoFlip:e.autoFlip,enableComment:e.enableComment,enableAutoSave:e.enableAutoSave,repeat:e.repeat,autoRelogin:e.autoRelogin}}const Nf=10;function _y(e,t){const i=[t.server];for(const n of e.serverHistory)if((n.protocolVersion!==t.server.protocolVersion||n.host!==t.server.host||n.port!==t.server.port||n.id!==t.server.id||n.password!==t.server.password)&&i.push(n),i.length===Nf)break;return{player:t.player,serverHistory:i,autoFlip:t.autoFlip,enableComment:t.enableComment,enableAutoSave:t.enableAutoSave,repeat:t.repeat,autoRelogin:t.autoRelogin}}const Of=10;var Zi=(e=>(e[e.OFFLINE=0]="OFFLINE",e[e.WAITING_LOGIN=1]="WAITING_LOGIN",e[e.LOGIN_FAILED=2]="LOGIN_FAILED",e[e.LOGIN_RETRY_INTERVAL=3]="LOGIN_RETRY_INTERVAL",e[e.READY=4]="READY",e[e.GAME=5]="GAME",e))(Zi||{});class vy{constructor(t,i,n){T(this,"_state",0);T(this,"_setting",gy());T(this,"sessionID",0);T(this,"stopRequested",!1);T(this,"repeat",0);T(this,"player");T(this,"gameSummary",py());T(this,"searchInfo");T(this,"playerBuilder",yr());T(this,"retryTimer");T(this,"onSaveRecord",()=>{});T(this,"onGameNext",()=>{});T(this,"onGameEnd",()=>{});T(this,"onFlipBoard",()=>{});T(this,"onPieceBeat",()=>{});T(this,"onBeepShort",()=>{});T(this,"onBeepUnlimited",()=>{});T(this,"onStopBeep",()=>{});T(this,"onError",()=>{});this.recordManager=t,this.blackClock=i,this.whiteClock=n}on(t,i){switch(t){case"saveRecord":this.onSaveRecord=i;break;case"gameNext":this.onGameNext=i;break;case"gameEnd":this.onGameEnd=i;break;case"flipBoard":this.onFlipBoard=i;break;case"pieceBeat":this.onPieceBeat=i;break;case"beepShort":this.onBeepShort=i;break;case"beepUnlimited":this.onBeepUnlimited=i;break;case"stopBeep":this.onStopBeep=i;break;case"error":this.onError=i;break}return this}get state(){return this._state}get setting(){return this._setting}get isMyTurn(){return this.recordManager.record.position.color===this.gameSummary.myColor}login(t,i){return this.sessionID?Promise.reject(new Error("CSAGameManager#start: session already exists")):this._state!==0?Promise.reject(new Error("CSAGameManager#start: unexpected state")):(this._setting=t,this.playerBuilder=i,this.repeat=0,this.relogin())}async relogin(){this._state=1;try{this.player=await this.playerBuilder.build(this._setting.player,i=>this.recordManager.updateSearchInfo(Kt.OPPONENT,i));const t=await pe.csaLogin(this._setting.server);this.sessionID=t,this._state=4,Sy(this.sessionID,this),this.onGameNext()}catch(t){throw this._state=2,this.close(1),t}}stop(){this.sessionID&&(this.stopRequested=!0,pe.csaStop(this.sessionID))}logout(){this.close(0)}close(t){if(!(this._state===0||this._state===1)){if(this.stopRequested&&(t=0,this.stopRequested=!1),this.sessionID&&(wy(this.sessionID),pe.csaLogout(this.sessionID).catch(this.onError),this.sessionID=0),this.player&&(this.player.close().catch(this.onError),this.player=void 0),this.blackClock.stop(),this.whiteClock.stop(),this._state=0,this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=void 0),t===0||this.repeat>=this.setting.repeat){this.onGameEnd();return}t===2?this.relogin().catch(this.onError):(this._state=3,this.retryTimer=setTimeout(()=>this.relogin().catch(this.onError),Of*1e3))}}onGameSummary(t){this.gameSummary=t,pe.csaAgree(this.sessionID,this.gameSummary.id)}onReject(){this.close(1)}onStart(t){this.repeat++,this.recordManager.importRecord(this.gameSummary.position,Un.CSA),this.recordManager.setGameStartMetadata({gameTitle:this.gameSummary.id,blackName:this.gameSummary.blackPlayerName,whiteName:this.gameSummary.whitePlayerName,timeLimit:{timeSeconds:this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,increment:this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3}}),this.setting.autoFlip&&this.onFlipBoard&&this.onFlipBoard(this.gameSummary.myColor===D.WHITE),this._state=5,this.next(t)}onMove(t,i){const n=this.isMyTurn,s=bb(this.recordManager.record.position,t);if(s instanceof Error){this.onError(`CSAGameManager#onMove:  [${t}]: ${s.message}`);return}this.recordManager.appendMove({move:s,moveOption:{ignoreValidation:!0},elapsedMs:this.parseElapsedMs(t)}),n&&this.searchInfo&&this.recordManager.updateSearchInfo(Kt.PLAYER,this.searchInfo),n&&this.searchInfo&&this.setting.enableComment&&this.recordManager.appendSearchComment(Kt.PLAYER,this.searchInfo,Di.APPEND),this.onPieceBeat(),this.next(i)}parseElapsedMs(t){const i=/^.*,T([0-9]+)$/.exec(t);return i?Number(parseInt(i[1]))*this.gameSummary.timeUnitMs:0}onGameResult(t,i){this.recordManager.appendMove({move:this.gameResultToSpecialMove(t,i)}),this.setting.enableAutoSave&&this.onSaveRecord(),this.close(2)}gameResultToSpecialMove(t,i){const n=this.recordManager.record.position.color;switch(t){case Mi.RESIGN:return ce.RESIGN;case Mi.SENNICHITE:return ce.REPETITION_DRAW;case Mi.OUTE_SENNICHITE:case Mi.ILLEGAL_MOVE:case Mi.ILLEGAL_ACTION:switch(i){case $o.WIN:return n===this.gameSummary.myColor?ce.FOUL_WIN:ce.FOUL_LOSE;case $o.LOSE:return n===this.gameSummary.myColor?ce.FOUL_LOSE:ce.FOUL_WIN}break;case Mi.TIME_UP:return ce.TIMEOUT;case Mi.JISHOGI:return ce.ENTERING_OF_KING;case Mi.MAX_MOVES:return ce.IMPASS}return i===$o.DRAW?ce.DRAW:ce.INTERRUPT}onClose(){this.close(this.setting.autoRelogin?1:0)}next(t){this.blackClock.stop(),this.whiteClock.stop(),this.syncClock(t),this.startClock(),this.recordManager.record.position.color===this.gameSummary.myColor?this.startSearch(t):this.startPonder()}syncClock(t){const i={byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,onBeepShort:()=>this.onBeepShort(),onBeepUnlimited:()=>this.onBeepUnlimited(),onStopBeep:()=>this.onStopBeep()};this.blackClock.setup({...i,timeMs:t.black.time*this.gameSummary.timeUnitMs}),this.whiteClock.setup({...i,timeMs:t.white.time*this.gameSummary.timeUnitMs})}startClock(){this.recordManager.record.position.color===D.BLACK?this.blackClock.start():this.whiteClock.start()}startSearch(t){if(!this.player){this.onError("CSAGameManager#startSearch: player is not initialized");return}this.player.startSearch(this.recordManager.record,this.buildTimeLimitSetting(),t.black.time*this.gameSummary.timeUnitMs,t.white.time*this.gameSummary.timeUnitMs,{onMove:this.onPlayerMove.bind(this),onResign:this.onPlayerResign.bind(this),onWin:this.onPlayerWin.bind(this),onError:this.onPlayerError.bind(this)}).catch(i=>{this.onError(new Error(`CSAGameManager#next: ${G.failedToSendGoCommand}: ${i}`))})}startPonder(){if(!this.player){this.onError("CSAGameManager#startPonder: player is not initialized");return}this.player.startPonder(this.recordManager.record,this.buildTimeLimitSetting(),this.blackClock.timeMs,this.whiteClock.timeMs).catch(t=>{this.onError(new Error(`CSAGameManager#next: ${G.failedToSendPonderCommand}: ${t}`))})}buildTimeLimitSetting(){const t=this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,i=this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,n=this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3;return{timeSeconds:t,byoyomi:i,increment:n}}onPlayerMove(t,i){this.searchInfo=i;let n,s;switch(this._setting.server.protocolVersion){case Vs.V121:break;case Vs.V121_FLOODGATE:if(n=i==null?void 0:i.score,i!=null&&i.pv)for(const o of i.pv)s=s?s+" ":"",s+=su(o);break}pe.csaMove(this.sessionID,su(t),n,s)}onPlayerResign(){pe.csaResign(this.sessionID)}onPlayerWin(){pe.csaWin(this.sessionID)}onPlayerError(t){this.onError(t)}}const an={};function Sy(e,t){an[e]=t}function wy(e){delete an[e]}function Ey(e,t){const i=an[e];i&&i.onGameSummary(t)}function Iy(e){const t=an[e];t&&t.onReject()}function Py(e,t){const i=an[e];i&&i.onStart(t)}function ky(e,t,i){const n=an[e];n&&n.onMove(t,i)}function Ay(e,t,i){const n=an[e];n&&n.onGameResult(t,i)}function Cy(e){const t=an[e];t&&t.onClose()}class Mu{constructor(){T(this,"setting",{timeMs:0,byoyomi:0,increment:0});T(this,"_timeMs",0);T(this,"_byoyomi",0);T(this,"_elapsedMs",0);T(this,"timerHandle",0);T(this,"timerStart",0);T(this,"lastTimeMs",0)}setup(t){this.setting=t,this._timeMs=t.timeMs||0,this._byoyomi=t.byoyomi||0,this._elapsedMs=0}get time(){return Math.ceil(this._timeMs/1e3)}get timeMs(){return this._timeMs}get byoyomi(){return this._byoyomi}get elapsedMs(){return this._elapsedMs}start(){this.clearTimer(),this.timerStart=Date.now(),this.lastTimeMs=this._timeMs,this._byoyomi=this.setting.byoyomi||0,this._elapsedMs=0,this.timerHandle=window.setInterval(()=>{const t=this.timeMs,i=this.byoyomi;this._elapsedMs=Date.now()-this.timerStart;const n=this.lastTimeMs-this._elapsedMs;if(n>=0?this._timeMs=n:(this._timeMs=0,this._byoyomi=Math.max(Math.ceil((this.setting.byoyomi||0)+n/1e3),0)),this.timeMs===0&&this.byoyomi===0){this.timeout();return}this.fireBeep(t,i)},100)}fireBeep(t,i){let n=Math.ceil(this.timeMs/1e3),s=Math.ceil(t/1e3);if(!(n!==0&&this.byoyomi!==0)){if(n===0&&s!==0){this.setting.onBeepShort&&this.setting.onBeepShort();return}this.byoyomi!==0&&(n=this.byoyomi,s=i),n!==s&&(n<=5?this.setting.onBeepUnlimited&&this.setting.onBeepUnlimited():(n<=10||n===20||n===30||n===60)&&this.setting.onBeepShort&&this.setting.onBeepShort())}}pause(){this.clearTimer()}stop(){this.clearTimer(),this.incrementTime()}timeout(){this.clearTimer(),this.setting.onTimeout&&this.setting.onTimeout()}clearTimer(){this.timerHandle&&(window.clearInterval(this.timerHandle),this.timerHandle=0),this.setting.onStopBeep&&this.setting.onStopBeep()}incrementTime(){this._timeMs+=(this.setting.increment||0)*1e3}}function Ty(e){switch(e){case 0:return Kt.RESEARCHER;case 1:return Kt.RESEARCHER_2;case 2:return Kt.RESEARCHER_3;case 3:return Kt.RESEARCHER_4;default:return}}class My{constructor(){T(this,"engines",[]);T(this,"onUpdateSearchInfo")}on(t,i){switch(t){case"updateSearchInfo":this.onUpdateSearchInfo=i}}async launch(t){var s;if(t.usi===void 0)throw new Error("ResearchManager#launch: USI");for(const o of t.secondaries||[])if(o.usi===void 0)throw new Error("ResearchManager#launch: USI");if(this.engines.length>0)throw new Error("ResearchManager#launch: ");const i=Fe(),n=[t.usi,...((s=t.secondaries)==null?void 0:s.map(o=>o.usi))||[]].filter(o=>!!o);this.engines=n.map((o,r)=>{const a=Ty(r);return new Zl(o,i.engineTimeoutSeconds,l=>{this.onUpdateSearchInfo&&a!==void 0&&this.onUpdateSearchInfo(a,l)})});try{await Promise.all(this.engines.map(o=>o.launch()))}catch(o){throw this.close(),o}}updatePosition(t){this.engines.forEach(i=>i.startResearch(t))}async close(){await Promise.allSettled(this.engines.map(t=>t.close())),this.engines=[]}}function xu(e){const t=e.total-e.invalid;return[{type:"list",items:[{text:e.player1.name,children:[`: ${e.player1.win}`,`: ${jc(e.player1.win,t,1)}`]},{text:e.player2.name,children:[`: ${e.player2.win}`,`: ${jc(e.player2.win,t,1)}`]},{text:`: ${e.draw}`},{text:`: ${t}`},{text:`: ${e.invalid}`}]}]}class xy{constructor(){T(this,"onChangeFilePath",[]);T(this,"_bussy",new oy);T(this,"_message",new ly);T(this,"_error",new cy);T(this,"recordManager",new Z1);T(this,"_appState",V.NORMAL);T(this,"_isAppSettingDialogVisible",!1);T(this,"_confirmation");T(this,"usiMonitor",new ay);T(this,"blackClock",new Mu);T(this,"whiteClock",new Mu);T(this,"gameManager",new ny(this.recordManager,this.blackClock,this.whiteClock));T(this,"csaGameManager",new vy(this.recordManager,this.blackClock,this.whiteClock));T(this,"researchManager",new My);T(this,"analysisManager",new dy(this.recordManager));T(this,"_reactive");this.recordManager.on("changeFilePath",n=>{for(const s of this.onChangeFilePath)s(n)}),this.recordManager.on("changePosition",()=>{this.onUpdatePosition()});const t=mi(this),i=Fe();this.gameManager.on("saveRecord",t.onSaveRecord.bind(t)).on("gameNext",t.onGameNext.bind(t)).on("gameEnd",t.onGameEnd.bind(t)).on("pieceBeat",()=>la(i.pieceVolume)).on("beepShort",this.onBeepShort.bind(this)).on("beepUnlimited",this.onBeepUnlimited.bind(this)).on("stopBeep",cu).on("error",t.pushError.bind(t)),this.csaGameManager.on("saveRecord",t.onSaveRecord.bind(t)).on("gameNext",t.onGameNext.bind(t)).on("gameEnd",t.onCSAGameEnd.bind(t)).on("flipBoard",t.onFlipBoard.bind(t)).on("pieceBeat",()=>la(i.pieceVolume)).on("beepShort",this.onBeepShort.bind(this)).on("beepUnlimited",this.onBeepUnlimited.bind(this)).on("stopBeep",cu).on("error",t.pushError.bind(t)),this.researchManager.on("updateSearchInfo",this.onUpdateSearchInfo.bind(t)),this.analysisManager.on("finish",this.onFinish.bind(t)).on("error",this.pushError.bind(t)),this._reactive=t}addListener(t,i){switch(t){case"changeFilePath":this.onChangeFilePath.push(i);break}return this}get reactive(){return this._reactive}get isBussy(){return this._bussy.isBussy}retainBussyState(){return this._bussy.retain()}releaseBussyState(){return this._bussy.release()}get message(){return this._message.message}get hasMessage(){return this._message.hasMessage}enqueueMessage(t){this._message.enqueue(t)}dequeueMessage(){this._message.dequeue()}get errors(){return this._error.errors}get hasError(){return this._error.hasError}pushError(t){pe.log(gt.ERROR,Yd(t)),this._error.add(t)}clearErrors(){this._error.clear()}get record(){return this.recordManager.record}get recordFilePath(){return this.recordManager.recordFilePath}get inCommentPVs(){return this.recordManager.inCommentPVs}updateStandardRecordMetadata(t){this.recordManager.updateStandardMetadata(t)}get appState(){return this._appState}get confirmation(){var t;return(t=this._confirmation)==null?void 0:t.message}showConfirmation(t){this._confirmation&&pe.log(gt.WARN,`Store#showConfirmation:  appState=${this.appState} currentMessage=${this._confirmation.message} newMessage=${t.message}`),this._confirmation={...t,appState:this.appState}}confirmationOk(){if(!this._confirmation)return;const t=this._confirmation;if(this._confirmation=void 0,this.appState!==t.appState){this.pushError("");return}t.onOk&&t.onOk()}confirmationCancel(){this._confirmation=void 0}showPasteDialog(){this.appState===V.NORMAL&&(this._appState=V.PASTE_DIALOG)}showGameDialog(){this.appState===V.NORMAL&&(this._appState=V.GAME_DIALOG)}showCSAGameDialog(){this.appState===V.NORMAL&&(this._appState=V.CSA_GAME_DIALOG)}showResearchDialog(){this.appState===V.NORMAL&&(this._appState=V.RESEARCH_DIALOG)}showAnalysisDialog(){this.appState===V.NORMAL&&(this._appState=V.ANALYSIS_DIALOG)}showUsiEngineManagementDialog(){this.appState===V.NORMAL&&(this._appState=V.USI_ENGINE_SETTING_DIALOG)}showExportBoardImageDialog(){this.appState===V.NORMAL&&(this._appState=V.EXPORT_POSITION_IMAGE_DIALOG)}destroyModalDialog(){(this.appState===V.PASTE_DIALOG||this.appState===V.GAME_DIALOG||this.appState===V.CSA_GAME_DIALOG||this.appState===V.RESEARCH_DIALOG||this.appState===V.ANALYSIS_DIALOG||this.appState===V.USI_ENGINE_SETTING_DIALOG||this.appState===V.EXPORT_POSITION_IMAGE_DIALOG)&&(this._appState=V.NORMAL)}closeModalDialog(){this.isBussy||this.destroyModalDialog()}get isAppSettingDialogVisible(){return this._isAppSettingDialogVisible}showAppSettingDialog(){this._isAppSettingDialogVisible=!0}closeAppSettingDialog(){this._isAppSettingDialogVisible=!1}get usiMonitors(){return this.usiMonitor.sessions}updateUSIInfo(t,i,n,s){this.recordManager.record.usi===i&&this.usiMonitor.update(t,this.recordManager.record.position,n,s)}updateUSIPonderInfo(t,i,n,s){const o=Tt.newByUSI(i);if(o instanceof Error){pe.log(gt.ERROR,`invalid USI: ${i} (updateUSIPonderInfo)`);return}const r=o.current.move;r instanceof nt&&this.usiMonitor.update(t,o.position,n,s,r)}get blackTime(){return this.blackClock.time}get blackByoyomi(){return this.blackClock.byoyomi}get whiteTime(){return this.whiteClock.time}get whiteByoyomi(){return this.whiteClock.byoyomi}startGame(t){this.appState!==V.GAME_DIALOG||this.isBussy||(this.retainBussyState(),pe.saveGameSetting(t).then(()=>{this.initializeDisplaySettingForGame(t);const i=Fe(),n=yr(i.engineTimeoutSeconds);return this.gameManager.startGame(t,n)}).then(()=>this._appState=V.GAME).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}get gameSetting(){return this.gameManager.setting}get gameResults(){return this.gameManager.results}get csaGameState(){return this.csaGameManager.state}loginCSAGame(t,i){this.appState!==V.CSA_GAME_DIALOG||this.isBussy||(this.retainBussyState(),Promise.resolve().then(async()=>{if(i.saveHistory){const n=await pe.loadCSAGameSettingHistory(),s=_y(n,t);await pe.saveCSAGameSettingHistory(s)}}).then(()=>{const n=Fe(),s=yr(n.engineTimeoutSeconds);return this.csaGameManager.login(t,s)}).then(()=>this._appState=V.CSA_GAME).catch(n=>{this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()}))}cancelCSAGame(){if(this.appState===V.CSA_GAME){if(this.csaGameManager.state===Zi.GAME){this.pushError("");return}this.csaGameManager.logout(),this._appState=V.NORMAL}}initializeDisplaySettingForGame(t){if(t.humanIsFront){const i=Fe();let n=i.boardFlipping;t.black.uri===ti&&t.white.uri!==ti?n=!1:t.black.uri!==ti&&t.white.uri===ti&&(n=!0),n!==i.boardFlipping&&i.flipBoard()}}stopGame(){switch(this.appState){case V.GAME:this.gameManager.setting.repeat>=2?this.showConfirmation({message:G.areYouSureWantToQuitGames,onOk:()=>this.gameManager.endGame(ce.INTERRUPT)}):this.gameManager.endGame(ce.INTERRUPT);break;case V.CSA_GAME:this.showConfirmation({message:G.areYouSureWantToRequestQuit,onOk:()=>this.csaGameManager.stop()});break}}showGameResults(){if(this.appState!==V.GAME)return;const t=this.gameManager.results;this.enqueueMessage({text:G.gameProgress,attachments:xu(t)})}onGameNext(){this.usiMonitor.clear()}onGameEnd(t,i){this.appState===V.GAME&&(t&&t.total>=2?this.enqueueMessage({text:G.allGamesCompleted,attachments:xu(t)}):i&&this.enqueueMessage({text:`${G.gameEnded}${df(i)})`}),this._appState=V.NORMAL)}onCSAGameEnd(){this.appState===V.CSA_GAME&&(this._appState=V.NORMAL)}onFlipBoard(t){Fe().boardFlipping!==t&&Fe().flipBoard()}onSaveRecord(){const t=Tu(this.recordManager.record.metadata),n=`${Fe().autoSaveDirectory}/${t}`;this.saveRecordByPath(n).catch(s=>{this.pushError(`: ${s}`)})}onBeepShort(){const t=Fe();t.clockSoundTarget===Za.ONLY_USER&&!this.isMovableByUser||c1({frequency:t.clockPitch,volume:t.clockVolume})}onBeepUnlimited(){const t=Fe();t.clockSoundTarget===Za.ONLY_USER&&!this.isMovableByUser||u1({frequency:t.clockPitch,volume:t.clockVolume})}doMove(t){if(this.appState!==V.NORMAL&&this.appState!==V.RESEARCH||!this.recordManager.appendMove({move:t}))return;const i=Fe();la(i.pieceVolume)}onFinish(){this.appState===V.ANALYSIS&&(this._message.enqueue({text:""}),this._appState=V.NORMAL)}startResearch(t){if(!(this.appState!==V.RESEARCH_DIALOG||this.isBussy)){if(this.retainBussyState(),!t.usi){this.pushError(new Error(""));return}pe.saveResearchSetting(t).then(()=>this.researchManager.launch(t)).then(()=>{this._appState=V.RESEARCH,this.usiMonitor.clear(),this.onUpdatePosition();const i=Fe();i.tab!==Ht.SEARCH&&i.tab!==Ht.PV&&i.tab!==Ht.CHART&&i.tab!==Ht.PERCENTAGE_CHART&&Fe().updateAppSetting({tab:Ht.PV})}).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()})}}stopResearch(){this.appState===V.RESEARCH&&(this.researchManager.close(),this._appState=V.NORMAL)}onUpdateSearchInfo(t,i){this.recordManager.updateSearchInfo(t,i)}startAnalysis(t){this.appState!==V.ANALYSIS_DIALOG||this.isBussy||(this.retainBussyState(),pe.saveAnalysisSetting(t).then(()=>this.analysisManager.start(t)).then(()=>{this._appState=V.ANALYSIS,this.usiMonitor.clear()}).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}stopAnalysis(){this.appState===V.ANALYSIS&&(this.analysisManager.close(),this._appState=V.NORMAL)}onUpdatePosition(){this.researchManager&&this.researchManager.updatePosition(this.recordManager.record)}resetRecord(){this.appState==V.NORMAL&&this.showConfirmation({message:G.areYouSureWantToClearRecord,onOk:()=>{this.recordManager.reset()}})}updateRecordComment(t){this.recordManager.updateComment(t)}insertSpecialMove(t){this.appState!==V.NORMAL&&this.appState!==V.RESEARCH||this.recordManager.appendMove({move:t})}startPositionEditing(){this.appState===V.NORMAL&&this.showConfirmation({message:G.areYouSureWantToClearRecord,onOk:()=>{this._appState=V.POSITION_EDITING,this.recordManager.resetByCurrentPosition()}})}endPositionEditing(){this.appState===V.POSITION_EDITING&&(this._appState=V.NORMAL)}initializePosition(t){this.appState==V.POSITION_EDITING&&this.showConfirmation({message:G.areYouSureWantToDiscardPosition,onOk:()=>{this.recordManager.reset(t)}})}changeTurn(){this.appState==V.POSITION_EDITING&&this.recordManager.swapNextTurn()}editPosition(t){this.appState===V.POSITION_EDITING&&this.recordManager.changePosition(t)}changePly(t){(this.appState===V.NORMAL||this.appState===V.RESEARCH)&&this.recordManager.changePly(t)}changeBranch(t){(this.appState===V.NORMAL||this.appState===V.RESEARCH)&&this.recordManager.changeBranch(t)}swapWithNextBranch(){return this.recordManager.swapWithNextBranch()}swapWithPreviousBranch(){return this.recordManager.swapWithPreviousBranch()}removeCurrentMove(){if(!(this.appState!==V.NORMAL&&this.appState!==V.RESEARCH)){if(this.recordManager.record.current.isLastMove){this.recordManager.removeCurrentMove();return}this.showConfirmation({message:G.areYouSureWantToDeleteFollowingMove(this.recordManager.record.current.number),onOk:()=>{this.recordManager.removeCurrentMove()}})}}copyRecordKIF(){const t=Fe(),i=bf(this.recordManager.record,{returnCode:t.returnCode});navigator.clipboard.writeText(i)}copyRecordCSA(){const t=Fe(),i=vf(this.recordManager.record,{returnCode:t.returnCode});navigator.clipboard.writeText(i)}copyRecordUSIBefore(){const t=this.recordManager.record.usi;navigator.clipboard.writeText(t)}copyRecordUSIAll(){const t=this.recordManager.record.usiAll;navigator.clipboard.writeText(t)}copyBoardSFEN(){const t=this.recordManager.record.sfen;navigator.clipboard.writeText(t)}pasteRecord(t){if(this.appState!==V.NORMAL)return;const i=this.recordManager.importRecord(t);if(i){this.pushError(i);return}}openRecord(t){this.appState!==V.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>t||pe.showOpenRecordDialog()).then(i=>{if(i)return pe.openRecord(i).then(n=>{const s=this.recordManager.importRecordFromBuffer(n,i);return s&&Promise.reject(s)})}).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}saveRecord(t){this.appState!==V.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>{const i=this.recordManager.recordFilePath;if(t!=null&&t.overwrite&&i)return i;const n=Tu(this.recordManager.record.metadata);return pe.showSaveRecordDialog(n)}).then(i=>{if(i)return this.saveRecordByPath(i)}).catch(i=>{this.pushError(i)}).finally(()=>{this.releaseBussyState()}))}async saveRecordByPath(t){const i=Fe(),n=this.recordManager.exportRecordAsBuffer(t,{returnCode:i.returnCode});if(n instanceof Error)throw n;this.retainBussyState();try{await pe.saveRecord(t,n)}catch(s){throw new Error(`${G.failedToSaveRecord}: ${s}`)}finally{this.releaseBussyState()}}get isMovableByUser(){switch(this.appState){case V.NORMAL:case V.RESEARCH:return!0;case V.GAME:return(this.recordManager.record.position.color===D.BLACK?this.gameManager.setting.black.uri:this.gameManager.setting.white.uri)===ti;case V.CSA_GAME:return this.csaGameManager.isMyTurn&&this.csaGameManager.setting.player.uri===ti}return!1}}function Ry(){return new xy().reactive}let wa;function tt(){return wa||(wa=Ry()),wa}var Qe=(e=>(e.BUSSY="bussy",e.ERROR="error",e.INFO="info",e.GAME="game",e.INTERNET="internet",e.STOP="stop",e.RESIGN="resign",e.RESEARCH="research",e.END="end",e.QUIZ="quiz",e.EDIT="edit",e.CHECK="check",e.SWAP="swap",e.SWAP_H="swap_h",e.SETTINGS="settings",e.ENGINE_SETTINGS="engineSettings",e.FLIP="flip",e.FILE="file",e.OPEN="open",e.SAVE="save",e.SAVE_AS="saveAs",e.PASTE="paste",e.COPY="copy",e.DELETE="delete",e.COMMENT="comment",e.BRAIN="brain",e.PV="pv",e.CHART="chart",e.PERCENT="percent",e.ARROW_DROP="arrowDrop",e.ARROW_UP="arrowUp",e.FIRST="first",e.BACK="back",e.NEXT="next",e.LAST="last",e.QUESTION="question",e.ANALYSIS="analysis",e.DESCRIPTION="description",e.PLAY="play",e.CLOSE="close",e.CALL="call",e.SCORE="score",e.GRID="grid",e))(Qe||{});const Lf={bussy:"icon/hourglass_empty_white_24dp.svg",error:"icon/error_outline_white_24dp.svg",info:"icon/info_white_24dp.svg",game:"icon/sports_esports_white_24dp.svg",internet:"icon/language_FILL0_wght400_GRAD0_opsz48.svg",stop:"icon/block_white_24dp.svg",resign:"icon/flag_white_24dp.svg",research:"icon/science_white_24dp.svg",end:"icon/do_disturb_on_white_24dp.svg",quiz:"icon/quiz_FILL0_wght400_GRAD0_opsz48.svg",edit:"icon/app_registration_white_24dp.svg",check:"icon/check_circle_white_24dp.svg",swap:"icon/swap_vert_white_24dp.svg",swap_h:"icon/swap_horiz_white_24dp.svg",settings:"icon/settings_white_24dp.svg",engineSettings:"icon/settings_input_component_white_24dp.svg",flip:"icon/flip_camera_android_white_24dp.svg",file:"icon/draft_FILL0_wght400_GRAD0_opsz48.svg",open:"icon/file_open_FILL0_wght400_GRAD0_opsz48.svg",save:"icon/save_FILL0_wght400_GRAD0_opsz48.svg",saveAs:"icon/save_as_FILL0_wght400_GRAD0_opsz48.svg",paste:"icon/content_paste_white_24dp.svg",copy:"icon/content_copy_white_24dp.svg",delete:"icon/backspace_white_24dp.svg",comment:"icon/edit_note_white_24dp.svg",brain:"icon/psychology_white_24dp.svg",pv:"icon/manage_search_FILL0_wght400_GRAD0_opsz48.svg",chart:"icon/show_chart_white_24dp.svg",percent:"icon/percent_white_24dp.svg",arrowDrop:"icon/arrow_drop_down_white_24dp.svg",arrowUp:"icon/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg",first:"icon/first_page_white_24dp.svg",back:"icon/chevron_left_white_24dp.svg",next:"icon/chevron_right_white_24dp.svg",last:"icon/last_page_white_24dp.svg",question:"icon/help_white_24dp.svg",analysis:"icon/query_stats_white_24dp.svg",description:"icon/description_white_24dp.svg",play:"icon/play_arrow_FILL1_wght400_GRAD0_opsz48.svg",close:"icon/close_FILL0_wght400_GRAD0_opsz48.svg",call:"icon/record_voice_over_FILL0_wght400_GRAD0_opsz48.svg",score:"icon/scoreboard_FILL0_wght400_GRAD0_opsz48.svg",grid:"icon/grid_on_FILL0_wght400_GRAD0_opsz48.svg"};Object.values(Lf).forEach(e=>{ys(e)});const Ny=Ve({name:"ButtonIcon",props:{icon:{type:String,required:!0}},setup(e){return{source:Lf[e.icon]}}}),Oy=["src"];function Ly(e,t,i,n,s,o){return x(),N("img",{class:"icon",src:e.source,draggable:"false"},null,8,Oy)}const kt=je(Ny,[["render",Ly]]);function wt(e,t){e.addEventListener("cancel",i=>{i.preventDefault(),i.stopPropagation(),t&&t()}),e.addEventListener("copy",i=>{i.stopPropagation()}),e.addEventListener("paste",i=>{i.stopPropagation()}),e.showModal()}function go(e){return document.getElementById(e)}const By=Ve({name:"GameMenu",components:{ButtonIcon:kt},emits:["close"],setup(e,t){const i=tt(),n=z(null),s=()=>{t.emit("close")};return et(()=>{wt(n.value,s)}),{t:G,dialog:n,Icon:Qe,onClose:s,onLocalGame:()=>{i.showGameDialog(),t.emit("close")},onCSAGame:()=>{i.showCSAGameDialog(),t.emit("close")}}}}),Dy={ref:"dialog",class:"menu"},Fy={class:"groups"},$y={class:"group"},Hy={class:"label"},Uy={class:"group"},zy={class:"label"},Gy={class:"label"};function Wy(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",null,[d("dialog",Dy,[d("div",Fy,[d("div",$y,[d("button",{class:"close",onClick:t[0]||(t[0]=(...a)=>e.onClose&&e.onClose(...a))},[X(r,{class:"icon",icon:e.Icon.CLOSE},null,8,["icon"]),d("div",Hy,I(e.t.back),1)])]),d("div",Uy,[d("button",{onClick:t[1]||(t[1]=(...a)=>e.onLocalGame&&e.onLocalGame(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",zy,I(e.t.offlineGame),1)]),d("button",{onClick:t[2]||(t[2]=(...a)=>e.onCSAGame&&e.onCSAGame(...a))},[X(r,{class:"icon",icon:e.Icon.INTERNET},null,8,["icon"]),d("div",Gy,I(e.t.csaOnlineGame),1)])])])],512)])}const Vy=je(By,[["render",Wy]]),jy=Ve({name:"FileMenu",components:{ButtonIcon:kt},emits:["close"],setup(e,t){const i=tt(),n=z(null),s=()=>{t.emit("close")};et(()=>{wt(n.value,s)});const o=()=>{i.resetRecord(),t.emit("close")},r=()=>{i.openRecord(),t.emit("close")},a=()=>{i.saveRecord({overwrite:!0}),t.emit("close")},l=()=>{i.saveRecord(),t.emit("close")},c=()=>{i.showExportBoardImageDialog(),t.emit("close")},u=()=>{i.copyRecordKIF(),t.emit("close")},h=()=>{i.copyRecordCSA(),t.emit("close")},p=()=>{i.copyRecordUSIAll(),t.emit("close")},g=()=>{i.copyBoardSFEN(),t.emit("close")},y=()=>{i.showPasteDialog(),t.emit("close")},b=ke(()=>({newFile:i.appState===V.NORMAL,open:i.appState===V.NORMAL,save:i.appState===V.NORMAL,saveAs:i.appState===V.NORMAL,exportImage:i.appState===V.NORMAL,paste:i.appState===V.NORMAL}));return{t:G,dialog:n,Icon:Qe,onClose:s,onNewFile:o,onOpen:r,onSave:a,onSaveAs:l,onExportImage:c,onCopyKIF:u,onCopyCSA:h,onCopyUSI:p,onCopySFEN:g,onPaste:y,states:b}}}),Ky={ref:"dialog",class:"menu"},qy={class:"groups"},Yy={class:"group"},Xy={class:"label"},Jy={class:"group"},Qy=["disabled"],Zy={class:"label"},e_=["disabled"],t_={class:"label"},i_=["disabled"],n_={class:"label"},s_=["disabled"],o_={class:"label"},r_=["disabled"],a_={class:"label"},l_={class:"group"},c_={class:"label"},u_={class:"label"},h_={class:"label"},d_={class:"label"},f_=["disabled"],p_={class:"label"};function g_(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",null,[d("dialog",Ky,[d("div",qy,[d("div",Yy,[d("button",{class:"close",onClick:t[0]||(t[0]=(...a)=>e.onClose&&e.onClose(...a))},[X(r,{class:"icon",icon:e.Icon.CLOSE},null,8,["icon"]),d("div",Xy,I(e.t.back),1)])]),d("div",Jy,[d("button",{disabled:!e.states.newFile,onClick:t[1]||(t[1]=(...a)=>e.onNewFile&&e.onNewFile(...a))},[X(r,{class:"icon",icon:e.Icon.FILE},null,8,["icon"]),d("div",Zy,I(e.t.clear),1)],8,Qy),d("button",{disabled:!e.states.open,onClick:t[2]||(t[2]=(...a)=>e.onOpen&&e.onOpen(...a))},[X(r,{class:"icon",icon:e.Icon.OPEN},null,8,["icon"]),d("div",t_,I(e.t.open),1)],8,e_),d("button",{disabled:!e.states.save,onClick:t[3]||(t[3]=(...a)=>e.onSave&&e.onSave(...a))},[X(r,{class:"icon",icon:e.Icon.SAVE},null,8,["icon"]),d("div",n_,I(e.t.saveOverwrite),1)],8,i_),d("button",{disabled:!e.states.saveAs,onClick:t[4]||(t[4]=(...a)=>e.onSaveAs&&e.onSaveAs(...a))},[X(r,{class:"icon",icon:e.Icon.SAVE_AS},null,8,["icon"]),d("div",o_,I(e.t.saveAs),1)],8,s_),d("button",{disabled:!e.states.exportImage,onClick:t[5]||(t[5]=(...a)=>e.onExportImage&&e.onExportImage(...a))},[X(r,{class:"icon",icon:e.Icon.GRID},null,8,["icon"]),d("div",a_,I(e.t.positionImage),1)],8,r_)]),d("div",l_,[d("button",{onClick:t[6]||(t[6]=(...a)=>e.onCopyKIF&&e.onCopyKIF(...a))},[X(r,{class:"icon",icon:e.Icon.COPY},null,8,["icon"]),d("div",c_,I(e.t.copyAsKIF),1)]),d("button",{onClick:t[7]||(t[7]=(...a)=>e.onCopyCSA&&e.onCopyCSA(...a))},[X(r,{class:"icon",icon:e.Icon.COPY},null,8,["icon"]),d("div",u_,I(e.t.copyAsCSA),1)]),d("button",{onClick:t[8]||(t[8]=(...a)=>e.onCopyUSI&&e.onCopyUSI(...a))},[X(r,{class:"icon",icon:e.Icon.COPY},null,8,["icon"]),d("div",h_,I(e.t.copyAsUSI),1)]),d("button",{onClick:t[9]||(t[9]=(...a)=>e.onCopySFEN&&e.onCopySFEN(...a))},[X(r,{class:"icon",icon:e.Icon.COPY},null,8,["icon"]),d("div",d_,I(e.t.copyAsSFEN),1)]),d("button",{disabled:!e.states.paste,onClick:t[10]||(t[10]=(...a)=>e.onPaste&&e.onPaste(...a))},[X(r,{class:"icon",icon:e.Icon.PASTE},null,8,["icon"]),d("div",p_,I(e.t.paste),1)],8,f_)])])],512)])}const m_=je(jy,[["render",g_]]),b_=Ve({name:"InitialPositionMenu",components:{ButtonIcon:kt},emits:["close"],setup(e,t){const i=tt(),n=z(null),s=()=>{t.emit("close")};return et(()=>{wt(n.value,s)}),{t:G,dialog:n,Icon:Qe,onClose:s,onStandard:()=>{i.initializePosition(we.STANDARD),t.emit("close")},onHandicapLance:()=>{i.initializePosition(we.HANDICAP_LANCE),t.emit("close")},onHandicapRightLance:()=>{i.initializePosition(we.HANDICAP_RIGHT_LANCE),t.emit("close")},onHandicapBishop:()=>{i.initializePosition(we.HANDICAP_BISHOP),t.emit("close")},onHandicapRook:()=>{i.initializePosition(we.HANDICAP_ROOK),t.emit("close")},onHandicapRookLance:()=>{i.initializePosition(we.HANDICAP_ROOK_LANCE),t.emit("close")},onHandicap2Pieces:()=>{i.initializePosition(we.HANDICAP_2PIECES),t.emit("close")},onHandicap4Pieces:()=>{i.initializePosition(we.HANDICAP_4PIECES),t.emit("close")},onHandicap6Pieces:()=>{i.initializePosition(we.HANDICAP_6PIECES),t.emit("close")},onHandicap8Pieces:()=>{i.initializePosition(we.HANDICAP_8PIECES),t.emit("close")},onTsumeShogi:()=>{i.initializePosition(we.TSUME_SHOGI),t.emit("close")},onTsumeShogi2Kings:()=>{i.initializePosition(we.TSUME_SHOGI_2KINGS),t.emit("close")}}}}),y_={ref:"dialog",class:"menu"},__={class:"groups"},v_={class:"group"},S_={class:"label"},w_={class:"group"},E_={class:"label"},I_={class:"label"},P_={class:"label"},k_={class:"label"},A_={class:"label"},C_={class:"label"},T_={class:"label"},M_={class:"label"},x_={class:"label"},R_={class:"label"},N_={class:"label"},O_={class:"label"};function L_(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",null,[d("dialog",y_,[d("div",__,[d("div",v_,[d("button",{class:"close",onClick:t[0]||(t[0]=(...a)=>e.onClose&&e.onClose(...a))},[X(r,{class:"icon",icon:e.Icon.CLOSE},null,8,["icon"]),d("div",S_,I(e.t.back),1)])]),d("div",w_,[d("button",{onClick:t[1]||(t[1]=(...a)=>e.onStandard&&e.onStandard(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",E_,I(e.t.nonHandicap),1)]),d("button",{onClick:t[2]||(t[2]=(...a)=>e.onHandicapLance&&e.onHandicapLance(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",I_,I(e.t.lanceHandicap),1)]),d("button",{onClick:t[3]||(t[3]=(...a)=>e.onHandicapRightLance&&e.onHandicapRightLance(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",P_,I(e.t.rightLanceHandicap),1)]),d("button",{onClick:t[4]||(t[4]=(...a)=>e.onHandicapBishop&&e.onHandicapBishop(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",k_,I(e.t.bishopHandicap),1)]),d("button",{onClick:t[5]||(t[5]=(...a)=>e.onHandicapRook&&e.onHandicapRook(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",A_,I(e.t.rookHandicap),1)]),d("button",{onClick:t[6]||(t[6]=(...a)=>e.onHandicapRookLance&&e.onHandicapRookLance(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",C_,I(e.t.rookLanceHandicap),1)]),d("button",{onClick:t[7]||(t[7]=(...a)=>e.onHandicap2Pieces&&e.onHandicap2Pieces(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",T_,I(e.t.twoPiecesHandicap),1)]),d("button",{onClick:t[8]||(t[8]=(...a)=>e.onHandicap4Pieces&&e.onHandicap4Pieces(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",M_,I(e.t.fourPiecesHandicap),1)]),d("button",{onClick:t[9]||(t[9]=(...a)=>e.onHandicap6Pieces&&e.onHandicap6Pieces(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",x_,I(e.t.sixPiecesHandicap),1)]),d("button",{onClick:t[10]||(t[10]=(...a)=>e.onHandicap8Pieces&&e.onHandicap8Pieces(...a))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("div",R_,I(e.t.eightPiecesHandicap),1)]),d("button",{onClick:t[11]||(t[11]=(...a)=>e.onTsumeShogi&&e.onTsumeShogi(...a))},[X(r,{class:"icon",icon:e.Icon.QUIZ},null,8,["icon"]),d("div",N_,I(e.t.tsumeShogi),1)]),d("button",{onClick:t[12]||(t[12]=(...a)=>e.onTsumeShogi2Kings&&e.onTsumeShogi2Kings(...a))},[X(r,{class:"icon",icon:e.Icon.QUIZ},null,8,["icon"]),d("div",O_,I(e.t.doubleKingTsumeShogi),1)])])])],512)])}const B_=je(b_,[["render",L_]]);class nl{constructor(t){this.children=[],this.parent=t}delete(t){const i=this.children.indexOf(t);return i===-1?!1:(this.children=this.children.slice(0,i).concat(this.children.slice(i+1)),this.children.length===0&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class _r{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let i=this;for(let n=0;n<t.length;n+=1){const s=t[n];let o=i.get(s);if(n===t.length-1)return o instanceof _r&&(i.delete(o),o=null),o||(o=new nl(i),i.children[s]=o),o;o instanceof nl&&(o=null),o||(o=new _r(i),i.children[s]=o),i=o}return i}delete(t){for(const i in this.children)if(this.children[i]===t){const s=delete this.children[i];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),s}return!1}}function sl(e){if(!(e instanceof HTMLElement))return!1;const t=e.nodeName.toLowerCase(),i=(e.getAttribute("type")||"").toLowerCase();return t==="select"||t==="textarea"||t==="input"&&i!=="submit"&&i!=="reset"&&i!=="checkbox"&&i!=="radio"&&i!=="file"||e.isContentEditable}function D_(e,t){const i=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:t}});e.dispatchEvent(i)&&(sl(e)?e.focus():e.click())}function F_(e){const t=[];let i=[""],n=!1;for(let s=0;s<e.length;s++){if(n&&e[s]===","){t.push(i),i=[""],n=!1;continue}if(e[s]===" "){i.push(""),n=!1;continue}else e[s]==="+"?n=!1:n=!0;i[i.length-1]+=e[s]}return t.push(i),t.map(s=>s.filter(o=>o!=="")).filter(s=>s.length>0)}function Ru(e){const{ctrlKey:t,altKey:i,metaKey:n,key:s}=e,o=[],r=[t,i,n,$_(e)];for(const[a,l]of r.entries())l&&o.push(Nu[a]);return Nu.includes(s)||o.push(s),o.join("+")}const Nu=["Control","Alt","Meta","Shift"];function $_(e){const{shiftKey:t,code:i,key:n}=e;return t&&!(i.startsWith("Key")&&n.toUpperCase()===n)}const js=new _r,Bf=new WeakMap;let ol=js,Ho=null,rl=[];function Ea(){rl=[],Ho=null,ol=js}function Df(e){if(e.defaultPrevented||!(e.target instanceof Node))return;if(sl(e.target)){const i=e.target;if(!i.id||!i.ownerDocument.querySelector(`[data-hotkey-scope="${i.id}"]`))return}Ho!=null&&window.clearTimeout(Ho),Ho=window.setTimeout(Ea,1500);const t=ol.get(Ru(e));if(!t){Ea();return}if(rl.push(Ru(e)),ol=t,t instanceof nl){const i=e.target;let n=!1,s;const o=sl(i);for(let r=t.children.length-1;r>=0;r-=1){s=t.children[r];const a=s.getAttribute("data-hotkey-scope");if(!o&&!a||o&&i.id===a){n=!0;break}}s&&n&&(D_(s,rl),e.preventDefault()),Ea()}}function H_(e,t){Object.keys(js.children).length===0&&document.addEventListener("keydown",Df);const n=F_(t||e.getAttribute("data-hotkey")||"").map(s=>js.insert(s).add(e));Bf.set(e,n)}function U_(e){const t=Bf.get(e);if(t&&t.length)for(const i of t)i&&i.delete(e);Object.keys(js.children).length===0&&document.removeEventListener("keydown",Df)}function vr(e){for(const t of e.querySelectorAll("[data-hotkey]"))H_(t)}function Sr(e){for(const t of e.querySelectorAll("[data-hotkey]"))U_(t)}const Yn=[],Zt=[];function _s(e){Zt.length===0&&vr(e),Yn.push(e)}function vs(e){Zt.length===0&&Sr(e);for(let t=0;t<Yn.length;t++)if(Yn[t]===e){Yn.splice(t,1);break}}function Yt(e){if(Zt.length===0)for(const t of Yn)Sr(t);else Sr(Zt[Zt.length-1]);vr(e),Zt.push(e)}function Xt(e){for(let t=0;t<Zt.length;t++)if(Zt[t]===e){Zt.splice(t,1),t===Zt.length&&Sr(e);break}if(Zt.length===0)for(const t of Yn)vr(t);else vr(Zt[Zt.length-1])}const z_=Ve({name:"BoardPane",components:{BoardView:Vl,ButtonIcon:kt,GameMenu:Vy,FileMenu:m_,InitialPositionMenu:B_},props:{maxSize:{type:bt,required:!0}},emits:["resize"],setup(e,t){const i=tt(),n=Fe(),s=z(),o=z(),r=z(!1),a=z(!1),l=z(!1);et(()=>{_s(s.value),_s(o.value)}),ls(()=>{_s(s.value),_s(o.value)}),Od(()=>{vs(s.value),vs(o.value)}),Dt(()=>{vs(s.value),vs(o.value)});const c=oe=>{t.emit("resize",oe)},u=oe=>{i.appState===V.GAME||i.appState===V.CSA_GAME?qn.doMove(oe):i.doMove(oe)},h=oe=>{i.editPosition(oe)},p=()=>{r.value=!0},g=()=>{i.showGameResults()},y=()=>{i.stopGame()},b=()=>{qn.win()},v=()=>{qn.resign()},_=()=>{i.showResearchDialog()},E=()=>{i.stopResearch()},w=()=>{i.showAnalysisDialog()},P=()=>{i.stopAnalysis()},A=()=>{i.startPositionEditing()},O=()=>{i.endPositionEditing()},U=()=>{l.value=!0},W=()=>{i.changeTurn()},Z=()=>{i.showAppSettingDialog()},q=()=>{i.showUsiEngineManagementDialog()},Q=()=>{n.flipBoard()},ye=()=>{a.value=!0},de=()=>{i.removeCurrentMove()},Me=ke(()=>{const oe=i.record.current.move;return oe instanceof nt?oe:void 0}),Ee=ke(()=>i.record.metadata.getStandardMetadata(J.BLACK_NAME)||G.sente),Pe=ke(()=>i.record.metadata.getStandardMetadata(J.WHITE_NAME)||G.gote),ne=ke(()=>{if(i.appState===V.GAME||i.csaGameState===Zi.GAME)return{black:{time:i.blackTime,byoyomi:i.blackByoyomi},white:{time:i.whiteTime,byoyomi:i.whiteByoyomi}}}),re=ke(()=>({game:i.appState===V.NORMAL,showGameResults:i.appState===V.GAME&&i.gameSetting.repeat>=2,stop:i.appState===V.GAME||i.appState===V.CSA_GAME,win:i.appState===V.CSA_GAME&&i.isMovableByUser,resign:(i.appState===V.GAME||i.appState===V.CSA_GAME)&&i.isMovableByUser,research:i.appState===V.NORMAL,endResearch:i.appState===V.RESEARCH,analysis:i.appState===V.NORMAL,endAnalysis:i.appState===V.ANALYSIS,startEditPosition:i.appState===V.NORMAL,endEditPosition:i.appState===V.POSITION_EDITING,initPosition:i.appState===V.POSITION_EDITING,removeCurrentMove:i.appState===V.NORMAL||i.appState===V.RESEARCH,engineSettings:i.appState===V.NORMAL}));return{t:G,store:i,rightControl:s,leftControl:o,isGameMenuVisible:r,isFileMenuVisible:a,isInitialPositionMenuVisible:l,appSetting:n,lastMove:Me,blackPlayerName:Ee,whitePlayerName:Pe,clock:ne,controlStates:re,onResize:c,onMove:u,onEdit:h,onGame:p,onShowGameResults:g,onStop:y,onWin:b,onResign:v,onResearch:_,onEndResearch:E,onAnalysis:w,onEndAnalysis:P,onStartEditPosition:A,onEndEditPosition:O,onInitPosition:U,onChangeTurn:W,onOpenAppSettings:Z,onOpenEngineSettings:q,onFlip:Q,onFileAction:ye,onRemoveCurrentMove:de,Icon:Qe,AppState:V}}});const G_={ref:"rightControl",class:"control top"},W_={ref:"leftControl",class:"control bottom"},V_=["disabled"],j_=["disabled"];function K_(e,t,i,n,s,o){var h,p,g,y;const r=ge("ButtonIcon"),a=ge("BoardView"),l=ge("GameMenu"),c=ge("FileMenu"),u=ge("InitialPositionMenu");return x(),N("div",null,[X(a,{"piece-image-type":e.appSetting.pieceImage,"board-image-type":e.appSetting.boardImage,"board-label-type":e.appSetting.boardLabelType,"max-size":e.maxSize,position:e.store.record.position,"last-move":e.lastMove,flip:e.appSetting.boardFlipping,"allow-move":e.store.isMovableByUser,"allow-edit":e.store.appState===e.AppState.POSITION_EDITING,"black-player-name":e.blackPlayerName,"white-player-name":e.whitePlayerName,"black-player-time":(h=e.clock)==null?void 0:h.black.time,"black-player-byoyomi":(p=e.clock)==null?void 0:p.black.byoyomi,"white-player-time":(g=e.clock)==null?void 0:g.white.time,"white-player-byoyomi":(y=e.clock)==null?void 0:y.white.byoyomi,"next-move-label":e.t.nextTurn,onResize:e.onResize,onMove:e.onMove,onEdit:e.onEdit},{"right-control":Si(()=>[d("div",G_,[e.controlStates.game?(x(),N("button",{key:0,class:"control-item",onClick:t[0]||(t[0]=(...b)=>e.onGame&&e.onGame(...b))},[X(r,{class:"icon",icon:e.Icon.GAME},null,8,["icon"]),d("span",null,I(e.t.game),1)])):se("",!0),e.controlStates.showGameResults?(x(),N("button",{key:1,class:"control-item",onClick:t[1]||(t[1]=(...b)=>e.onShowGameResults&&e.onShowGameResults(...b))},[X(r,{class:"icon",icon:e.Icon.SCORE},null,8,["icon"]),d("span",null,I(e.t.displayGameResults),1)])):se("",!0),e.controlStates.stop?(x(),N("button",{key:2,class:"control-item","data-hotkey":"Escape",onClick:t[2]||(t[2]=(...b)=>e.onStop&&e.onStop(...b))},[X(r,{class:"icon",icon:e.Icon.STOP},null,8,["icon"]),d("span",null,I(e.t.stopGame),1)])):se("",!0),e.controlStates.win?(x(),N("button",{key:3,class:"control-item",onClick:t[3]||(t[3]=(...b)=>e.onWin&&e.onWin(...b))},[X(r,{class:"icon",icon:e.Icon.CALL},null,8,["icon"]),d("span",null,I(e.t.declareWinning),1)])):se("",!0),e.controlStates.resign?(x(),N("button",{key:4,class:"control-item",onClick:t[4]||(t[4]=(...b)=>e.onResign&&e.onResign(...b))},[X(r,{class:"icon",icon:e.Icon.RESIGN},null,8,["icon"]),d("span",null,I(e.t.resign),1)])):se("",!0),e.controlStates.research?(x(),N("button",{key:5,class:"control-item","data-hotkey":"Control+r",onClick:t[5]||(t[5]=(...b)=>e.onResearch&&e.onResearch(...b))},[X(r,{class:"icon",icon:e.Icon.RESEARCH},null,8,["icon"]),d("span",null,I(e.t.research),1)])):se("",!0),e.controlStates.endResearch?(x(),N("button",{key:6,class:"control-item","data-hotkey":"Escape",onClick:t[6]||(t[6]=(...b)=>e.onEndResearch&&e.onEndResearch(...b))},[X(r,{class:"icon",icon:e.Icon.END},null,8,["icon"]),d("span",null,I(e.t.endResearch),1)])):se("",!0),e.controlStates.analysis?(x(),N("button",{key:7,class:"control-item","data-hotkey":"Control+a",onClick:t[7]||(t[7]=(...b)=>e.onAnalysis&&e.onAnalysis(...b))},[X(r,{class:"icon",icon:e.Icon.ANALYSIS},null,8,["icon"]),d("span",null,I(e.t.analysis),1)])):se("",!0),e.controlStates.endAnalysis?(x(),N("button",{key:8,class:"control-item","data-hotkey":"Escape",onClick:t[8]||(t[8]=(...b)=>e.onEndAnalysis&&e.onEndAnalysis(...b))},[X(r,{class:"icon",icon:e.Icon.STOP},null,8,["icon"]),d("span",null,I(e.t.stopAnalysis),1)])):se("",!0),e.controlStates.startEditPosition?(x(),N("button",{key:9,class:"control-item",onClick:t[9]||(t[9]=(...b)=>e.onStartEditPosition&&e.onStartEditPosition(...b))},[X(r,{class:"icon",icon:e.Icon.EDIT},null,8,["icon"]),d("span",null,I(e.t.setupPosition),1)])):se("",!0),e.controlStates.endEditPosition?(x(),N("button",{key:10,class:"control-item",onClick:t[10]||(t[10]=(...b)=>e.onEndEditPosition&&e.onEndEditPosition(...b))},[X(r,{class:"icon",icon:e.Icon.CHECK},null,8,["icon"]),d("span",null,I(e.t.completePositionSetup),1)])):se("",!0),e.controlStates.initPosition?(x(),N("button",{key:11,class:"control-item",onClick:t[11]||(t[11]=(...b)=>e.onChangeTurn&&e.onChangeTurn(...b))},[X(r,{class:"icon",icon:e.Icon.SWAP},null,8,["icon"]),d("span",null,I(e.t.changeTurn),1)])):se("",!0),e.controlStates.initPosition?(x(),N("button",{key:12,class:"control-item",onClick:t[12]||(t[12]=(...b)=>e.onInitPosition&&e.onInitPosition(...b))},[d("span",null,I(e.t.initializePosition),1)])):se("",!0)],512)]),"left-control":Si(()=>[d("div",W_,[d("button",{class:"control-item","data-hotkey":"Control+,",onClick:t[13]||(t[13]=(...b)=>e.onOpenAppSettings&&e.onOpenAppSettings(...b))},[X(r,{class:"icon",icon:e.Icon.SETTINGS},null,8,["icon"]),d("span",null,I(e.t.appSettings),1)]),d("button",{class:"control-item","data-hotkey":"Control+.",disabled:!e.controlStates.engineSettings,onClick:t[14]||(t[14]=(...b)=>e.onOpenEngineSettings&&e.onOpenEngineSettings(...b))},[X(r,{class:"icon",icon:e.Icon.ENGINE_SETTINGS},null,8,["icon"]),d("span",null,I(e.t.engineSettings),1)],8,V_),d("button",{class:"control-item","data-hotkey":"Control+t",onClick:t[15]||(t[15]=(...b)=>e.onFlip&&e.onFlip(...b))},[X(r,{class:"icon",icon:e.Icon.FLIP},null,8,["icon"]),d("span",null,I(e.t.flipBoard),1)]),d("button",{class:"control-item",onClick:t[16]||(t[16]=(...b)=>e.onFileAction&&e.onFileAction(...b))},[X(r,{class:"icon",icon:e.Icon.FILE},null,8,["icon"]),d("span",null,I(e.t.file),1)]),d("button",{class:"control-item","data-hotkey":"Control+d",disabled:!e.controlStates.removeCurrentMove,onClick:t[17]||(t[17]=(...b)=>e.onRemoveCurrentMove&&e.onRemoveCurrentMove(...b))},[X(r,{class:"icon",icon:e.Icon.DELETE},null,8,["icon"]),d("span",null,I(e.t.deleteMove),1)],8,j_)],512)]),_:1},8,["piece-image-type","board-image-type","board-label-type","max-size","position","last-move","flip","allow-move","allow-edit","black-player-name","white-player-name","black-player-time","black-player-byoyomi","white-player-time","white-player-byoyomi","next-move-label","onResize","onMove","onEdit"]),e.isGameMenuVisible?(x(),$e(l,{key:0,onClose:t[18]||(t[18]=b=>e.isGameMenuVisible=!1)})):se("",!0),e.isFileMenuVisible?(x(),$e(c,{key:1,onClose:t[19]||(t[19]=b=>e.isFileMenuVisible=!1)})):se("",!0),e.isInitialPositionMenuVisible?(x(),$e(u,{key:2,onClose:t[20]||(t[20]=b=>e.isInitialPositionMenuVisible=!1)})):se("",!0)])}const q_=je(z_,[["render",K_],["__scopeId","data-v-a7a778db"]]),Y_=Ve({name:"RecordView",components:{ButtonIcon:kt},props:{record:{type:Object,required:!0},operational:{type:Boolean,required:!1},showElapsedTime:{type:Boolean,required:!1},showComment:{type:Boolean,required:!1}},emits:["goBegin","goBack","goForward","goEnd","selectMove","selectBranch","swapWithPreviousBranch","swapWithNextBranch"],setup(e,t){const i=z(null),n=z(null),s=()=>{e.operational&&t.emit("goBegin")},o=()=>{e.operational&&t.emit("goBack")},r=()=>{e.operational&&t.emit("goForward")},a=()=>{e.operational&&t.emit("goEnd")},l=y=>{e.operational&&t.emit("selectMove",Number(y))},c=y=>{e.operational&&t.emit("selectBranch",Number(y))},u=()=>{e.operational&&t.emit("swapWithPreviousBranch")},h=()=>{e.operational&&t.emit("swapWithNextBranch")},p=ke(()=>{const y=[];return e.record.moves.forEach(b=>{y.push({number:b.number,text:b.displayText,time:b.number!=0?b.timeText:"",hasBranch:b.hasBranch,comment:b.comment,selected:b===e.record.current})}),y}),g=ke(()=>{if(!e.record.branchBegin.branch)return null;const y=[];let b;for(b=e.record.branchBegin;b&&b.move;b=b.branch)y.push({index:y.length,text:b.displayText,comment:b.comment,selected:b.activeBranch});return y});return ls(()=>{i.value.childNodes.forEach(v=>{v instanceof HTMLElement&&v.classList.contains("selected")&&v.scrollIntoView({behavior:"auto",block:"nearest"})}),n.value.childNodes.forEach(v=>{v instanceof HTMLElement&&v.classList.contains("selected")&&v.scrollIntoView({behavior:"auto",block:"nearest"})})}),{moves:p,branches:g,moveList:i,branchList:n,goBegin:s,goBack:o,goForward:r,goEnd:a,changeNumber:l,changeBranch:c,swapWithPreviousBranch:u,swapWithNextBranch:h,Icon:Qe}}});const X_={class:"record-view"},J_={class:"controller"},Q_=["disabled"],Z_=["disabled"],ev=["disabled"],tv=["disabled"],iv={ref:"moveList",class:"move-list"},nv=["value","onClick"],sv={class:"move-number"},ov={class:"move-text"},rv={key:0,class:"move-time"},av={key:1,class:"move-comment"},lv={class:"branch-list-area"},cv={ref:"branchList",class:"branch-list"},uv=["value","onClick"],hv={class:"move-text"},dv={key:0,class:"move-comment"},fv={class:"branch-list-control"},pv=["disabled"],gv=["disabled"];function mv(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",X_,[d("div",J_,[d("button",{class:"control-button",disabled:!e.operational,"data-hotkey":"ArrowLeft",onClick:t[0]||(t[0]=a=>e.goBegin())},[X(r,{class:"icon",icon:e.Icon.FIRST},null,8,["icon"])],8,Q_),d("button",{class:"control-button",disabled:!e.operational,"data-hotkey":"ArrowUp",onClick:t[1]||(t[1]=a=>e.goBack())},[X(r,{class:"icon",icon:e.Icon.BACK},null,8,["icon"])],8,Z_),d("button",{class:"control-button",disabled:!e.operational,"data-hotkey":"ArrowDown",onClick:t[2]||(t[2]=a=>e.goForward())},[X(r,{class:"icon",icon:e.Icon.NEXT},null,8,["icon"])],8,ev),d("button",{class:"control-button",disabled:!e.operational,"data-hotkey":"ArrowRight",onClick:t[3]||(t[3]=a=>e.goEnd())},[X(r,{class:"icon",icon:e.Icon.LAST},null,8,["icon"])],8,tv)]),d("div",iv,[(x(!0),N(Ie,null,He(e.moves,a=>(x(),N("div",{key:a.number,class:yt(["move-element",{"has-branch":a.hasBranch,selected:a.selected}]),value:a.number,onClick:l=>e.changeNumber(a.number)},[d("div",sv,I(a.number!==0?a.number:""),1),d("div",ov,I(a.text),1),e.showElapsedTime?(x(),N("div",rv,I(a.time),1)):se("",!0),e.showComment?(x(),N("div",av,I(a.comment),1)):se("",!0)],10,nv))),128))],512),d("div",lv,[d("div",cv,[(x(!0),N(Ie,null,He(e.branches,a=>(x(),N("div",{key:a.index,class:yt(["move-element",{selected:a.selected}]),value:a.index,onClick:l=>e.changeBranch(a.index)},[d("div",hv,I(a.text),1),e.showComment?(x(),N("div",dv,I(a.comment),1)):se("",!0)],10,uv))),128))],512),d("div",fv,[d("button",{class:"branch-list-control-button",disabled:!e.operational,onClick:t[4]||(t[4]=a=>e.swapWithPreviousBranch())},[X(r,{class:"icon",icon:e.Icon.ARROW_UP},null,8,["icon"])],8,pv),d("button",{class:"branch-list-control-button",disabled:!e.operational,onClick:t[5]||(t[5]=a=>e.swapWithNextBranch())},[X(r,{class:"icon",icon:e.Icon.ARROW_DROP},null,8,["icon"])],8,gv)])])])}const bv=je(Y_,[["render",mv],["__scopeId","data-v-816a92a9"]]),yv=200,_v=Ve({name:"RecordPane",components:{RecordView:bv},setup(){const e=tt(),t=Fe(),i=z();et(()=>{_s(i.value)}),to(()=>{vs(i.value)});const n=b=>{e.changePly(b)},s=()=>{n(0)},o=()=>{n(e.record.current.number-1)},r=()=>{n(e.record.current.number+1)},a=()=>{n(Number.MAX_SAFE_INTEGER)},l=b=>{n(b)},c=b=>{e.changeBranch(b)},u=()=>{e.swapWithPreviousBranch()},h=()=>{e.swapWithNextBranch()},p=b=>{const v=b.target;t.updateAppSetting({showElapsedTimeInRecordView:v.checked})},g=b=>{const v=b.target;t.updateAppSetting({showCommentInRecordView:v.checked})},y=ke(()=>e.appState===V.NORMAL||e.appState===V.RESEARCH);return{t:G,store:e,appSetting:t,root:i,isRecordOperational:y,goBegin:s,goBack:o,goForward:r,goEnd:a,selectMove:l,selectBranch:c,swapWithPreviousBranch:u,swapWithNextBranch:h,onToggleElapsedTime:p,onToggleComment:g}}});const vv={ref:"root",class:"record-pane"},Sv={class:"record"},wv={class:"options"},Ev={class:"option"},Iv=["checked"],Pv={for:"show-elapsed-time"},kv={class:"option"},Av=["checked"],Cv={for:"show-comment"};function Tv(e,t,i,n,s,o){const r=ge("RecordView");return x(),N("div",vv,[d("div",Sv,[X(r,{record:e.store.record,operational:e.isRecordOperational,"show-comment":e.appSetting.showCommentInRecordView,"show-elapsed-time":e.appSetting.showElapsedTimeInRecordView,onGoBegin:e.goBegin,onGoBack:e.goBack,onGoForward:e.goForward,onGoEnd:e.goEnd,onSelectMove:e.selectMove,onSelectBranch:e.selectBranch,onSwapWithPreviousBranch:e.swapWithPreviousBranch,onSwapWithNextBranch:e.swapWithNextBranch},null,8,["record","operational","show-comment","show-elapsed-time","onGoBegin","onGoBack","onGoForward","onGoEnd","onSelectMove","onSelectBranch","onSwapWithPreviousBranch","onSwapWithNextBranch"])]),d("div",wv,[d("div",Ev,[d("input",{id:"show-elapsed-time",type:"checkbox",checked:e.appSetting.showElapsedTimeInRecordView,onChange:t[0]||(t[0]=(...a)=>e.onToggleElapsedTime&&e.onToggleElapsedTime(...a))},null,40,Iv),d("label",Pv,I(e.t.elapsedTime),1)]),d("div",kv,[d("input",{id:"show-comment",type:"checkbox",checked:e.appSetting.showCommentInRecordView,onChange:t[1]||(t[1]=(...a)=>e.onToggleComment&&e.onToggleComment(...a))},null,40,Av),d("label",Cv,I(e.t.comments),1)])])],512)}const Mv=je(_v,[["render",Tv],["__scopeId","data-v-f21fd26b"]]),xv=Ve({name:"PVPreviewDialog",components:{BoardView:Vl,ButtonIcon:kt},props:{position:{type:String,required:!0},pv:{type:Array,required:!0},infos:{type:Array,default:[],required:!1}},emits:["close"],setup(e,t){const i=Fe(),n=z(null),s=mi(new bt(0,0)),o=mi(new Tt),r=z(i.boardFlipping),a=()=>{s.width=window.innerWidth*.8,s.height=window.innerHeight*.8-80},l=()=>{const _=Nt.newBySFEN(e.position);if(_){o.clear(_);for(const E of e.pv){const w=o.position.createMoveByUSI(E);if(!w)break;o.append(w,{ignoreValidation:!0})}o.goto(1)}};et(async()=>{a(),l(),window.addEventListener("resize",a),wt(n.value),Yt(n.value)}),Dt(()=>{window.removeEventListener("resize",a),Xt(n.value)}),Qi([()=>e.position,()=>e.pv],()=>{l(),wt(n.value)});const c=()=>{t.emit("close")},u=()=>{o.goto(0)},h=()=>{o.goto(Number.MAX_SAFE_INTEGER)},p=()=>{o.goBack()},g=()=>{o.goForward()},y=()=>{r.value=!r.value},b=ke(()=>o.current.move instanceof nt?o.current.move:null),v=ke(()=>o.moves.slice(1).map(_=>({text:_.displayText,selected:_.number===o.current.number})));return{dialog:n,appSetting:i,record:o,lastMove:b,maxSize:s,flip:r,displayPV:v,close:c,goBegin:u,goEnd:h,goBack:p,goForward:g,doFlip:y,Icon:Qe}}});const Rv={ref:"dialog"},Nv={class:"control top"},Ov={class:"control-row"},Lv={class:"control-row"},Bv={class:"control-row"},Dv={class:"informations"},Fv={class:"information"};function $v(e,t,i,n,s,o){const r=ge("ButtonIcon"),a=ge("BoardView");return x(),N("div",null,[d("dialog",Rv,[X(a,{class:"board","piece-image-type":e.appSetting.pieceImage,"board-image-type":e.appSetting.boardImage,"board-label-type":e.appSetting.boardLabelType,"max-size":e.maxSize,position:e.record.position,"last-move":e.lastMove,flip:e.flip},{"right-control":Si(()=>[d("div",Nv,[d("div",Ov,[d("button",{class:"control-item","data-hotkey":"Control+t",onClick:t[0]||(t[0]=(...l)=>e.doFlip&&e.doFlip(...l))},[X(r,{class:"icon",icon:e.Icon.FLIP},null,8,["icon"])]),d("button",{class:"control-item",autofocus:"","data-hotkey":"Escape",onClick:t[1]||(t[1]=(...l)=>e.close&&e.close(...l))},[X(r,{class:"icon",icon:e.Icon.CLOSE},null,8,["icon"])])]),d("div",Lv,[d("button",{class:"control-item","data-hotkey":"ArrowLeft",onClick:t[2]||(t[2]=(...l)=>e.goBegin&&e.goBegin(...l))},[X(r,{class:"icon",icon:e.Icon.FIRST},null,8,["icon"])]),d("button",{class:"control-item","data-hotkey":"ArrowRight",onClick:t[3]||(t[3]=(...l)=>e.goEnd&&e.goEnd(...l))},[X(r,{class:"icon",icon:e.Icon.LAST},null,8,["icon"])])]),d("div",Bv,[d("button",{class:"control-item","data-hotkey":"ArrowUp",onClick:t[4]||(t[4]=(...l)=>e.goBack&&e.goBack(...l))},[X(r,{class:"icon",icon:e.Icon.BACK},null,8,["icon"])]),d("button",{class:"control-item","data-hotkey":"ArrowDown",onClick:t[5]||(t[5]=(...l)=>e.goForward&&e.goForward(...l))},[X(r,{class:"icon",icon:e.Icon.NEXT},null,8,["icon"])])])])]),_:1},8,["piece-image-type","board-image-type","board-label-type","max-size","position","last-move","flip"]),d("div",Dv,[(x(!0),N(Ie,null,He(e.infos,(l,c)=>(x(),N("div",{key:c,class:"information"},I(l),1))),128)),d("div",Fv,[(x(!0),N(Ie,null,He(e.displayPV,(l,c)=>(x(),N("span",{key:c},[d("span",{class:yt(["move-element",{selected:l.selected}])},""+I(l.text)+"",3)]))),128))])])],512)])}const Ff=je(xv,[["render",$v],["__scopeId","data-v-acc1ff42"]]),Hv=Ve({name:"RecordComment",components:{ButtonIcon:kt,PVPreviewDialog:Ff},setup(){const e=tt(),t=ke(()=>e.appState!=V.NORMAL&&e.appState!=V.RESEARCH),i=z(null),n=ke(()=>e.record.current.comment),s=ke(()=>e.inCommentPVs),o=z(null),r=c=>{const u=c.target.value;e.updateRecordComment(u)},a=c=>{o.value={position:e.record.position.sfen,pv:c.map(u=>u.usi)}},l=()=>{o.value=null};return et(()=>{i.value.addEventListener("copy",c=>{c.stopPropagation()}),i.value.addEventListener("paste",c=>{c.stopPropagation()})}),{t:G,Icon:Qe,comment:n,pvs:s,textarea:i,readonly:t,preview:o,change:r,play:a,closePreview:l}}});const Uv={class:"root"},zv=["value","readonly"],Gv={key:0,class:"play-buttons"},Wv=["onClick"];function Vv(e,t,i,n,s,o){const r=ge("ButtonIcon"),a=ge("PVPreviewDialog");return x(),N("div",null,[d("div",Uv,[d("textarea",{ref:"textarea",class:"text",value:e.comment,readonly:e.readonly,onInput:t[0]||(t[0]=(...l)=>e.change&&e.change(...l))},null,40,zv),e.pvs.length!==0?(x(),N("div",Gv,[(x(!0),N(Ie,null,He(e.pvs,(l,c)=>(x(),N("button",{key:c,class:"play",onClick:u=>e.play(l)},[X(r,{icon:e.Icon.PLAY},null,8,["icon"]),d("span",null,I(e.t.pv)+I(e.pvs.length>=2?" "+(c+1):""),1)],8,Wv))),128))])):se("",!0)]),e.preview?(x(),$e(a,{key:0,position:e.preview.position,pv:e.preview.pv,onClose:e.closePreview},null,8,["position","pv","onClose"])):se("",!0)])}const jv=je(Hv,[["render",Vv],["__scopeId","data-v-9c5dbbf7"]]),Kv=Ve({name:"EngineAnalyticsElement",components:{ButtonIcon:kt,PVPreviewDialog:Ff},props:{historyMode:{type:Boolean,required:!0},name:{type:String,required:!0},info:{type:xf,required:!0},height:{type:Number,required:!0}},setup:e=>{const t=ke(()=>{if(!e.historyMode)return!1;for(const a of e.info.iterates)if(a.multiPV&&a.multiPV!==1)return!0;return!1}),i=z(null),n=ke(()=>Fe().evaluationViewFrom),s=(a,l,c)=>c===Wl.EACH||l==D.BLACK?a:-a;return{t:G,Icon:Qe,enableHighlight:t,preview:i,evaluationViewFrom:n,getDisplayScore:s,showPreview:a=>{const l=[];a.depth!==void 0&&l.push(`=${a.depth}`),a.selectiveDepth!==void 0&&l.push(`=${a.selectiveDepth}`),a.score&&(l.push(`=${s(a.score,a.color,n.value)}`),a.lowerBound&&l.push(""),a.upperBound&&l.push("")),a.scoreMate&&l.push(`=${s(a.scoreMate,a.color,n.value)}`),a.multiPV&&l.push(`=${a.multiPV}`),i.value={position:a.position,pv:a.pv||[],infos:[l.join(" / ")]}},closePreview:()=>{i.value=null}}}});const qv=e=>(rs("data-v-3567098a"),e=e(),as(),e),Yv={class:"root"},Xv={class:"headers"},Jv={class:"header"},Qv={class:"label"},Zv={class:"value"},eS={class:"header"},tS={class:"label"},iS={class:"value"},nS={class:"header"},sS={class:"label"},oS={class:"value"},rS={class:"header"},aS=qv(()=>d("span",{class:"label"},"NPS: ",-1)),lS={class:"value"},cS={class:"header"},uS={class:"label"},hS={class:"value"},dS={class:"header"},fS={class:"label"},pS={class:"value"},gS={class:"list-header"},mS={class:"list-column time"},bS={class:"list-column multipv-index"},yS={class:"list-column depth"},_S={class:"list-column nodes"},vS={class:"list-column score"},SS={class:"list-column time"},wS={class:"list-column multipv-index"},ES={class:"list-column depth"},IS={class:"list-column nodes"},PS={class:"list-column score"},kS={class:"list-column score-flag"},AS={class:"list-column text"},CS=["onClick"];function TS(e,t,i,n,s,o){const r=ge("ButtonIcon"),a=ge("PVPreviewDialog");return x(),N("div",null,[d("div",Yv,[d("div",Xv,[d("div",Jv,[d("span",Qv,I(e.t.name)+": ",1),d("span",Zv,I(e.name),1)]),d("div",eS,[d("span",tS,I(e.t.prediction)+": ",1),d("span",iS,I(e.info.ponderMove?e.info.ponderMove:"---"),1)]),d("div",nS,[d("span",sS,I(e.t.best)+": ",1),d("span",oS,I(e.info.currentMoveText||"---"),1)]),d("div",rS,[aS,d("span",lS,I(e.info.nps||"---"),1)]),d("div",cS,[d("span",uS,I(e.t.nodes)+": ",1),d("span",hS,I(e.info.nodes||"---"),1)]),d("div",dS,[d("span",fS,I(e.t.hashUsage)+": ",1),d("span",pS,I(e.info.hashfull?(e.info.hashfull*100).toFixed(1):"---")+" % ",1)])]),d("div",gS,[d("div",mS,I(e.t.elapsed),1),d("div",bS,I(e.t.rank),1),d("div",yS,I(e.t.depth),1),d("div",_S,I(e.t.nodes),1),d("div",vS,I(e.t.eval),1)]),d("div",{class:"list",style:Se({height:`${e.height-37}px`})},[(x(!0),N(Ie,null,He(e.historyMode?e.info.iterates:e.info.latestIteration,(l,c)=>(x(),N("div",{key:c,class:yt(["list-item",{highlight:e.enableHighlight&&l.multiPV===1}])},[d("div",SS,I(l.timeMs?(l.timeMs/1e3).toFixed(1)+"s":""),1),d("div",wS,I(l.multiPV||""),1),d("div",ES,I(l.depth)+I(l.selectiveDepth&&l.depth?"/":"")+I(l.selectiveDepth),1),d("div",IS,I(l.nodes),1),d("div",PS,I(l.scoreMate?e.getDisplayScore(l.scoreMate,l.color,e.evaluationViewFrom):l.score?e.getDisplayScore(l.score,l.color,e.evaluationViewFrom):""),1),d("div",kS,I(l.lowerBound?"++":"")+" "+I(l.upperBound?"--":"")+" "+I(l.scoreMate?e.t.mateShort:""),1),d("div",AS,[l.pv&&l.pv.length!==0&&l.text?(x(),N("button",{key:0,onClick:u=>e.showPreview(l)},[X(r,{class:"icon",icon:e.Icon.PLAY},null,8,["icon"]),d("span",null,I(e.t.displayPVShort),1)],8,CS)):se("",!0),io(" "+I(l.text),1)])],2))),128))],4),e.preview?(x(),$e(a,{key:0,position:e.preview.position,pv:e.preview.pv,infos:e.preview.infos,onClose:e.closePreview},null,8,["position","pv","infos","onClose"])):se("",!0)])])}const MS=je(Kv,[["render",TS],["__scopeId","data-v-3567098a"]]),xS=Ve({name:"EngineAnalytics",components:{EngineAnalyticsElement:MS},props:{size:{type:bt,required:!0},historyMode:{type:Boolean,required:!0}},setup(e){const t=tt(),i=ke(()=>{const n=t.usiMonitors.length;return n!==0?e.size.height/n:0});return{store:t,elementHeight:i}}});const RS={class:"root"};function NS(e,t,i,n,s,o){const r=ge("EngineAnalyticsElement");return x(),N("div",null,[d("div",RS,[(x(!0),N(Ie,null,He(e.store.usiMonitors,a=>(x(),$e(r,{key:a.sessionID,"history-mode":e.historyMode,name:a.name,info:a,height:e.elementHeight},null,8,["history-mode","name","info","height"]))),128))])])}const OS=je(xS,[["render",NS],["__scopeId","data-v-b4c90b7e"]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function no(e){return e+.5|0}const ji=(e,t,i)=>Math.max(Math.min(e,i),t);function Ss(e){return ji(no(e*2.55),0,255)}function en(e){return ji(no(e*255),0,255)}function Oi(e){return ji(no(e/2.55)/100,0,1)}function Ou(e){return ji(no(e*100),0,100)}const ni={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},al=[..."0123456789ABCDEF"],LS=e=>al[e&15],BS=e=>al[(e&240)>>4]+al[e&15],mo=e=>(e&240)>>4===(e&15),DS=e=>mo(e.r)&&mo(e.g)&&mo(e.b)&&mo(e.a);function FS(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&ni[e[1]]*17,g:255&ni[e[2]]*17,b:255&ni[e[3]]*17,a:t===5?ni[e[4]]*17:255}:(t===7||t===9)&&(i={r:ni[e[1]]<<4|ni[e[2]],g:ni[e[3]]<<4|ni[e[4]],b:ni[e[5]]<<4|ni[e[6]],a:t===9?ni[e[7]]<<4|ni[e[8]]:255})),i}const $S=(e,t)=>e<255?t(e):"";function HS(e){var t=DS(e)?LS:BS;return e?"#"+t(e.r)+t(e.g)+t(e.b)+$S(e.a,t):void 0}const US=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function $f(e,t,i){const n=t*Math.min(i,1-i),s=(o,r=(o+e/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function zS(e,t,i){const n=(s,o=(s+e/60)%6)=>i-i*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function GS(e,t,i){const n=$f(e,1,.5);let s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function WS(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function ec(e){const i=e.r/255,n=e.g/255,s=e.b/255,o=Math.max(i,n,s),r=Math.min(i,n,s),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=WS(i,n,s,u,o),l=l*60+.5),[l|0,c||0,a]}function tc(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(en)}function ic(e,t,i){return tc($f,e,t,i)}function VS(e,t,i){return tc(GS,e,t,i)}function jS(e,t,i){return tc(zS,e,t,i)}function Hf(e){return(e%360+360)%360}function KS(e){const t=US.exec(e);let i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?Ss(+t[5]):en(+t[5]));const s=Hf(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=VS(s,o,r):t[1]==="hsv"?n=jS(s,o,r):n=ic(s,o,r),{r:n[0],g:n[1],b:n[2],a:i}}function qS(e,t){var i=ec(e);i[0]=Hf(i[0]+t),i=ic(i),e.r=i[0],e.g=i[1],e.b=i[2]}function YS(e){if(!e)return;const t=ec(e),i=t[0],n=Ou(t[1]),s=Ou(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${Oi(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const Lu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Bu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function XS(){const e={},t=Object.keys(Bu),i=Object.keys(Lu);let n,s,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],s=0;s<i.length;s++)o=i[s],a=a.replace(o,Lu[o]);o=parseInt(Bu[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}let bo;function JS(e){bo||(bo=XS(),bo.transparent=[0,0,0,0]);const t=bo[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const QS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ZS(e){const t=QS.exec(e);let i=255,n,s,o;if(t){if(t[7]!==n){const r=+t[7];i=t[8]?Ss(r):ji(r*255,0,255)}return n=+t[1],s=+t[3],o=+t[5],n=255&(t[2]?Ss(n):ji(n,0,255)),s=255&(t[4]?Ss(s):ji(s,0,255)),o=255&(t[6]?Ss(o):ji(o,0,255)),{r:n,g:s,b:o,a:i}}}function ew(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Oi(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Ia=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Bn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function tw(e,t,i){const n=Bn(Oi(e.r)),s=Bn(Oi(e.g)),o=Bn(Oi(e.b));return{r:en(Ia(n+i*(Bn(Oi(t.r))-n))),g:en(Ia(s+i*(Bn(Oi(t.g))-s))),b:en(Ia(o+i*(Bn(Oi(t.b))-o))),a:e.a+i*(t.a-e.a)}}function yo(e,t,i){if(e){let n=ec(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=ic(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Uf(e,t){return e&&Object.assign(t||{},e)}function Du(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=en(e[3]))):(t=Uf(e,{r:0,g:0,b:0,a:1}),t.a=en(t.a)),t}function iw(e){return e.charAt(0)==="r"?ZS(e):KS(e)}class Ks{constructor(t){if(t instanceof Ks)return t;const i=typeof t;let n;i==="object"?n=Du(t):i==="string"&&(n=FS(t)||JS(t)||iw(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Uf(this._rgb);return t&&(t.a=Oi(t.a)),t}set rgb(t){this._rgb=Du(t)}rgbString(){return this._valid?ew(this._rgb):void 0}hexString(){return this._valid?HS(this._rgb):void 0}hslString(){return this._valid?YS(this._rgb):void 0}mix(t,i){if(t){const n=this.rgb,s=t.rgb;let o;const r=i===o?.5:i,a=2*r-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*s.r+.5,n.g=255&c*n.g+o*s.g+.5,n.b=255&c*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=tw(this._rgb,t._rgb,i)),this}clone(){return new Ks(this.rgb)}alpha(t){return this._rgb.a=en(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=no(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return yo(this._rgb,2,t),this}darken(t){return yo(this._rgb,2,-t),this}saturate(t){return yo(this._rgb,1,t),this}desaturate(t){return yo(this._rgb,1,-t),this}rotate(t){return qS(this._rgb,t),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Ti(){}const nw=(()=>{let e=0;return()=>e++})();function We(e){return e===null||typeof e>"u"}function st(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Le(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function ht(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Jt(e,t){return ht(e)?e:t}function Ce(e,t){return typeof e>"u"?t:e}const sw=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,zf=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ze(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Ye(e,t,i,n){let s,o,r;if(st(e))if(o=e.length,n)for(s=o-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<o;s++)t.call(i,e[s],s);else if(Le(e))for(r=Object.keys(e),o=r.length,s=0;s<o;s++)t.call(i,e[r[s]],r[s])}function wr(e,t){let i,n,s,o;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],o=t[i],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Er(e){if(st(e))return e.map(Er);if(Le(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let s=0;for(;s<n;++s)t[i[s]]=Er(e[i[s]]);return t}return e}function Gf(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function ow(e,t,i,n){if(!Gf(e))return;const s=t[e],o=i[e];Le(s)&&Le(o)?qs(s,o,n):t[e]=Er(o)}function qs(e,t,i){const n=st(t)?t:[t],s=n.length;if(!Le(e))return e;i=i||{};const o=i.merger||ow;let r;for(let a=0;a<s;++a){if(r=n[a],!Le(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],e,r,i)}return e}function Rs(e,t){return qs(e,t,{merger:rw})}function rw(e,t,i){if(!Gf(e))return;const n=t[e],s=i[e];Le(n)&&Le(s)?Rs(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Er(s))}const Fu={"":e=>e,x:e=>e.x,y:e=>e.y};function aw(e){const t=e.split("."),i=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function lw(e){const t=aw(e);return i=>{for(const n of t){if(n==="")break;i=i&&i[n]}return i}}function sn(e,t){return(Fu[t]||(Fu[t]=lw(t)))(e)}function nc(e){return e.charAt(0).toUpperCase()+e.slice(1)}const li=e=>typeof e<"u",on=e=>typeof e=="function",$u=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function cw(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const lt=Math.PI,ot=2*lt,uw=ot+lt,Ir=Number.POSITIVE_INFINITY,hw=lt/180,dt=lt/2,dn=lt/4,Hu=lt*2/3,Ki=Math.log10,ki=Math.sign;function Ns(e,t,i){return Math.abs(e-t)<i}function Uu(e){const t=Math.round(e);e=Ns(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(Ki(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function dw(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,o)=>s-o).pop(),t}function es(e){return!isNaN(parseFloat(e))&&isFinite(e)}function fw(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function Wf(e,t,i){let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n][i],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function di(e){return e*(lt/180)}function sc(e){return e*(180/lt)}function zu(e){if(!ht(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Vf(e,t){const i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i);return o<-.5*lt&&(o+=ot),{angle:o,distance:s}}function ll(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function pw(e,t){return(e-t+uw)%ot-lt}function ei(e){return(e%ot+ot)%ot}function Ys(e,t,i,n){const s=ei(e),o=ei(t),r=ei(i),a=ei(o-s),l=ei(r-s),c=ei(s-o),u=ei(s-r);return s===o||s===r||n&&o===r||a>l&&c<u}function Pt(e,t,i){return Math.max(t,Math.min(i,e))}function gw(e){return Pt(e,-32768,32767)}function Fi(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function oc(e,t,i){i=i||(r=>e[r]<t);let n=e.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,i(o)?s=o:n=o;return{lo:s,hi:n}}const $i=(e,t,i,n)=>oc(e,i,n?s=>{const o=e[s][t];return o<i||o===i&&e[s+1][t]===i}:s=>e[s][t]<i),mw=(e,t,i)=>oc(e,i,n=>e[n][t]>=i);function bw(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}const jf=["push","pop","shift","splice","unshift"];function yw(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),jf.forEach(i=>{const n="_onData"+nc(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function Gu(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(jf.forEach(o=>{delete e[o]}),delete e._chartjs)}function Kf(e){const t=new Set;let i,n;for(i=0,n=e.length;i<n;++i)t.add(e[i]);return t.size===n?e:Array.from(t)}const qf=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Yf(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,qf.call(window,()=>{n=!1,e.apply(t,i)}))}}function _w(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const rc=e=>e==="start"?"left":e==="end"?"right":"center",Mt=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,vw=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;function Xf(e,t,i){const n=t.length;let s=0,o=n;if(e._sorted){const{iScale:r,_parsed:a}=e,l=r.axis,{min:c,max:u,minDefined:h,maxDefined:p}=r.getUserBounds();h&&(s=Pt(Math.min($i(a,r.axis,c).lo,i?n:$i(t,l,r.getPixelForValue(c)).lo),0,n-1)),p?o=Pt(Math.max($i(a,r.axis,u,!0).hi+1,i?0:$i(t,l,r.getPixelForValue(u),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function Jf(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),o}const _o=e=>e===0||e===1,Wu=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ot/i)),Vu=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*ot/i)+1,Os={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*dt)+1,easeOutSine:e=>Math.sin(e*dt),easeInOutSine:e=>-.5*(Math.cos(lt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>_o(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>_o(e)?e:Wu(e,.075,.3),easeOutElastic:e=>_o(e)?e:Vu(e,.075,.3),easeInOutElastic(e){return _o(e)?e:e<.5?.5*Wu(e*2,.1125,.45):.5+.5*Vu(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Os.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Os.easeInBounce(e*2)*.5:Os.easeOutBounce(e*2-1)*.5+.5};function Qf(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ju(e){return Qf(e)?e:new Ks(e)}function Pa(e){return Qf(e)?e:new Ks(e).saturate(.5).darken(.1).hexString()}const Sw=["x","y","borderWidth","radius","tension"],ww=["color","borderColor","backgroundColor"];function Ew(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:ww},numbers:{type:"number",properties:Sw}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Iw(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ku=new Map;function Pw(e,t){t=t||{};const i=e+JSON.stringify(t);let n=Ku.get(i);return n||(n=new Intl.NumberFormat(e,t),Ku.set(i,n)),n}function so(e,t,i){return Pw(t,i).format(e)}const Zf={values(e){return st(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const n=this.chart.options.locale;let s,o=e;if(i.length>1){const c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=kw(e,i)}const r=Ki(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),so(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(Ki(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?Zf.numeric.call(this,e,t,i):""}};function kw(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var Kr={formatters:Zf};function Aw(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Kr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Rn=Object.create(null),cl=Object.create(null);function Ls(e,t){if(!t)return e;const i=t.split(".");for(let n=0,s=i.length;n<s;++n){const o=i[n];e=e[o]||(e[o]=Object.create(null))}return e}function ka(e,t,i){return typeof t=="string"?qs(Ls(e,t),i):qs(Ls(e,""),t)}class Cw{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Pa(s.backgroundColor),this.hoverBorderColor=(n,s)=>Pa(s.borderColor),this.hoverColor=(n,s)=>Pa(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return ka(this,t,i)}get(t){return Ls(this,t)}describe(t,i){return ka(cl,t,i)}override(t,i){return ka(Rn,t,i)}route(t,i,n,s){const o=Ls(this,t),r=Ls(this,n),a="_"+i;Object.defineProperties(o,{[a]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],c=r[s];return Le(l)?Object.assign({},c,l):Ce(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var ft=new Cw({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ew,Iw,Aw]);function Tw(e){return!e||We(e.size)||We(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Pr(e,t,i,n,s){let o=t[s];return o||(o=t[s]=e.measureText(s).width,i.push(s)),o>n&&(n=o),n}function Mw(e,t,i,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},o=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0;const a=i.length;let l,c,u,h,p;for(l=0;l<a;l++)if(h=i[l],h!=null&&st(h)!==!0)r=Pr(e,s,o,r,h);else if(st(h))for(c=0,u=h.length;c<u;c++)p=h[c],p!=null&&!st(p)&&(r=Pr(e,s,o,r,p));e.restore();const g=o.length/2;if(g>i.length){for(l=0;l<g;l++)delete s[o[l]];o.splice(0,g)}return r}function fn(e,t,i){const n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function qu(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function ul(e,t,i,n){ep(e,t,i,n,null)}function ep(e,t,i,n,s){let o,r,a,l,c,u,h,p;const g=t.pointStyle,y=t.rotation,b=t.radius;let v=(y||0)*hw;if(g&&typeof g=="object"&&(o=g.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(v),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(b)||b<=0)){switch(e.beginPath(),g){default:s?e.ellipse(i,n,s/2,b,0,0,ot):e.arc(i,n,b,0,ot),e.closePath();break;case"triangle":u=s?s/2:b,e.moveTo(i+Math.sin(v)*u,n-Math.cos(v)*b),v+=Hu,e.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*b),v+=Hu,e.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*b),e.closePath();break;case"rectRounded":c=b*.516,l=b-c,r=Math.cos(v+dn)*l,h=Math.cos(v+dn)*(s?s/2-c:l),a=Math.sin(v+dn)*l,p=Math.sin(v+dn)*(s?s/2-c:l),e.arc(i-h,n-a,c,v-lt,v-dt),e.arc(i+p,n-r,c,v-dt,v),e.arc(i+h,n+a,c,v,v+dt),e.arc(i-p,n+r,c,v+dt,v+lt),e.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*b,u=s?s/2:l,e.rect(i-u,n-l,2*u,2*l);break}v+=dn;case"rectRot":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,p=Math.sin(v)*(s?s/2:b),e.moveTo(i-h,n-a),e.lineTo(i+p,n-r),e.lineTo(i+h,n+a),e.lineTo(i-p,n+r),e.closePath();break;case"crossRot":v+=dn;case"cross":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,p=Math.sin(v)*(s?s/2:b),e.moveTo(i-h,n-a),e.lineTo(i+h,n+a),e.moveTo(i+p,n-r),e.lineTo(i-p,n+r);break;case"star":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,p=Math.sin(v)*(s?s/2:b),e.moveTo(i-h,n-a),e.lineTo(i+h,n+a),e.moveTo(i+p,n-r),e.lineTo(i-p,n+r),v+=dn,h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,p=Math.sin(v)*(s?s/2:b),e.moveTo(i-h,n-a),e.lineTo(i+h,n+a),e.moveTo(i+p,n-r),e.lineTo(i-p,n+r);break;case"line":r=s?s/2:Math.cos(v)*b,a=Math.sin(v)*b,e.moveTo(i-r,n-a),e.lineTo(i+r,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(v)*(s?s/2:b),n+Math.sin(v)*b);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Xs(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function qr(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Yr(e){e.restore()}function xw(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if(s==="middle"){const o=(t.x+i.x)/2;e.lineTo(o,t.y),e.lineTo(o,i.y)}else s==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Rw(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Nn(e,t,i,n,s,o={}){const r=st(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(e.save(),e.font=s.string,Nw(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Lw(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),We(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,i,n,o.maxWidth)),e.fillText(c,i,n,o.maxWidth),Ow(e,i,n,c,o),n+=s.lineHeight;e.restore()}function Nw(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),We(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Ow(e,t,i,n,s){if(s.strikethrough||s.underline){const o=e.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(r,u),e.lineTo(a,u),e.stroke()}}function Lw(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Js(e,t){const{x:i,y:n,w:s,h:o,radius:r}=t;e.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-dt,lt,!0),e.lineTo(i,n+o-r.bottomLeft),e.arc(i+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,lt,dt,!0),e.lineTo(i+s-r.bottomRight,n+o),e.arc(i+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,dt,0,!0),e.lineTo(i+s,n+r.topRight),e.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-dt,!0),e.lineTo(i+r.topLeft,n)}const Bw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Dw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Fw(e,t){const i=(""+e).match(Bw);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const $w=e=>+e||0;function ac(e,t){const i={},n=Le(t),s=n?Object.keys(t):t,o=Le(e)?n?r=>Ce(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of s)i[r]=$w(o(r));return i}function tp(e){return ac(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Cn(e){return ac(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Bt(e){const t=tp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function vt(e,t){e=e||{},t=t||ft.font;let i=Ce(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=Ce(e.style,t.style);n&&!(""+n).match(Dw)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:Ce(e.family,t.family),lineHeight:Fw(Ce(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:Ce(e.weight,t.weight),string:""};return s.string=Tw(s),s}function ws(e,t,i,n){let s=!0,o,r,a;for(o=0,r=e.length;o<r;++o)if(a=e[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),i!==void 0&&st(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function Hw(e,t,i){const{min:n,max:s}=e,o=zf(t,(s-n)/2),r=(a,l)=>i&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function ln(e,t){return Object.assign(Object.create(e),t)}function lc(e,t=[""],i=e,n,s=()=>e[0]){li(n)||(n=op("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:s,override:r=>lc([r,...e],t,i,n)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete e[0][a],!0},get(r,a){return np(r,a,()=>qw(a,t,e,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(r,a){return Xu(r).includes(a)},ownKeys(r){return Xu(r)},set(r,a,l){const c=r._storage||(r._storage=s());return r[a]=c[a]=l,delete r._keys,!0}})}function ts(e,t,i,n){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:ip(e,n),setContext:o=>ts(e,o,i,n),override:o=>ts(e.override(o),t,i,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return np(o,r,()=>zw(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function ip(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:on(i)?i:()=>i,isIndexable:on(n)?n:()=>n}}const Uw=(e,t)=>e?e+nc(t):t,cc=(e,t)=>Le(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function np(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const n=i();return e[t]=n,n}function zw(e,t,i){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=e;let a=n[t];return on(a)&&r.isScriptable(t)&&(a=Gw(t,a,e,i)),st(a)&&a.length&&(a=Ww(t,a,e,r.isIndexable)),cc(t,a)&&(a=ts(a,s,o&&o[t],r)),a}function Gw(e,t,i,n){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(o,r||n),a.delete(e),cc(e,t)&&(t=uc(s._scopes,s,e,t)),t}function Ww(e,t,i,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=i;if(li(o.index)&&n(e))t=t[o.index%t.length];else if(Le(t[0])){const l=t,c=s._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=uc(c,s,e,u);t.push(ts(h,o,r&&r[e],a))}}return t}function sp(e,t,i){return on(e)?e(t,i):e}const Vw=(e,t)=>e===!0?t:typeof e=="string"?sn(t,e):void 0;function jw(e,t,i,n,s){for(const o of t){const r=Vw(i,o);if(r){e.add(r);const a=sp(r._fallback,i,s);if(li(a)&&a!==i&&a!==n)return a}else if(r===!1&&li(n)&&i!==n)return null}return!1}function uc(e,t,i,n){const s=t._rootScopes,o=sp(t._fallback,i,n),r=[...e,...s],a=new Set;a.add(n);let l=Yu(a,r,i,o||i,n);return l===null||li(o)&&o!==i&&(l=Yu(a,r,o,l,n),l===null)?!1:lc(Array.from(a),[""],s,o,()=>Kw(t,i,n))}function Yu(e,t,i,n,s){for(;i;)i=jw(e,t,i,n,s);return i}function Kw(e,t,i){const n=e._getTarget();t in n||(n[t]={});const s=n[t];return st(s)&&Le(i)?i:s||{}}function qw(e,t,i,n){let s;for(const o of t)if(s=op(Uw(o,e),i),li(s))return cc(e,s)?uc(i,n,e,s):s}function op(e,t){for(const i of t){if(!i)continue;const n=i[e];if(li(n))return n}}function Xu(e){let t=e._keys;return t||(t=e._keys=Yw(e._scopes)),t}function Yw(e){const t=new Set;for(const i of e)for(const n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}function rp(e,t,i,n){const{iScale:s}=e,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+i,u=t[c],r[a]={r:s.parse(sn(u,o),c)};return r}const Xw=Number.EPSILON||1e-14,is=(e,t)=>t<e.length&&!e[t].skip&&e[t],ap=e=>e==="x"?"y":"x";function Jw(e,t,i,n){const s=e.skip?t:e,o=t,r=i.skip?t:i,a=ll(o,s),l=ll(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=n*c,p=n*u;return{previous:{x:o.x-h*(r.x-s.x),y:o.y-h*(r.y-s.y)},next:{x:o.x+p*(r.x-s.x),y:o.y+p*(r.y-s.y)}}}function Qw(e,t,i){const n=e.length;let s,o,r,a,l,c=is(e,0);for(let u=0;u<n-1;++u)if(l=c,c=is(e,u+1),!(!l||!c)){if(Ns(t[u],0,Xw)){i[u]=i[u+1]=0;continue}s=i[u]/t[u],o=i[u+1]/t[u],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),i[u]=s*r*t[u],i[u+1]=o*r*t[u])}}function Zw(e,t,i="x"){const n=ap(i),s=e.length;let o,r,a,l=is(e,0);for(let c=0;c<s;++c){if(r=a,a=l,l=is(e,c+1),!a)continue;const u=a[i],h=a[n];r&&(o=(u-r[i])/3,a[`cp1${i}`]=u-o,a[`cp1${n}`]=h-o*t[c]),l&&(o=(l[i]-u)/3,a[`cp2${i}`]=u+o,a[`cp2${n}`]=h+o*t[c])}}function eE(e,t="x"){const i=ap(t),n=e.length,s=Array(n).fill(0),o=Array(n);let r,a,l,c=is(e,0);for(r=0;r<n;++r)if(a=l,l=c,c=is(e,r+1),!!l){if(c){const u=c[t]-l[t];s[r]=u!==0?(c[i]-l[i])/u:0}o[r]=a?c?ki(s[r-1])!==ki(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}Qw(e,s,o),Zw(e,o,t)}function vo(e,t,i){return Math.max(Math.min(e,i),t)}function tE(e,t){let i,n,s,o,r,a=Xs(e[0],t);for(i=0,n=e.length;i<n;++i)r=o,o=a,a=i<n-1&&Xs(e[i+1],t),o&&(s=e[i],r&&(s.cp1x=vo(s.cp1x,t.left,t.right),s.cp1y=vo(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=vo(s.cp2x,t.left,t.right),s.cp2y=vo(s.cp2y,t.top,t.bottom)))}function iE(e,t,i,n,s){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")eE(e,s);else{let c=n?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=Jw(c,a,e[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&tE(e,i)}function lp(){return typeof window<"u"&&typeof document<"u"}function hc(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function kr(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}const Xr=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function nE(e,t){return Xr(e).getPropertyValue(t)}const sE=["top","right","bottom","left"];function Tn(e,t,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const o=sE[s];n[o]=parseFloat(e[t+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const oE=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function rE(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:o}=n;let r=!1,a,l;if(oE(s,o,e.target))a=s,l=o;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function yn(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,s=Xr(i),o=s.boxSizing==="border-box",r=Tn(s,"padding"),a=Tn(s,"border","width"),{x:l,y:c,box:u}=rE(e,i),h=r.left+(u&&a.left),p=r.top+(u&&a.top);let{width:g,height:y}=t;return o&&(g-=r.width+a.width,y-=r.height+a.height),{x:Math.round((l-h)/g*i.width/n),y:Math.round((c-p)/y*i.height/n)}}function aE(e,t,i){let n,s;if(t===void 0||i===void 0){const o=hc(e);if(!o)t=e.clientWidth,i=e.clientHeight;else{const r=o.getBoundingClientRect(),a=Xr(o),l=Tn(a,"border","width"),c=Tn(a,"padding");t=r.width-c.width-l.width,i=r.height-c.height-l.height,n=kr(a.maxWidth,o,"clientWidth"),s=kr(a.maxHeight,o,"clientHeight")}}return{width:t,height:i,maxWidth:n||Ir,maxHeight:s||Ir}}const So=e=>Math.round(e*10)/10;function lE(e,t,i,n){const s=Xr(e),o=Tn(s,"margin"),r=kr(s.maxWidth,e,"clientWidth")||Ir,a=kr(s.maxHeight,e,"clientHeight")||Ir,l=aE(e,t,i);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const p=Tn(s,"border","width"),g=Tn(s,"padding");c-=g.width+p.width,u-=g.height+p.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=So(Math.min(c,r,l.maxWidth)),u=So(Math.min(u,a,l.maxHeight)),c&&!u&&(u=So(c/2)),(t!==void 0||i!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=So(Math.floor(u*n))),{width:c,height:u}}function Ju(e,t,i){const n=t||1,s=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(e.currentDevicePixelRatio=n,r.height=s,r.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const cE=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function Qu(e,t){const i=nE(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _n(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function uE(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function hE(e,t,i,n){const s={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=_n(e,s,i),a=_n(s,o,i),l=_n(o,t,i),c=_n(r,a,i),u=_n(a,l,i);return _n(c,u,i)}const dE=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},fE=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Xn(e,t,i){return e?dE(t,i):fE()}function cp(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function up(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function hp(e){return e==="angle"?{between:Ys,compare:pw,normalize:ei}:{between:Fi,compare:(t,i)=>t-i,normalize:t=>t}}function Zu({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:s}}function pE(e,t,i){const{property:n,start:s,end:o}=i,{between:r,normalize:a}=hp(n),l=t.length;let{start:c,end:u,loop:h}=e,p,g;if(h){for(c+=l,u+=l,p=0,g=l;p<g&&r(a(t[c%l][n]),s,o);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function dp(e,t,i){if(!i)return[e];const{property:n,start:s,end:o}=i,r=t.length,{compare:a,between:l,normalize:c}=hp(n),{start:u,end:h,loop:p,style:g}=pE(e,t,i),y=[];let b=!1,v=null,_,E,w;const P=()=>l(s,w,_)&&a(s,w)!==0,A=()=>a(o,_)===0||l(o,w,_),O=()=>b||P(),U=()=>!b||A();for(let W=u,Z=u;W<=h;++W)E=t[W%r],!E.skip&&(_=c(E[n]),_!==w&&(b=l(_,s,o),v===null&&O()&&(v=a(_,s)===0?W:Z),v!==null&&U()&&(y.push(Zu({start:v,end:W,loop:p,count:r,style:g})),v=null),Z=W,w=_));return v!==null&&y.push(Zu({start:v,end:h,loop:p,count:r,style:g})),y}function fp(e,t){const i=[],n=e.segments;for(let s=0;s<n.length;s++){const o=dp(n[s],e.points,t);o.length&&i.push(...o)}return i}function gE(e,t,i,n){let s=0,o=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(o+=s);o>s&&e[o%t].skip;)o--;return o%=t,{start:s,end:o}}function mE(e,t,i,n){const s=e.length,o=[];let r=t,a=e[t],l;for(l=t+1;l<=i;++l){const c=e[l%s];c.skip||c.stop?a.skip||(n=!1,o.push({start:t%s,end:(l-1)%s,loop:n}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%s,end:r%s,loop:n}),o}function bE(e,t){const i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];const o=!!e._loop,{start:r,end:a}=gE(i,s,o,n);if(n===!0)return eh(e,[{start:r,end:a,loop:o}],i,t);const l=a<r?a+s:a,c=!!e._fullLoop&&r===0&&a===s-1;return eh(e,mE(i,r,l,c),i,t)}function eh(e,t,i,n){return!n||!n.setContext||!i?t:yE(e,t,i,n)}function yE(e,t,i,n){const s=e._chart.getContext(),o=th(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=i.length,c=[];let u=o,h=t[0].start,p=h;function g(y,b,v,_){const E=a?-1:1;if(y!==b){for(y+=l;i[y%l].skip;)y-=E;for(;i[b%l].skip;)b+=E;y%l!==b%l&&(c.push({start:y%l,end:b%l,loop:v,style:_}),u=_,h=b%l)}}for(const y of t){h=a?h:y.start;let b=i[h%l],v;for(p=h+1;p<=y.end;p++){const _=i[p%l];v=th(n.setContext(ln(s,{type:"segment",p0:b,p1:_,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:r}))),_E(v,u)&&g(h,p-1,y.loop,u),b=_,u=v}h<p-1&&g(h,p-1,y.loop,u)}return c}function th(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function _E(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class vE{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){const o=i.listeners[s],r=i.duration;o.forEach(a=>a({chart:t,initial:i.initial,numSteps:r,currentStep:Math.min(n-i.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=qf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),o.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=o.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const n=i.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xi=new vE;const ih="transparent",SE={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const n=ju(e||ih),s=n.valid&&ju(t||ih);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class wE{constructor(t,i,n,s){const o=i[n];s=ws([t.to,s,o,t.from]);const r=ws([t.from,o,s]);this._active=!0,this._fn=t.fn||SE[t.type||typeof r],this._easing=Os[t.easing]||Os.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=ws([t.to,i,s,t.from]),this._from=ws([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=o;return}l=i/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){const i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}}class pp{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!Le(t))return;const i=Object.keys(ft.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!Le(o))return;const r={};for(const a of i)r[a]=o[a];(st(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,i){const n=i.options,s=IE(t,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&EE(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,i){const n=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(i),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,i));continue}const u=i[c];let h=o[c];const p=n.get(c);if(h)if(p&&h.active()){h.update(p,u,a);continue}else h.cancel();if(!p||!p.duration){t[c]=u;continue}o[c]=h=new wE(p,t,c,u),s.push(h)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const n=this._createAnimations(t,i);if(n.length)return xi.add(this._chart,n),!0}}function EE(e,t){const i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const o=e[n[s]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function IE(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function nh(e,t){const i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,o=i.max===void 0?t:0;return{start:n?o:s,end:n?s:o}}function PE(e,t,i){if(i===!1)return!1;const n=nh(e,i),s=nh(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function kE(e){let t,i,n,s;return Le(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function gp(e,t){const i=[],n=e._getSortedDatasetMetas(t);let s,o;for(s=0,o=n.length;s<o;++s)i.push(n[s].index);return i}function sh(e,t,i,n={}){const s=e.keys,o=n.mode==="single";let r,a,l,c;if(t!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===i){if(n.all)continue;break}c=e.values[l],ht(c)&&(o||t===0||ki(t)===ki(c))&&(t+=c)}return t}}function AE(e){const t=Object.keys(e),i=new Array(t.length);let n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n],i[n]={x:o,y:e[o]};return i}function oh(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function CE(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function TE(e){const{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function ME(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function rh(e,t,i,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const o=e[s.index];if(i&&o>0||!i&&o<0)return s.index}return null}function ah(e,t){const{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=CE(o,r,n),h=t.length;let p;for(let g=0;g<h;++g){const y=t[g],{[l]:b,[c]:v}=y,_=y._stacks||(y._stacks={});p=_[c]=ME(s,u,b),p[a]=v,p._top=rh(p,r,!0,n.type),p._bottom=rh(p,r,!1,n.type);const E=p._visualValues||(p._visualValues={});E[a]=v}}function Aa(e,t){const i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function xE(e,t){return ln(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function RE(e,t,i){return ln(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function hs(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const s of t){const o=s._stacks;if(!o||o[n]===void 0||o[n][i]===void 0)return;delete o[n][i],o[n]._visualValues!==void 0&&o[n]._visualValues[i]!==void 0&&delete o[n]._visualValues[i]}}}const Ca=e=>e==="reset"||e==="none",lh=(e,t)=>t?e:Object.assign({},e),NE=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:gp(i,!0),values:null};class gi{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=oh(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&hs(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(h,p,g,y)=>h==="x"?p:h==="r"?y:g,o=i.xAxisID=Ce(n.xAxisID,Aa(t,"x")),r=i.yAxisID=Ce(n.yAxisID,Aa(t,"y")),a=i.rAxisID=Ce(n.rAxisID,Aa(t,"r")),l=i.indexAxis,c=i.iAxisID=s(l,o,r,a),u=i.vAxisID=s(l,r,o,a);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Gu(this._data,this),t._stacked&&hs(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(Le(i))this._data=AE(i);else if(n!==i){if(n){Gu(n,this);const s=this._cachedMeta;hs(s),s._parsed=[]}i&&Object.isExtensible(i)&&yw(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=oh(i.vScale,i),i.stack!==n.stack&&(s=!0,hs(i),i.stack=n.stack),this._resyncElements(t),(s||o!==i._stacked)&&ah(this,i._parsed)}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=t===0&&i===s.length?!0:n._sorted,c=t>0&&n._parsed[t-1],u,h,p;if(this._parsing===!1)n._parsed=s,n._sorted=!0,p=s;else{st(s[t])?p=this.parseArrayData(n,s,t,i):Le(s[t])?p=this.parseObjectData(n,s,t,i):p=this.parsePrimitiveData(n,s,t,i);const g=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<i;++u)n._parsed[u+t]=h=p[u],l&&(g()&&(l=!1),c=h);n._sorted=l}r&&ah(this,p)}parsePrimitiveData(t,i,n,s){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,h=new Array(s);let p,g,y;for(p=0,g=s;p<g;++p)y=p+n,h[p]={[a]:u||o.parse(c[y],y),[l]:r.parse(i[y],y)};return h}parseArrayData(t,i,n,s){const{xScale:o,yScale:r}=t,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+n,h=i[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(t,i,n,s){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,p,g;for(u=0,h=s;u<h;++u)p=u+n,g=i[p],c[u]={x:o.parse(sn(g,a),p),y:r.parse(sn(g,l),p)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){const s=this.chart,o=this._cachedMeta,r=i[t.axis],a={keys:gp(s,!0),values:i._stacks[t.axis]._visualValues};return sh(a,r,o.index,{mode:n})}updateRangeFromParsed(t,i,n,s){const o=n[i.axis];let r=o===null?NaN:o;const a=s&&n._stacks[i.axis];s&&a&&(s.values=a,r=sh(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,i){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&t===n.iScale,r=s.length,a=this._getOtherScale(t),l=NE(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=TE(a);let p,g;function y(){g=s[p];const b=g[a.axis];return!ht(g[t.axis])||u>b||h<b}for(p=0;p<r&&!(!y()&&(this.updateRangeFromParsed(c,t,g,l),o));++p);if(o){for(p=r-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,t,g,l);break}}return c}getAllParsedValues(t){const i=this._cachedMeta._parsed,n=[];let s,o,r;for(s=0,o=i.length;s<o;++s)r=i[s][t.axis],ht(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,n=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=kE(Ce(this.options.clip,PE(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],o=i.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,o,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?r.push(h):h.draw(t,o))}for(u=0;u<r.length;++u)r[u].draw(t,o)}getStyle(t,i){const n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=RE(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=xE(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){const s=i==="active",o=this._cachedDataOpts,r=t+"-"+i,a=o[r],l=this.enableOptionSharing&&li(n);if(a)return lh(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],p=c.getOptionScopes(this.getDataset(),u),g=Object.keys(ft.elements[t]),y=()=>this.getContext(n,s,i),b=c.resolveNamedOptions(p,g,y,h);return b.$shared&&(b.$shared=l,o[r]=Object.freeze(lh(b,l))),b}_resolveAnimations(t,i,n){const s=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,i),p=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(p,this.getContext(t,n,i))}const c=new pp(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||Ca(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const n=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,n),{sharedOptions:o,includeOptions:r}}updateElement(t,i,n,s){Ca(s)?Object.assign(t,n):this._resolveAnimations(i,s).update(t,n)}updateSharedOptions(t,i,n){t&&!Ca(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,s){t.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=n.length,o=i.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,n=!0){const s=this._cachedMeta,o=s.data,r=t+i;let a;const l=c=>{for(c.length+=i,a=c.length-1;a>=r;a--)c[a]=c[a-i]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),n&&this.updateElements(o,t,i,"reset")}updateElements(t,i,n,s){}_removeElements(t,i){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,i);n._stacked&&hs(n,s)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,n,s]=t;this[i](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}T(gi,"defaults",{}),T(gi,"datasetElementType",null),T(gi,"dataElementType",null);function OE(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let n=[];for(let s=0,o=i.length;s<o;s++)n=n.concat(i[s].controller.getAllParsedValues(e));e._cache.$bar=Kf(n.sort((s,o)=>s-o))}return e._cache.$bar}function LE(e){const t=e.iScale,i=OE(t,e.type);let n=t._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(li(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(s=0,o=i.length;s<o;++s)r=t.getPixelForValue(i[s]),l();for(a=void 0,s=0,o=t.ticks.length;s<o;++s)r=t.getPixelForTick(s),l();return n}function BE(e,t,i,n){const s=i.barThickness;let o,r;return We(s)?(o=t.min*i.categoryPercentage,r=i.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[e]-o/2}}function DE(e,t,i,n){const s=t.pixels,o=s[e];let r=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null;const l=i.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:i.barPercentage,start:c}}function FE(e,t,i,n){const s=i.parse(e[0],n),o=i.parse(e[1],n),r=Math.min(s,o),a=Math.max(s,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function mp(e,t,i,n){return st(e)?FE(e,t,i,n):t[i.axis]=i.parse(e,n),t}function ch(e,t,i,n){const s=e.iScale,o=e.vScale,r=s.getLabels(),a=s===o,l=[];let c,u,h,p;for(c=i,u=i+n;c<u;++c)p=t[c],h={},h[s.axis]=a||s.parse(r[c],c),l.push(mp(p,h,o,c));return l}function Ta(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function $E(e,t,i){return e!==0?ki(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function HE(e){let t,i,n,s,o;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",o="start"):(s="start",o="end"),{start:i,end:n,reverse:t,top:s,bottom:o}}function UE(e,t,i,n){let s=t.borderSkipped;const o={};if(!s){e.borderSkipped=o;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=HE(e);s==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=u:(o[uh(u,r,a,l)]=!0,s=c)),o[uh(s,r,a,l)]=!0,e.borderSkipped=o}function uh(e,t,i,n){return n?(e=zE(e,t,i),e=hh(e,i,t)):e=hh(e,t,i),e}function zE(e,t,i){return e===t?i:e===i?t:e}function hh(e,t,i){return e==="start"?t:e==="end"?i:e}function GE(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class Uo extends gi{parsePrimitiveData(t,i,n,s){return ch(t,i,n,s)}parseArrayData(t,i,n,s){return ch(t,i,n,s)}parseObjectData(t,i,n,s){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let p,g,y,b;for(p=n,g=n+s;p<g;++p)b=i[p],y={},y[o.axis]=o.parse(sn(b,c),p),h.push(mp(sn(b,u),y,r,p));return h}updateRangeFromParsed(t,i,n,s){super.updateRangeFromParsed(t,i,n,s);const o=n._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:n,vScale:s}=i,o=this.getParsed(t),r=o._custom,a=Ta(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,n,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,s);for(let g=i;g<i+n;g++){const y=this.getParsed(g),b=o||We(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),v=this._calculateBarIndexPixels(g,u),_=(y._stacks||{})[a.axis],E={horizontal:c,base:b.base,enableBorderRadius:!_||Ta(y._custom)||r===_._top||r===_._bottom,x:c?b.head:v.center,y:c?v.center:b.head,height:c?v.size:Math.abs(b.size),width:c?Math.abs(b.size):v.size};p&&(E.options=h||this.resolveDataElementOptions(g,t[g].active?"active":s));const w=E.options||t[g].options;UE(E,w,_,r),GE(E,w,u.ratio),this.updateElement(t[g],g,E,s)}}_getStacks(t,i){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=n.options.stacked,r=[],a=l=>{const c=l.controller.getParsed(i),u=c&&c[l.vScale.axis];if(We(u)||isNaN(u))return!0};for(const l of s)if(!(i!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,n){const s=this._getStacks(t,n),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){const t=this.options,i=this._cachedMeta,n=i.iScale,s=[];let o,r;for(o=0,r=i.data.length;o<r;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||LE(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,u=Ta(c);let h=l[i.axis],p=0,g=n?this.applyStack(i,l,n):h,y,b;g!==h&&(p=g-h,g=h),u&&(h=c.barStart,g=c.barEnd-c.barStart,h!==0&&ki(h)!==ki(c.barEnd)&&(p=0),p+=h);const v=!We(o)&&!u?o:p;let _=i.getPixelForValue(v);if(this.chart.getDataVisibility(t)?y=i.getPixelForValue(p+g):y=_,b=y-_,Math.abs(b)<r){b=$E(b,i,a)*r,h===a&&(_-=b/2);const E=i.getPixelForDecimal(0),w=i.getPixelForDecimal(1),P=Math.min(E,w),A=Math.max(E,w);_=Math.max(Math.min(_,A),P),y=_+b,n&&!u&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(y)-i.getValueForPixel(_))}if(_===i.getPixelForValue(a)){const E=ki(b)*i.getLineWidthForValue(a)/2;_+=E,b-=E}return{size:b,base:_,head:y,center:y+b/2}}_calculateBarIndexPixels(t,i){const n=i.scale,s=this.options,o=s.skipNull,r=Ce(s.maxBarThickness,1/0);let a,l;if(i.grouped){const c=o?this._getStackCount(t):i.stackCount,u=s.barThickness==="flex"?DE(t,i,s,c):BE(t,i,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,i=t.vScale,n=t.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&n[o].draw(this._ctx)}}T(Uo,"id","bar"),T(Uo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),T(Uo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class zo extends gi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,n,s){const o=super.parsePrimitiveData(t,i,n,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(t,i,n,s){const o=super.parseArrayData(t,i,n,s);for(let r=0;r<o.length;r++){const a=i[n+r];o[r]._custom=Ce(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(t,i,n,s){const o=super.parseObjectData(t,i,n,s);for(let r=0;r<o.length;r++){const a=i[n+r];o[r]._custom=Ce(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(t),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,n,s){const o=s==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(i,s),u=r.axis,h=a.axis;for(let p=i;p<i+n;p++){const g=t[p],y=!o&&this.getParsed(p),b={},v=b[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(y[u]),_=b[h]=o?a.getBasePixel():a.getPixelForValue(y[h]);b.skip=isNaN(v)||isNaN(_),c&&(b.options=l||this.resolveDataElementOptions(p,g.active?"active":s),o&&(b.options.radius=0)),this.updateElement(g,p,b,s)}}resolveDataElementOptions(t,i){const n=this.getParsed(t);let s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=Ce(n&&n._custom,o),s}}T(zo,"id","bubble"),T(zo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),T(zo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function WE(e,t,i){let n=1,s=1,o=0,r=0;if(t<ot){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),p=Math.sin(l),g=(w,P,A)=>Ys(w,a,l,!0)?1:Math.max(P,P*i,A,A*i),y=(w,P,A)=>Ys(w,a,l,!0)?-1:Math.min(P,P*i,A,A*i),b=g(0,c,h),v=g(dt,u,p),_=y(lt,c,h),E=y(lt+dt,u,p);n=(b-_)/2,s=(v-E)/2,o=-(b+_)/2,r=-(v+E)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}class In extends gi{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=l=>+n[l];if(Le(n[t])){const{key:l="value"}=this._parsing;o=c=>+sn(n[c],l)}let r,a;for(r=t,a=t+i;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return di(this.options.rotation-90)}_getCircumference(){return di(this.options.circumference)}_getRotationExtents(){let t=ot,i=-ot;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+r)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:n}=i,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(sw(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:y,offsetY:b}=WE(h,u,l),v=(n.width-r)/p,_=(n.height-r)/g,E=Math.max(Math.min(v,_)/2,0),w=zf(this.options.radius,E),P=Math.max(w*l,0),A=(w-P)/this._getVisibleDatasetWeightTotal();this.offsetX=y*w,this.offsetY=b*w,s.total=this.calculateTotal(),this.outerRadius=w-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/ot)}updateElements(t,i,n,s){const o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,p=o&&c.animateScale,g=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(i,s);let _=this._getRotation(),E;for(E=0;E<i;++E)_+=this._circumference(E,o);for(E=i;E<i+n;++E){const w=this._circumference(E,o),P=t[E],A={x:u+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+w,circumference:w,outerRadius:y,innerRadius:g};v&&(A.options=b||this.resolveDataElementOptions(E,P.active?"active":s)),_+=w,this.updateElement(P,E,A,s)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let n=0,s;for(s=0;s<i.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?ot*(Math.abs(t)/i):0}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=so(i._parsed[t],n.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0;const n=this.chart;let s,o,r,a,l;if(!t){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),t=r.data,a=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let n=0,s=t.length;n<s;++n){const o=this.resolveDataElementOptions(n);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(t){return Math.max(Ce(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}T(In,"id","doughnut"),T(In,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),T(In,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"}),T(In,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=t.legend.options;return i.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});class Go extends gi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=i,r=this.chart._animationsDisabled;let{start:a,count:l}=Xf(i,s,r);this._drawStart=a,this._drawCount=l,Jf(i)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,i,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(i,s),p=r.axis,g=a.axis,{spanGaps:y,segment:b}=this.options,v=es(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||s==="none",E=i+n,w=t.length;let P=i>0&&this.getParsed(i-1);for(let A=0;A<w;++A){const O=t[A],U=_?O:{};if(A<i||A>=E){U.skip=!0;continue}const W=this.getParsed(A),Z=We(W[g]),q=U[p]=r.getPixelForValue(W[p],A),Q=U[g]=o||Z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,W,l):W[g],A);U.skip=isNaN(q)||isNaN(Q)||Z,U.stop=A>0&&Math.abs(W[p]-P[p])>v,b&&(U.parsed=W,U.raw=c.data[A]),h&&(U.options=u||this.resolveDataElementOptions(A,O.active?"active":s)),_||this.updateElement(O,A,U,s),P=W}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}T(Go,"id","line"),T(Go,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),T(Go,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Bs extends gi{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=so(i._parsed[t].r,n.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,n,s){return rp.bind(this)(t,i,n,s)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,n=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,i,n,s){const o=s==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,p=c.getIndexAngle(0)-.5*lt;let g=p,y;const b=360/this.countVisibleElements();for(y=0;y<i;++y)g+=this._computeAngle(y,s,b);for(y=i;y<i+n;y++){const v=t[y];let _=g,E=g+this._computeAngle(y,s,b),w=r.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;g=E,o&&(l.animateScale&&(w=0),l.animateRotate&&(_=E=p));const P={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:_,endAngle:E,options:this.resolveDataElementOptions(y,v.active?"active":s)};this.updateElement(v,y,P,s)}}countVisibleElements(){const t=this._cachedMeta;let i=0;return t.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,n){return this.chart.getDataVisibility(t)?di(this.resolveDataElementOptions(t,i).angle||n):0}}T(Bs,"id","polarArea"),T(Bs,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),T(Bs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=t.legend.options;return i.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class hl extends In{}T(hl,"id","pie"),T(hl,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Wo extends gi{getLabelAndValue(t){const i=this._cachedMeta.vScale,n=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(t,i,n,s){return rp.bind(this)(t,i,n,s)}update(t){const i=this._cachedMeta,n=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(n.points=s,t!=="resize"){const r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(n,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,n,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let a=i;a<i+n;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:u.x,p=r?o.yCenter:u.y,g={x:h,y:p,angle:u.angle,skip:isNaN(h)||isNaN(p),options:c};this.updateElement(l,a,g,s)}}}T(Wo,"id","radar"),T(Wo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),T(Wo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Vo extends gi{getLabelAndValue(t){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(t),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const i=this._cachedMeta,{data:n=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:r}=Xf(i,n,s);if(this._drawStart=o,this._drawCount=r,Jf(i)&&(o=0,r=n.length),this.options.showLine){const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},t)}this.updateElements(n,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(u),p=this.includeOptions(s,h),g=r.axis,y=a.axis,{spanGaps:b,segment:v}=this.options,_=es(b)?b:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||s==="none";let w=i>0&&this.getParsed(i-1);for(let P=i;P<i+n;++P){const A=t[P],O=this.getParsed(P),U=E?A:{},W=We(O[y]),Z=U[g]=r.getPixelForValue(O[g],P),q=U[y]=o||W?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[y],P);U.skip=isNaN(Z)||isNaN(q)||W,U.stop=P>0&&Math.abs(O[g]-w[g])>_,v&&(U.parsed=O,U.raw=c.data[P]),p&&(U.options=h||this.resolveDataElementOptions(P,A.active?"active":s)),E||this.updateElement(A,P,U,s),w=O}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,s=n.options&&n.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,r)/2}}T(Vo,"id","scatter"),T(Vo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),T(Vo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var VE=Object.freeze({__proto__:null,BarController:Uo,BubbleController:zo,DoughnutController:In,LineController:Go,PolarAreaController:Bs,PieController:hl,RadarController:Wo,ScatterController:Vo});function pn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dc{static override(t){Object.assign(dc.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return pn()}parse(){return pn()}format(){return pn()}add(){return pn()}diff(){return pn()}startOf(){return pn()}endOf(){return pn()}}var jE={_date:dc};function KE(e,t,i,n){const{controller:s,data:o,_sorted:r}=e,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const l=a._reversePixels?mw:$i;if(n){if(s._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(o,t,i-u),p=l(o,t,i+u);return{lo:h.lo,hi:p.hi}}}}else return l(o,t,i)}return{lo:0,hi:o.length-1}}function oo(e,t,i,n,s){const o=e.getSortedVisibleDatasetMetas(),r=i[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:h,hi:p}=KE(o[a],t,r,s);for(let g=h;g<=p;++g){const y=u[g];y.skip||n(y,c,g)}}}function qE(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){const o=t?Math.abs(n.x-s.x):0,r=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Ma(e,t,i,n,s){const o=[];return!s&&!e.isPointInArea(t)||oo(e,i,t,function(a,l,c){!s&&!Xs(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function YE(e,t,i,n){let s=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:h}=Vf(r,{x:t.x,y:t.y});Ys(h,c,u)&&s.push({element:r,datasetIndex:a,index:l})}return oo(e,i,t,o),s}function XE(e,t,i,n,s,o){let r=[];const a=qE(i);let l=Number.POSITIVE_INFINITY;function c(u,h,p){const g=u.inRange(t.x,t.y,s);if(n&&!g)return;const y=u.getCenterPoint(s);if(!(!!o||e.isPointInArea(y))&&!g)return;const v=a(t,y);v<l?(r=[{element:u,datasetIndex:h,index:p}],l=v):v===l&&r.push({element:u,datasetIndex:h,index:p})}return oo(e,i,t,c),r}function xa(e,t,i,n,s,o){return!o&&!e.isPointInArea(t)?[]:i==="r"&&!n?YE(e,t,i,s):XE(e,t,i,n,s,o)}function dh(e,t,i,n,s){const o=[],r=i==="x"?"inXRange":"inYRange";let a=!1;return oo(e,i,t,(l,c,u)=>{l[r](t[i],s)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:o}var JE={evaluateInteractionItems:oo,modes:{index(e,t,i,n){const s=yn(t,e),o=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?Ma(e,s,o,n,r):xa(e,s,o,!1,n,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,i,n){const s=yn(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;let a=i.intersect?Ma(e,s,o,n,r):xa(e,s,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,i,n){const s=yn(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return Ma(e,s,o,n,r)},nearest(e,t,i,n){const s=yn(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return xa(e,s,o,i.intersect,n,r)},x(e,t,i,n){const s=yn(t,e);return dh(e,s,"x",i.intersect,n)},y(e,t,i,n){const s=yn(t,e);return dh(e,s,"y",i.intersect,n)}}};const bp=["left","top","right","bottom"];function ds(e,t){return e.filter(i=>i.pos===t)}function fh(e,t){return e.filter(i=>bp.indexOf(i.pos)===-1&&i.box.axis===t)}function fs(e,t){return e.sort((i,n)=>{const s=t?n:i,o=t?i:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function QE(e){const t=[];let i,n,s,o,r,a;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:i,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function ZE(e){const t={};for(const i of e){const{stack:n,pos:s,stackWeight:o}=i;if(!n||!bp.includes(s))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function eI(e,t){const i=ZE(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];const{fullSize:l}=a.box,c=i[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=u?u*s:l&&t.availableHeight)}return i}function tI(e){const t=QE(e),i=fs(t.filter(c=>c.box.fullSize),!0),n=fs(ds(t,"left"),!0),s=fs(ds(t,"right")),o=fs(ds(t,"top"),!0),r=fs(ds(t,"bottom")),a=fh(t,"x"),l=fh(t,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:ds(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function ph(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function yp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function iI(e,t,i,n){const{pos:s,box:o}=i,r=e.maxPadding;if(!Le(s)){i.size&&(e[s]-=i.size);const h=n[i.stack]||{size:0,count:1};h.size=Math.max(h.size,i.horizontal?o.height:o.width),i.size=h.size/h.count,e[s]+=i.size}o.getPadding&&yp(r,o.getPadding());const a=Math.max(0,t.outerWidth-ph(r,e,"left","right")),l=Math.max(0,t.outerHeight-ph(r,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:u}:{same:u,other:c}}function nI(e){const t=e.maxPadding;function i(n){const s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function sI(e,t){const i=t.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],i[r])}),o}return n(e?["left","right"]:["top","bottom"])}function Es(e,t,i,n){const s=[];let o,r,a,l,c,u;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,sI(a.horizontal,t));const{same:h,other:p}=iI(t,i,a,n);c|=h&&s.length,u=u||p,l.fullSize||s.push(a)}return c&&Es(s,t,i,n)||u}function wo(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function gh(e,t,i,n){const s=i.padding;let{x:o,y:r}=t;for(const a of e){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,p=c.size||l.height;li(c.start)&&(r=c.start),l.fullSize?wo(l,s.left,r,i.outerWidth-s.right-s.left,p):wo(l,t.left+c.placed,r,h,p),c.start=r,c.placed+=h,r=l.bottom}else{const h=t.h*u,p=c.size||l.width;li(c.start)&&(o=c.start),l.fullSize?wo(l,o,s.top,p,i.outerHeight-s.bottom-s.top):wo(l,o,t.top+c.placed,p,h),c.start=o,c.placed+=h,o=l.right}}t.x=o,t.y=r}var Lt={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const s=Bt(e.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(i-s.height,0),a=tI(e.boxes),l=a.vertical,c=a.horizontal;Ye(e.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),p=Object.assign({},s);yp(p,Bt(n));const g=Object.assign({maxPadding:p,w:o,h:r,x:s.left,y:s.top},s),y=eI(l.concat(c),h);Es(a.fullSize,g,h,y),Es(l,g,h,y),Es(c,g,h,y)&&Es(l,g,h,y),nI(g),gh(a.leftAndTop,g,h,y),g.x+=g.w,g.y+=g.h,gh(a.rightAndBottom,g,h,y),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ye(a.chartArea,b=>{const v=b.box;Object.assign(v,e.chartArea),v.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class _p{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}}class oI extends _p{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const jo="$chartjs",rI={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mh=e=>e===null||e==="";function aI(e,t){const i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[jo]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",mh(s)){const o=Qu(e,"width");o!==void 0&&(e.width=o)}if(mh(n))if(e.style.height==="")e.height=e.width/(t||2);else{const o=Qu(e,"height");o!==void 0&&(e.height=o)}return e}const vp=cE?{passive:!0}:!1;function lI(e,t,i){e.addEventListener(t,i,vp)}function cI(e,t,i){e.canvas.removeEventListener(t,i,vp)}function uI(e,t){const i=rI[e.type]||e.type,{x:n,y:s}=yn(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Ar(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function hI(e,t,i){const n=e.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Ar(a.addedNodes,n),r=r&&!Ar(a.removedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function dI(e,t,i){const n=e.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Ar(a.removedNodes,n),r=r&&!Ar(a.addedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}const Qs=new Map;let bh=0;function Sp(){const e=window.devicePixelRatio;e!==bh&&(bh=e,Qs.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function fI(e,t){Qs.size||window.addEventListener("resize",Sp),Qs.set(e,t)}function pI(e){Qs.delete(e),Qs.size||window.removeEventListener("resize",Sp)}function gI(e,t,i){const n=e.canvas,s=n&&hc(n);if(!s)return;const o=Yf((a,l)=>{const c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(s),fI(e,o),r}function Ra(e,t,i){i&&i.disconnect(),t==="resize"&&pI(e)}function mI(e,t,i){const n=e.canvas,s=Yf(o=>{e.ctx!==null&&i(uI(o,e))},e);return lI(n,t,s),s}class bI extends _p{acquireContext(t,i){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(aI(t,i),n):null}releaseContext(t){const i=t.canvas;if(!i[jo])return!1;const n=i[jo].initial;["height","width"].forEach(o=>{const r=n[o];We(r)?i.removeAttribute(o):i.setAttribute(o,r)});const s=n.style||{};return Object.keys(s).forEach(o=>{i.style[o]=s[o]}),i.width=i.width,delete i[jo],!0}addEventListener(t,i,n){this.removeEventListener(t,i);const s=t.$proxies||(t.$proxies={}),r={attach:hI,detach:dI,resize:gI}[i]||mI;s[i]=r(t,i,n)}removeEventListener(t,i){const n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:Ra,detach:Ra,resize:Ra}[i]||cI)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return lE(t,i,n,s)}isAttached(t){const i=hc(t);return!!(i&&i.isConnected)}}function yI(e){return!lp()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?oI:bI}var xo;let Gi=(xo=class{constructor(){T(this,"active",!1)}tooltipPosition(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return es(this.x)&&es(this.y)}getProps(t,i){const n=this.$animations;if(!i||!n)return this;const s={};return t.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},T(xo,"defaults",{}),T(xo,"defaultRoutes"),xo);function _I(e,t){const i=e.options.ticks,n=vI(e),s=Math.min(i.maxTicksLimit||n,n),o=i.major.enabled?wI(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return EI(t,c,o,r/s),c;const u=SI(o,t,s);if(r>0){let h,p;const g=r>1?Math.round((l-a)/(r-1)):null;for(Eo(t,c,u,We(g)?0:a-g,a),h=0,p=r-1;h<p;h++)Eo(t,c,u,o[h],o[h+1]);return Eo(t,c,u,l,We(g)?t.length:l+g),c}return Eo(t,c,u),c}function vI(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function SI(e,t,i){const n=II(e),s=t.length/i;if(!n)return Math.max(s,1);const o=dw(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function wI(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function EI(e,t,i,n){let s=0,o=i[0],r;for(n=Math.ceil(n),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=i[s*n])}function Eo(e,t,i,n,s){const o=Ce(n,0),r=Math.min(Ce(s,e.length),e.length);let a=0,l,c,u;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),u=o;u<0;)a++,u=Math.round(o+a*i);for(c=Math.max(o,0);c<r;c++)c===u&&(t.push(e[c]),a++,u=Math.round(o+a*i))}function II(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}const PI=e=>e==="left"?"right":e==="right"?"left":e,yh=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,_h=(e,t)=>Math.min(t||e,e);function vh(e,t){const i=[],n=e.length/t,s=e.length;let o=0;for(;o<s;o+=n)i.push(e[Math.floor(o)]);return i}function kI(e,t,i){const n=e.ticks.length,s=Math.min(t,n-1),o=e._startPixel,r=e._endPixel,a=1e-6;let l=e.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<o-a||l>r+a)))return l}function AI(e,t){Ye(e,i=>{const n=i.gc,s=n.length/2;let o;if(s>t){for(o=0;o<s;++o)delete i.data[n[o]];n.splice(0,s)}})}function ps(e){return e.drawTicks?e.tickLength:0}function Sh(e,t){if(!e.display)return 0;const i=vt(e.font,t),n=Bt(e.padding);return(st(e.text)?e.text.length:1)*i.lineHeight+n.height}function CI(e,t){return ln(e,{scale:t,type:"scale"})}function TI(e,t,i){return ln(e,{tick:i,index:t,type:"tick"})}function MI(e,t,i){let n=rc(e);return(i&&t!=="right"||!i&&t==="right")&&(n=PI(n)),n}function xI(e,t,i,n){const{top:s,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h=0,p,g,y;const b=r-s,v=a-o;if(e.isHorizontal()){if(g=Mt(n,o,a),Le(i)){const _=Object.keys(i)[0],E=i[_];y=u[_].getPixelForValue(E)+b-t}else i==="center"?y=(c.bottom+c.top)/2+b-t:y=yh(e,i,t);p=a-o}else{if(Le(i)){const _=Object.keys(i)[0],E=i[_];g=u[_].getPixelForValue(E)-v+t}else i==="center"?g=(c.left+c.right)/2-v+t:g=yh(e,i,t);y=Mt(n,r,s),h=i==="left"?-dt:dt}return{titleX:g,titleY:y,maxWidth:p,rotation:h}}class On extends Gi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=Jt(t,Number.POSITIVE_INFINITY),i=Jt(i,Number.NEGATIVE_INFINITY),n=Jt(n,Number.POSITIVE_INFINITY),s=Jt(s,Number.NEGATIVE_INFINITY),{min:Jt(t,n),max:Jt(i,s),minDefined:ht(t),maxDefined:ht(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),s||(i=Math.min(i,r.min)),o||(n=Math.max(n,r.max));return i=o&&i>n?n:i,n=s&&i>n?i:n,{min:Jt(i,Jt(n,i)),max:Jt(n,Jt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ze(this.options.beforeUpdate,[this])}update(t,i,n){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Hw(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?vh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=_I(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ze(this.options.afterUpdate,[this])}beforeSetDimensions(){Ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ze(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ze(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n],o.label=Ze(i.callback,[o.value,n,t],this)}afterTickToLabelConversion(){Ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,n=_h(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,o=i.maxRotation;let r=s,a,l,c;if(!this._isVisible()||!i.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,g=Pt(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/n:g/(n-1),h+6>a&&(a=g/(n-(t.offset?.5:1)),l=this.maxHeight-ps(t.grid)-i.padding-Sh(t.title,this.chart.options.font),c=Math.sqrt(h*h+p*p),r=sc(Math.min(Math.asin(Pt((u.highest.height+6)/a,-1,1)),Math.asin(Pt(l/c,-1,1))-Math.asin(Pt(p/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ze(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Sh(s,i.options.font);if(a?(t.width=this.maxWidth,t.height=ps(o)+l):(t.height=this.maxHeight,t.width=ps(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:p}=this._getLabelSizes(),g=n.padding*2,y=di(this.labelRotation),b=Math.cos(y),v=Math.sin(y);if(a){const _=n.mirror?0:v*h.width+b*p.height;t.height=Math.min(this.maxHeight,t.height+_+g)}else{const _=n.mirror?0:b*h.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+_+g)}this._calculatePadding(c,u,v,b)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?c?(p=s*t.width,g=n*i.height):(p=n*t.height,g=s*i.width):o==="start"?g=i.width:o==="end"?p=t.width:o!=="inner"&&(p=t.width/2,g=i.width/2),this.paddingLeft=Math.max((p-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+r)*this.width/(this.width-h),0)}else{let u=i.height/2,h=t.height/2;o==="start"?(u=0,h=t.height):o==="end"&&(u=i.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ze(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)We(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=vh(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){const{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(i/_h(i,n));let c=0,u=0,h,p,g,y,b,v,_,E,w,P,A;for(h=0;h<i;h+=l){if(y=t[h].label,b=this._resolveTickFontOptions(h),s.font=v=b.string,_=o[v]=o[v]||{data:{},gc:[]},E=b.lineHeight,w=P=0,!We(y)&&!st(y))w=Pr(s,_.data,_.gc,w,y),P=E;else if(st(y))for(p=0,g=y.length;p<g;++p)A=y[p],!We(A)&&!st(A)&&(w=Pr(s,_.data,_.gc,w,A),P+=E);r.push(w),a.push(P),c=Math.max(w,c),u=Math.max(P,u)}AI(o,i);const O=r.indexOf(c),U=a.indexOf(u),W=Z=>({width:r[Z]||0,height:a[Z]||0});return{first:W(0),last:W(i-1),widest:W(O),highest:W(U),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return gw(this._alignToPixels?fn(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const n=i[t];return n.$context||(n.$context=TI(this.getContext(),t,n))}return this.$context||(this.$context=CI(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=di(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=ps(o),g=[],y=a.setContext(this.getContext()),b=y.display?y.width:0,v=b/2,_=function(Pe){return fn(n,Pe,b)};let E,w,P,A,O,U,W,Z,q,Q,ye,de;if(r==="top")E=_(this.bottom),U=this.bottom-p,Z=E-v,Q=_(t.top)+v,de=t.bottom;else if(r==="bottom")E=_(this.top),Q=t.top,de=_(t.bottom)-v,U=E+v,Z=this.top+p;else if(r==="left")E=_(this.right),O=this.right-p,W=E-v,q=_(t.left)+v,ye=t.right;else if(r==="right")E=_(this.left),q=t.left,ye=_(t.right)-v,O=E+v,W=this.left+p;else if(i==="x"){if(r==="center")E=_((t.top+t.bottom)/2+.5);else if(Le(r)){const Pe=Object.keys(r)[0],ne=r[Pe];E=_(this.chart.scales[Pe].getPixelForValue(ne))}Q=t.top,de=t.bottom,U=E+v,Z=U+p}else if(i==="y"){if(r==="center")E=_((t.left+t.right)/2);else if(Le(r)){const Pe=Object.keys(r)[0],ne=r[Pe];E=_(this.chart.scales[Pe].getPixelForValue(ne))}O=E-v,W=O-p,q=t.left,ye=t.right}const Me=Ce(s.ticks.maxTicksLimit,h),Ee=Math.max(1,Math.ceil(h/Me));for(w=0;w<h;w+=Ee){const Pe=this.getContext(w),ne=o.setContext(Pe),re=a.setContext(Pe),oe=ne.lineWidth,Be=ne.color,Ae=re.dash||[],be=re.dashOffset,ct=ne.tickWidth,ut=ne.tickColor,Et=ne.tickBorderDash||[],Xe=ne.tickBorderDashOffset;P=kI(this,w,l),P!==void 0&&(A=fn(n,P,oe),c?O=W=q=ye=A:U=Z=Q=de=A,g.push({tx1:O,ty1:U,tx2:W,ty2:Z,x1:q,y1:Q,x2:ye,y2:de,width:oe,color:Be,borderDash:Ae,borderDashOffset:be,tickWidth:ct,tickColor:ut,tickBorderDash:Et,tickBorderDashOffset:Xe}))}return this._ticksLength=h,this._borderValue=E,g}_computeLabelItems(t){const i=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=o,p=ps(n.grid),g=p+u,y=h?-u:g,b=-di(this.labelRotation),v=[];let _,E,w,P,A,O,U,W,Z,q,Q,ye,de="middle";if(s==="top")O=this.bottom-y,U=this._getXAxisLabelAlignment();else if(s==="bottom")O=this.top+y,U=this._getXAxisLabelAlignment();else if(s==="left"){const Ee=this._getYAxisLabelAlignment(p);U=Ee.textAlign,A=Ee.x}else if(s==="right"){const Ee=this._getYAxisLabelAlignment(p);U=Ee.textAlign,A=Ee.x}else if(i==="x"){if(s==="center")O=(t.top+t.bottom)/2+g;else if(Le(s)){const Ee=Object.keys(s)[0],Pe=s[Ee];O=this.chart.scales[Ee].getPixelForValue(Pe)+g}U=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")A=(t.left+t.right)/2-g;else if(Le(s)){const Ee=Object.keys(s)[0],Pe=s[Ee];A=this.chart.scales[Ee].getPixelForValue(Pe)}U=this._getYAxisLabelAlignment(p).textAlign}i==="y"&&(l==="start"?de="top":l==="end"&&(de="bottom"));const Me=this._getLabelSizes();for(_=0,E=a.length;_<E;++_){w=a[_],P=w.label;const Ee=o.setContext(this.getContext(_));W=this.getPixelForTick(_)+o.labelOffset,Z=this._resolveTickFontOptions(_),q=Z.lineHeight,Q=st(P)?P.length:1;const Pe=Q/2,ne=Ee.color,re=Ee.textStrokeColor,oe=Ee.textStrokeWidth;let Be=U;r?(A=W,U==="inner"&&(_===E-1?Be=this.options.reverse?"left":"right":_===0?Be=this.options.reverse?"right":"left":Be="center"),s==="top"?c==="near"||b!==0?ye=-Q*q+q/2:c==="center"?ye=-Me.highest.height/2-Pe*q+q:ye=-Me.highest.height+q/2:c==="near"||b!==0?ye=q/2:c==="center"?ye=Me.highest.height/2-Pe*q:ye=Me.highest.height-Q*q,h&&(ye*=-1),b!==0&&!Ee.showLabelBackdrop&&(A+=q/2*Math.sin(b))):(O=W,ye=(1-Q)*q/2);let Ae;if(Ee.showLabelBackdrop){const be=Bt(Ee.backdropPadding),ct=Me.heights[_],ut=Me.widths[_];let Et=ye-be.top,Xe=0-be.left;switch(de){case"middle":Et-=ct/2;break;case"bottom":Et-=ct;break}switch(U){case"center":Xe-=ut/2;break;case"right":Xe-=ut;break}Ae={left:Xe,top:Et,width:ut+be.width,height:ct+be.height,color:Ee.backdropColor}}v.push({label:P,font:Z,textOffset:ye,options:{rotation:b,color:ne,strokeColor:re,strokeWidth:oe,textAlign:Be,textBaseline:de,translation:[A,O],backdrop:Ae}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-di(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,u;return i==="left"?s?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):i==="right"?s?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:n,top:s,width:o,height:r}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,o,r),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(o=0,r=s.length;o<r;++o){const l=s[o];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,p;this.isHorizontal()?(c=fn(t,this.left,r)-r/2,u=fn(t,this.right,a)+a/2,h=p=l):(h=fn(t,this.top,r)-r/2,p=fn(t,this.bottom,a)+a/2,c=u=l),i.save(),i.lineWidth=o.width,i.strokeStyle=o.color,i.beginPath(),i.moveTo(c,h),i.lineTo(u,p),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&qr(n,s);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;Nn(n,c,0,u,l,a)}s&&Yr(n)}drawTitle(){const{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;const o=vt(n.font),r=Bt(n.padding),a=n.align;let l=o.lineHeight/2;i==="bottom"||i==="center"||Le(i)?(l+=r.bottom,st(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:h,rotation:p}=xI(this,l,i,a);Nn(t,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:p,textAlign:MI(a,i,s),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,n=Ce(t.grid&&t.grid.z,-1),s=Ce(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==On.prototype.draw?[{z:i,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,r;for(o=0,r=i.length;o<r;++o){const a=i[o];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return vt(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Io{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let n;OI(i)&&(n=this.register(i));const s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,RI(t,r,n),this.override&&ft.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in ft[s]&&(delete ft[s][n],this.override&&delete Rn[n])}}function RI(e,t,i){const n=qs(Object.create(null),[i?ft.get(i):{},ft.get(t),e.defaults]);ft.set(t,n),e.defaultRoutes&&NI(t,e.defaultRoutes),e.descriptors&&ft.describe(t,e.descriptors)}function NI(e,t){Object.keys(t).forEach(i=>{const n=i.split("."),s=n.pop(),o=[e].concat(n).join("."),r=t[i].split("."),a=r.pop(),l=r.join(".");ft.route(o,s,l,a)})}function OI(e){return"id"in e&&"defaults"in e}class LI{constructor(){this.controllers=new Io(gi,"datasets",!0),this.elements=new Io(Gi,"elements"),this.plugins=new Io(Object,"plugins"),this.scales=new Io(On,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):Ye(s,r=>{const a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,i,n){const s=nc(t);Ze(n["before"+s],[],n),i[t](n),Ze(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){const s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var vi=new LI;class BI{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,i,n);return i==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,i,n,s){s=s||{};for(const o of t){const r=o.plugin,a=r[n],l=[i,s,o.options];if(Ze(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){We(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const n=t&&t.config,s=Ce(n.options&&n.options.plugins,{}),o=DI(n);return s===!1&&!i?[]:$I(t,o,s,i)}_notifyStateChanges(t){const i=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}}function DI(e){const t={},i=[],n=Object.keys(vi.plugins.items);for(let o=0;o<n.length;o++)i.push(vi.getPlugin(n[o]));const s=e.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];i.indexOf(r)===-1&&(i.push(r),t[r.id]=!0)}return{plugins:i,localIds:t}}function FI(e,t){return!t&&e===!1?null:e===!0?{}:e}function $I(e,{plugins:t,localIds:i},n,s){const o=[],r=e.getContext();for(const a of t){const l=a.id,c=FI(n[l],s);c!==null&&o.push({plugin:a,options:HI(e.config,{plugin:a,local:i[l]},c,r)})}return o}function HI(e,{plugin:t,local:i},n,s){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return i&&t.defaults&&r.push(t.defaults),e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dl(e,t){const i=ft.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function UI(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function zI(e,t){return e===t?"_index_":"_value_"}function GI(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Cr(e,t){if(e==="x"||e==="y"||e==="r"||(e=t.axis||GI(t.position)||e.length>1&&Cr(e[0].toLowerCase(),t),e))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function WI(e,t){const i=Rn[e.type]||{scales:{}},n=t.scales||{},s=dl(e.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!Le(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=Cr(r,a),c=zI(l,s),u=i.scales||{};o[r]=Rs(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,l=r.indexAxis||dl(a,t),u=(Rn[a]||{}).scales||{};Object.keys(u).forEach(h=>{const p=UI(h,l),g=r[p+"AxisID"]||p;o[g]=o[g]||Object.create(null),Rs(o[g],[{axis:p},n[g],u[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];Rs(a,[ft.scales[a.type],ft.scale])}),o}function wp(e){const t=e.options||(e.options={});t.plugins=Ce(t.plugins,{}),t.scales=WI(e,t)}function Ep(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function VI(e){return e=e||{},e.data=Ep(e.data),wp(e),e}const wh=new Map,Ip=new Set;function Po(e,t){let i=wh.get(e);return i||(i=t(),wh.set(e,i),Ip.add(i)),i}const gs=(e,t,i)=>{const n=sn(t,i);n!==void 0&&e.add(n)};class jI{constructor(t){this._config=VI(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ep(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),wp(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Po(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Po(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Po(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,n=this.type;return Po(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const n=this._scopeCache;let s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){const{options:s,type:o}=this,r=this._cachedScopes(t,n),a=r.get(i);if(a)return a;const l=new Set;i.forEach(u=>{t&&(l.add(t),u.forEach(h=>gs(l,t,h))),u.forEach(h=>gs(l,s,h)),u.forEach(h=>gs(l,Rn[o]||{},h)),u.forEach(h=>gs(l,ft,h)),u.forEach(h=>gs(l,cl,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Ip.has(i)&&r.set(i,c),c}chartOptionScopes(){const{options:t,type:i}=this;return[t,Rn[i]||{},ft.datasets[i]||{},{type:i},ft,cl]}resolveNamedOptions(t,i,n,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Eh(this._resolverCache,t,s);let l=r;if(qI(r,i)){o.$shared=!1,n=on(n)?n():n;const c=this.createResolver(t,n,a);l=ts(r,n,c)}for(const c of i)o[c]=l[c];return o}createResolver(t,i,n=[""],s){const{resolver:o}=Eh(this._resolverCache,t,n);return Le(i)?ts(o,i,void 0,s):o}}function Eh(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const s=i.join();let o=n.get(s);return o||(o={resolver:lc(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}const KI=e=>Le(e)&&Object.getOwnPropertyNames(e).reduce((t,i)=>t||on(e[i]),!1);function qI(e,t){const{isScriptable:i,isIndexable:n}=ip(e);for(const s of t){const o=i(s),r=n(s),a=(r||o)&&e[s];if(o&&(on(a)||KI(a))||r&&st(a))return!0}return!1}var YI="4.2.1";const XI=["top","bottom","left","right","chartArea"];function Ih(e,t){return e==="top"||e==="bottom"||XI.indexOf(e)===-1&&t==="x"}function Ph(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function kh(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Ze(i&&i.onComplete,[e],t)}function JI(e){const t=e.chart,i=t.options.animation;Ze(i&&i.onProgress,[e],t)}function Pp(e){return lp()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ko={},Ah=e=>{const t=Pp(e);return Object.values(Ko).filter(i=>i.canvas===t).pop()};function QI(e,t,i){const n=Object.keys(e);for(const s of n){const o=+s;if(o>=t){const r=e[s];delete e[s],(i>0||o>t)&&(e[o+i]=r)}}}function ZI(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function eP(e){const{xScale:t,yScale:i}=e;if(t&&i)return{left:t.left,right:t.right,top:i.top,bottom:i.bottom}}class Li{static register(...t){vi.add(...t),Ch()}static unregister(...t){vi.remove(...t),Ch()}constructor(t,i){const n=this.config=new jI(i),s=Pp(t),o=Ah(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||yI(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=nw(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new BI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_w(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Ko[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xi.listen(this,"complete",kh),xi.listen(this,"progress",JI),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:s,_aspectRatio:o}=this;return We(t)?i&&o?o:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return vi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ju(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qu(this.canvas,this.ctx),this}stop(){return xi.stop(this),this}resize(t,i){xi.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,i,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Ju(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Ze(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Ye(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,i=t.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];i&&(o=o.concat(Object.keys(i).map(r=>{const a=i[r],l=Cr(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ye(o,r=>{const a=r.options,l=a.id,c=Cr(l,a),u=Ce(a.type,r.dtype);(a.position===void 0||Ih(a.position,c)!==Ih(r.dposition))&&(a.position=r.dposition),s[l]=!0;let h=null;if(l in n&&n[l].type===u)h=n[l];else{const p=vi.getScale(u);h=new p({id:l,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,t)}),Ye(s,(r,a)=>{r||delete n[a]}),Ye(n,r=>{Lt.configure(this,r,r.options),Lt.addBox(this,r)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((s,o)=>s.index-o.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(Ph("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,s)=>{i.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){const o=i[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||dl(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=vi.getController(a),{datasetElementType:c,dataElementType:u}=ft.datasets[a];Object.assign(l,{dataElementType:vi.getElement(u),datasetElementType:c&&vi.getElement(c)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Ye(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),p=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(p),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||Ye(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ph("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ye(this.scales,t=>{Lt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!$u(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of i){const r=n==="_removeElements"?-o:o;QI(t,s,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<i;o++)if(!$u(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Lt.update(this,this.width,this.height,t);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],Ye(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,on(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xi.has(this)?this.attached&&!xi.running(this)&&xi.start(this):(this.draw(),kh({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resize(n,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,n=[];let s,o;for(s=0,o=i.length;s<o;++s){const r=i[s];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,n=t._clip,s=!n.disabled,o=eP(t)||this.chartArea,r={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&qr(i,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),t.controller.draw(),s&&Yr(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return Xs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,s){const o=JE.modes[i];return typeof o=="function"?o(this,t,n,s):[]}getDatasetMeta(t){const i=this.data.datasets[t],n=this._metasets;let s=n.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=ln(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){const n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){const s=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);li(i)?(o.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),xi.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),qu(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Ko[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,n=(o,r)=>{i.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Ye(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(i.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():r()}unbindEvents(){Ye(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Ye(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){const s=n?"set":"remove";let o,r,a,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!wr(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){const s=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(i,t),a=n?t:o(t,i);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,i){const n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(t,i,n){const{_active:s=[],options:o}=this,r=i,a=this._getActiveElements(t,s,n,r),l=cw(t),c=ZI(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Ze(o.onHover,[t,a,this],this),l&&Ze(o.onClick,[t,a,this],this));const u=!wr(a,s);return(u||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,u}_getActiveElements(t,i,n,s){if(t.type==="mouseout")return[];if(!n)return i;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}T(Li,"defaults",ft),T(Li,"instances",Ko),T(Li,"overrides",Rn),T(Li,"registry",vi),T(Li,"version",YI),T(Li,"getChart",Ah);function Ch(){return Ye(Li.instances,e=>e._plugins.invalidate())}function tP(e,t,i){const{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=t;let c=s/a;e.beginPath(),e.arc(o,r,a,n-c,i+c),l>s?(c=s/l,e.arc(o,r,l,i+c,n-c,!0)):e.arc(o,r,s,i+dt,n-dt),e.closePath(),e.clip()}function iP(e){return ac(e,["outerStart","outerEnd","innerStart","innerEnd"])}function nP(e,t,i,n){const s=iP(e.options.borderRadius),o=(i-t)/2,r=Math.min(o,n*t/2),a=l=>{const c=(i-Math.min(o,l))*n/2;return Pt(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Pt(s.innerStart,0,r),innerEnd:Pt(s.innerEnd,0,r)}}function Dn(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function Tr(e,t,i,n,s,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+n+i-c,0),p=u>0?u+n+i+c:0;let g=0;const y=s-l;if(n){const Ee=u>0?u-n:0,Pe=h>0?h-n:0,ne=(Ee+Pe)/2,re=ne!==0?y*ne/(ne+n):y;g=(y-re)/2}const b=Math.max(.001,y*h-i/lt)/h,v=(y-b)/2,_=l+v+g,E=s-v-g,{outerStart:w,outerEnd:P,innerStart:A,innerEnd:O}=nP(t,p,h,E-_),U=h-w,W=h-P,Z=_+w/U,q=E-P/W,Q=p+A,ye=p+O,de=_+A/Q,Me=E-O/ye;if(e.beginPath(),o){const Ee=(Z+q)/2;if(e.arc(r,a,h,Z,Ee),e.arc(r,a,h,Ee,q),P>0){const oe=Dn(W,q,r,a);e.arc(oe.x,oe.y,P,q,E+dt)}const Pe=Dn(ye,E,r,a);if(e.lineTo(Pe.x,Pe.y),O>0){const oe=Dn(ye,Me,r,a);e.arc(oe.x,oe.y,O,E+dt,Me+Math.PI)}const ne=(E-O/p+(_+A/p))/2;if(e.arc(r,a,p,E-O/p,ne,!0),e.arc(r,a,p,ne,_+A/p,!0),A>0){const oe=Dn(Q,de,r,a);e.arc(oe.x,oe.y,A,de+Math.PI,_-dt)}const re=Dn(U,_,r,a);if(e.lineTo(re.x,re.y),w>0){const oe=Dn(U,Z,r,a);e.arc(oe.x,oe.y,w,_-dt,Z)}}else{e.moveTo(r,a);const Ee=Math.cos(Z)*h+r,Pe=Math.sin(Z)*h+a;e.lineTo(Ee,Pe);const ne=Math.cos(q)*h+r,re=Math.sin(q)*h+a;e.lineTo(ne,re)}e.closePath()}function sP(e,t,i,n,s){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){Tr(e,t,i,n,l,s);for(let c=0;c<o;++c)e.fill();isNaN(a)||(l=r+(a%ot||ot))}return Tr(e,t,i,n,l,s),e.fill(),l}function oP(e,t,i,n,s){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=l.borderAlign==="inner";if(!c)return;h?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(o){Tr(e,t,i,n,p,s);for(let g=0;g<o;++g)e.stroke();isNaN(a)||(p=r+(a%ot||ot))}h&&tP(e,t,p),o||(Tr(e,t,i,n,p,s),e.stroke())}class qo extends Gi{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,n){const s=this.getProps(["x","y"],n),{angle:o,distance:r}=Vf(s,{x:t,y:i}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=this.options.spacing/2,y=Ce(h,l-a)>=ot||Ys(o,a,l),b=Fi(r,c+p,u+p);return y&&b}getCenterPoint(t){const{x:i,y:n,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(s+o)/2,h=(r+a+c+l)/2;return{x:i+Math.cos(u)*h,y:n+Math.sin(u)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:n}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,r=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>ot?Math.floor(n/ot):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(lt,n||0)),c=s*l;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,sP(t,this,c,o,r),oP(t,this,c,o,r),t.restore()}}T(qo,"id","arc"),T(qo,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),T(qo,"defaultRoutes",{backgroundColor:"backgroundColor"});function kp(e,t,i=t){e.lineCap=Ce(i.borderCapStyle,t.borderCapStyle),e.setLineDash(Ce(i.borderDash,t.borderDash)),e.lineDashOffset=Ce(i.borderDashOffset,t.borderDashOffset),e.lineJoin=Ce(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Ce(i.borderWidth,t.borderWidth),e.strokeStyle=Ce(i.borderColor,t.borderColor)}function rP(e,t,i){e.lineTo(i.x,i.y)}function aP(e){return e.stepped?xw:e.tension||e.cubicInterpolationMode==="monotone"?Rw:rP}function Ap(e,t,i={}){const n=e.length,{start:s=0,end:o=n-1}=i,{start:r,end:a}=t,l=Math.max(s,r),c=Math.min(o,a),u=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function lP(e,t,i,n){const{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:c}=Ap(s,i,n),u=aP(o);let{move:h=!0,reverse:p}=n||{},g,y,b;for(g=0;g<=c;++g)y=s[(a+(p?c-g:g))%r],!y.skip&&(h?(e.moveTo(y.x,y.y),h=!1):u(e,b,y,p,o.stepped),b=y);return l&&(y=s[(a+(p?c:0))%r],u(e,b,y,p,o.stepped)),!!l}function cP(e,t,i,n){const s=t.points,{count:o,start:r,ilen:a}=Ap(s,i,n),{move:l=!0,reverse:c}=n||{};let u=0,h=0,p,g,y,b,v,_;const E=P=>(r+(c?a-P:P))%o,w=()=>{b!==v&&(e.lineTo(u,v),e.lineTo(u,b),e.lineTo(u,_))};for(l&&(g=s[E(0)],e.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=s[E(p)],g.skip)continue;const P=g.x,A=g.y,O=P|0;O===y?(A<b?b=A:A>v&&(v=A),u=(h*u+P)/++h):(w(),e.lineTo(P,A),y=O,h=0,b=v=A),_=A}w()}function fl(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?cP:lP}function uP(e){return e.stepped?uE:e.tension||e.cubicInterpolationMode==="monotone"?hE:_n}function hP(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),kp(e,t.options),e.stroke(s)}function dP(e,t,i,n){const{segments:s,options:o}=t,r=fl(t);for(const a of s)kp(e,o,a.style),e.beginPath(),r(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}const fP=typeof Path2D=="function";function pP(e,t,i,n){fP&&!t.options.segment?hP(e,t,i,n):dP(e,t,i,n)}class qi extends Gi{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;iE(this._points,n,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bE(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){const n=this.options,s=t[i],o=this.points,r=fp(this,{property:i,start:s,end:s});if(!r.length)return;const a=[],l=uP(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:h,end:p}=r[c],g=o[h],y=o[p];if(g===y){a.push(g);continue}const b=Math.abs((s-g[i])/(y[i]-g[i])),v=l(g,y,b,n.stepped);v[i]=t[i],a.push(v)}return a.length===1?a[0]:a}pathSegment(t,i,n){return fl(this)(t,this,i,n)}path(t,i,n){const s=this.segments,o=fl(this);let r=this._loop;i=i||0,n=n||this.points.length-i;for(const a of s)r&=o(t,this,a,{start:i,end:i+n-1});return!!r}draw(t,i,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),pP(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}T(qi,"id","line"),T(qi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),T(qi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),T(qi,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Th(e,t,i,n){const s=e.options,{[i]:o}=e.getProps([i],n);return Math.abs(t-o)<s.radius+s.hitRadius}class Yo extends Gi{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,n){const s=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(i-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return Th(this,t,"x",i)}inYRange(t,i){return Th(this,t,"y",i)}getCenterPoint(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const n=i&&t.borderWidth||0;return(i+n)*2}draw(t,i){const n=this.options;this.skip||n.radius<.1||!Xs(this,i,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,ul(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}T(Yo,"id","point"),T(Yo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),T(Yo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Cp(e,t){const{x:i,y:n,base:s,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=r/2,a=Math.min(i,s),l=Math.max(i,s),c=n-h,u=n+h):(h=o/2,a=i-h,l=i+h,c=Math.min(n,s),u=Math.max(n,s)),{left:a,top:c,right:l,bottom:u}}function Yi(e,t,i,n){return e?0:Pt(t,i,n)}function gP(e,t,i){const n=e.options.borderWidth,s=e.borderSkipped,o=tp(n);return{t:Yi(s.top,o.top,0,i),r:Yi(s.right,o.right,0,t),b:Yi(s.bottom,o.bottom,0,i),l:Yi(s.left,o.left,0,t)}}function mP(e,t,i){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,o=Cn(s),r=Math.min(t,i),a=e.borderSkipped,l=n||Le(s);return{topLeft:Yi(!l||a.top||a.left,o.topLeft,0,r),topRight:Yi(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Yi(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Yi(!l||a.bottom||a.right,o.bottomRight,0,r)}}function bP(e){const t=Cp(e),i=t.right-t.left,n=t.bottom-t.top,s=gP(e,i/2,n/2),o=mP(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Na(e,t,i,n){const s=t===null,o=i===null,a=e&&!(s&&o)&&Cp(e,n);return a&&(s||Fi(t,a.left,a.right))&&(o||Fi(i,a.top,a.bottom))}function yP(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function _P(e,t){e.rect(t.x,t.y,t.w,t.h)}function Oa(e,t,i={}){const n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,o=(e.x+e.w!==i.x+i.w?t:0)-n,r=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+o,h:e.h+r,radius:e.radius}}class Xo extends Gi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=bP(this),a=yP(r.radius)?Js:_P;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,Oa(r,i,o)),t.clip(),a(t,Oa(o,-i,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Oa(o,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,n){return Na(this,t,i,n)}inXRange(t,i){return Na(this,t,null,i)}inYRange(t,i){return Na(this,null,t,i)}getCenterPoint(t){const{x:i,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(i+s)/2:i,y:o?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}T(Xo,"id","bar"),T(Xo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),T(Xo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var vP=Object.freeze({__proto__:null,ArcElement:qo,LineElement:qi,PointElement:Yo,BarElement:Xo});const pl=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Mh=pl.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function Tp(e){return pl[e%pl.length]}function Mp(e){return Mh[e%Mh.length]}function SP(e,t){return e.borderColor=Tp(t),e.backgroundColor=Mp(t),++t}function wP(e,t){return e.backgroundColor=e.data.map(()=>Tp(t++)),t}function EP(e,t){return e.backgroundColor=e.data.map(()=>Mp(t++)),t}function IP(e){let t=0;return(i,n)=>{const s=e.getDatasetMeta(n).controller;s instanceof In?t=wP(i,t):s instanceof Bs?t=EP(i,t):s&&(t=SP(i,t))}}function xh(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function PP(e){return e&&(e.borderColor||e.backgroundColor)}var kP={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:n},options:s}=e.config,{elements:o}=s;if(!i.forceOverride&&(xh(n)||PP(s)||o&&xh(o)))return;const r=IP(e);n.forEach(r)}};function AP(e,t,i,n,s){const o=s.samples||n;if(o>=i)return e.slice(t,t+i);const r=[],a=(i-2)/(o-2);let l=0;const c=t+i-1;let u=t,h,p,g,y,b;for(r[l++]=e[u],h=0;h<o-2;h++){let v=0,_=0,E;const w=Math.floor((h+1)*a)+1+t,P=Math.min(Math.floor((h+2)*a)+1,i)+t,A=P-w;for(E=w;E<P;E++)v+=e[E].x,_+=e[E].y;v/=A,_/=A;const O=Math.floor(h*a)+1+t,U=Math.min(Math.floor((h+1)*a)+1,i)+t,{x:W,y:Z}=e[u];for(g=y=-1,E=O;E<U;E++)y=.5*Math.abs((W-v)*(e[E].y-Z)-(W-e[E].x)*(_-Z)),y>g&&(g=y,p=e[E],b=E);r[l++]=p,u=b}return r[l++]=e[c],r}function CP(e,t,i,n){let s=0,o=0,r,a,l,c,u,h,p,g,y,b;const v=[],_=t+i-1,E=e[t].x,P=e[_].x-E;for(r=t;r<t+i;++r){a=e[r],l=(a.x-E)/P*n,c=a.y;const A=l|0;if(A===u)c<y?(y=c,h=r):c>b&&(b=c,p=r),s=(o*s+a.x)/++o;else{const O=r-1;if(!We(h)&&!We(p)){const U=Math.min(h,p),W=Math.max(h,p);U!==g&&U!==O&&v.push({...e[U],x:s}),W!==g&&W!==O&&v.push({...e[W],x:s})}r>0&&O!==g&&v.push(e[O]),v.push(a),u=A,o=0,y=b=c,h=p=g=r}}return v}function xp(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Rh(e){e.data.datasets.forEach(t=>{xp(t)})}function TP(e,t){const i=t.length;let n=0,s;const{iScale:o}=e,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=Pt($i(t,o.axis,r).lo,0,i-1)),c?s=Pt($i(t,o.axis,a).hi+1,n,i)-n:s=i-n,{start:n,count:s}}var MP={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){Rh(e);return}const n=e.width;e.data.datasets.forEach((s,o)=>{const{_data:r,indexAxis:a}=s,l=e.getDatasetMeta(o),c=r||s.data;if(ws([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=e.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:h,count:p}=TP(l,c);const g=i.threshold||4*n;if(p<=g){xp(s);return}We(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let y;switch(i.algorithm){case"lttb":y=AP(c,h,p,n,i);break;case"min-max":y=CP(c,h,p,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=y})},destroy(e){Rh(e)}};function xP(e,t,i){const n=e.segments,s=e.points,o=t.points,r=[];for(const a of n){let{start:l,end:c}=a;c=fc(l,c,s);const u=gl(i,s[l],s[c],a.loop);if(!t.segments){r.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=fp(t,u);for(const p of h){const g=gl(i,o[p.start],o[p.end],p.loop),y=dp(a,s,g);for(const b of y)r.push({source:b,target:p,start:{[i]:Nh(u,g,"start",Math.max)},end:{[i]:Nh(u,g,"end",Math.min)}})}}return r}function gl(e,t,i,n){if(n)return;let s=t[e],o=i[e];return e==="angle"&&(s=ei(s),o=ei(o)),{property:e,start:s,end:o}}function RP(e,t){const{x:i=null,y:n=null}=e||{},s=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=fc(r,a,s);const l=s[r],c=s[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):i!==null&&(o.push({x:i,y:l.y}),o.push({x:i,y:c.y}))}),o}function fc(e,t,i){for(;t>e;t--){const n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Nh(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function Rp(e,t){let i=[],n=!1;return st(e)?(n=!0,i=e):i=RP(e,t),i.length?new qi({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Oh(e){return e&&e.fill!==!1}function NP(e,t,i){let s=e[t].fill;const o=[t];let r;if(!i)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!ht(s))return s;if(r=e[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function OP(e,t,i){const n=FP(e);if(Le(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return ht(s)&&Math.floor(s)===s?LP(n[0],t,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function LP(e,t,i,n){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=n?!1:i}function BP(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:Le(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function DP(e,t,i){let n;return e==="start"?n=i:e==="end"?n=t.options.reverse?t.min:t.max:Le(e)?n=e.value:n=t.getBaseValue(),n}function FP(e){const t=e.options,i=t.fill;let n=Ce(i&&i.target,i);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function $P(e){const{scale:t,index:i,line:n}=e,s=[],o=n.segments,r=n.points,a=HP(t,i);a.push(Rp({x:null,y:t.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)UP(s,r[u],a)}return new qi({points:s,options:{}})}function HP(e,t){const i=[],n=e.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const o=n[s];if(o.index===t)break;o.hidden||i.unshift(o.dataset)}return i}function UP(e,t,i){const n=[];for(let s=0;s<i.length;s++){const o=i[s],{first:r,last:a,point:l}=zP(o,t,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function zP(e,t,i){const n=e.interpolate(t,i);if(!n)return{};const s=n[i],o=e.segments,r=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],h=r[u.start][i],p=r[u.end][i];if(Fi(s,h,p)){a=s===h,l=s===p;break}}return{first:a,last:l,point:n}}class Np{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,n){const{x:s,y:o,radius:r}=this;return i=i||{start:0,end:ot},t.arc(s,o,r,i.end,i.start,!0),!n.bounds}interpolate(t){const{x:i,y:n,radius:s}=this,o=t.angle;return{x:i+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}}function GP(e){const{chart:t,fill:i,line:n}=e;if(ht(i))return WP(t,i);if(i==="stack")return $P(e);if(i==="shape")return!0;const s=VP(e);return s instanceof Np?s:Rp(s,n)}function WP(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function VP(e){return(e.scale||{}).getPointPositionForValue?KP(e):jP(e)}function jP(e){const{scale:t={},fill:i}=e,n=BP(i,t);if(ht(n)){const s=t.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function KP(e){const{scale:t,fill:i}=e,n=t.options,s=t.getLabels().length,o=n.reverse?t.max:t.min,r=DP(i,t,o),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,o);return new Np({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,r));return a}function La(e,t,i){const n=GP(t),{line:s,scale:o,axis:r}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};n&&s.points.length&&(qr(e,i),qP(e,{line:s,target:n,above:u,below:h,area:i,scale:o,axis:r}),Yr(e))}function qP(e,t){const{line:i,target:n,above:s,below:o,area:r,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),l==="x"&&o!==s&&(Lh(e,n,r.top),Bh(e,{line:i,target:n,color:s,scale:a,property:l}),e.restore(),e.save(),Lh(e,n,r.bottom)),Bh(e,{line:i,target:n,color:o,scale:a,property:l}),e.restore()}function Lh(e,t,i){const{segments:n,points:s}=t;let o=!0,r=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=s[l],h=s[fc(l,c,s)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,i),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(h.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Bh(e,t){const{line:i,target:n,property:s,color:o,scale:r}=t,a=xP(i,n,s);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:p=o}={}}=l,g=n!==!0;e.save(),e.fillStyle=p,YP(e,r,g&&gl(s,u,h)),e.beginPath();const y=!!i.pathSegment(e,l);let b;if(g){y?e.closePath():Dh(e,n,h,s);const v=!!n.pathSegment(e,c,{move:y,reverse:!0});b=y&&v,b||Dh(e,n,u,s)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function YP(e,t,i){const{top:n,bottom:s}=t.chart.chartArea,{property:o,start:r,end:a}=i||{};o==="x"&&(e.beginPath(),e.rect(r,n,a-r,s-n),e.clip())}function Dh(e,t,i,n){const s=t.interpolate(i,n);s&&e.lineTo(s.x,s.y)}var XP={id:"filler",afterDatasetsUpdate(e,t,i){const n=(e.data.datasets||[]).length,s=[];let o,r,a,l;for(r=0;r<n;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof qi&&(l={visible:e.isDatasetVisible(r),index:r,fill:OP(a,r,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=NP(s,r,i.propagate))},beforeDraw(e,t,i){const n=i.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=s.length-1;r>=0;--r){const a=s[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&La(e.ctx,a,o))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const o=n[s].$filler;Oh(o)&&La(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,i){const n=t.meta.$filler;!Oh(n)||i.drawTime!=="beforeDatasetDraw"||La(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Fh=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},JP=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class $h extends Gi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=Ze(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=vt(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Fh(n,o);let c,u;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=t;o.textAlign="left",o.textBaseline="middle";let p=-1,g=-u;return this.legendItems.forEach((y,b)=>{const v=n+i/2+o.measureText(y.text).width;(b===0||c[c.length-1]+v+2*a>r)&&(h+=u,c[c.length-(b>0?0:1)]=0,g+=u,p++),l[b]={left:0,top:g,row:p,width:v,height:s},c[c.length-1]+=v+a}),h}_fitCols(t,i,n,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-t;let h=a,p=0,g=0,y=0,b=0;return this.legendItems.forEach((v,_)=>{const{itemWidth:E,itemHeight:w}=QP(n,i,o,v,s);_>0&&g+w+2*a>u&&(h+=p+a,c.push({width:p,height:g}),y+=p+a,b++,p=g=0),l[_]={left:y,top:g,col:b,width:E,height:w},p=Math.max(p,E),g+=w+a}),h+=p,c.push({width:p,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:o}}=this,r=Xn(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Mt(n,this.left+s,this.right-this.lineWidths[a]);for(const c of i)a!==c.row&&(a=c.row,l=Mt(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=Mt(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of i)c.col!==a&&(a=c.col,l=Mt(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;qr(t,this),this._draw(),Yr(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:o,labels:r}=t,a=ft.color,l=Xn(t.rtl,this.left,this.width),c=vt(r.font),{padding:u}=r,h=c.size,p=h/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:y,boxHeight:b,itemHeight:v}=Fh(r,h),_=function(O,U,W){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;s.save();const Z=Ce(W.lineWidth,1);if(s.fillStyle=Ce(W.fillStyle,a),s.lineCap=Ce(W.lineCap,"butt"),s.lineDashOffset=Ce(W.lineDashOffset,0),s.lineJoin=Ce(W.lineJoin,"miter"),s.lineWidth=Z,s.strokeStyle=Ce(W.strokeStyle,a),s.setLineDash(Ce(W.lineDash,[])),r.usePointStyle){const q={radius:b*Math.SQRT2/2,pointStyle:W.pointStyle,rotation:W.rotation,borderWidth:Z},Q=l.xPlus(O,y/2),ye=U+p;ep(s,q,Q,ye,r.pointStyleWidth&&y)}else{const q=U+Math.max((h-b)/2,0),Q=l.leftForLtr(O,y),ye=Cn(W.borderRadius);s.beginPath(),Object.values(ye).some(de=>de!==0)?Js(s,{x:Q,y:q,w:y,h:b,radius:ye}):s.rect(Q,q,y,b),s.fill(),Z!==0&&s.stroke()}s.restore()},E=function(O,U,W){Nn(s,W.text,O,U+v/2,c,{strikethrough:W.hidden,textAlign:l.textAlign(W.textAlign)})},w=this.isHorizontal(),P=this._computeTitleHeight();w?g={x:Mt(o,this.left+u,this.right-n[0]),y:this.top+u+P,line:0}:g={x:this.left+u,y:Mt(o,this.top+P+u,this.bottom-i[0].height),line:0},cp(this.ctx,t.textDirection);const A=v+u;this.legendItems.forEach((O,U)=>{s.strokeStyle=O.fontColor,s.fillStyle=O.fontColor;const W=s.measureText(O.text).width,Z=l.textAlign(O.textAlign||(O.textAlign=r.textAlign)),q=y+p+W;let Q=g.x,ye=g.y;l.setWidth(this.width),w?U>0&&Q+q+u>this.right&&(ye=g.y+=A,g.line++,Q=g.x=Mt(o,this.left+u,this.right-n[g.line])):U>0&&ye+A>this.bottom&&(Q=g.x=Q+i[g.line].width+u,g.line++,ye=g.y=Mt(o,this.top+P+u,this.bottom-i[g.line].height));const de=l.x(Q);if(_(de,ye,O),Q=vw(Z,Q+y+p,w?Q+q:this.right,t.rtl),E(l.x(Q),ye,O),w)g.x+=q+u;else if(typeof O.text!="string"){const Me=c.lineHeight;g.y+=Op(O,Me)}else g.y+=A}),up(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,n=vt(i.font),s=Bt(i.padding);if(!i.display)return;const o=Xn(t.rtl,this.left,this.width),r=this.ctx,a=i.position,l=n.size/2,c=s.top+l;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,h=Mt(t.align,h,this.right-p);else{const y=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);u=c+Mt(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const g=Mt(a,h,h+p);r.textAlign=o.textAlign(rc(a)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=n.string,Nn(r,i.text,g,u,n)}_computeTitleHeight(){const t=this.options.title,i=vt(t.font),n=Bt(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,o;if(Fi(t,this.left,this.right)&&Fi(i,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],Fi(t,s.left,s.left+s.width)&&Fi(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const i=this.options;if(!tk(t.type,i))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=JP(s,n);s&&!o&&Ze(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&Ze(i.onHover,[t,n,this],this)}else n&&Ze(i.onClick,[t,n,this],this)}}function QP(e,t,i,n,s){const o=ZP(n,e,t,i),r=ek(s,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function ZP(e,t,i,n){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),t+i.size/2+n.measureText(s).width}function ek(e,t,i){let n=e;return typeof t.text!="string"&&(n=Op(t,i)),n}function Op(e,t){const i=e.text?e.text.length+.5:0;return t*i}function tk(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var ik={id:"legend",_element:$h,start(e,t,i){const n=e.legend=new $h({ctx:e.ctx,options:i,chart:e});Lt.configure(e,n,i),Lt.addBox(e,n)},stop(e){Lt.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;Lt.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(i?0:void 0),u=Bt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class pc extends Gi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const s=st(n.text)?n.text.length:1;this._padding=Bt(n.padding);const o=s*vt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:n,bottom:s,right:o,options:r}=this,a=r.align;let l=0,c,u,h;return this.isHorizontal()?(u=Mt(a,n,o),h=i+t,c=o-n):(r.position==="left"?(u=n+t,h=Mt(a,s,i),l=lt*-.5):(u=o-t,h=Mt(a,i,s),l=lt*.5),c=s-i),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const n=vt(i.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Nn(t,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:rc(i.align),textBaseline:"middle",translation:[r,a]})}}function nk(e,t){const i=new pc({ctx:e.ctx,options:t,chart:e});Lt.configure(e,i,t),Lt.addBox(e,i),e.titleBlock=i}var sk={id:"title",_element:pc,start(e,t,i){nk(e,i)},stop(e){const t=e.titleBlock;Lt.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;Lt.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ko=new WeakMap;var ok={id:"subtitle",start(e,t,i){const n=new pc({ctx:e.ctx,options:i,chart:e});Lt.configure(e,n,i),Lt.addBox(e,n),ko.set(e,n)},stop(e){Lt.removeBox(e,ko.get(e)),ko.delete(e)},beforeUpdate(e,t,i){const n=ko.get(e);Lt.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Is={average(e){if(!e.length)return!1;let t,i,n=0,s=0,o=0;for(t=0,i=e.length;t<i;++t){const r=e[t].element;if(r&&r.hasValue()){const a=r.tooltipPosition();n+=a.x,s+=a.y,++o}}return{x:n/o,y:s/o}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){const l=e[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ll(t,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function _i(e,t){return t&&(st(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ri(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function rk(e,t){const{element:i,datasetIndex:n,index:s}=t,o=e.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:e,label:r,parsed:o.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function Hh(e,t){const i=e.chart.ctx,{body:n,footer:s,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=vt(t.bodyFont),c=vt(t.titleFont),u=vt(t.footerFont),h=o.length,p=s.length,g=n.length,y=Bt(t.padding);let b=y.height,v=0,_=n.reduce((P,A)=>P+A.before.length+A.lines.length+A.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,h&&(b+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),_){const P=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=g*P+(_-g)*l.lineHeight+(_-1)*t.bodySpacing}p&&(b+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let E=0;const w=function(P){v=Math.max(v,i.measureText(P).width+E)};return i.save(),i.font=c.string,Ye(e.title,w),i.font=l.string,Ye(e.beforeBody.concat(e.afterBody),w),E=t.displayColors?r+2+t.boxPadding:0,Ye(n,P=>{Ye(P.before,w),Ye(P.lines,w),Ye(P.after,w)}),E=0,i.font=u.string,Ye(e.footer,w),i.restore(),v+=y.width,{width:v,height:b}}function ak(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function lk(e,t,i,n){const{x:s,width:o}=n,r=i.caretSize+i.caretPadding;if(e==="left"&&s+o+r>t.width||e==="right"&&s-o-r<0)return!0}function ck(e,t,i,n){const{x:s,width:o}=i,{width:r,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),lk(c,e,t,i)&&(c="center"),c}function Uh(e,t,i){const n=i.yAlign||t.yAlign||ak(e,i);return{xAlign:i.xAlign||t.xAlign||ck(e,t,i,n),yAlign:n}}function uk(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function hk(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function zh(e,t,i,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=i,c=s+o,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:g}=Cn(r);let y=uk(t,a);const b=hk(t,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+s:a==="right"&&(y+=Math.max(h,g)+s),{x:Pt(y,0,n.width-t.width),y:Pt(b,0,n.height-t.height)}}function Ao(e,t,i){const n=Bt(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Gh(e){return _i([],Ri(e))}function dk(e,t,i){return ln(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function Wh(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const Lp={beforeTitle:Ti,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:Ti,beforeBody:Ti,beforeLabel:Ti,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return We(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Ti,afterBody:Ti,beforeFooter:Ti,footer:Ti,afterFooter:Ti};function Wt(e,t,i,n){const s=e[t].call(i,n);return typeof s>"u"?Lp[t].call(i,n):s}class ml extends Gi{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,o=new pp(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=dk(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:n}=i,s=Wt(n,"beforeTitle",this,t),o=Wt(n,"title",this,t),r=Wt(n,"afterTitle",this,t);let a=[];return a=_i(a,Ri(s)),a=_i(a,Ri(o)),a=_i(a,Ri(r)),a}getBeforeBody(t,i){return Gh(Wt(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:n}=i,s=[];return Ye(t,o=>{const r={before:[],lines:[],after:[]},a=Wh(n,o);_i(r.before,Ri(Wt(a,"beforeLabel",this,o))),_i(r.lines,Wt(a,"label",this,o)),_i(r.after,Ri(Wt(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,i){return Gh(Wt(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:n}=i,s=Wt(n,"beforeFooter",this,t),o=Wt(n,"footer",this,t),r=Wt(n,"afterFooter",this,t);let a=[];return a=_i(a,Ri(s)),a=_i(a,Ri(o)),a=_i(a,Ri(r)),a}_createItems(t){const i=this._active,n=this.chart.data,s=[],o=[],r=[];let a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(rk(this.chart,i[l]));return t.filter&&(a=a.filter((u,h,p)=>t.filter(u,h,p,n))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,n))),Ye(a,u=>{const h=Wh(t.callbacks,u);s.push(Wt(h,"labelColor",this,u)),o.push(Wt(h,"labelPointStyle",this,u)),r.push(Wt(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,i){const n=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=Is[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=Hh(this,n),c=Object.assign({},a,l),u=Uh(this.chart,n,c),h=zh(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,s){const o=this.getCaretPosition(t,n,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,n){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Cn(a),{x:p,y:g}=t,{width:y,height:b}=i;let v,_,E,w,P,A;return o==="center"?(P=g+b/2,s==="left"?(v=p,_=v-r,w=P+r,A=P-r):(v=p+y,_=v+r,w=P-r,A=P+r),E=v):(s==="left"?_=p+Math.max(l,u)+r:s==="right"?_=p+y-Math.max(c,h)-r:_=this.caretX,o==="top"?(w=g,P=w-r,v=_-r,E=_+r):(w=g+b,P=w+r,v=_+r,E=_-r),A=w),{x1:v,x2:_,x3:E,y1:w,y2:P,y3:A}}drawTitle(t,i,n){const s=this.title,o=s.length;let r,a,l;if(o){const c=Xn(n.rtl,this.x,this.width);for(t.x=Ao(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",r=vt(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=r.string,l=0;l<o;++l)i.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,s,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c,boxPadding:u}=o,h=vt(o.bodyFont),p=Ao(this,"left",o),g=s.x(p),y=l<h.lineHeight?(h.lineHeight-l)/2:0,b=i.y+y;if(o.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(g,c)+c/2,E=b+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ul(t,v,_,E),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,ul(t,v,_,E)}else{t.lineWidth=Le(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const v=s.leftForLtr(g,c-u),_=s.leftForLtr(s.xPlus(g,1),c-u-2),E=Cn(r.borderRadius);Object.values(E).some(w=>w!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Js(t,{x:v,y:b,w:c,h:l,radius:E}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Js(t,{x:_,y:b+1,w:c-2,h:l-2,radius:E}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(v,b,c,l),t.strokeRect(v,b,c,l),t.fillStyle=r.backgroundColor,t.fillRect(_,b+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,h=vt(n.bodyFont);let p=h.lineHeight,g=0;const y=Xn(n.rtl,this.x,this.width),b=function(W){i.fillText(W,y.x(t.x+g),t.y+p/2),t.y+=p+o},v=y.textAlign(r);let _,E,w,P,A,O,U;for(i.textAlign=r,i.textBaseline="middle",i.font=h.string,t.x=Ao(this,v,n),i.fillStyle=n.bodyColor,Ye(this.beforeBody,b),g=a&&v!=="right"?r==="center"?c/2+u:c+2+u:0,P=0,O=s.length;P<O;++P){for(_=s[P],E=this.labelTextColors[P],i.fillStyle=E,Ye(_.before,b),w=_.lines,a&&w.length&&(this._drawColorBox(i,t,P,y,n),p=Math.max(h.lineHeight,l)),A=0,U=w.length;A<U;++A)b(w[A]),p=h.lineHeight;Ye(_.after,b)}g=0,p=h.lineHeight,Ye(this.afterBody,b),t.y-=o}drawFooter(t,i,n){const s=this.footer,o=s.length;let r,a;if(o){const l=Xn(n.rtl,this.x,this.width);for(t.x=Ao(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",r=vt(n.footerFont),i.fillStyle=n.footerColor,i.font=r.string,a=0;a<o;++a)i.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,i,n,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:u}=n,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:y}=Cn(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+h,l),r==="top"&&this.drawCaret(t,i,n,s),i.lineTo(a+c-p,l),i.quadraticCurveTo(a+c,l,a+c,l+p),r==="center"&&o==="right"&&this.drawCaret(t,i,n,s),i.lineTo(a+c,l+u-y),i.quadraticCurveTo(a+c,l+u,a+c-y,l+u),r==="bottom"&&this.drawCaret(t,i,n,s),i.lineTo(a+g,l+u),i.quadraticCurveTo(a,l+u,a,l+u-g),r==="center"&&o==="left"&&this.drawCaret(t,i,n,s),i.lineTo(a,l+h),i.quadraticCurveTo(a,l,a+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const r=Is[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=Hh(this,t),l=Object.assign({},r,this._size),c=Uh(i,t,l),u=zh(t,l,c,i);(s._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=Bt(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,s,i),cp(t,i.textDirection),o.y+=r.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),up(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const n=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!wr(n,s),r=this._positionChanged(s,i);(o||r)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(t,o,i,n),a=this._positionChanged(r,t),l=i||!wr(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,n,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return i;const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,i){const{caretX:n,caretY:s,options:o}=this,r=Is[o.position].call(this,t,i);return r!==!1&&(n!==r.x||s!==r.y)}}T(ml,"positioners",Is);var fk={id:"tooltip",_element:ml,positioners:Is,afterInit(e,t,i){i&&(e.tooltip=new ml({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Lp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},pk=Object.freeze({__proto__:null,Colors:kP,Decimation:MP,Filler:XP,Legend:ik,SubTitle:ok,Title:sk,Tooltip:fk});const gk=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function mk(e,t,i,n){const s=e.indexOf(t);if(s===-1)return gk(e,t,i,n);const o=e.lastIndexOf(t);return s!==o?i:s}const bk=(e,t)=>e===null?null:Pt(Math.round(e),0,t);function Vh(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class bl extends On{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:s,label:o}of i)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(We(t))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:mk(n,t,Ce(i,t),this._addedLabels),bk(i,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,i=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=i;r++)s.push({value:r});return s}getLabelForValue(t){return Vh.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}T(bl,"id","category"),T(bl,"defaults",{ticks:{callback:Vh}});function yk(e,t){const i=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:p}=e,g=o||1,y=u-1,{min:b,max:v}=t,_=!We(r),E=!We(a),w=!We(c),P=(v-b)/(h+1);let A=Uu((v-b)/y/g)*g,O,U,W,Z;if(A<1e-14&&!_&&!E)return[{value:b},{value:v}];Z=Math.ceil(v/A)-Math.floor(b/A),Z>y&&(A=Uu(Z*A/y/g)*g),We(l)||(O=Math.pow(10,l),A=Math.ceil(A*O)/O),s==="ticks"?(U=Math.floor(b/A)*A,W=Math.ceil(v/A)*A):(U=b,W=v),_&&E&&o&&fw((a-r)/o,A/1e3)?(Z=Math.round(Math.min((a-r)/A,u)),A=(a-r)/Z,U=r,W=a):w?(U=_?r:U,W=E?a:W,Z=c-1,A=(W-U)/Z):(Z=(W-U)/A,Ns(Z,Math.round(Z),A/1e3)?Z=Math.round(Z):Z=Math.ceil(Z));const q=Math.max(zu(A),zu(U));O=Math.pow(10,We(l)?q:l),U=Math.round(U*O)/O,W=Math.round(W*O)/O;let Q=0;for(_&&(p&&U!==r?(i.push({value:r}),U<r&&Q++,Ns(Math.round((U+Q*A)*O)/O,r,jh(r,P,e))&&Q++):U<r&&Q++);Q<Z;++Q)i.push({value:Math.round((U+Q*A)*O)/O});return E&&p&&W!==a?i.length&&Ns(i[i.length-1].value,a,jh(a,P,e))?i[i.length-1].value=a:i.push({value:a}):(!E||W===a)&&i.push({value:W}),i}function jh(e,t,{horizontal:i,minRotation:n}){const s=di(n),o=(i?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class Mr extends On{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return We(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=i?s:l,a=l=>o=n?o:l;if(t){const l=ki(s),c=ki(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,r=yk(s,o);return t.bounds==="ticks"&&Wf(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return so(t,this.chart.options.locale,this.options.ticks.format)}}class yl extends Mr{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=ht(t)?t:0,this.max=ht(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,n=di(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}T(yl,"id","linear"),T(yl,"defaults",{ticks:{callback:Kr.formatters.numeric}});const Zs=e=>Math.floor(Ki(e)),gn=(e,t)=>Math.pow(10,Zs(e)+t);function Kh(e){return e/Math.pow(10,Zs(e))===1}function qh(e,t,i){const n=Math.pow(10,i),s=Math.floor(e/n);return Math.ceil(t/n)-s}function _k(e,t){const i=t-e;let n=Zs(i);for(;qh(e,t,n)>10;)n++;for(;qh(e,t,n)<10;)n--;return Math.min(n,Zs(e))}function vk(e,{min:t,max:i}){t=Jt(e.min,t);const n=[],s=Zs(t);let o=_k(t,i),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((t-l)*r)/r,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,o)),p=Jt(e.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;p<i;)n.push({value:p,major:Kh(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),p=Math.round((l+u+h*Math.pow(10,o))*r)/r;const g=Jt(e.max,p);return n.push({value:g,major:Kh(g),significand:h}),n}class _l extends On{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){const n=Mr.prototype.parse.apply(this,[t,i]);if(n===0){this._zero=!0;return}return ht(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=ht(t)?Math.max(0,t):null,this.max=ht(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ht(this._userMin)&&(this.min=t===gn(this.min,0)?gn(this.min,-1):gn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let n=this.min,s=this.max;const o=a=>n=t?n:a,r=a=>s=i?s:a;n===s&&(n<=0?(o(1),r(10)):(o(gn(n,-1)),r(gn(s,1)))),n<=0&&o(gn(s,-1)),s<=0&&r(gn(n,1)),this.min=n,this.max=s}buildTicks(){const t=this.options,i={min:this._userMin,max:this._userMax},n=vk(i,this);return t.bounds==="ticks"&&Wf(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":so(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ki(t),this._valueRange=Ki(this.max)-Ki(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ki(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}}T(_l,"id","logarithmic"),T(_l,"defaults",{ticks:{callback:Kr.formatters.logarithmic,major:{enabled:!0}}});function vl(e){const t=e.ticks;if(t.display&&e.display){const i=Bt(t.backdropPadding);return Ce(t.font&&t.font.size,ft.font.size)+i.height}return 0}function Sk(e,t,i){return i=st(i)?i:[i],{w:Mw(e,t.string,i),h:i.length*t.lineHeight}}function Yh(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function wk(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],s=[],o=e._pointLabels.length,r=e.options.pointLabels,a=r.centerPointLabels?lt/o:0;for(let l=0;l<o;l++){const c=r.setContext(e.getPointLabelContext(l));s[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+s[l],a),h=vt(c.font),p=Sk(e.ctx,h,e._pointLabels[l]);n[l]=p;const g=ei(e.getIndexAngle(l)+a),y=Math.round(sc(g)),b=Yh(y,u.x,p.w,0,180),v=Yh(y,u.y,p.h,90,270);Ek(i,t,g,b,v)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=Ik(e,n,s)}function Ek(e,t,i,n,s){const o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/o,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/r,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function Ik(e,t,i){const n=[],s=e._pointLabels.length,o=e.options,r=vl(o)/2,a=e.drawingArea,l=o.pointLabels.centerPointLabels?lt/s:0;for(let c=0;c<s;c++){const u=e.getPointPosition(c,a+r+i[c],l),h=Math.round(sc(ei(u.angle+dt))),p=t[c],g=Ak(u.y,p.h,h),y=Pk(h),b=kk(u.x,p.w,y);n.push({x:u.x,y:g,textAlign:y,left:b,top:g,right:b+p.w,bottom:g+p.h})}return n}function Pk(e){return e===0||e===180?"center":e<180?"left":"right"}function kk(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function Ak(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function Ck(e,t){const{ctx:i,options:{pointLabels:n}}=e;for(let s=t-1;s>=0;s--){const o=n.setContext(e.getPointLabelContext(s)),r=vt(o.font),{x:a,y:l,textAlign:c,left:u,top:h,right:p,bottom:g}=e._pointLabelItems[s],{backdropColor:y}=o;if(!We(y)){const b=Cn(o.borderRadius),v=Bt(o.backdropPadding);i.fillStyle=y;const _=u-v.left,E=h-v.top,w=p-u+v.width,P=g-h+v.height;Object.values(b).some(A=>A!==0)?(i.beginPath(),Js(i,{x:_,y:E,w,h:P,radius:b}),i.fill()):i.fillRect(_,E,w,P)}Nn(i,e._pointLabels[s],a,l+r.lineHeight/2,r,{color:o.color,textAlign:c,textBaseline:"middle"})}}function Bp(e,t,i,n){const{ctx:s}=e;if(i)s.arc(e.xCenter,e.yCenter,t,0,ot);else{let o=e.getPointPosition(0,t);s.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=e.getPointPosition(r,t),s.lineTo(o.x,o.y)}}function Tk(e,t,i,n,s){const o=e.ctx,r=t.circular,{color:a,lineWidth:l}=t;!r&&!n||!a||!l||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),Bp(e,i,r,n),o.closePath(),o.stroke(),o.restore())}function Mk(e,t,i){return ln(e,{label:i,index:t,type:"pointLabel"})}class Ps extends Mr{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Bt(vl(this.options)/2),i=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!1);this.min=ht(t)&&!isNaN(t)?t:0,this.max=ht(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vl(this.options))}generateTickLabels(t){Mr.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,n)=>{const s=Ze(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?wk(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,n,s){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,n,s))}getIndexAngle(t){const i=ot/(this._pointLabels.length||1),n=this.options.startAngle||0;return ei(t*i+di(n))}getDistanceFromCenterForValue(t){if(We(t))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(We(t))return NaN;const i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){const i=this._pointLabels||[];if(t>=0&&t<i.length){const n=i[t];return Mk(this.getContext(),t,n)}}getPointPosition(t,i,n=0){const s=this.getIndexAngle(t)-dt+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:i,top:n,right:s,bottom:o}=this._pointLabelItems[t];return{left:i,top:n,right:s,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:i}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Bp(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,i=this.options,{angleLines:n,grid:s,border:o}=i,r=this._pointLabels.length;let a,l,c;if(i.pointLabels.display&&Ck(this,r),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const p=this.getContext(h),g=s.setContext(p),y=o.setContext(p);Tk(this,g,l,r,y)}}),n.display){for(t.save(),a=r-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:p}=u;!p||!h||(t.lineWidth=p,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!i.reverse)return;const c=n.setContext(this.getContext(l)),u=vt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=Bt(c.backdropPadding);t.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}Nn(t,a.label,0,-o,u,{color:c.color})}),t.restore()}drawTitle(){}}T(Ps,"id","radialLinear"),T(Ps,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Kr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),T(Ps,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),T(Ps,"descriptors",{angleLines:{_fallback:"grid"}});const Jr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jt=Object.keys(Jr);function xk(e,t){return e-t}function Xh(e,t){if(We(t))return null;const i=e._adapter,{parser:n,round:s,isoWeekday:o}=e._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),ht(r)||(r=typeof n=="string"?i.parse(r,n):i.parse(r)),r===null?null:(s&&(r=s==="week"&&(es(o)||o===!0)?i.startOf(r,"isoWeek",o):i.startOf(r,s)),+r)}function Jh(e,t,i,n){const s=jt.length;for(let o=jt.indexOf(e);o<s-1;++o){const r=Jr[jt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((i-t)/(a*r.size))<=n)return jt[o]}return jt[s-1]}function Rk(e,t,i,n,s){for(let o=jt.length-1;o>=jt.indexOf(i);o--){const r=jt[o];if(Jr[r].common&&e._adapter.diff(s,n,r)>=t-1)return r}return jt[i?jt.indexOf(i):0]}function Nk(e){for(let t=jt.indexOf(e)+1,i=jt.length;t<i;++t)if(Jr[jt[t]].common)return jt[t]}function Qh(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:n,hi:s}=oc(i,t),o=i[n]>=t?i[n]:i[s];e[o]=!0}}function Ok(e,t,i,n){const s=e._adapter,o=+s.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function Zh(e,t,i){const n=[],s={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,n.push({value:a,major:!1});return o===0||!i?n:Ok(e,n,s,i)}class eo extends On{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const n=t.time||(t.time={}),s=this._adapter=new jE._date(t.adapters.date);s.init(i),Rs(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:Xh(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,n=t.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ht(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),o=ht(o)&&!isNaN(o)?o:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){const t=this.options,i=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=bw(s,o,r);return this._unit=i.unit||(n.autoSkip?Jh(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):Rk(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Nk(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),Zh(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;i=Pt(i,0,r),n=Pt(n,0,r),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const t=this._adapter,i=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||Jh(o.minUnit,i,n,this._getLabelCapacity(i)),a=Ce(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=es(l)||l===!0,u={};let h=i,p,g;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":r),t.diff(n,i,r)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+r);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(p=h,g=0;p<n;p=+t.add(p,a,r),g++)Qh(u,p,y);return(p===n||s.bounds==="ticks"||g===1)&&Qh(u,p,y),Object.keys(u).sort((b,v)=>b-v).map(b=>+b)}getLabelForValue(t){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){const s=this.options.time.displayFormats,o=this._unit,r=i||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,i,n,s){const o=this.options,r=o.ticks.callback;if(r)return Ze(r,[t,i,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],p=n[i],g=c&&h&&p&&p.major;return this._adapter.format(t,s||(g?h:u))}generateTickLabels(t){let i,n,s;for(i=0,n=t.length;i<n;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,n=this.ctx.measureText(t).width,s=di(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,o=this._tickFormatFunction(t,0,Zh(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,n;if(t.length)return t;const s=this.getLabels();for(i=0,n=s.length;i<n;++i)t.push(Xh(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Kf(t.sort(xk))}}T(eo,"id","time"),T(eo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Co(e,t,i){let n=0,s=e.length-1,o,r,a,l;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=$i(e,"pos",t)),{pos:o,time:a}=e[n],{pos:r,time:l}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=$i(e,"time",t)),{time:o,pos:a}=e[n],{time:r,pos:l}=e[s]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class Sl extends eo{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Co(i,this.min),this._tableRange=Co(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:n}=this,s=[],o=[];let r,a,l,c,u;for(r=0,a=t.length;r<a;++r)c=t[r],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)u=s[r+1],l=s[r-1],c=s[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Co(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return Co(this._table,n*this._tableRange+this._minPos,!0)}}T(Sl,"id","timeseries"),T(Sl,"defaults",eo.defaults);var Lk=Object.freeze({__proto__:null,CategoryScale:bl,LinearScale:yl,LogarithmicScale:_l,RadialLinearScale:Ps,TimeScale:eo,TimeSeriesScale:Sl});const Bk=[VE,vP,pk,Lk],ed=1e6,gc=2e3,Dp=-gc;function Dk(e){switch(e){case 0:return G.sente;case 1:return G.gote;case 2:return G.research;case 3:return G.research+"2";case 4:return G.research+"3";case 5:return G.research+"4"}}function Fk(e,t){const i=e.customData;if(i)switch(t){case 0:return e.nextColor===D.BLACK?void 0:i.playerSearchInfo;case 1:return e.nextColor===D.WHITE?void 0:i.playerSearchInfo;case 2:return i.researchInfo;case 3:return i.researchInfo2;case 4:return i.researchInfo3;case 5:return i.researchInfo4}}function td(e,t,i){const n=e.score!==void 0?e.score:e.mate!==void 0?e.mate>0?ed:-ed:void 0;if(n!==void 0)switch(t){case xr.RAW:return Math.min(Math.max(n,Dp),gc);case xr.WIN_RATE:return il(n,i)}}function $k(e){switch(e){default:return{main:"black",ticks:"dimgray",grid:"lightgray",head:"red",blackPlayer:"#1480C9",whitePlayer:"#FB7D00",researcher:"#349393",researcher2:"#FF1F4E",researcher3:"#6C22FF",researcher4:"#FFB912"};case Gl.DARK:return{main:"white",ticks:"darkgray",grid:"dimgray",head:"red",blackPlayer:"#36A2EB",whitePlayer:"#FF9F40",researcher:"#4BC0C0",researcher2:"#FF6384",researcher3:"#9966FF",researcher4:"#FFCD56"}}}var xr=(e=>(e.RAW="raw",e.WIN_RATE="winRate",e))(xr||{});const Hk=Ve({name:"EvaluationChart",props:{size:{type:bt,required:!0},type:{type:String,required:!0}},setup(e){const t=z(null),i=tt();let n,s=gc,o=Dp;e.type==="winRate"&&(s=100,o=0);const r=(g,y,b,v)=>{const _=[],E=b.moves;for(const P of E){const A=Fk(P,y);if(!A)continue;const O=td(A,e.type,v.coefficientInSigmoid);O!==void 0&&_.push({x:P.number,y:O})}const w=E[E.length-1];if(y===0&&w.nextColor===D.BLACK||y===1&&w.nextColor===D.WHITE){const P=w.customData;if(P&&P.opponentSearchInfo){const A=td(P.opponentSearchInfo,e.type,v.coefficientInSigmoid);A!==void 0&&_.push({x:w.number+1,y:A})}}return{label:Dk(y),borderColor:g,data:_,showLine:!0}},a=(g,y)=>({label:G.currentPosition,borderColor:y.head,data:[{x:g.current.number,y:s},{x:g.current.number,y:o}],showLine:!0,pointBorderWidth:0,pointRadius:0}),l=(g,y,b)=>{const v=[{borderColor:b.blackPlayer,type:0},{borderColor:b.whitePlayer,type:1},{borderColor:b.researcher,type:2},{borderColor:b.researcher2,type:3},{borderColor:b.researcher3,type:4},{borderColor:b.researcher4,type:5}],_=[a(g,b)];for(const E of v){const w=r(E.borderColor,E.type,g,y);w.data.length>0&&_.push(w)}return _},c=(g,y)=>({x:{min:0,max:g.length+10,ticks:{color:y.ticks},grid:{color:y.grid}},y:{min:o,max:s,ticks:{color:y.ticks},grid:{color:y.grid}}}),u=(g,y)=>{const b=$k(y.thema);n.data.datasets=l(g,y,b),n.options.color=b.main,n.options.scales=c(g,b),n.update()},h=(g,y,b)=>{if(g.x===null)return;const v=b.scales.x.max-b.scales.x.min,_=b.scales.x.right-b.scales.x.left,E=(g.x-b.scales.x.left)/_*v+b.scales.x.min,w=Math.round(E);i.changePly(w)};et(()=>{const g=Fe(),b=t.value.getContext("2d");n=new Li(b,{type:"scatter",data:{datasets:[]},options:{animation:{duration:0},responsive:!0,maintainAspectRatio:!1,events:["click"],onClick:h}}),n.draw(),u(i.record,g),Qi(()=>[i.record,g],([v,_])=>u(v,_),{deep:!0})}),to(()=>{n.destroy()});const p=ke(()=>({height:`${e.size.height}px`,width:`${e.size.width}px`}));return{canvas:t,style:p}}});const Uk={ref:"canvas"};function zk(e,t,i,n,s,o){return x(),N("div",null,[d("div",{class:"root",style:Se(e.style)},[d("canvas",Uk,null,512)],4)])}const Gk=je(Hk,[["render",zk],["__scopeId","data-v-7d4decc4"]]),Wk=Ve({name:"RecordComment",props:{size:{type:bt,required:!0}},setup(){const e=z(null),t=tt(),i=ke(()=>Object.values(J).map(s=>{const o=t.record.metadata;return{key:s,displayName:wb(s),value:o.getStandardMetadata(s)||""}}));return et(()=>{e.value.addEventListener("copy",s=>{s.stopPropagation()}),e.value.addEventListener("paste",s=>{s.stopPropagation()})}),{t:G,root:e,store:t,list:i,change:(s,o)=>{const r=s.target;t.updateStandardRecordMetadata({key:o,value:r.value})}}}});const Vk={class:"element"},jk={class:"key"},Kk={class:"value"},qk={class:"key"},Yk=["value","onInput"];function Xk(e,t,i,n,s,o){return x(),N("div",null,[d("div",{ref:"root",class:"root",style:Se({height:`${e.size.height}px`})},[d("div",Vk,[d("div",jk,I(e.t.file),1),d("div",Kk,I(e.store.recordFilePath||e.t.newRecordWithBrackets),1)]),(x(!0),N(Ie,null,He(e.list,r=>(x(),N("div",{key:r.key,class:"element"},[d("div",qk,I(r.displayName),1),d("input",{class:"value",value:r.value,onInput:a=>e.change(a,r.key)},null,40,Yk)]))),128))],4)])}const Jk=je(Wk,[["render",Xk],["__scopeId","data-v-01d8e7a2"]]),Jo=30,Qk=Ve({name:"TabPane",components:{RecordComment:jv,EngineAnalytics:OS,EvaluationChart:Gk,RecordInfo:Jk,ButtonIcon:kt},props:{size:{type:bt,required:!0},visibleTabs:{type:Array,required:!0},activeTab:{type:String,required:!0},displayMinimizeToggle:{type:Boolean,required:!1}},emits:["onChangeTab","onMinimize"],setup(e,{emit:t}){const i=r=>t("onChangeTab",r),n=()=>t("onMinimize"),s=ke(()=>e.size.reduce(new bt(0,Jo))),o={[Ht.RECORD_INFO]:{title:G.recordProperties,icon:Qe.DESCRIPTION},[Ht.COMMENT]:{title:G.comments,icon:Qe.COMMENT},[Ht.SEARCH]:{title:G.searchLog,icon:Qe.BRAIN},[Ht.PV]:{title:G.pv,icon:Qe.PV},[Ht.CHART]:{title:G.evaluation,icon:Qe.CHART},[Ht.PERCENTAGE_CHART]:{title:G.estimatedWinRate,icon:Qe.PERCENT},[Ht.INVISIBLE]:{title:G.hideTabView,icon:Qe.ARROW_DROP}};return{t:G,contentSize:s,changeSelect:i,minimize:n,tabs:o,Tab:Ht,Icon:Qe,EvaluationChartType:xr}}});const Zk={class:"tabs"},e8=["onClick"],t8={class:"tab-contents"};function i8(e,t,i,n,s,o){const r=ge("ButtonIcon"),a=ge("RecordInfo"),l=ge("RecordComment"),c=ge("EngineAnalytics"),u=ge("EvaluationChart");return x(),N("div",null,[d("div",{class:"root",style:Se({width:`${e.size.width}px`})},[d("div",Zk,[(x(!0),N(Ie,null,He(e.visibleTabs,h=>(x(),N("div",{key:h,class:yt(["tab",{selected:e.activeTab===h}]),onClick:p=>e.changeSelect(h)},[X(r,{class:"icon",icon:e.tabs[h].icon},null,8,["icon"]),d("span",null,I(e.tabs[h].title),1)],10,e8))),128)),e.displayMinimizeToggle?(x(),N("div",{key:0,class:"tab end",onClick:t[0]||(t[0]=(...h)=>e.minimize&&e.minimize(...h))},[X(r,{class:"icon",icon:e.Icon.ARROW_DROP},null,8,["icon"]),d("span",null,I(e.t.hideTabView),1)])):se("",!0)]),d("div",t8,[e.activeTab===e.Tab.RECORD_INFO?(x(),$e(a,{key:0,class:"tab-content",size:e.contentSize},null,8,["size"])):se("",!0),e.activeTab===e.Tab.COMMENT?(x(),$e(l,{key:1,class:"tab-content"})):se("",!0),e.activeTab===e.Tab.SEARCH?(x(),$e(c,{key:2,class:"tab-content",size:e.contentSize,"history-mode":!0},null,8,["size"])):se("",!0),e.activeTab===e.Tab.PV?(x(),$e(c,{key:3,class:"tab-content",size:e.contentSize,"history-mode":!1},null,8,["size"])):se("",!0),e.activeTab===e.Tab.CHART?(x(),$e(u,{key:4,class:"tab-content",size:e.contentSize,type:e.EvaluationChartType.RAW},null,8,["size","type"])):se("",!0),e.activeTab===e.Tab.PERCENTAGE_CHART?(x(),$e(u,{key:5,class:"tab-content",size:e.contentSize,type:e.EvaluationChartType.WIN_RATE},null,8,["size","type"])):se("",!0)])],4)])}const n8=je(Qk,[["render",i8],["__scopeId","data-v-b97189e2"]]);class Qo{constructor(){T(this,"func");T(this,"timeout")}after(t,i){this.func=t,!this.timeout&&(this.timeout=setTimeout(this.invoke.bind(this),i))}invoke(){this.func&&this.func(),this.clear()}clear(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.func=void 0}}const s8={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[e.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let i=0;this.panes=this.panes.map((n,s)=>(n.size=s===t?n.max:n.min,s!==t&&(i+=n.min),n)),this.panes[t].size-=i,this.$emit("pane-maximize",this.panes[t]),this.$emit("resized",this.panes.map(n=>({min:n.min,max:n.max,size:n.size})))},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:i,clientY:n}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:i-t.left,y:n-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),e*100/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let i={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const n=0+(this.pushOtherPanes?0:i.prevPanesSize),s=100-(this.pushOtherPanes?0:i.nextPanesSize),o=Math.max(Math.min(this.getCurrentDragPercentage(e),s),n);let r=[t,t+1],a=this.panes[r[0]]||null,l=this.panes[r[1]]||null;const c=a.max<100&&o>=a.max+i.prevPanesSize,u=l.max<100&&o<=100-(l.max+this.sumNextPanesSize(t+1));if(c||u){c?(a.size=a.max,l.size=Math.max(100-a.max-i.prevPanesSize-i.nextPanesSize,0)):(a.size=Math.max(100-l.max-i.prevPanesSize-this.sumNextPanesSize(t+1),0),l.size=l.max);return}if(this.pushOtherPanes){const h=this.doPushOtherPanes(i,o);if(!h)return;({sums:i,panesToResize:r}=h),a=this.panes[r[0]]||null,l=this.panes[r[1]]||null}a!==null&&(a.size=Math.min(Math.max(o-i.prevPanesSize-i.prevReachedMinPanes,a.min),a.max)),l!==null&&(l.size=Math.min(Math.max(100-o-i.nextPanesSize-i.nextReachedMinPanes,l.min),l.max))},doPushOtherPanes(e,t){const i=this.touch.activeSplitter,n=[i,i+1];return t<e.prevPanesSize+this.panes[n[0]].min&&(n[0]=this.findPrevExpandedPane(i).index,e.prevReachedMinPanes=0,n[0]<i&&this.panes.forEach((s,o)=>{o>n[0]&&o<=i&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),e.prevPanesSize=this.sumPrevPanesSize(n[0]),n[0]===void 0)?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((s,o)=>{o>0&&o<=i&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),this.panes[n[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[n[1]].min&&(n[1]=this.findNextExpandedPane(i).index,e.nextReachedMinPanes=0,n[1]>i+1&&this.panes.forEach((s,o)=>{o>i&&o<n[1]&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),e.nextPanesSize=this.sumNextPanesSize(n[1]-1),n[1]===void 0)?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((s,o)=>{o<this.panesCount-1&&o>=i+1&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),this.panes[n[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:n}},sumPrevPanesSize(e){return this.panes.reduce((t,i,n)=>t+(n<e?i.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,i,n)=>t+(n>e+1?i.size:0),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find(t=>t.index<e&&t.size>t.min)||{}},findNextExpandedPane(e){return this.panes.find(t=>t.index>e+1&&t.size>t.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(e=>{const t=e.classList.contains("splitpanes__pane"),i=e.classList.contains("splitpanes__splitter");!t&&!i&&(e.parentNode.removeChild(e),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},addSplitter(e,t,i=!1){const n=e-1,s=document.createElement("div");s.classList.add("splitpanes__splitter"),i||(s.onmousedown=o=>this.onMouseDown(o,n),typeof window<"u"&&"ontouchstart"in window&&(s.ontouchstart=o=>this.onMouseDown(o,n)),s.onclick=o=>this.onSplitterClick(o,n+1)),this.dblClickSplitter&&(s.ondblclick=o=>this.onSplitterDblClick(o,n+1)),t.parentNode.insertBefore(s,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(i=>{i.className.includes("splitpanes__splitter")&&this.removeSplitter(i)});let t=0;e.forEach(i=>{i.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,i,!0):t&&this.addSplitter(t,i),t++)})},requestUpdate({target:e,...t}){const i=this.indexedPanes[e._.uid];Object.entries(t).forEach(([n,s])=>i[n]=s)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(s=>(s.className.includes("splitpanes__pane")&&t++,s===e.$el));const i=parseFloat(e.minSize),n=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._.uid,index:t,min:isNaN(i)?0:i,max:isNaN(n)?100:n,size:e.size===null?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((s,o)=>s.index=o),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(n=>n.id===e._.uid),i=this.panes.splice(t,1)[0];this.panes.forEach((n,s)=>n.index=s),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...i,index:t}}),this.$emit("pane-remove",{removed:i,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},resetPaneSizes(e={}){!e.addedPane&&!e.removedPane?this.initialPanesSizing():this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const e=100/this.panesCount;let t=0;const i=[],n=[];this.panes.forEach(s=>{s.size=Math.max(Math.min(e,s.max),s.min),t-=s.size,s.size>=s.max&&i.push(s.id),s.size<=s.min&&n.push(s.id)}),t>.1&&this.readjustSizes(t,i,n)},initialPanesSizing(){let e=100;const t=[],i=[];let n=0;this.panes.forEach(o=>{e-=o.size,o.size!==null&&n++,o.size>=o.max&&t.push(o.id),o.size<=o.min&&i.push(o.id)});let s=100;e>.1&&(this.panes.forEach(o=>{o.size===null&&(o.size=Math.max(Math.min(e/(this.panesCount-n),o.max),o.min)),s-=o.size}),s>.1&&this.readjustSizes(e,t,i))},equalizeAfterAddOrRemove({addedPane:e,removedPane:t}={}){let i=100/this.panesCount,n=0;const s=[],o=[];e&&e.givenSize!==null&&(i=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(r=>{n-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&o.push(r.id)}),!(Math.abs(n)<.1)&&(this.panes.forEach(r=>{e&&e.givenSize!==null&&e.id===r.id||(r.size=Math.max(Math.min(i,r.max),r.min)),n-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&o.push(r.id)}),n>.1&&this.readjustSizes(n,s,o))},readjustSizes(e,t,i){let n;e>0?n=e/(this.panesCount-t.length):n=e/(this.panesCount-i.length),this.panes.forEach((s,o)=>{if(e>0&&!t.includes(s.id)){const r=Math.max(Math.min(s.size+n,s.max),s.min),a=r-s.size;e-=a,s.size=r}else if(!i.includes(s.id)){const r=Math.max(Math.min(s.size+n,s.max),s.min),a=r-s.size;e-=a,s.size=r}s.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[s.id].size}%`})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((t,i)=>{t.ondblclick=e?n=>this.onSplitterDblClick(n,i):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return Hm("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},o8=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},r8={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}};function a8(e,t,i,n,s,o){return x(),N("div",{class:"splitpanes__pane",onClick:t[0]||(t[0]=r=>o.onPaneClick(r,e._.uid)),style:Se(e.style)},[za(e.$slots,"default")],4)}const l8=o8(r8,[["render",a8]]);const Fn=8,mn=10,Ba=100,c8=Ve({name:"StandardLayout",components:{BoardPane:q_,RecordPane:Mv,TabPane:n8,Splitpanes:s8,Pane:l8,ButtonIcon:kt},setup(){const e=Fe(),t=mi(new bt(window.innerWidth,window.innerHeight)),i=z(e.topPaneHeightPercentage),n=z(e.bottomLeftPaneWidthPercentage),s=mi(new bt(0,0)),o=new Qo,r=()=>{o.after(()=>{t.width=window.innerWidth,t.height=window.innerHeight},Ba)};et(()=>{window.addEventListener("resize",r)}),to(()=>{window.removeEventListener("resize",r)});const a=q=>{s.width=q.width,s.height=q.height},l=q=>{e.updateAppSetting(q).catch(Q=>{pe.log(gt.WARN,"StandardLayout: failed to update app setting: "+Yd(Q))})},c=q=>{l({tab:q})},u=q=>{l({tab2:q})},h=()=>{i.value=100,l({topPaneHeightPercentage:100})},p=()=>{const q=Math.min(e.topPanePreviousHeightPercentage,(t.height-Jo*2-Fn)/t.height*100);i.value=q,l({topPaneHeightPercentage:q})},g=new Qo,y=q=>{const Q=q[0].size;g.after(()=>{i.value=Q},Ba)},b=q=>{g.clear();const Q=q[0].size;i.value=Q,l({topPaneHeightPercentage:Q})},v=new Qo,_=q=>{const Q=q[0].size;v.after(()=>{n.value=Q},Ba)},E=q=>{v.clear();const Q=q[0].size;n.value=Q,l({bottomLeftPaneWidthPercentage:Q})},w=ke(()=>t.height*U.value/100>=Jo),P=ke(()=>new bt(Math.max(t.width-yv-mn*2,0),Math.max((t.height-Fn)*(i.value/100)-mn*2-(w.value?0:Jo),0))),A=ke(()=>({margin:`${mn}px`})),O=ke(()=>{const q=t.width-s.width-mn*3,Q=s.height;return{margin:`${mn}px ${mn}px ${mn}px 0`,width:`${q}px`,height:`${Q}px`}}),U=ke(()=>100-i.value),W=ke(()=>new bt(e.tabPaneType===dr.SINGLE?t.width:(t.width-Fn)*(n.value/100),(t.height-Fn)*(U.value/100))),Z=ke(()=>new bt((t.width-Fn)*(1-n.value/100),(t.height-Fn)*(U.value/100)));return{t:G,topPaneHeightPercentage:i,bottomPaneHeightPercentage:U,bottomLeftPaneWidthPercentage:n,isBottomPaneVisible:w,boardPaneMaxSize:P,boardPaneStyle:A,recordPaneStyle:O,tabPaneSize:W,tabPaneSize2:Z,appSetting:e,onBoardPaneResize:a,onChangeTab:c,onChangeTab2:u,onMinimizeTab:h,onUnhideTabView:p,onResizeMain:y,onResizedMain:b,onResizeBottom:_,onResizedBottom:E,TabPaneType:dr,Tab:Ht,Icon:Qe}}});const u8={class:"top-pane"},h8={class:"top-pane-main"};function d8(e,t,i,n,s,o){const r=ge("BoardPane"),a=ge("RecordPane"),l=ge("ButtonIcon"),c=ge("Pane"),u=ge("TabPane"),h=ge("Splitpanes");return x(),N("div",null,[X(h,{class:"main-frame",horizontal:"","dbl-click-splitter":!1,onResize:e.onResizeMain,onResized:e.onResizedMain},{default:Si(()=>[X(c,{size:e.topPaneHeightPercentage},{default:Si(()=>[d("div",u8,[d("div",h8,[X(r,{style:Se(e.boardPaneStyle),"max-size":e.boardPaneMaxSize,onResize:e.onBoardPaneResize},null,8,["style","max-size","onResize"]),X(a,{class:"top-right-pane",style:Se(e.recordPaneStyle)},null,8,["style"])]),e.isBottomPaneVisible?se("",!0):(x(),N("button",{key:0,class:"unhide-tabview-button",onClick:t[0]||(t[0]=(...p)=>e.onUnhideTabView&&e.onUnhideTabView(...p))},[X(l,{class:"icon",icon:e.Icon.ARROW_UP},null,8,["icon"]),d("span",null,I(e.t.expandTabView),1)]))])]),_:1},8,["size"]),X(c,{size:e.bottomPaneHeightPercentage},{default:Si(()=>[e.appSetting.tabPaneType===e.TabPaneType.SINGLE?(x(),$e(u,{key:0,class:"tab-pane",size:e.tabPaneSize,"visible-tabs":[e.Tab.RECORD_INFO,e.Tab.COMMENT,e.Tab.SEARCH,e.Tab.PV,e.Tab.CHART,e.Tab.PERCENTAGE_CHART],"active-tab":e.appSetting.tab,"display-minimize-toggle":!0,onOnChangeTab:e.onChangeTab,onOnMinimize:e.onMinimizeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab","onOnMinimize"])):(x(),$e(h,{key:1,class:"bottom-frame",vertical:"","dbl-click-splitter":!1,onResize:e.onResizeBottom,onResized:e.onResizedBottom},{default:Si(()=>[X(c,{size:e.bottomLeftPaneWidthPercentage},{default:Si(()=>[X(u,{class:"tab-pane",size:e.tabPaneSize,"visible-tabs":[e.Tab.RECORD_INFO,e.Tab.SEARCH,e.Tab.PV],"active-tab":e.appSetting.tab,onOnChangeTab:e.onChangeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab"])]),_:1},8,["size"]),X(c,null,{default:Si(()=>[X(u,{class:"tab-pane",size:e.tabPaneSize2,"visible-tabs":[e.Tab.COMMENT,e.Tab.CHART,e.Tab.PERCENTAGE_CHART],"active-tab":e.appSetting.tab2,"display-minimize-toggle":!0,onOnChangeTab:e.onChangeTab2,onOnMinimize:e.onMinimizeTab},null,8,["size","visible-tabs","active-tab","onOnChangeTab","onOnMinimize"])]),_:1})]),_:1},8,["onResize","onResized"]))]),_:1},8,["size"])]),_:1},8,["onResize","onResized"])])}const f8=je(c8,[["render",d8],["__scopeId","data-v-35564e14"]]);function pt(e){let t=Number(e.value);return e.max&&(t=Math.min(t,Number(e.max))),e.min&&(t=Math.max(t,Number(e.min))),t}function To(e){return`USI_ENGINE_OPTION_DIALOG_OPTION_${e.name}`}const p8=Ve({name:"USIEngineOptionDialog",props:{latestEngineSetting:{type:Object,required:!0},okButtonText:{type:String,required:!1,default:"OK"}},emits:["ok","cancel"],setup(e,t){const i=tt(),n=Fe(),s=z(null),o=z(null),r=z(null),a=z([]),l=z(If());let c=!1,u=!1;i.retainBussyState(),et(async()=>{wt(s.value),Yt(s.value);try{const w=n.engineTimeoutSeconds;l.value=await pe.getUSIEngineInfo(e.latestEngineSetting.path,w),i1(l.value,e.latestEngineSetting),o.value.value=l.value.name,c=!0}catch(w){i.pushError(w),t.emit("cancel")}finally{i.releaseBussyState()}});const h=ke(()=>Object.values(l.value.options).sort((w,P)=>w.order<P.order?-1:1).map(w=>{const P=a.value.length>0,A={...w,value:wn(w),visible:!P};return n.translateEngineOptionName&&(A.displayName=Lo[w.name]),P&&(A.visible=A.displayName&&or(A.displayName,a.value)||or(A.name,a.value)),A}));return ls(()=>{if(!(!c||u)){for(const w of h.value){const P=go(To(w));P&&w.value!==void 0&&(P.value=w.value+"")}u=!0}}),Dt(()=>{Xt(s.value)}),{t:G,engine:l,dialog:s,engineNameInput:o,filter:r,filterWords:a,options:h,inputElementID:To,updateFilter:()=>{a.value=String(r.value.value).trim().split(/ +/).filter(w=>w)},openEngineDir:()=>{pe.openExplorer(l.value.path)},selectFile:async w=>{i.retainBussyState();try{const P=await pe.showSelectFileDialog(),A=go(w);P&&A&&(A.value=P)}catch(P){i.pushError(P)}finally{i.releaseBussyState()}},sendOption:async w=>{i.retainBussyState();try{const P=n.engineTimeoutSeconds;await pe.sendUSISetOption(l.value.path,w,P)}catch(P){i.pushError(P)}finally{i.releaseBussyState()}},reset:()=>{o.value.value=l.value.defaultName;for(const w of h.value){const P=go(To(w));P&&(l.value.options[w.name].default!==void 0?P.value=l.value.options[w.name].default+"":P.value="")}},ok:()=>{l.value.name=o.value.value;for(const w of h.value){const P=go(To(w));P&&(l.value.options[w.name].value=P.value?w.type==="spin"?pt(P):P.value:void 0)}t.emit("ok",l.value)},cancel:()=>{t.emit("cancel")}}}});const Fp=e=>(rs("data-v-31568ce9"),e=e(),as(),e),g8={ref:"dialog"},m8={class:"dialog-title"},b8={class:"dialog-form-area"},y8={class:"option-filter"},_8=["placeholder"],v8={class:"option-list"},S8={class:"option"},w8={class:"option-name"},E8={class:"option-unchangeable"},I8={class:"option-name"},P8={class:"option-unchangeable"},k8={class:"option-name"},A8={class:"option-unchangeable"},C8={class:"option-name"},T8={ref:"engineNameInput",class:"option-value-text",type:"text",name:"ElectronShogiEngineName"},M8={class:"option-name"},x8={key:0,class:"option-name-original"},R8=["id","min","max","name"],N8=["id","name"],O8=["id","name"],L8=["onClick"],B8=["id"],D8={value:""},F8=Fp(()=>d("option",{value:"true"},"ON",-1)),$8=Fp(()=>d("option",{value:"false"},"OFF",-1)),H8=["id"],U8={value:""},z8=["value"],G8=["onClick"],W8={class:"dialog-main-buttons"};function V8(e,t,i,n,s,o){return x(),N("div",null,[d("dialog",g8,[d("div",m8,I(e.t.engineSettings),1),d("div",b8,[d("div",y8,[d("input",{ref:"filter",class:"filter",placeholder:e.t.filterByOptionName,onInput:t[0]||(t[0]=(...r)=>e.updateFilter&&e.updateFilter(...r))},null,40,_8)]),d("div",v8,[d("div",S8,[d("div",w8,I(e.t.engineName),1),d("div",E8,I(e.engine.defaultName),1)]),d("div",{class:yt(["option",{hidden:e.filterWords.length}])},[d("div",I8,I(e.t.author),1),d("div",P8,I(e.engine.author),1)],2),d("div",{class:yt(["option",{hidden:e.filterWords.length}])},[d("div",k8,I(e.t.enginePath),1),d("div",A8,[d("div",null,I(e.engine.path),1),d("button",{class:"dialog-thin-button",onClick:t[1]||(t[1]=(...r)=>e.openEngineDir&&e.openEngineDir(...r))},I(e.t.openDirectory),1)])],2),d("div",{class:yt(["option",{hidden:e.filterWords.length}])},[d("div",C8,I(e.t.displayName),1),d("input",T8,null,512)],2),(x(!0),N(Ie,null,He(e.options,r=>(x(),N("div",{key:r.name,class:yt(["option",{hidden:!r.visible}])},[d("div",M8,[io(I(r.displayName||r.name)+" ",1),r.displayName?(x(),N("span",x8,I(r.name),1)):se("",!0)]),r.type==="spin"?(x(),N("input",{key:0,id:e.inputElementID(r),class:"option-value-number",type:"number",min:r.min,max:r.max,step:"1",name:r.name},null,8,R8)):se("",!0),r.type==="string"?(x(),N("input",{key:1,id:e.inputElementID(r),class:"option-value-text",type:"text",name:r.name},null,8,N8)):se("",!0),r.type==="filename"?(x(),N("input",{key:2,id:e.inputElementID(r),class:"option-value-filename",type:"text",name:r.name},null,8,O8)):se("",!0),r.type==="filename"?(x(),N("button",{key:3,class:"dialog-thin-button",onClick:a=>e.selectFile(e.inputElementID(r))},I(e.t.select),9,L8)):se("",!0),r.type==="check"?(x(),N("select",{key:4,id:e.inputElementID(r),class:"option-value-check"},[d("option",D8,I(e.t.defaultValue),1),F8,$8],8,B8)):se("",!0),r.type==="combo"?(x(),N("select",{key:5,id:e.inputElementID(r),class:"option-value-combo"},[d("option",U8,I(e.t.defaultValue),1),(x(!0),N(Ie,null,He(r.vars,a=>(x(),N("option",{key:a,value:a},I(a),9,z8))),128))],8,H8)):se("",!0),r.type==="button"?(x(),N("button",{key:6,class:"dialog-thin-button",onClick:a=>e.sendOption(r.name)},I(e.t.invoke),9,G8)):se("",!0)],2))),128))])]),d("button",{class:"dialog-wide-button",onClick:t[2]||(t[2]=r=>e.reset())},I(e.t.resetToEngineDefaultValues),1),d("div",W8,[d("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:t[3]||(t[3]=r=>e.ok())},I(e.okButtonText),1),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[4]||(t[4]=r=>e.cancel())},I(e.t.cancel),1)])],512)])}const $p=je(p8,[["render",V8],["__scopeId","data-v-31568ce9"]]),j8=Ve({name:"PlayerSelector",components:{ButtonIcon:kt,USIEngineOptionDialog:$p},props:{playerUri:{type:String,required:!0},containsHuman:{type:Boolean,default:!1},engineSettings:{type:Object,required:!0},displayPonderState:{type:Boolean,default:!1},displayThreadState:{type:Boolean,default:!1},displayMultiPvState:{type:Boolean,default:!1}},emits:["select-player","update-engine-setting"],setup(e,t){const i=tt(),n=z(null),s=z(null),o=ke(()=>{if(!Ii(e.playerUri))return null;const g=e.engineSettings.getEngine(e.playerUri);return g&&wn(g.options[Ef])==="true"?"ON":"OFF"}),r=ke(()=>{if(!Ii(e.playerUri))return null;const g=e.engineSettings.getEngine(e.playerUri);return g?wn(g.options[Qb])||wn(g.options[Zb]):null}),a=ke(()=>{if(!Ii(e.playerUri))return null;const g=e.engineSettings.getEngine(e.playerUri);return g?wn(g.options[Jb])||wn(g.options[e1]):null}),l=ke(()=>Ii(e.playerUri));return{t:G,playerSelect:n,ponderState:o,threadState:r,multiPVState:a,isPlayerSettingEnabled:l,engineSettingDialog:s,onPlayerChange:()=>{t.emit("select-player",n.value.value)},openPlayerSetting:()=>{if(Ii(e.playerUri)){const g=e.engineSettings.getEngine(e.playerUri);if(!g){i.pushError("");return}s.value=g}},savePlayerSetting:async g=>{s.value=null;const y=e.engineSettings.getClone();y.updateEngine(g),i.retainBussyState();try{await pe.saveUSIEngineSetting(y),t.emit("update-engine-setting",y)}catch(b){i.pushError(b)}finally{i.releaseBussyState()}},closePlayerSetting:()=>{s.value=null},Icon:Qe,uri:Xb}}});const K8={class:"root"},q8=["value"],Y8=["value"],X8=["value"],J8={key:0,class:"player-info"},Q8={class:"player-info-key"},Z8={class:"player-info-value"},eA={key:1,class:"player-info"},tA={class:"player-info-key"},iA={class:"player-info-value"},nA={key:2,class:"player-info"},sA={class:"player-info-key"},oA={class:"player-info-value"},rA=["disabled"];function aA(e,t,i,n,s,o){const r=ge("ButtonIcon"),a=ge("USIEngineOptionDialog");return x(),N(Ie,null,[d("div",null,[d("div",K8,[d("select",{ref:"playerSelect",class:"player-select",size:"1",value:e.playerUri,onChange:t[0]||(t[0]=(...l)=>e.onPlayerChange&&e.onPlayerChange(...l))},[e.containsHuman?(x(),N("option",{key:0,value:e.uri.ES_HUMAN},"",8,Y8)):se("",!0),(x(!0),N(Ie,null,He(e.engineSettings.engineList,l=>(x(),N("option",{key:l.uri,value:l.uri},I(l.name),9,X8))),128))],40,q8),e.displayPonderState?(x(),N("div",J8,[d("span",Q8,I(e.t.ponder)+":",1),d("span",Z8,I(e.ponderState||"---"),1)])):se("",!0),e.displayThreadState?(x(),N("div",eA,[d("span",tA,I(e.t.numberOfThreads)+":",1),d("span",iA,I(e.threadState||"---"),1)])):se("",!0),e.displayMultiPvState?(x(),N("div",nA,[d("span",sA,I(e.t.multiPV)+":",1),d("span",oA,I(e.multiPVState||"---"),1)])):se("",!0),d("button",{class:"player-setting",disabled:!e.isPlayerSettingEnabled,onClick:t[1]||(t[1]=(...l)=>e.openPlayerSetting&&e.openPlayerSetting(...l))},[X(r,{class:"icon",icon:e.Icon.SETTINGS},null,8,["icon"]),d("span",null,I(e.t.settings),1)],8,rA)])]),e.engineSettingDialog?(x(),$e(a,{key:0,"latest-engine-setting":e.engineSettingDialog,"ok-button-text":e.t.save,onOk:e.savePlayerSetting,onCancel:e.closePlayerSetting},null,8,["latest-engine-setting","ok-button-text","onOk","onCancel"])):se("",!0)],64)}const Qr=je(j8,[["render",aA],["__scopeId","data-v-e1d37dde"]]),lA=Ve({name:"GameDialog",components:{ButtonIcon:kt,PlayerSelector:Qr},setup(){const e=tt(),t=z(null),i=z(null),n=z(null),s=z(null),o=z(null),r=z(null),a=z(null),l=z(null),c=z(null),u=z(null),h=z(null),p=z(null),g=z(null),y=z(pr()),b=z(new zi),v=z(""),_=z("");let E=!1,w=!1;e.retainBussyState(),et(async()=>{try{y.value=await pe.loadGameSetting(),b.value=await pe.loadUSIEngineSetting(),v.value=y.value.black.uri,_.value=y.value.white.uri,wt(t.value),Yt(t.value),E=!0}catch(Q){e.pushError(Q),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Dt(()=>{Xt(t.value)}),ls(()=>{!E||w||(i.value.value=Math.floor(y.value.timeLimit.timeSeconds/3600),n.value.value=Math.floor(y.value.timeLimit.timeSeconds/60)%60,s.value.value=y.value.timeLimit.byoyomi,o.value.value=y.value.timeLimit.increment,r.value.value=y.value.startPosition!==void 0?y.value.startPosition:"current",a.value.checked=y.value.enableEngineTimeout,l.value.value=y.value.maxMoves,c.value.checked=y.value.humanIsFront,u.value.value=y.value.repeat,h.value.checked=y.value.swapPlayers,p.value.checked=y.value.enableComment,g.value.checked=y.value.enableAutoSave,w=!0)});const P=Q=>{if(Ii(Q)&&b.value.hasEngine(Q)){const ye=b.value.getEngine(Q);return{name:ye.name,uri:Q,usi:ye}}return{name:"",uri:ti}};return{t:G,CommentBehavior:Di,dialog:t,hours:i,minutes:n,byoyomi:s,increment:o,startPosition:r,enableEngineTimeout:a,maxMoves:l,humanIsFront:c,repeat:u,swapPlayers:h,enableComment:p,enableAutoSave:g,engineSettings:b,blackPlayerURI:v,whitePlayerURI:_,onStart:()=>{const Q={black:P(v.value),white:P(_.value),timeLimit:{timeSeconds:(pt(i.value)*60+pt(n.value))*60,byoyomi:pt(s.value),increment:pt(o.value)},startPosition:r.value.value!=="current"?r.value.value:void 0,enableEngineTimeout:a.value.checked,maxMoves:pt(l.value),humanIsFront:c.value.checked,repeat:pt(u.value),swapPlayers:h.value.checked,enableComment:p.value.checked,enableAutoSave:g.value.checked},ye=gr()?Pf(Q):r1(Q);ye?e.pushError(ye):e.startGame(Q)},onCancel:()=>{e.closeModalDialog()},onUpdatePlayerSetting:Q=>{b.value=Q},onSelectBlackPlayer:Q=>{v.value=Q},onSelectWhitePlayer:Q=>{_.value=Q},onSwapColor:()=>{[v.value,_.value]=[_.value,v.value]},Icon:Qe}}});const mc=e=>(rs("data-v-0d68e722"),e=e(),as(),e),cA={ref:"dialog"},uA={class:"dialog-title"},hA={class:"dialog-form-area"},dA={class:"players"},fA={class:"player"},pA={class:"top-label"},gA={class:"player"},mA={class:"top-label"},bA={class:"players-control"},yA={class:"dialog-form-areas-h"},_A={class:"dialog-form-area time-limit"},vA={class:"top-label"},SA={class:"dialog-form-item"},wA=mc(()=>d("div",{class:"dialog-form-item-label"},"",-1)),EA={ref:"hours",class:"time",type:"number",min:"0",max:"99",step:"1"},IA={class:"dialog-form-item-unit"},PA={ref:"minutes",class:"time",type:"number",min:"0",max:"59",step:"1"},kA={class:"dialog-form-item-unit"},AA={class:"dialog-form-item"},CA=mc(()=>d("div",{class:"dialog-form-item-label"},"",-1)),TA={ref:"byoyomi",class:"time",type:"number",min:"0",max:"60",step:"1"},MA={class:"dialog-form-item-unit"},xA={class:"dialog-form-item"},RA=mc(()=>d("div",{class:"dialog-form-item-label"},"",-1)),NA={ref:"increment",class:"time",type:"number",min:"0",max:"99",step:"1"},OA={class:"dialog-form-item-unit"},LA={class:"dialog-form-item"},BA={id:"enable-engine-timeout",ref:"enableEngineTimeout",type:"checkbox"},DA={for:"enable-engine-timeout"},FA={class:"dialog-form-area flags"},$A={class:"top-label"},HA={class:"dialog-form-item"},UA={class:"dialog-form-item-label"},zA={ref:"startPosition"},GA={value:"current"},WA={value:"standard"},VA={value:"handicapLance"},jA={value:"handicapRightLance"},KA={value:"handicapBishop"},qA={value:"handicapRook"},YA={value:"handicapRookLance"},XA={value:"handicap2Pieces"},JA={value:"handicap4Pieces"},QA={value:"handicap6Pieces"},ZA={value:"handicap8Pieces"},eC={class:"dialog-form-item"},tC={class:"dialog-form-item-label"},iC={ref:"maxMoves",class:"number",type:"number",min:"1"},nC={class:"dialog-form-item"},sC={class:"dialog-form-item-label"},oC={ref:"repeat",class:"number",type:"number",min:"1"},rC={class:"dialog-form-item"},aC={id:"swap-players",ref:"swapPlayers",type:"checkbox"},lC={for:"swap-players"},cC={class:"dialog-form-item"},uC={id:"enable-comment",ref:"enableComment",type:"checkbox"},hC={for:"enable-comment"},dC={class:"dialog-form-item"},fC={id:"enable-auto-save",ref:"enableAutoSave",type:"checkbox"},pC={for:"enable-auto-save"},gC={class:"dialog-form-item"},mC={id:"human-is-front",ref:"humanIsFront",type:"checkbox"},bC={for:"human-is-front"},yC={class:"dialog-main-buttons"};function _C(e,t,i,n,s,o){const r=ge("PlayerSelector"),a=ge("ButtonIcon");return x(),N("div",null,[d("dialog",cA,[d("div",uA,I(e.t.game),1),d("div",hA,[d("div",dA,[d("div",fA,[d("div",pA,I(e.t.senteOrShitate),1),X(r,{"player-uri":e.blackPlayerURI,"contains-human":!0,"engine-settings":e.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:e.onSelectBlackPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),d("div",gA,[d("div",mA,I(e.t.goteOrUwate),1),e.whitePlayerURI?(x(),$e(r,{key:0,"player-uri":e.whitePlayerURI,"contains-human":!0,"engine-settings":e.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:e.onSelectWhitePlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])):se("",!0)])]),d("div",bA,[d("button",{onClick:t[0]||(t[0]=(...l)=>e.onSwapColor&&e.onSwapColor(...l))},[X(a,{class:"icon",icon:e.Icon.SWAP_H},null,8,["icon"]),d("span",null,I(e.t.swapSenteGote),1)])])]),d("div",yA,[d("div",_A,[d("div",vA,I(e.t.time),1),d("div",SA,[wA,d("input",EA,null,512),d("div",IA,I(e.t.hoursSuffix),1),d("input",PA,null,512),d("div",kA,I(e.t.minutesSuffix),1)]),d("div",AA,[CA,d("input",TA,null,512),d("div",MA,I(e.t.secondsSuffix),1)]),d("div",xA,[RA,d("input",NA,null,512),d("div",OA,I(e.t.secondsSuffix),1)]),d("div",LA,[d("input",BA,null,512),d("label",DA,I(e.t.enableEngineTimeout),1)])]),d("div",FA,[d("div",$A,I(e.t.others),1),d("div",HA,[d("div",UA,I(e.t.startPosition),1),d("select",zA,[d("option",GA,I(e.t.currentPosition),1),d("option",WA,I(e.t.nonHandicap),1),d("option",VA,I(e.t.lanceHandicap),1),d("option",jA,I(e.t.rightLanceHandicap),1),d("option",KA,I(e.t.bishopHandicap),1),d("option",qA,I(e.t.rookHandicap),1),d("option",YA,I(e.t.rookLanceHandicap),1),d("option",XA,I(e.t.twoPiecesHandicap),1),d("option",JA,I(e.t.fourPiecesHandicap),1),d("option",QA,I(e.t.sixPiecesHandicap),1),d("option",ZA,I(e.t.eightPiecesHandicap),1)],512)]),d("div",eC,[d("div",tC,I(e.t.maxMoves),1),d("input",iC,null,512)]),d("div",nC,[d("div",sC,I(e.t.gameRepetition),1),d("input",oC,null,512)]),d("div",rC,[d("input",aC,null,512),d("label",lC,I(e.t.swapTurnWhenGameRepetition),1)]),d("div",cC,[d("input",uC,null,512),d("label",hC,I(e.t.outputComments),1)]),d("div",dC,[d("input",fC,null,512),d("label",pC,I(e.t.saveRecordAutomatically),1)]),d("div",gC,[d("input",mC,null,512),d("label",bC,I(e.t.adjustBoardToHumanPlayer),1)])])]),d("div",yC,[d("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:t[1]||(t[1]=l=>e.onStart())},I(e.t.startGame),1),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[2]||(t[2]=l=>e.onCancel())},I(e.t.cancel),1)])],512)])}const vC=je(lA,[["render",_C],["__scopeId","data-v-0d68e722"]]),SC=Ve({name:"CSAGameDialog",components:{PlayerSelector:Qr},setup(){const e=tt(),t=z(null),i=z(null),n=z(Vs.V121),s=z(null),o=z(null),r=z(null),a=z(null),l=z(null),c=z(null),u=z(null),h=z(null),p=z(null),g=z(null),y=z(!1),b=z(by()),v=z(new zi),_=z("");let E=!1,w=!1;e.retainBussyState(),et(async()=>{try{y.value=await pe.isEncryptionAvailable(),b.value=await pe.loadCSAGameSettingHistory(),v.value=await pe.loadUSIEngineSetting(),wt(t.value),Yt(t.value),E=!0}catch(de){e.pushError(de),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Dt(()=>{Xt(t.value)}),ls(()=>{if(!E||w)return;const de=yy(b.value,0);i.value.value=n.value=de.server.protocolVersion,s.value.value=de.server.host,o.value.value=de.server.port,r.value.value=de.server.id,a.value.value=de.server.password,c.value.checked=de.enableComment,u.value.checked=de.enableAutoSave,h.value.value=de.repeat,p.value.checked=de.autoRelogin,g.value.checked=de.autoFlip,_.value=de.player.uri,w=!0});const P=de=>{if(Ii(de)&&v.value.hasEngine(de)){const Me=v.value.getEngine(de);return{name:Me.name,uri:de,usi:Me}}return{name:"",uri:ti}},A=()=>{const de={player:P(_.value),server:{protocolVersion:i.value.value,host:String(s.value.value||"").trim(),port:Number(o.value.value),id:String(r.value.value||""),password:String(a.value.value||"")},enableComment:c.value.checked,enableAutoSave:u.value.checked,repeat:pt(h.value),autoRelogin:p.value.checked,autoFlip:g.value.checked},Me=my(de);Me?e.pushError(Me):e.loginCSAGame(de,{saveHistory:l.value.checked})},O=()=>{e.closeModalDialog()},U=async de=>{v.value=de},W=de=>{_.value=de},Z=de=>{const Me=de.target;a.value.type=Me.checked?"text":"password"},q=de=>{const Me=de.target,Ee=b.value.serverHistory[Number(Me.value)];Ee&&(i.value.value=Ee.protocolVersion,s.value.value=Ee.host,o.value.value=Ee.port,r.value.value=Ee.id,a.value.value=Ee.password)},Q=()=>{n.value=i.value.value},ye=ke(()=>{const de=Fe();return de.enableCSALog&&de.enableAppLog&&de.enableUSILog});return{t:G,CSAProtocolVersion:Vs,maxServerHistoryLenght:Nf,dialog:t,protocolVersion:i,host:s,port:o,id:r,password:a,saveHistory:l,enableComment:c,enableAutoSave:u,repeat:h,autoRelogin:p,autoFlip:g,engineSettings:v,playerURI:_,history:b,selectedProtocolVersion:n,onChangeProtocolVersion:Q,logEnabled:ye,isEncryptionAvailable:y,onStart:A,onCancel:O,onUpdatePlayerSetting:U,onSelectPlayer:W,onTogglePasswordVisibility:Z,onChangeHistory:q,Icon:Qe}}});const Zr=e=>(rs("data-v-db4f7787"),e=e(),as(),e),wC={ref:"dialog",class:"root"},EC={class:"dialog-title"},IC={class:"dialog-scroll-area"},PC={key:0,class:"dialog-form-area dialog-form-warning"},kC={class:"dialog-form-note"},AC={class:"dialog-form-area"},CC={class:"dialog-form-area"},TC={class:"dialog-form-item"},MC={class:"dialog-form-item-label-wide"},xC={key:0,value:"0"},RC=["value"],NC=Zr(()=>d("hr",null,null,-1)),OC={class:"dialog-form-item"},LC={class:"dialog-form-item-label-wide"},BC=["value"],DC=["value"],FC={key:0,class:"dialog-form-area dialog-form-item dialog-form-warning"},$C={class:"dialog-form-note"},HC={key:1,class:"dialog-form-area dialog-form-item dialog-form-warning"},UC={class:"dialog-form-note"},zC={class:"dialog-form-item"},GC={class:"dialog-form-item-label-wide"},WC={ref:"host",class:"long-text",list:"csa-server-host",type:"text"},VC=Zr(()=>d("datalist",{id:"csa-server-host"},[d("option",{value:"gserver.computer-shogi.org"}),d("option",{value:"wdoor.c.u-tokyo.ac.jp"}),d("option",{value:"localhost"})],-1)),jC={class:"dialog-form-item"},KC={class:"dialog-form-item-label-wide"},qC={ref:"port",class:"number",list:"csa-server-port-number",type:"number"},YC=Zr(()=>d("datalist",{id:"csa-server-port-number"},[d("option",{value:"4081"})],-1)),XC={class:"dialog-form-item"},JC=Zr(()=>d("div",{class:"dialog-form-item-label-wide"},"ID",-1)),QC={ref:"id",class:"long-text",type:"text"},ZC={class:"dialog-form-item"},eT={class:"dialog-form-item-label-wide"},tT={ref:"password",class:"long-text",type:"password"},iT={class:"dialog-form-item"},nT={for:"show-password"},sT={class:"dialog-form-area dialog-form-item dialog-form-warning"},oT={key:0,class:"dialog-form-note"},rT={key:1,class:"dialog-form-note"},aT={class:"dialog-form-item"},lT={id:"save-history",ref:"saveHistory",type:"checkbox",checked:""},cT={for:"save-history"},uT={class:"dialog-form-area"},hT={class:"dialog-form-item"},dT={class:"dialog-form-item-label-wide number"},fT={ref:"repeat",class:"number",type:"number",min:"1"},pT={class:"dialog-form-item"},gT={id:"auto-relogin",ref:"autoRelogin",type:"checkbox"},mT={for:"auto-relogin"},bT={class:"dialog-form-item"},yT={id:"enable-comment",ref:"enableComment",type:"checkbox"},_T={for:"enable-comment"},vT={class:"dialog-form-item"},ST={id:"enable-auto-save",ref:"enableAutoSave",type:"checkbox"},wT={for:"enable-auto-save"},ET={class:"dialog-form-item"},IT={id:"auto-flip",ref:"autoFlip",type:"checkbox"},PT={for:"auto-flip"},kT={class:"dialog-main-buttons"};function AT(e,t,i,n,s,o){const r=ge("PlayerSelector");return x(),N("div",null,[d("dialog",wC,[d("div",EC,I(e.t.csaProtocolOnlineGame),1),d("div",IC,[e.logEnabled?se("",!0):(x(),N("div",PC,[d("div",kC,I(e.t.someLogsDisabled)+" "+I(e.t.logsRecommendedForCSAProtocol)+" "+I(e.t.pleaseEnableLogsAndRestart),1)])),d("div",AC,[d("div",null,I(e.t.player),1),X(r,{"player-uri":e.playerURI,"contains-human":!0,"engine-settings":e.engineSettings,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:e.onSelectPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),d("div",CC,[d("div",TC,[d("div",MC,I(e.t.selectFromHistory),1),d("select",{class:"long-text",value:"0",onChange:t[0]||(t[0]=(...a)=>e.onChangeHistory&&e.onChangeHistory(...a))},[e.history.serverHistory.length===0?(x(),N("option",xC,I(e.t.noHistory),1)):se("",!0),(x(!0),N(Ie,null,He(e.history.serverHistory,(a,l)=>(x(),N("option",{key:l,value:l},I(a.host)+":"+I(a.port)+" "+I(a.id),9,RC))),128))],32)]),NC,d("div",OC,[d("div",LC,I(e.t.version),1),d("select",{ref:"protocolVersion",class:"long-text",value:"CSA_v121",onChange:t[1]||(t[1]=(...a)=>e.onChangeProtocolVersion&&e.onChangeProtocolVersion(...a))},[d("option",{value:e.CSAProtocolVersion.V121},I(e.t.csaProtocolV121),9,BC),d("option",{value:e.CSAProtocolVersion.V121_FLOODGATE},I(e.t.csaProtocolV121WithPVComment),9,DC)],544)]),e.selectedProtocolVersion===e.CSAProtocolVersion.V121?(x(),N("div",FC,[d("div",$C,I(e.t.notSendPVOnStandardCSAProtocol),1)])):se("",!0),e.selectedProtocolVersion===e.CSAProtocolVersion.V121_FLOODGATE?(x(),N("div",HC,[d("div",UC,I(e.t.sendPVDoNotUseOnWCSC),1)])):se("",!0),d("div",zC,[d("div",GC,I(e.t.hostToConnect),1),d("input",WC,null,512),VC]),d("div",jC,[d("div",KC,I(e.t.portNumber),1),d("input",qC,null,512),YC]),d("div",XC,[JC,d("input",QC,null,512)]),d("div",ZC,[d("div",eT,I(e.t.password),1),d("input",tT,null,512)]),d("div",iT,[d("input",{id:"show-password",type:"checkbox",onChange:t[2]||(t[2]=(...a)=>e.onTogglePasswordVisibility&&e.onTogglePasswordVisibility(...a))},null,32),d("label",nT,I(e.t.showPassword),1)]),d("div",sT,[e.isEncryptionAvailable?(x(),N("div",oT,I(e.t.csaProtocolSendPlaintextPassword),1)):(x(),N("div",rT,I(e.t.passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable)+" "+I(e.t.pleaseUncheckSaveHistoryIfNotWantSave)+" "+I(e.t.csaProtocolSendPlaintextPasswordRegardlessOfHistory),1))]),d("div",aT,[d("input",lT,null,512),d("label",cT,I(e.t.saveHistory)+" ("+I(e.t.keepLatest(e.maxServerHistoryLenght))+") ",1)])]),d("div",uT,[d("div",hT,[d("div",dT,I(e.t.gameRepetition),1),d("input",fT,null,512)]),d("div",pT,[d("input",gT,null,512),d("label",mT,I(e.t.autoRelogin),1)]),d("div",bT,[d("input",yT,null,512),d("label",_T,I(e.t.outputComments),1)]),d("div",vT,[d("input",ST,null,512),d("label",wT,I(e.t.saveRecordAutomatically),1)]),d("div",ET,[d("input",IT,null,512),d("label",PT,I(e.t.adjustBoardAutomatically),1)])])]),d("div",kT,[d("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:t[3]||(t[3]=a=>e.onStart())},I(e.t.startGame),1),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[4]||(t[4]=a=>e.onCancel())},I(e.t.cancel),1)])],512)])}const CT=je(SC,[["render",AT],["__scopeId","data-v-db4f7787"]]),TT=Ve({name:"ResearchDialog",components:{PlayerSelector:Qr},setup(){const e=tt(),t=z(null),i=z(tl()),n=z(new zi),s=z(""),o=z([]);return e.retainBussyState(),et(async()=>{var c,u;wt(t.value),Yt(t.value);try{i.value=await pe.loadResearchSetting(),n.value=await pe.loadUSIEngineSetting(),s.value=((c=i.value.usi)==null?void 0:c.uri)||"",o.value=((u=i.value.secondaries)==null?void 0:u.map(h=>{var p;return((p=h.usi)==null?void 0:p.uri)||""}))||[]}catch(h){e.pushError(h),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Dt(()=>{Xt(t.value)}),{t:G,dialog:t,engineSettings:n,engineURI:s,secondaryEngineURIs:o,onStart:()=>{const c=n.value.getEngine(s.value),u=[];for(const g of o.value){const y=n.value.getEngine(g);u.push({usi:y})}const h={usi:c,secondaries:u},p=a1(h);if(p){e.pushError(p);return}e.startResearch(h)},onCancel:()=>{e.closeModalDialog()},onUpdatePlayerSetting:async c=>{n.value=c}}}});const MT={ref:"dialog",class:"root"},xT={class:"dialog-title"},RT={class:"dialog-form-area"},NT={class:"dialog-form-area"},OT=["onClick"],LT={class:"dialog-main-buttons"};function BT(e,t,i,n,s,o){const r=ge("PlayerSelector");return x(),N("div",null,[d("dialog",MT,[d("div",xT,I(e.t.research),1),d("div",RT,[d("div",NT,[X(r,{"player-uri":e.engineURI,"engine-settings":e.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:t[0]||(t[0]=a=>{e.engineURI=a})},null,8,["player-uri","engine-settings","onUpdateEngineSetting"])]),(x(!0),N(Ie,null,He(e.secondaryEngineURIs,(a,l)=>(x(),N("div",{key:l,class:"dialog-form-area"},[X(r,{"player-uri":a,"engine-settings":e.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:c=>{e.secondaryEngineURIs[l]=c}},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"]),d("button",{class:"remove-button",onClick:c=>e.secondaryEngineURIs.splice(l,1)},I(e.t.remove),9,OT)]))),128)),d("button",{onClick:t[1]||(t[1]=a=>e.secondaryEngineURIs.push(""))},I(e.t.addNthEngine(e.secondaryEngineURIs.length+2)),1)]),d("div",LT,[d("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:t[2]||(t[2]=a=>e.onStart())},I(e.t.startResearch),1),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[3]||(t[3]=a=>e.onCancel())},I(e.t.cancel),1)])],512)])}const DT=je(TT,[["render",BT],["__scopeId","data-v-7f6c52e5"]]),FT=Ve({name:"USIEngineManagementDialog",components:{USIEngineOptionDialog:$p},setup(){const e=tt(),t=z(null),i=z(null),n=z(new zi),s=z(null),o=z([]);e.retainBussyState(),et(async()=>{wt(t.value),Yt(t.value);try{n.value=await pe.loadUSIEngineSetting()}catch(v){e.pushError(v),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Dt(()=>{Xt(t.value)});const r=ke(()=>n.value.engineList.map(v=>({uri:v.uri,name:v.name,visible:o.value.length==0||or(v.name,o.value)||or(v.defaultName,o.value)})));return{t:G,optionDialog:i,dialog:t,setting:n,filter:s,engines:r,updateFilter:()=>{o.value=String(s.value.value).trim().split(/ +/).filter(v=>v)},add:async()=>{try{e.retainBussyState();const v=await pe.showSelectUSIEngineDialog();if(!v)return;const E=Fe().engineTimeoutSeconds;n.value.addEngine(await pe.getUSIEngineInfo(v,E))}catch(v){e.pushError(v)}finally{e.releaseBussyState()}},remove:v=>{n.value.removeEngine(v)},openOptions:v=>{i.value=n.value.getEngine(v)},duplicate:v=>{const _=n.value.getEngine(v),E=t1(_);n.value.addEngine(E)},saveAndClose:async()=>{try{e.retainBussyState(),await pe.saveUSIEngineSetting(n.value),e.destroyModalDialog()}catch(v){e.pushError(v)}finally{e.releaseBussyState()}},cancel:()=>{e.closeModalDialog()},optionOk:v=>{n.value.updateEngine(v),i.value=null},optionCancel:()=>{i.value=null}}}});const $T={ref:"dialog"},HT={class:"dialog-title"},UT={class:"dialog-form-area"},zT={class:"engine-filter"},GT=["placeholder"],WT={class:"engine-list"},VT={key:0,class:"engine"},jT=["value"],KT={class:"engine-name"},qT=["onClick"],YT=["onClick"],XT=["onClick"],JT={class:"dialog-main-buttons"};function QT(e,t,i,n,s,o){const r=ge("USIEngineOptionDialog");return x(),N(Ie,null,[d("div",null,[d("dialog",$T,[d("div",HT,I(e.t.engineManagement),1),d("div",UT,[d("div",zT,[d("input",{ref:"filter",class:"filter",placeholder:e.t.filterByEngineName,onInput:t[0]||(t[0]=(...a)=>e.updateFilter&&e.updateFilter(...a))},null,40,GT)]),d("div",WT,[e.setting.engineList.length===0?(x(),N("div",VT,I(e.t.noEngineRegistered),1)):se("",!0),(x(!0),N(Ie,null,He(e.engines,a=>(x(),N("div",{key:a.uri,class:yt(["engine",{hidden:!a.visible}]),value:a.uri},[d("div",KT,I(a.name),1),d("button",{onClick:l=>e.openOptions(a.uri)},I(e.t.config),9,qT),d("button",{onClick:l=>e.duplicate(a.uri)},I(e.t.duplicate),9,YT),d("button",{onClick:l=>e.remove(a.uri)},I(e.t.remove),9,XT)],10,jT))),128))])]),d("button",{class:"dialog-wide-button",onClick:t[1]||(t[1]=a=>e.add())},I(e.t.add),1),d("div",JT,[d("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:t[2]||(t[2]=a=>e.saveAndClose())},I(e.t.saveAndClose),1),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[3]||(t[3]=a=>e.cancel())},I(e.t.cancel),1)])],512)]),e.optionDialog?(x(),$e(r,{key:0,"latest-engine-setting":e.optionDialog,onOk:e.optionOk,onCancel:e.optionCancel},null,8,["latest-engine-setting","onOk","onCancel"])):se("",!0)],64)}const ZT=je(FT,[["render",QT],["__scopeId","data-v-174fafe8"]]),eM={pawn:"./piece/gothic/pawn.png",lance:"./piece/gothic/lance.png",knight:"./piece/gothic/knight.png",silver:"./piece/gothic/silver.png",gold:"./piece/gothic/gold.png",bishop:"./piece/gothic/bishop.png",rook:"./piece/gothic/rook.png",king:"./piece/gothic/king.png",king2:"./piece/gothic/king2.png",promPawn:"./piece/gothic/prom_pawn.png",promLance:"./piece/gothic/prom_lance.png",promKnight:"./piece/gothic/prom_knight.png",promSilver:"./piece/gothic/prom_silver.png",horse:"./piece/gothic/horse.png",dragon:"./piece/gothic/dragon.png"};function tM(e){return{size:e,headerX:e*.5,headerY:e*.01,footerX:e*.01,footerY:e*.83,boardLeft:e*.15,boardTop:e*.12,boardSize:e*.7,fileLeft:e*.168,fileTop:e*.078,rankLeft:e*.85,rankTop:e*.138,labelSize:e*.04,pieceSize:e*.7/9,fontSize:e*.038,handSize:e*.053,blackHandLeft:e*.9,blackHandTop:e*.12,whiteHandLeft:e*(.1-.053),whiteHandTop:e*.82}}const iM=Ve({name:"SimpleBoardView",props:{pieceImageType:{type:String,required:!0},boardImageType:{type:String,required:!0},boardLabelType:{type:String,required:!0},maxSize:{type:bt,required:!0},position:{type:Object,required:!0},header:{type:String,required:!1,default:null},footer:{type:String,required:!1,default:null},lastMove:{type:Object,required:!1,default:null},blackPlayerName:{type:String,required:!1,default:""},whitePlayerName:{type:String,required:!1,default:""}},emits:["resize"],setup(e){return{layout:ke(()=>{const i=tM(Math.min(e.maxSize.width,e.maxSize.height));return{frameStyle:{width:`${i.size}px`,height:`${i.size}px`},headerStyle:{transform:"translate(-50%, 0%)",left:`${i.headerX}px`,top:`${i.headerY}px`,"font-size":`${i.fontSize}px`},footerStyle:{left:`${i.footerX}px`,top:`${i.footerY}px`,"font-size":`${i.fontSize}px`},boardStyle:{left:`${i.boardLeft}px`,top:`${i.boardTop}px`},boardImageStyle:{width:`${i.boardSize}px`,height:`${i.boardSize}px`},files:[1,2,3,4,5,6,7,8,9].map(n=>({style:{left:`${i.fileLeft+i.pieceSize*(9-n)}px`,top:`${i.fileTop}px`},image:`./character/arabic_numerals/${n}.png`})),fileImageStyle:{width:`${i.labelSize}px`,height:`${i.labelSize}px`},ranks:[1,2,3,4,5,6,7,8,9].map(n=>({style:{left:`${i.rankLeft}px`,top:`${i.rankTop+i.pieceSize*(n-1)}px`},image:`./character/numerals/${n}.png`})),rankImageStyle:{width:`${i.labelSize}px`,height:`${i.labelSize}px`},lastMoveStyle:function(){if(!e.lastMove)return null;const n=e.lastMove.to;return{"background-color":"gold",left:`${i.boardLeft+i.boardSize*n.x/9}px`,top:`${i.boardTop+i.boardSize*n.y/9}px`,width:`${i.pieceSize}px`,height:`${i.pieceSize}px`}}(),boardPieces:e.position.board.listNonEmptySquares().map(n=>{const s=e.position.board.at(n);return{id:`${n.x},${n.y}`,style:{left:`${i.boardLeft+i.boardSize*n.x/9}px`,top:`${i.boardTop+i.boardSize*n.y/9}px`},imageStyle:{width:`${i.pieceSize}px`,height:`${i.pieceSize}px`,transform:s.color==="white"?"rotate(180deg)":void 0},image:eM[s.type]}}),blackHandImageStyle:{width:`${i.handSize}px`,height:"auto"},blackHandSymbol:{style:{left:`${i.blackHandLeft}px`,top:`${i.blackHandTop}px`},image:"./character/turns/black.png"},blackHandPieces:function(){const n=[];for(const{type:s,count:o}of e.position.blackHand.counts)o!==0&&(n.push({id:s,style:{left:`${i.blackHandLeft}px`,top:`${i.blackHandTop+i.handSize*(n.length+1)}px`},image:`./piece/gothic/${s}.png`}),o!==1&&n.push({id:`${s}-number`,style:{left:`${i.blackHandLeft}px`,top:`${i.blackHandTop+i.handSize*(n.length+1)}px`},image:`./character/numerals/${o}.png`}));return n.length===0?[{id:"empty",style:{left:`${i.blackHandLeft}px`,top:`${i.blackHandTop+i.handSize}px`},image:"./character/hand/nashi.png"}]:n}(),whiteHandImageStyle:{width:`${i.handSize}px`,height:"auto",transform:"rotate(180deg)"},whiteHandSymbol:{style:{left:`${i.whiteHandLeft}px`,top:`${i.whiteHandTop}px`,transform:"translate(0%, -100%)"},image:"./character/turns/white.png"},whiteHandPieces:function(){const n=[];for(const{type:s,count:o}of e.position.whiteHand.counts)o!==0&&(n.push({id:s,style:{left:`${i.whiteHandLeft}px`,top:`${i.whiteHandTop-i.handSize*(n.length+1)}px`,transform:"translate(0%, -100%)"},image:`./piece/gothic/${s}.png`}),o!==1&&n.push({id:`${s}-number`,style:{left:`${i.whiteHandLeft}px`,top:`${i.whiteHandTop-i.handSize*(n.length+1)}px`,transform:"translate(0%, -100%)"},image:`./character/numerals/${o}.png`}));return n.length===0?[{id:"empty",style:{left:`${i.whiteHandLeft}px`,top:`${i.whiteHandTop-i.handSize}px`,transform:"translate(0%, -100%)"},image:"./character/hand/nashi.png"}]:n}()}})}}}),nM=""+new URL("../board/grid_square.svg",import.meta.url).href;const sM=["src"],oM=["src"],rM=["src"],aM=["src"],lM=["src"],cM=["src"],uM=["src"];function hM(e,t,i,n,s,o){return x(),N("div",null,[d("div",{class:"frame",style:Se(e.layout.frameStyle)},[e.header?(x(),N("div",{key:0,class:"header",style:Se(e.layout.headerStyle)},I(e.header),5)):se("",!0),e.footer?(x(),N("div",{key:1,class:"footer",style:Se(e.layout.footerStyle)},I(e.footer),5)):se("",!0),e.layout.lastMoveStyle?(x(),N("div",{key:2,style:Se(e.layout.lastMoveStyle)},null,4)):se("",!0),d("div",{class:"board-grid",style:Se(e.layout.boardStyle)},[d("img",{src:nM,style:Se(e.layout.boardImageStyle)},null,4)],4),(x(!0),N(Ie,null,He(e.layout.files,r=>(x(),N("div",{key:r.image,style:Se(r.style)},[d("img",{src:r.image,style:Se(e.layout.fileImageStyle)},null,12,sM)],4))),128)),(x(!0),N(Ie,null,He(e.layout.ranks,r=>(x(),N("div",{key:r.image,style:Se(r.style)},[d("img",{src:r.image,style:Se(e.layout.rankImageStyle)},null,12,oM)],4))),128)),(x(!0),N(Ie,null,He(e.layout.boardPieces,r=>(x(),N("div",{key:r.id,style:Se(r.style)},[d("img",{src:r.image,style:Se(r.imageStyle)},null,12,rM)],4))),128)),d("div",{style:Se(e.layout.blackHandSymbol.style)},[d("img",{src:e.layout.blackHandSymbol.image,style:Se(e.layout.blackHandImageStyle)},null,12,aM)],4),(x(!0),N(Ie,null,He(e.layout.blackHandPieces,r=>(x(),N("div",{key:r.id,style:Se(r.style)},[d("img",{src:r.image,style:Se(e.layout.blackHandImageStyle)},null,12,lM)],4))),128)),d("div",{style:Se(e.layout.whiteHandSymbol.style)},[d("img",{src:e.layout.whiteHandSymbol.image,style:Se(e.layout.whiteHandImageStyle)},null,12,cM)],4),(x(!0),N(Ie,null,He(e.layout.whiteHandPieces,r=>(x(),N("div",{key:r.id,style:Se(r.style)},[d("img",{src:r.image,style:Se(e.layout.whiteHandImageStyle)},null,12,uM)],4))),128))],4)])}const dM=je(iM,[["render",hM],["__scopeId","data-v-cfbea935"]]),fM=100,pM=80,gM=150,mM=16/9,bM=Ve({name:"ExportBoardImageDialog",components:{BoardView:Vl,SimpleBoardView:dM,ButtonIcon:kt},setup(){const e=tt(),t=Fe(),i=e.record.metadata.getStandardMetadata(J.BLACK_NAME),n=e.record.metadata.getStandardMetadata(J.WHITE_NAME),s=e.record.metadata.getStandardMetadata(J.BLACK_SHORT_NAME),o=e.record.metadata.getStandardMetadata(J.WHITE_SHORT_NAME),r=e.record,a=r.current.move instanceof nt?r.current.move:null,l=z(null),c=z(null),u=z(null),h=z(null),p=mi(new bt(window.innerWidth,window.innerHeight)),g=z(window.devicePixelRatio),y=a?`${r.current.number} ${xn(r.position,a)}`:r.current.nextColor===D.BLACK?"":"",b=new Qo,v=()=>{b.after(()=>{p.width=window.innerWidth,p.height=window.innerHeight},fM),g.value=window.devicePixelRatio};et(()=>{wt(l.value),Yt(l.value),window.addEventListener("resize",v),u.value.value=t.positionImageSize,h.value.value=t.positionImageHeader}),Dt(()=>{Xt(l.value),window.removeEventListener("resize",v)});const _=ke(()=>{const Z=t.positionImageSize/g.value,q=Z*mM;return new bt(Math.min(q,p.width-pM),Math.min(Z,p.height-gM))}),E=Z=>{const q=Z.target;t.updateAppSetting({positionImageSize:parseInt(q.value)||400})},w=Z=>{const q=Z.target;t.updateAppSetting({positionImageHeader:q.value})},P=Z=>{const q=Z.target;t.updateAppSetting({positionImageStyle:q.value})},A=()=>{const q=c.value.getBoundingClientRect();return new Ib(q.x,q.y,q.width,q.height)};return{PositionImageStyle:Sf,t:G,Icon:Qe,dialog:l,board:c,imageSize:u,headerText:h,appSetting:t,lastMove:a,defaultHeader:y,maxSize:_,blackPlayerName:i,whitePlayerName:n,blackPlayerShortName:s,whitePlayerShortName:o,record:r,changeSize:E,changeHeaderText:w,changeType:P,saveAsPNG:()=>{pe.exportCaptureAsPNG(A()).catch(Z=>{e.pushError(Z)})},saveAsJPEG:()=>{pe.exportCaptureAsJPEG(A()).catch(Z=>{e.pushError(Z)})},close:()=>{e.closeModalDialog()}}}});const bc=e=>(rs("data-v-f949294a"),e=e(),as(),e),yM={ref:"dialog"},_M={class:"control-items"},vM={class:"dialog-form-item-label"},SM=bc(()=>d("span",{class:"dialog-form-item-unit"},"px",-1)),wM={class:"dialog-form-item-label"},EM=["placeholder"],IM={class:"control-items"},PM=["value"],kM=["value"],AM=["value"],CM=bc(()=>d("span",null,"PNG",-1)),TM=bc(()=>d("span",null,"JPEG",-1));function MM(e,t,i,n,s,o){const r=ge("SimpleBoardView"),a=ge("BoardView"),l=ge("ButtonIcon");return x(),N("div",null,[d("dialog",yM,[d("div",{ref:"board",class:yt(["board",e.appSetting.positionImageStyle])},[e.appSetting.positionImageStyle===e.PositionImageStyle.BOOK?(x(),$e(r,{key:0,"piece-image-type":e.appSetting.pieceImage,"board-image-type":e.appSetting.boardImage,"board-label-type":e.appSetting.boardLabelType,"max-size":e.maxSize,position:e.record.position,header:e.appSetting.positionImageHeader||e.defaultHeader,footer:e.record.current.comment,"last-move":e.lastMove,"black-player-name":e.blackPlayerShortName,"white-player-name":e.whitePlayerShortName},null,8,["piece-image-type","board-image-type","board-label-type","max-size","position","header","footer","last-move","black-player-name","white-player-name"])):(x(),$e(a,{key:1,"piece-image-type":e.appSetting.pieceImage,"board-image-type":e.appSetting.boardImage,"board-label-type":e.appSetting.boardLabelType,"max-size":e.maxSize,position:e.record.position,"last-move":e.lastMove,flip:e.appSetting.boardFlipping,"black-player-name":e.blackPlayerName,"white-player-name":e.whitePlayerName},null,8,["piece-image-type","board-image-type","board-label-type","max-size","position","last-move","flip","black-player-name","white-player-name"]))],2),d("div",_M,[d("div",null,[d("span",vM,I(e.t.size),1),d("input",{ref:"imageSize",class:"size",type:"number",min:"400",max:"2000",onInput:t[0]||(t[0]=(...c)=>e.changeSize&&e.changeSize(...c))},null,544),SM]),d("div",{class:yt({hidden:e.appSetting.positionImageStyle===e.PositionImageStyle.GAME})},[d("span",wM,I(e.t.title),1),d("input",{ref:"headerText",class:"header",placeholder:e.t.typeCustomTitleHere,onInput:t[1]||(t[1]=(...c)=>e.changeHeaderText&&e.changeHeaderText(...c))},null,40,EM)],2)]),d("div",IM,[d("select",{value:e.appSetting.positionImageStyle,onChange:t[2]||(t[2]=(...c)=>e.changeType&&e.changeType(...c))},[d("option",{value:e.PositionImageStyle.BOOK},I(e.t.bookStyle),9,kM),d("option",{value:e.PositionImageStyle.GAME},I(e.t.gameStyle),9,AM)],40,PM),d("button",{class:"dialog-button",autofocus:"","data-hotkey":"Enter",onClick:t[3]||(t[3]=(...c)=>e.saveAsPNG&&e.saveAsPNG(...c))},[X(l,{class:"icon",icon:e.Icon.SAVE},null,8,["icon"]),CM]),d("button",{class:"dialog-button",autofocus:"","data-hotkey":"Enter",onClick:t[4]||(t[4]=(...c)=>e.saveAsJPEG&&e.saveAsJPEG(...c))},[X(l,{class:"icon",icon:e.Icon.SAVE},null,8,["icon"]),TM]),d("button",{class:"dialog-button",autofocus:"","data-hotkey":"Escape",onClick:t[5]||(t[5]=(...c)=>e.close&&e.close(...c))},[X(l,{class:"icon",icon:e.Icon.CLOSE},null,8,["icon"]),d("span",null,I(e.t.close),1)])])],512)])}const xM=je(bM,[["render",MM],["__scopeId","data-v-f949294a"]]),RM={"\r\n":"crlf","\n":"lf","\r":"cr"},NM={crlf:`\r
`,lf:`
`,cr:"\r"},OM=Ve({name:"AppSettingDialog",setup(){const e=tt(),t=Fe(),i=z(null),n=z(null),s=z(null),o=z(null),r=z(null),a=z(null),l=z(null),c=z(null),u=z(null),h=z(null),p=z(null),g=z(null),y=z(null),b=z(null),v=z(null),_=z(null),E=z(null),w=z(null),P=z(null),A=z(null),O=z(null),U=z(null),W=z(null),Z=z(null),q=z(null);et(()=>{wt(i.value),Yt(i.value)}),Dt(()=>{Xt(i.value)});const Q=async()=>{const Me={language:n.value.value,thema:s.value.value,pieceImage:o.value.value,boardImage:r.value.value,boardLabelType:a.value.checked?Ts.STANDARD:Ts.NONE,tabPaneType:l.value.value,pieceVolume:pt(c.value),clockVolume:pt(u.value),clockPitch:pt(h.value),clockSoundTarget:p.value.value,returnCode:NM[g.value.value],autoSaveDirectory:y.value.value,translateEngineOptionName:b.value.checked,engineTimeoutSeconds:pt(v.value),evaluationViewFrom:_.value.value,coefficientInSigmoid:pt(E.value),badMoveLevelThreshold1:pt(w.value),badMoveLevelThreshold2:pt(P.value),badMoveLevelThreshold3:pt(A.value),badMoveLevelThreshold4:pt(O.value),enableAppLog:U.value.checked,enableUSILog:W.value.checked,enableCSALog:Z.value.checked,logLevel:q.value.value};e.retainBussyState();try{await Fe().updateAppSetting(Me),e.closeAppSettingDialog()}catch(Ee){e.pushError(Ee)}finally{e.releaseBussyState()}},ye=async()=>{e.retainBussyState();try{const Me=await pe.showSelectDirectoryDialog(y.value.value);Me&&(y.value.value=Me)}catch(Me){e.pushError(Me)}finally{e.releaseBussyState()}},de=()=>{e.closeAppSettingDialog()};return{t:G,Language:Mn,Thema:Gl,PieceImageType:En,BoardImageType:Ue,BoardLabelType:Ts,TabPaneType:dr,EvaluationViewFrom:Wl,LogLevel:gt,dialog:i,language:n,thema:s,pieceImage:o,boardImage:r,displayBoardLabels:a,tabPaneType:l,pieceVolume:c,clockVolume:u,clockPitch:h,clockSoundTarget:p,returnCode:g,autoSaveDirectory:y,translateEngineOptionName:b,engineTimeoutSeconds:v,evaluationViewFrom:_,coefficientInSigmoid:E,badMoveLevelThreshold1:w,badMoveLevelThreshold2:P,badMoveLevelThreshold3:A,badMoveLevelThreshold4:O,enableAppLog:U,enableUSILog:W,enableCSALog:Z,logLevel:q,appSetting:t,returnCodeToName:RM,isNative:gr(),selectAutoSaveDirectory:ye,saveAndClose:Q,cancel:de}}});const At=e=>(rs("data-v-1651e1d1"),e=e(),as(),e),LM={ref:"dialog"},BM={class:"dialog-title"},DM={class:"dialog-scroll-area settings"},FM={class:"section"},$M={class:"section-title"},HM=At(()=>d("div",{class:"dialog-form-area dialog-form-warning"},[d("div",{class:"dialog-form-note"},"  We'd like your help to translate. "),d("div",{class:"dialog-form-note"},"  You should restart this app to change the language. ")],-1)),UM={class:"dialog-form-item"},zM={class:"dialog-form-item-label-wide"},GM=["value"],WM=["value"],VM=["value"],jM={class:"dialog-form-item"},KM={class:"dialog-form-item-label-wide"},qM=["value"],YM=["value"],XM=["value"],JM=["value"],QM=["value"],ZM=["value"],ex={class:"dialog-form-item"},tx={class:"dialog-form-item-label-wide"},ix=["value"],nx=["value"],sx=["value"],ox=["value"],rx=["value"],ax={class:"dialog-form-item"},lx={class:"dialog-form-item-label-wide"},cx=["value"],ux=["value"],hx=["value"],dx=["value"],fx=["value"],px=["value"],gx=["value"],mx=["value"],bx=["value"],yx={class:"dialog-form-item"},_x={class:"dialog-form-item-label-wide"},vx=["checked"],Sx={class:"dialog-form-item"},wx={class:"dialog-form-item-label-wide"},Ex=["value"],Ix=["value"],Px=["value"],kx=At(()=>d("hr",null,null,-1)),Ax={class:"section"},Cx={class:"section-title"},Tx={class:"dialog-form-item"},Mx={class:"dialog-form-item-label-wide"},xx=["value"],Rx=At(()=>d("div",{class:"dialog-form-item-unit"},"%",-1)),Nx={class:"dialog-form-item"},Ox={class:"dialog-form-item-label-wide"},Lx=["value"],Bx=At(()=>d("div",{class:"dialog-form-item-unit"},"%",-1)),Dx={class:"dialog-form-item"},Fx={class:"dialog-form-item-label-wide"},$x=["value"],Hx={class:"dialog-form-item-unit"},Ux={class:"dialog-form-item"},zx={class:"dialog-form-item-label-wide"},Gx=["value"],Wx={value:"all"},Vx={value:"onlyUser"},jx=At(()=>d("hr",null,null,-1)),Kx={class:"section"},qx={class:"section-title"},Yx={class:"dialog-form-item"},Xx={class:"dialog-form-item-label-wide"},Jx=["value"],Qx=At(()=>d("option",{value:"crlf"},"CR + LF (Windows)",-1)),Zx=At(()=>d("option",{value:"lf"},"LF (UNIX/Mac)",-1)),e4={value:"cr"},t4={class:"dialog-form-item"},i4={class:"dialog-form-item-label-wide"},n4=["value"],s4=At(()=>d("hr",null,null,-1)),o4={class:"section"},r4={class:"section-title"},a4={class:"dialog-form-item"},l4={class:"dialog-form-item-label-wide"},c4=["checked"],u4={class:"dialog-form-item"},h4={class:"dialog-form-item-label-wide"},d4=["value"],f4={class:"dialog-form-item-unit"},p4=At(()=>d("hr",null,null,-1)),g4={class:"section"},m4={class:"section-title"},b4={class:"dialog-form-item"},y4={class:"dialog-form-item-label-wide"},_4=["value"],v4=["value"],S4=["value"],w4={class:"dialog-form-item"},E4={class:"dialog-form-item-label-wide"},I4=["value"],P4={class:"dialog-form-item-unit"},k4={class:"dialog-form-item"},A4=At(()=>d("div",{class:"dialog-form-item-label-wide"},"",-1)),C4=["value"],T4=At(()=>d("div",{class:"dialog-form-item-unit"},"%",-1)),M4={class:"dialog-form-item"},x4=At(()=>d("div",{class:"dialog-form-item-label-wide"},"",-1)),R4=["value"],N4=At(()=>d("div",{class:"dialog-form-item-unit"},"%",-1)),O4={class:"dialog-form-item"},L4=At(()=>d("div",{class:"dialog-form-item-label-wide"},"",-1)),B4=["value"],D4=At(()=>d("div",{class:"dialog-form-item-unit"},"%",-1)),F4={class:"dialog-form-item"},$4=At(()=>d("div",{class:"dialog-form-item-label-wide"},"",-1)),H4=["value"],U4=At(()=>d("div",{class:"dialog-form-item-unit"},"%",-1)),z4=At(()=>d("hr",null,null,-1)),G4={class:"section"},W4={class:"section-title"},V4={class:"dialog-form-area dialog-form-warning"},j4={key:0,class:"dialog-form-note"},K4={key:1,class:"dialog-form-note"},q4={key:2,class:"dialog-form-note"},Y4={key:3,class:"dialog-form-note"},X4={class:"dialog-form-item"},J4={class:"dialog-form-item-label-wide"},Q4=["checked"],Z4={class:"dialog-form-item"},e2={class:"dialog-form-item-label-wide"},t2=["checked"],i2={class:"dialog-form-item"},n2={class:"dialog-form-item-label-wide"},s2=["checked"],o2={class:"dialog-form-item"},r2={class:"dialog-form-item-label-wide"},a2=["value"],l2=["value"],c2=["value"],u2=["value"],h2=["value"],d2={class:"dialog-main-buttons"};function f2(e,t,i,n,s,o){return x(),N("div",null,[d("dialog",LM,[d("div",BM,I(e.t.appSettings),1),d("div",DM,[d("div",FM,[d("div",$M,I(e.t.view),1),HM,d("div",UM,[d("div",zM,I(e.t.language),1),d("select",{ref:"language",value:e.appSetting.language},[d("option",{value:e.Language.JA},"",8,WM),d("option",{value:e.Language.EN},"English",8,VM)],8,GM)]),d("div",jM,[d("div",KM,I(e.t.theme),1),d("select",{ref:"thema",value:e.appSetting.thema},[d("option",{value:e.Thema.STANDARD},I(e.t.standardGreen),9,YM),d("option",{value:e.Thema.CHERRY_BLOSSOM},I(e.t.cherryBlossom),9,XM),d("option",{value:e.Thema.AUTUMN},I(e.t.autumn),9,JM),d("option",{value:e.Thema.SNOW},I(e.t.snow),9,QM),d("option",{value:e.Thema.DARK},I(e.t.dark),9,ZM)],8,qM)]),d("div",ex,[d("div",tx,I(e.t.pieceImages),1),d("select",{ref:"pieceImage",value:e.appSetting.pieceImage},[d("option",{value:e.PieceImageType.HITOMOJI},I(e.t.singleKanjiPiece),9,nx),d("option",{value:e.PieceImageType.HITOMOJI_GOTHIC},I(e.t.singleKanjiGothicPiece),9,sx),d("option",{value:e.PieceImageType.HITOMOJI_DARK},I(e.t.singleKanjiDarkPiece),9,ox),d("option",{value:e.PieceImageType.HITOMOJI_GOTHIC_DARK},I(e.t.singleKanjiGothicDarkPiece),9,rx)],8,ix)]),d("div",ax,[d("div",lx,I(e.t.boardImage),1),d("select",{ref:"boardImage",value:e.appSetting.boardImage},[d("option",{value:e.BoardImageType.LIGHT},I(e.t.lightWoodyTexture),9,ux),d("option",{value:e.BoardImageType.WARM},I(e.t.warmWoodTexture),9,hx),d("option",{value:e.BoardImageType.RESIN},I(e.t.regin),9,dx),d("option",{value:e.BoardImageType.RESIN2},I(e.t.regin)+"2",9,fx),d("option",{value:e.BoardImageType.RESIN3},I(e.t.regin)+"3",9,px),d("option",{value:e.BoardImageType.DARK},I(e.t.dark),9,gx),d("option",{value:e.BoardImageType.GREEN},I(e.t.green),9,mx),d("option",{value:e.BoardImageType.CHERRY_BLOSSOM},I(e.t.cherryBlossom),9,bx)],8,cx)]),d("div",yx,[d("div",_x,I(e.t.displayFileAndRank),1),d("input",{ref:"displayBoardLabels",class:"toggle",checked:e.appSetting.boardLabelType!=e.BoardLabelType.NONE,type:"checkbox"},null,8,vx)]),d("div",Sx,[d("div",wx,I(e.t.tabViewStyle),1),d("select",{ref:"tabPaneType",value:e.appSetting.tabPaneType},[d("option",{value:e.TabPaneType.SINGLE},I(e.t.oneColumn),9,Ix),d("option",{value:e.TabPaneType.DOUBLE},I(e.t.twoColumns),9,Px)],8,Ex)])]),kx,d("div",Ax,[d("div",Cx,I(e.t.sounds),1),d("div",Tx,[d("div",Mx,I(e.t.pieceLoudness),1),d("input",{ref:"pieceVolume",value:e.appSetting.pieceVolume,type:"number",max:"100",min:"0"},null,8,xx),Rx]),d("div",Nx,[d("div",Ox,I(e.t.clockLoudness),1),d("input",{ref:"clockVolume",value:e.appSetting.clockVolume,type:"number",max:"100",min:"0"},null,8,Lx),Bx]),d("div",Dx,[d("div",Fx,I(e.t.clockPitch),1),d("input",{ref:"clockPitch",value:e.appSetting.clockPitch,type:"number",max:"880",min:"220"},null,8,$x),d("div",Hx," Hz ("+I(e.t.between(220,880))+") ",1)]),d("div",Ux,[d("div",zx,I(e.t.clockSoundTarget),1),d("select",{ref:"clockSoundTarget",value:e.appSetting.clockSoundTarget},[d("option",Wx,I(e.t.anyTurn),1),d("option",Vx,I(e.t.onlyHumanTurn),1)],8,Gx)])]),jx,d("div",Kx,[d("div",qx,I(e.t.file),1),d("div",Yx,[d("div",Xx,I(e.t.newlineCharacter),1),d("select",{ref:"returnCode",value:e.returnCodeToName[e.appSetting.returnCode]},[Qx,Zx,d("option",e4,"CR ("+I(e.t.old90sMac)+")",1)],8,Jx)]),d("div",t4,[d("div",i4,I(e.t.autoSavingDirectory),1),d("input",{ref:"autoSaveDirectory",class:"directory",value:e.appSetting.autoSaveDirectory,type:"text"},null,8,n4),d("button",{class:"dialog-button",onClick:t[0]||(t[0]=(...r)=>e.selectAutoSaveDirectory&&e.selectAutoSaveDirectory(...r))},I(e.t.select),1)])]),s4,d("div",o4,[d("div",r4,I(e.t.usiProtocol),1),d("div",a4,[d("div",l4,I(e.t.translateOptionName),1),d("input",{ref:"translateEngineOptionName",class:"toggle",checked:e.appSetting.translateEngineOptionName,type:"checkbox"},null,8,c4)]),d("div",u4,[d("div",h4,I(e.t.maxStartupTime),1),d("input",{ref:"engineTimeoutSeconds",value:e.appSetting.engineTimeoutSeconds,type:"number",max:"300",min:"1"},null,8,d4),d("div",f4,I(e.t.secondsSuffix)+" ("+I(e.t.between(1,300))+") ",1)])]),p4,d("div",g4,[d("div",m4,I(e.t.evaluationAndEstimatedWinRate),1),d("div",b4,[d("div",y4,I(e.t.signOfEvaluation),1),d("select",{ref:"evaluationViewFrom",value:e.appSetting.evaluationViewFrom},[d("option",{value:e.EvaluationViewFrom.EACH},I(e.t.swapEachTurnChange),9,v4),d("option",{value:e.EvaluationViewFrom.BLACK},I(e.t.alwaysSenteIsPositive),9,S4)],8,_4)]),d("div",w4,[d("div",E4,I(e.t.winRateCoefficient),1),d("input",{ref:"coefficientInSigmoid",value:e.appSetting.coefficientInSigmoid,type:"number",max:"10000",min:"1"},null,8,I4),d("div",P4," ("+I(e.t.recommended)+": "+I(e.t.between(600,1500))+") ",1)]),d("div",k4,[A4,d("input",{ref:"badMoveLevelThreshold1",value:e.appSetting.badMoveLevelThreshold1,type:"number",max:"100",min:"0"},null,8,C4),T4]),d("div",M4,[x4,d("input",{ref:"badMoveLevelThreshold2",value:e.appSetting.badMoveLevelThreshold2,type:"number",max:"100",min:"0"},null,8,R4),N4]),d("div",O4,[L4,d("input",{ref:"badMoveLevelThreshold3",value:e.appSetting.badMoveLevelThreshold3,type:"number",max:"100",min:"0"},null,8,B4),D4]),d("div",F4,[$4,d("input",{ref:"badMoveLevelThreshold4",value:e.appSetting.badMoveLevelThreshold4,type:"number",max:"100",min:"0"},null,8,H4),U4])]),z4,d("div",G4,[d("div",W4,I(e.t.forDevelopers),1),d("div",V4,[e.isNative?se("",!0):(x(),N("div",j4,I(e.t.inBrowserLogsOutputToConsoleAndIgnoreThisSetting),1)),e.isNative?(x(),N("div",K4,I(e.t.shouldRestartToApplyLogSettings),1)):se("",!0),e.isNative?(x(),N("div",q4,I(e.t.canOpenLogDirectoryFromMenu),1)):se("",!0),e.isNative?(x(),N("div",Y4,I(e.t.hasNoOldLogCleanUpFeature),1)):se("",!0)]),d("div",X4,[d("div",J4,I(e.t.enableAppLog),1),d("input",{ref:"enableAppLog",class:"toggle",checked:e.appSetting.enableAppLog,type:"checkbox"},null,8,Q4)]),d("div",Z4,[d("div",e2,I(e.t.enableUSILog),1),d("input",{ref:"enableUSILog",class:"toggle",checked:e.appSetting.enableUSILog,type:"checkbox"},null,8,t2)]),d("div",i2,[d("div",n2,I(e.t.enableCSALog),1),d("input",{ref:"enableCSALog",class:"toggle",checked:e.appSetting.enableCSALog,type:"checkbox"},null,8,s2)]),d("div",o2,[d("div",r2,I(e.t.logLevel),1),d("select",{ref:"logLevel",value:e.appSetting.logLevel},[d("option",{value:e.LogLevel.DEBUG},"DEBUG",8,l2),d("option",{value:e.LogLevel.INFO},"INFO",8,c2),d("option",{value:e.LogLevel.WARN},"WARN",8,u2),d("option",{value:e.LogLevel.ERROR},"ERROR",8,h2)],8,a2)])])]),d("div",d2,[d("button",{class:"dialog-button","data-hotkey":"Enter",autofocus:"",onClick:t[1]||(t[1]=r=>e.saveAndClose())},I(e.t.saveAndClose),1),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[2]||(t[2]=r=>e.cancel())},I(e.t.cancel),1)])],512)])}const p2=je(OM,[["render",f2],["__scopeId","data-v-1651e1d1"]]),g2=Ve({name:"PasteDialog",setup(){const e=tt(),t=z(null),i=z(null);return e.retainBussyState(),et(async()=>{try{wt(t.value),Yt(t.value),gr()&&(i.value.value=await navigator.clipboard.readText())}finally{e.releaseBussyState()}}),Dt(()=>{Xt(t.value)}),{t:G,dialog:t,textarea:i,onOk:()=>{const o=i.value.value;if(!o){e.pushError(new Error(G.emptyRecordInput));return}e.closeModalDialog(),e.pasteRecord(o)},onCancel:()=>{e.closeModalDialog()},isNative:gr()}}});const m2={ref:"dialog"},b2={ref:"content"},y2={class:"dialog-form-area"},_2={class:"message"},v2={class:"message"},S2={key:0,class:"message"},w2={key:1,class:"message"},E2={ref:"textarea"},I2={class:"dialog-main-buttons"};function P2(e,t,i,n,s,o){return x(),N("div",null,[d("dialog",m2,[d("div",b2,[d("div",y2,[d("div",_2,I(e.t.importingFollowingRecordOrPosition),1),d("div",v2,I(e.t.supportsKIFCSAUSI),1),e.isNative?se("",!0):(x(),N("div",S2,I(e.t.plesePasteRecordIntoTextArea),1)),e.isNative?se("",!0):(x(),N("div",w2,I(e.t.desktopVersionPastesAutomatically),1)),d("textarea",E2,null,512)])],512),d("div",I2,[d("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:t[0]||(t[0]=(...r)=>e.onOk&&e.onOk(...r))},I(e.t.import),1),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[1]||(t[1]=(...r)=>e.onCancel&&e.onCancel(...r))},I(e.t.cancel),1)])],512)])}const k2=je(g2,[["render",P2],["__scopeId","data-v-ab4a203e"]]),A2=Ve({name:"BussyMessage",components:{ButtonIcon:kt},setup(){const e=z(null);return et(()=>{wt(e.value)}),{t:G,dialog:e,Icon:Qe}}});const C2={ref:"dialog",class:"bussy"},T2={class:"message-box"},M2={class:"message"};function x2(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",null,[d("dialog",C2,[d("div",T2,[X(r,{class:"icon",icon:e.Icon.BUSSY},null,8,["icon"]),d("div",M2,I(e.t.processingPleaseWait),1)])],512)])}const R2=je(A2,[["render",x2],["__scopeId","data-v-69aad45c"]]),N2=Ve({name:"InfoMessage",components:{ButtonIcon:kt},setup(){const e=tt(),t=z(null),i=()=>{e.confirmationOk()},n=()=>{e.confirmationCancel()};return et(()=>{wt(t.value,n),Yt(t.value)}),Dt(()=>{Xt(t.value)}),{t:G,dialog:t,store:e,onOk:i,onClose:n,Icon:Qe}}});const O2={ref:"dialog",class:"confirm"},L2={class:"message-box"},B2={class:"message"},D2={class:"dialog-main-buttons"};function F2(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",null,[d("dialog",O2,[d("div",L2,[X(r,{class:"icon",icon:e.Icon.QUESTION},null,8,["icon"]),d("div",B2,I(e.store.confirmation),1)]),d("div",D2,[d("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:t[0]||(t[0]=a=>e.onOk())}," OK "),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[1]||(t[1]=a=>e.onClose())},I(e.t.cancel),1)])],512)])}const $2=je(N2,[["render",F2],["__scopeId","data-v-b8fd7926"]]),H2=Ve({name:"InfoMessage",components:{ButtonIcon:kt},setup(){const e=tt(),t=z(null);return et(()=>{wt(t.value),Yt(t.value)}),Dt(()=>{Xt(t.value)}),{t:G,dialog:t,store:e,onClose:()=>{e.dequeueMessage()},Icon:Qe}}});const U2={ref:"dialog",class:"info"},z2={class:"message-box"},G2={class:"message"},W2={key:0,class:"list"},V2={class:"dialog-main-buttons"};function j2(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",null,[d("dialog",U2,[d("div",z2,[X(r,{class:"icon",icon:e.Icon.INFO},null,8,["icon"]),d("div",G2,I(e.store.message.text),1)]),(x(!0),N(Ie,null,He(e.store.message.attachments,(a,l)=>(x(),N("div",{key:l,class:"attachment"},[a.type==="list"?(x(),N("ul",W2,[(x(!0),N(Ie,null,He(a.items,(c,u)=>(x(),N("li",{key:u,class:"list-item"},[io(I(c.text)+" ",1),d("ul",null,[(x(!0),N(Ie,null,He(c.children,(h,p)=>(x(),N("li",{key:p,class:"list-child-item"},I(h),1))),128))])]))),128))])):se("",!0)]))),128)),d("div",V2,[d("button",{autofocus:"","data-hotkey":"Escape",onClick:t[0]||(t[0]=a=>e.onClose())},I(e.t.close),1)])],512)])}const K2=je(H2,[["render",j2],["__scopeId","data-v-1ee5da51"]]),q2=Ve({name:"ErrorMessage",components:{ButtonIcon:kt},setup(){const e=tt(),t=z(null);return et(()=>{wt(t.value),Yt(t.value)}),Dt(()=>{Xt(t.value)}),{t:G,dialog:t,store:e,onClose:()=>{e.clearErrors()},Icon:Qe}}});const Y2={ref:"dialog",class:"error"},X2={class:"message-box"},J2={class:"items"},Q2={class:"notice"},Z2={class:"index"},eR={key:0},tR={class:"message"},iR={class:"dialog-main-buttons"};function nR(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",null,[d("dialog",Y2,[d("div",X2,[X(r,{class:"icon",icon:e.Icon.ERROR},null,8,["icon"]),d("div",J2,[d("div",Q2,I(e.t.errorsOccurred(e.store.errors.length)),1),(x(!0),N(Ie,null,He(e.store.errors,(a,l)=>(x(),N("div",{key:l,class:"item"},[d("p",Z2,[io(I(l+1)+" ",1),a.count>=2?(x(),N("span",eR,"("+I(a.count)+" )",1)):se("",!0)]),d("p",tR,I(a.message),1)]))),128))])]),d("div",iR,[d("button",{autofocus:"","data-hotkey":"Escape",onClick:t[0]||(t[0]=a=>e.onClose())},I(e.t.close),1)])],512)])}const sR=je(q2,[["render",nR],["__scopeId","data-v-eb107e17"]]),oR=Ve({name:"ResearchDialog",components:{PlayerSelector:Qr},setup(){const e=tt(),t=z(null),i=z(null),n=z(null),s=z(null),o=z(null),r=z(null),a=z(null),l=z(fr()),c=z(new zi),u=z("");e.retainBussyState(),et(async()=>{var _;wt(t.value),Yt(t.value);try{l.value=await pe.loadAnalysisSetting(),c.value=await pe.loadUSIEngineSetting(),u.value=((_=l.value.usi)==null?void 0:_.uri)||""}catch(E){e.pushError(E),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Dt(()=>{Xt(t.value)});const h=()=>{n.value.disabled=!i.value.checked,o.value.disabled=!s.value.checked},p=()=>{if(!u.value||!c.value.hasEngine(u.value)){e.pushError("");return}const E={usi:c.value.getEngine(u.value),startCriteria:{enableNumber:i.value.checked,number:pt(n.value)},endCriteria:{enableNumber:s.value.checked,number:pt(o.value)},perMoveCriteria:{maxSeconds:pt(r.value)},commentBehavior:a.value.value};e.startAnalysis(E)},g=()=>{e.closeModalDialog()},y=async _=>{c.value=_},b=_=>{u.value=_},v=ke(()=>({enableStartNumber:l.value.startCriteria.enableNumber,startNumber:l.value.startCriteria.number,enableEndNumber:l.value.endCriteria.enableNumber,endNumber:l.value.endCriteria.number,maxSecondsPerMove:l.value.perMoveCriteria.maxSeconds,commentBehavior:l.value.commentBehavior}));return{t:G,CommentBehavior:Di,dialog:t,engineSettings:c,engineURI:u,enableStartNumber:i,startNumber:n,enableEndNumber:s,endNumber:o,maxSecondsPerMove:r,commentBehavior:a,defaultValues:v,updateToggle:h,onStart:p,onCancel:g,onUpdatePlayerSetting:y,onSelectPlayer:b}}});const rR={ref:"dialog",class:"root"},aR={class:"dialog-title"},lR={class:"dialog-form-area"},cR={class:"dialog-form-area"},uR={class:"dialog-form-item"},hR=["checked"],dR={class:"dialog-form-item-unit"},fR=["disabled","value"],pR={class:"dialog-form-item-unit"},gR={class:"dialog-form-area"},mR={class:"dialog-form-item"},bR=["checked"],yR={class:"dialog-form-item-unit"},_R=["disabled","value"],vR={class:"dialog-form-item-unit"},SR={class:"dialog-form-area"},wR={class:"dialog-form-item"},ER={class:"dialog-form-item-unit"},IR=["value"],PR={class:"dialog-form-item-unit"},kR={class:"dialog-form-area"},AR={class:"dialog-form-item"},CR={class:"dialog-form-item-label-wide"},TR=["value"],MR=["value"],xR=["value"],RR=["value"],NR=["value"],OR={class:"dialog-main-buttons"};function LR(e,t,i,n,s,o){const r=ge("PlayerSelector");return x(),N("div",null,[d("dialog",rR,[d("div",aR,I(e.t.recordAnalysis),1),d("div",lR,[d("div",null,I(e.t.searchEngine),1),X(r,{"player-uri":e.engineURI,"engine-settings":e.engineSettings,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:e.onUpdatePlayerSetting,onSelectPlayer:e.onSelectPlayer},null,8,["player-uri","engine-settings","onUpdateEngineSetting","onSelectPlayer"])]),d("div",cR,[d("div",null,I(e.t.startCriteria),1),d("div",uR,[d("input",{ref:"enableStartNumber",class:"toggle",type:"checkbox",checked:e.defaultValues.enableStartNumber,onChange:t[0]||(t[0]=(...a)=>e.updateToggle&&e.updateToggle(...a))},null,40,hR),d("div",dR,I(e.t.fromPrefix),1),d("input",{ref:"startNumber",class:"small",type:"number",min:"1",step:"1",disabled:!e.defaultValues.enableStartNumber,value:e.defaultValues.startNumber},null,8,fR),d("div",pR,I(e.t.plySuffix)+I(e.t.fromSuffix),1)])]),d("div",gR,[d("div",null,I(e.t.endCriteria),1),d("div",mR,[d("input",{ref:"enableEndNumber",class:"toggle",type:"checkbox",checked:e.defaultValues.enableEndNumber,onChange:t[1]||(t[1]=(...a)=>e.updateToggle&&e.updateToggle(...a))},null,40,bR),d("div",yR,I(e.t.toPrefix),1),d("input",{ref:"endNumber",class:"small",type:"number",min:"1",step:"1",disabled:!e.defaultValues.enableEndNumber,value:e.defaultValues.endNumber},null,8,_R),d("div",vR,I(e.t.plySuffix)+I(e.t.toSuffix),1)])]),d("div",SR,[d("div",null,I(e.t.endCriteria1Move),1),d("div",wR,[d("div",ER,I(e.t.toPrefix),1),d("input",{ref:"maxSecondsPerMove",class:"small",type:"number",min:"0",step:"1",value:e.defaultValues.maxSecondsPerMove},null,8,IR),d("div",PR,I(e.t.secondsSuffix)+I(e.t.toSuffix),1)])]),d("div",kR,[d("div",null,I(e.t.outputSettings),1),d("div",AR,[d("div",CR,I(e.t.moveComments),1),d("select",{ref:"commentBehavior",size:"1",value:e.defaultValues.commentBehavior},[d("option",{value:e.CommentBehavior.NONE},I(e.t.noOutputs),9,MR),d("option",{value:e.CommentBehavior.INSERT},I(e.t.insertCommentToTop),9,xR),d("option",{value:e.CommentBehavior.APPEND},I(e.t.appendCommentToBottom),9,RR),d("option",{value:e.CommentBehavior.OVERWRITE},I(e.t.overwrite),9,NR)],8,TR)])]),d("div",OR,[d("button",{"data-hotkey":"Enter",autofocus:"",class:"dialog-button",onClick:t[2]||(t[2]=a=>e.onStart())},"  "),d("button",{class:"dialog-button","data-hotkey":"Escape",onClick:t[3]||(t[3]=a=>e.onCancel())},"  ")])],512)])}const BR=je(oR,[["render",LR],["__scopeId","data-v-c3584c0d"]]),DR=Ve({name:"CSAGameReadyDialog",components:{ButtonIcon:kt},setup(){const e=tt(),t=z(null),i=z(0);let n=0;return et(()=>{wt(t.value),Yt(t.value)}),Dt(()=>{Xt(t.value),window.clearInterval(n)}),Qi(()=>e.csaGameState,o=>{window.clearInterval(n),o===Zi.LOGIN_RETRY_INTERVAL&&(i.value=Of,n=window.setInterval(()=>{i.value--},1e3))}),{dialog:t,Icon:Qe,store:e,CSAGameState:Zi,remainingSeconds:i,onLogout:()=>{e.cancelCSAGame()}}}});const FR={ref:"dialog",class:"bussy"},$R={class:"message-box"},HR={class:"message"},UR={key:0},zR={key:1},GR={key:2},WR={key:0,class:"dialog-main-buttons"};function VR(e,t,i,n,s,o){const r=ge("ButtonIcon");return x(),N("div",null,[d("dialog",FR,[d("div",$R,[X(r,{class:"icon",icon:e.Icon.BUSSY},null,8,["icon"]),d("div",HR,[e.store.csaGameState===e.CSAGameState.READY?(x(),N("span",UR,"  ")):se("",!0),e.store.csaGameState===e.CSAGameState.LOGIN_RETRY_INTERVAL?(x(),N("span",zR," CSA"+I(e.remainingSeconds)+" ",1)):se("",!0),e.store.csaGameState===e.CSAGameState.WAITING_LOGIN?(x(),N("span",GR," CSA ")):se("",!0)])]),e.store.csaGameState===e.CSAGameState.READY||e.store.csaGameState===e.CSAGameState.LOGIN_RETRY_INTERVAL?(x(),N("div",WR,[d("button",{autofocus:"","data-hotkey":"Escape",onClick:t[0]||(t[0]=a=>e.onLogout())},"  ")])):se("",!0)],512)])}const jR=je(DR,[["render",VR],["__scopeId","data-v-89d7c56f"]]),KR=Ve({name:"App",components:{StandardLayout:f8,GameDialog:vC,CSAGameDialog:CT,ResearchDialog:DT,USIEngineManagementDialog:ZT,ExportPositionImageDialog:xM,AppSettingDialog:p2,PasteDialog:k2,BussyMessage:R2,ConfirmDialog:$2,InfoMessage:K2,ErrorMessage:sR,AnalysisDialog:BR,CSAGameReadyDialog:jR},setup(){const e=Fe(),t=tt(),i=ke(()=>({game:t.appState===V.GAME_DIALOG,csaGame:t.appState===V.CSA_GAME_DIALOG,research:t.appState===V.RESEARCH_DIALOG,analysis:t.appState===V.ANALYSIS_DIALOG,usiEngineSetting:t.appState===V.USI_ENGINE_SETTING_DIALOG,exportPositionImage:t.appState===V.EXPORT_POSITION_IMAGE_DIALOG,appSetting:t.isAppSettingDialogVisible,paste:t.appState===V.PASTE_DIALOG,bussy:t.isBussy,confirm:t.confirmation!==void 0,csaGameReady:t.csaGameState===Zi.WAITING_LOGIN||t.csaGameState===Zi.READY||t.csaGameState===Zi.LOGIN_RETRY_INTERVAL}));return et(()=>{const n=document.getElementsByTagName("body")[0];n.addEventListener("copy",s=>{t.copyRecordKIF(),s.preventDefault()}),n.addEventListener("paste",s=>{t.showPasteDialog(),s.preventDefault()}),n.addEventListener("dragover",s=>{s.preventDefault()}),n.addEventListener("drop",s=>{if(s.dataTransfer&&s.dataTransfer.files[0]){const o=s.dataTransfer.files[0].path;t.openRecord(o)}s.preventDefault()})}),{appSetting:e,store:t,dialogVisibilities:i}}});function qR(e,t,i,n,s,o){const r=ge("StandardLayout"),a=ge("GameDialog"),l=ge("CSAGameDialog"),c=ge("ResearchDialog"),u=ge("AnalysisDialog"),h=ge("USIEngineManagementDialog"),p=ge("ExportPositionImageDialog"),g=ge("AppSettingDialog"),y=ge("PasteDialog"),b=ge("BussyMessage"),v=ge("ConfirmDialog"),_=ge("CSAGameReadyDialog"),E=ge("InfoMessage"),w=ge("ErrorMessage");return x(),N("div",{class:yt(["root",e.appSetting.thema])},[X(r,{class:"main"}),e.dialogVisibilities.game?(x(),$e(a,{key:0})):se("",!0),e.dialogVisibilities.csaGame?(x(),$e(l,{key:1})):se("",!0),e.dialogVisibilities.research?(x(),$e(c,{key:2})):se("",!0),e.dialogVisibilities.analysis?(x(),$e(u,{key:3})):se("",!0),e.dialogVisibilities.usiEngineSetting?(x(),$e(h,{key:4})):se("",!0),e.dialogVisibilities.exportPositionImage?(x(),$e(p,{key:5})):se("",!0),e.dialogVisibilities.appSetting?(x(),$e(g,{key:6})):se("",!0),e.dialogVisibilities.paste?(x(),$e(y,{key:7})):se("",!0),e.dialogVisibilities.bussy?(x(),$e(b,{key:8})):se("",!0),e.dialogVisibilities.confirm?(x(),$e(v,{key:9})):se("",!0),e.dialogVisibilities.csaGameReady?(x(),$e(_,{key:10})):se("",!0),e.store.hasMessage?(x(),$e(E,{key:11})):se("",!0),e.store.hasError?(x(),$e(w,{key:12})):se("",!0)],2)}const YR=je(KR,[["render",qR],["__scopeId","data-v-b1b0bc73"]]);var ve=(e=>(e.NEW_RECORD="newRecord",e.OPEN_RECORD="openRecord",e.SAVE_RECORD="saveRecord",e.SAVE_RECORD_AS="saveRecordAs",e.EXPORT_POSITION_IMAGE="exportPositionImage",e.COPY_RECORD="copyRecord",e.COPY_RECORD_CSA="copyRecordCsa",e.COPY_RECORD_USI_BEFORE="copyRecordUsiBefore",e.COPY_RECORD_USI_ALL="copyRecordUsiAll",e.COPY_BOARD_SFEN="copyRecordSfen",e.PASTE_RECORD="pasteRecord",e.INSERT_INTERRUPT="insertInterrupt",e.INSERT_RESIGN="insertResign",e.INSERT_DRAW="insertDraw",e.INSERT_IMPASS="insertImpass",e.INSERT_REPETITION_DRAW="insertRepetitionDraw",e.INSERT_MATE="insertMate",e.INSERT_TIMEOUT="insertTimeout",e.INSERT_FOUL_WIN="insertFoulWin",e.INSERT_FOUL_LOSE="insertFoulLose",e.INSERT_ENTERING_OF_KING="insertEnteringOfKing",e.INSERT_WIN_BY_DEFAULT="insertWinByDefault",e.INSERT_LOSE_BY_DEFAULT="insertLossByDefault",e.REMOVE_CURRENT_MOVE="remvoeCurrentMove",e.START_POSITION_EDITING="startPositionEditing",e.END_POSITION_EDITING="endPositionEditing",e.CHANGE_TURN="changeTurn",e.INIT_POSITION_STANDARD="initPositionStandard",e.INIT_POSITION_HANDICAP_LANCE="initPositionHandicapLance",e.INIT_POSITION_HANDICAP_RIGHT_LANCE="initPositionHandicapRightLance",e.INIT_POSITION_HANDICAP_BISHOP="initPositionHandicapBishop",e.INIT_POSITION_HANDICAP_ROOK="initPositionHandicapRook",e.INIT_POSITION_HANDICAP_ROOK_LANCE="initPositionHandicapRookLance",e.INIT_POSITION_HANDICAP_2PIECES="initPositionHandicap2Pieces",e.INIT_POSITION_HANDICAP_4PIECES="initPositionHandicap4Pieces",e.INIT_POSITION_HANDICAP_6PIECES="initPositionHandicap6Pieces",e.INIT_POSITION_HANDICAP_8PIECES="initPositionHandicap8Pieces",e.INIT_POSITION_TSUME_SHOGI="initPositionTsumeShogi",e.INIT_POSITION_TSUME_SHOGI_2KINGS="initPositionTsumeShogi2Kings",e.START_RESEARCH="startResearch",e.STOP_RESEARCH="stopResearch",e.START_ANALYSIS="startAnalysis",e.STOP_ANALYSIS="stopAnalysis",e.START_GAME="startGame",e.START_CSA_GAME="startCSAGame",e.STOP_GAME="stopGame",e.RESIGN="resign",e.WIN="win",e.LOGOUT="logout",e.FLIP_BOARD="flipBoard",e.APP_SETTING_DIALOG="appSetting",e.USI_ENGINE_SETTING_DIALOG="usiEngineSetting",e))(ve||{});function XR(){const e=tt();ze.onSendError(t=>{e.pushError(t)}),ze.onMenuEvent(t=>{if(!e.isBussy)switch(t){case ve.NEW_RECORD:e.resetRecord();break;case ve.OPEN_RECORD:e.openRecord();break;case ve.SAVE_RECORD:e.saveRecord({overwrite:!0});break;case ve.SAVE_RECORD_AS:e.saveRecord();break;case ve.EXPORT_POSITION_IMAGE:e.showExportBoardImageDialog();break;case ve.COPY_RECORD:e.copyRecordKIF();break;case ve.COPY_RECORD_CSA:e.copyRecordCSA();break;case ve.COPY_RECORD_USI_BEFORE:e.copyRecordUSIBefore();break;case ve.COPY_RECORD_USI_ALL:e.copyRecordUSIAll();break;case ve.COPY_BOARD_SFEN:e.copyBoardSFEN();break;case ve.PASTE_RECORD:e.showPasteDialog();break;case ve.INSERT_INTERRUPT:e.insertSpecialMove(ce.INTERRUPT);break;case ve.INSERT_RESIGN:e.insertSpecialMove(ce.RESIGN);break;case ve.INSERT_DRAW:e.insertSpecialMove(ce.DRAW);break;case ve.INSERT_IMPASS:e.insertSpecialMove(ce.IMPASS);break;case ve.INSERT_REPETITION_DRAW:e.insertSpecialMove(ce.REPETITION_DRAW);break;case ve.INSERT_MATE:e.insertSpecialMove(ce.MATE);break;case ve.INSERT_TIMEOUT:e.insertSpecialMove(ce.TIMEOUT);break;case ve.INSERT_FOUL_WIN:e.insertSpecialMove(ce.FOUL_WIN);break;case ve.INSERT_FOUL_LOSE:e.insertSpecialMove(ce.FOUL_LOSE);break;case ve.INSERT_ENTERING_OF_KING:e.insertSpecialMove(ce.ENTERING_OF_KING);break;case ve.INSERT_WIN_BY_DEFAULT:e.insertSpecialMove(ce.WIN_BY_DEFAULT);break;case ve.INSERT_LOSE_BY_DEFAULT:e.insertSpecialMove(ce.LOSE_BY_DEFAULT);break;case ve.REMOVE_CURRENT_MOVE:e.removeCurrentMove();break;case ve.START_POSITION_EDITING:e.startPositionEditing();break;case ve.END_POSITION_EDITING:e.endPositionEditing();break;case ve.CHANGE_TURN:e.changeTurn();break;case ve.INIT_POSITION_STANDARD:e.initializePosition(we.STANDARD);break;case ve.INIT_POSITION_HANDICAP_LANCE:e.initializePosition(we.HANDICAP_LANCE);break;case ve.INIT_POSITION_HANDICAP_RIGHT_LANCE:e.initializePosition(we.HANDICAP_RIGHT_LANCE);break;case ve.INIT_POSITION_HANDICAP_BISHOP:e.initializePosition(we.HANDICAP_BISHOP);break;case ve.INIT_POSITION_HANDICAP_ROOK:e.initializePosition(we.HANDICAP_ROOK);break;case ve.INIT_POSITION_HANDICAP_ROOK_LANCE:e.initializePosition(we.HANDICAP_ROOK_LANCE);break;case ve.INIT_POSITION_HANDICAP_2PIECES:e.initializePosition(we.HANDICAP_2PIECES);break;case ve.INIT_POSITION_HANDICAP_4PIECES:e.initializePosition(we.HANDICAP_4PIECES);break;case ve.INIT_POSITION_HANDICAP_6PIECES:e.initializePosition(we.HANDICAP_6PIECES);break;case ve.INIT_POSITION_HANDICAP_8PIECES:e.initializePosition(we.HANDICAP_8PIECES);break;case ve.INIT_POSITION_TSUME_SHOGI:e.initializePosition(we.TSUME_SHOGI);break;case ve.INIT_POSITION_TSUME_SHOGI_2KINGS:e.initializePosition(we.TSUME_SHOGI_2KINGS);break;case ve.START_GAME:e.showGameDialog();break;case ve.START_CSA_GAME:e.showCSAGameDialog();break;case ve.STOP_GAME:e.stopGame();break;case ve.RESIGN:qn.resign();break;case ve.WIN:qn.win();break;case ve.LOGOUT:e.cancelCSAGame();break;case ve.START_RESEARCH:e.showResearchDialog();break;case ve.STOP_RESEARCH:e.stopResearch();break;case ve.START_ANALYSIS:e.showAnalysisDialog();break;case ve.STOP_ANALYSIS:e.stopAnalysis();break;case ve.FLIP_BOARD:Fe().flipBoard();break;case ve.APP_SETTING_DIALOG:e.showAppSettingDialog();break;case ve.USI_ENGINE_SETTING_DIALOG:e.showUsiEngineManagementDialog();break}}),ze.onUSIBestMove((t,i,n,s)=>{iy(t,i,n,s)}),ze.onUSIInfo((t,i,n,s)=>{const o=JSON.parse(s);e.updateUSIInfo(t,i,n,o),Au(t,i,o)}),ze.onUSIPonderInfo((t,i,n,s)=>{const o=JSON.parse(s);e.updateUSIPonderInfo(t,i,n,o),Au(t,i,o)}),ze.onCSAGameSummary((t,i)=>{Ey(t,JSON.parse(i))}),ze.onCSAReject(t=>{Iy(t)}),ze.onCSAStart((t,i)=>{Py(t,JSON.parse(i))}),ze.onCSAMove((t,i,n)=>{ky(t,i,JSON.parse(n))}),ze.onCSAGameResult((t,i,n)=>{Ay(t,i,n)}),ze.onCSAClose(t=>{Cy(t)}),Qi(()=>[e.appState,e.isBussy],([t,i])=>{ze.updateAppState(t,i)}),ze.updateAppState(e.appState,e.isBussy)}pe.log(gt.INFO,`start renderer process: APP_VERSION=${kf.appVersion}`);Li.register(...Bk);XR();function Hp(e){if(!document)return;const t=G.electronShogi,i=kf.appVersion;e?document.title=`${t} Version ${i} - ${e}`:document.title=`${t} Version ${i}`}const Mo=tt().addListener("changeFilePath",Hp);Promise.allSettled([Fe().loadAppSetting().catch(e=>{Mo.pushError(new Error(": "+e))}),pe.getRecordPathFromProcArg().then(e=>{e&&Mo.openRecord(e)}).catch(e=>{Mo.pushError(new Error(": "+e))})]).finally(()=>{const e=Fe().language;pe.log(gt.INFO,`set language: ${e}`),Eb(e),Hp(Mo.recordFilePath),pe.log(gt.INFO,"mount app"),c0(YR).mount("#app")});
