var Xp=Object.defineProperty;var Jp=(t,e,i)=>e in t?Xp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var L=(t,e,i)=>(Jp(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();function Nl(t,e){const i=Object.create(null),n=t.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return e?s=>!!i[s.toLowerCase()]:s=>!!i[s]}function Ee(t){if(Oe(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=Pt(n)?tg(n):Ee(n);if(s)for(const o in s)e[o]=s[o]}return e}else{if(Pt(t))return t;if(pt(t))return t}}const Qp=/;(?![^(]*\))/g,Zp=/:([^]+)/,eg=/\/\*.*?\*\//gs;function tg(t){const e={};return t.replace(eg,"").split(Qp).forEach(i=>{if(i){const n=i.split(Zp);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function it(t){let e="";if(Pt(t))e=t;else if(Oe(t))for(let i=0;i<t.length;i++){const n=it(t[i]);n&&(e+=n+" ")}else if(pt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const ig="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ng=Nl(ig);function hd(t){return!!t||t===""}const P=t=>Pt(t)?t:t==null?"":Oe(t)||pt(t)&&(t.toString===gd||!Fe(t.toString))?JSON.stringify(t,dd,2):String(t),dd=(t,e)=>e&&e.__v_isRef?dd(t,e.value):Jn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,s])=>(i[`${n} =>`]=s,i),{})}:fd(e)?{[`Set(${e.size})`]:[...e.values()]}:pt(e)&&!Oe(e)&&!md(e)?String(e):e,ft={},Xn=[],Si=()=>{},sg=()=>!1,og=/^on[^a-z]/,Hr=t=>og.test(t),Ol=t=>t.startsWith("onUpdate:"),Ht=Object.assign,Ll=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},rg=Object.prototype.hasOwnProperty,Ke=(t,e)=>rg.call(t,e),Oe=Array.isArray,Jn=t=>$r(t)==="[object Map]",fd=t=>$r(t)==="[object Set]",Fe=t=>typeof t=="function",Pt=t=>typeof t=="string",Dl=t=>typeof t=="symbol",pt=t=>t!==null&&typeof t=="object",pd=t=>pt(t)&&Fe(t.then)&&Fe(t.catch),gd=Object.prototype.toString,$r=t=>gd.call(t),ag=t=>$r(t).slice(8,-1),md=t=>$r(t)==="[object Object]",Bl=t=>Pt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,zo=Nl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ur=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},lg=/-(\w)/g,os=Ur(t=>t.replace(lg,(e,i)=>i?i.toUpperCase():"")),cg=/\B([A-Z])/g,ds=Ur(t=>t.replace(cg,"-$1").toLowerCase()),_d=Ur(t=>t.charAt(0).toUpperCase()+t.slice(1)),oa=Ur(t=>t?`on${_d(t)}`:""),Vs=(t,e)=>!Object.is(t,e),ra=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},cr=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},ug=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let kc;const hg=()=>kc||(kc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let mi;class dg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=mi,!e&&mi&&(this.index=(mi.scopes||(mi.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const i=mi;try{return mi=this,e()}finally{mi=i}}}on(){mi=this}off(){mi=this.parent}stop(e){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function fg(t,e=mi){e&&e.active&&e.effects.push(t)}function pg(){return mi}const Fl=t=>{const e=new Set(t);return e.w=0,e.n=0,e},bd=t=>(t.w&un)>0,yd=t=>(t.n&un)>0,gg=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=un},mg=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const s=e[n];bd(s)&&!yd(s)?s.delete(t):e[i++]=s,s.w&=~un,s.n&=~un}e.length=i}},Wa=new WeakMap;let ws=0,un=1;const Va=30;let bi;const On=Symbol(""),ja=Symbol("");class Hl{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,fg(this,n)}run(){if(!this.active)return this.fn();let e=bi,i=rn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=bi,bi=this,rn=!0,un=1<<++ws,ws<=Va?gg(this):Ic(this),this.fn()}finally{ws<=Va&&mg(this),un=1<<--ws,bi=this.parent,rn=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){bi===this?this.deferStop=!0:this.active&&(Ic(this),this.onStop&&this.onStop(),this.active=!1)}}function Ic(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let rn=!0;const vd=[];function fs(){vd.push(rn),rn=!1}function ps(){const t=vd.pop();rn=t===void 0?!0:t}function Xt(t,e,i){if(rn&&bi){let n=Wa.get(t);n||Wa.set(t,n=new Map);let s=n.get(i);s||n.set(i,s=Fl()),Sd(s)}}function Sd(t,e){let i=!1;ws<=Va?yd(t)||(t.n|=un,i=!bd(t)):i=!t.has(bi),i&&(t.add(bi),bi.deps.push(t))}function qi(t,e,i,n,s,o){const r=Wa.get(t);if(!r)return;let a=[];if(e==="clear")a=[...r.values()];else if(i==="length"&&Oe(t)){const l=Number(n);r.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(i!==void 0&&a.push(r.get(i)),e){case"add":Oe(t)?Bl(i)&&a.push(r.get("length")):(a.push(r.get(On)),Jn(t)&&a.push(r.get(ja)));break;case"delete":Oe(t)||(a.push(r.get(On)),Jn(t)&&a.push(r.get(ja)));break;case"set":Jn(t)&&a.push(r.get(On));break}if(a.length===1)a[0]&&Ka(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Ka(Fl(l))}}function Ka(t,e){const i=Oe(t)?t:[...t];for(const n of i)n.computed&&Ac(n);for(const n of i)n.computed||Ac(n)}function Ac(t,e){(t!==bi||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const _g=Nl("__proto__,__v_isRef,__isVue"),wd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Dl)),bg=$l(),yg=$l(!1,!0),vg=$l(!0),Pc=Sg();function Sg(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const n=Ye(this);for(let o=0,r=this.length;o<r;o++)Xt(n,"get",o+"");const s=n[e](...i);return s===-1||s===!1?n[e](...i.map(Ye)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){fs();const n=Ye(this)[e].apply(this,i);return ps(),n}}),t}function wg(t){const e=Ye(this);return Xt(e,"has",t),e.hasOwnProperty(t)}function $l(t=!1,e=!1){return function(n,s,o){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&o===(t?e?Fg:Ad:e?Id:kd).get(n))return n;const r=Oe(n);if(!t){if(r&&Ke(Pc,s))return Reflect.get(Pc,s,o);if(s==="hasOwnProperty")return wg}const a=Reflect.get(n,s,o);return(Dl(s)?wd.has(s):_g(s))||(t||Xt(n,"get",s),e)?a:Bt(a)?r&&Bl(s)?a:a.value:pt(a)?t?Pd(a):xi(a):a}}const xg=xd(),Eg=xd(!0);function xd(t=!1){return function(i,n,s,o){let r=i[n];if(rs(r)&&Bt(r)&&!Bt(s))return!1;if(!t&&(!ur(s)&&!rs(s)&&(r=Ye(r),s=Ye(s)),!Oe(i)&&Bt(r)&&!Bt(s)))return r.value=s,!0;const a=Oe(i)&&Bl(n)?Number(n)<i.length:Ke(i,n),l=Reflect.set(i,n,s,o);return i===Ye(o)&&(a?Vs(s,r)&&qi(i,"set",n,s):qi(i,"add",n,s)),l}}function kg(t,e){const i=Ke(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&qi(t,"delete",e,void 0),n}function Ig(t,e){const i=Reflect.has(t,e);return(!Dl(e)||!wd.has(e))&&Xt(t,"has",e),i}function Ag(t){return Xt(t,"iterate",Oe(t)?"length":On),Reflect.ownKeys(t)}const Ed={get:bg,set:xg,deleteProperty:kg,has:Ig,ownKeys:Ag},Pg={get:vg,set(t,e){return!0},deleteProperty(t,e){return!0}},Cg=Ht({},Ed,{get:yg,set:Eg}),Ul=t=>t,zr=t=>Reflect.getPrototypeOf(t);function bo(t,e,i=!1,n=!1){t=t.__v_raw;const s=Ye(t),o=Ye(e);i||(e!==o&&Xt(s,"get",e),Xt(s,"get",o));const{has:r}=zr(s),a=n?Ul:i?Wl:js;if(r.call(s,e))return a(t.get(e));if(r.call(s,o))return a(t.get(o));t!==s&&t.get(e)}function yo(t,e=!1){const i=this.__v_raw,n=Ye(i),s=Ye(t);return e||(t!==s&&Xt(n,"has",t),Xt(n,"has",s)),t===s?i.has(t):i.has(t)||i.has(s)}function vo(t,e=!1){return t=t.__v_raw,!e&&Xt(Ye(t),"iterate",On),Reflect.get(t,"size",t)}function Cc(t){t=Ye(t);const e=Ye(this);return zr(e).has.call(e,t)||(e.add(t),qi(e,"add",t,t)),this}function Tc(t,e){e=Ye(e);const i=Ye(this),{has:n,get:s}=zr(i);let o=n.call(i,t);o||(t=Ye(t),o=n.call(i,t));const r=s.call(i,t);return i.set(t,e),o?Vs(e,r)&&qi(i,"set",t,e):qi(i,"add",t,e),this}function Mc(t){const e=Ye(this),{has:i,get:n}=zr(e);let s=i.call(e,t);s||(t=Ye(t),s=i.call(e,t)),n&&n.call(e,t);const o=e.delete(t);return s&&qi(e,"delete",t,void 0),o}function Rc(){const t=Ye(this),e=t.size!==0,i=t.clear();return e&&qi(t,"clear",void 0,void 0),i}function So(t,e){return function(n,s){const o=this,r=o.__v_raw,a=Ye(r),l=e?Ul:t?Wl:js;return!t&&Xt(a,"iterate",On),r.forEach((c,u)=>n.call(s,l(c),l(u),o))}}function wo(t,e,i){return function(...n){const s=this.__v_raw,o=Ye(s),r=Jn(o),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,c=s[t](...n),u=i?Ul:e?Wl:js;return!e&&Xt(o,"iterate",l?ja:On),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Qi(t){return function(...e){return t==="delete"?!1:this}}function Tg(){const t={get(o){return bo(this,o)},get size(){return vo(this)},has:yo,add:Cc,set:Tc,delete:Mc,clear:Rc,forEach:So(!1,!1)},e={get(o){return bo(this,o,!1,!0)},get size(){return vo(this)},has:yo,add:Cc,set:Tc,delete:Mc,clear:Rc,forEach:So(!1,!0)},i={get(o){return bo(this,o,!0)},get size(){return vo(this,!0)},has(o){return yo.call(this,o,!0)},add:Qi("add"),set:Qi("set"),delete:Qi("delete"),clear:Qi("clear"),forEach:So(!0,!1)},n={get(o){return bo(this,o,!0,!0)},get size(){return vo(this,!0)},has(o){return yo.call(this,o,!0)},add:Qi("add"),set:Qi("set"),delete:Qi("delete"),clear:Qi("clear"),forEach:So(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=wo(o,!1,!1),i[o]=wo(o,!0,!1),e[o]=wo(o,!1,!0),n[o]=wo(o,!0,!0)}),[t,i,e,n]}const[Mg,Rg,Ng,Og]=Tg();function zl(t,e){const i=e?t?Og:Ng:t?Rg:Mg;return(n,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Ke(i,s)&&s in n?i:n,s,o)}const Lg={get:zl(!1,!1)},Dg={get:zl(!1,!0)},Bg={get:zl(!0,!1)},kd=new WeakMap,Id=new WeakMap,Ad=new WeakMap,Fg=new WeakMap;function Hg(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $g(t){return t.__v_skip||!Object.isExtensible(t)?0:Hg(ag(t))}function xi(t){return rs(t)?t:Gl(t,!1,Ed,Lg,kd)}function Ug(t){return Gl(t,!1,Cg,Dg,Id)}function Pd(t){return Gl(t,!0,Pg,Bg,Ad)}function Gl(t,e,i,n,s){if(!pt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s.get(t);if(o)return o;const r=$g(t);if(r===0)return t;const a=new Proxy(t,r===2?n:i);return s.set(t,a),a}function Qn(t){return rs(t)?Qn(t.__v_raw):!!(t&&t.__v_isReactive)}function rs(t){return!!(t&&t.__v_isReadonly)}function ur(t){return!!(t&&t.__v_isShallow)}function Cd(t){return Qn(t)||rs(t)}function Ye(t){const e=t&&t.__v_raw;return e?Ye(e):t}function Td(t){return cr(t,"__v_skip",!0),t}const js=t=>pt(t)?xi(t):t,Wl=t=>pt(t)?Pd(t):t;function Md(t){rn&&bi&&(t=Ye(t),Sd(t.dep||(t.dep=Fl())))}function Rd(t,e){t=Ye(t);const i=t.dep;i&&Ka(i)}function Bt(t){return!!(t&&t.__v_isRef===!0)}function G(t){return zg(t,!1)}function zg(t,e){return Bt(t)?t:new Gg(t,e)}class Gg{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:Ye(e),this._value=i?e:js(e)}get value(){return Md(this),this._value}set value(e){const i=this.__v_isShallow||ur(e)||rs(e);e=i?e:Ye(e),Vs(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:js(e),Rd(this))}}function d(t){return Bt(t)?t.value:t}const Wg={get:(t,e,i)=>d(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return Bt(s)&&!Bt(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function Nd(t){return Qn(t)?t:new Proxy(t,Wg)}var Od;class Vg{constructor(e,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[Od]=!1,this._dirty=!0,this.effect=new Hl(e,()=>{this._dirty||(this._dirty=!0,Rd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=Ye(this);return Md(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Od="__v_isReadonly";function jg(t,e,i=!1){let n,s;const o=Fe(t);return o?(n=t,s=Si):(n=t.get,s=t.set),new Vg(n,s,o||!s,i)}function an(t,e,i,n){let s;try{s=n?t(...n):t()}catch(o){Gr(o,e,i)}return s}function fi(t,e,i,n){if(Fe(t)){const o=an(t,e,i,n);return o&&pd(o)&&o.catch(r=>{Gr(r,e,i)}),o}const s=[];for(let o=0;o<t.length;o++)s.push(fi(t[o],e,i,n));return s}function Gr(t,e,i,n=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const r=e.proxy,a=i;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,r,a)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){an(l,null,10,[t,r,a]);return}}Kg(t,i,s,n)}function Kg(t,e,i,n=!0){console.error(t)}let Ks=!1,qa=!1;const Lt=[];let Ri=0;const Zn=[];let Ui=null,Pn=0;const Ld=Promise.resolve();let Vl=null;function qg(t){const e=Vl||Ld;return t?e.then(this?t.bind(this):t):e}function Yg(t){let e=Ri+1,i=Lt.length;for(;e<i;){const n=e+i>>>1;qs(Lt[n])<t?e=n+1:i=n}return e}function jl(t){(!Lt.length||!Lt.includes(t,Ks&&t.allowRecurse?Ri+1:Ri))&&(t.id==null?Lt.push(t):Lt.splice(Yg(t.id),0,t),Dd())}function Dd(){!Ks&&!qa&&(qa=!0,Vl=Ld.then(Fd))}function Xg(t){const e=Lt.indexOf(t);e>Ri&&Lt.splice(e,1)}function Jg(t){Oe(t)?Zn.push(...t):(!Ui||!Ui.includes(t,t.allowRecurse?Pn+1:Pn))&&Zn.push(t),Dd()}function Nc(t,e=Ks?Ri+1:0){for(;e<Lt.length;e++){const i=Lt[e];i&&i.pre&&(Lt.splice(e,1),e--,i())}}function Bd(t){if(Zn.length){const e=[...new Set(Zn)];if(Zn.length=0,Ui){Ui.push(...e);return}for(Ui=e,Ui.sort((i,n)=>qs(i)-qs(n)),Pn=0;Pn<Ui.length;Pn++)Ui[Pn]();Ui=null,Pn=0}}const qs=t=>t.id==null?1/0:t.id,Qg=(t,e)=>{const i=qs(t)-qs(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function Fd(t){qa=!1,Ks=!0,Lt.sort(Qg);const e=Si;try{for(Ri=0;Ri<Lt.length;Ri++){const i=Lt[Ri];i&&i.active!==!1&&an(i,null,14)}}finally{Ri=0,Lt.length=0,Bd(),Ks=!1,Vl=null,(Lt.length||Zn.length)&&Fd()}}function Zg(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||ft;let s=i;const o=e.startsWith("update:"),r=o&&e.slice(7);if(r&&r in n){const u=`${r==="modelValue"?"model":r}Modifiers`,{number:h,trim:f}=n[u]||ft;f&&(s=i.map(m=>Pt(m)?m.trim():m)),h&&(s=i.map(ug))}let a,l=n[a=oa(e)]||n[a=oa(os(e))];!l&&o&&(l=n[a=oa(ds(e))]),l&&fi(l,t,6,s);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,fi(c,t,6,s)}}function Hd(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const o=t.emits;let r={},a=!1;if(!Fe(t)){const l=c=>{const u=Hd(c,e,!0);u&&(a=!0,Ht(r,u))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(pt(t)&&n.set(t,null),null):(Oe(o)?o.forEach(l=>r[l]=null):Ht(r,o),pt(t)&&n.set(t,r),r)}function Wr(t,e){return!t||!Hr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ke(t,e[0].toLowerCase()+e.slice(1))||Ke(t,ds(e))||Ke(t,e))}let Gt=null,Vr=null;function hr(t){const e=Gt;return Gt=t,Vr=t&&t.type.__scopeId||null,e}function co(t){Vr=t}function uo(){Vr=null}function Ci(t,e=Gt,i){if(!e||t._n)return t;const n=(...s)=>{n._d&&zc(-1);const o=hr(e);let r;try{r=t(...s)}finally{hr(o),n._d&&zc(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function aa(t){const{type:e,vnode:i,proxy:n,withProxy:s,props:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:m,ctx:S,inheritAttrs:b}=t;let v,y;const E=hr(t);try{if(i.shapeFlag&4){const k=s||n;v=Ti(u.call(k,k,h,o,m,f,S)),y=l}else{const k=e;v=Ti(k.length>1?k(o,{attrs:l,slots:a,emit:c}):k(o,null)),y=e.props?l:em(l)}}catch(k){Os.length=0,Gr(k,t,1),v=z(pi)}let I=v;if(y&&b!==!1){const k=Object.keys(y),{shapeFlag:A}=I;k.length&&A&7&&(r&&k.some(Ol)&&(y=tm(y,r)),I=hn(I,y))}return i.dirs&&(I=hn(I),I.dirs=I.dirs?I.dirs.concat(i.dirs):i.dirs),i.transition&&(I.transition=i.transition),v=I,hr(E),v}const em=t=>{let e;for(const i in t)(i==="class"||i==="style"||Hr(i))&&((e||(e={}))[i]=t[i]);return e},tm=(t,e)=>{const i={};for(const n in t)(!Ol(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function im(t,e,i){const{props:n,children:s,component:o}=t,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Oc(n,r,c):!!r;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(r[f]!==n[f]&&!Wr(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Oc(n,r,c):!0:!!r;return!1}function Oc(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const o=n[s];if(e[o]!==t[o]&&!Wr(i,o))return!0}return!1}function nm({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const sm=t=>t.__isSuspense;function om(t,e){e&&e.pendingBranch?Oe(t)?e.effects.push(...t):e.effects.push(t):Jg(t)}function rm(t,e){if(Et){let i=Et.provides;const n=Et.parent&&Et.parent.provides;n===i&&(i=Et.provides=Object.create(n)),i[t]=e}}function Go(t,e,i=!1){const n=Et||Gt;if(n){const s=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return i&&Fe(e)?e.call(n.proxy):e}}const xo={};function ln(t,e,i){return $d(t,e,i)}function $d(t,e,{immediate:i,deep:n,flush:s,onTrack:o,onTrigger:r}=ft){const a=pg()===(Et==null?void 0:Et.scope)?Et:null;let l,c=!1,u=!1;if(Bt(t)?(l=()=>t.value,c=ur(t)):Qn(t)?(l=()=>t,n=!0):Oe(t)?(u=!0,c=t.some(I=>Qn(I)||ur(I)),l=()=>t.map(I=>{if(Bt(I))return I.value;if(Qn(I))return Kn(I);if(Fe(I))return an(I,a,2)})):Fe(t)?e?l=()=>an(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),fi(t,a,3,[f])}:l=Si,e&&n){const I=l;l=()=>Kn(I())}let h,f=I=>{h=y.onStop=()=>{an(I,a,4)}},m;if(Xs)if(f=Si,e?i&&fi(e,a,3,[l(),u?[]:void 0,f]):l(),s==="sync"){const I=Qm();m=I.__watcherHandles||(I.__watcherHandles=[])}else return Si;let S=u?new Array(t.length).fill(xo):xo;const b=()=>{if(y.active)if(e){const I=y.run();(n||c||(u?I.some((k,A)=>Vs(k,S[A])):Vs(I,S)))&&(h&&h(),fi(e,a,3,[I,S===xo?void 0:u&&S[0]===xo?[]:S,f]),S=I)}else y.run()};b.allowRecurse=!!e;let v;s==="sync"?v=b:s==="post"?v=()=>jt(b,a&&a.suspense):(b.pre=!0,a&&(b.id=a.uid),v=()=>jl(b));const y=new Hl(l,v);e?i?b():S=y.run():s==="post"?jt(y.run.bind(y),a&&a.suspense):y.run();const E=()=>{y.stop(),a&&a.scope&&Ll(a.scope.effects,y)};return m&&m.push(E),E}function am(t,e,i){const n=this.proxy,s=Pt(t)?t.includes(".")?Ud(n,t):()=>n[t]:t.bind(n,n);let o;Fe(e)?o=e:(o=e.handler,i=e);const r=Et;as(this);const a=$d(s,o.bind(n),i);return r?as(r):Ln(),a}function Ud(t,e){const i=e.split(".");return()=>{let n=t;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function Kn(t,e){if(!pt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Bt(t))Kn(t.value,e);else if(Oe(t))for(let i=0;i<t.length;i++)Kn(t[i],e);else if(fd(t)||Jn(t))t.forEach(i=>{Kn(i,e)});else if(md(t))for(const i in t)Kn(t[i],e);return t}function lm(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ot(()=>{t.isMounted=!0}),Rt(()=>{t.isUnmounting=!0}),t}const oi=[Function,Array],cm={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:oi,onEnter:oi,onAfterEnter:oi,onEnterCancelled:oi,onBeforeLeave:oi,onLeave:oi,onAfterLeave:oi,onLeaveCancelled:oi,onBeforeAppear:oi,onAppear:oi,onAfterAppear:oi,onAppearCancelled:oi},setup(t,{slots:e}){const i=Wm(),n=lm();let s;return()=>{const o=e.default&&Gd(e.default(),!0);if(!o||!o.length)return;let r=o[0];if(o.length>1){for(const b of o)if(b.type!==pi){r=b;break}}const a=Ye(t),{mode:l}=a;if(n.isLeaving)return la(r);const c=Lc(r);if(!c)return la(r);const u=Ya(c,a,n,i);Xa(c,u);const h=i.subTree,f=h&&Lc(h);let m=!1;const{getTransitionKey:S}=c.type;if(S){const b=S();s===void 0?s=b:b!==s&&(s=b,m=!0)}if(f&&f.type!==pi&&(!Cn(c,f)||m)){const b=Ya(f,a,n,i);if(Xa(f,b),l==="out-in")return n.isLeaving=!0,b.afterLeave=()=>{n.isLeaving=!1,i.update.active!==!1&&i.update()},la(r);l==="in-out"&&c.type!==pi&&(b.delayLeave=(v,y,E)=>{const I=zd(n,f);I[String(f.key)]=f,v._leaveCb=()=>{y(),v._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=E})}return r}}},um=cm;function zd(t,e){const{leavingVNodes:i}=t;let n=i.get(e.type);return n||(n=Object.create(null),i.set(e.type,n)),n}function Ya(t,e,i,n){const{appear:s,mode:o,persisted:r=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:S,onBeforeAppear:b,onAppear:v,onAfterAppear:y,onAppearCancelled:E}=e,I=String(t.key),k=zd(i,t),A=(N,V)=>{N&&fi(N,n,9,V)},T=(N,V)=>{const ee=V[1];A(N,V),Oe(N)?N.every(se=>se.length<=1)&&ee():N.length<=1&&ee()},R={mode:o,persisted:r,beforeEnter(N){let V=a;if(!i.isMounted)if(s)V=b||a;else return;N._leaveCb&&N._leaveCb(!0);const ee=k[I];ee&&Cn(t,ee)&&ee.el._leaveCb&&ee.el._leaveCb(),A(V,[N])},enter(N){let V=l,ee=c,se=u;if(!i.isMounted)if(s)V=v||l,ee=y||c,se=E||u;else return;let Q=!1;const ae=N._enterCb=X=>{Q||(Q=!0,X?A(se,[N]):A(ee,[N]),R.delayedLeave&&R.delayedLeave(),N._enterCb=void 0)};V?T(V,[N,ae]):ae()},leave(N,V){const ee=String(t.key);if(N._enterCb&&N._enterCb(!0),i.isUnmounting)return V();A(h,[N]);let se=!1;const Q=N._leaveCb=ae=>{se||(se=!0,V(),ae?A(S,[N]):A(m,[N]),N._leaveCb=void 0,k[ee]===t&&delete k[ee])};k[ee]=t,f?T(f,[N,Q]):Q()},clone(N){return Ya(N,e,i,n)}};return R}function la(t){if(jr(t))return t=hn(t),t.children=null,t}function Lc(t){return jr(t)?t.children?t.children[0]:void 0:t}function Xa(t,e){t.shapeFlag&6&&t.component?Xa(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gd(t,e=!1,i){let n=[],s=0;for(let o=0;o<t.length;o++){let r=t[o];const a=i==null?r.key:String(i)+String(r.key!=null?r.key:o);r.type===Re?(r.patchFlag&128&&s++,n=n.concat(Gd(r.children,e,a))):(e||r.type!==pi)&&n.push(a!=null?hn(r,{key:a}):r)}if(s>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function Ue(t){return Fe(t)?{setup:t,name:t.name}:t}const Rs=t=>!!t.type.__asyncLoader,jr=t=>t.type.__isKeepAlive;function hm(t,e){Wd(t,"a",e)}function dm(t,e){Wd(t,"da",e)}function Wd(t,e,i=Et){const n=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Kr(e,n,i),i){let s=i.parent;for(;s&&s.parent;)jr(s.parent.vnode)&&fm(n,e,i,s),s=s.parent}}function fm(t,e,i,n){const s=Kr(e,t,n,!0);ho(()=>{Ll(n[e],s)},i)}function Kr(t,e,i=Et,n=!1){if(i){const s=i[t]||(i[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(i.isUnmounted)return;fs(),as(i);const a=fi(e,i,t,r);return Ln(),ps(),a});return n?s.unshift(o):s.push(o),o}}const Yi=t=>(e,i=Et)=>(!Xs||t==="sp")&&Kr(t,(...n)=>e(...n),i),pm=Yi("bm"),ot=Yi("m"),Vd=Yi("bu"),gs=Yi("u"),Rt=Yi("bum"),ho=Yi("um"),gm=Yi("sp"),mm=Yi("rtg"),_m=Yi("rtc");function bm(t,e=Et){Kr("ec",t,e)}function bn(t,e,i,n){const s=t.dirs,o=e&&e.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(fs(),fi(l,i,8,[t.el,a,t,e]),ps())}}const ym=Symbol();function Ve(t,e,i,n){let s;const o=i&&i[n];if(Oe(t)||Pt(t)){s=new Array(t.length);for(let r=0,a=t.length;r<a;r++)s[r]=e(t[r],r,void 0,o&&o[r])}else if(typeof t=="number"){s=new Array(t);for(let r=0;r<t;r++)s[r]=e(r+1,r,void 0,o&&o[r])}else if(pt(t))if(t[Symbol.iterator])s=Array.from(t,(r,a)=>e(r,a,void 0,o&&o[a]));else{const r=Object.keys(t);s=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];s[a]=e(t[c],c,a,o&&o[a])}}else s=[];return i&&(i[n]=s),s}function Ja(t,e,i={},n,s){if(Gt.isCE||Gt.parent&&Rs(Gt.parent)&&Gt.parent.isCE)return e!=="default"&&(i.name=e),z("slot",i,n&&n());let o=t[e];o&&o._c&&(o._d=!1),O();const r=o&&jd(o(i)),a=We(Re,{key:i.key||r&&r.key||`_${e}`},r||(n?n():[]),r&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function jd(t){return t.some(e=>fr(e)?!(e.type===pi||e.type===Re&&!jd(e.children)):!0)?t:null}const Qa=t=>t?sf(t)?Xl(t)||t.proxy:Qa(t.parent):null,Ns=Ht(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qa(t.parent),$root:t=>Qa(t.root),$emit:t=>t.emit,$options:t=>Kl(t),$forceUpdate:t=>t.f||(t.f=()=>jl(t.update)),$nextTick:t=>t.n||(t.n=qg.bind(t.proxy)),$watch:t=>am.bind(t)}),ca=(t,e)=>t!==ft&&!t.__isScriptSetup&&Ke(t,e),vm={get({_:t},e){const{ctx:i,setupState:n,data:s,props:o,accessCache:r,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=r[e];if(m!==void 0)switch(m){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return o[e]}else{if(ca(n,e))return r[e]=1,n[e];if(s!==ft&&Ke(s,e))return r[e]=2,s[e];if((c=t.propsOptions[0])&&Ke(c,e))return r[e]=3,o[e];if(i!==ft&&Ke(i,e))return r[e]=4,i[e];Za&&(r[e]=0)}}const u=Ns[e];let h,f;if(u)return e==="$attrs"&&Xt(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(i!==ft&&Ke(i,e))return r[e]=4,i[e];if(f=l.config.globalProperties,Ke(f,e))return f[e]},set({_:t},e,i){const{data:n,setupState:s,ctx:o}=t;return ca(s,e)?(s[e]=i,!0):n!==ft&&Ke(n,e)?(n[e]=i,!0):Ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:o}},r){let a;return!!i[r]||t!==ft&&Ke(t,r)||ca(e,r)||(a=o[0])&&Ke(a,r)||Ke(n,r)||Ke(Ns,r)||Ke(s.config.globalProperties,r)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:Ke(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};let Za=!0;function Sm(t){const e=Kl(t),i=t.proxy,n=t.ctx;Za=!1,e.beforeCreate&&Dc(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:S,activated:b,deactivated:v,beforeDestroy:y,beforeUnmount:E,destroyed:I,unmounted:k,render:A,renderTracked:T,renderTriggered:R,errorCaptured:N,serverPrefetch:V,expose:ee,inheritAttrs:se,components:Q,directives:ae,filters:X}=e;if(c&&wm(c,n,null,t.appContext.config.unwrapInjectedRef),r)for(const ne in r){const ie=r[ne];Fe(ie)&&(n[ne]=ie.bind(i))}if(s){const ne=s.call(i,i);pt(ne)&&(t.data=xi(ne))}if(Za=!0,o)for(const ne in o){const ie=o[ne],ce=Fe(ie)?ie.bind(i,i):Fe(ie.get)?ie.get.bind(i,i):Si,Ne=!Fe(ie)&&Fe(ie.set)?ie.set.bind(i):Si,Me=Te({get:ce,set:Ne});Object.defineProperty(n,ne,{enumerable:!0,configurable:!0,get:()=>Me.value,set:xe=>Me.value=xe})}if(a)for(const ne in a)Kd(a[ne],n,i,ne);if(l){const ne=Fe(l)?l.call(i):l;Reflect.ownKeys(ne).forEach(ie=>{rm(ie,ne[ie])})}u&&Dc(u,t,"c");function ge(ne,ie){Oe(ie)?ie.forEach(ce=>ne(ce.bind(i))):ie&&ne(ie.bind(i))}if(ge(pm,h),ge(ot,f),ge(Vd,m),ge(gs,S),ge(hm,b),ge(dm,v),ge(bm,N),ge(_m,T),ge(mm,R),ge(Rt,E),ge(ho,k),ge(gm,V),Oe(ee))if(ee.length){const ne=t.exposed||(t.exposed={});ee.forEach(ie=>{Object.defineProperty(ne,ie,{get:()=>i[ie],set:ce=>i[ie]=ce})})}else t.exposed||(t.exposed={});A&&t.render===Si&&(t.render=A),se!=null&&(t.inheritAttrs=se),Q&&(t.components=Q),ae&&(t.directives=ae)}function wm(t,e,i=Si,n=!1){Oe(t)&&(t=el(t));for(const s in t){const o=t[s];let r;pt(o)?"default"in o?r=Go(o.from||s,o.default,!0):r=Go(o.from||s):r=Go(o),Bt(r)&&n?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[s]=r}}function Dc(t,e,i){fi(Oe(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function Kd(t,e,i,n){const s=n.includes(".")?Ud(i,n):()=>i[n];if(Pt(t)){const o=e[t];Fe(o)&&ln(s,o)}else if(Fe(t))ln(s,t.bind(i));else if(pt(t))if(Oe(t))t.forEach(o=>Kd(o,e,i,n));else{const o=Fe(t.handler)?t.handler.bind(i):e[t.handler];Fe(o)&&ln(s,o,t)}}function Kl(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,a=o.get(e);let l;return a?l=a:!s.length&&!i&&!n?l=e:(l={},s.length&&s.forEach(c=>dr(l,c,r,!0)),dr(l,e,r)),pt(e)&&o.set(e,l),l}function dr(t,e,i,n=!1){const{mixins:s,extends:o}=e;o&&dr(t,o,i,!0),s&&s.forEach(r=>dr(t,r,i,!0));for(const r in e)if(!(n&&r==="expose")){const a=xm[r]||i&&i[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const xm={data:Bc,props:kn,emits:kn,methods:kn,computed:kn,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:kn,directives:kn,watch:km,provide:Bc,inject:Em};function Bc(t,e){return e?t?function(){return Ht(Fe(t)?t.call(this,this):t,Fe(e)?e.call(this,this):e)}:e:t}function Em(t,e){return kn(el(t),el(e))}function el(t){if(Oe(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Ut(t,e){return t?[...new Set([].concat(t,e))]:e}function kn(t,e){return t?Ht(Ht(Object.create(null),t),e):e}function km(t,e){if(!t)return e;if(!e)return t;const i=Ht(Object.create(null),t);for(const n in e)i[n]=Ut(t[n],e[n]);return i}function Im(t,e,i,n=!1){const s={},o={};cr(o,Yr,1),t.propsDefaults=Object.create(null),qd(t,e,s,o);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);i?t.props=n?s:Ug(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function Am(t,e,i,n){const{props:s,attrs:o,vnode:{patchFlag:r}}=t,a=Ye(s),[l]=t.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Wr(t.emitsOptions,f))continue;const m=e[f];if(l)if(Ke(o,f))m!==o[f]&&(o[f]=m,c=!0);else{const S=os(f);s[S]=tl(l,a,S,m,t,!1)}else m!==o[f]&&(o[f]=m,c=!0)}}}else{qd(t,e,s,o)&&(c=!0);let u;for(const h in a)(!e||!Ke(e,h)&&((u=ds(h))===h||!Ke(e,u)))&&(l?i&&(i[h]!==void 0||i[u]!==void 0)&&(s[h]=tl(l,a,h,void 0,t,!0)):delete s[h]);if(o!==a)for(const h in o)(!e||!Ke(e,h))&&(delete o[h],c=!0)}c&&qi(t,"set","$attrs")}function qd(t,e,i,n){const[s,o]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(zo(l))continue;const c=e[l];let u;s&&Ke(s,u=os(l))?!o||!o.includes(u)?i[u]=c:(a||(a={}))[u]=c:Wr(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=Ye(i),c=a||ft;for(let u=0;u<o.length;u++){const h=o[u];i[h]=tl(s,l,h,c[h],t,!Ke(c,h))}}return r}function tl(t,e,i,n,s,o){const r=t[i];if(r!=null){const a=Ke(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&Fe(l)){const{propsDefaults:c}=s;i in c?n=c[i]:(as(s),n=c[i]=l.call(null,e),Ln())}else n=l}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===ds(i))&&(n=!0))}return n}function Yd(t,e,i=!1){const n=e.propsCache,s=n.get(t);if(s)return s;const o=t.props,r={},a=[];let l=!1;if(!Fe(t)){const u=h=>{l=!0;const[f,m]=Yd(h,e,!0);Ht(r,f),m&&a.push(...m)};!i&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!l)return pt(t)&&n.set(t,Xn),Xn;if(Oe(o))for(let u=0;u<o.length;u++){const h=os(o[u]);Fc(h)&&(r[h]=ft)}else if(o)for(const u in o){const h=os(u);if(Fc(h)){const f=o[u],m=r[h]=Oe(f)||Fe(f)?{type:f}:Object.assign({},f);if(m){const S=Uc(Boolean,m.type),b=Uc(String,m.type);m[0]=S>-1,m[1]=b<0||S<b,(S>-1||Ke(m,"default"))&&a.push(h)}}}const c=[r,a];return pt(t)&&n.set(t,c),c}function Fc(t){return t[0]!=="$"}function Hc(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function $c(t,e){return Hc(t)===Hc(e)}function Uc(t,e){return Oe(e)?e.findIndex(i=>$c(i,t)):Fe(e)&&$c(e,t)?0:-1}const Xd=t=>t[0]==="_"||t==="$stable",ql=t=>Oe(t)?t.map(Ti):[Ti(t)],Pm=(t,e,i)=>{if(e._n)return e;const n=Ci((...s)=>ql(e(...s)),i);return n._c=!1,n},Jd=(t,e,i)=>{const n=t._ctx;for(const s in t){if(Xd(s))continue;const o=t[s];if(Fe(o))e[s]=Pm(s,o,n);else if(o!=null){const r=ql(o);e[s]=()=>r}}},Qd=(t,e)=>{const i=ql(e);t.slots.default=()=>i},Cm=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=Ye(e),cr(e,"_",i)):Jd(e,t.slots={})}else t.slots={},e&&Qd(t,e);cr(t.slots,Yr,1)},Tm=(t,e,i)=>{const{vnode:n,slots:s}=t;let o=!0,r=ft;if(n.shapeFlag&32){const a=e._;a?i&&a===1?o=!1:(Ht(s,e),!i&&a===1&&delete s._):(o=!e.$stable,Jd(e,s)),r=e}else e&&(Qd(t,e),r={default:1});if(o)for(const a in s)!Xd(a)&&!(a in r)&&delete s[a]};function Zd(){return{app:null,config:{isNativeTag:sg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Mm=0;function Rm(t,e){return function(n,s=null){Fe(n)||(n=Object.assign({},n)),s!=null&&!pt(s)&&(s=null);const o=Zd(),r=new Set;let a=!1;const l=o.app={_uid:Mm++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:Zm,get config(){return o.config},set config(c){},use(c,...u){return r.has(c)||(c&&Fe(c.install)?(r.add(c),c.install(l,...u)):Fe(c)&&(r.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,h){if(!a){const f=z(n,s);return f.appContext=o,u&&e?e(f,c):t(f,c,h),a=!0,l._container=c,c.__vue_app__=l,Xl(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l}};return l}}function il(t,e,i,n,s=!1){if(Oe(t)){t.forEach((f,m)=>il(f,e&&(Oe(e)?e[m]:e),i,n,s));return}if(Rs(n)&&!s)return;const o=n.shapeFlag&4?Xl(n.component)||n.component.proxy:n.el,r=s?null:o,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ft?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Pt(c)?(u[c]=null,Ke(h,c)&&(h[c]=null)):Bt(c)&&(c.value=null)),Fe(l))an(l,a,12,[r,u]);else{const f=Pt(l),m=Bt(l);if(f||m){const S=()=>{if(t.f){const b=f?Ke(h,l)?h[l]:u[l]:l.value;s?Oe(b)&&Ll(b,o):Oe(b)?b.includes(o)||b.push(o):f?(u[l]=[o],Ke(h,l)&&(h[l]=u[l])):(l.value=[o],t.k&&(u[t.k]=l.value))}else f?(u[l]=r,Ke(h,l)&&(h[l]=r)):m&&(l.value=r,t.k&&(u[t.k]=r))};r?(S.id=-1,jt(S,i)):S()}}}const jt=om;function Nm(t){return Om(t)}function Om(t,e){const i=hg();i.__VUE__=!0;const{insert:n,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=Si,insertStaticContent:S}=t,b=(M,B,W,Y=null,J=null,oe=null,fe=!1,re=null,ue=!!B.dynamicChildren)=>{if(M===B)return;M&&!Cn(M,B)&&(Y=Xe(M),xe(M,J,oe,!0),M=null),B.patchFlag===-2&&(ue=!1,B.dynamicChildren=null);const{type:Z,ref:ve,shapeFlag:Se}=B;switch(Z){case qr:v(M,B,W,Y);break;case pi:y(M,B,W,Y);break;case ua:M==null&&E(B,W,Y,fe);break;case Re:Q(M,B,W,Y,J,oe,fe,re,ue);break;default:Se&1?A(M,B,W,Y,J,oe,fe,re,ue):Se&6?ae(M,B,W,Y,J,oe,fe,re,ue):(Se&64||Se&128)&&Z.process(M,B,W,Y,J,oe,fe,re,ue,Ie)}ve!=null&&J&&il(ve,M&&M.ref,oe,B||M,!B)},v=(M,B,W,Y)=>{if(M==null)n(B.el=a(B.children),W,Y);else{const J=B.el=M.el;B.children!==M.children&&c(J,B.children)}},y=(M,B,W,Y)=>{M==null?n(B.el=l(B.children||""),W,Y):B.el=M.el},E=(M,B,W,Y)=>{[M.el,M.anchor]=S(M.children,B,W,Y,M.el,M.anchor)},I=({el:M,anchor:B},W,Y)=>{let J;for(;M&&M!==B;)J=f(M),n(M,W,Y),M=J;n(B,W,Y)},k=({el:M,anchor:B})=>{let W;for(;M&&M!==B;)W=f(M),s(M),M=W;s(B)},A=(M,B,W,Y,J,oe,fe,re,ue)=>{fe=fe||B.type==="svg",M==null?T(B,W,Y,J,oe,fe,re,ue):V(M,B,J,oe,fe,re,ue)},T=(M,B,W,Y,J,oe,fe,re)=>{let ue,Z;const{type:ve,props:Se,shapeFlag:ke,transition:Ae,dirs:Be}=M;if(ue=M.el=r(M.type,oe,Se&&Se.is,Se),ke&8?u(ue,M.children):ke&16&&N(M.children,ue,null,Y,J,oe&&ve!=="foreignObject",fe,re),Be&&bn(M,null,Y,"created"),R(ue,M,M.scopeId,fe,Y),Se){for(const g in Se)g!=="value"&&!zo(g)&&o(ue,g,null,Se[g],oe,M.children,Y,J,et);"value"in Se&&o(ue,"value",null,Se.value),(Z=Se.onVnodeBeforeMount)&&ki(Z,Y,M)}Be&&bn(M,null,Y,"beforeMount");const w=(!J||J&&!J.pendingBranch)&&Ae&&!Ae.persisted;w&&Ae.beforeEnter(ue),n(ue,B,W),((Z=Se&&Se.onVnodeMounted)||w||Be)&&jt(()=>{Z&&ki(Z,Y,M),w&&Ae.enter(ue),Be&&bn(M,null,Y,"mounted")},J)},R=(M,B,W,Y,J)=>{if(W&&m(M,W),Y)for(let oe=0;oe<Y.length;oe++)m(M,Y[oe]);if(J){let oe=J.subTree;if(B===oe){const fe=J.vnode;R(M,fe,fe.scopeId,fe.slotScopeIds,J.parent)}}},N=(M,B,W,Y,J,oe,fe,re,ue=0)=>{for(let Z=ue;Z<M.length;Z++){const ve=M[Z]=re?Zi(M[Z]):Ti(M[Z]);b(null,ve,B,W,Y,J,oe,fe,re)}},V=(M,B,W,Y,J,oe,fe)=>{const re=B.el=M.el;let{patchFlag:ue,dynamicChildren:Z,dirs:ve}=B;ue|=M.patchFlag&16;const Se=M.props||ft,ke=B.props||ft;let Ae;W&&yn(W,!1),(Ae=ke.onVnodeBeforeUpdate)&&ki(Ae,W,B,M),ve&&bn(B,M,W,"beforeUpdate"),W&&yn(W,!0);const Be=J&&B.type!=="foreignObject";if(Z?ee(M.dynamicChildren,Z,re,W,Y,Be,oe):fe||ie(M,B,re,null,W,Y,Be,oe,!1),ue>0){if(ue&16)se(re,B,Se,ke,W,Y,J);else if(ue&2&&Se.class!==ke.class&&o(re,"class",null,ke.class,J),ue&4&&o(re,"style",Se.style,ke.style,J),ue&8){const w=B.dynamicProps;for(let g=0;g<w.length;g++){const _=w[g],C=Se[_],D=ke[_];(D!==C||_==="value")&&o(re,_,C,D,J,M.children,W,Y,et)}}ue&1&&M.children!==B.children&&u(re,B.children)}else!fe&&Z==null&&se(re,B,Se,ke,W,Y,J);((Ae=ke.onVnodeUpdated)||ve)&&jt(()=>{Ae&&ki(Ae,W,B,M),ve&&bn(B,M,W,"updated")},Y)},ee=(M,B,W,Y,J,oe,fe)=>{for(let re=0;re<B.length;re++){const ue=M[re],Z=B[re],ve=ue.el&&(ue.type===Re||!Cn(ue,Z)||ue.shapeFlag&70)?h(ue.el):W;b(ue,Z,ve,null,Y,J,oe,fe,!0)}},se=(M,B,W,Y,J,oe,fe)=>{if(W!==Y){if(W!==ft)for(const re in W)!zo(re)&&!(re in Y)&&o(M,re,W[re],null,fe,B.children,J,oe,et);for(const re in Y){if(zo(re))continue;const ue=Y[re],Z=W[re];ue!==Z&&re!=="value"&&o(M,re,Z,ue,fe,B.children,J,oe,et)}"value"in Y&&o(M,"value",W.value,Y.value)}},Q=(M,B,W,Y,J,oe,fe,re,ue)=>{const Z=B.el=M?M.el:a(""),ve=B.anchor=M?M.anchor:a("");let{patchFlag:Se,dynamicChildren:ke,slotScopeIds:Ae}=B;Ae&&(re=re?re.concat(Ae):Ae),M==null?(n(Z,W,Y),n(ve,W,Y),N(B.children,W,ve,J,oe,fe,re,ue)):Se>0&&Se&64&&ke&&M.dynamicChildren?(ee(M.dynamicChildren,ke,W,J,oe,fe,re),(B.key!=null||J&&B===J.subTree)&&ef(M,B,!0)):ie(M,B,W,ve,J,oe,fe,re,ue)},ae=(M,B,W,Y,J,oe,fe,re,ue)=>{B.slotScopeIds=re,M==null?B.shapeFlag&512?J.ctx.activate(B,W,Y,fe,ue):X(B,W,Y,J,oe,fe,ue):he(M,B,ue)},X=(M,B,W,Y,J,oe,fe)=>{const re=M.component=Gm(M,Y,J);if(jr(M)&&(re.ctx.renderer=Ie),Vm(re),re.asyncDep){if(J&&J.registerDep(re,ge),!M.el){const ue=re.subTree=z(pi);y(null,ue,B,W)}return}ge(re,M,B,W,J,oe,fe)},he=(M,B,W)=>{const Y=B.component=M.component;if(im(M,B,W))if(Y.asyncDep&&!Y.asyncResolved){ne(Y,B,W);return}else Y.next=B,Xg(Y.update),Y.update();else B.el=M.el,Y.vnode=B},ge=(M,B,W,Y,J,oe,fe)=>{const re=()=>{if(M.isMounted){let{next:ve,bu:Se,u:ke,parent:Ae,vnode:Be}=M,w=ve,g;yn(M,!1),ve?(ve.el=Be.el,ne(M,ve,fe)):ve=Be,Se&&ra(Se),(g=ve.props&&ve.props.onVnodeBeforeUpdate)&&ki(g,Ae,ve,Be),yn(M,!0);const _=aa(M),C=M.subTree;M.subTree=_,b(C,_,h(C.el),Xe(C),M,J,oe),ve.el=_.el,w===null&&nm(M,_.el),ke&&jt(ke,J),(g=ve.props&&ve.props.onVnodeUpdated)&&jt(()=>ki(g,Ae,ve,Be),J)}else{let ve;const{el:Se,props:ke}=B,{bm:Ae,m:Be,parent:w}=M,g=Rs(B);if(yn(M,!1),Ae&&ra(Ae),!g&&(ve=ke&&ke.onVnodeBeforeMount)&&ki(ve,w,B),yn(M,!0),Se&&Ei){const _=()=>{M.subTree=aa(M),Ei(Se,M.subTree,M,J,null)};g?B.type.__asyncLoader().then(()=>!M.isUnmounted&&_()):_()}else{const _=M.subTree=aa(M);b(null,_,W,Y,M,J,oe),B.el=_.el}if(Be&&jt(Be,J),!g&&(ve=ke&&ke.onVnodeMounted)){const _=B;jt(()=>ki(ve,w,_),J)}(B.shapeFlag&256||w&&Rs(w.vnode)&&w.vnode.shapeFlag&256)&&M.a&&jt(M.a,J),M.isMounted=!0,B=W=Y=null}},ue=M.effect=new Hl(re,()=>jl(Z),M.scope),Z=M.update=()=>ue.run();Z.id=M.uid,yn(M,!0),Z()},ne=(M,B,W)=>{B.component=M;const Y=M.vnode.props;M.vnode=B,M.next=null,Am(M,B.props,Y,W),Tm(M,B.children,W),fs(),Nc(),ps()},ie=(M,B,W,Y,J,oe,fe,re,ue=!1)=>{const Z=M&&M.children,ve=M?M.shapeFlag:0,Se=B.children,{patchFlag:ke,shapeFlag:Ae}=B;if(ke>0){if(ke&128){Ne(Z,Se,W,Y,J,oe,fe,re,ue);return}else if(ke&256){ce(Z,Se,W,Y,J,oe,fe,re,ue);return}}Ae&8?(ve&16&&et(Z,J,oe),Se!==Z&&u(W,Se)):ve&16?Ae&16?Ne(Z,Se,W,Y,J,oe,fe,re,ue):et(Z,J,oe,!0):(ve&8&&u(W,""),Ae&16&&N(Se,W,Y,J,oe,fe,re,ue))},ce=(M,B,W,Y,J,oe,fe,re,ue)=>{M=M||Xn,B=B||Xn;const Z=M.length,ve=B.length,Se=Math.min(Z,ve);let ke;for(ke=0;ke<Se;ke++){const Ae=B[ke]=ue?Zi(B[ke]):Ti(B[ke]);b(M[ke],Ae,W,null,J,oe,fe,re,ue)}Z>ve?et(M,J,oe,!0,!1,Se):N(B,W,Y,J,oe,fe,re,ue,Se)},Ne=(M,B,W,Y,J,oe,fe,re,ue)=>{let Z=0;const ve=B.length;let Se=M.length-1,ke=ve-1;for(;Z<=Se&&Z<=ke;){const Ae=M[Z],Be=B[Z]=ue?Zi(B[Z]):Ti(B[Z]);if(Cn(Ae,Be))b(Ae,Be,W,null,J,oe,fe,re,ue);else break;Z++}for(;Z<=Se&&Z<=ke;){const Ae=M[Se],Be=B[ke]=ue?Zi(B[ke]):Ti(B[ke]);if(Cn(Ae,Be))b(Ae,Be,W,null,J,oe,fe,re,ue);else break;Se--,ke--}if(Z>Se){if(Z<=ke){const Ae=ke+1,Be=Ae<ve?B[Ae].el:Y;for(;Z<=ke;)b(null,B[Z]=ue?Zi(B[Z]):Ti(B[Z]),W,Be,J,oe,fe,re,ue),Z++}}else if(Z>ke)for(;Z<=Se;)xe(M[Z],J,oe,!0),Z++;else{const Ae=Z,Be=Z,w=new Map;for(Z=Be;Z<=ke;Z++){const He=B[Z]=ue?Zi(B[Z]):Ti(B[Z]);He.key!=null&&w.set(He.key,Z)}let g,_=0;const C=ke-Be+1;let D=!1,H=0;const K=new Array(C);for(Z=0;Z<C;Z++)K[Z]=0;for(Z=Ae;Z<=Se;Z++){const He=M[Z];if(_>=C){xe(He,J,oe,!0);continue}let ze;if(He.key!=null)ze=w.get(He.key);else for(g=Be;g<=ke;g++)if(K[g-Be]===0&&Cn(He,B[g])){ze=g;break}ze===void 0?xe(He,J,oe,!0):(K[ze-Be]=Z+1,ze>=H?H=ze:D=!0,b(He,B[ze],W,null,J,oe,fe,re,ue),_++)}const De=D?Lm(K):Xn;for(g=De.length-1,Z=C-1;Z>=0;Z--){const He=Be+Z,ze=B[He],lt=He+1<ve?B[He+1].el:Y;K[Z]===0?b(null,ze,W,lt,J,oe,fe,re,ue):D&&(g<0||Z!==De[g]?Me(ze,W,lt,2):g--)}}},Me=(M,B,W,Y,J=null)=>{const{el:oe,type:fe,transition:re,children:ue,shapeFlag:Z}=M;if(Z&6){Me(M.component.subTree,B,W,Y);return}if(Z&128){M.suspense.move(B,W,Y);return}if(Z&64){fe.move(M,B,W,Ie);return}if(fe===Re){n(oe,B,W);for(let Se=0;Se<ue.length;Se++)Me(ue[Se],B,W,Y);n(M.anchor,B,W);return}if(fe===ua){I(M,B,W);return}if(Y!==2&&Z&1&&re)if(Y===0)re.beforeEnter(oe),n(oe,B,W),jt(()=>re.enter(oe),J);else{const{leave:Se,delayLeave:ke,afterLeave:Ae}=re,Be=()=>n(oe,B,W),w=()=>{Se(oe,()=>{Be(),Ae&&Ae()})};ke?ke(oe,Be,w):w()}else n(oe,B,W)},xe=(M,B,W,Y=!1,J=!1)=>{const{type:oe,props:fe,ref:re,children:ue,dynamicChildren:Z,shapeFlag:ve,patchFlag:Se,dirs:ke}=M;if(re!=null&&il(re,null,W,M,!0),ve&256){B.ctx.deactivate(M);return}const Ae=ve&1&&ke,Be=!Rs(M);let w;if(Be&&(w=fe&&fe.onVnodeBeforeUnmount)&&ki(w,B,M),ve&6)mt(M.component,W,Y);else{if(ve&128){M.suspense.unmount(W,Y);return}Ae&&bn(M,null,B,"beforeUnmount"),ve&64?M.type.remove(M,B,W,J,Ie,Y):Z&&(oe!==Re||Se>0&&Se&64)?et(Z,B,W,!1,!0):(oe===Re&&Se&384||!J&&ve&16)&&et(ue,B,W),Y&&Ze(M)}(Be&&(w=fe&&fe.onVnodeUnmounted)||Ae)&&jt(()=>{w&&ki(w,B,M),Ae&&bn(M,null,B,"unmounted")},W)},Ze=M=>{const{type:B,el:W,anchor:Y,transition:J}=M;if(B===Re){nt(W,Y);return}if(B===ua){k(M);return}const oe=()=>{s(W),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(M.shapeFlag&1&&J&&!J.persisted){const{leave:fe,delayLeave:re}=J,ue=()=>fe(W,oe);re?re(M.el,oe,ue):ue()}else oe()},nt=(M,B)=>{let W;for(;M!==B;)W=f(M),s(M),M=W;s(B)},mt=(M,B,W)=>{const{bum:Y,scope:J,update:oe,subTree:fe,um:re}=M;Y&&ra(Y),J.stop(),oe&&(oe.active=!1,xe(fe,M,B,W)),re&&jt(re,B),jt(()=>{M.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},et=(M,B,W,Y=!1,J=!1,oe=0)=>{for(let fe=oe;fe<M.length;fe++)xe(M[fe],B,W,Y,J)},Xe=M=>M.shapeFlag&6?Xe(M.component.subTree):M.shapeFlag&128?M.suspense.next():f(M.anchor||M.el),me=(M,B,W)=>{M==null?B._vnode&&xe(B._vnode,null,null,!0):b(B._vnode||null,M,B,null,null,null,W),Nc(),Bd(),B._vnode=M},Ie={p:b,um:xe,m:Me,r:Ze,mt:X,mc:N,pc:ie,pbc:ee,n:Xe,o:t};let si,Ei;return e&&([si,Ei]=e(Ie)),{render:me,hydrate:si,createApp:Rm(me,si)}}function yn({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function ef(t,e,i=!1){const n=t.children,s=e.children;if(Oe(n)&&Oe(s))for(let o=0;o<n.length;o++){const r=n[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=Zi(s[o]),a.el=r.el),i||ef(r,a)),a.type===qr&&(a.el=r.el)}}function Lm(t){const e=t.slice(),i=[0];let n,s,o,r,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=i[i.length-1],t[s]<c){e[n]=s,i.push(n);continue}for(o=0,r=i.length-1;o<r;)a=o+r>>1,t[i[a]]<c?o=a+1:r=a;c<t[i[o]]&&(o>0&&(e[n]=i[o-1]),i[o]=n)}}for(o=i.length,r=i[o-1];o-- >0;)i[o]=r,r=e[r];return i}const Dm=t=>t.__isTeleport,Re=Symbol(void 0),qr=Symbol(void 0),pi=Symbol(void 0),ua=Symbol(void 0),Os=[];let yi=null;function O(t=!1){Os.push(yi=t?null:[])}function Bm(){Os.pop(),yi=Os[Os.length-1]||null}let Ys=1;function zc(t){Ys+=t}function tf(t){return t.dynamicChildren=Ys>0?yi||Xn:null,Bm(),Ys>0&&yi&&yi.push(t),t}function F(t,e,i,n,s,o){return tf(p(t,e,i,n,s,o,!0))}function We(t,e,i,n,s){return tf(z(t,e,i,n,s,!0))}function fr(t){return t?t.__v_isVNode===!0:!1}function Cn(t,e){return t.type===e.type&&t.key===e.key}const Yr="__vInternal",nf=({key:t})=>t??null,Wo=({ref:t,ref_key:e,ref_for:i})=>t!=null?Pt(t)||Bt(t)||Fe(t)?{i:Gt,r:t,k:e,f:!!i}:t:null;function p(t,e=null,i=null,n=0,s=null,o=t===Re?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&nf(e),ref:e&&Wo(e),scopeId:Vr,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Gt};return a?(Yl(l,i),o&128&&t.normalize(l)):i&&(l.shapeFlag|=Pt(i)?8:16),Ys>0&&!r&&yi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&yi.push(l),l}const z=Fm;function Fm(t,e=null,i=null,n=0,s=null,o=!1){if((!t||t===ym)&&(t=pi),fr(t)){const a=hn(t,e,!0);return i&&Yl(a,i),Ys>0&&!o&&yi&&(a.shapeFlag&6?yi[yi.indexOf(t)]=a:yi.push(a)),a.patchFlag|=-2,a}if(Ym(t)&&(t=t.__vccOpts),e){e=Hm(e);let{class:a,style:l}=e;a&&!Pt(a)&&(e.class=it(a)),pt(l)&&(Cd(l)&&!Oe(l)&&(l=Ht({},l)),e.style=Ee(l))}const r=Pt(t)?1:sm(t)?128:Dm(t)?64:pt(t)?4:Fe(t)?2:0;return p(t,e,i,n,s,r,o,!0)}function Hm(t){return t?Cd(t)||Yr in t?Ht({},t):t:null}function hn(t,e,i=!1){const{props:n,ref:s,patchFlag:o,children:r}=t,a=e?$m(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&nf(a),ref:e&&e.ref?i&&s?Oe(s)?s.concat(Wo(e)):[s,Wo(e)]:Wo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Re?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&hn(t.ssContent),ssFallback:t.ssFallback&&hn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function fo(t=" ",e=0){return z(qr,null,t,e)}function le(t="",e=!1){return e?(O(),We(pi,null,t)):z(pi,null,t)}function Ti(t){return t==null||typeof t=="boolean"?z(pi):Oe(t)?z(Re,null,t.slice()):typeof t=="object"?Zi(t):z(qr,null,String(t))}function Zi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:hn(t)}function Yl(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Oe(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Yl(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!(Yr in e)?e._ctx=Gt:s===3&&Gt&&(Gt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Fe(e)?(e={default:e,_ctx:Gt},i=32):(e=String(e),n&64?(i=16,e=[fo(e)]):i=8);t.children=e,t.shapeFlag|=i}function $m(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=it([e.class,n.class]));else if(s==="style")e.style=Ee([e.style,n.style]);else if(Hr(s)){const o=e[s],r=n[s];r&&o!==r&&!(Oe(o)&&o.includes(r))&&(e[s]=o?[].concat(o,r):r)}else s!==""&&(e[s]=n[s])}return e}function ki(t,e,i,n=null){fi(t,e,7,[i,n])}const Um=Zd();let zm=0;function Gm(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||Um,o={uid:zm++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new dg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yd(n,s),emitsOptions:Hd(n,s),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:n.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Zg.bind(null,o),t.ce&&t.ce(o),o}let Et=null;const Wm=()=>Et||Gt,as=t=>{Et=t,t.scope.on()},Ln=()=>{Et&&Et.scope.off(),Et=null};function sf(t){return t.vnode.shapeFlag&4}let Xs=!1;function Vm(t,e=!1){Xs=e;const{props:i,children:n}=t.vnode,s=sf(t);Im(t,i,s,e),Cm(t,n);const o=s?jm(t,e):void 0;return Xs=!1,o}function jm(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=Td(new Proxy(t.ctx,vm));const{setup:n}=i;if(n){const s=t.setupContext=n.length>1?qm(t):null;as(t),fs();const o=an(n,t,0,[t.props,s]);if(ps(),Ln(),pd(o)){if(o.then(Ln,Ln),e)return o.then(r=>{Gc(t,r,e)}).catch(r=>{Gr(r,t,0)});t.asyncDep=o}else Gc(t,o,e)}else of(t,e)}function Gc(t,e,i){Fe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:pt(e)&&(t.setupState=Nd(e)),of(t,i)}let Wc;function of(t,e,i){const n=t.type;if(!t.render){if(!e&&Wc&&!n.render){const s=n.template||Kl(t).template;if(s){const{isCustomElement:o,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Ht(Ht({isCustomElement:o,delimiters:a},r),l);n.render=Wc(s,c)}}t.render=n.render||Si}as(t),fs(),Sm(t),ps(),Ln()}function Km(t){return new Proxy(t.attrs,{get(e,i){return Xt(t,"get","$attrs"),e[i]}})}function qm(t){const e=n=>{t.exposed=n||{}};let i;return{get attrs(){return i||(i=Km(t))},slots:t.slots,emit:t.emit,expose:e}}function Xl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Nd(Td(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Ns)return Ns[i](t)},has(e,i){return i in e||i in Ns}}))}function Ym(t){return Fe(t)&&"__vccOpts"in t}const Te=(t,e)=>jg(t,e,Xs);function Xm(t,e,i){const n=arguments.length;return n===2?pt(e)&&!Oe(e)?fr(e)?z(t,null,[e]):z(t,e):z(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&fr(i)&&(i=[i]),z(t,e,i))}const Jm=Symbol(""),Qm=()=>Go(Jm),Zm="3.2.47",e0="http://www.w3.org/2000/svg",Tn=typeof document<"u"?document:null,Vc=Tn&&Tn.createElement("template"),t0={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e?Tn.createElementNS(e0,t):Tn.createElement(t,i?{is:i}:void 0);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Tn.createTextNode(t),createComment:t=>Tn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Tn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,s,o){const r=i?i.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===o||!(s=s.nextSibling)););else{Vc.innerHTML=n?`<svg>${t}</svg>`:t;const a=Vc.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[r?r.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function i0(t,e,i){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function n0(t,e,i){const n=t.style,s=Pt(i);if(i&&!s){if(e&&!Pt(e))for(const o in e)i[o]==null&&nl(n,o,"");for(const o in i)nl(n,o,i[o])}else{const o=n.display;s?e!==i&&(n.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=o)}}const jc=/\s*!important$/;function nl(t,e,i){if(Oe(i))i.forEach(n=>nl(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=s0(t,e);jc.test(i)?t.setProperty(ds(n),i.replace(jc,""),"important"):t[n]=i}}const Kc=["Webkit","Moz","ms"],ha={};function s0(t,e){const i=ha[e];if(i)return i;let n=os(e);if(n!=="filter"&&n in t)return ha[e]=n;n=_d(n);for(let s=0;s<Kc.length;s++){const o=Kc[s]+n;if(o in t)return ha[e]=o}return e}const qc="http://www.w3.org/1999/xlink";function o0(t,e,i,n,s){if(n&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(qc,e.slice(6,e.length)):t.setAttributeNS(qc,e,i);else{const o=ng(e);i==null||o&&!hd(i)?t.removeAttribute(e):t.setAttribute(e,o?"":i)}}function r0(t,e,i,n,s,o,r){if(e==="innerHTML"||e==="textContent"){n&&r(n,s,o),t[e]=i??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=i;const l=i??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),i==null&&t.removeAttribute(e);return}let a=!1;if(i===""||i==null){const l=typeof t[e];l==="boolean"?i=hd(i):i==null&&l==="string"?(i="",a=!0):l==="number"&&(i=0,a=!0)}try{t[e]=i}catch{}a&&t.removeAttribute(e)}function a0(t,e,i,n){t.addEventListener(e,i,n)}function l0(t,e,i,n){t.removeEventListener(e,i,n)}function c0(t,e,i,n,s=null){const o=t._vei||(t._vei={}),r=o[e];if(n&&r)r.value=n;else{const[a,l]=u0(e);if(n){const c=o[e]=f0(n,s);a0(t,a,c,l)}else r&&(l0(t,a,r,l),o[e]=void 0)}}const Yc=/(?:Once|Passive|Capture)$/;function u0(t){let e;if(Yc.test(t)){e={};let n;for(;n=t.match(Yc);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ds(t.slice(2)),e]}let da=0;const h0=Promise.resolve(),d0=()=>da||(h0.then(()=>da=0),da=Date.now());function f0(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;fi(p0(n,i.value),e,5,[n])};return i.value=t,i.attached=d0(),i}function p0(t,e){if(Oe(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Xc=/^on[a-z]/,g0=(t,e,i,n,s=!1,o,r,a,l)=>{e==="class"?i0(t,n,s):e==="style"?n0(t,i,n):Hr(e)?Ol(e)||c0(t,e,i,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):m0(t,e,n,s))?r0(t,e,n,o,r,a,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),o0(t,e,n,s))};function m0(t,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&Xc.test(e)&&Fe(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Xc.test(e)&&Pt(i)?!1:e in t}const _0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};um.props;const b0=Ht({patchProp:g0},t0);let Jc;function y0(){return Jc||(Jc=Nm(b0))}const v0=(...t)=>{const e=y0().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=S0(n);if(!s)return;const o=e._component;!Fe(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const r=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},e};function S0(t){return Pt(t)?document.querySelector(t):t}function pr(t,e){return(t?Qc(t):"")+Qc(e)}function Qc(t){return t+(t.endsWith(`
`)?"":`
`)}function rf(t){return t instanceof Error?t.message:t instanceof Object?JSON.stringify(t):String(t)}function Zc(t,e,i){return e===0?"0%":(t/e*100).toFixed(i)+"%"}function w0(t){switch(t%100){case 11:case 12:case 13:return t+"th"}switch(t%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd";default:return t+"th"}}function gr(t,e){const i=t.toLowerCase();return e.every(n=>i.includes(n.toLowerCase()))}var dn=(t=>(t.JA="ja",t.EN="en",t))(dn||{});const sl={electronShogi:"Electron",clear:"",open:"",saveOverwrite:"",newRecord:"",newRecordWithBrackets:"",openRecord:"",saveRecord:"",saveRecordAs:"",openAutoSavingDirectory:"",exportPositionImage:"",positionImage:"",close:"",quit:"",editing:"",copyAsKIF:"KIF",copyAsCSA:"CSA",copyAsUSI:"USI",copyAsSFEN:"SFEN",paste:"",copyRecord:"",asKIF:"KIF",asCSA:"CSA",asUSIUntilCurrentMove:"USI()",asUSIAll:"USI()",copyPositionAsSFEN:"(SFEN)",pasteRecordOrPosition:"",appendSpecialMove:"",deleteMoves:"",view:"",toggleFullScreen:"",defaultFontSize:"",largerFontSize:"",smallerFontSize:"",settings:"",config:"",debug:"",toggleDevTools:"",openAppDirectory:"",openSettingDirectory:"",openLogDirectory:"",help:"",openWebSite:"Web",howToUse:"",checkForUpdates:"",game:"",player:"",selectFromHistory:"",noHistory:"",saveHistory:"",version:"",gameProgress:"",allGamesCompleted:"",gameEnded:"",offlineGame:"",csaOnlineGame:"CSA",csaProtocolOnlineGame:"CSA",csaProtocolV121:"CSA1.2.1 ",csaProtocolV121WithPVComment:"CSA1.2.1 ",hostToConnect:"",portNumber:"",password:"",showPassword:"",logout:"",displayGameResults:"",interrupt:"",stopGame:"",resign:"",draw:"",impass:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:"",winByDeclaration:"",declareWinning:"",research:"",startResearch:"",endResearch:"",recordAnalysis:"",analysis:"",analyze:"",stopAnalysis:"",setupPosition:"",startPositionSetup:"",completePositionSetup:"",changeTurn:"",initializePosition:"",appSettings:"",language:"",theme:"",standard:"",green:"",cherryBlossom:"",customImage:"",autumn:"",snow:"",dark:"",piece:"",singleKanjiPiece:"",singleKanjiGothicPiece:"",singleKanjiDarkPiece:"",singleKanjiGothicDarkPiece:"",backgroundImage:"",board:"",pieceStand:"",lightWoodyTexture:"",warmWoodTexture:"",regin:"",displayFileAndRank:"",displayLeftControls:"",displayRightControls:"",tabViewStyle:"",oneColumn:"1",twoColumns:"2",sounds:"",pieceLoudness:"",clockLoudness:"",clockPitch:"",clockSoundTarget:"",anyTurn:"",onlyHumanTurn:"",newlineCharacter:"",old90sMac:"90Mac",autoSavingDirectory:"",select:"",usiProtocol:"USI",translateOptionName:"",functionalOnJapaneseOnly:"",maxStartupTime:"",forDevelopers:"",enableAppLog:"",enableUSILog:"USI",enableCSALog:"CSA",logLevel:"",engineSettings:"",flipBoard:"",file:"",recordFile:"",executableFile:"",imageFile:"",remove:"",deleteMove:"",recordProperties:"",comments:"",moveComments:"",searchLog:"",pv:"",mateShort:"",displayPVShort:"",evaluation:"",eval:"",estimatedWinRate:"",evaluationAndEstimatedWinRate:"",swapEachTurnChange:"",alwaysSenteIsPositive:"",signOfEvaluation:"",winRateCoefficient:"",hideTabView:"",expandTabView:"",sente:"",senteOrShitate:"",gote:"",goteOrUwate:"",swapSenteGote:"",currentPosition:"",time:"",enableEngineTimeout:"",others:"",nextTurn:"",elapsedTime:"",elapsed:"",rank:"",depth:"",searchEngine:"",ponder:"(Ponder)",numberOfThreads:"",multiPV:"PV",startPosition:"",maxMoves:"",gameRepetition:"",autoRelogin:"",swapTurnWhenGameRepetition:"1",outputComments:"",saveRecordAutomatically:"",adjustBoardToHumanPlayer:"",adjustBoardAutomatically:"",startGame:"",startEndCriteria:"",endCriteria1Move:"",outputSettings:"",noOutputs:"",insertCommentToTop:"",appendCommentToBottom:"",overwrite:"",fromPrefix:"",fromSuffix:"",toPrefix:"",toSuffix:"",plySuffix:"",hoursSuffix:"",minutesSuffix:"",secondsSuffix:"",engineManagement:"",engineName:"",author:"",enginePath:"",openDirectory:"",displayName:"",invoke:"",resetToEngineDefaultValues:"",defaultValue:"",noEngineRegistered:"",duplicate:"",add:"",recommended:"",import:"",saveAndClose:"",save:"",saveAs:"",cancel:"",back:"",name:"",prediction:"",best:"",nodes:"Node",hashUsage:"Hash",nonHandicap:"",lanceHandicap:"",rightLanceHandicap:"",bishopHandicap:"",rookHandicap:"",rookLanceHandicap:"",twoPiecesHandicap:"",fourPiecesHandicap:"",sixPiecesHandicap:"",eightPiecesHandicap:"",tsumeShogi:"",doubleKingTsumeShogi:"",startDateTime:"",endDateTime:"",gameDate:"",tournament:"",strategy:"",gameTitle:"",timeLimit:"",place:"",postedOn:"",note:"",senteShortName:"",goteShortName:"",opusNo:"",opusName:"",publishedBy:"",publishedOn:"",source:"",numberOfMoves:"",integrity:"",recordCategory:"",award:"",filterByOptionName:"",filterByEngineName:"",bookStyle:"",gameStyle:"",none:"",bgCover:"1",bgContain:"",bgTile:"",typeCustomTitleHere:"",displayEmptyElements:"",inBrowserLogsOutputToConsoleAndIgnoreThisSetting:"",shouldRestartToApplyLogSettings:"",canOpenLogDirectoryFromMenu:"-",hasNoOldLogCleanUpFeature:"",processingPleaseWait:"",importingFollowingRecordOrPosition:"()",supportsKIFCSAUSI:"KIF/CSA/SFEN",plesePasteRecordIntoTextArea:"",desktopVersionPastesAutomatically:"",someLogsDisabled:"",logsRecommendedForCSAProtocol:"CSA",pleaseEnableLogsAndRestart:"",notSendPVOnStandardCSAProtocol:"CSA",sendPVDoNotUseOnWCSC:"FloodgateWCSC",csaProtocolSendPlaintextPassword:"CSA",passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable:"OS",pleaseUncheckSaveHistoryIfNotWantSave:"",csaProtocolSendPlaintextPasswordRegardlessOfHistory:"CSA",areYouSureWantToQuitGames:"",areYouSureWantToRequestQuit:"",areYouSureWantToClearRecord:"",areYouSureWantToDiscardPosition:"",youCanNotCloseAppWhileCSAOnlineGame:"CSA",fileExtensionNotSupported:"",errorOccuredWhileDisconnectingFromCSAServer:"CSA",failedToConnectToCSAServer:"CSA",disconnectedFromCSAServer:"CSA",csaServerLoginDenied:"CSA",thisFeatureNotAvailableOnWebApp:"Web",failedToSendGoCommand:"go",failedToSendPonderCommand:"ponder",failedToSendStopCommand:"stop",failedToSaveRecord:"",failedToParseSFEN:"SFEN",failedToDetectRecordFormat:"",unknownFileExtension:"",emptyRecordInput:"",invalidPieceName:"",invalidTurn:"",invalidMove:"",invalidMoveNumber:"",invalidDestination:"",pieceNotExists:"",invalidLine:"",invalidHandicap:"",invalidBoard:"",invalidHandPiece:"",invalidUSI:"USI",backgroundImageFileNotSelected:"",boardImageFileNotSelected:"",pieceStandImageFileNotSelected:"",pieceVolumeMustBe0To100Percent:"0%100%",clockVolumeMustBe0To100Percent:"0%100%",clockPitchMustBe220To880Hz:"220Hz880Hz",engineTimeoutMustBe1To300Seconds:"1300",coefficientInSigmoidMustBeGreaterThan0:"0",errorsOccurred:t=>`${t} `,between:(t,e)=>`${t}  ${e} `,addNthEngine:t=>`${t} `,copyOf:t=>`${t} `,keepLatest:t=>`${t}`,areYouSureWantToDeleteFollowingMove:t=>`${t}`,failedToOpenDirectory:t=>`: ${t}`,unexpectedEventSenderPleaseReport(t){return` [${t}]`},unexpectedHTTPMethodPleaseReport(t){return`HTTP [${t}]`},unexpectedRequestURLPleaseReport(t){return`URL [${t}]`},noResponseFromEnginePleaseExtendTimeout(t){return`${t}`}},x0={electronShogi:"Electron Shogi",clear:"Clear",open:"Open",saveOverwrite:"Overwrite",newRecord:"New Record",newRecordWithBrackets:"(New Record)",openRecord:"Open Record",saveRecord:"Save Record",saveRecordAs:"Save Record As",openAutoSavingDirectory:"Open Auto-Saving Directory",exportPositionImage:"Export Position Image",positionImage:"Position Image",close:"Close",quit:"Quit",editing:"Edit",copyAsKIF:"Copy (KIF)",copyAsCSA:"Copy (CSA)",copyAsUSI:"Copy (USI)",copyAsSFEN:"Copy (SFEN)",paste:"Paste",copyRecord:"Copy Record",asKIF:"as KIF",asCSA:"as CSA",asUSIUntilCurrentMove:"as USI (until current move)",asUSIAll:"as USI (all)",copyPositionAsSFEN:"Copy Position (as SFEN)",pasteRecordOrPosition:"Paste Record/Position",appendSpecialMove:"Append Special Move",deleteMoves:"Delete Current Move and Following Moves",view:"View",toggleFullScreen:"Toggle Full Screen",defaultFontSize:"Default Font Size",largerFontSize:"Larger Font Size",smallerFontSize:"Smaller Font Size",settings:"Settings",config:"Config",debug:"Debug",toggleDevTools:"Toggle Developer Tools",openAppDirectory:"Open App Directory",openSettingDirectory:"Open Setting Directory",openLogDirectory:"Open Log Directory",help:"Help",openWebSite:"Open Web Site",howToUse:"How to Use",checkForUpdates:"Check for Updates",game:"Game",player:"Player",selectFromHistory:"Select from History",noHistory:"Empty",saveHistory:"Save History",version:"Version",gameProgress:"Game Progress",allGamesCompleted:"All Games Completed",gameEnded:"Game Ended",offlineGame:"Offline Game",csaOnlineGame:"CSA Online Game",csaProtocolOnlineGame:"Online Game (CSA Protocol)",csaProtocolV121:"CSA Protocol 1.2.1 Standard",csaProtocolV121WithPVComment:"CSA Protocol 1.2.1 with PV Comment",hostToConnect:"Hostname",portNumber:"Port",password:"Password",showPassword:"Show Password",logout:"Logout",displayGameResults:"Display Results",interrupt:"Stop",stopGame:"Stop",resign:"Resign",draw:"Draw",impass:"Impass",repetitionDraw:"Repetition Draw",mate:"Mate",timeout:"Timeout",foulWin:"Foul Win",foulLose:"Foul Lose",enteringOfKing:"Entering of King",winByDefault:"Win by Default",loseByDefault:"Lose by Default",winByDeclaration:"Win by Declaration",declareWinning:"Declare Winning",research:"Research",startResearch:"Start Research",endResearch:"End Research",recordAnalysis:"Record Analysis",analysis:"Analyze",analyze:"Analyze",stopAnalysis:"Stop Analysis",setupPosition:"Setup Position",startPositionSetup:"Start Position Setup",completePositionSetup:"Complete Setup",changeTurn:"Change Turn",initializePosition:"Initialize Position",appSettings:"Preferences",language:"Languages",theme:"Theme",standard:"Standard",green:"Green",cherryBlossom:"Cherry Blossom",customImage:"Custom Image",autumn:"Autumn",snow:"Snow",dark:"Dark",piece:"Piece",singleKanjiPiece:"Single Kanji",singleKanjiGothicPiece:"Single Kanji (Gothic)",singleKanjiDarkPiece:"Single Kanji (Dark)",singleKanjiGothicDarkPiece:"Single Kanji (Gothic, Dark)",backgroundImage:"Background Image",board:"Board Image",pieceStand:"Piece Stand",lightWoodyTexture:"Woody Texture (Light)",warmWoodTexture:"Woody Texture (Warm)",regin:"Regin",displayFileAndRank:"Display File & Rank",displayLeftControls:"Display Left Controls",displayRightControls:"Display Right Controls",tabViewStyle:"Tab View Style",oneColumn:"1 Column",twoColumns:"2 Columns",sounds:"Sounds",pieceLoudness:"Piece Loudness",clockLoudness:"Clock Loudness",clockPitch:"Clock Pitch",clockSoundTarget:"Clock Sound Target",anyTurn:"Any",onlyHumanTurn:"Human",newlineCharacter:"Newline Character",old90sMac:"90's Mac",autoSavingDirectory:"Auto-Saving Directory",select:"Select",usiProtocol:"USI Protocol",translateOptionName:"Translate Option Name",functionalOnJapaneseOnly:"Functional on Japanese Only",maxStartupTime:"Max Startup Time",forDevelopers:"For Developers",enableAppLog:"Enable App Log",enableUSILog:"Enable USI Log",enableCSALog:"Enable CSA Log",logLevel:"Log Level",engineSettings:"Engine Settings",flipBoard:"Flip Board",file:"File",recordFile:"Record File",executableFile:"Executable",imageFile:"Image",remove:"Remove",deleteMove:"Delete Move",recordProperties:"Record Properties",comments:"Comments",moveComments:"Move Comments",searchLog:"Search Log",pv:"PV",mateShort:"M",displayPVShort:"Play",evaluation:"Evaluation",eval:"Eval",estimatedWinRate:"Estimated Win Rate",evaluationAndEstimatedWinRate:"Evaluation & Estimated Win Rate",swapEachTurnChange:"Swap Each Turn Change",alwaysSenteIsPositive:"Always Sente is Positive",signOfEvaluation:"Sign of Evaluation",winRateCoefficient:"Win Rate Coefficient",hideTabView:"Hide",expandTabView:"Expand Tab View",sente:"Sente",senteOrShitate:"Sente (Shitate)",gote:"Gote",goteOrUwate:"Gote (Uwate)",swapSenteGote:"Swap Sente/Gote",currentPosition:"Current Position",time:"Time",enableEngineTimeout:"Enable Engine Timeout",others:"Others",nextTurn:"Next Move",elapsedTime:"Elapsed Time",elapsed:"Elapsed",rank:"Rank",depth:"Depth",searchEngine:"Search Engine",ponder:"Ponder",numberOfThreads:"Threads",multiPV:"Multi PV",startPosition:"Position",maxMoves:"Max Moves",gameRepetition:"Repeat",autoRelogin:"Auto Re-Login",swapTurnWhenGameRepetition:"Swap Turns When Repeat",outputComments:"Output Comments",saveRecordAutomatically:"Save Record Automatically",adjustBoardToHumanPlayer:"Adjust Board to Human Player",adjustBoardAutomatically:"Adjust Board Automatically",startGame:"Start Game",startEndCriteria:"Start/End Criteria",endCriteria1Move:"End Criteria for 1 Move",outputSettings:"Output Settings",noOutputs:"No Outputs",insertCommentToTop:"Insert to Top",appendCommentToBottom:"Append to Bottom",overwrite:"Overwrite",fromPrefix:"from",fromSuffix:"",toPrefix:"to",toSuffix:"",plySuffix:"th move",hoursSuffix:"h",minutesSuffix:"min",secondsSuffix:"sec",engineManagement:"Engine Management",engineName:"Engine Name",author:"Author",enginePath:"Engine Path",openDirectory:"Open Directory",displayName:"Display Name",invoke:"Invoke",resetToEngineDefaultValues:"Reset to default values",defaultValue:"Default Value",noEngineRegistered:"No engine",duplicate:"Copy",add:"Add",recommended:"Recommended",import:"Import",saveAndClose:"Save & Close",save:"Save",saveAs:"Save As",cancel:"Cancel",back:"Back",name:"Name",prediction:"Prediction",best:"Best",nodes:"Nodes",hashUsage:"Hash Usage",nonHandicap:"Non-Handicap",lanceHandicap:"Lance Handicap",rightLanceHandicap:"Right Lance Handicap",bishopHandicap:"Bishop Handicap",rookHandicap:"Rook Handicap",rookLanceHandicap:"Rook-Lance Handicap",twoPiecesHandicap:"2 Pieces Handicap",fourPiecesHandicap:"4 Pieces Handicap",sixPiecesHandicap:"6 Pieces Handicap",eightPiecesHandicap:"8 Pieces Handicap",tsumeShogi:"Tsume Shogi",doubleKingTsumeShogi:"2-Kings Tsume Shogi",startDateTime:"Start",endDateTime:"End",gameDate:"Date",tournament:"Tournament",strategy:"Strategy",gameTitle:"Title",timeLimit:"Time Limit",place:"Place",postedOn:"Posted On",note:"Note",senteShortName:"Sente(short)",goteShortName:"Gote(short)",opusNo:"Opus No.",opusName:"Opus Name",publishedBy:"Published By",publishedOn:"Published On",source:"Source",numberOfMoves:"Number of Moves",integrity:"Integrity",recordCategory:"Category",award:"Award",filterByOptionName:"Filter by Option Name",filterByEngineName:"Filter by Engine Name",bookStyle:"Book Style",gameStyle:"Game Style",none:"None",bgCover:"Cover",bgContain:"Contain",bgTile:"Tile",typeCustomTitleHere:"Type custom title here",displayEmptyElements:"Display Empty Elements",inBrowserLogsOutputToConsoleAndIgnoreThisSetting:"*In web browser version, it will output logs to console and ignore this setting.",shouldRestartToApplyLogSettings:"*You should restart this app to apply log settings.",canOpenLogDirectoryFromMenu:'*You can open log directory from "Debug" - "Open Log Directory" menu.',hasNoOldLogCleanUpFeature:"*This app has no clean-up feature. Please remove old logs manually.",processingPleaseWait:"Processing, please wait.",importingFollowingRecordOrPosition:"Importing the following record(or position).",supportsKIFCSAUSI:"*Supports KIF, CSA, USI.",plesePasteRecordIntoTextArea:"*Please paste record data into the text area.",desktopVersionPastesAutomatically:"*In desktop version, it will paste automatically from clipboard.",someLogsDisabled:"Some log settings are disabled.",logsRecommendedForCSAProtocol:"Log settings are recommended for CSA protocol.",pleaseEnableLogsAndRestart:"Please enable log settings and restart this app.",notSendPVOnStandardCSAProtocol:"Client do not send PV on standard CSA protocol.",sendPVDoNotUseOnWCSC:"Client send PV by floodgate extension. Do not use on WCSC.",csaProtocolSendPlaintextPassword:"On CSA protocol, client send plaintext password.",passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable:"Password will saved as plaintext because OS side encryption is not available.",pleaseUncheckSaveHistoryIfNotWantSave:"Please uncheck Save History, if you don't want to save.",csaProtocolSendPlaintextPasswordRegardlessOfHistory:"On CSA protocol, client send plaintext password regardless of history.",areYouSureWantToQuitGames:"Are you sure you want to quit games?",areYouSureWantToRequestQuit:"You have possibility to be loser. Are you sure you want to request quit?",areYouSureWantToClearRecord:"Are you sure you want to clear record?",areYouSureWantToDiscardPosition:"Are you sure you want to discard the position?",youCanNotCloseAppWhileCSAOnlineGame:"You can not close app while CSA online game.",fileExtensionNotSupported:"File extension is not supported.",errorOccuredWhileDisconnectingFromCSAServer:"An error occured while disconnecting from CSA server.",failedToConnectToCSAServer:"Failed to connect to CSA server.",disconnectedFromCSAServer:"Disconnected from CSA server.",csaServerLoginDenied:"CSA server login denied.",thisFeatureNotAvailableOnWebApp:"This feature is not available on web app.",failedToSendGoCommand:"Failed to send go-command.",failedToSendPonderCommand:"Failed to send ponder-command.",failedToSendStopCommand:"Failed to send stop-command.",failedToSaveRecord:"Failed to save record.",failedToParseSFEN:"Failed to parse SFEN.",failedToDetectRecordFormat:"Failed to detect record format.",unknownFileExtension:"Unknown file extension.",emptyRecordInput:"Empty record input.",invalidPieceName:"Invalid piece name",invalidTurn:"Invalid turn",invalidMove:"Invalid move",invalidMoveNumber:"Invalid move number",invalidDestination:"Invalid destination",pieceNotExists:"Piece not exists",invalidLine:"Invalid line",invalidHandicap:"Invalid handicap",invalidBoard:"Invalid board",invalidHandPiece:"Invalid hand piece",invalidUSI:"Invalid USI",backgroundImageFileNotSelected:"Background image file is not selected.",boardImageFileNotSelected:"Board image file is not selected.",pieceStandImageFileNotSelected:"Piece stand image file is not selected.",pieceVolumeMustBe0To100Percent:"Piece volume must be 0% to 100%.",clockVolumeMustBe0To100Percent:"Clock volume must be 0% to 100%.",clockPitchMustBe220To880Hz:"Clock pitch must be 220Hz to 880Hz.",engineTimeoutMustBe1To300Seconds:"Engine timeout must be 1 to 300 seconds.",coefficientInSigmoidMustBeGreaterThan0:"Coefficient in sigmoid must be greater than 0.",errorsOccurred:t=>t>=2?`${t} errors have occurred.`:`${t} error has occurred.`,between:(t,e)=>`between ${t} and ${e}`,addNthEngine:t=>`Add ${w0(t)} engine`,copyOf:t=>`${t} (copy)`,keepLatest:t=>`keep latest ${t}`,areYouSureWantToDeleteFollowingMove:t=>`Are you sure you want to delete ${t}th move and the following move?`,failedToOpenDirectory:t=>`Failed to open directory of the file: ${t}`,unexpectedEventSenderPleaseReport(t){return`Unexpected event sender. Please report this error message to developer. [${t}]`},unexpectedHTTPMethodPleaseReport(t){return`Unexpected HTTP method. Please report this error message to developer. [${t}]`},unexpectedRequestURLPleaseReport(t){return`Unexpected request URL. Please report this error message to developer. [${t}]`},noResponseFromEnginePleaseExtendTimeout(t){return`No response from engine while ${t} seconds. Please extend timeout at app settings, if your engine is slow.`}},x=sl;function E0(t){switch(t){case dn.JA:return sl;case dn.EN:return x0;default:return sl}}function k0(t){Object.entries(E0(t)).forEach(([e,i])=>{x[e]=i})}const I0={USI_Ponder:"",Ponder:"",USI_Hash:"",Hash:"",Clear_Hash:"",Threads:"",NumberOfThreads:"",thread_num_per_gpu:"GPU",ThreadIdOffset:"ID",MultiPV:"PV",BookFile:"",Book_File:"",Book_Enable:"",BookEvalDiff:"",book_file_name:"",use_book:"",BookPvMoves:"PV",TinyBook:"",BookMoves:"",BookMaxPly:"",BookIgnoreRate:"",RandomBookSelect:"",IgnoreBookPly:"",DepthLimit:"",NarrowBook:"",WriteDebugLog:"",Write_Debug_Log:"",ResignValue:"",ResignScore:"",PvInterval:"PV",NodesLimit:"",USI_OwnBook:"",OwnBook:"",EvalDir:"",Eval_Dir:"",EvalFile:"",EvalHash:"",Eval_Hash:"",EvalSaveDir:"",EvalShare:"",BookDir:"",Stochastic_Ponder:"",MinimumThinkingTime:"",Minimum_Thinking_Time:"",MinThinkingTime:"",MaxMovesToDraw:"",SlowMover:"",Slow_Mover:"",OutputFailLHPV:"Fail Low/High",NetworkDelay:"",NetworkDelay2:"2",FV_SCALE:"",UseBook:"",MaxDepth:"",MarginMs:"",Time_Margin:"",ByoyomiMargin:"",Byoyomi_Margin:"",byoyomi_margin:"",Move_Overhead:"",FischerMargin:"",SuddenDeathMargin:"",Snappy:"",EnteringKingRule:"",Do_YoTsume_Search:"",gpu_num:"GPU",ConsiderationMode:"",ConsiderBookMoveCount:"",GenerateAllLegalMoves:"",DrawScore:"",DrawValue:"",DrawValueBlack:"",DrawValueWhite:"",LargePageEnable:"LargePage",SkillLevel:"",Skill_Level:""},Vo={};function A0(t){switch(t){case dn.JA:return I0;case dn.EN:return{};default:return{}}}function P0(t){Object.keys(Vo).forEach(e=>{delete Vo[e]}),Object.entries(A0(t)).forEach(([e,i])=>{Vo[e]=i})}class Xr extends Error{constructor(e){super(`Invalid piece name: ${e}`),this.data=e,this.name="InvalidPieceNameError"}}class af extends Error{constructor(e){super(`Invalid turn: ${e}`),this.data=e,this.name="InvalidTurnError"}}class Js extends Error{constructor(e){super(`Invalid move: ${e}`),this.data=e,this.name="InvalidMoveError"}}class lf extends Error{constructor(e){super(`Invalid move number: ${e}`),this.data=e,this.name="InvalidMoveNumberError"}}class cf extends Error{constructor(e){super(`Invalid destination: ${e}`),this.data=e,this.name="InvalidDestinationError"}}class ol extends Error{constructor(e){super(`Piece not exists: ${e}`),this.data=e,this.name="PieceNotExistsError"}}class Jl extends Error{constructor(e){super(`Invalid line: ${e}`),this.data=e,this.name="InvalidLineError"}}class uf extends Error{constructor(e){super(`Invalid handicap: ${e}`),this.data=e,this.name="InvalidHandicapError"}}class rl extends Error{constructor(e){super(`Invalid board: ${e}`),this.data=e,this.name="InvalidBoardError"}}class hf extends Error{constructor(e){super(`Invalid hand piece: ${e}`),this.data=e,this.name="InvalidHandPieceError"}}class xs extends Error{constructor(e){super(`Invalid USI: ${e}`),this.data=e,this.name="InvalidUSIError"}}var U=(t=>(t.BLACK="black",t.WHITE="white",t))(U||{});function Ot(t){return t==="black"?"white":"black"}function C0(t){return t==="black"?"b":"w"}function T0(t){return t==="b"||t==="w"}function M0(t){return t==="b"?"black":"white"}var $=(t=>(t.PAWN="pawn",t.LANCE="lance",t.KNIGHT="knight",t.SILVER="silver",t.GOLD="gold",t.BISHOP="bishop",t.ROOK="rook",t.KING="king",t.PROM_PAWN="promPawn",t.PROM_LANCE="promLance",t.PROM_KNIGHT="promKnight",t.PROM_SILVER="promSilver",t.HORSE="horse",t.DRAGON="dragon",t))($||{});const R0=["pawn","lance","knight","silver","gold","bishop","rook"],N0={pawn:!0,lance:!0,knight:!0,silver:!0,gold:!1,bishop:!0,rook:!0,king:!1,promPawn:!1,promLance:!1,promKnight:!1,promSilver:!1,horse:!1,dragon:!1},df={pawn:"promPawn",lance:"promLance",knight:"promKnight",silver:"promSilver",bishop:"horse",rook:"dragon"};function O0(t){return df[t]||t}const L0={promPawn:"pawn",promLance:"lance",promKnight:"knight",promSilver:"silver",horse:"bishop",dragon:"rook"},ff={pawn:"P",lance:"L",knight:"N",silver:"S",gold:"G",bishop:"B",rook:"R",king:"K",promPawn:"+P",promLance:"+L",promKnight:"+N",promSilver:"+S",horse:"+B",dragon:"+R"};function D0(t){return ff[t]}const B0={pawn:"p",lance:"l",knight:"n",silver:"s",gold:"g",bishop:"b",rook:"r",king:"k",promPawn:"+p",promLance:"+l",promKnight:"+n",promSilver:"+s",horse:"+b",dragon:"+r"},eu={P:"pawn",L:"lance",N:"knight",S:"silver",G:"gold",B:"bishop",R:"rook",K:"king","+P":"promPawn","+L":"promLance","+N":"promKnight","+S":"promSilver","+B":"horse","+R":"dragon",p:"pawn",l:"lance",n:"knight",s:"silver",g:"gold",b:"bishop",r:"rook",k:"king","+p":"promPawn","+l":"promLance","+n":"promKnight","+s":"promSilver","+b":"horse","+r":"dragon"},F0={P:U.BLACK,L:U.BLACK,N:U.BLACK,S:U.BLACK,G:U.BLACK,B:U.BLACK,R:U.BLACK,K:U.BLACK,"+P":U.BLACK,"+L":U.BLACK,"+N":U.BLACK,"+S":U.BLACK,"+B":U.BLACK,"+R":U.BLACK,p:U.WHITE,l:U.WHITE,n:U.WHITE,s:U.WHITE,g:U.WHITE,b:U.WHITE,r:U.WHITE,k:U.WHITE,"+p":U.WHITE,"+l":U.WHITE,"+n":U.WHITE,"+s":U.WHITE,"+b":U.WHITE,"+r":U.WHITE},Wt=new Map;Wt.set("pawn",{type:"promPawn",reverseColor:!1});Wt.set("lance",{type:"promLance",reverseColor:!1});Wt.set("knight",{type:"promKnight",reverseColor:!1});Wt.set("silver",{type:"promSilver",reverseColor:!1});Wt.set("gold",{type:"gold",reverseColor:!0});Wt.set("bishop",{type:"horse",reverseColor:!1});Wt.set("rook",{type:"dragon",reverseColor:!1});Wt.set("king",{type:"king",reverseColor:!0});Wt.set("promPawn",{type:"pawn",reverseColor:!0});Wt.set("promLance",{type:"lance",reverseColor:!0});Wt.set("promKnight",{type:"knight",reverseColor:!0});Wt.set("promSilver",{type:"silver",reverseColor:!0});Wt.set("horse",{type:"bishop",reverseColor:!0});Wt.set("dragon",{type:"rook",reverseColor:!0});class be{constructor(e,i){this.color=e,this.type=i}black(){return this.withColor(U.BLACK)}white(){return this.withColor(U.WHITE)}withColor(e){return new be(e,this.type)}equals(e){return this.type===e.type&&this.color===e.color}promoted(){const e=df[this.type];return new be(this.color,e||this.type)}unpromoted(){const e=L0[this.type];return new be(this.color,e||this.type)}isPromotable(){return!!N0[this.type]}rotate(){const e=Wt.get(this.type),i=new be(this.color,e?e.type:this.type);return e&&e.reverseColor&&(i.color=Ot(this.color)),i}get id(){return this.color+"_"+this.type}get sfen(){switch(this.color){default:case U.BLACK:return ff[this.type];case U.WHITE:return B0[this.type]}}static isValidSFEN(e){return!!eu[e]}static newBySFEN(e){const i=eu[e];if(!i)return null;const n=F0[e];return n?new be(n,i):null}}var zt=(t=>(t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t.LEFT_UP="left_up",t.RIGHT_UP="right_up",t.LEFT_DOWN="left_down",t.RIGHT_DOWN="right_down",t.LEFT_UP_KNIGHT="left_up_knight",t.RIGHT_UP_KNIGHT="right_up_knight",t.LEFT_DOWN_KNIGHT="left_down_knight",t.RIGHT_DOWN_KNIGHT="right_down_knight",t))(zt||{});const H0={up:"down",down:"up",left:"right",right:"left",left_up:"right_down",right_up:"left_down",left_down:"right_up",right_down:"left_up",left_up_knight:"right_down_knight",right_up_knight:"left_down_knight",left_down_knight:"right_up_knight",right_down_knight:"left_up_knight"};function mr(t){return H0[t]}const $0=["up","down","left","right","left_up","right_up","left_down","right_down","left_up_knight","right_up_knight","left_down_knight","right_down_knight"];var Qs=(t=>(t.SHORT="short",t.LONG="long",t))(Qs||{});const pf={black:{pawn:{up:"short"},lance:{up:"long"},knight:{left_up_knight:"short",right_up_knight:"short"},silver:{left_up:"short",up:"short",right_up:"short",left_down:"short",right_down:"short"},gold:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},bishop:{left_up:"long",right_up:"long",left_down:"long",right_down:"long"},rook:{up:"long",left:"long",right:"long",down:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promLance:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promKnight:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},promSilver:{left_up:"short",up:"short",right_up:"short",left:"short",right:"short",down:"short"},horse:{left_up:"long",right_up:"long",left_down:"long",right_down:"long",up:"short",left:"short",right:"short",down:"short"},dragon:{up:"long",left:"long",right:"long",down:"long",left_up:"short",right_up:"short",left_down:"short",right_down:"short"}},white:{pawn:{down:"short"},lance:{down:"long"},knight:{left_down_knight:"short",right_down_knight:"short"},silver:{left_down:"short",down:"short",right_down:"short",left_up:"short",right_up:"short"},gold:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},bishop:{left_down:"long",right_down:"long",left_up:"long",right_up:"long"},rook:{down:"long",left:"long",right:"long",up:"long"},king:{left_down:"short",right_down:"short",left_up:"short",right_up:"short",down:"short",left:"short",right:"short",up:"short"},promPawn:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promLance:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promKnight:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},promSilver:{left_down:"short",down:"short",right_down:"short",left:"short",right:"short",up:"short"},horse:{left_down:"long",right_down:"long",left_up:"long",right_up:"long",down:"short",left:"short",right:"short",up:"short"},dragon:{down:"long",left:"long",right:"long",up:"long",left_down:"short",right_down:"short",left_up:"short",right_up:"short"}}};function U0(t){return Object.keys(pf[t.color][t.type])}function gf(t,e){return pf[t.color][t.type][e]}const z0={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},left_up:{x:-1,y:-1},right_up:{x:1,y:-1},left_down:{x:-1,y:1},right_down:{x:1,y:1},left_up_knight:{x:-1,y:-2},right_up_knight:{x:1,y:-2},left_down_knight:{x:-1,y:2},right_down_knight:{x:1,y:2}};function mf(t,e){if(t===1&&e===-2)return{direction:"right_up_knight",distance:1,ok:!0};if(t===-1&&e===-2)return{direction:"left_up_knight",distance:1,ok:!0};if(t===1&&e===2)return{direction:"right_down_knight",distance:1,ok:!0};if(t===-1&&e===2)return{direction:"left_down_knight",distance:1,ok:!0};if(t!==0&&e!==0&&Math.abs(t)!==Math.abs(e))return{direction:"",distance:0,ok:!1};let i=t,n=e,s=0;return i!==0&&(s=Math.abs(i),i/=s),n!==0&&(s=Math.abs(n),n/=s),i===-1&&n===-1?{direction:"left_up",distance:s,ok:!0}:i===0&&n===-1?{direction:"up",distance:s,ok:!0}:i===1&&n===-1?{direction:"right_up",distance:s,ok:!0}:i===-1&&n===0?{direction:"left",distance:s,ok:!0}:i===1&&n===0?{direction:"right",distance:s,ok:!0}:i===-1&&n===1?{direction:"left_down",distance:s,ok:!0}:i===0&&n===1?{direction:"down",distance:s,ok:!0}:i===1&&n===1?{direction:"right_down",distance:s,ok:!0}:{direction:"",distance:0,ok:!1}}var Dn=(t=>(t.UP="up",t.NONE="none",t.DOWN="down",t))(Dn||{});function jo(t){switch(t){case"up":case"left_up":case"right_up":case"left_up_knight":case"right_up_knight":return"up";case"down":case"left_down":case"right_down":case"left_down_knight":case"right_down_knight":return"down";default:return"none"}}var ei=(t=>(t.LEFT="left",t.NONE="none",t.RIGHT="right",t))(ei||{});function Ko(t){switch(t){case"left":case"left_up":case"left_down":case"left_up_knight":case"left_down_knight":return"left";case"right":case"right_up":case"right_down":case"right_up_knight":case"right_down_knight":return"right";default:return"none"}}function G0(t){switch(t){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}function W0(t){switch(t){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;case"i":return 9;default:return null}}const V0=["a","b","c","d","e","f","g","h","i"],It=class{constructor(e,i){this.file=e,this.rank=i}get x(){return 9-this.file}get y(){return this.rank-1}get index(){return this.y*9+this.x}get opposite(){return new It(10-this.file,10-this.rank)}neighbor(e,i){switch(e){case zt.UP:return new It(this.file,this.rank-1);case zt.DOWN:return new It(this.file,this.rank+1);case zt.LEFT:return new It(this.file+1,this.rank);case zt.RIGHT:return new It(this.file-1,this.rank);case zt.LEFT_UP:return new It(this.file+1,this.rank-1);case zt.RIGHT_UP:return new It(this.file-1,this.rank-1);case zt.LEFT_DOWN:return new It(this.file+1,this.rank+1);case zt.RIGHT_DOWN:return new It(this.file-1,this.rank+1);case zt.LEFT_UP_KNIGHT:return new It(this.file+1,this.rank-2);case zt.RIGHT_UP_KNIGHT:return new It(this.file-1,this.rank-2);case zt.LEFT_DOWN_KNIGHT:return new It(this.file+1,this.rank+2);case zt.RIGHT_DOWN_KNIGHT:return new It(this.file-1,this.rank+2)}const n=e,s=i;return new It(this.file-n,this.rank+s)}directionTo(e){return mf(e.x-this.x,e.y-this.y).direction}get valid(){return this.file>=1&&this.file<=9&&this.rank>=1&&this.rank<=9}equals(e){return!!e&&this.file===e.file&&this.rank===e.rank}static newByXY(e,i){return new It(9-e,i+1)}static newByIndex(e){return new It(9-e%9,Math.trunc(e/9)+1)}get sfen(){return this.file+V0[this.rank-1]}static parseSFENSquare(e){const i=G0(e[0]),n=W0(e[1]);return!i||!n?null:new It(i,n)}};let j=It;L(j,"all",[]);for(let t=0;t<81;t+=1)j.all.push(j.newByIndex(t));class ct{constructor(e,i,n,s,o,r){this.from=e,this.to=i,this.promote=n,this.color=s,this.pieceType=o,this.capturedPieceType=r}equals(e){return e?(this.from instanceof j&&e.from instanceof j&&this.from.equals(e.from)||!(this.from instanceof j)&&!(e.from instanceof j)&&this.from===e.from)&&this.to.equals(e.to)&&this.promote===e.promote&&this.color===e.color&&this.pieceType===e.pieceType&&this.capturedPieceType===e.capturedPieceType:!1}withPromote(){return new ct(this.from,this.to,!0,this.color,this.pieceType,this.capturedPieceType)}get usi(){let e="";return this.from instanceof j?e+=this.from.sfen:e+=D0(this.from)+"*",e+=this.to.sfen,this.promote&&(e+="+"),e}}function _f(t){let e;if(t[1]==="*"){const s=be.newBySFEN(t[0]);if(!s)return null;e=s.type}else{const s=j.parseSFENSquare(t);if(!s)return null;e=s}const i=j.parseSFENSquare(t.substring(2));if(!i)return null;const n=t.length>=5&&t[4]==="+";return{from:e,to:i,promote:n}}var Ce=(t=>(t.STANDARD="standard",t.EMPTY="empty",t.HANDICAP_LANCE="handicapLance",t.HANDICAP_RIGHT_LANCE="handicapRightLance",t.HANDICAP_BISHOP="handicapBishop",t.HANDICAP_ROOK="handicapRook",t.HANDICAP_ROOK_LANCE="handicapRookLance",t.HANDICAP_2PIECES="handicap2Pieces",t.HANDICAP_4PIECES="handicap4Pieces",t.HANDICAP_6PIECES="handicap6Pieces",t.HANDICAP_8PIECES="handicap8Pieces",t.TSUME_SHOGI="tsumeShogi",t.TSUME_SHOGI_2KINGS="tsumeShogi2Kings",t))(Ce||{});function tu(t){switch(t){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}class _r{constructor(){L(this,"squares");this.squares=new Array;for(let e=0;e<81;e+=1)this.squares.push(null);this.reset("standard")}at(e){return this.squares[e.index]}set(e,i){this.squares[e.index]=i}swap(e,i){const n=this.squares[e.index];this.squares[e.index]=this.squares[i.index],this.squares[i.index]=n}remove(e){const i=this.squares[e.index];return this.squares[e.index]=null,i}listNonEmptySquares(){return j.all.filter(e=>this.squares[e.index])}listSquaresByColor(e){return j.all.filter(i=>{const n=this.squares[i.index];return n&&n.color===e})}listSquaresByPiece(e){return j.all.filter(i=>{const n=this.squares[i.index];return n&&e.equals(n)})}clear(){j.all.forEach(e=>{this.squares[e.index]=null})}reset(e){if(this.clear(),e!=="empty"&&(this.squares[new j(5,1).index]=new be(U.WHITE,$.KING),e!=="tsumeShogi"&&(this.squares[new j(5,9).index]=new be(U.BLACK,$.KING),e!=="tsumeShogi2Kings")))switch(this.squares[new j(2,8).index]=new be(U.BLACK,$.ROOK),this.squares[new j(8,2).index]=new be(U.WHITE,$.ROOK),this.squares[new j(8,8).index]=new be(U.BLACK,$.BISHOP),this.squares[new j(2,2).index]=new be(U.WHITE,$.BISHOP),this.squares[new j(4,9).index]=new be(U.BLACK,$.GOLD),this.squares[new j(6,9).index]=new be(U.BLACK,$.GOLD),this.squares[new j(6,1).index]=new be(U.WHITE,$.GOLD),this.squares[new j(4,1).index]=new be(U.WHITE,$.GOLD),this.squares[new j(3,9).index]=new be(U.BLACK,$.SILVER),this.squares[new j(7,9).index]=new be(U.BLACK,$.SILVER),this.squares[new j(7,1).index]=new be(U.WHITE,$.SILVER),this.squares[new j(3,1).index]=new be(U.WHITE,$.SILVER),this.squares[new j(2,9).index]=new be(U.BLACK,$.KNIGHT),this.squares[new j(8,9).index]=new be(U.BLACK,$.KNIGHT),this.squares[new j(8,1).index]=new be(U.WHITE,$.KNIGHT),this.squares[new j(2,1).index]=new be(U.WHITE,$.KNIGHT),this.squares[new j(1,9).index]=new be(U.BLACK,$.LANCE),this.squares[new j(9,9).index]=new be(U.BLACK,$.LANCE),this.squares[new j(9,1).index]=new be(U.WHITE,$.LANCE),this.squares[new j(1,1).index]=new be(U.WHITE,$.LANCE),this.squares[new j(1,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(2,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(3,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(4,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(5,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(6,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(7,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(8,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(9,7).index]=new be(U.BLACK,$.PAWN),this.squares[new j(1,3).index]=new be(U.WHITE,$.PAWN),this.squares[new j(2,3).index]=new be(U.WHITE,$.PAWN),this.squares[new j(3,3).index]=new be(U.WHITE,$.PAWN),this.squares[new j(4,3).index]=new be(U.WHITE,$.PAWN),this.squares[new j(5,3).index]=new be(U.WHITE,$.PAWN),this.squares[new j(6,3).index]=new be(U.WHITE,$.PAWN),this.squares[new j(7,3).index]=new be(U.WHITE,$.PAWN),this.squares[new j(8,3).index]=new be(U.WHITE,$.PAWN),this.squares[new j(9,3).index]=new be(U.WHITE,$.PAWN),e){default:case"standard":return;case"handicapLance":this.squares[new j(1,1).index]=null;return;case"handicapRightLance":this.squares[new j(9,1).index]=null;return;case"handicapBishop":this.squares[new j(2,2).index]=null;return;case"handicapRook":this.squares[new j(8,2).index]=null;return;case"handicapRookLance":this.squares[new j(8,2).index]=null,this.squares[new j(1,1).index]=null;return;case"handicap2Pieces":this.squares[new j(8,2).index]=null,this.squares[new j(2,2).index]=null;return;case"handicap4Pieces":this.squares[new j(8,2).index]=null,this.squares[new j(2,2).index]=null,this.squares[new j(1,1).index]=null,this.squares[new j(9,1).index]=null;return;case"handicap6Pieces":this.squares[new j(8,2).index]=null,this.squares[new j(2,2).index]=null,this.squares[new j(1,1).index]=null,this.squares[new j(2,1).index]=null,this.squares[new j(8,1).index]=null,this.squares[new j(9,1).index]=null;return;case"handicap8Pieces":this.squares[new j(8,2).index]=null,this.squares[new j(2,2).index]=null,this.squares[new j(1,1).index]=null,this.squares[new j(2,1).index]=null,this.squares[new j(3,1).index]=null,this.squares[new j(7,1).index]=null,this.squares[new j(8,1).index]=null,this.squares[new j(9,1).index]=null;return}}get sfen(){let e="",i=0;for(let n=0;n<9;n+=1){for(let s=0;s<9;s+=1){const o=this.at(j.newByXY(s,n));o?(i&&(e+=i,i=0),e+=o.sfen):i+=1}i&&(e+=i,i=0),n!==8&&(e+="/")}return e}resetBySFEN(e){if(!_r.isValidSFEN(e))return!1;this.clear();const i=e.split("/");for(let n=0;n<9;n+=1){let s=0;for(let o=0;o<i[n].length;o+=1){let r=i[n][o];r==="+"&&(o+=1,r+=i[n][o]);const a=tu(r);a?s+=a:(this.set(j.newByXY(s,n),be.newBySFEN(r)),s+=1)}}return!0}findKing(e){const i=new be(e,$.KING);return j.all.find(n=>{const s=this.at(n);if(s&&i.equals(s))return!0})}hasPower(e,i,n){return!!$0.find(s=>{let o=0;for(let r=e.neighbor(s);r.valid&&(o+=1,!(n&&n.filled&&r.equals(n.filled)));r=r.neighbor(s)){if(n&&n.ignore&&r.equals(n.ignore))continue;const a=this.at(r);if(a){if(a.color!==i)return!1;const l=mr(s),c=gf(a,l);return c===Qs.LONG||c===Qs.SHORT&&o===1}}return!1})}isChecked(e,i){const n=this.findKing(e);return n?this.hasPower(n,Ot(e),{filled:i&&i.filled,ignore:i&&i.ignore}):!1}static isValidSFEN(e){const i=e.split("/");if(i.length!==9)return!1;for(let n=0;n<9;n+=1){let s=0;for(let o=0;o<i[n].length;o+=1){let r=i[n][o];r==="+"&&(o+=1,r+=i[n][o]);const a=tu(r);if(a)s+=a;else if(be.isValidSFEN(r))s+=1;else return!1}if(s!==9)return!1}return!0}copyFrom(e){j.all.forEach(i=>{this.squares[i.index]=e.at(i)})}}function vn(t,e){return t===0?"":(t!==1?t:"")+e.sfen}class li{constructor(){L(this,"pieces");this.pieces=new Map,this.pieces.set($.PAWN,0),this.pieces.set($.LANCE,0),this.pieces.set($.KNIGHT,0),this.pieces.set($.SILVER,0),this.pieces.set($.GOLD,0),this.pieces.set($.BISHOP,0),this.pieces.set($.ROOK,0)}get counts(){return[{type:$.ROOK,count:this.count($.ROOK)},{type:$.BISHOP,count:this.count($.BISHOP)},{type:$.GOLD,count:this.count($.GOLD)},{type:$.SILVER,count:this.count($.SILVER)},{type:$.KNIGHT,count:this.count($.KNIGHT)},{type:$.LANCE,count:this.count($.LANCE)},{type:$.PAWN,count:this.count($.PAWN)}]}count(e){return this.pieces.get(e)}set(e,i){this.pieces.set(e,i)}add(e,i){let n=this.pieces.get(e);return n+=i,this.pieces.set(e,n),n}reduce(e,i){let n=this.pieces.get(e);return n-=i,this.pieces.set(e,n),n}forEach(e){e($.PAWN,this.pieces.get($.PAWN)),e($.LANCE,this.pieces.get($.LANCE)),e($.KNIGHT,this.pieces.get($.KNIGHT)),e($.SILVER,this.pieces.get($.SILVER)),e($.GOLD,this.pieces.get($.GOLD)),e($.BISHOP,this.pieces.get($.BISHOP)),e($.ROOK,this.pieces.get($.ROOK))}get sfenBlack(){return this.formatSFEN(U.BLACK)}get sfenWhite(){return this.formatSFEN(U.WHITE)}formatSFEN(e){let i="";return i+=vn(this.count($.ROOK),new be(e,$.ROOK)),i+=vn(this.count($.BISHOP),new be(e,$.BISHOP)),i+=vn(this.count($.GOLD),new be(e,$.GOLD)),i+=vn(this.count($.SILVER),new be(e,$.SILVER)),i+=vn(this.count($.KNIGHT),new be(e,$.KNIGHT)),i+=vn(this.count($.LANCE),new be(e,$.LANCE)),i+=vn(this.count($.PAWN),new be(e,$.PAWN)),i===""?"-":i}static formatSFEN(e,i){const n=e.sfenBlack,s=i.sfenWhite;return n==="-"&&s==="-"?"-":s==="-"?n:n==="-"?s:n+s}static isValidSFEN(e){return e==="-"?!0:!!e.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)}static parseSFEN(e){if(e==="-")return{black:new li,white:new li};if(!e.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/))return null;const i=e.match(/([0-9]*[PLNSGBRplnsgbr])/g),n=new li,s=new li;for(let o=0;o<i.length;o+=1){const r=i[o];let a=1;r.length>=2&&(a=Number(r.substring(0,r.length-1)));const l=be.newBySFEN(r[r.length-1]);l.color===U.BLACK?n.add(l.type,a):s.add(l.type,a)}return{black:n,white:s}}copyFrom(e){e.pieces.forEach((i,n)=>{this.pieces.set(n,i)})}}const j0={black:{pawn:{1:!0},lance:{1:!0},knight:{1:!0,2:!0}},white:{pawn:{9:!0},lance:{9:!0},knight:{9:!0,8:!0}}};function iu(t,e,i){const n=j0[t][e];return n?n[i]:!1}function br(t,e){return t===U.BLACK?e<=3:e>=7}function K0(t,e,i){for(let n=1;n<=9;n+=1){const s=e.at(new j(i,n));if(s&&s.type===$.PAWN&&s.color===t)return!0}return!1}class Dt{constructor(){L(this,"_board",new _r);L(this,"_color",U.BLACK);L(this,"_blackHand",new li);L(this,"_whiteHand",new li)}get board(){return this._board}get color(){return this._color}get blackHand(){return this._blackHand}get whiteHand(){return this._whiteHand}reset(e){switch(this._board.reset(e),this._blackHand=new li,this._whiteHand=new li,e){case Ce.STANDARD:case Ce.EMPTY:case Ce.TSUME_SHOGI:case Ce.TSUME_SHOGI_2KINGS:this._color=U.BLACK;break;case Ce.HANDICAP_LANCE:case Ce.HANDICAP_RIGHT_LANCE:case Ce.HANDICAP_BISHOP:case Ce.HANDICAP_ROOK:case Ce.HANDICAP_ROOK_LANCE:case Ce.HANDICAP_2PIECES:case Ce.HANDICAP_4PIECES:case Ce.HANDICAP_6PIECES:case Ce.HANDICAP_8PIECES:this._color=U.WHITE;break}(e===Ce.TSUME_SHOGI||e===Ce.TSUME_SHOGI_2KINGS)&&(this._whiteHand.set($.PAWN,18),this._whiteHand.set($.LANCE,4),this._whiteHand.set($.KNIGHT,4),this._whiteHand.set($.SILVER,4),this._whiteHand.set($.GOLD,4),this._whiteHand.set($.BISHOP,2),this._whiteHand.set($.ROOK,2))}hand(e){return this._hand(e)}_hand(e){return e===U.BLACK?this._blackHand:this._whiteHand}get checked(){return this._board.isChecked(this.color)}createMove(e,i){let n;if(e instanceof j){const o=this._board.at(e);if(!o)return null;n=o.type}else n=e;const s=this._board.at(i);return new ct(e,i,!1,this.color,n,s?s.type:null)}createMoveByUSI(e){const i=_f(e);if(!i)return null;let n=this.createMove(i.from,i.to);return n?(i.promote&&(n=n.withPromote()),n):null}isPawnDropMate(e){if(e.from instanceof j||e.pieceType!==$.PAWN)return!1;const i=e.to.neighbor(e.color===U.BLACK?zt.UP:zt.DOWN),n=this.board.at(i);return!n||n.type!==$.KING||n.color===e.color||U0(n).find(o=>{const r=i.neighbor(o);if(!r.valid)return!1;const a=this.board.at(r);return a&&a.color==n.color?!1:!this.board.hasPower(r,e.color,{filled:e.to})})?!1:!this.board.listSquaresByColor(n.color).find(o=>!o.equals(i)&&this.isMovable(o,e.to)&&!this.board.isChecked(n.color,{filled:e.to,ignore:o}))}listAttackersByPiece(e,i){return this.board.listSquaresByPiece(i).filter(n=>this.isMovable(n,e))}isValidMove(e){if(e.from instanceof j){const i=this._board.at(e.from);if(!i||i.color!==this.color||!this.isMovable(e.from,e.to))return!1;const n=this._board.at(e.to);if(n&&n.color===this.color)return!1;if(e.promote){if(!i.isPromotable()||!br(this.color,e.from.rank)&&!br(this.color,e.to.rank))return!1}else if(iu(this.color,i.type,e.to.rank))return!1;if(e.pieceType!==$.KING?this._board.isChecked(this.color,{filled:e.to,ignore:e.from}):this._board.hasPower(e.to,Ot(this.color),{ignore:e.from}))return!1}else if(e.promote||e.color!==this.color||this.hand(this.color).count(e.from)===0||this._board.at(e.to)||iu(this.color,e.from,e.to.rank)||e.from===$.PAWN&&K0(this.color,this._board,e.to.file)||this._board.isChecked(this.color,{filled:e.to})||this.isPawnDropMate(e))return!1;return!0}doMove(e,i){if(!(i&&i.ignoreValidation)&&!this.isValidMove(e))return!1;if(e.from instanceof j){const n=this._board.at(e.from),s=this._board.at(e.to);this._board.remove(e.from),this._board.set(e.to,e.promote?n.promoted():n),s&&s.type!==$.KING&&this._hand(this.color).add(s.unpromoted().type,1)}else this._hand(this.color).reduce(e.from,1),this._board.set(e.to,new be(this.color,e.from));return this._color=Ot(this.color),!0}undoMove(e){if(this._color=Ot(this.color),e.from instanceof j)if(this._board.set(e.from,new be(this.color,e.pieceType)),e.capturedPieceType){const i=new be(Ot(this.color),e.capturedPieceType);this._board.set(e.to,i),i.type!==$.KING&&this._hand(this.color).reduce(i.unpromoted().type,1)}else this._board.remove(e.to);else this._hand(this.color).add(e.from,1),this._board.remove(e.to)}isValidEditing(e,i){if(e instanceof j){const n=this._board.at(e);if(!n)return!1;if(i instanceof j){if(e.equals(i))return!1}else if(n.type===$.KING)return!1}else{if(!e.color||this.hand(e.color).count(e.type)===0)return!1;if(i instanceof j){if(this._board.at(i))return!1}else if(e.color===i)return!1}return!0}edit(e){if(e.move){if(!this.isValidEditing(e.move.from,e.move.to))return!1;if(!(e.move.from instanceof j))this._hand(e.move.from.color).reduce(e.move.from.type,1),e.move.to instanceof j?this._board.set(e.move.to,e.move.from):this._hand(e.move.to).add(e.move.from.type,1);else if(e.move.to instanceof j)this._board.swap(e.move.from,e.move.to);else{const i=this._board.remove(e.move.from);this._hand(e.move.to).add(i.unpromoted().type,1)}}if(e.rotate){const i=this._board.at(e.rotate);i&&this._board.set(e.rotate,i.rotate())}return!0}get sfen(){return this.getSFEN(1)}getSFEN(e){let i=`${this._board.sfen} ${C0(this.color)} `;return i+=li.formatSFEN(this._blackHand,this._whiteHand),i+=" "+e,i}resetBySFEN(e){if(!Dt.isValidSFEN(e))return!1;const i=e.split(" ");i[0]==="sfen"&&i.shift(),this._board.resetBySFEN(i[0]),this._color=M0(i[1]);const n=li.parseSFEN(i[2]);return this._blackHand=n.black,this._whiteHand=n.white,!0}setColor(e){this._color=e}static isValidSFEN(e){const i=e.split(" ");return i.length===5&&i[0]==="sfen"&&i.shift(),!(i.length!==4||!_r.isValidSFEN(i[0])||!T0(i[1])||!li.isValidSFEN(i[2])||!i[3].match(/[0-9]+/))}static newBySFEN(e){const i=new Dt;return i.resetBySFEN(e)?i:null}isMovable(e,i){const n=i.x-e.x,s=i.y-e.y,{direction:o,distance:r,ok:a}=mf(n,s);if(!a)return!1;const l=this._board.at(e);if(!l)return!1;switch(gf(l,o)){default:return!1;case Qs.SHORT:return r===1;case Qs.LONG:{const c=z0[o];for(let u=e.neighbor(c.x,c.y);u.valid;u=u.neighbor(c.x,c.y)){if(u.equals(i))return!0;if(this._board.at(u))return!1}return!1}}}copyFrom(e){this._board.copyFrom(e._board),this._color=e.color,this._blackHand.copyFrom(e._blackHand),this._whiteHand.copyFrom(e._whiteHand)}clone(){const e=new Dt;return e.copyFrom(this),e}}function q0(t){const e={pawn:0,lance:0,knight:0,silver:0,gold:0,bishop:0,rook:0,king:0,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0};return j.all.forEach(i=>{const n=t.board.at(i);n&&(e[n.type]+=1)}),t.blackHand.forEach((i,n)=>{e[i]+=n}),t.whiteHand.forEach((i,n)=>{e[i]+=n}),e}function Y0(t){const e=q0(t);return{pawn:18-e.pawn-e.promPawn,lance:4-e.lance-e.promLance,knight:4-e.knight-e.promKnight,silver:4-e.silver-e.promSilver,gold:4-e.gold,bishop:2-e.bishop-e.horse,rook:2-e.rook-e.dragon,king:2-e.king,promPawn:0,promLance:0,promKnight:0,promSilver:0,horse:0,dragon:0}}const X0={"":1,"":2,"":3,"":4,"":5,"":6,"":7,"":8,"":9},J0={:1,:2,:3,:4,:5,:6,:7,:8,:9,:10,:11,:12,:13,:14,:15,:16,:17,:18},Q0={1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},Z0={:$.KING,:$.KING,:$.ROOK,:$.DRAGON,:$.DRAGON,:$.BISHOP,:$.HORSE,:$.GOLD,:$.SILVER,:$.PROM_SILVER,:$.PROM_SILVER,:$.KNIGHT,:$.PROM_KNIGHT,:$.PROM_KNIGHT,:$.LANCE,:$.PROM_LANCE,:$.PROM_LANCE,:$.PAWN,:$.PROM_PAWN};function bf(t){return X0[t]}function Jr(t){return J0[t]}function yr(t){return Q0[t]}function Qr(t){return Z0[t]}const yf=["","","","","","","","","","","","","","","","","",""],e_=["","","","","","","","",""];function t_(t){return yf[t-1]}function vf(t){return e_[t-1]}function Ql(t){return yf[t-1]}const i_={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""};function Sf(t){return i_[t]}const n_={king:"",rook:"",dragon:"",bishop:"",horse:"",gold:"",silver:"",promSilver:"",knight:"",promKnight:"",lance:"",promLance:"",pawn:"",promPawn:""};function al(t){return n_[t]}const s_={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:""};function wf(t){return s_[t]}function Hn(t,e,i){let n="";switch(e.color){case U.BLACK:n+=i!=null&&i.compatible?"":"";break;case U.WHITE:n+=i!=null&&i.compatible?"":"";break}i!=null&&i.prev&&i.prev.to.equals(e.to)?n+="":(n+=vf(e.to.file),n+=Ql(e.to.rank)),n+=Sf(e.pieceType);const s=new be(e.color,e.pieceType),o=t.listAttackersByPiece(e.to,s).filter(r=>!(e.from instanceof j)||!r.equals(e.from));if(e.from instanceof j){let r=e.from.directionTo(e.to);r=e.color===U.BLACK?r:mr(r);const a=jo(r),l=Ko(r),c=o.map(m=>{const S=m.directionTo(e.to);return e.color===U.BLACK?S:mr(S)}),u=c.filter(m=>Ko(m)==l).map(m=>jo(m)),h=c.filter(m=>jo(m)==a).map(m=>Ko(m));let f=!1;if(h.length)if(e.pieceType===$.HORSE||e.pieceType===$.DRAGON)l===ei.LEFT||l===ei.NONE&&h[0]===ei.RIGHT?n+="":(l===ei.RIGHT||l===ei.NONE&&h[0]===ei.LEFT)&&(n+="");else switch(l){case ei.LEFT:n+="";break;case ei.NONE:n+="",f=!0;break;case ei.RIGHT:n+="";break}if(!f&&(u.length||!h.length&&o.length))switch(a){case Dn.DOWN:n+="";break;case Dn.NONE:n+="";break;case Dn.UP:n+="";break}e.promote?n+="":e.from instanceof j&&s.isPromotable()&&(br(e.color,e.from.rank)||br(e.color,e.to.rank))&&(n+="")}else o.length&&(n+="");return n}function o_(t,e){let i="",n;const s=t.clone();for(const o of e)i+=`${Hn(s,o,{prev:n,compatible:!0})}`,s.doMove(o,{ignoreValidation:!0}),n=o;return i}const r_=/^[]?([][]|)(||||||||||||||||||)(|||)(|||)(|||)(\([1-9][1-9]\)|)/;function a_(t,e){const i=e.replaceAll(/[\s\u3000]/g,""),n=[];let s=0;for(let a=1;a<=i.length;a++){const l=i[a];(!l||l===""||l===""||l===""||l==="")&&(n.push(i.substring(s,a)),s=a)}const o=t.clone(),r=[];for(const a of n){const l=r_.exec(a);if(!l)break;const c=l[1],u=Qr(l[2]),h=l[3],f=l[4],m=l[5],S=l[6];let b;if(c.startsWith(""))b=r[r.length-1].to;else{const E=bf(c[0]),I=Jr(c[1]);b=new j(E,I)}let v;if(m==="")v=u;else if(S){const E=yr(S[1]),I=yr(S[2]);v=new j(E,I)}else{const E=o.listAttackersByPiece(b,new be(o.color,u)).filter(I=>{let k=I.directionTo(b);k=o.color===U.BLACK?k:mr(k);const A=jo(k),T=Ko(k);return!(f.indexOf("")>=0&&A!==Dn.DOWN||f.indexOf("")>=0&&A!==Dn.NONE||f.indexOf("")>=0&&A!==Dn.UP||h.indexOf("")>=0&&T!==ei.RIGHT||h.indexOf("")>=0&&T!==ei.NONE||h.indexOf("")>=0&&T!==ei.LEFT)});if(E.length===1)v=E[0];else if(E.length===0&&o.hand(o.color).count(u)!==0)v=u;else break}let y=o.createMove(v,b);if(!y||(m===""&&(y=y.withPromote()),!o.doMove(y,{ignoreValidation:!0})))break;r.push(y)}return r}function xf(t){return kf(Math.floor(t/1e3))}function Ef(t){return If(Math.floor(t/1e3))}function kf(t){const e=Math.floor(t/3600),i=Math.floor((t-e*3600)/60),n=t%60;return e+":"+String(i).padStart(2,"0")+":"+String(n).padStart(2,"0")}function If(t){const e=Math.floor(t/60),i=t%60;return String(e).padStart(2," ")+":"+String(i).padStart(2,"0")}var te=(t=>(t.TITLE="title",t.BLACK_NAME="blackName",t.WHITE_NAME="whiteName",t.START_DATETIME="startDatetime",t.END_DATETIME="endDatetime",t.DATE="date",t.TOURNAMENT="tournament",t.STRATEGY="strategy",t.TIME_LIMIT="timeLimit",t.TIME_SPENT="timeSpent",t.PLACE="place",t.POSTED_ON="postedOn",t.NOTE="note",t.BLACK_SHORT_NAME="blackShortName",t.WHITE_SHORT_NAME="whiteShortName",t.OPUS_NO="opusNo",t.OPUS_NAME="opusName",t.AUTHOR="author",t.PUBLISHED_BY="publishedBy",t.PUBLISHED_AT="publishedAt",t.SOURCE="source",t.LENGTH="length",t.INTEGRITY="integrity",t.CATEGORY="category",t.AWARD="award",t))(te||{});class vr{constructor(){L(this,"standard",new Map);L(this,"custom",new Map)}get standardMetadataKeys(){return this.standard.keys()}getStandardMetadata(e){return this.standard.get(e)}setStandardMetadata(e,i){i?this.standard.set(e,i):this.standard.delete(e)}get customMetadataKeys(){return this.custom.keys()}getCustomMetadata(e){return this.custom.get(e)}setCustomMetadata(e,i){i?this.custom.set(e,i):this.custom.delete(e)}}var _e=(t=>(t.START="start",t.INTERRUPT="interrupt",t.RESIGN="resign",t.IMPASS="impass",t.DRAW="draw",t.REPETITION_DRAW="repetitionDraw",t.MATE="mate",t.TIMEOUT="timeout",t.FOUL_WIN="foulWin",t.FOUL_LOSE="foulLose",t.ENTERING_OF_KING="enteringOfKing",t.WIN_BY_DEFAULT="winByDefault",t.LOSE_BY_DEFAULT="loseByDefault",t))(_e||{});class qn{constructor(e,i,n,s,o,r,a,l){L(this,"next",null);L(this,"branch",null);L(this,"comment","");L(this,"customData");L(this,"elapsedMs",0);L(this,"totalElapsedMs",0);this.number=e,this.prev=i,this.branchIndex=n,this.activeBranch=s,this.nextColor=o,this.move=r,this.isCheck=a,this.displayText=l}get timeText(){const e=Ef(this.elapsedMs),i=xf(this.totalElapsedMs);return`${e} / ${i}`}get hasBranch(){return!!this.prev&&!!this.prev.next&&!!this.prev.next.branch}get isFirstBranch(){return!this.prev||this.prev.next===this}get isLastMove(){if(!this.next)return!0;for(let e=this.next;e;e=e.branch)if(e.move instanceof ct)return!1;return!0}updateTotalElapsedMs(){this.totalElapsedMs=this.elapsedMs,this.prev&&this.prev.prev&&(this.totalElapsedMs+=this.prev.prev.totalElapsedMs)}setElapsedMs(e){this.elapsedMs=e,this.updateTotalElapsedMs();let i=this.next;const n=[];for(;i;)i.updateTotalElapsedMs(),i.branch&&n.push(i.branch),i.next?i=i.next:i=n.pop()||null}static newRootEntry(e){return new qn(0,null,0,!0,e,"start",!1,"")}}class Mt{constructor(e){L(this,"metadata");L(this,"_initialPosition");L(this,"_position");L(this,"_first");L(this,"_current");L(this,"repetitionCounts",{});L(this,"repetitionStart",{});L(this,"onChangePosition",()=>{});this.metadata=new vr,this._initialPosition=e?e.clone():new Dt,this._position=this.initialPosition.clone(),this._first=qn.newRootEntry(this._initialPosition.color),this._current=this._first,this.incrementRepetition()}get initialPosition(){return this._initialPosition}get position(){return this._position}get first(){return this._first}get current(){return this._current}get moves(){const e=this.movesBefore;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;e.push(i)}return e}get movesBefore(){return this._movesBefore}get _movesBefore(){const e=new Array;e.unshift(this._current);for(let i=this._current.prev;i;i=i.prev)e.unshift(i);return e}get length(){let e=this._current.number;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;e=i.number}return e}get branchBegin(){return this._current.prev?this._current.prev.next:this._current}clear(e){this.metadata=new vr,e&&(this._initialPosition=e.clone()),this._position=this.initialPosition.clone(),this._first=qn.newRootEntry(this._initialPosition.color),this._current=this._first,this.repetitionCounts={},this.repetitionStart={},this.incrementRepetition(),this.onChangePosition()}goBack(){return this._goBack()?(this.onChangePosition(),!0):!1}_goBack(){return this._current.prev?(this._current.move instanceof ct&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=this._current.prev,!0):!1}goForward(){return this._goForward()?(this.onChangePosition(),!0):!1}_goForward(){if(this._current.next){for(this._current=this._current.next;!this._current.activeBranch;)this._current=this._current.branch;return this._current.move instanceof ct&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),!0}return!1}goto(e){for(;e<this._current.number&&this._goBack(););for(;e>this._current.number&&this._goForward(););this.onChangePosition()}resetAllBranchSelection(){this._forEach(e=>{e.activeBranch=e.isFirstBranch})}switchBranchByIndex(e){if(this.current.branchIndex===e)return!0;if(!this._current.prev)return!1;let i=!1;for(let n=this._current.prev.next;n;n=n.branch)n.branchIndex===e?(n.activeBranch=!0,this._current.move instanceof ct&&(this.decrementRepetition(),this._position.undoMove(this._current.move)),this._current=n,this._current.move instanceof ct&&(this._position.doMove(this._current.move,{ignoreValidation:!0}),this.incrementRepetition()),i=!0):n.activeBranch=!1;return i&&this.onChangePosition(),i}append(e,i){const n=this.current.move instanceof ct?this.current.move:void 0,s=e instanceof ct?Hn(this.position,e,{prev:n}):wf(e);let o=!1;if(e instanceof ct){if(!this._position.doMove(e,i))return!1;this.incrementRepetition(),o=this.position.checked}if(this._current!==this.first&&!(this._current.move instanceof ct)&&this.goBack(),!this._current.next)return this._current.next=new qn(this._current.number+1,this._current,0,!0,this.position.color,e,o,s),this._current=this._current.next,this._current.setElapsedMs(0),this.onChangePosition(),!0;let r;for(r=this._current.next;r;r=r.branch)r.activeBranch=!1;let a=this._current.next;for(r=this._current.next;r;r=r.branch){if(r.move instanceof ct&&e instanceof ct&&e.equals(r.move)||e===r.move)return this._current=r,this._current.activeBranch=!0,this.onChangePosition(),!0;a=r}return this._current=new qn(this._current.number+1,this._current,a.branchIndex+1,!0,this.position.color,e,o,s),this._current.setElapsedMs(0),a.branch=this._current,this.onChangePosition(),!0}swapWithNextBranch(){return this._current.branch?Mt.swapWithPreviousBranch(this._current.branch):!1}swapWithPreviousBranch(){return Mt.swapWithPreviousBranch(this._current)}static swapWithPreviousBranch(e){const i=e.prev;if(!i||!i.next||i.next==e)return!1;if(i.next.branch===e){const n=i.next;return n.branch=e.branch,e.branch=n,i.next=e,[e.branchIndex,n.branchIndex]=[n.branchIndex,e.branchIndex],!0}for(let n=i.next;n.branch;n=n.branch)if(n.branch.branch===e){const s=n.branch;return s.branch=e.branch,e.branch=s,n.branch=e,[e.branchIndex,s.branchIndex]=[s.branchIndex,e.branchIndex],!0}return!1}removeCurrentMove(){const e=this._current;if(!this.goBack()){this._current.next=null;return}if(this._current.next===e)this._current.next=e.branch;else for(let n=this._current.next;n;n=n.branch)if(n.branch===e){n.branch=e.branch;break}let i=0;for(let n=this._current.next;n;n=n.branch)n.branchIndex=i,i+=1;this._current.next&&(this._current.next.activeBranch=!0),this.onChangePosition()}removeNextMove(){this._current.next=null}incrementRepetition(){const e=this.position.sfen;this.repetitionCounts[e]?this.repetitionCounts[e]+=1:(this.repetitionCounts[e]=1,this.repetitionStart[e]=this.current.number)}decrementRepetition(){const e=this.position.sfen;this.repetitionCounts[e]-=1,this.repetitionCounts[e]===0&&(delete this.repetitionCounts[e],delete this.repetitionStart[e])}get repetition(){return this.repetitionCounts[this.position.sfen]>=4}get perpetualCheck(){if(!this.repetition)return null;const e=this.position.sfen,i=this.repetitionStart[e];let n=!0,s=!0,o=this.position.color;for(let r=this.current;r.number>=i;r=r.prev)o=Ot(o),!r.isCheck&&(o===U.BLACK?n=!1:s=!1);return n?U.BLACK:s?U.WHITE:null}get usi(){let e="position sfen "+this.initialPosition.sfen+" moves";return this.movesBefore.forEach(i=>{i.move instanceof ct&&(e+=" "+i.move.usi)}),e}get usiAll(){let e=this.usi;for(let i=this._current.next;i;i=i.next){for(;!i.activeBranch;)i=i.branch;i.move instanceof ct&&(e+=" "+i.move.usi)}return e}get sfen(){return this.position.getSFEN(this._current.number+1)}forEach(e){this._forEach(e)}_forEach(e){let i=this._first;const n=[];for(;i;)e(i),i.branch&&n.push(i.branch),i.next?i=i.next:i=n.pop()||null}on(e,i){switch(e){case"changePosition":this.onChangePosition=i;break}}static newByUSI(e){const i="position startpos ",n="position sfen ",s="startpos ",o="sfen ",r="moves ";return e.startsWith(i)?Mt.newByUSIFromMoves(new Dt,e.slice(i.length)):e.startsWith(n)?Mt.newByUSIFromSFEN(e.slice(n.length)):e.startsWith(s)?Mt.newByUSIFromMoves(new Dt,e.slice(s.length)):e.startsWith(o)?Mt.newByUSIFromSFEN(e.slice(o.length)):e.startsWith(r)?Mt.newByUSIFromMoves(new Dt,e):new xs(e)}static newByUSIFromSFEN(e){const i=e.split(" ");if(i.length<4)return new xs(e);const n=Dt.newBySFEN(i.slice(0,4).join(" "));return n?Mt.newByUSIFromMoves(n,i.slice(4).join(" ")):new xs(e)}static newByUSIFromMoves(e,i){const n=new Mt(e);if(i.length===0)return n;const s=i.split(" ");if(s[0]!=="moves")return new xs(i);for(let o=1;o<s.length;o++){const r=_f(s[o]);if(!r)break;let a=n.position.createMove(r.from,r.to);if(!a)return new Js(s[o]);r.promote&&(a=a.withPromote()),n.append(a,{ignoreValidation:!0})}return n}}const l_={:te.BLACK_NAME,:te.WHITE_NAME,:te.START_DATETIME,:te.END_DATETIME,:te.DATE,:te.TOURNAMENT,:te.STRATEGY,:te.TITLE,:te.TIME_LIMIT,:te.TIME_SPENT,:te.PLACE,:te.POSTED_ON,:te.NOTE,:te.BLACK_SHORT_NAME,:te.WHITE_SHORT_NAME,:te.OPUS_NO,:te.OPUS_NAME,:te.AUTHOR,:te.PUBLISHED_BY,:te.PUBLISHED_AT,:te.SOURCE,:te.LENGTH,:te.INTEGRITY,:te.CATEGORY,:te.AWARD},c_={blackName:"",whiteName:"",startDatetime:"",endDatetime:"",date:"",tournament:"",strategy:"",title:"",timeLimit:"",timeSpent:"",place:"",postedOn:"",note:"",blackShortName:"",whiteShortName:"",opusNo:"",opusName:"",author:"",publishedBy:"",publishedAt:"",source:"",length:"",integrity:"",category:"",award:""},nu=[{prefix:/^#/,type:0,removePrefix:!1,isPosition:!1},{prefix:/^/,type:2,removePrefix:!0,isPosition:!0},{prefix:/^/,type:3,removePrefix:!0,isPosition:!0},{prefix:/^/,type:4,removePrefix:!0,isPosition:!0},{prefix:/^\|/,type:5,removePrefix:!1,isPosition:!0},{prefix:/^/,type:6,removePrefix:!1,isPosition:!0},{prefix:/^/,type:7,removePrefix:!1,isPosition:!0},{prefix:/^ *[0-9]+ +/,type:8,removePrefix:!1,isPosition:!1},{prefix:/^\*/,type:9,removePrefix:!0,isPosition:!1}];function u_(t){for(let i=0;i<nu.length;i++){const n=nu[i],s=t.match(n.prefix);if(s){const o=n.removePrefix?s[0].length:0;return{type:n.type,data:t.substring(o),isPosition:n.isPosition,metadataKey:""}}}const e=t.match(/^[^ ]+/);if(e){const i=e[0];return{type:1,data:t.substring(i.length),isPosition:!1,metadataKey:i.substring(0,i.length-1)}}return{type:10,data:t,isPosition:!1,metadataKey:""}}function h_(t,e){switch(e.trim()){case"":t.reset(Ce.STANDARD);return;case"":t.reset(Ce.HANDICAP_LANCE);return;case"":t.reset(Ce.HANDICAP_RIGHT_LANCE);return;case"":t.reset(Ce.HANDICAP_BISHOP);return;case"":t.reset(Ce.HANDICAP_ROOK);return;case"":t.reset(Ce.HANDICAP_ROOK_LANCE);return;case"":t.reset(Ce.HANDICAP_2PIECES);return;case"":t.reset(Ce.HANDICAP_4PIECES);return;case"":t.reset(Ce.HANDICAP_6PIECES);return;case"":t.reset(Ce.HANDICAP_8PIECES);return;case"":t.reset(Ce.EMPTY);return}return new uf(e)}const d_={:_e.INTERRUPT,:_e.RESIGN,:_e.IMPASS,:_e.REPETITION_DRAW,:_e.MATE,:_e.TIMEOUT,:_e.FOUL_WIN,:_e.FOUL_LOSE,:_e.ENTERING_OF_KING,:_e.WIN_BY_DEFAULT,:_e.LOSE_BY_DEFAULT},f_=/^ *([0-9]+) +[]?([][]|\u3000*)(||||||||||||||||||)\u3000*(?)(|\([1-9][1-9]\)) *(.*)$/,p_=/\( *([0-9]+):([0-9]+)\/[0-9: ]*\)/,g_=/^ *([0-9]+) +(||||||||||) *(.*)$/;function m_(t,e){if(e.length<21)return new rl(e);const i=e[20],n=Jr(i);if(!n)return new rl(e);for(let s=0;s<9;s+=1){const o=9-s,r=new j(o,n),a=s*2+1,l=e[a+1],c=Qr(l);if(!c){t.remove(r);continue}const u=e[a]!=="v"?U.BLACK:U.WHITE;t.set(r,new be(u,c))}}function su(t,e){const i=e.split(/[ ]/);for(const n of i){if(!n||n==="")continue;const s=n[0],o=n.substring(1),r=Qr(s),a=Jr(o)||1;if(!r)return new hf(n);t.add(r,a)}}function ou(t,e){const i=p_.exec(e);if(i){const n=i[1],s=i[2],o=Number.parseInt(n)*60+Number.parseInt(s);t.current.setElapsedMs(o*1e3)}}function __(t,e){let i=g_.exec(e);if(i){const f=Number(i[1]),m=d_[i[2]],S=i[3];t.goto(f-1),t.append(m,{ignoreValidation:!0}),ou(t,S);return}if(i=f_.exec(e),!i)return new Js(e);const n=Number(i[1]),s=i[2],o=i[3],r=i[4],a=i[5],l=i[6];if(n===0)return new lf(e);t.goto(n-1);let c,u;if(s.startsWith("")){if(!(t.current.move instanceof ct))return new cf(e);c=t.current.move.to}else{const f=bf(s[0]),m=Jr(s[1]);c=new j(f,m)}if(a==="")u=Qr(o);else{const f=yr(a[1]),m=yr(a[2]);u=new j(f,m)}let h=t.position.createMove(u,c);if(!h)return new Js(e);r===""&&(h=h.withPromote()),t.append(h,{ignoreValidation:!0}),ou(t,l)}function ru(t){const e=new vr,i=new Mt,n=t.split(/\r?\n/),s=new Dt;let o="",r=!1;for(const a of n){if(a==="")continue;const l=u_(a);if(r&&l.isPosition)return new Jl(a);let c;switch(l.type){case 1:{const u=l_[l.metadataKey];u?e.setStandardMetadata(u,l.data):e.setCustomMetadata(l.metadataKey,l.data);break}case 2:c=h_(s,l.data);break;case 3:c=su(s.blackHand,l.data);break;case 4:c=su(s.whiteHand,l.data);break;case 5:c=m_(s.board,l.data);break;case 6:s.setColor(U.BLACK);break;case 7:s.setColor(U.WHITE);break;case 8:r||(i.clear(s),i.first.comment=o,r=!0),c=__(i,l.data);break;case 9:r?i.current.comment=pr(i.current.comment,l.data):o=pr(o,l.data);break}if(c)return c}return r||(i.clear(s),i.first.comment=o),i.goto(0),i.resetAllBranchSelection(),i.metadata=e,i}const b_={start:"",resign:"",interrupt:"",impass:"",draw:"",repetitionDraw:"",mate:"",timeout:"",foulWin:"",foulLose:"",enteringOfKing:"",winByDefault:"",loseByDefault:""};function y_(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;for(const s of t.standardMetadataKeys)i+=c_[s]+""+t.getStandardMetadata(s)+n;for(const s of t.customMetadataKeys)i+=s+""+t.getCustomMetadata(s)+n;return i}function v_(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;i+=""+au(t.whiteHand)+n,i+="          "+n,i+="+---------------------------+"+n;for(let s=0;s<9;s++){i+="|";for(let o=0;o<9;o++){const r=j.newByXY(o,s),a=t.board.at(r);a?a.color===U.BLACK?i+=" "+al(a.type):i+="v"+al(a.type):i+=" "}i+="|"+Ql(s+1)+n}return i+="+---------------------------+"+n,i+=""+au(t.blackHand)+n,t.color===U.BLACK?i+=""+n:i+=""+n,i}function S_(t){let e="";return e+=vf(t.to.file),e+=Ql(t.to.rank),e+=Sf(t.pieceType),t.promote&&(e+=""),t.from instanceof j?e+="("+t.from.file+t.from.rank+")":e+="",e}function au(t){let e="";return t.forEach((i,n)=>{n>=1&&(e+=al(i),n>=2&&(e+=t_(n)),e+="")}),e}function Af(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;return i+="# KIF Generated by Electron Shogi"+n,i+=y_(t.metadata,e),i+=v_(t.initialPosition,e),i+="---------------"+n,t.forEach(s=>{if(s.number!==0){s.isFirstBranch||(i+=n,i+=""+s.number+""+n),i+=s.number+" ",s.move instanceof ct?i+=S_(s.move):i+=b_[s.move];const o=Ef(s.elapsedMs),r=xf(s.totalElapsedMs);i+=` (${o}/${r})`,s.isFirstBranch&&s.hasBranch&&(i+="+"),i+=n}if(s.comment.length!==0){const o=s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment;i+="*"+o.replaceAll(`
`,n+"*")+n}}),i}const Eo=[{pattern:/^V/,type:0,sectionType:0},{pattern:/^'\*(.+)$/,type:1,sectionType:2},{pattern:/^'(.+)$/,type:2,sectionType:2},{pattern:/^N\+(.+)$/,type:3,sectionType:0},{pattern:/^N-(.+)$/,type:4,sectionType:0},{pattern:/^\$([^:]+):(.+)$/,type:5,sectionType:0},{pattern:/^PI([1-9]{2}[A-Z]{2})*$/,type:6,sectionType:0},{pattern:/^P[1-9]( \* |[-+][A-Z][A-Z]){9}$/,type:7,sectionType:0},{pattern:/^P[-+]([0-9]{2}[A-Z]{2})*/,type:8,sectionType:0},{pattern:/^[-+]$/,type:9,sectionType:0},{pattern:/^[-+][0-9]{4}[A-Z]{2}/,type:10,sectionType:1},{pattern:/^%[-+A-Z_]+/,type:11,sectionType:1},{pattern:/^T([0-9]+)/,type:12,sectionType:1}];function w_(t){const e=[],i=t.match(/^['N$]/)?[t]:t.split(",");for(const n of i)for(let s=0;s<Eo.length;s++){const o=Eo[s].pattern.exec(n);if(o){e.push({type:Eo[s].type,line:n,args:o.slice(1),sectionType:Eo[s].sectionType});break}}return e}const x_={EVENT:te.TITLE,SITE:te.PLACE,START_TIME:te.START_DATETIME,END_TIME:te.END_DATETIME,TIME_LIMIT:te.TIME_LIMIT,OPENING:te.STRATEGY},Zl={FU:$.PAWN,KY:$.LANCE,KE:$.KNIGHT,GI:$.SILVER,KI:$.GOLD,KA:$.BISHOP,HI:$.ROOK,OU:$.KING,TO:$.PROM_PAWN,NY:$.PROM_LANCE,NK:$.PROM_KNIGHT,NG:$.PROM_SILVER,UM:$.HORSE,RY:$.DRAGON};function E_(t,e){e.reset(Ce.STANDARD);for(let i=2;i+4<=t.length;i+=4){const n=Number(t[i]),s=Number(t[i+1]);e.board.remove(new j(n,s))}}function k_(t,e){const i=Number(t[1]);for(let n=0;n<9;n+=1){const s=9-n,o=n*3+2,r=t.slice(o,o+3);if(r[0]===" ")continue;const a=r[0]==="+"?U.BLACK:U.WHITE,l=Zl[r.slice(1)];if(!l)return new Xr(r);e.board.set(new j(s,i),new be(a,l))}}function I_(t,e){const i=t[1]==="+"?U.BLACK:U.WHITE;for(let n=2;n+4<=t.length;n+=4){const s=t.slice(n,n+4);if(s==="00AL"){const l=Y0(e);i===U.BLACK?e.blackHand.forEach(c=>{e.blackHand.add(c,l[c])}):e.whiteHand.forEach(c=>{e.whiteHand.add(c,l[c])});return}const o=Number(s[0]),r=Number(s[1]),a=Zl[s.slice(2)];if(!a)return new Xr(s);o!==0&&r!==0?e.board.set(new j(o,r),new be(i,a)):i===U.BLACK?e.blackHand.add(a,1):e.whiteHand.add(a,1)}}function Pf(t,e){if((t[0]==="+"?U.BLACK:U.WHITE)!=e.color)return new af(t);const n=Number(t[1]),s=Number(t[2]),o=Number(t[3]),r=Number(t[4]),a=Zl[t.slice(5,7)];if(!a)return new Xr(t);const l=n===0&&s===0?a:new j(n,s),c=new j(o,r);let u=e.createMove(l,c);if(!u)return new Js(t);if(l instanceof j){const h=e.board.at(l);if(!h)return new ol(t);if(h.type!==a)if(h.promoted().type===a)u=u.withPromote();else return new ol(t)}return u}function A_(t){switch(t){case"%CHUDAN":return _e.INTERRUPT;case"%TORYO":return _e.RESIGN;case"%JISHOGI":return _e.IMPASS;case"%HIKIWAKE":return _e.DRAW;case"%SENNICHITE":return _e.REPETITION_DRAW;case"%TSUMI":return _e.MATE;case"%TIME_UP":return _e.TIMEOUT;case"%ILLEGAL_MOVE":return _e.FOUL_LOSE;case"%KACHI":return _e.ENTERING_OF_KING}}function P_(t,e){return Pf(e,t)}function lu(t){const e=new vr,i=new Mt,n=new Dt;n.reset(Ce.EMPTY);let s="",o=!1;const r=t.replace(/\r?\n\/(\r?\n[\s\S]*)?$/,"").split(/\r?\n/);for(const a of r)for(const l of w_(a)){if(l.sectionType===0&&o||l.sectionType===1&&!o)return new Jl(l.line);switch(l.type){case 0:break;case 1:o?i.current.comment=pr(i.current.comment,l.args[0]):s=pr(s,l.args[0]);break;case 2:break;case 3:e.setStandardMetadata(te.BLACK_NAME,l.args[0]);break;case 4:e.setStandardMetadata(te.WHITE_NAME,l.args[0]);break;case 5:{const c=x_[l.args[0]];c?e.setStandardMetadata(c,l.args[1]):e.setCustomMetadata(l.args[0],l.args[1]);break}case 6:E_(l.line,n);break;case 7:{const c=k_(l.line,n);if(c)return c;break}case 8:{const c=I_(l.line,n);if(c)return c;break}case 9:l.line[0]==="+"?n.setColor(U.BLACK):n.setColor(U.WHITE),i.clear(n),i.first.comment=s,o=!0;break;case 10:{const c=Pf(l.line,i.position);if(c instanceof Error)return c;i.append(c,{ignoreValidation:!0});break}case 11:{const c=A_(l.line);c&&i.append(c,{ignoreValidation:!0});break}case 12:i.current.setElapsedMs(Number(l.args[0])*1e3);break}}return o||(i.clear(n),i.first.comment=s),i.goto(0),i.resetAllBranchSelection(),i.metadata=e,i}function C_(t,e){let i="";const n=e.returnCode?e.returnCode:`
`,s=t.getStandardMetadata(te.BLACK_NAME)||t.getStandardMetadata(te.BLACK_SHORT_NAME);s&&(i+="N+"+s+n);const o=t.getStandardMetadata(te.WHITE_NAME)||t.getStandardMetadata(te.WHITE_SHORT_NAME);o&&(i+="N-"+o+n);const r=t.getStandardMetadata(te.TOURNAMENT)||t.getStandardMetadata(te.TITLE)||t.getStandardMetadata(te.OPUS_NAME)||t.getStandardMetadata(te.PUBLISHED_BY);r&&(i+="$EVENT:"+r+n);const a=t.getStandardMetadata(te.PLACE);a&&(i+="$SITE:"+a+n);const l=t.getStandardMetadata(te.START_DATETIME)||t.getStandardMetadata(te.DATE);l&&(i+="$START_TIME:"+l.slice(10)+n);const c=t.getStandardMetadata(te.DATE);c&&(i+="$END_TIME:"+c.slice(10)+n);const u=t.getStandardMetadata(te.STRATEGY);return u&&(i+="$OPENING:"+u+n),i}const Sr={king:"OU",rook:"HI",dragon:"RY",bishop:"KA",horse:"UM",gold:"KI",silver:"GI",promSilver:"NG",knight:"KE",promKnight:"NK",lance:"KY",promLance:"NY",pawn:"FU",promPawn:"TO"};function cu(t){let e="";return t.forEach((i,n)=>{for(let s=0;s<n;s++)e+="00"+Sr[i]}),e}function T_(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;for(let s=1;s<=9;s+=1){i+="P"+s;for(let o=9;o>=1;o-=1){const r=t.board.at(new j(o,s));r?r.color===U.BLACK?i+="+"+Sr[r.type]:i+="-"+Sr[r.type]:i+=" * "}i+=n}return i+="P+"+cu(t.blackHand)+n,i+="P-"+cu(t.whiteHand)+n,i+=(t.color===U.BLACK?"+":"-")+n,i}function uu(t){return t instanceof j?`${t.file}${t.rank}`:"00"}function Cf(t){return(t.color===U.BLACK?"+":"-")+uu(t.from)+uu(t.to)+Sr[t.promote?O0(t.pieceType):t.pieceType]}function M_(t){switch(t){case _e.INTERRUPT:return"%CHUDAN";case _e.RESIGN:return"%TORYO";case _e.IMPASS:return"%JISHOGI";case _e.DRAW:return"%HIKIWAKE";case _e.REPETITION_DRAW:return"%SENNICHITE";case _e.MATE:return"%TSUMI";case _e.TIMEOUT:return"%TIME_UP";case _e.FOUL_LOSE:return"%ILLEGAL_MOVE";case _e.ENTERING_OF_KING:return"%KACHI"}}function hu(t){return Cf(t)}function Tf(t,e){let i="";const n=e.returnCode?e.returnCode:`
`;return i+="' CSA Generated by Electron Shogi"+n,i+="V2.2"+n,i+=C_(t.metadata,e),i+=T_(t.initialPosition,e),t.moves.forEach(s=>{if(s.number===0)return;let o;s.move instanceof ct?o=Cf(s.move):o=M_(s.move),o&&(i+=o+n,i+="T"+Math.floor(s.elapsedMs/1e3)+n),s.comment&&(s.comment.endsWith(`
`)?s.comment.slice(0,-1):s.comment).split(`
`).forEach(a=>{i+="'*"+a+n})}),i}var Yn=(t=>(t[t.USI=0]="USI",t[t.SFEN=1]="SFEN",t[t.KIF=2]="KIF",t[t.CSA=3]="CSA",t))(Yn||{});function R_(t){if(t.startsWith("position sfen ")||t.startsWith("position startpos ")||t.startsWith("sfen ")||t.startsWith("startpos ")||t.startsWith("moves "))return 0;if(Dt.isValidSFEN(t))return 1;const e=/(^|\n)[#0-9]/g,i=/(^|,|\n)[-+$%'VNPT]/g,n=t.match(e),s=t.match(i),o=n?n.length:0,r=s?s.length:0;return o>=r?2:3}function du(t){return t instanceof Xr?new Error(`${x.invalidPieceName}: ${t.data}`):t instanceof af?new Error(`${x.invalidTurn}: ${t.data}`):t instanceof Js?new Error(`${x.invalidMove}: ${t.data}`):t instanceof lf?new Error(`${x.invalidMoveNumber}: ${t.data}`):t instanceof cf?new Error(`${x.invalidDestination}: ${t.data}`):t instanceof ol?new Error(`${x.pieceNotExists}: ${t.data}`):t instanceof Jl?new Error(`${x.invalidLine}: ${t.data}`):t instanceof uf?new Error(`${x.invalidHandicap}: ${t.data}`):t instanceof rl?new Error(`${x.invalidBoard}: ${t.data}`):t instanceof hf?new Error(`${x.invalidHandPiece}: ${t.data}`):t instanceof xs?new Error(`${x.invalidUSI}: ${t.data}`):t}function N_(t){switch(t){case te.BLACK_NAME:return x.sente;case te.WHITE_NAME:return x.gote;case te.START_DATETIME:return x.startDateTime;case te.END_DATETIME:return x.endDateTime;case te.DATE:return x.gameDate;case te.TOURNAMENT:return x.tournament;case te.STRATEGY:return x.strategy;case te.TITLE:return x.gameTitle;case te.TIME_LIMIT:return x.timeLimit;case te.TIME_SPENT:return x.elapsedTime;case te.PLACE:return x.place;case te.POSTED_ON:return x.postedOn;case te.NOTE:return x.note;case te.BLACK_SHORT_NAME:return x.senteShortName;case te.WHITE_SHORT_NAME:return x.goteShortName;case te.OPUS_NO:return x.opusNo;case te.OPUS_NAME:return x.opusName;case te.AUTHOR:return x.author;case te.PUBLISHED_BY:return x.publishedBy;case te.PUBLISHED_AT:return x.publishedOn;case te.SOURCE:return x.source;case te.LENGTH:return x.numberOfMoves;case te.INTEGRITY:return x.integrity;case te.CATEGORY:return x.recordCategory;case te.AWARD:return x.award}}function O_(t){k0(t),P0(t)}class kt{constructor(e,i){this.width=e,this.height=i}add(e){return new kt(this.width+e.width,this.height+e.height)}reduce(e){return new kt(this.width-e.width,this.height-e.height)}}class L_{constructor(e,i,n,s){L(this,"x");L(this,"y");L(this,"width");L(this,"height");if(i&&n&&s)this.x=e,this.y=i,this.width=n,this.height=s;else{const o=JSON.parse(e);this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height}}get json(){return JSON.stringify({x:this.x,y:this.y,width:this.width,height:this.height})}}var bt=(t=>(t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t))(bt||{}),Mn=(t=>(t.STANDARD="standard",t.CHERRY_BLOSSOM="cherry-blossom",t.AUTUMN="autumn",t.SNOW="snow",t.DARK="dark",t))(Mn||{}),_i=(t=>(t.NONE="none",t.COVER="cover",t.CONTAIN="contain",t.TILE="tile",t))(_i||{}),Oi=(t=>(t.HITOMOJI="hitomoji",t.HITOMOJI_DARK="hitomojiDark",t.HITOMOJI_GOTHIC="hitomojiGothic",t.HITOMOJI_GOTHIC_DARK="hitomojiGothicDark",t))(Oi||{}),ut=(t=>(t.LIGHT="light",t.WARM="warm",t.RESIN="resin",t.RESIN2="resin2",t.RESIN3="resin3",t.DARK="dark",t.GREEN="green",t.CHERRY_BLOSSOM="cherry-blossom",t.CUSTOM_IMAGE="custom-image",t))(ut||{}),Kt=(t=>(t.STANDARD="standard",t.DARK="dark",t.GREEN="green",t.CHERRY_BLOSSOM="cherry-blossom",t.CUSTOM_IMAGE="custom-image",t))(Kt||{}),Ls=(t=>(t.NONE="none",t.STANDARD="standard",t))(Ls||{}),Ds=(t=>(t.NONE="none",t.STANDARD="standard",t))(Ds||{}),Bs=(t=>(t.NONE="none",t.STANDARD="standard",t))(Bs||{}),Zs=(t=>(t.SINGLE="single",t.DOUBLE="double",t))(Zs||{}),Je=(t=>(t.RECORD_INFO="recordInfo",t.COMMENT="comment",t.SEARCH="search",t.PV="pv",t.CHART="chart",t.PERCENTAGE_CHART="percentageChart",t.INVISIBLE="invisible",t))(Je||{}),wr=(t=>(t.BLACK="black",t.EACH="each",t))(wr||{}),ll=(t=>(t.ALL="all",t.ONLY_USER="onlyUser",t))(ll||{}),Es=(t=>(t.BOOK="book",t.GAME="game",t))(Es||{});function D_(t,e){const i={...t,...e};switch(i.tabPaneType){case"double":switch(i.tab){case"comment":i.tab="recordInfo";break;case"chart":case"percentageChart":i.tab="pv";break}break}return t.topPaneHeightPercentage!==0&&t.topPaneHeightPercentage!==100&&(i.topPanePreviousHeightPercentage=t.topPaneHeightPercentage),B_(i)||i}function cl(t){return{language:dn.JA,thema:"standard",backgroundImageType:"none",pieceImage:"hitomoji",boardImage:"resin2",pieceStandImage:"standard",boardLabelType:"standard",leftSideControlType:"standard",rightSideControlType:"standard",pieceVolume:30,clockVolume:30,clockPitch:500,clockSoundTarget:"onlyUser",boardFlipping:!1,tabPaneType:"double",tab:"recordInfo",tab2:"comment",topPaneHeightPercentage:60,topPanePreviousHeightPercentage:60,bottomLeftPaneWidthPercentage:60,returnCode:(t==null?void 0:t.returnCode)||`\r
`,autoSaveDirectory:(t==null?void 0:t.autoSaveDirectory)||"",translateEngineOptionName:!0,engineTimeoutSeconds:10,evaluationViewFrom:"each",coefficientInSigmoid:600,badMoveLevelThreshold1:5,badMoveLevelThreshold2:10,badMoveLevelThreshold3:20,badMoveLevelThreshold4:50,showElapsedTimeInRecordView:!0,showCommentInRecordView:!0,enableAppLog:!1,enableUSILog:!1,enableCSALog:!1,logLevel:bt.INFO,positionImageStyle:"book",positionImageSize:500,positionImageHeader:"",lastRecordFilePath:"",lastUSIEngineFilePath:"",lastImageExportFilePath:"",lastOtherFilePath:"",emptyRecordInfoVisibility:!0}}function B_(t){if(t.backgroundImageType!=="none"&&!t.backgroundImageFileURL)return new Error(x.backgroundImageFileNotSelected);if(t.boardImage==="custom-image"&&!t.boardImageFileURL)return new Error(x.boardImageFileNotSelected);if(t.pieceStandImage==="custom-image"&&!t.pieceStandImageFileURL)return new Error(x.pieceStandImageFileNotSelected);if(t.pieceVolume<0||t.pieceVolume>100)return new Error(x.pieceVolumeMustBe0To100Percent);if(t.clockVolume<0||t.clockVolume>100)return new Error(x.clockVolumeMustBe0To100Percent);if(t.clockPitch<220||t.clockPitch>880)return new Error(x.clockPitchMustBe220To880Hz);if(t.engineTimeoutSeconds<1||t.engineTimeoutSeconds>300)return new Error(x.engineTimeoutMustBe1To300Seconds);if(t.coefficientInSigmoid<=0)return new Error(x.coefficientInSigmoidMustBeGreaterThan0);if(t.badMoveLevelThreshold1<1||t.badMoveLevelThreshold1>100)return new Error("1%100%");if(t.badMoveLevelThreshold2<1||t.badMoveLevelThreshold2>100)return new Error("1%100%");if(t.badMoveLevelThreshold3<1||t.badMoveLevelThreshold3>100)return new Error("1%100%");if(t.badMoveLevelThreshold4<1||t.badMoveLevelThreshold4>100)return new Error("1%100%");if(t.badMoveLevelThreshold1>=t.badMoveLevelThreshold2)return new Error("");if(t.badMoveLevelThreshold2>=t.badMoveLevelThreshold3)return new Error("");if(t.badMoveLevelThreshold3>=t.badMoveLevelThreshold4)return new Error("")}const fu={};function jn(t){if(fu[t])return;const e=document.createElement("img");e.src=t,fu[t]=e}const pe={frame:{width:1471,height:959},board:{x:296.5,y:0,width:878,height:960,squreWidth:94.8,squreHeight:104,leftSquarePadding:12,topSquarePadding:12.2,leftPiecePadding:17.5,topPiecePadding:18.5,highlight:{selected:{"background-color":"#0088ff",opacity:"0.8"},lastMoveTo:{"background-color":"#44cc44",opacity:"0.8"},lastMoveFrom:{"background-color":"#44cc44",opacity:"0.4"}}},label:{fontSize:24},piece:{width:88,height:93},hand:{black:{x:1184,y:600},white:{x:0,y:0},width:288,height:360,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"}}},turn:{black:{x:1184,y:425},white:{x:0,y:492},width:288,height:45,fontSize:32},playerName:{black:{x:1184,y:480},white:{x:0,y:370},width:288,height:45,fontSize:25},clock:{black:{x:1184,y:535},white:{x:0,y:425},width:288,height:55,fontSize:40},control:{left:{x:0,y:547,width:288,height:412,fontSize:26},right:{x:1184,y:0,width:288,height:412,fontSize:26}}},pu={[Oi.HITOMOJI]:{black:{pawn:"./piece/hitomoji/black_pawn.png",lance:"./piece/hitomoji/black_lance.png",knight:"./piece/hitomoji/black_knight.png",silver:"./piece/hitomoji/black_silver.png",gold:"./piece/hitomoji/black_gold.png",bishop:"./piece/hitomoji/black_bishop.png",rook:"./piece/hitomoji/black_rook.png",king:"./piece/hitomoji/black_king.png",king2:"./piece/hitomoji/black_king2.png",promPawn:"./piece/hitomoji/black_prom_pawn.png",promLance:"./piece/hitomoji/black_prom_lance.png",promKnight:"./piece/hitomoji/black_prom_knight.png",promSilver:"./piece/hitomoji/black_prom_silver.png",horse:"./piece/hitomoji/black_horse.png",dragon:"./piece/hitomoji/black_dragon.png"},white:{pawn:"./piece/hitomoji/white_pawn.png",lance:"./piece/hitomoji/white_lance.png",knight:"./piece/hitomoji/white_knight.png",silver:"./piece/hitomoji/white_silver.png",gold:"./piece/hitomoji/white_gold.png",bishop:"./piece/hitomoji/white_bishop.png",rook:"./piece/hitomoji/white_rook.png",king:"./piece/hitomoji/white_king.png",king2:"./piece/hitomoji/white_king2.png",promPawn:"./piece/hitomoji/white_prom_pawn.png",promLance:"./piece/hitomoji/white_prom_lance.png",promKnight:"./piece/hitomoji/white_prom_knight.png",promSilver:"./piece/hitomoji/white_prom_silver.png",horse:"./piece/hitomoji/white_horse.png",dragon:"./piece/hitomoji/white_dragon.png"}},[Oi.HITOMOJI_DARK]:{black:{pawn:"./piece/hitomoji_dark/black_pawn.png",lance:"./piece/hitomoji_dark/black_lance.png",knight:"./piece/hitomoji_dark/black_knight.png",silver:"./piece/hitomoji_dark/black_silver.png",gold:"./piece/hitomoji_dark/black_gold.png",bishop:"./piece/hitomoji_dark/black_bishop.png",rook:"./piece/hitomoji_dark/black_rook.png",king:"./piece/hitomoji_dark/black_king.png",king2:"./piece/hitomoji_dark/black_king2.png",promPawn:"./piece/hitomoji_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_dark/black_prom_silver.png",horse:"./piece/hitomoji_dark/black_horse.png",dragon:"./piece/hitomoji_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_dark/white_pawn.png",lance:"./piece/hitomoji_dark/white_lance.png",knight:"./piece/hitomoji_dark/white_knight.png",silver:"./piece/hitomoji_dark/white_silver.png",gold:"./piece/hitomoji_dark/white_gold.png",bishop:"./piece/hitomoji_dark/white_bishop.png",rook:"./piece/hitomoji_dark/white_rook.png",king:"./piece/hitomoji_dark/white_king.png",king2:"./piece/hitomoji_dark/white_king2.png",promPawn:"./piece/hitomoji_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_dark/white_prom_silver.png",horse:"./piece/hitomoji_dark/white_horse.png",dragon:"./piece/hitomoji_dark/white_dragon.png"}},[Oi.HITOMOJI_GOTHIC]:{black:{pawn:"./piece/hitomoji_gothic/black_pawn.png",lance:"./piece/hitomoji_gothic/black_lance.png",knight:"./piece/hitomoji_gothic/black_knight.png",silver:"./piece/hitomoji_gothic/black_silver.png",gold:"./piece/hitomoji_gothic/black_gold.png",bishop:"./piece/hitomoji_gothic/black_bishop.png",rook:"./piece/hitomoji_gothic/black_rook.png",king:"./piece/hitomoji_gothic/black_king.png",king2:"./piece/hitomoji_gothic/black_king2.png",promPawn:"./piece/hitomoji_gothic/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic/black_prom_silver.png",horse:"./piece/hitomoji_gothic/black_horse.png",dragon:"./piece/hitomoji_gothic/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic/white_pawn.png",lance:"./piece/hitomoji_gothic/white_lance.png",knight:"./piece/hitomoji_gothic/white_knight.png",silver:"./piece/hitomoji_gothic/white_silver.png",gold:"./piece/hitomoji_gothic/white_gold.png",bishop:"./piece/hitomoji_gothic/white_bishop.png",rook:"./piece/hitomoji_gothic/white_rook.png",king:"./piece/hitomoji_gothic/white_king.png",king2:"./piece/hitomoji_gothic/white_king2.png",promPawn:"./piece/hitomoji_gothic/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic/white_prom_silver.png",horse:"./piece/hitomoji_gothic/white_horse.png",dragon:"./piece/hitomoji_gothic/white_dragon.png"}},[Oi.HITOMOJI_GOTHIC_DARK]:{black:{pawn:"./piece/hitomoji_gothic_dark/black_pawn.png",lance:"./piece/hitomoji_gothic_dark/black_lance.png",knight:"./piece/hitomoji_gothic_dark/black_knight.png",silver:"./piece/hitomoji_gothic_dark/black_silver.png",gold:"./piece/hitomoji_gothic_dark/black_gold.png",bishop:"./piece/hitomoji_gothic_dark/black_bishop.png",rook:"./piece/hitomoji_gothic_dark/black_rook.png",king:"./piece/hitomoji_gothic_dark/black_king.png",king2:"./piece/hitomoji_gothic_dark/black_king2.png",promPawn:"./piece/hitomoji_gothic_dark/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/black_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/black_horse.png",dragon:"./piece/hitomoji_gothic_dark/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic_dark/white_pawn.png",lance:"./piece/hitomoji_gothic_dark/white_lance.png",knight:"./piece/hitomoji_gothic_dark/white_knight.png",silver:"./piece/hitomoji_gothic_dark/white_silver.png",gold:"./piece/hitomoji_gothic_dark/white_gold.png",bishop:"./piece/hitomoji_gothic_dark/white_bishop.png",rook:"./piece/hitomoji_gothic_dark/white_rook.png",king:"./piece/hitomoji_gothic_dark/white_king.png",king2:"./piece/hitomoji_gothic_dark/white_king2.png",promPawn:"./piece/hitomoji_gothic_dark/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic_dark/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic_dark/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic_dark/white_prom_silver.png",horse:"./piece/hitomoji_gothic_dark/white_horse.png",dragon:"./piece/hitomoji_gothic_dark/white_dragon.png"}}};function F_(t){switch(t){default:return"./board/grid.svg";case ut.DARK:return"./board/grid_white.svg"}}function H_(t,e){switch(t){case ut.LIGHT:return"./board/wood_light.png";case ut.WARM:return"./board/wood_warm.png";case ut.CUSTOM_IMAGE:return e||null}return null}const $_={[ut.LIGHT]:"rgba(0, 0, 0, 0)",[ut.WARM]:"rgba(0, 0, 0, 0)",[ut.RESIN]:"#d69b00",[ut.RESIN2]:"#efbf63",[ut.RESIN3]:"#ad7624",[ut.DARK]:"#333333",[ut.GREEN]:"#598459",[ut.CHERRY_BLOSSOM]:"#ecb6b6",[ut.CUSTOM_IMAGE]:"rgba(0, 0, 0, 0)"};function U_(t,e){switch(t){case Kt.CUSTOM_IMAGE:return e||null}return null}const z_={[Kt.STANDARD]:"#8b4513",[Kt.DARK]:"#333333",[Kt.GREEN]:"#527a52",[Kt.CHERRY_BLOSSOM]:"#e8a9a9",[Kt.CUSTOM_IMAGE]:"rgba(0, 0, 0, 0)"},G_={black:{pawn:{row:3,column:0,width:2},lance:{row:2,column:0,width:1},knight:{row:2,column:1,width:1},silver:{row:1,column:0,width:1},gold:{row:1,column:1,width:1},bishop:{row:0,column:0,width:1},rook:{row:0,column:1,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}},white:{pawn:{row:0,column:0,width:2},lance:{row:1,column:1,width:1},knight:{row:1,column:0,width:1},silver:{row:2,column:1,width:1},gold:{row:2,column:0,width:1},bishop:{row:3,column:1,width:1},rook:{row:3,column:0,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}}},W_={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};class V_{constructor(e,i,n,s,o,r){L(this,"pieceImages");L(this,"boardGridImage");L(this,"boardTextureImage");L(this,"pieceStandImage");this.boardImageType=i,this.pieceStandImageType=n,this.boardLabelType=s,this.pieceImages=pu[e]||pu[Oi.HITOMOJI],this.boardGridImage=F_(i),this.boardTextureImage=H_(i,o),this.pieceStandImage=U_(n,r)}preload(){jn(this.boardGridImage),this.boardTextureImage&&jn(this.boardTextureImage),this.pieceStandImage&&jn(this.pieceStandImage),Object.values(this.pieceImages.black).forEach(jn),Object.values(this.pieceImages.white).forEach(jn)}build(e,i,n,s,o,r){let a=e.width/pe.frame.width;pe.frame.height*a>e.height&&(a=e.height/pe.frame.height);const l=()=>{const ne=pe.frame.height*a,ie=pe.frame.width*a;return{style:{height:ne+"px",width:ie+"px"},size:new kt(ie,ne)}},c=()=>{const ne=pe.board.x*a,ie=pe.board.y*a,ce=pe.board.width*a,Ne=pe.board.height*a,xe={"background-color":$_[this.boardImageType],left:ne+"px",top:ie+"px",height:Ne+"px",width:ce+"px"};return{gridImagePath:this.boardGridImage,textureImagePath:this.boardTextureImage,x:ne,y:ie,style:xe}},u=ne=>{const ie=[];if(this.boardLabelType==Ls.NONE)return ie;const ce=pe.label.fontSize*a,Ne=ce*.1,Me={color:"black","font-size":ce+"px","font-weight":"bold","text-shadow":`${Ne}px ${Ne}px  ${Ne}px white`};for(let xe=1;xe<=9;xe++){const Ze=ne.x-ce*.5+(r?0:pe.board.width)*a+pe.board.leftPiecePadding*.5*a*(r?1:-1),nt=ne.y-ce*.5+(pe.board.topSquarePadding+((r?10-xe:xe)-.5)*pe.board.squreHeight)*a;ie.push({id:"rank"+xe,character:W_[xe],style:{left:Ze+"px",top:nt+"px",...Me}})}for(let xe=1;xe<=9;xe++){const Ze=ne.x-ce*.5+(pe.board.leftPiecePadding+(9.5-(r?10-xe:xe))*pe.board.squreWidth)*a,nt=ne.y-ce*.6+(r?pe.board.height:0)*a+pe.board.topSquarePadding*.7*a*(r?-1:1);ie.push({id:"file"+xe,character:String(xe),style:{left:Ze+"px",top:nt+"px",...Me}})}return ie},h=ne=>{const ie=[];return i.board.listNonEmptySquares().forEach(ce=>{const Ne=i.board.at(ce),Me=Ne.id+ce.index,xe=r?Ot(Ne.color):Ne.color,Ze=Ne.type==$.KING&&Ne.color==U.BLACK?"king2":Ne.type,nt=this.pieceImages[xe][Ze],mt=ne.x+(pe.board.leftPiecePadding+pe.board.squreWidth*(r?ce.opposite:ce).x)*a,et=ne.y+(pe.board.topPiecePadding+pe.board.squreHeight*(r?ce.opposite:ce).y)*a,Xe=pe.piece.width*a,me=pe.piece.height*a;ie.push({id:Me,imagePath:nt,style:{left:mt+"px",top:et+"px",width:Xe+"px",height:me+"px"}})}),ie},f=ne=>{const ie=[];return j.all.forEach(ce=>{const Ne=ce.index,{file:Me}=ce,{rank:xe}=ce,Ze=ne.x+(pe.board.leftSquarePadding+pe.board.squreWidth*(r?ce.opposite:ce).x)*a,nt=ne.y+(pe.board.topSquarePadding+pe.board.squreHeight*(r?ce.opposite:ce).y)*a,mt=pe.board.squreWidth*a,et=pe.board.squreHeight*a,Xe={left:Ze+"px",top:nt+"px",width:mt+"px",height:et+"px"};let me=Xe;n&&ce.equals(n.to)&&(me={...me,...pe.board.highlight.lastMoveTo}),n&&n.from instanceof j&&ce.equals(n.from)&&(me={...me,...pe.board.highlight.lastMoveFrom}),s instanceof j&&s.equals(ce)&&(me={...me,...pe.board.highlight.selected}),ie.push({id:Ne,file:Me,rank:xe,style:Xe,backgroundStyle:me})}),ie},m=(ne,ie)=>{const ce=r?Ot(ne):ne,Ne=z_[this.pieceStandImageType],Me=pe.hand[ce].x*a,xe=pe.hand[ce].y*a,Ze=pe.hand.width*a,nt=pe.hand.height*a,mt={"background-color":Ne,left:Me+"px",top:xe+"px",width:Ze+"px",height:nt+"px"},et=[],Xe=[];return R0.forEach(me=>{const Ie=ie.count(me),si=G_[ce][me],Ei=pe.hand.width/2*si.width*a,M=pe.hand.height/4*a,B=Ei*si.column,W=M*si.row,Y=pe.piece.width*a,J=pe.piece.height*a,oe=Math.max(Ei-Y*Ie,0)/(Ie*2),fe=(Ei-Y-oe*2)/Math.max(Ie-1,1);for(let ve=Ie-1;ve>=0;ve-=1){const Se=me+ve,ke=this.pieceImages[ce][me],Ae=B+oe+fe*ve,Be=W;et.push({id:Se,imagePath:ke,style:{left:Ae+"px",top:Be+"px",width:Y+"px",height:J+"px"}})}const re=me,ue={left:B+"px",top:W+"px",width:Ei+"px",height:M+"px"};let Z=ue;s&&s instanceof be&&s.color===ne&&s.type===me&&(Z={...Z,...pe.hand.highlight.selected}),Xe.push({id:re,type:me,style:ue,backgroundStyle:Z})}),{textureImagePath:this.pieceStandImage,style:mt,pieces:et,pointers:Xe}},S=(ne,ie)=>{if(!ie)return null;const ce=r?Ot(ie.color):ie.color,Ne=r?ie.to.opposite:ie.to,Me=new be(ce,ie.pieceType),xe=Me.promoted(),Ze=Me.unpromoted(),nt=this.pieceImages[ce][xe.type],mt=this.pieceImages[ce][Ze.type],et=ne.x+(pe.board.leftSquarePadding+pe.board.squreWidth*(Ne.x===0?0:Ne.x===8?7:Ne.x-.5))*a,Xe=ne.y+(pe.board.topSquarePadding+pe.board.squreHeight*Ne.y)*a,me=pe.board.squreWidth*2*a,Ie=pe.board.squreHeight*a,si={left:et+"px",top:Xe+"px",width:me+"px",height:Ie+"px","font-size":Ie/4+"px"};return{promoteImagePath:nt,notPromoteImagePath:mt,style:si}},b=()=>{const ne=i.color,ie=r?Ot(ne):ne,ce=2;return{style:{left:pe.turn[ie].x*a-ce+"px",top:pe.turn[ie].y*a-ce+"px",width:pe.turn.width*a-ce+"px",height:pe.turn.height*a-ce+"px","font-size":pe.turn.fontSize*a+"px","border-radius":pe.turn.height*a*.4+"px","border-width":ce+"px","border-style":"solid"}}},v=ne=>{const ie=r?Ot(ne):ne;return{style:{left:pe.playerName[ie].x*a+"px",top:pe.playerName[ie].y*a+"px",width:pe.playerName.width*a+"px",height:pe.playerName.height*a+"px","font-size":pe.playerName.fontSize*a+"px"}}},y=ne=>{const ie=r?Ot(ne):ne;return{style:{left:pe.clock[ie].x*a+"px",top:pe.clock[ie].y*a+"px",width:pe.clock.width*a+"px",height:pe.clock.height*a+"px","font-size":pe.clock.fontSize*a+"px"}}},E=()=>({left:{style:{left:pe.control.left.x*a+"px",top:pe.control.left.y*a+"px",width:pe.control.left.width*a+"px",height:pe.control.left.height*a+"px","font-size":pe.control.left.fontSize*a+"px"}},right:{style:{left:pe.control.right.x*a+"px",top:pe.control.right.y*a+"px",width:pe.control.right.width*a+"px",height:pe.control.right.height*a+"px","font-size":pe.control.right.fontSize*a+"px"}}}),I=l(),k=c(),A=u(k),T=h(k),R=f(k),N=m(U.BLACK,i.hand(U.BLACK)),V=m(U.WHITE,i.hand(U.WHITE)),ee=S(k,o),se=b(),Q=v(U.BLACK),ae=v(U.WHITE),X=y(U.BLACK),he=y(U.WHITE),ge=E();return{frame:I,board:k,labels:A,piece:T,square:R,blackHand:N,whiteHand:V,promotion:ee,turn:se,blackPlayerName:Q,whitePlayerName:ae,blackClock:X,whiteClock:he,control:ge}}}const j_=["src"],K_=["src"],q_={class:"player-name-text"},Y_={class:"clock-text"},X_={class:"player-name-text"},J_={class:"clock-text"},Q_=["src"],Z_=["onClick","onContextmenu"],eb=["src"],tb=["src"],ib=["onClick"],nb=["src"],sb=["src"],ob=["onClick"],rb=["src"],ab=["src"],lb=Ue({__name:"BoardView",props:{pieceImageType:{type:String,required:!0},boardImageType:{type:String,required:!0},customBoardImageUrl:{type:String,required:!1,default:void 0},pieceStandImageType:{type:String,required:!0},customPieceStandImageUrl:{type:String,required:!1,default:void 0},boardLabelType:{type:String,required:!0},maxSize:{type:kt,required:!0},position:{type:Object,required:!0},lastMove:{type:Object,required:!1,default:null},flip:{type:Boolean,required:!1},allowEdit:{type:Boolean,required:!1},allowMove:{type:Boolean,required:!1},blackPlayerName:{type:String,required:!1,default:""},whitePlayerName:{type:String,required:!1,default:""},blackPlayerTime:{type:Number,required:!1,default:void 0},blackPlayerByoyomi:{type:Number,required:!1,default:void 0},whitePlayerTime:{type:Number,required:!1,default:void 0},whitePlayerByoyomi:{type:Number,required:!1,default:void 0},nextMoveLabel:{type:String,required:!1,default:""}},emits:["resize","move","edit"],setup(t,{emit:e}){const i=t,n=xi({pointer:null,reservedMove:null}),s=()=>{n.pointer=null,n.reservedMove=null};ln([()=>i.position,()=>i.allowEdit,()=>i.allowMove],()=>{s()});const o=()=>{s()},r=(k,A,T)=>{const R=n.pointer;if(s(),!(k instanceof j&&R instanceof j&&k.equals(R))&&!(k instanceof be&&R instanceof be&&k.equals(R))){if(R){const N=R,V=k instanceof j?k:k.color;if(i.allowEdit&&i.position.isValidEditing(N,V)){e("edit",{move:{from:R,to:V}});return}if(i.allowMove&&k instanceof j){const ee=R instanceof j?R:R.type,se=k,Q=i.position.createMove(ee,se);if(!Q)return;const ae=i.position.isValidMove(Q),X=i.position.isValidMove(Q.withPromote());if(ae&&X){n.reservedMove=Q;return}if(ae){e("move",Q);return}if(X){e("move",Q.withPromote());return}}}!i.allowMove&&!i.allowEdit||A||!i.allowEdit&&T!==i.position.color||(n.pointer=k)}},a=(k,A,T)=>{k.stopPropagation(),k.preventDefault();const R=new j(A,T),N=i.position.board.at(R);r(R,!N,N==null?void 0:N.color)},l=(k,A,T)=>{k.stopPropagation(),k.preventDefault();const R=i.position.hand(A).count(T)===0;r(new be(A,T),R,A)},c=(k,A,T)=>{k.stopPropagation(),k.preventDefault(),s();const R=new j(A,T);i.allowEdit&&i.position.board.at(R)&&e("edit",{rotate:R})},u=k=>{k.stopPropagation(),k.preventDefault();const A=n.reservedMove;s(),A&&i.position.isValidMove(A.withPromote())&&e("move",A.withPromote())},h=k=>{k.stopPropagation(),k.preventDefault();const A=n.reservedMove;s(),A&&i.position.isValidMove(A)&&e("move",A)},f=Te(()=>{const k=new V_(i.pieceImageType,i.boardImageType,i.pieceStandImageType,i.boardLabelType,i.customBoardImageUrl,i.customPieceStandImageUrl);return k.preload(),k}),m=Te(()=>{const k=f.value.build(i.maxSize,i.position,i.lastMove,n.pointer,n.reservedMove,i.flip);return e("resize",k.frame.size),k}),S=(k,A)=>k?kf(k):A!==void 0?""+A:"0:00:00",b=(k,A)=>{if(!k&&!A)return"normal";const T=(k||0)+(A||0);return T<=5?"danger":T<=10?"warning":"normal"},v=Te(()=>S(i.blackPlayerTime,i.blackPlayerByoyomi)),y=Te(()=>b(i.blackPlayerTime,i.blackPlayerByoyomi)),E=Te(()=>S(i.whitePlayerTime,i.whitePlayerByoyomi)),I=Te(()=>b(i.whitePlayerTime,i.whitePlayerByoyomi));return(k,A)=>(O(),F("div",null,[p("div",{class:"frame",style:Ee(d(m).frame.style),onClick:A[2]||(A[2]=T=>o())},[d(m).board.textureImagePath?(O(),F("div",{key:0,style:Ee(d(m).board.style)},[p("img",{class:"full",src:d(m).board.textureImagePath},null,8,j_)],4)):le("",!0),p("div",{style:Ee(d(m).board.style)},[p("img",{class:"full",src:d(m).board.gridImagePath},null,8,K_)],4),p("div",{class:it(["player-name",{active:t.position.color=="black"}]),style:Ee(d(m).blackPlayerName.style)},[p("span",q_,""+P(t.blackPlayerName),1)],6),p("div",{class:it(["clock",d(y)]),style:Ee(d(m).blackClock.style)},[p("span",Y_,P(d(v)),1)],6),p("div",{class:it(["player-name",{active:t.position.color=="white"}]),style:Ee(d(m).whitePlayerName.style)},[p("span",X_,""+P(t.whitePlayerName),1)],6),p("div",{class:it(["clock",d(I)]),style:Ee(d(m).whiteClock.style)},[p("span",J_,P(d(E)),1)],6),(O(!0),F(Re,null,Ve(d(m).square,T=>(O(),F("div",{key:T.id,style:Ee(T.backgroundStyle)},null,4))),128)),(O(!0),F(Re,null,Ve(d(m).piece,T=>(O(),F("div",{key:T.id,style:Ee(T.style)},[p("img",{class:"full",src:T.imagePath},null,8,Q_)],4))),128)),(O(!0),F(Re,null,Ve(d(m).labels,T=>(O(),F("div",{key:T.id,style:Ee(T.style)},P(T.character),5))),128)),(O(!0),F(Re,null,Ve(d(m).square,T=>(O(),F("div",{key:T.id,style:Ee(T.style),onClick:R=>a(R,T.file,T.rank),onContextmenu:R=>c(R,T.file,T.rank)},null,44,Z_))),128)),d(m).blackHand.textureImagePath?(O(),F("div",{key:1,style:Ee(d(m).blackHand.style)},[p("img",{class:"full",src:d(m).blackHand.textureImagePath},null,8,eb)],4)):le("",!0),p("div",{class:"hand",style:Ee(d(m).blackHand.style)},[(O(!0),F(Re,null,Ve(d(m).blackHand.pointers,T=>(O(),F("div",{key:T.id,style:Ee(T.backgroundStyle)},null,4))),128)),(O(!0),F(Re,null,Ve(d(m).blackHand.pieces,T=>(O(),F("div",{key:T.id,style:Ee(T.style)},[p("img",{class:"full",src:T.imagePath},null,8,tb)],4))),128)),(O(!0),F(Re,null,Ve(d(m).blackHand.pointers,T=>(O(),F("div",{key:T.id,style:Ee(T.style),onClick:R=>l(R,d(U).BLACK,T.type)},null,12,ib))),128))],4),d(m).whiteHand.textureImagePath?(O(),F("div",{key:2,style:Ee(d(m).whiteHand.style)},[p("img",{class:"full",src:d(m).whiteHand.textureImagePath},null,8,nb)],4)):le("",!0),p("div",{class:"hand",style:Ee(d(m).whiteHand.style)},[(O(!0),F(Re,null,Ve(d(m).whiteHand.pointers,T=>(O(),F("div",{key:T.id,style:Ee(T.backgroundStyle)},null,4))),128)),(O(!0),F(Re,null,Ve(d(m).whiteHand.pieces,T=>(O(),F("div",{key:T.id,style:Ee(T.style)},[p("img",{class:"full",src:T.imagePath},null,8,sb)],4))),128)),(O(!0),F(Re,null,Ve(d(m).whiteHand.pointers,T=>(O(),F("div",{key:T.id,style:Ee(T.style),onClick:R=>l(R,d(U).WHITE,T.type)},null,12,ob))),128))],4),d(m).promotion?(O(),F("div",{key:3,class:"promotion-selector",style:Ee(d(m).promotion.style)},[p("div",{class:"select-button promote",onClick:A[0]||(A[0]=T=>u(T))},[p("img",{class:"full",src:d(m).promotion.promoteImagePath},null,8,rb)]),p("div",{class:"select-button not-promote",onClick:A[1]||(A[1]=T=>h(T))},[p("img",{class:"full",src:d(m).promotion.notPromoteImagePath},null,8,ab)])],4)):le("",!0),p("div",{class:"turn",style:Ee(d(m).turn.style)},P(t.nextMoveLabel),5),p("div",{style:Ee(d(m).control.left.style)},[Ja(k.$slots,"left-control",{},void 0,!0)],4),p("div",{style:Ee(d(m).control.right.style)},[Ja(k.$slots,"right-control",{},void 0,!0)],4)],4)]))}});const Qe=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},ec=Qe(lb,[["__scopeId","data-v-c767b3d3"]]),ni="es://human",Mf="es://usi-engine/";function Wi(t){return t.startsWith(Mf)}function cb(){const t=Date.now(),e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16);return Mf+`${t}/${e}`}const Rf="USI_Ponder",ub="USI_MultiPV",hb="Threads",db="NumberOfThreads",fb="MultiPV";function Rn(t){if(t){if(t.value!==void 0)return t.value;if(t.default!==void 0)return(t.type==="string"||t.type==="filename")&&t.default==="<empty>"?"":t.default}}function Nf(){return{uri:"",name:"",defaultName:"",author:"",path:"",options:{}}}function pb(t){const e=JSON.parse(JSON.stringify(t));return e.uri=cb(),e.name=x.copyOf(e.name),e}function gb(t,e){t.uri=e.uri,t.name=e.name,Object.keys(e.options).forEach(i=>{t.options[i]&&(t.options[i].value=e.options[i].value)})}class Xi{constructor(e){L(this,"engines",{});if(e){const i=JSON.parse(e);for(const n in i.engines)Wi(n)&&(this.engines[n]={...Nf(),...i.engines[n],uri:n})}}hasEngine(e){return!!this.engines[e]}addEngine(e){this.engines[e.uri]=e}updateEngine(e){return this.engines[e.uri]?(this.engines[e.uri]=e,!0):!1}removeEngine(e){return this.engines[e]?(delete this.engines[e],!0):!1}getEngine(e){return this.engines[e]}get engineList(){return Object.values(this.engines).sort((e,i)=>e.name!==i.name?e.name>i.name?1:-1:e.defaultName!==i.defaultName?e.defaultName>i.defaultName?1:-1:e.uri>i.uri?1:-1)}get json(){return JSON.stringify(this)}get jsonWithIndent(){return JSON.stringify(this,void 0,2)}getClone(){return new Xi(this.json)}}function mb(){return{enableNumber:!1,number:20}}function _b(){return{enableNumber:!1,number:100}}function bb(){return{maxSeconds:5}}var di=(t=>(t.NONE="none",t.INSERT="insert",t.APPEND="append",t.OVERWRITE="overwrite",t))(di||{});function ul(){return{startCriteria:mb(),endCriteria:_b(),perMoveCriteria:bb(),commentBehavior:"insert"}}function gu(){return{name:"",uri:ni}}function xr(){return{black:gu(),white:gu(),timeLimit:{timeSeconds:0,byoyomi:30,increment:0},enableEngineTimeout:!1,humanIsFront:!0,enableComment:!0,enableAutoSave:!0,repeat:1,swapPlayers:!1,maxMoves:1e3}}function Of(t){if(t.timeLimit.timeSeconds===0&&t.timeLimit.byoyomi===0)return new Error("0");if(t.timeLimit.byoyomi!==0&&t.timeLimit.increment!==0)return new Error("")}function yb(t){const e=Of(t);if(e)return e;if(t.enableAutoSave)return new Error("Web")}function hl(){return{}}function vb(t){if(!t.usi)return new Error("");for(const e of t.secondaries||[])if(!e.usi)return new Error("")}const Sb={async getRecordPathFromProcArg(){return""},updateAppState(){},openExplorer(){},async showOpenRecordDialog(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async openRecord(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async showSaveRecordDialog(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async saveRecord(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async showSelectFileDialog(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async showSelectDirectoryDialog(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async showSelectImageDialog(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async exportCaptureAsPNG(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async exportCaptureAsJPEG(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async loadAppSetting(){const t=localStorage.getItem("appSetting");return JSON.stringify(t?{...cl(),...JSON.parse(t)}:cl())},async saveAppSetting(t){localStorage.setItem("appSetting",t)},async loadResearchSetting(){const t=localStorage.getItem("researchSetting");return JSON.stringify(t?{...hl(),...JSON.parse(t)}:hl())},async saveResearchSetting(t){localStorage.setItem("researchSetting",t)},async loadAnalysisSetting(){const t=localStorage.getItem("analysisSetting");return JSON.stringify(t?{...ul(),...JSON.parse(t)}:ul())},async saveAnalysisSetting(t){localStorage.setItem("analysisSetting",t)},async loadGameSetting(){const t=localStorage.getItem("gameSetting");return JSON.stringify(t?{...xr(),...JSON.parse(t)}:xr())},async saveGameSetting(t){localStorage.setItem("gameSetting",t)},async loadCSAGameSettingHistory(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async saveCSAGameSettingHistory(t){localStorage.setItem("csaGameSettingHistory",t)},async loadUSIEngineSetting(){return new Xi().json},async saveUSIEngineSetting(){},async showSelectUSIEngineDialog(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async getUSIEngineInfo(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async sendUSISetOption(){},async usiLaunch(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async usiGo(){},async usiGoPonder(){},async usiPonderHit(){},async usiGoInfinite(){},async usiStop(){},async usiGameover(){},async usiQuit(){},async csaLogin(){throw new Error(x.thisFeatureNotAvailableOnWebApp)},async csaLogout(){},async csaAgree(){},async csaMove(){},async csaResign(){},async csaWin(){},async csaStop(){},async isEncryptionAvailable(){return!1},log(t,e){switch(t){case bt.DEBUG:console.debug(e);break;case bt.INFO:console.log(e);break;case bt.WARN:console.warn(e);break;case bt.ERROR:console.error(e);break}},onSendError(){},onMenuEvent(){},onUSIBestMove(){},onUSIInfo(){},onUSIPonderInfo(){},onCSAGameSummary(){},onCSAReject(){},onCSAStart(){},onCSAMove(){},onCSAGameResult(){},onCSAClose(){}};function tc(){return window}const Lf=tc().electronShogi||{},je=tc().electronShogiAPI||Sb,we={...je,exportCaptureAsPNG(t){return je.exportCaptureAsPNG(t.json)},exportCaptureAsJPEG(t){return je.exportCaptureAsJPEG(t.json)},async loadAppSetting(){return JSON.parse(await je.loadAppSetting())},saveAppSetting(t){return je.saveAppSetting(JSON.stringify(t))},async loadResearchSetting(){return JSON.parse(await je.loadResearchSetting())},saveResearchSetting(t){return je.saveResearchSetting(JSON.stringify(t))},async loadAnalysisSetting(){return JSON.parse(await je.loadAnalysisSetting())},saveAnalysisSetting(t){return je.saveAnalysisSetting(JSON.stringify(t))},async loadGameSetting(){return JSON.parse(await je.loadGameSetting())},saveGameSetting(t){return je.saveGameSetting(JSON.stringify(t))},async loadCSAGameSettingHistory(){return JSON.parse(await je.loadCSAGameSettingHistory())},saveCSAGameSettingHistory(t){return je.saveCSAGameSettingHistory(JSON.stringify(t))},async loadUSIEngineSetting(){return new Xi(await je.loadUSIEngineSetting())},saveUSIEngineSetting(t){return je.saveUSIEngineSetting(t.json)},async getUSIEngineInfo(t,e){return JSON.parse(await je.getUSIEngineInfo(t,e))},usiLaunch(t,e){return je.usiLaunch(JSON.stringify(t),e)},usiGo(t,e,i,n,s){return je.usiGo(t,e,JSON.stringify(i),n,s)},usiGoPonder(t,e,i,n,s){return je.usiGoPonder(t,e,JSON.stringify(i),n,s)},csaLogin(t){return je.csaLogin(JSON.stringify(t))}};function Mi(){return!!tc().electronShogiAPI}let Fs;function Df(t){if(Fs)return;const e=(t==null?void 0:t.type)||"sine",i=(t==null?void 0:t.frequency)||440,n=(t==null?void 0:t.volume)||2,s=new AudioContext,o=s.createOscillator(),r=s.createGain();o.connect(r),r.connect(s.destination),o.type=e,o.frequency.value=i,r.gain.value=n*.005,o.onended=()=>{r.disconnect(s.destination),o.disconnect(r)},o.start(s.currentTime),t!=null&&t.time&&o.stop(s.currentTime+t.time),t!=null&&t.time||(Fs=o)}function wb(t){Df({type:"sine",frequency:t.frequency,time:.1,volume:t.volume})}function xb(t){Df({type:"sine",frequency:t.frequency,volume:t.volume})}function mu(){Fs&&(Fs.stop(),Fs=void 0)}let fa;function pa(t){const e=Date.now();if(fa&&e<fa+200)return;const i=new Audio("sound/piece.mp3");i.volume=t*.01,i.play(),fa=e}function Bf(t){return(t||new Date).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})}function _u(t){return(t||new Date).toLocaleTimeString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function Eb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(e,s);return new o}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}var Er={},kb={get exports(){return Er},set exports(t){Er=t}},ic={},Zr={};Zr.byteLength=Pb;Zr.toByteArray=Tb;Zr.fromByteArray=Nb;var Ni=[],ai=[],Ib=typeof Uint8Array<"u"?Uint8Array:Array,ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Gn=0,Ab=ga.length;Gn<Ab;++Gn)Ni[Gn]=ga[Gn],ai[ga.charCodeAt(Gn)]=Gn;ai["-".charCodeAt(0)]=62;ai["_".charCodeAt(0)]=63;function Ff(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");i===-1&&(i=e);var n=i===e?0:4-i%4;return[i,n]}function Pb(t){var e=Ff(t),i=e[0],n=e[1];return(i+n)*3/4-n}function Cb(t,e,i){return(e+i)*3/4-i}function Tb(t){var e,i=Ff(t),n=i[0],s=i[1],o=new Ib(Cb(t,n,s)),r=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)e=ai[t.charCodeAt(l)]<<18|ai[t.charCodeAt(l+1)]<<12|ai[t.charCodeAt(l+2)]<<6|ai[t.charCodeAt(l+3)],o[r++]=e>>16&255,o[r++]=e>>8&255,o[r++]=e&255;return s===2&&(e=ai[t.charCodeAt(l)]<<2|ai[t.charCodeAt(l+1)]>>4,o[r++]=e&255),s===1&&(e=ai[t.charCodeAt(l)]<<10|ai[t.charCodeAt(l+1)]<<4|ai[t.charCodeAt(l+2)]>>2,o[r++]=e>>8&255,o[r++]=e&255),o}function Mb(t){return Ni[t>>18&63]+Ni[t>>12&63]+Ni[t>>6&63]+Ni[t&63]}function Rb(t,e,i){for(var n,s=[],o=e;o<i;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),s.push(Mb(n));return s.join("")}function Nb(t){for(var e,i=t.length,n=i%3,s=[],o=16383,r=0,a=i-n;r<a;r+=o)s.push(Rb(t,r,r+o>a?a:r+o));return n===1?(e=t[i-1],s.push(Ni[e>>2]+Ni[e<<4&63]+"==")):n===2&&(e=(t[i-2]<<8)+t[i-1],s.push(Ni[e>>10]+Ni[e>>4&63]+Ni[e<<2&63]+"=")),s.join("")}var nc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */nc.read=function(t,e,i,n,s){var o,r,a=s*8-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?s-1:0,f=i?-1:1,m=t[e+h];for(h+=f,o=m&(1<<-u)-1,m>>=-u,u+=a;u>0;o=o*256+t[e+h],h+=f,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=n;u>0;r=r*256+t[e+h],h+=f,u-=8);if(o===0)o=1-c;else{if(o===l)return r?NaN:(m?-1:1)*(1/0);r=r+Math.pow(2,n),o=o-c}return(m?-1:1)*r*Math.pow(2,o-n)};nc.write=function(t,e,i,n,s,o){var r,a,l,c=o*8-s-1,u=(1<<c)-1,h=u>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,S=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,r=u):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),r+h>=1?e+=f/l:e+=f*Math.pow(2,1-h),e*l>=2&&(r++,l/=2),r+h>=u?(a=0,r=u):r+h>=1?(a=(e*l-1)*Math.pow(2,s),r=r+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),r=0));s>=8;t[i+m]=a&255,m+=S,a/=256,s-=8);for(r=r<<s|a,c+=s;c>0;t[i+m]=r&255,m+=S,r/=256,c-=8);t[i+m-S]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Zr,i=nc,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const w=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(w,g),w.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function r(w){if(w>s)throw new RangeError('The value "'+w+'" is invalid for option "size"');const g=new Uint8Array(w);return Object.setPrototypeOf(g,a.prototype),g}function a(w,g,_){if(typeof w=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(w)}return l(w,g,_)}a.poolSize=8192;function l(w,g,_){if(typeof w=="string")return f(w,g);if(ArrayBuffer.isView(w))return S(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(ve(w,ArrayBuffer)||w&&ve(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ve(w,SharedArrayBuffer)||w&&ve(w.buffer,SharedArrayBuffer)))return b(w,g,_);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=w.valueOf&&w.valueOf();if(C!=null&&C!==w)return a.from(C,g,_);const D=v(w);if(D)return D;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return a.from(w[Symbol.toPrimitive]("string"),g,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}a.from=function(w,g,_){return l(w,g,_)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function u(w,g,_){return c(w),w<=0?r(w):g!==void 0?typeof _=="string"?r(w).fill(g,_):r(w).fill(g):r(w)}a.alloc=function(w,g,_){return u(w,g,_)};function h(w){return c(w),r(w<0?0:y(w)|0)}a.allocUnsafe=function(w){return h(w)},a.allocUnsafeSlow=function(w){return h(w)};function f(w,g){if((typeof g!="string"||g==="")&&(g="utf8"),!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const _=I(w,g)|0;let C=r(_);const D=C.write(w,g);return D!==_&&(C=C.slice(0,D)),C}function m(w){const g=w.length<0?0:y(w.length)|0,_=r(g);for(let C=0;C<g;C+=1)_[C]=w[C]&255;return _}function S(w){if(ve(w,Uint8Array)){const g=new Uint8Array(w);return b(g.buffer,g.byteOffset,g.byteLength)}return m(w)}function b(w,g,_){if(g<0||w.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<g+(_||0))throw new RangeError('"length" is outside of buffer bounds');let C;return g===void 0&&_===void 0?C=new Uint8Array(w):_===void 0?C=new Uint8Array(w,g):C=new Uint8Array(w,g,_),Object.setPrototypeOf(C,a.prototype),C}function v(w){if(a.isBuffer(w)){const g=y(w.length)|0,_=r(g);return _.length===0||w.copy(_,0,0,g),_}if(w.length!==void 0)return typeof w.length!="number"||Se(w.length)?r(0):m(w);if(w.type==="Buffer"&&Array.isArray(w.data))return m(w.data)}function y(w){if(w>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return w|0}function E(w){return+w!=w&&(w=0),a.alloc(+w)}a.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},a.compare=function(g,_){if(ve(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),ve(_,Uint8Array)&&(_=a.from(_,_.offset,_.byteLength)),!a.isBuffer(g)||!a.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===_)return 0;let C=g.length,D=_.length;for(let H=0,K=Math.min(C,D);H<K;++H)if(g[H]!==_[H]){C=g[H],D=_[H];break}return C<D?-1:D<C?1:0},a.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(g,_){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let C;if(_===void 0)for(_=0,C=0;C<g.length;++C)_+=g[C].length;const D=a.allocUnsafe(_);let H=0;for(C=0;C<g.length;++C){let K=g[C];if(ve(K,Uint8Array))H+K.length>D.length?(a.isBuffer(K)||(K=a.from(K)),K.copy(D,H)):Uint8Array.prototype.set.call(D,K,H);else if(a.isBuffer(K))K.copy(D,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=K.length}return D};function I(w,g){if(a.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||ve(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const _=w.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&_===0)return 0;let D=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return oe(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return ue(w).length;default:if(D)return C?-1:oe(w).length;g=(""+g).toLowerCase(),D=!0}}a.byteLength=I;function k(w,g,_){let C=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,g>>>=0,_<=g))return"";for(w||(w="utf8");;)switch(w){case"hex":return ce(this,g,_);case"utf8":case"utf-8":return X(this,g,_);case"ascii":return ne(this,g,_);case"latin1":case"binary":return ie(this,g,_);case"base64":return ae(this,g,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,g,_);default:if(C)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),C=!0}}a.prototype._isBuffer=!0;function A(w,g,_){const C=w[g];w[g]=w[_],w[_]=C}a.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<g;_+=2)A(this,_,_+1);return this},a.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<g;_+=4)A(this,_,_+3),A(this,_+1,_+2);return this},a.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<g;_+=8)A(this,_,_+7),A(this,_+1,_+6),A(this,_+2,_+5),A(this,_+3,_+4);return this},a.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?X(this,0,g):k.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},a.prototype.inspect=function(){let g="";const _=t.INSPECT_MAX_BYTES;return g=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(g+=" ... "),"<Buffer "+g+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(g,_,C,D,H){if(ve(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(_===void 0&&(_=0),C===void 0&&(C=g?g.length:0),D===void 0&&(D=0),H===void 0&&(H=this.length),_<0||C>g.length||D<0||H>this.length)throw new RangeError("out of range index");if(D>=H&&_>=C)return 0;if(D>=H)return-1;if(_>=C)return 1;if(_>>>=0,C>>>=0,D>>>=0,H>>>=0,this===g)return 0;let K=H-D,De=C-_;const He=Math.min(K,De),ze=this.slice(D,H),lt=g.slice(_,C);for(let st=0;st<He;++st)if(ze[st]!==lt[st]){K=ze[st],De=lt[st];break}return K<De?-1:De<K?1:0};function T(w,g,_,C,D){if(w.length===0)return-1;if(typeof _=="string"?(C=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,Se(_)&&(_=D?0:w.length-1),_<0&&(_=w.length+_),_>=w.length){if(D)return-1;_=w.length-1}else if(_<0)if(D)_=0;else return-1;if(typeof g=="string"&&(g=a.from(g,C)),a.isBuffer(g))return g.length===0?-1:R(w,g,_,C,D);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?D?Uint8Array.prototype.indexOf.call(w,g,_):Uint8Array.prototype.lastIndexOf.call(w,g,_):R(w,[g],_,C,D);throw new TypeError("val must be string, number or Buffer")}function R(w,g,_,C,D){let H=1,K=w.length,De=g.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(w.length<2||g.length<2)return-1;H=2,K/=2,De/=2,_/=2}function He(lt,st){return H===1?lt[st]:lt.readUInt16BE(st*H)}let ze;if(D){let lt=-1;for(ze=_;ze<K;ze++)if(He(w,ze)===He(g,lt===-1?0:ze-lt)){if(lt===-1&&(lt=ze),ze-lt+1===De)return lt*H}else lt!==-1&&(ze-=ze-lt),lt=-1}else for(_+De>K&&(_=K-De),ze=_;ze>=0;ze--){let lt=!0;for(let st=0;st<De;st++)if(He(w,ze+st)!==He(g,st)){lt=!1;break}if(lt)return ze}return-1}a.prototype.includes=function(g,_,C){return this.indexOf(g,_,C)!==-1},a.prototype.indexOf=function(g,_,C){return T(this,g,_,C,!0)},a.prototype.lastIndexOf=function(g,_,C){return T(this,g,_,C,!1)};function N(w,g,_,C){_=Number(_)||0;const D=w.length-_;C?(C=Number(C),C>D&&(C=D)):C=D;const H=g.length;C>H/2&&(C=H/2);let K;for(K=0;K<C;++K){const De=parseInt(g.substr(K*2,2),16);if(Se(De))return K;w[_+K]=De}return K}function V(w,g,_,C){return Z(oe(g,w.length-_),w,_,C)}function ee(w,g,_,C){return Z(fe(g),w,_,C)}function se(w,g,_,C){return Z(ue(g),w,_,C)}function Q(w,g,_,C){return Z(re(g,w.length-_),w,_,C)}a.prototype.write=function(g,_,C,D){if(_===void 0)D="utf8",C=this.length,_=0;else if(C===void 0&&typeof _=="string")D=_,C=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(C)?(C=C>>>0,D===void 0&&(D="utf8")):(D=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-_;if((C===void 0||C>H)&&(C=H),g.length>0&&(C<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");let K=!1;for(;;)switch(D){case"hex":return N(this,g,_,C);case"utf8":case"utf-8":return V(this,g,_,C);case"ascii":case"latin1":case"binary":return ee(this,g,_,C);case"base64":return se(this,g,_,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,g,_,C);default:if(K)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),K=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(w,g,_){return g===0&&_===w.length?e.fromByteArray(w):e.fromByteArray(w.slice(g,_))}function X(w,g,_){_=Math.min(w.length,_);const C=[];let D=g;for(;D<_;){const H=w[D];let K=null,De=H>239?4:H>223?3:H>191?2:1;if(D+De<=_){let He,ze,lt,st;switch(De){case 1:H<128&&(K=H);break;case 2:He=w[D+1],(He&192)===128&&(st=(H&31)<<6|He&63,st>127&&(K=st));break;case 3:He=w[D+1],ze=w[D+2],(He&192)===128&&(ze&192)===128&&(st=(H&15)<<12|(He&63)<<6|ze&63,st>2047&&(st<55296||st>57343)&&(K=st));break;case 4:He=w[D+1],ze=w[D+2],lt=w[D+3],(He&192)===128&&(ze&192)===128&&(lt&192)===128&&(st=(H&15)<<18|(He&63)<<12|(ze&63)<<6|lt&63,st>65535&&st<1114112&&(K=st))}}K===null?(K=65533,De=1):K>65535&&(K-=65536,C.push(K>>>10&1023|55296),K=56320|K&1023),C.push(K),D+=De}return ge(C)}const he=4096;function ge(w){const g=w.length;if(g<=he)return String.fromCharCode.apply(String,w);let _="",C=0;for(;C<g;)_+=String.fromCharCode.apply(String,w.slice(C,C+=he));return _}function ne(w,g,_){let C="";_=Math.min(w.length,_);for(let D=g;D<_;++D)C+=String.fromCharCode(w[D]&127);return C}function ie(w,g,_){let C="";_=Math.min(w.length,_);for(let D=g;D<_;++D)C+=String.fromCharCode(w[D]);return C}function ce(w,g,_){const C=w.length;(!g||g<0)&&(g=0),(!_||_<0||_>C)&&(_=C);let D="";for(let H=g;H<_;++H)D+=ke[w[H]];return D}function Ne(w,g,_){const C=w.slice(g,_);let D="";for(let H=0;H<C.length-1;H+=2)D+=String.fromCharCode(C[H]+C[H+1]*256);return D}a.prototype.slice=function(g,_){const C=this.length;g=~~g,_=_===void 0?C:~~_,g<0?(g+=C,g<0&&(g=0)):g>C&&(g=C),_<0?(_+=C,_<0&&(_=0)):_>C&&(_=C),_<g&&(_=g);const D=this.subarray(g,_);return Object.setPrototypeOf(D,a.prototype),D};function Me(w,g,_){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+g>_)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(g,_,C){g=g>>>0,_=_>>>0,C||Me(g,_,this.length);let D=this[g],H=1,K=0;for(;++K<_&&(H*=256);)D+=this[g+K]*H;return D},a.prototype.readUintBE=a.prototype.readUIntBE=function(g,_,C){g=g>>>0,_=_>>>0,C||Me(g,_,this.length);let D=this[g+--_],H=1;for(;_>0&&(H*=256);)D+=this[g+--_]*H;return D},a.prototype.readUint8=a.prototype.readUInt8=function(g,_){return g=g>>>0,_||Me(g,1,this.length),this[g]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(g,_){return g=g>>>0,_||Me(g,2,this.length),this[g]|this[g+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(g,_){return g=g>>>0,_||Me(g,2,this.length),this[g]<<8|this[g+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(g,_){return g=g>>>0,_||Me(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(g,_){return g=g>>>0,_||Me(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},a.prototype.readBigUInt64LE=Ae(function(g){g=g>>>0,B(g,"offset");const _=this[g],C=this[g+7];(_===void 0||C===void 0)&&W(g,this.length-8);const D=_+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,H=this[++g]+this[++g]*2**8+this[++g]*2**16+C*2**24;return BigInt(D)+(BigInt(H)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ae(function(g){g=g>>>0,B(g,"offset");const _=this[g],C=this[g+7];(_===void 0||C===void 0)&&W(g,this.length-8);const D=_*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],H=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+C;return(BigInt(D)<<BigInt(32))+BigInt(H)}),a.prototype.readIntLE=function(g,_,C){g=g>>>0,_=_>>>0,C||Me(g,_,this.length);let D=this[g],H=1,K=0;for(;++K<_&&(H*=256);)D+=this[g+K]*H;return H*=128,D>=H&&(D-=Math.pow(2,8*_)),D},a.prototype.readIntBE=function(g,_,C){g=g>>>0,_=_>>>0,C||Me(g,_,this.length);let D=_,H=1,K=this[g+--D];for(;D>0&&(H*=256);)K+=this[g+--D]*H;return H*=128,K>=H&&(K-=Math.pow(2,8*_)),K},a.prototype.readInt8=function(g,_){return g=g>>>0,_||Me(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},a.prototype.readInt16LE=function(g,_){g=g>>>0,_||Me(g,2,this.length);const C=this[g]|this[g+1]<<8;return C&32768?C|4294901760:C},a.prototype.readInt16BE=function(g,_){g=g>>>0,_||Me(g,2,this.length);const C=this[g+1]|this[g]<<8;return C&32768?C|4294901760:C},a.prototype.readInt32LE=function(g,_){return g=g>>>0,_||Me(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},a.prototype.readInt32BE=function(g,_){return g=g>>>0,_||Me(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},a.prototype.readBigInt64LE=Ae(function(g){g=g>>>0,B(g,"offset");const _=this[g],C=this[g+7];(_===void 0||C===void 0)&&W(g,this.length-8);const D=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(C<<24);return(BigInt(D)<<BigInt(32))+BigInt(_+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),a.prototype.readBigInt64BE=Ae(function(g){g=g>>>0,B(g,"offset");const _=this[g],C=this[g+7];(_===void 0||C===void 0)&&W(g,this.length-8);const D=(_<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(D)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+C)}),a.prototype.readFloatLE=function(g,_){return g=g>>>0,_||Me(g,4,this.length),i.read(this,g,!0,23,4)},a.prototype.readFloatBE=function(g,_){return g=g>>>0,_||Me(g,4,this.length),i.read(this,g,!1,23,4)},a.prototype.readDoubleLE=function(g,_){return g=g>>>0,_||Me(g,8,this.length),i.read(this,g,!0,52,8)},a.prototype.readDoubleBE=function(g,_){return g=g>>>0,_||Me(g,8,this.length),i.read(this,g,!1,52,8)};function xe(w,g,_,C,D,H){if(!a.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>D||g<H)throw new RangeError('"value" argument is out of bounds');if(_+C>w.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(g,_,C,D){if(g=+g,_=_>>>0,C=C>>>0,!D){const De=Math.pow(2,8*C)-1;xe(this,g,_,C,De,0)}let H=1,K=0;for(this[_]=g&255;++K<C&&(H*=256);)this[_+K]=g/H&255;return _+C},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(g,_,C,D){if(g=+g,_=_>>>0,C=C>>>0,!D){const De=Math.pow(2,8*C)-1;xe(this,g,_,C,De,0)}let H=C-1,K=1;for(this[_+H]=g&255;--H>=0&&(K*=256);)this[_+H]=g/K&255;return _+C},a.prototype.writeUint8=a.prototype.writeUInt8=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,1,255,0),this[_]=g&255,_+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,2,65535,0),this[_]=g&255,this[_+1]=g>>>8,_+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,2,65535,0),this[_]=g>>>8,this[_+1]=g&255,_+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,4,4294967295,0),this[_+3]=g>>>24,this[_+2]=g>>>16,this[_+1]=g>>>8,this[_]=g&255,_+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,4,4294967295,0),this[_]=g>>>24,this[_+1]=g>>>16,this[_+2]=g>>>8,this[_+3]=g&255,_+4};function Ze(w,g,_,C,D){M(g,C,D,w,_,7);let H=Number(g&BigInt(4294967295));w[_++]=H,H=H>>8,w[_++]=H,H=H>>8,w[_++]=H,H=H>>8,w[_++]=H;let K=Number(g>>BigInt(32)&BigInt(4294967295));return w[_++]=K,K=K>>8,w[_++]=K,K=K>>8,w[_++]=K,K=K>>8,w[_++]=K,_}function nt(w,g,_,C,D){M(g,C,D,w,_,7);let H=Number(g&BigInt(4294967295));w[_+7]=H,H=H>>8,w[_+6]=H,H=H>>8,w[_+5]=H,H=H>>8,w[_+4]=H;let K=Number(g>>BigInt(32)&BigInt(4294967295));return w[_+3]=K,K=K>>8,w[_+2]=K,K=K>>8,w[_+1]=K,K=K>>8,w[_]=K,_+8}a.prototype.writeBigUInt64LE=Ae(function(g,_=0){return Ze(this,g,_,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ae(function(g,_=0){return nt(this,g,_,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(g,_,C,D){if(g=+g,_=_>>>0,!D){const He=Math.pow(2,8*C-1);xe(this,g,_,C,He-1,-He)}let H=0,K=1,De=0;for(this[_]=g&255;++H<C&&(K*=256);)g<0&&De===0&&this[_+H-1]!==0&&(De=1),this[_+H]=(g/K>>0)-De&255;return _+C},a.prototype.writeIntBE=function(g,_,C,D){if(g=+g,_=_>>>0,!D){const He=Math.pow(2,8*C-1);xe(this,g,_,C,He-1,-He)}let H=C-1,K=1,De=0;for(this[_+H]=g&255;--H>=0&&(K*=256);)g<0&&De===0&&this[_+H+1]!==0&&(De=1),this[_+H]=(g/K>>0)-De&255;return _+C},a.prototype.writeInt8=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,1,127,-128),g<0&&(g=255+g+1),this[_]=g&255,_+1},a.prototype.writeInt16LE=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,2,32767,-32768),this[_]=g&255,this[_+1]=g>>>8,_+2},a.prototype.writeInt16BE=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,2,32767,-32768),this[_]=g>>>8,this[_+1]=g&255,_+2},a.prototype.writeInt32LE=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,4,2147483647,-2147483648),this[_]=g&255,this[_+1]=g>>>8,this[_+2]=g>>>16,this[_+3]=g>>>24,_+4},a.prototype.writeInt32BE=function(g,_,C){return g=+g,_=_>>>0,C||xe(this,g,_,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[_]=g>>>24,this[_+1]=g>>>16,this[_+2]=g>>>8,this[_+3]=g&255,_+4},a.prototype.writeBigInt64LE=Ae(function(g,_=0){return Ze(this,g,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ae(function(g,_=0){return nt(this,g,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mt(w,g,_,C,D,H){if(_+C>w.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function et(w,g,_,C,D){return g=+g,_=_>>>0,D||mt(w,g,_,4),i.write(w,g,_,C,23,4),_+4}a.prototype.writeFloatLE=function(g,_,C){return et(this,g,_,!0,C)},a.prototype.writeFloatBE=function(g,_,C){return et(this,g,_,!1,C)};function Xe(w,g,_,C,D){return g=+g,_=_>>>0,D||mt(w,g,_,8),i.write(w,g,_,C,52,8),_+8}a.prototype.writeDoubleLE=function(g,_,C){return Xe(this,g,_,!0,C)},a.prototype.writeDoubleBE=function(g,_,C){return Xe(this,g,_,!1,C)},a.prototype.copy=function(g,_,C,D){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(C||(C=0),!D&&D!==0&&(D=this.length),_>=g.length&&(_=g.length),_||(_=0),D>0&&D<C&&(D=C),D===C||g.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),g.length-_<D-C&&(D=g.length-_+C);const H=D-C;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,C,D):Uint8Array.prototype.set.call(g,this.subarray(C,D),_),H},a.prototype.fill=function(g,_,C,D){if(typeof g=="string"){if(typeof _=="string"?(D=_,_=0,C=this.length):typeof C=="string"&&(D=C,C=this.length),D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!a.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(g.length===1){const K=g.charCodeAt(0);(D==="utf8"&&K<128||D==="latin1")&&(g=K)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(_<0||this.length<_||this.length<C)throw new RangeError("Out of range index");if(C<=_)return this;_=_>>>0,C=C===void 0?this.length:C>>>0,g||(g=0);let H;if(typeof g=="number")for(H=_;H<C;++H)this[H]=g;else{const K=a.isBuffer(g)?g:a.from(g,D),De=K.length;if(De===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(H=0;H<C-_;++H)this[H+_]=K[H%De]}return this};const me={};function Ie(w,g,_){me[w]=class extends _{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(D){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:D,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}Ie("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ie("ERR_INVALID_ARG_TYPE",function(w,g){return`The "${w}" argument must be of type number. Received type ${typeof g}`},TypeError),Ie("ERR_OUT_OF_RANGE",function(w,g,_){let C=`The value of "${w}" is out of range.`,D=_;return Number.isInteger(_)&&Math.abs(_)>2**32?D=si(String(_)):typeof _=="bigint"&&(D=String(_),(_>BigInt(2)**BigInt(32)||_<-(BigInt(2)**BigInt(32)))&&(D=si(D)),D+="n"),C+=` It must be ${g}. Received ${D}`,C},RangeError);function si(w){let g="",_=w.length;const C=w[0]==="-"?1:0;for(;_>=C+4;_-=3)g=`_${w.slice(_-3,_)}${g}`;return`${w.slice(0,_)}${g}`}function Ei(w,g,_){B(g,"offset"),(w[g]===void 0||w[g+_]===void 0)&&W(g,w.length-(_+1))}function M(w,g,_,C,D,H){if(w>_||w<g){const K=typeof g=="bigint"?"n":"";let De;throw H>3?g===0||g===BigInt(0)?De=`>= 0${K} and < 2${K} ** ${(H+1)*8}${K}`:De=`>= -(2${K} ** ${(H+1)*8-1}${K}) and < 2 ** ${(H+1)*8-1}${K}`:De=`>= ${g}${K} and <= ${_}${K}`,new me.ERR_OUT_OF_RANGE("value",De,w)}Ei(C,D,H)}function B(w,g){if(typeof w!="number")throw new me.ERR_INVALID_ARG_TYPE(g,"number",w)}function W(w,g,_){throw Math.floor(w)!==w?(B(w,_),new me.ERR_OUT_OF_RANGE(_||"offset","an integer",w)):g<0?new me.ERR_BUFFER_OUT_OF_BOUNDS:new me.ERR_OUT_OF_RANGE(_||"offset",`>= ${_?1:0} and <= ${g}`,w)}const Y=/[^+/0-9A-Za-z-_]/g;function J(w){if(w=w.split("=")[0],w=w.trim().replace(Y,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function oe(w,g){g=g||1/0;let _;const C=w.length;let D=null;const H=[];for(let K=0;K<C;++K){if(_=w.charCodeAt(K),_>55295&&_<57344){if(!D){if(_>56319){(g-=3)>-1&&H.push(239,191,189);continue}else if(K+1===C){(g-=3)>-1&&H.push(239,191,189);continue}D=_;continue}if(_<56320){(g-=3)>-1&&H.push(239,191,189),D=_;continue}_=(D-55296<<10|_-56320)+65536}else D&&(g-=3)>-1&&H.push(239,191,189);if(D=null,_<128){if((g-=1)<0)break;H.push(_)}else if(_<2048){if((g-=2)<0)break;H.push(_>>6|192,_&63|128)}else if(_<65536){if((g-=3)<0)break;H.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((g-=4)<0)break;H.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return H}function fe(w){const g=[];for(let _=0;_<w.length;++_)g.push(w.charCodeAt(_)&255);return g}function re(w,g){let _,C,D;const H=[];for(let K=0;K<w.length&&!((g-=2)<0);++K)_=w.charCodeAt(K),C=_>>8,D=_%256,H.push(D),H.push(C);return H}function ue(w){return e.toByteArray(J(w))}function Z(w,g,_,C){let D;for(D=0;D<C&&!(D+_>=g.length||D>=w.length);++D)g[D+_]=w[D];return D}function ve(w,g){return w instanceof g||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===g.name}function Se(w){return w!==w}const ke=function(){const w="0123456789abcdef",g=new Array(256);for(let _=0;_<16;++_){const C=_*16;for(let D=0;D<16;++D)g[C+D]=w[_]+w[D]}return g}();function Ae(w){return typeof BigInt>"u"?Be:w}function Be(){throw new Error("BigInt not supported")}})(ic);var qo=ic,es=qo.Buffer,ci={},ui;for(ui in qo)qo.hasOwnProperty(ui)&&(ui==="SlowBuffer"||ui==="Buffer"||(ci[ui]=qo[ui]));var ts=ci.Buffer={};for(ui in es)es.hasOwnProperty(ui)&&(ui==="allocUnsafe"||ui==="allocUnsafeSlow"||(ts[ui]=es[ui]));ci.Buffer.prototype=es.prototype;(!ts.from||ts.from===Uint8Array.from)&&(ts.from=function(t,e,i){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return es(t,e,i)});ts.alloc||(ts.alloc=function(t,e,i){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=es(t);return!e||e.length===0?n.fill(0):typeof i=="string"?n.fill(e,i):n.fill(e),n});if(!ci.kStringMaxLength)try{ci.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}ci.constants||(ci.constants={MAX_LENGTH:ci.kMaxLength},ci.kStringMaxLength&&(ci.constants.MAX_STRING_LENGTH=ci.kStringMaxLength));var gn=ci,sc={},Hf="\uFEFF";sc.PrependBOM=oc;function oc(t,e){this.encoder=t,this.addBOM=!0}oc.prototype.write=function(t){return this.addBOM&&(t=Hf+t,this.addBOM=!1),this.encoder.write(t)};oc.prototype.end=function(){return this.encoder.end()};sc.StripBOM=rc;function rc(t,e){this.decoder=t,this.pass=!1,this.options=e||{}}rc.prototype.write=function(t){var e=this.decoder.write(t);return this.pass||!e||(e[0]===Hf&&(e=e.slice(1),typeof this.options.stripBOM=="function"&&this.options.stripBOM()),this.pass=!0),e};rc.prototype.end=function(){return this.decoder.end()};var ma={},_a={},Hs={},Ob={get exports(){return Hs},set exports(t){Hs=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var bu;function Lb(){return bu||(bu=1,function(t,e){var i=ic,n=i.Buffer;function s(r,a){for(var l in r)a[l]=r[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=o);function o(r,a,l){return n(r,a,l)}o.prototype=Object.create(n.prototype),s(n,o),o.from=function(r,a,l){if(typeof r=="number")throw new TypeError("Argument must not be a number");return n(r,a,l)},o.alloc=function(r,a,l){if(typeof r!="number")throw new TypeError("Argument must be a number");var c=n(r);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},o.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return n(r)},o.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(r)}}(Ob,Hs)),Hs}var yu;function Db(){if(yu)return _a;yu=1;var t=Lb().Buffer,e=t.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(y){if(!y)return"utf8";for(var E;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(E)return;y=(""+y).toLowerCase(),E=!0}}function n(y){var E=i(y);if(typeof E!="string"&&(t.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return E||y}_a.StringDecoder=s;function s(y){this.encoding=n(y);var E;switch(this.encoding){case"utf16le":this.text=h,this.end=f,E=4;break;case"utf8":this.fillLast=l,E=4;break;case"base64":this.text=m,this.end=S,E=3;break;default:this.write=b,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(E)}s.prototype.write=function(y){if(y.length===0)return"";var E,I;if(this.lastNeed){if(E=this.fillLast(y),E===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<y.length?E?E+this.text(y,I):this.text(y,I):E||""},s.prototype.end=u,s.prototype.text=c,s.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function r(y,E,I){var k=E.length-1;if(k<I)return 0;var A=o(E[k]);return A>=0?(A>0&&(y.lastNeed=A-1),A):--k<I||A===-2?0:(A=o(E[k]),A>=0?(A>0&&(y.lastNeed=A-2),A):--k<I||A===-2?0:(A=o(E[k]),A>=0?(A>0&&(A===2?A=0:y.lastNeed=A-3),A):0))}function a(y,E,I){if((E[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return y.lastNeed=2,""}}function l(y){var E=this.lastTotal-this.lastNeed,I=a(this,y);if(I!==void 0)return I;if(this.lastNeed<=y.length)return y.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,E,0,y.length),this.lastNeed-=y.length}function c(y,E){var I=r(this,y,E);if(!this.lastNeed)return y.toString("utf8",E);this.lastTotal=I;var k=y.length-(I-this.lastNeed);return y.copy(this.lastChar,0,k),y.toString("utf8",E,k)}function u(y){var E=y&&y.length?this.write(y):"";return this.lastNeed?E+"":E}function h(y,E){if((y.length-E)%2===0){var I=y.toString("utf16le",E);if(I){var k=I.charCodeAt(I.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",E,y.length-1)}function f(y){var E=y&&y.length?this.write(y):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,I)}return E}function m(y,E){var I=(y.length-E)%3;return I===0?y.toString("base64",E):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",E,y.length-I))}function S(y){var E=y&&y.length?this.write(y):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function b(y){return y.toString(this.encoding)}function v(y){return y&&y.length?this.write(y):""}return _a}var ba,vu;function Bb(){if(vu)return ba;vu=1;var t=gn.Buffer;ba={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:e};function e(l,c){this.enc=l.encodingName,this.bomAware=l.bomAware,this.enc==="base64"?this.encoder=o:this.enc==="cesu8"&&(this.enc="utf8",this.encoder=r,t.from("eda0bdedb2a9","hex").toString()!==""&&(this.decoder=a,this.defaultCharUnicode=c.defaultCharUnicode))}e.prototype.encoder=s,e.prototype.decoder=n;var i=Db().StringDecoder;i.prototype.end||(i.prototype.end=function(){});function n(l,c){this.decoder=new i(c.enc)}n.prototype.write=function(l){return t.isBuffer(l)||(l=t.from(l)),this.decoder.write(l)},n.prototype.end=function(){return this.decoder.end()};function s(l,c){this.enc=c.enc}s.prototype.write=function(l){return t.from(l,this.enc)},s.prototype.end=function(){};function o(l,c){this.prevStr=""}o.prototype.write=function(l){l=this.prevStr+l;var c=l.length-l.length%4;return this.prevStr=l.slice(c),l=l.slice(0,c),t.from(l,"base64")},o.prototype.end=function(){return t.from(this.prevStr,"base64")};function r(l,c){}r.prototype.write=function(l){for(var c=t.alloc(l.length*3),u=0,h=0;h<l.length;h++){var f=l.charCodeAt(h);f<128?c[u++]=f:f<2048?(c[u++]=192+(f>>>6),c[u++]=128+(f&63)):(c[u++]=224+(f>>>12),c[u++]=128+(f>>>6&63),c[u++]=128+(f&63))}return c.slice(0,u)},r.prototype.end=function(){};function a(l,c){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=c.defaultCharUnicode}return a.prototype.write=function(l){for(var c=this.acc,u=this.contBytes,h=this.accBytes,f="",m=0;m<l.length;m++){var S=l[m];(S&192)!==128?(u>0&&(f+=this.defaultCharUnicode,u=0),S<128?f+=String.fromCharCode(S):S<224?(c=S&31,u=1,h=1):S<240?(c=S&15,u=2,h=1):f+=this.defaultCharUnicode):u>0?(c=c<<6|S&63,u--,h++,u===0&&(h===2&&c<128&&c>0?f+=this.defaultCharUnicode:h===3&&c<2048?f+=this.defaultCharUnicode:f+=String.fromCharCode(c))):f+=this.defaultCharUnicode}return this.acc=c,this.contBytes=u,this.accBytes=h,f},a.prototype.end=function(){var l=0;return this.contBytes>0&&(l+=this.defaultCharUnicode),l},ba}var Di={},Su;function Fb(){if(Su)return Di;Su=1;var t=gn.Buffer;Di._utf32=e;function e(c,u){this.iconv=u,this.bomAware=!0,this.isLE=c.isLE}Di.utf32le={type:"_utf32",isLE:!0},Di.utf32be={type:"_utf32",isLE:!1},Di.ucs4le="utf32le",Di.ucs4be="utf32be",e.prototype.encoder=i,e.prototype.decoder=n;function i(c,u){this.isLE=u.isLE,this.highSurrogate=0}i.prototype.write=function(c){for(var u=t.from(c,"ucs2"),h=t.alloc(u.length*2),f=this.isLE?h.writeUInt32LE:h.writeUInt32BE,m=0,S=0;S<u.length;S+=2){var b=u.readUInt16LE(S),v=55296<=b&&b<56320,y=56320<=b&&b<57344;if(this.highSurrogate)if(v||!y)f.call(h,this.highSurrogate,m),m+=4;else{var E=(this.highSurrogate-55296<<10|b-56320)+65536;f.call(h,E,m),m+=4,this.highSurrogate=0;continue}v?this.highSurrogate=b:(f.call(h,b,m),m+=4,this.highSurrogate=0)}return m<h.length&&(h=h.slice(0,m)),h},i.prototype.end=function(){if(this.highSurrogate){var c=t.alloc(4);return this.isLE?c.writeUInt32LE(this.highSurrogate,0):c.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,c}};function n(c,u){this.isLE=u.isLE,this.badChar=u.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}n.prototype.write=function(c){if(c.length===0)return"";var u=0,h=0,f=t.alloc(c.length+4),m=0,S=this.isLE,b=this.overflow,v=this.badChar;if(b.length>0){for(;u<c.length&&b.length<4;u++)b.push(c[u]);b.length===4&&(S?h=b[u]|b[u+1]<<8|b[u+2]<<16|b[u+3]<<24:h=b[u+3]|b[u+2]<<8|b[u+1]<<16|b[u]<<24,b.length=0,m=s(f,m,h,v))}for(;u<c.length-3;u+=4)S?h=c[u]|c[u+1]<<8|c[u+2]<<16|c[u+3]<<24:h=c[u+3]|c[u+2]<<8|c[u+1]<<16|c[u]<<24,m=s(f,m,h,v);for(;u<c.length;u++)b.push(c[u]);return f.slice(0,m).toString("ucs2")};function s(c,u,h,f){if((h<0||h>1114111)&&(h=f),h>=65536){h-=65536;var m=55296|h>>10;c[u++]=m&255,c[u++]=m>>8;var h=56320|h&1023}return c[u++]=h&255,c[u++]=h>>8,u}n.prototype.end=function(){this.overflow.length=0},Di.utf32=o,Di.ucs4="utf32";function o(c,u){this.iconv=u}o.prototype.encoder=r,o.prototype.decoder=a;function r(c,u){c=c||{},c.addBOM===void 0&&(c.addBOM=!0),this.encoder=u.iconv.getEncoder(c.defaultEncoding||"utf-32le",c)}r.prototype.write=function(c){return this.encoder.write(c)},r.prototype.end=function(){return this.encoder.end()};function a(c,u){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=c||{},this.iconv=u.iconv}a.prototype.write=function(c){if(!this.decoder){if(this.initialBufs.push(c),this.initialBufsLen+=c.length,this.initialBufsLen<32)return"";var u=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(u,this.options);for(var h="",f=0;f<this.initialBufs.length;f++)h+=this.decoder.write(this.initialBufs[f]);return this.initialBufs.length=this.initialBufsLen=0,h}return this.decoder.write(c)},a.prototype.end=function(){if(!this.decoder){var c=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);var f=this.decoder.end();return f&&(u+=f),this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.end()};function l(c,u){var h=[],f=0,m=0,S=0,b=0,v=0;e:for(var y=0;y<c.length;y++)for(var E=c[y],I=0;I<E.length;I++)if(h.push(E[I]),h.length===4){if(f===0){if(h[0]===255&&h[1]===254&&h[2]===0&&h[3]===0)return"utf-32le";if(h[0]===0&&h[1]===0&&h[2]===254&&h[3]===255)return"utf-32be"}if((h[0]!==0||h[1]>16)&&S++,(h[3]!==0||h[2]>16)&&m++,h[0]===0&&h[1]===0&&(h[2]!==0||h[3]!==0)&&v++,(h[0]!==0||h[1]!==0)&&h[2]===0&&h[3]===0&&b++,h.length=0,f++,f>=100)break e}return v-S>b-m?"utf-32be":v-S<b-m?"utf-32le":u||"utf-32le"}return Di}var ko={},wu;function Hb(){if(wu)return ko;wu=1;var t=gn.Buffer;ko.utf16be=e;function e(){}e.prototype.encoder=i,e.prototype.decoder=n,e.prototype.bomAware=!0;function i(){}i.prototype.write=function(l){for(var c=t.from(l,"ucs2"),u=0;u<c.length;u+=2){var h=c[u];c[u]=c[u+1],c[u+1]=h}return c},i.prototype.end=function(){};function n(){this.overflowByte=-1}n.prototype.write=function(l){if(l.length==0)return"";var c=t.alloc(l.length+1),u=0,h=0;for(this.overflowByte!==-1&&(c[0]=l[0],c[1]=this.overflowByte,u=1,h=2);u<l.length-1;u+=2,h+=2)c[h]=l[u+1],c[h+1]=l[u];return this.overflowByte=u==l.length-1?l[l.length-1]:-1,c.slice(0,h).toString("ucs2")},n.prototype.end=function(){this.overflowByte=-1},ko.utf16=s;function s(l,c){this.iconv=c}s.prototype.encoder=o,s.prototype.decoder=r;function o(l,c){l=l||{},l.addBOM===void 0&&(l.addBOM=!0),this.encoder=c.iconv.getEncoder("utf-16le",l)}o.prototype.write=function(l){return this.encoder.write(l)},o.prototype.end=function(){return this.encoder.end()};function r(l,c){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=l||{},this.iconv=c.iconv}r.prototype.write=function(l){if(!this.decoder){if(this.initialBufs.push(l),this.initialBufsLen+=l.length,this.initialBufsLen<16)return"";var c=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);for(var u="",h=0;h<this.initialBufs.length;h++)u+=this.decoder.write(this.initialBufs[h]);return this.initialBufs.length=this.initialBufsLen=0,u}return this.decoder.write(l)},r.prototype.end=function(){if(!this.decoder){var l=a(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(l,this.options);for(var c="",u=0;u<this.initialBufs.length;u++)c+=this.decoder.write(this.initialBufs[u]);var h=this.decoder.end();return h&&(c+=h),this.initialBufs.length=this.initialBufsLen=0,c}return this.decoder.end()};function a(l,c){var u=[],h=0,f=0,m=0;e:for(var S=0;S<l.length;S++)for(var b=l[S],v=0;v<b.length;v++)if(u.push(b[v]),u.length===2){if(h===0){if(u[0]===255&&u[1]===254)return"utf-16le";if(u[0]===254&&u[1]===255)return"utf-16be"}if(u[0]===0&&u[1]!==0&&m++,u[0]!==0&&u[1]===0&&f++,u.length=0,h++,h>=100)break e}return m>f?"utf-16be":m<f?"utf-16le":c||"utf-16le"}return ko}var ms={},xu;function $b(){if(xu)return ms;xu=1;var t=gn.Buffer;ms.utf7=e,ms.unicode11utf7="utf7";function e(b,v){this.iconv=v}e.prototype.encoder=n,e.prototype.decoder=s,e.prototype.bomAware=!0;var i=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function n(b,v){this.iconv=v.iconv}n.prototype.write=function(b){return t.from(b.replace(i,function(v){return"+"+(v==="+"?"":this.iconv.encode(v,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},n.prototype.end=function(){};function s(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}for(var o=/[A-Za-z0-9\/+]/,r=[],a=0;a<256;a++)r[a]=o.test(String.fromCharCode(a));var l="+".charCodeAt(0),c="-".charCodeAt(0),u="&".charCodeAt(0);s.prototype.write=function(b){for(var v="",y=0,E=this.inBase64,I=this.base64Accum,k=0;k<b.length;k++)if(!E)b[k]==l&&(v+=this.iconv.decode(b.slice(y,k),"ascii"),y=k+1,E=!0);else if(!r[b[k]]){if(k==y&&b[k]==c)v+="+";else{var A=I+this.iconv.decode(b.slice(y,k),"ascii");v+=this.iconv.decode(t.from(A,"base64"),"utf16-be")}b[k]!=c&&k--,y=k+1,E=!1,I=""}if(!E)v+=this.iconv.decode(b.slice(y),"ascii");else{var A=I+this.iconv.decode(b.slice(y),"ascii"),T=A.length-A.length%8;I=A.slice(T),A=A.slice(0,T),v+=this.iconv.decode(t.from(A,"base64"),"utf16-be")}return this.inBase64=E,this.base64Accum=I,v},s.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(t.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},ms.utf7imap=h;function h(b,v){this.iconv=v}h.prototype.encoder=f,h.prototype.decoder=m,h.prototype.bomAware=!0;function f(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=t.alloc(6),this.base64AccumIdx=0}f.prototype.write=function(b){for(var v=this.inBase64,y=this.base64Accum,E=this.base64AccumIdx,I=t.alloc(b.length*5+10),k=0,A=0;A<b.length;A++){var T=b.charCodeAt(A);32<=T&&T<=126?(v&&(E>0&&(k+=I.write(y.slice(0,E).toString("base64").replace(/\//g,",").replace(/=+$/,""),k),E=0),I[k++]=c,v=!1),v||(I[k++]=T,T===u&&(I[k++]=c))):(v||(I[k++]=u,v=!0),v&&(y[E++]=T>>8,y[E++]=T&255,E==y.length&&(k+=I.write(y.toString("base64").replace(/\//g,","),k),E=0)))}return this.inBase64=v,this.base64AccumIdx=E,I.slice(0,k)},f.prototype.end=function(){var b=t.alloc(10),v=0;return this.inBase64&&(this.base64AccumIdx>0&&(v+=b.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),v),this.base64AccumIdx=0),b[v++]=c,this.inBase64=!1),b.slice(0,v)};function m(b,v){this.iconv=v.iconv,this.inBase64=!1,this.base64Accum=""}var S=r.slice();return S[",".charCodeAt(0)]=!0,m.prototype.write=function(b){for(var v="",y=0,E=this.inBase64,I=this.base64Accum,k=0;k<b.length;k++)if(!E)b[k]==u&&(v+=this.iconv.decode(b.slice(y,k),"ascii"),y=k+1,E=!0);else if(!S[b[k]]){if(k==y&&b[k]==c)v+="&";else{var A=I+this.iconv.decode(b.slice(y,k),"ascii").replace(/,/g,"/");v+=this.iconv.decode(t.from(A,"base64"),"utf16-be")}b[k]!=c&&k--,y=k+1,E=!1,I=""}if(!E)v+=this.iconv.decode(b.slice(y),"ascii");else{var A=I+this.iconv.decode(b.slice(y),"ascii").replace(/,/g,"/"),T=A.length-A.length%8;I=A.slice(T),A=A.slice(0,T),v+=this.iconv.decode(t.from(A,"base64"),"utf16-be")}return this.inBase64=E,this.base64Accum=I,v},m.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(t.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},ms}var ya={},Eu;function Ub(){if(Eu)return ya;Eu=1;var t=gn.Buffer;ya._sbcs=e;function e(s,o){if(!s)throw new Error("SBCS codec is called without the data.");if(!s.chars||s.chars.length!==128&&s.chars.length!==256)throw new Error("Encoding '"+s.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(s.chars.length===128){for(var r="",a=0;a<128;a++)r+=String.fromCharCode(a);s.chars=r+s.chars}this.decodeBuf=t.from(s.chars,"ucs2");for(var l=t.alloc(65536,o.defaultCharSingleByte.charCodeAt(0)),a=0;a<s.chars.length;a++)l[s.chars.charCodeAt(a)]=a;this.encodeBuf=l}e.prototype.encoder=i,e.prototype.decoder=n;function i(s,o){this.encodeBuf=o.encodeBuf}i.prototype.write=function(s){for(var o=t.alloc(s.length),r=0;r<s.length;r++)o[r]=this.encodeBuf[s.charCodeAt(r)];return o},i.prototype.end=function(){};function n(s,o){this.decodeBuf=o.decodeBuf}return n.prototype.write=function(s){for(var o=this.decodeBuf,r=t.alloc(s.length*2),a=0,l=0,c=0;c<s.length;c++)a=s[c]*2,l=c*2,r[l]=o[a],r[l+1]=o[a+1];return r.toString("ucs2")},n.prototype.end=function(){},ya}var va,ku;function zb(){return ku||(ku=1,va={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}),va}var Sa,Iu;function Gb(){return Iu||(Iu=1,Sa={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},iso646cn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}`},iso646jp:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_\`abcdefghijklmnopqrstuvwxyz{|}`},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}),Sa}var wa={},Au;function Wb(){if(Au)return wa;Au=1;var t=gn.Buffer;wa._dbcs=l;for(var e=-1,i=-2,n=-10,s=-1e3,o=new Array(256),r=-1,a=0;a<256;a++)o[a]=e;function l(f,m){if(this.encodingName=f.encodingName,!f)throw new Error("DBCS codec is called without the data.");if(!f.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var S=f.table();this.decodeTables=[],this.decodeTables[0]=o.slice(0),this.decodeTableSeq=[];for(var b=0;b<S.length;b++)this._addDecodeChunk(S[b]);if(typeof f.gb18030=="function"){this.gb18030=f.gb18030();var v=this.decodeTables.length;this.decodeTables.push(o.slice(0));var y=this.decodeTables.length;this.decodeTables.push(o.slice(0));for(var E=this.decodeTables[0],b=129;b<=254;b++)for(var I=this.decodeTables[s-E[b]],k=48;k<=57;k++){if(I[k]===e)I[k]=s-v;else if(I[k]>s)throw new Error("gb18030 decode tables conflict at byte 2");for(var A=this.decodeTables[s-I[k]],T=129;T<=254;T++){if(A[T]===e)A[T]=s-y;else{if(A[T]===s-y)continue;if(A[T]>s)throw new Error("gb18030 decode tables conflict at byte 3")}for(var R=this.decodeTables[s-A[T]],N=48;N<=57;N++)R[N]===e&&(R[N]=i)}}}this.defaultCharUnicode=m.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var V={};if(f.encodeSkipVals)for(var b=0;b<f.encodeSkipVals.length;b++){var ee=f.encodeSkipVals[b];if(typeof ee=="number")V[ee]=!0;else for(var k=ee.from;k<=ee.to;k++)V[k]=!0}if(this._fillEncodeTable(0,0,V),f.encodeAdd)for(var se in f.encodeAdd)Object.prototype.hasOwnProperty.call(f.encodeAdd,se)&&this._setEncodeChar(se.charCodeAt(0),f.encodeAdd[se]);this.defCharSB=this.encodeTable[0][m.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===e&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===e&&(this.defCharSB="?".charCodeAt(0))}l.prototype.encoder=c,l.prototype.decoder=u,l.prototype._getDecodeTrieNode=function(f){for(var m=[];f>0;f>>>=8)m.push(f&255);m.length==0&&m.push(0);for(var S=this.decodeTables[0],b=m.length-1;b>0;b--){var v=S[m[b]];if(v==e)S[m[b]]=s-this.decodeTables.length,this.decodeTables.push(S=o.slice(0));else if(v<=s)S=this.decodeTables[s-v];else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+f.toString(16))}return S},l.prototype._addDecodeChunk=function(f){var m=parseInt(f[0],16),S=this._getDecodeTrieNode(m);m=m&255;for(var b=1;b<f.length;b++){var v=f[b];if(typeof v=="string")for(var y=0;y<v.length;){var E=v.charCodeAt(y++);if(55296<=E&&E<56320){var I=v.charCodeAt(y++);if(56320<=I&&I<57344)S[m++]=65536+(E-55296)*1024+(I-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+f[0])}else if(4080<E&&E<=4095){for(var k=4095-E+2,A=[],T=0;T<k;T++)A.push(v.charCodeAt(y++));S[m++]=n-this.decodeTableSeq.length,this.decodeTableSeq.push(A)}else S[m++]=E}else if(typeof v=="number")for(var R=S[m-1]+1,y=0;y<v;y++)S[m++]=R++;else throw new Error("Incorrect type '"+typeof v+"' given in "+this.encodingName+" at chunk "+f[0])}if(m>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+f[0]+": too long"+m)},l.prototype._getEncodeBucket=function(f){var m=f>>8;return this.encodeTable[m]===void 0&&(this.encodeTable[m]=o.slice(0)),this.encodeTable[m]},l.prototype._setEncodeChar=function(f,m){var S=this._getEncodeBucket(f),b=f&255;S[b]<=n?this.encodeTableSeq[n-S[b]][r]=m:S[b]==e&&(S[b]=m)},l.prototype._setEncodeSequence=function(f,m){var S=f[0],b=this._getEncodeBucket(S),v=S&255,y;b[v]<=n?y=this.encodeTableSeq[n-b[v]]:(y={},b[v]!==e&&(y[r]=b[v]),b[v]=n-this.encodeTableSeq.length,this.encodeTableSeq.push(y));for(var E=1;E<f.length-1;E++){var I=y[S];typeof I=="object"?y=I:(y=y[S]={},I!==void 0&&(y[r]=I))}S=f[f.length-1],y[S]=m},l.prototype._fillEncodeTable=function(f,m,S){for(var b=this.decodeTables[f],v=!1,y={},E=0;E<256;E++){var I=b[E],k=m+E;if(!S[k])if(I>=0)this._setEncodeChar(I,k),v=!0;else if(I<=s){var A=s-I;if(!y[A]){var T=k<<8>>>0;this._fillEncodeTable(A,T,S)?v=!0:y[A]=!0}}else I<=n&&(this._setEncodeSequence(this.decodeTableSeq[n-I],k),v=!0)}return v};function c(f,m){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=m.encodeTable,this.encodeTableSeq=m.encodeTableSeq,this.defaultCharSingleByte=m.defCharSB,this.gb18030=m.gb18030}c.prototype.write=function(f){for(var m=t.alloc(f.length*(this.gb18030?4:3)),S=this.leadSurrogate,b=this.seqObj,v=-1,y=0,E=0;;){if(v===-1){if(y==f.length)break;var I=f.charCodeAt(y++)}else{var I=v;v=-1}if(55296<=I&&I<57344)if(I<56320)if(S===-1){S=I;continue}else S=I,I=e;else S!==-1?(I=65536+(S-55296)*1024+(I-56320),S=-1):I=e;else S!==-1&&(v=I,I=e,S=-1);var k=e;if(b!==void 0&&I!=e){var A=b[I];if(typeof A=="object"){b=A;continue}else typeof A=="number"?k=A:A==null&&(A=b[r],A!==void 0&&(k=A,v=I));b=void 0}else if(I>=0){var T=this.encodeTable[I>>8];if(T!==void 0&&(k=T[I&255]),k<=n){b=this.encodeTableSeq[n-k];continue}if(k==e&&this.gb18030){var R=h(this.gb18030.uChars,I);if(R!=-1){var k=this.gb18030.gbChars[R]+(I-this.gb18030.uChars[R]);m[E++]=129+Math.floor(k/12600),k=k%12600,m[E++]=48+Math.floor(k/1260),k=k%1260,m[E++]=129+Math.floor(k/10),k=k%10,m[E++]=48+k;continue}}}k===e&&(k=this.defaultCharSingleByte),k<256?m[E++]=k:k<65536?(m[E++]=k>>8,m[E++]=k&255):k<16777216?(m[E++]=k>>16,m[E++]=k>>8&255,m[E++]=k&255):(m[E++]=k>>>24,m[E++]=k>>>16&255,m[E++]=k>>>8&255,m[E++]=k&255)}return this.seqObj=b,this.leadSurrogate=S,m.slice(0,E)},c.prototype.end=function(){if(!(this.leadSurrogate===-1&&this.seqObj===void 0)){var f=t.alloc(10),m=0;if(this.seqObj){var S=this.seqObj[r];S!==void 0&&(S<256?f[m++]=S:(f[m++]=S>>8,f[m++]=S&255)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(f[m++]=this.defaultCharSingleByte,this.leadSurrogate=-1),f.slice(0,m)}},c.prototype.findIdx=h;function u(f,m){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=m.decodeTables,this.decodeTableSeq=m.decodeTableSeq,this.defaultCharUnicode=m.defaultCharUnicode,this.gb18030=m.gb18030}u.prototype.write=function(f){for(var m=t.alloc(f.length*2),S=this.nodeIdx,b=this.prevBytes,v=this.prevBytes.length,y=-this.prevBytes.length,E,I=0,k=0;I<f.length;I++){var A=I>=0?f[I]:b[I+v],E=this.decodeTables[S][A];if(!(E>=0))if(E===e)E=this.defaultCharUnicode.charCodeAt(0),I=y;else if(E===i){if(I>=3)var T=(f[I-3]-129)*12600+(f[I-2]-48)*1260+(f[I-1]-129)*10+(A-48);else var T=(b[I-3+v]-129)*12600+((I-2>=0?f[I-2]:b[I-2+v])-48)*1260+((I-1>=0?f[I-1]:b[I-1+v])-129)*10+(A-48);var R=h(this.gb18030.gbChars,T);E=this.gb18030.uChars[R]+T-this.gb18030.gbChars[R]}else if(E<=s){S=s-E;continue}else if(E<=n){for(var N=this.decodeTableSeq[n-E],V=0;V<N.length-1;V++)E=N[V],m[k++]=E&255,m[k++]=E>>8;E=N[N.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+E+" at "+S+"/"+A);if(E>=65536){E-=65536;var ee=55296|E>>10;m[k++]=ee&255,m[k++]=ee>>8,E=56320|E&1023}m[k++]=E&255,m[k++]=E>>8,S=0,y=I+1}return this.nodeIdx=S,this.prevBytes=y>=0?Array.prototype.slice.call(f,y):b.slice(y+v).concat(Array.prototype.slice.call(f)),m.slice(0,k).toString("ucs2")},u.prototype.end=function(){for(var f="";this.prevBytes.length>0;){f+=this.defaultCharUnicode;var m=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,m.length>0&&(f+=this.write(m))}return this.prevBytes=[],this.nodeIdx=0,f};function h(f,m){if(f[0]>m)return-1;for(var S=0,b=f.length;S<b-1;){var v=S+(b-S+1>>1);f[v]<=m?S=v:b=v}return S}return wa}const Vb=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]],jb=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]],xa=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]],Pu=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]],Kb=[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],qb=[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3],Yb={uChars:Kb,gbChars:qb},Xb=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]],Cu=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]],Jb=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];var Ea,Tu;function Qb(){return Tu||(Tu=1,Ea={shiftjis:{type:"_dbcs",table:function(){return Vb},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return jb},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return xa}},gbk:{type:"_dbcs",table:function(){return xa.concat(Pu)}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return xa.concat(Pu)},gb18030:function(){return Yb},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return Xb}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return Cu}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return Cu.concat(Jb)},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}),Ea}var Mu;function Zb(){return Mu||(Mu=1,function(t){for(var e=[Bb(),Fb(),Hb(),$b(),Ub(),zb(),Gb(),Wb(),Qb()],i=0;i<e.length;i++){var n=e[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}}(ma)),ma}var ka,Ru;function e1(){if(Ru)return ka;Ru=1;var t=gn.Buffer;return ka=function(e){var i=e.Transform;function n(o,r){this.conv=o,r=r||{},r.decodeStrings=!1,i.call(this,r)}n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype._transform=function(o,r,a){if(typeof o!="string")return a(new Error("Iconv encoding stream needs strings as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l),a()}catch(c){a(c)}},n.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r),o()}catch(a){o(a)}},n.prototype.collect=function(o){var r=[];return this.on("error",o),this.on("data",function(a){r.push(a)}),this.on("end",function(){o(null,t.concat(r))}),this};function s(o,r){this.conv=o,r=r||{},r.encoding=this.encoding="utf8",i.call(this,r)}return s.prototype=Object.create(i.prototype,{constructor:{value:s}}),s.prototype._transform=function(o,r,a){if(!t.isBuffer(o)&&!(o instanceof Uint8Array))return a(new Error("Iconv decoding stream needs buffers as its input."));try{var l=this.conv.write(o);l&&l.length&&this.push(l,this.encoding),a()}catch(c){a(c)}},s.prototype._flush=function(o){try{var r=this.conv.end();r&&r.length&&this.push(r,this.encoding),o()}catch(a){o(a)}},s.prototype.collect=function(o){var r="";return this.on("error",o),this.on("data",function(a){r+=a}),this.on("end",function(){o(null,r)}),this},{IconvLiteEncoderStream:n,IconvLiteDecoderStream:s}},ka}const t1={},i1=Object.freeze(Object.defineProperty({__proto__:null,default:t1},Symbol.toStringTag,{value:"Module"})),n1=Eb(i1);(function(t){var e=gn.Buffer,i=sc,n=t.exports;n.encodings=null,n.defaultCharUnicode="",n.defaultCharSingleByte="?",n.encode=function(r,a,l){r=""+(r||"");var c=n.getEncoder(a,l),u=c.write(r),h=c.end();return h&&h.length>0?e.concat([u,h]):u},n.decode=function(r,a,l){typeof r=="string"&&(n.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),n.skipDecodeWarning=!0),r=e.from(""+(r||""),"binary"));var c=n.getDecoder(a,l),u=c.write(r),h=c.end();return h?u+h:u},n.encodingExists=function(r){try{return n.getCodec(r),!0}catch{return!1}},n.toEncoding=n.encode,n.fromEncoding=n.decode,n._codecDataCache={},n.getCodec=function(r){n.encodings||(n.encodings=Zb());for(var a=n._canonicalizeEncoding(r),l={};;){var c=n._codecDataCache[a];if(c)return c;var u=n.encodings[a];switch(typeof u){case"string":a=u;break;case"object":for(var h in u)l[h]=u[h];l.encodingName||(l.encodingName=a),a=u.type;break;case"function":return l.encodingName||(l.encodingName=a),c=new u(l,n),n._codecDataCache[l.encodingName]=c,c;default:throw new Error("Encoding not recognized: '"+r+"' (searched as: '"+a+"')")}}},n._canonicalizeEncoding=function(o){return(""+o).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},n.getEncoder=function(r,a){var l=n.getCodec(r),c=new l.encoder(a,l);return l.bomAware&&a&&a.addBOM&&(c=new i.PrependBOM(c,a)),c},n.getDecoder=function(r,a){var l=n.getCodec(r),c=new l.decoder(a,l);return l.bomAware&&!(a&&a.stripBOM===!1)&&(c=new i.StripBOM(c,a)),c},n.enableStreamingAPI=function(r){if(!n.supportsStreams){var a=e1()(r);n.IconvLiteEncoderStream=a.IconvLiteEncoderStream,n.IconvLiteDecoderStream=a.IconvLiteDecoderStream,n.encodeStream=function(c,u){return new n.IconvLiteEncoderStream(n.getEncoder(c,u),u)},n.decodeStream=function(c,u){return new n.IconvLiteDecoderStream(n.getDecoder(c,u),u)},n.supportsStreams=!0}};var s;try{s=n1}catch{}s&&s.Transform?n.enableStreamingAPI(s):n.encodeStream=n.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}})(kb);function s1(t){return t>=1500?"":t>=600?"":t>=400?"":t>=200?"":t>=-200?"":t>=-400?"":t>=-600?"":t>=-1500?"":""}function dl(t,e){return 100/(1+Math.exp(-t/e))}var Yt=(t=>(t[t.PLAYER=0]="PLAYER",t[t.OPPONENT=1]="OPPONENT",t[t.RESEARCHER=2]="RESEARCHER",t[t.RESEARCHER_2=3]="RESEARCHER_2",t[t.RESEARCHER_3=4]="RESEARCHER_3",t[t.RESEARCHER_4=5]="RESEARCHER_4",t))(Yt||{});function o1(t){const e=/^\*=([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function r1(t){const e=/^#=([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function a1(t){const e=/^\* *([+-]?[.0-9]+)/.exec(t);return e?Number(e[1]):void 0}function Nu(t){t.forEach(e=>{const i=e.customData||{},n=e.comment.split(`
`);for(const s of n){const o=o1(s)||a1(s);o!==void 0&&(i.playerSearchInfo={usi:t.usi,score:o});const r=r1(s);r!==void 0&&(i.researchInfo={usi:t.usi,score:r})}e.customData=i})}function l1(t){switch(t){case 0:return"*";default:return"#"}}function c1(t,e,i){const n=l1(e);let s="";return i.mate&&(s+=`${Math.abs(i.mate)}
`),i.score!==void 0&&(s+=s1(i.score)+`
`,s+=`${n}=${i.score}
`),i.pv&&i.pv.length!==0&&(s+=`${n}=${o_(t,i.pv)}
`),s}function u1(t,e){return e.split(`
`).filter(i=>i.match(/^[#*]=/)).map(i=>a_(t,i.split("=",2)[1]))}function h1(t){return If(t.timeSeconds)+"+"+String(t.byoyomi).padStart(2,"0")}class d1{constructor(){L(this,"_record",new Mt);L(this,"_recordFilePath");L(this,"onChangeFilePath",()=>{});L(this,"onChangePosition",()=>{});this.setupRecordHandler()}get record(){return this._record}get recordFilePath(){return this._recordFilePath}updateRecordFilePath(e){this._recordFilePath=e,this.onChangeFilePath(e)}clearRecordFilePath(){this._recordFilePath=void 0,this.onChangeFilePath()}reset(e){if(e){const i=new Dt;i.reset(e),this._record.clear(i)}else this._record.clear();this.clearRecordFilePath()}resetByCurrentPosition(){this._record.clear(this._record.position),this.clearRecordFilePath()}importRecord(e,i){let n;switch(i||(i=R_(e)),i){case Yn.SFEN:{const s=Dt.newBySFEN(e);n=s?new Mt(s):new Error(x.failedToParseSFEN);break}case Yn.USI:n=Mt.newByUSI(e);break;case Yn.KIF:n=ru(e);break;case Yn.CSA:n=lu(e);break;default:n=new Error(x.failedToDetectRecordFormat);break}if(n instanceof Error)return du(n);this._record=n,this.setupRecordHandler(),this.clearRecordFilePath(),Nu(this._record)}importRecordFromBuffer(e,i){let n;if(i.match(/\.kif$/)||i.match(/\.kifu$/)){const s=i.match(/\.kif$/)?Er.decode(e,"Shift_JIS"):new TextDecoder().decode(e);n=ru(s)}else i.match(/\.csa$/)?n=lu(new TextDecoder().decode(e)):n=new Error(`${x.unknownFileExtension}: ${i}`);if(n instanceof Error)return du(n);this._record=n,this.setupRecordHandler(),this.updateRecordFilePath(i),Nu(this._record)}exportRecordAsBuffer(e,i){let n;if(e.match(/\.kif$/)||e.match(/\.kifu$/)){const s=Af(this.record,i);n=e.match(/\.kif$/)?Er.encode(s,"Shift_JIS"):new TextEncoder().encode(s)}else if(e.match(/\.csa$/))n=new TextEncoder().encode(Tf(this.record,i));else return new Error(`${x.unknownFileExtension}: ${e}`);return this.updateRecordFilePath(e),n}swapNextTurn(){const e=this.record.position.clone();e.setColor(Ot(e.color)),this._record.clear(e),this.clearRecordFilePath()}changePosition(e){const i=this.record.position.clone();i.edit(e),this._record.clear(i),this.clearRecordFilePath()}changePly(e){this._record.goto(e)}changeBranch(e){return this._record.switchBranchByIndex(e)}swapWithNextBranch(){return this._record.swapWithNextBranch()}swapWithPreviousBranch(){return this._record.swapWithPreviousBranch()}removeCurrentMove(){this._record.removeCurrentMove()}removeNextMove(){this._record.removeNextMove()}updateComment(e){this._record.current.comment=e}appendComment(e,i){if(!e)return;const n=this._record.current.comment,s=this.record.current.comment?`
`:"";switch(i){case di.NONE:break;case di.INSERT:this._record.current.comment=e+s+n;break;case di.APPEND:this._record.current.comment=n+s+e;break;case di.OVERWRITE:this._record.current.comment=e;break}}appendSearchComment(e,i,n,s){const o=c1(this.record.position,e,i);this.appendComment((s?s+`
`:"")+o,n)}get inCommentPVs(){return u1(this.record.position,this.record.current.comment)}setGameStartMetadata(e){e.gameTitle&&this._record.metadata.setStandardMetadata(te.TITLE,e.gameTitle),e.blackName&&this._record.metadata.setStandardMetadata(te.BLACK_NAME,e.blackName),e.whiteName&&this._record.metadata.setStandardMetadata(te.WHITE_NAME,e.whiteName),this._record.metadata.setStandardMetadata(te.DATE,Bf()),this._record.metadata.setStandardMetadata(te.START_DATETIME,_u()),e.timeLimit&&this._record.metadata.setStandardMetadata(te.TIME_LIMIT,h1(e.timeLimit))}setGameEndMetadata(){this._record.metadata.setStandardMetadata(te.END_DATETIME,_u())}updateSearchInfo(e,i){var s,o,r,a;const n=this.record.current.customData||{};switch(e){case 0:n.playerSearchInfo=i;break;case 1:n.opponentSearchInfo=i;break;case 2:(i.depth||0)>=(((s=n.researchInfo)==null?void 0:s.depth)||0)&&(n.researchInfo=i);break;case 3:(i.depth||0)>=(((o=n.researchInfo2)==null?void 0:o.depth)||0)&&(n.researchInfo2=i);break;case 4:(i.depth||0)>=(((r=n.researchInfo3)==null?void 0:r.depth)||0)&&(n.researchInfo3=i);break;case 5:(i.depth||0)>=(((a=n.researchInfo4)==null?void 0:a.depth)||0)&&(n.researchInfo4=i);break}this._record.current.customData=n}appendMove(e){return this._record.append(e.move,e.moveOption)?(e.elapsedMs!==void 0&&this._record.current.setElapsedMs(e.elapsedMs),!0):!1}updateStandardMetadata(e){this._record.metadata.setStandardMetadata(e.key,e.value)}on(e,i){switch(e){case"changeFilePath":this.onChangeFilePath=i;break;case"changePosition":this.onChangePosition=i,this.setupRecordHandler();break}}setupRecordHandler(){this._record.on("changePosition",this.onChangePosition)}}class f1{constructor(){L(this,"searchHandler")}isEngine(){return!1}async startSearch(e,i,n,s,o){this.searchHandler=o}async startPonder(){}async stop(){}async gameover(){}async close(){this.searchHandler=void 0}doMove(e){const i=this.searchHandler;this.searchHandler=void 0,i&&i.onMove(e)}resign(){const e=this.searchHandler;this.searchHandler=void 0,e&&e.onResign()}win(){const e=this.searchHandler;this.searchHandler=void 0,e&&e.onWin()}}const is=new f1;function p1(t,e){const i=[],n=t.clone();for(const s of e){const o=n.createMoveByUSI(s);if(!o||!n.doMove(o))break;i.push(o)}return i}class ac{constructor(e,i,n){L(this,"sessionID",0);L(this,"usi");L(this,"position");L(this,"searchHandler");L(this,"ponder");L(this,"inPonder",!1);L(this,"info");L(this,"usiInfoTimeout");this.setting=e,this.timeoutSeconds=i,this.onSearchInfo=n}async launch(){this.sessionID=await we.usiLaunch(this.setting,this.timeoutSeconds),kr[this.sessionID]=this}isEngine(){return!0}async startSearch(e,i,n,s,o){this.searchHandler=o,this.usi=e.usi,this.position=e.position.clone(),this.inPonder&&this.ponder===this.usi?we.usiPonderHit(this.sessionID):(this.info=void 0,await we.usiGo(this.sessionID,this.usi,i,n,s)),this.inPonder=!1,this.ponder=void 0}async startPonder(e,i,n,s){const o=e.usi;if(!this.ponder||!this.ponder.startsWith(o)||Rn(this.setting.options[Rf])!=="true")return;this.searchHandler=void 0,this.usi=this.ponder,this.position=e.position.clone();const a=this.position.createMoveByUSI(this.ponder.slice(o.length+1));a&&(this.position.doMove(a),this.info=void 0,this.inPonder=!0,await we.usiGoPonder(this.sessionID,this.ponder,i,n,s))}async startResearch(e){this.searchHandler=void 0,this.usi=e.usi,this.info=void 0,this.position=e.position.clone(),await we.usiGoInfinite(this.sessionID,e.usi)}async stop(){await we.usiStop(this.sessionID)}async gameover(e){await we.usiGameover(this.sessionID,e)}async close(){this.searchHandler=void 0,await we.usiQuit(this.sessionID),delete kr[this.sessionID]}onBestMove(e,i,n){const s=this.searchHandler;if(this.searchHandler=void 0,!s||!this.position||e!==this.usi)return;if(i==="resign"){s.onResign();return}if(i==="win"){s.onWin();return}const o=this.position.createMoveByUSI(i);if(!o){s.onError(":"+i),s.onResign();return}if(this.ponder=n&&`${e} ${i} ${n}`,this.flushUSIInfo(),this.info&&this.info.pv&&this.info.pv.length>=1&&this.info.pv[0].equals(o)){const r={...this.info,pv:this.info.pv.slice(1)};s.onMove(o,r)}else s.onMove(o)}onUSIInfo(e,i){if(e!==this.usi||!this.position||i.multipv&&i.multipv!==1)return;const n=this.position.color===U.BLACK?1:-1,s=i.pv&&i.pv.length>=1?i.pv:i.currmove?[i.currmove]:void 0,o={usi:e,depth:i.depth,score:i.scoreCP&&i.scoreCP*n,mate:i.scoreMate&&i.scoreMate*n,pv:s&&p1(this.position,s)};this.updateUSIInfo(o)}updateUSIInfo(e){this.info=e,!this.usiInfoTimeout&&(this.usiInfoTimeout=window.setTimeout(()=>{this.flushUSIInfo()},500))}flushUSIInfo(){this.usiInfoTimeout&&(clearTimeout(this.usiInfoTimeout),this.usiInfoTimeout=void 0),this.onSearchInfo&&this.info&&this.onSearchInfo(this.info)}}const kr={};function g1(t,e,i,n){const s=kr[t];s&&s.onBestMove(e,i,n)}function Ou(t,e,i){const n=kr[t];n&&n.onUSIInfo(e,i)}function Ir(t){return{async build(e,i){if(e.uri===ni)return is;if(Wi(e.uri)&&e.usi){const n=new ac(e.usi,t??10,i);return await n.launch(),n}throw new Error("defaultPlayerBuilder#build: URI: "+e.uri)}}}var Vi=(t=>(t.WIN="win",t.LOSE="lose",t.DRAW="draw",t))(Vi||{});function Lu(t,e){return{player1:{name:t,win:0},player2:{name:e,win:0},draw:0,invalid:0,total:0}}class m1{constructor(e,i,n){L(this,"state");L(this,"_setting");L(this,"startPly",0);L(this,"repeat",0);L(this,"blackPlayer");L(this,"whitePlayer");L(this,"playerBuilder",Ir());L(this,"_results",Lu("",""));L(this,"lastEventID");L(this,"onSaveRecord",()=>{});L(this,"onGameNext",()=>{});L(this,"onGameEnd",()=>{});L(this,"onPieceBeat",()=>{});L(this,"onBeepShort",()=>{});L(this,"onBeepUnlimited",()=>{});L(this,"onStopBeep",()=>{});L(this,"onError",()=>{});this.recordManager=e,this.blackClock=i,this.whiteClock=n,this.state="idle",this._setting=xr(),this.lastEventID=0}on(e,i){switch(e){case"saveRecord":this.onSaveRecord=i;break;case"gameNext":this.onGameNext=i;break;case"gameEnd":this.onGameEnd=i;break;case"pieceBeat":this.onPieceBeat=i;break;case"beepShort":this.onBeepShort=i;break;case"beepUnlimited":this.onBeepUnlimited=i;break;case"stopBeep":this.onStopBeep=i;break;case"error":this.onError=i;break}return this}get setting(){return this._setting}get results(){return this._results}async startGame(e,i){if(this.state!=="idle")throw Error("GameManager#startGame: ");this._setting=e,this.playerBuilder=i,this.repeat=0,e.startPosition||(this.startPly=this.recordManager.record.current.number),this._results=Lu(e.black.name,e.white.name),await this.nextGame()}async nextGame(){this.repeat++,this.setting.startPosition?this.recordManager.reset(this.setting.startPosition):this.recordManager.record.current.number!==this.startPly&&(this.recordManager.changePly(this.startPly),this.recordManager.removeNextMove()),this.recordManager.setGameStartMetadata({gameTitle:this.setting.repeat>=2?` ${this.repeat}/${this.setting.repeat}`:void 0,blackName:this.setting.black.name,whiteName:this.setting.white.name,timeLimit:this.setting.timeLimit});const e={timeMs:this.setting.timeLimit.timeSeconds*1e3,byoyomi:this.setting.timeLimit.byoyomi,increment:this.setting.timeLimit.increment,onBeepShort:()=>this.onBeepShort(),onBeepUnlimited:()=>this.onBeepUnlimited(),onStopBeep:()=>this.onStopBeep()};this.blackClock.setup({...e,onTimeout:()=>{this.timeout(U.BLACK)}}),this.whiteClock.setup({...e,onTimeout:()=>{this.timeout(U.WHITE)}});try{this.blackPlayer=await this.playerBuilder.build(this.setting.black,i=>this.recordManager.updateSearchInfo(Yt.OPPONENT,i)),this.whitePlayer=await this.playerBuilder.build(this.setting.white,i=>this.recordManager.updateSearchInfo(Yt.OPPONENT,i))}catch(i){try{await this.closePlayers()}catch(n){this.onError(n)}throw i}this.state="active",this.onGameNext(),setTimeout(()=>this.nextMove())}nextMove(){if(this.state!=="active")return;if(this._setting.maxMoves&&this.recordManager.record.current.number>=this._setting.maxMoves){this.endGame(_e.IMPASS);return}this.getActiveClock().start();const e=this.recordManager.record.position.color,i=this.getPlayer(e),n=this.getPlayer(Ot(e));if(!i||!n){this.onError(new Error("GameManager#nextMove: "));return}const s=this.issueEventID();i.startSearch(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs,{onMove:(o,r)=>this.onMove(s,o,r),onResign:()=>this.onResign(s),onWin:()=>this.onWin(s),onError:o=>this.onError(o)}).catch(o=>{this.onError(new Error(`GameManager#nextMove: ${x.failedToSendGoCommand}: ${o}`))}),n.startPonder(this.recordManager.record,this.setting.timeLimit,this.blackClock.timeMs,this.whiteClock.timeMs).catch(o=>{this.onError(new Error(`GameManager#nextMove: ${x.failedToSendPonderCommand}: ${o}`))})}onMove(e,i,n){if(e!==this.lastEventID){we.log(bt.ERROR,"GameManager#onMove: event ID already disabled");return}if(this.state!=="active"){we.log(bt.ERROR,"GameManager#onMove: invalid state: "+this.state);return}if(!this.recordManager.record.position.isValidMove(i)){this.onError(": "+Hn(this.recordManager.record.position,i)),this.endGame(_e.FOUL_LOSE);return}this.getActiveClock().stop(),this.recordManager.appendMove({move:i,moveOption:{ignoreValidation:!0},elapsedMs:this.getActiveClock().elapsedMs}),n&&this.recordManager.updateSearchInfo(Yt.PLAYER,n),n&&this.setting.enableComment&&this.recordManager.appendSearchComment(Yt.PLAYER,n,di.APPEND),this.onPieceBeat();const s=this.recordManager.record.perpetualCheck;if(s)if(s===this.recordManager.record.position.color){this.endGame(_e.FOUL_LOSE);return}else{this.endGame(_e.FOUL_WIN);return}else if(this.recordManager.record.repetition){this.endGame(_e.REPETITION_DRAW);return}this.nextMove()}onResign(e){if(e!==this.lastEventID){we.log(bt.ERROR,"GameManager#onResign: event ID already disabled");return}if(this.state!=="active"){we.log(bt.ERROR,"GameManager#onResign: invalid state: "+this.state);return}this.endGame(_e.RESIGN)}onWin(e){if(e!==this.lastEventID){we.log(bt.ERROR,"GameManager#onWin: event ID already disabled");return}if(this.state!=="active"){we.log(bt.ERROR,"GameManager#onWin: invalid state: "+this.state);return}this.endGame(_e.ENTERING_OF_KING)}timeout(e){this.onStopBeep();const i=this.getPlayer(e);if(i&&i.isEngine()&&!this.setting.enableEngineTimeout){i.stop().catch(n=>{this.onError(new Error(`GameManager#timeout: ${x.failedToSendStopCommand}: ${n}`))});return}this.endGame(_e.TIMEOUT)}endGame(e){if(this.state!=="active"&&this.state!=="pending")return;this.state="bussy";const i=this.recordManager.record.position.color;Promise.resolve().then(()=>this.sendGameResults(i,e)).then(()=>this.closePlayers()).then(()=>{if(this.getActiveClock().pause(),this.recordManager.appendMove({move:e,elapsedMs:this.getActiveClock().elapsedMs}),this.recordManager.setGameEndMetadata(),this.addGameResults(i,e),this.state="idle",this._setting.enableAutoSave&&this.onSaveRecord(),e===_e.INTERRUPT||this.repeat>=this.setting.repeat){this.onGameEnd(this.results,e);return}this.setting.swapPlayers&&this.swapPlayers(),this.nextGame().catch(s=>{this.onError(s)})}).catch(n=>{this.onError(n),this.state="pending"})}addGameResults(e,i){switch(Ia(e,U.BLACK,i)){case Vi.WIN:this._results.player1.win++;break;case Vi.LOSE:this._results.player2.win++;break;case Vi.DRAW:this._results.draw++;break;default:this._results.invalid++;break}this._results.total++}swapPlayers(){this._setting={...this.setting,black:this.setting.white,white:this.setting.black},this._results={...this.results,player1:this.results.player2,player2:this.results.player1}}async sendGameResults(e,i){if(this.blackPlayer){const n=Ia(e,U.BLACK,i);n&&await this.blackPlayer.gameover(n)}if(this.whitePlayer){const n=Ia(e,U.WHITE,i);n&&await this.whitePlayer.gameover(n)}}async closePlayers(){this.blackPlayer&&(await this.blackPlayer.close(),this.blackPlayer=void 0),this.whitePlayer&&(await this.whitePlayer.close(),this.whitePlayer=void 0)}getPlayer(e){switch(e){case U.BLACK:return this.blackPlayer;case U.WHITE:return this.whitePlayer}}getActiveClock(){switch(this.recordManager.record.position.color){case U.BLACK:return this.blackClock;case U.WHITE:return this.whiteClock}}issueEventID(){return this.lastEventID+=1,this.lastEventID}}function Ia(t,e,i){switch(i){case _e.FOUL_WIN:case _e.ENTERING_OF_KING:return t==e?Vi.WIN:Vi.LOSE;case _e.RESIGN:case _e.MATE:case _e.TIMEOUT:case _e.FOUL_LOSE:return t==e?Vi.LOSE:Vi.WIN;case _e.IMPASS:case _e.REPETITION_DRAW:return Vi.DRAW}return null}function Du(t){let e=_1(t);const i=t.getStandardMetadata(te.TITLE)||t.getStandardMetadata(te.TOURNAMENT)||t.getStandardMetadata(te.OPUS_NAME)||t.getStandardMetadata(te.OPUS_NO)||t.getStandardMetadata(te.PLACE)||t.getStandardMetadata(te.POSTED_ON)||t.getStandardMetadata(te.AUTHOR);i&&(e+="_"+i);const n=t.getStandardMetadata(te.BLACK_NAME)||t.getStandardMetadata(te.BLACK_SHORT_NAME);n&&(e+="_"+n);const s=t.getStandardMetadata(te.WHITE_NAME)||t.getStandardMetadata(te.WHITE_SHORT_NAME);return s&&(e+="_"+s),e.trim().replaceAll("/","_").replaceAll("\\","_")+".kif"}function _1(t){const e=t.getStandardMetadata(te.START_DATETIME)||t.getStandardMetadata(te.DATE);return e?e.trim().replaceAll(" ","_").replaceAll("/","").replaceAll(":",""):Bf().replaceAll("/","")}class b1{constructor(){L(this,"count",0)}get isBussy(){return this.count!==0}retain(){this.count+=1}release(){this.count-=1}}function y1(t,e){const i=t.clone();let n,s="";for(const o of e){const r=i.createMoveByUSI(o);if(!r)break;s+=Hn(i,r,{prev:n}),i.doMove(r,{ignoreValidation:!0}),n=r}return s}class $f{constructor(e,i){L(this,"sfen","");L(this,"nodes");L(this,"nps");L(this,"iterates",[]);L(this,"hashfull");L(this,"currentMove");L(this,"currentMoveText");L(this,"ponderMove");this.sessionID=e,this.name=i}get latestIteration(){const e=[],i=new Set,n=new Set;for(const s of this.iterates){const o=s.pv?s.pv[0]:void 0;!i.has(s.multiPV)&&!n.has(o)&&(e.push(s),i.add(s.multiPV),n.add(o))}return e.sort((s,o)=>(s.multiPV||1)-(o.multiPV||1))}update(e,i,n){this.sfen!==e&&(this.sfen=e,this.nodes=void 0,this.nps=void 0,this.iterates=[],this.hashfull=void 0,this.currentMove=void 0,this.currentMoveText=void 0,this.ponderMove=void 0);const s=Dt.newBySFEN(e);if(!s)return;const o={position:e,color:s.color};if(i.depth!==void 0&&(o.depth=i.depth),i.seldepth!==void 0&&(o.selectiveDepth=i.seldepth),i.timeMs!==void 0&&(o.timeMs=i.timeMs),i.nodes!==void 0&&(this.nodes=i.nodes),i.pv&&(o.pv=i.pv,o.text=y1(s,i.pv)),i.multipv!==void 0&&(o.multiPV=i.multipv),i.scoreCP!==void 0&&(o.score=i.scoreCP),i.scoreMate!==void 0&&(o.scoreMate=i.scoreMate),i.lowerbound!==void 0&&(o.lowerBound=i.lowerbound),i.upperbound!==void 0&&(o.upperBound=i.upperbound),i.currmove!==void 0){this.currentMove=i.currmove;const r=s.createMoveByUSI(i.currmove);r&&(this.currentMoveText=Hn(s,r))}i.hashfullPerMill!==void 0&&(this.hashfull=i.hashfullPerMill/1e3),i.nps!==void 0&&(this.nps=i.nps),i.string&&(o.text=i.string),Object.keys(o).length!==0&&(i.nodes!==void 0&&(o.nodes=i.nodes),this.iterates.unshift(o)),this.ponderMove=n&&Hn(s,n)}}class v1{constructor(){L(this,"_sessions",[]);L(this,"updateQueue",[]);L(this,"timeoutHandle")}get sessions(){return this._sessions}clear(){this._sessions=[],this.updateQueue=[],this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}update(e,i,n,s,o){this.updateQueue.push({sessionID:e,sfen:i.sfen,name:n,info:s,ponderMove:o}),this.timeoutHandle||(this.timeoutHandle=window.setTimeout(()=>{this.dequeue()},500))}dequeue(){for(const e of this.updateQueue)this._update(e);this.updateQueue=[],this.timeoutHandle=void 0}_update(e){let i=this._sessions.find(n=>n.sessionID===e.sessionID);i||(i=this.addSession(e.sessionID,e.name)),i.update(e.sfen,e.info,e.ponderMove)}addSession(e,i){const n=new $f(e,i);return this.sessions.push(n),this.sessions.sort((s,o)=>s.sessionID-o.sessionID),n}}var q=(t=>(t.NORMAL="normal",t.PASTE_DIALOG="pasteDialog",t.POSITION_EDITING="positionEditing",t.EXPORT_POSITION_IMAGE_DIALOG="exportBoardImageDialog",t.GAME_DIALOG="gameDialog",t.GAME="game",t.CSA_GAME_DIALOG="csaGameDialog",t.CSA_GAME="csaGame",t.RESEARCH="research",t.RESEARCH_DIALOG="researchDialog",t.ANALYSIS="analysis",t.ANALYSIS_DIALOG="analysisDialog",t.USI_ENGINE_SETTING_DIALOG="usiEngineSettingDialog",t))(q||{});class S1{constructor(){L(this,"_queue",[])}get message(){return this._queue[0]}get hasMessage(){return this._queue.length!==0}enqueue(e){this._queue.push(e)}dequeue(){this._queue.shift()}}class w1{constructor(){L(this,"errorCounts",{})}get errors(){return Object.entries(this.errorCounts).sort(([e],[i])=>e<i?-1:e>i?1:0).map(([e,i])=>({message:e,count:i}))}get hasError(){return!!Object.keys(this.errorCounts).length}add(e){const i=e instanceof Error?e.message:""+e,n=this.errorCounts[i]||0;this.errorCounts[i]=n+1}clear(){this.errorCounts={}}}class x1{constructor(){L(this,"setting",cl())}get raw(){return this.setting}get language(){return this.setting.language}get thema(){return this.setting.thema}get pieceImage(){return this.setting.pieceImage}get backgroundImageType(){return this.setting.backgroundImageType}get backgroundImageFileURL(){return this.setting.backgroundImageFileURL}get boardImage(){return this.setting.boardImage}get boardImageFileURL(){return this.setting.boardImageFileURL}get pieceStandImage(){return this.setting.pieceStandImage}get pieceStandImageFileURL(){return this.setting.pieceStandImageFileURL}get boardLabelType(){return this.setting.boardLabelType}get leftSideControlType(){return this.setting.leftSideControlType}get rightSideControlType(){return this.setting.rightSideControlType}get pieceVolume(){return this.setting.pieceVolume}get clockVolume(){return this.setting.clockVolume}get clockPitch(){return this.setting.clockPitch}get clockSoundTarget(){return this.setting.clockSoundTarget}get boardFlipping(){return this.setting.boardFlipping}get tabPaneType(){return this.setting.tabPaneType}get tab(){return this.setting.tab}get tab2(){return this.setting.tab2}get topPaneHeightPercentage(){return this.setting.topPaneHeightPercentage}get topPanePreviousHeightPercentage(){return this.setting.topPanePreviousHeightPercentage}get bottomLeftPaneWidthPercentage(){return this.setting.bottomLeftPaneWidthPercentage}get returnCode(){return this.setting.returnCode}get autoSaveDirectory(){return this.setting.autoSaveDirectory}get translateEngineOptionName(){return this.setting.translateEngineOptionName}get engineTimeoutSeconds(){return this.setting.engineTimeoutSeconds}get evaluationViewFrom(){return this.setting.evaluationViewFrom}get coefficientInSigmoid(){return this.setting.coefficientInSigmoid}get badMoveLevelThreshold1(){return this.setting.badMoveLevelThreshold1}get badMoveLevelThreshold2(){return this.setting.badMoveLevelThreshold2}get badMoveLevelThreshold3(){return this.setting.badMoveLevelThreshold3}get badMoveLevelThreshold4(){return this.setting.badMoveLevelThreshold4}get showElapsedTimeInRecordView(){return this.setting.showElapsedTimeInRecordView}get showCommentInRecordView(){return this.setting.showCommentInRecordView}get enableAppLog(){return this.setting.enableAppLog}get enableUSILog(){return this.setting.enableUSILog}get enableCSALog(){return this.setting.enableCSALog}get logLevel(){return this.setting.logLevel}get positionImageStyle(){return this.setting.positionImageStyle}get positionImageSize(){return this.setting.positionImageSize}get positionImageHeader(){return this.setting.positionImageHeader}get lastRecordFilePath(){return this.setting.lastRecordFilePath}get lastUSIEngineFilePath(){return this.setting.lastUSIEngineFilePath}get lastImageExportFilePath(){return this.setting.lastImageExportFilePath}get lastOtherFilePath(){return this.setting.lastOtherFilePath}get emptyRecordInfoVisibility(){return this.setting.emptyRecordInfoVisibility}async loadAppSetting(){this.setting=await we.loadAppSetting()}async updateAppSetting(e){const i=D_(this.setting,e);if(i instanceof Error)throw i;await we.saveAppSetting(i),this.setting=i}flipBoard(){this.setting.boardFlipping=!this.setting.boardFlipping,we.saveAppSetting(this.setting)}}function E1(){return xi(new x1)}let Aa;function Ge(){return Aa||(Aa=E1()),Aa}class k1{constructor(e){L(this,"researcher");L(this,"setting",ul());L(this,"number");L(this,"actualMove");L(this,"lastSearchInfo");L(this,"searchInfo");L(this,"timerHandle");L(this,"onFinish",()=>{});L(this,"onError",()=>{});this.recordManager=e}on(e,i){switch(e){case"finish":this.onFinish=i;break;case"error":this.onError=i;break}return this}async start(e){if(!e.usi)throw new Error("");await this.setupEngine(e.usi),this.setting=e,this.number=void 0,this.actualMove=void 0,this.lastSearchInfo=void 0,this.searchInfo=void 0,setTimeout(()=>this.next())}close(){this.clearTimer(),this.closeEngine().catch(e=>{this.onError(e)})}async setupEngine(e){if(this.researcher)throw new Error("AnalysisManager#setupEngine: ");const i=Ge(),n=new ac(e,i.engineTimeoutSeconds,this.updateSearchInfo.bind(this));await n.launch(),this.researcher=n}async closeEngine(){this.researcher&&(await this.researcher.close(),this.researcher=void 0)}next(){if(this.clearTimer(),!this.researcher){this.onError(new Error("")),this.finish();return}if(this.lastSearchInfo=this.searchInfo,this.searchInfo=void 0,this.number!==void 0?this.number=this.number+1:this.setting.startCriteria.enableNumber?this.number=this.setting.startCriteria.number-1:this.number=0,this.setting.endCriteria.enableNumber&&this.number>=this.setting.endCriteria.number){this.finish();return}this.recordManager.changePly(this.number);const e=this.recordManager.record;if(e.current.number!==this.number){this.finish();return}if(!e.current.next&&!(e.current.move instanceof ct)){this.finish();return}this.actualMove=e.current.move instanceof ct?e.current.move:void 0,this.setTimer(),this.researcher.startResearch(e).catch(i=>{this.onError(i)})}finish(){this.onFinish(),this.close()}setTimer(){this.timerHandle=window.setTimeout(()=>{this.onResult(),this.next()},this.setting.perMoveCriteria.maxSeconds*1e3)}clearTimer(){this.timerHandle&&(clearTimeout(this.timerHandle),this.timerHandle=void 0)}onResult(){if(!this.searchInfo||!this.lastSearchInfo)return;const e=this.recordManager.record,n=Ot(e.position.color)===U.BLACK?1:-1,s=this.searchInfo.score!==void 0?this.searchInfo.score*n:void 0,o=this.searchInfo.score!==void 0&&this.lastSearchInfo.score!==void 0?(this.searchInfo.score-this.lastSearchInfo.score)*n:void 0,r=this.actualMove&&this.lastSearchInfo.pv?this.actualMove.equals(this.lastSearchInfo.pv[0]):void 0,a=Ge();let l="";if(o!==void 0&&s!==void 0&&!r){const c=I1(s-o,s,a);c&&(l=`${c}`)}this.recordManager.appendSearchComment(Yt.RESEARCHER,this.searchInfo,this.setting.commentBehavior,l)}updateSearchInfo(e){this.recordManager.updateSearchInfo(Yt.RESEARCHER,e),this.searchInfo=e}}function I1(t,e,i){const n=dl(t,i.coefficientInSigmoid)-dl(e,i.coefficientInSigmoid);return n>=i.badMoveLevelThreshold4?"":n>=i.badMoveLevelThreshold3?"":n>=i.badMoveLevelThreshold2?"":n>=i.badMoveLevelThreshold1?"":null}function A1(){return{id:"",myColor:U.BLACK,toMove:U.BLACK,position:"",timeUnitMs:1e3,totalTime:0,byoyomi:0,delay:0,increment:0}}var Fi=(t=>(t.UNKNOWN="unknown",t.RESIGN="resign",t.SENNICHITE="sennichite",t.OUTE_SENNICHITE="oute_sennichite",t.ILLEGAL_MOVE="illegal_move",t.ILLEGAL_ACTION="illegal_action",t.TIME_UP="time_up",t.JISHOGI="jishogi",t.MAX_MOVES="max_moves",t))(Fi||{}),Yo=(t=>(t.WIN="win",t.LOSE="lose",t.DRAW="draw",t.CENSORED="censored",t.CHUDAN="chudan",t))(Yo||{}),en=(t=>(t.V121="v121",t.V121_FLOODGATE="v121_floodgate",t))(en||{});function Uf(){return{protocolVersion:"v121",host:"localhost",port:4081,id:"",password:""}}function P1(){return{player:{name:"",uri:ni},server:Uf(),autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function C1(t){if(t.server.protocolVersion!=="v121"&&t.server.protocolVersion!=="v121_floodgate")return new Error("");if(t.server.host==="")return new Error("");if(t.server.port<0||t.server.port>65535)return new Error("");if(t.server.id==="")return new Error("ID")}function T1(){return{player:{name:"",uri:ni},serverHistory:[],autoFlip:!0,enableComment:!0,enableAutoSave:!0,repeat:1,autoRelogin:!0}}function M1(t,e){var i;return{player:t.player,server:((i=t.serverHistory)==null?void 0:i.length)>e?t.serverHistory[e]:Uf(),autoFlip:t.autoFlip,enableComment:t.enableComment,enableAutoSave:t.enableAutoSave,repeat:t.repeat,autoRelogin:t.autoRelogin}}const R1=10;function N1(t,e){const i=[e.server];for(const n of t.serverHistory)if((n.protocolVersion!==e.server.protocolVersion||n.host!==e.server.host||n.port!==e.server.port||n.id!==e.server.id||n.password!==e.server.password)&&i.push(n),i.length===R1)break;return{player:e.player,serverHistory:i,autoFlip:e.autoFlip,enableComment:e.enableComment,enableAutoSave:e.enableAutoSave,repeat:e.repeat,autoRelogin:e.autoRelogin}}const zf=10;var hi=(t=>(t[t.OFFLINE=0]="OFFLINE",t[t.WAITING_LOGIN=1]="WAITING_LOGIN",t[t.LOGIN_FAILED=2]="LOGIN_FAILED",t[t.LOGIN_RETRY_INTERVAL=3]="LOGIN_RETRY_INTERVAL",t[t.READY=4]="READY",t[t.GAME=5]="GAME",t))(hi||{});class O1{constructor(e,i,n){L(this,"_state",0);L(this,"_setting",P1());L(this,"sessionID",0);L(this,"stopRequested",!1);L(this,"repeat",0);L(this,"player");L(this,"gameSummary",A1());L(this,"searchInfo");L(this,"playerBuilder",Ir());L(this,"retryTimer");L(this,"onSaveRecord",()=>{});L(this,"onGameNext",()=>{});L(this,"onGameEnd",()=>{});L(this,"onFlipBoard",()=>{});L(this,"onPieceBeat",()=>{});L(this,"onBeepShort",()=>{});L(this,"onBeepUnlimited",()=>{});L(this,"onStopBeep",()=>{});L(this,"onError",()=>{});this.recordManager=e,this.blackClock=i,this.whiteClock=n}on(e,i){switch(e){case"saveRecord":this.onSaveRecord=i;break;case"gameNext":this.onGameNext=i;break;case"gameEnd":this.onGameEnd=i;break;case"flipBoard":this.onFlipBoard=i;break;case"pieceBeat":this.onPieceBeat=i;break;case"beepShort":this.onBeepShort=i;break;case"beepUnlimited":this.onBeepUnlimited=i;break;case"stopBeep":this.onStopBeep=i;break;case"error":this.onError=i;break}return this}get state(){return this._state}get setting(){return this._setting}get isMyTurn(){return this.recordManager.record.position.color===this.gameSummary.myColor}login(e,i){return this.sessionID?Promise.reject(new Error("CSAGameManager#start: session already exists")):this._state!==0?Promise.reject(new Error("CSAGameManager#start: unexpected state")):(this._setting=e,this.playerBuilder=i,this.repeat=0,this.relogin())}async relogin(){this._state=1;try{this.player=await this.playerBuilder.build(this._setting.player,i=>this.recordManager.updateSearchInfo(Yt.OPPONENT,i));const e=await we.csaLogin(this._setting.server);this.sessionID=e,this._state=4,L1(this.sessionID,this),this.onGameNext()}catch(e){throw this._state=2,this.close(1),e}}stop(){this.sessionID&&(this.stopRequested=!0,we.csaStop(this.sessionID))}logout(){this.close(0)}close(e){if(!(this._state===0||this._state===1)){if(this.stopRequested&&(e=0,this.stopRequested=!1),this.sessionID&&(D1(this.sessionID),we.csaLogout(this.sessionID).catch(this.onError),this.sessionID=0),this.player&&(this.player.close().catch(this.onError),this.player=void 0),this.blackClock.stop(),this.whiteClock.stop(),this._state=0,this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=void 0),e===0||this.repeat>=this.setting.repeat){this.onGameEnd();return}e===2?this.relogin().catch(this.onError):(this._state=3,this.retryTimer=setTimeout(()=>this.relogin().catch(this.onError),zf*1e3))}}onGameSummary(e){this.gameSummary=e,we.csaAgree(this.sessionID,this.gameSummary.id)}onReject(){this.close(1)}onStart(e){this.repeat++,this.recordManager.importRecord(this.gameSummary.position,Yn.CSA),this.recordManager.setGameStartMetadata({gameTitle:this.gameSummary.id,blackName:this.gameSummary.blackPlayerName,whiteName:this.gameSummary.whitePlayerName,timeLimit:{timeSeconds:this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,increment:this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3}}),this.setting.autoFlip&&this.onFlipBoard&&this.onFlipBoard(this.gameSummary.myColor===U.WHITE),this._state=5,this.next(e)}onMove(e,i){const n=this.isMyTurn,s=P_(this.recordManager.record.position,e);if(s instanceof Error){this.onError(`CSAGameManager#onMove:  [${e}]: ${s.message}`);return}this.recordManager.appendMove({move:s,moveOption:{ignoreValidation:!0},elapsedMs:this.parseElapsedMs(e)}),n&&this.searchInfo&&this.recordManager.updateSearchInfo(Yt.PLAYER,this.searchInfo),n&&this.searchInfo&&this.setting.enableComment&&this.recordManager.appendSearchComment(Yt.PLAYER,this.searchInfo,di.APPEND),this.onPieceBeat(),this.next(i)}parseElapsedMs(e){const i=/^.*,T([0-9]+)$/.exec(e);return i?Number(parseInt(i[1]))*this.gameSummary.timeUnitMs:0}onGameResult(e,i){this.recordManager.appendMove({move:this.gameResultToSpecialMove(e,i)}),this.setting.enableAutoSave&&this.onSaveRecord(),this.close(2)}gameResultToSpecialMove(e,i){const n=this.recordManager.record.position.color;switch(e){case Fi.RESIGN:return _e.RESIGN;case Fi.SENNICHITE:return _e.REPETITION_DRAW;case Fi.OUTE_SENNICHITE:case Fi.ILLEGAL_MOVE:case Fi.ILLEGAL_ACTION:switch(i){case Yo.WIN:return n===this.gameSummary.myColor?_e.FOUL_WIN:_e.FOUL_LOSE;case Yo.LOSE:return n===this.gameSummary.myColor?_e.FOUL_LOSE:_e.FOUL_WIN}break;case Fi.TIME_UP:return _e.TIMEOUT;case Fi.JISHOGI:return _e.ENTERING_OF_KING;case Fi.MAX_MOVES:return _e.IMPASS}return i===Yo.DRAW?_e.DRAW:_e.INTERRUPT}onClose(){this.close(this.setting.autoRelogin?1:0)}next(e){this.blackClock.stop(),this.whiteClock.stop(),this.syncClock(e),this.startClock(),this.recordManager.record.position.color===this.gameSummary.myColor?this.startSearch(e):this.startPonder()}syncClock(e){const i={byoyomi:this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,onBeepShort:()=>this.onBeepShort(),onBeepUnlimited:()=>this.onBeepUnlimited(),onStopBeep:()=>this.onStopBeep()};this.blackClock.setup({...i,timeMs:e.black.time*this.gameSummary.timeUnitMs}),this.whiteClock.setup({...i,timeMs:e.white.time*this.gameSummary.timeUnitMs})}startClock(){this.recordManager.record.position.color===U.BLACK?this.blackClock.start():this.whiteClock.start()}startSearch(e){if(!this.player){this.onError("CSAGameManager#startSearch: player is not initialized");return}this.player.startSearch(this.recordManager.record,this.buildTimeLimitSetting(),e.black.time*this.gameSummary.timeUnitMs,e.white.time*this.gameSummary.timeUnitMs,{onMove:this.onPlayerMove.bind(this),onResign:this.onPlayerResign.bind(this),onWin:this.onPlayerWin.bind(this),onError:this.onPlayerError.bind(this)}).catch(i=>{this.onError(new Error(`CSAGameManager#next: ${x.failedToSendGoCommand}: ${i}`))})}startPonder(){if(!this.player){this.onError("CSAGameManager#startPonder: player is not initialized");return}this.player.startPonder(this.recordManager.record,this.buildTimeLimitSetting(),this.blackClock.timeMs,this.whiteClock.timeMs).catch(e=>{this.onError(new Error(`CSAGameManager#next: ${x.failedToSendPonderCommand}: ${e}`))})}buildTimeLimitSetting(){const e=this.gameSummary.totalTime*this.gameSummary.timeUnitMs/1e3,i=this.gameSummary.byoyomi*this.gameSummary.timeUnitMs/1e3,n=this.gameSummary.increment*this.gameSummary.timeUnitMs/1e3;return{timeSeconds:e,byoyomi:i,increment:n}}onPlayerMove(e,i){this.searchInfo=i;let n,s;switch(this._setting.server.protocolVersion){case en.V121:break;case en.V121_FLOODGATE:if(n=i==null?void 0:i.score,i!=null&&i.pv)for(const o of i.pv)s=s?s+" ":"",s+=hu(o);break}we.csaMove(this.sessionID,hu(e),n,s)}onPlayerResign(){we.csaResign(this.sessionID)}onPlayerWin(){we.csaWin(this.sessionID)}onPlayerError(e){this.onError(e)}}const mn={};function L1(t,e){mn[t]=e}function D1(t){delete mn[t]}function B1(t,e){const i=mn[t];i&&i.onGameSummary(e)}function F1(t){const e=mn[t];e&&e.onReject()}function H1(t,e){const i=mn[t];i&&i.onStart(e)}function $1(t,e,i){const n=mn[t];n&&n.onMove(e,i)}function U1(t,e,i){const n=mn[t];n&&n.onGameResult(e,i)}function z1(t){const e=mn[t];e&&e.onClose()}class Bu{constructor(){L(this,"setting",{timeMs:0,byoyomi:0,increment:0});L(this,"_timeMs",0);L(this,"_byoyomi",0);L(this,"_elapsedMs",0);L(this,"timerHandle",0);L(this,"timerStart",0);L(this,"lastTimeMs",0)}setup(e){this.setting=e,this._timeMs=e.timeMs||0,this._byoyomi=e.byoyomi||0,this._elapsedMs=0}get time(){return Math.ceil(this._timeMs/1e3)}get timeMs(){return this._timeMs}get byoyomi(){return this._byoyomi}get elapsedMs(){return this._elapsedMs}start(){this.clearTimer(),this.timerStart=Date.now(),this.lastTimeMs=this._timeMs,this._byoyomi=this.setting.byoyomi||0,this._elapsedMs=0,this.timerHandle=window.setInterval(()=>{const e=this.timeMs,i=this.byoyomi;this._elapsedMs=Date.now()-this.timerStart;const n=this.lastTimeMs-this._elapsedMs;if(n>=0?this._timeMs=n:(this._timeMs=0,this._byoyomi=Math.max(Math.ceil((this.setting.byoyomi||0)+n/1e3),0)),this.timeMs===0&&this.byoyomi===0){this.timeout();return}this.fireBeep(e,i)},100)}fireBeep(e,i){let n=Math.ceil(this.timeMs/1e3),s=Math.ceil(e/1e3);if(!(n!==0&&this.byoyomi!==0)){if(n===0&&s!==0){this.setting.onBeepShort&&this.setting.onBeepShort();return}this.byoyomi!==0&&(n=this.byoyomi,s=i),n!==s&&(n<=5?this.setting.onBeepUnlimited&&this.setting.onBeepUnlimited():(n<=10||n===20||n===30||n===60)&&this.setting.onBeepShort&&this.setting.onBeepShort())}}pause(){this.clearTimer()}stop(){this.clearTimer(),this.incrementTime()}timeout(){this.clearTimer(),this.setting.onTimeout&&this.setting.onTimeout()}clearTimer(){this.timerHandle&&(window.clearInterval(this.timerHandle),this.timerHandle=0),this.setting.onStopBeep&&this.setting.onStopBeep()}incrementTime(){this._timeMs+=(this.setting.increment||0)*1e3}}function G1(t){switch(t){case 0:return Yt.RESEARCHER;case 1:return Yt.RESEARCHER_2;case 2:return Yt.RESEARCHER_3;case 3:return Yt.RESEARCHER_4;default:return}}class W1{constructor(){L(this,"engines",[]);L(this,"onUpdateSearchInfo")}on(e,i){switch(e){case"updateSearchInfo":this.onUpdateSearchInfo=i}}async launch(e){var s;if(e.usi===void 0)throw new Error("ResearchManager#launch: USI");for(const o of e.secondaries||[])if(o.usi===void 0)throw new Error("ResearchManager#launch: USI");if(this.engines.length>0)throw new Error("ResearchManager#launch: ");const i=Ge(),n=[e.usi,...((s=e.secondaries)==null?void 0:s.map(o=>o.usi))||[]].filter(o=>!!o);this.engines=n.map((o,r)=>{const a=G1(r);return new ac(o,i.engineTimeoutSeconds,l=>{this.onUpdateSearchInfo&&a!==void 0&&this.onUpdateSearchInfo(a,l)})});try{await Promise.all(this.engines.map(o=>o.launch()))}catch(o){throw this.close(),o}}updatePosition(e){this.engines.forEach(i=>i.startResearch(e))}async close(){await Promise.allSettled(this.engines.map(e=>e.close())),this.engines=[]}}function Fu(t){const e=t.total-t.invalid;return[{type:"list",items:[{text:t.player1.name,children:[`: ${t.player1.win}`,`: ${Zc(t.player1.win,e,1)}`]},{text:t.player2.name,children:[`: ${t.player2.win}`,`: ${Zc(t.player2.win,e,1)}`]},{text:`: ${t.draw}`},{text:`: ${e}`},{text:`: ${t.invalid}`}]}]}class V1{constructor(){L(this,"onChangeFilePath",[]);L(this,"_bussy",new b1);L(this,"_message",new S1);L(this,"_error",new w1);L(this,"recordManager",new d1);L(this,"_appState",q.NORMAL);L(this,"_isAppSettingDialogVisible",!1);L(this,"_confirmation");L(this,"usiMonitor",new v1);L(this,"blackClock",new Bu);L(this,"whiteClock",new Bu);L(this,"gameManager",new m1(this.recordManager,this.blackClock,this.whiteClock));L(this,"csaGameManager",new O1(this.recordManager,this.blackClock,this.whiteClock));L(this,"researchManager",new W1);L(this,"analysisManager",new k1(this.recordManager));L(this,"_reactive");this.recordManager.on("changeFilePath",n=>{for(const s of this.onChangeFilePath)s(n)}),this.recordManager.on("changePosition",()=>{this.onUpdatePosition()});const e=xi(this),i=Ge();this.gameManager.on("saveRecord",e.onSaveRecord.bind(e)).on("gameNext",e.onGameNext.bind(e)).on("gameEnd",e.onGameEnd.bind(e)).on("pieceBeat",()=>pa(i.pieceVolume)).on("beepShort",this.onBeepShort.bind(this)).on("beepUnlimited",this.onBeepUnlimited.bind(this)).on("stopBeep",mu).on("error",e.pushError.bind(e)),this.csaGameManager.on("saveRecord",e.onSaveRecord.bind(e)).on("gameNext",e.onGameNext.bind(e)).on("gameEnd",e.onCSAGameEnd.bind(e)).on("flipBoard",e.onFlipBoard.bind(e)).on("pieceBeat",()=>pa(i.pieceVolume)).on("beepShort",this.onBeepShort.bind(this)).on("beepUnlimited",this.onBeepUnlimited.bind(this)).on("stopBeep",mu).on("error",e.pushError.bind(e)),this.researchManager.on("updateSearchInfo",this.onUpdateSearchInfo.bind(e)),this.analysisManager.on("finish",this.onFinish.bind(e)).on("error",this.pushError.bind(e)),this._reactive=e}addListener(e,i){switch(e){case"changeFilePath":this.onChangeFilePath.push(i);break}return this}get reactive(){return this._reactive}get isBussy(){return this._bussy.isBussy}retainBussyState(){return this._bussy.retain()}releaseBussyState(){return this._bussy.release()}get message(){return this._message.message}get hasMessage(){return this._message.hasMessage}enqueueMessage(e){this._message.enqueue(e)}dequeueMessage(){this._message.dequeue()}get errors(){return this._error.errors}get hasError(){return this._error.hasError}pushError(e){we.log(bt.ERROR,rf(e)),this._error.add(e)}clearErrors(){this._error.clear()}get record(){return this.recordManager.record}get recordFilePath(){return this.recordManager.recordFilePath}get inCommentPVs(){return this.recordManager.inCommentPVs}updateStandardRecordMetadata(e){this.recordManager.updateStandardMetadata(e)}get appState(){return this._appState}get confirmation(){var e;return(e=this._confirmation)==null?void 0:e.message}showConfirmation(e){this._confirmation&&we.log(bt.WARN,`Store#showConfirmation:  appState=${this.appState} currentMessage=${this._confirmation.message} newMessage=${e.message}`),this._confirmation={...e,appState:this.appState}}confirmationOk(){if(!this._confirmation)return;const e=this._confirmation;if(this._confirmation=void 0,this.appState!==e.appState){this.pushError("");return}e.onOk&&e.onOk()}confirmationCancel(){this._confirmation=void 0}showPasteDialog(){this.appState===q.NORMAL&&(this._appState=q.PASTE_DIALOG)}showGameDialog(){this.appState===q.NORMAL&&(this._appState=q.GAME_DIALOG)}showCSAGameDialog(){this.appState===q.NORMAL&&(this._appState=q.CSA_GAME_DIALOG)}showResearchDialog(){this.appState===q.NORMAL&&(this._appState=q.RESEARCH_DIALOG)}showAnalysisDialog(){this.appState===q.NORMAL&&(this._appState=q.ANALYSIS_DIALOG)}showUsiEngineManagementDialog(){this.appState===q.NORMAL&&(this._appState=q.USI_ENGINE_SETTING_DIALOG)}showExportBoardImageDialog(){this.appState===q.NORMAL&&(this._appState=q.EXPORT_POSITION_IMAGE_DIALOG)}destroyModalDialog(){(this.appState===q.PASTE_DIALOG||this.appState===q.GAME_DIALOG||this.appState===q.CSA_GAME_DIALOG||this.appState===q.RESEARCH_DIALOG||this.appState===q.ANALYSIS_DIALOG||this.appState===q.USI_ENGINE_SETTING_DIALOG||this.appState===q.EXPORT_POSITION_IMAGE_DIALOG)&&(this._appState=q.NORMAL)}closeModalDialog(){this.isBussy||this.destroyModalDialog()}get isAppSettingDialogVisible(){return this._isAppSettingDialogVisible}showAppSettingDialog(){this._isAppSettingDialogVisible=!0}closeAppSettingDialog(){this._isAppSettingDialogVisible=!1}get usiMonitors(){return this.usiMonitor.sessions}updateUSIInfo(e,i,n,s){this.recordManager.record.usi===i&&this.usiMonitor.update(e,this.recordManager.record.position,n,s)}updateUSIPonderInfo(e,i,n,s){const o=Mt.newByUSI(i);if(o instanceof Error){we.log(bt.ERROR,`invalid USI: ${i} (updateUSIPonderInfo)`);return}const r=o.current.move;r instanceof ct&&this.usiMonitor.update(e,o.position,n,s,r)}get blackTime(){return this.blackClock.time}get blackByoyomi(){return this.blackClock.byoyomi}get whiteTime(){return this.whiteClock.time}get whiteByoyomi(){return this.whiteClock.byoyomi}startGame(e){this.appState!==q.GAME_DIALOG||this.isBussy||(this.retainBussyState(),we.saveGameSetting(e).then(()=>{this.initializeDisplaySettingForGame(e);const i=Ge(),n=Ir(i.engineTimeoutSeconds);return this.gameManager.startGame(e,n)}).then(()=>this._appState=q.GAME).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}get gameSetting(){return this.gameManager.setting}get gameResults(){return this.gameManager.results}get csaGameState(){return this.csaGameManager.state}loginCSAGame(e,i){this.appState!==q.CSA_GAME_DIALOG||this.isBussy||(this.retainBussyState(),Promise.resolve().then(async()=>{if(i.saveHistory){const n=await we.loadCSAGameSettingHistory(),s=N1(n,e);await we.saveCSAGameSettingHistory(s)}}).then(()=>{const n=Ge(),s=Ir(n.engineTimeoutSeconds);return this.csaGameManager.login(e,s)}).then(()=>this._appState=q.CSA_GAME).catch(n=>{this.pushError(": "+n)}).finally(()=>{this.releaseBussyState()}))}cancelCSAGame(){if(this.appState===q.CSA_GAME){if(this.csaGameManager.state===hi.GAME){this.pushError("");return}this.csaGameManager.logout(),this._appState=q.NORMAL}}initializeDisplaySettingForGame(e){if(e.humanIsFront){const i=Ge();let n=i.boardFlipping;e.black.uri===ni&&e.white.uri!==ni?n=!1:e.black.uri!==ni&&e.white.uri===ni&&(n=!0),n!==i.boardFlipping&&i.flipBoard()}}stopGame(){switch(this.appState){case q.GAME:this.gameManager.setting.repeat>=2?this.showConfirmation({message:x.areYouSureWantToQuitGames,onOk:()=>this.gameManager.endGame(_e.INTERRUPT)}):this.gameManager.endGame(_e.INTERRUPT);break;case q.CSA_GAME:this.showConfirmation({message:x.areYouSureWantToRequestQuit,onOk:()=>this.csaGameManager.stop()});break}}showGameResults(){if(this.appState!==q.GAME)return;const e=this.gameManager.results;this.enqueueMessage({text:x.gameProgress,attachments:Fu(e)})}onGameNext(){this.usiMonitor.clear()}onGameEnd(e,i){this.appState===q.GAME&&(e&&e.total>=2?this.enqueueMessage({text:x.allGamesCompleted,attachments:Fu(e)}):i&&this.enqueueMessage({text:`${x.gameEnded}${wf(i)})`}),this._appState=q.NORMAL)}onCSAGameEnd(){this.appState===q.CSA_GAME&&(this._appState=q.NORMAL)}onFlipBoard(e){Ge().boardFlipping!==e&&Ge().flipBoard()}onSaveRecord(){const e=Du(this.recordManager.record.metadata),n=`${Ge().autoSaveDirectory}/${e}`;this.saveRecordByPath(n).catch(s=>{this.pushError(`: ${s}`)})}onBeepShort(){const e=Ge();e.clockSoundTarget===ll.ONLY_USER&&!this.isMovableByUser||wb({frequency:e.clockPitch,volume:e.clockVolume})}onBeepUnlimited(){const e=Ge();e.clockSoundTarget===ll.ONLY_USER&&!this.isMovableByUser||xb({frequency:e.clockPitch,volume:e.clockVolume})}doMove(e){if(this.appState!==q.NORMAL&&this.appState!==q.RESEARCH||!this.recordManager.appendMove({move:e}))return;const i=Ge();pa(i.pieceVolume)}onFinish(){this.appState===q.ANALYSIS&&(this._message.enqueue({text:""}),this._appState=q.NORMAL)}startResearch(e){if(!(this.appState!==q.RESEARCH_DIALOG||this.isBussy)){if(this.retainBussyState(),!e.usi){this.pushError(new Error(""));return}we.saveResearchSetting(e).then(()=>this.researchManager.launch(e)).then(()=>{this._appState=q.RESEARCH,this.usiMonitor.clear(),this.onUpdatePosition();const i=Ge();i.tab!==Je.SEARCH&&i.tab!==Je.PV&&i.tab!==Je.CHART&&i.tab!==Je.PERCENTAGE_CHART&&Ge().updateAppSetting({tab:Je.PV})}).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()})}}stopResearch(){this.appState===q.RESEARCH&&(this.researchManager.close(),this._appState=q.NORMAL)}onUpdateSearchInfo(e,i){this.recordManager.updateSearchInfo(e,i)}startAnalysis(e){this.appState!==q.ANALYSIS_DIALOG||this.isBussy||(this.retainBussyState(),we.saveAnalysisSetting(e).then(()=>this.analysisManager.start(e)).then(()=>{this._appState=q.ANALYSIS,this.usiMonitor.clear()}).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}stopAnalysis(){this.appState===q.ANALYSIS&&(this.analysisManager.close(),this._appState=q.NORMAL)}onUpdatePosition(){this.researchManager&&this.researchManager.updatePosition(this.recordManager.record)}resetRecord(){this.appState==q.NORMAL&&this.showConfirmation({message:x.areYouSureWantToClearRecord,onOk:()=>{this.recordManager.reset()}})}updateRecordComment(e){this.recordManager.updateComment(e)}insertSpecialMove(e){this.appState!==q.NORMAL&&this.appState!==q.RESEARCH||this.recordManager.appendMove({move:e})}startPositionEditing(){this.appState===q.NORMAL&&this.showConfirmation({message:x.areYouSureWantToClearRecord,onOk:()=>{this._appState=q.POSITION_EDITING,this.recordManager.resetByCurrentPosition()}})}endPositionEditing(){this.appState===q.POSITION_EDITING&&(this._appState=q.NORMAL)}initializePosition(e){this.appState==q.POSITION_EDITING&&this.showConfirmation({message:x.areYouSureWantToDiscardPosition,onOk:()=>{this.recordManager.reset(e)}})}changeTurn(){this.appState==q.POSITION_EDITING&&this.recordManager.swapNextTurn()}editPosition(e){this.appState===q.POSITION_EDITING&&this.recordManager.changePosition(e)}changePly(e){(this.appState===q.NORMAL||this.appState===q.RESEARCH)&&this.recordManager.changePly(e)}changeBranch(e){(this.appState===q.NORMAL||this.appState===q.RESEARCH)&&this.recordManager.changeBranch(e)}swapWithNextBranch(){return this.recordManager.swapWithNextBranch()}swapWithPreviousBranch(){return this.recordManager.swapWithPreviousBranch()}removeCurrentMove(){if(!(this.appState!==q.NORMAL&&this.appState!==q.RESEARCH)){if(this.recordManager.record.current.isLastMove){this.recordManager.removeCurrentMove();return}this.showConfirmation({message:x.areYouSureWantToDeleteFollowingMove(this.recordManager.record.current.number),onOk:()=>{this.recordManager.removeCurrentMove()}})}}copyRecordKIF(){const e=Ge(),i=Af(this.recordManager.record,{returnCode:e.returnCode});navigator.clipboard.writeText(i)}copyRecordCSA(){const e=Ge(),i=Tf(this.recordManager.record,{returnCode:e.returnCode});navigator.clipboard.writeText(i)}copyRecordUSIBefore(){const e=this.recordManager.record.usi;navigator.clipboard.writeText(e)}copyRecordUSIAll(){const e=this.recordManager.record.usiAll;navigator.clipboard.writeText(e)}copyBoardSFEN(){const e=this.recordManager.record.sfen;navigator.clipboard.writeText(e)}pasteRecord(e){if(this.appState!==q.NORMAL)return;const i=this.recordManager.importRecord(e);if(i){this.pushError(i);return}}openRecord(e){this.appState!==q.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>e||we.showOpenRecordDialog()).then(i=>{if(i)return we.openRecord(i).then(n=>{const s=this.recordManager.importRecordFromBuffer(n,i);return s&&Promise.reject(s)})}).catch(i=>{this.pushError(": "+i)}).finally(()=>{this.releaseBussyState()}))}saveRecord(e){this.appState!==q.NORMAL||this.isBussy||(this.retainBussyState(),Promise.resolve().then(()=>{const i=this.recordManager.recordFilePath;if(e!=null&&e.overwrite&&i)return i;const n=Du(this.recordManager.record.metadata);return we.showSaveRecordDialog(n)}).then(i=>{if(i)return this.saveRecordByPath(i)}).catch(i=>{this.pushError(i)}).finally(()=>{this.releaseBussyState()}))}async saveRecordByPath(e){const i=Ge(),n=this.recordManager.exportRecordAsBuffer(e,{returnCode:i.returnCode});if(n instanceof Error)throw n;this.retainBussyState();try{await we.saveRecord(e,n)}catch(s){throw new Error(`${x.failedToSaveRecord}: ${s}`)}finally{this.releaseBussyState()}}get isMovableByUser(){switch(this.appState){case q.NORMAL:case q.RESEARCH:return!0;case q.GAME:return(this.recordManager.record.position.color===U.BLACK?this.gameManager.setting.black.uri:this.gameManager.setting.white.uri)===ni;case q.CSA_GAME:return this.csaGameManager.isMyTurn&&this.csaGameManager.setting.player.uri===ni}return!1}}function j1(){return new V1().reactive}let Pa;function rt(){return Pa||(Pa=j1()),Pa}var de=(t=>(t.BUSSY="bussy",t.ERROR="error",t.INFO="info",t.GAME="game",t.INTERNET="internet",t.STOP="stop",t.RESIGN="resign",t.RESEARCH="research",t.END="end",t.QUIZ="quiz",t.EDIT="edit",t.CHECK="check",t.SWAP="swap",t.SWAP_H="swap_h",t.SETTINGS="settings",t.ENGINE_SETTINGS="engineSettings",t.FLIP="flip",t.FILE="file",t.OPEN="open",t.SAVE="save",t.SAVE_AS="saveAs",t.PASTE="paste",t.COPY="copy",t.DELETE="delete",t.COMMENT="comment",t.BRAIN="brain",t.PV="pv",t.CHART="chart",t.PERCENT="percent",t.ARROW_DROP="arrowDrop",t.ARROW_UP="arrowUp",t.FIRST="first",t.BACK="back",t.NEXT="next",t.LAST="last",t.QUESTION="question",t.ANALYSIS="analysis",t.DESCRIPTION="description",t.PLAY="play",t.CLOSE="close",t.CALL="call",t.SCORE="score",t.GRID="grid",t))(de||{});const Gf={bussy:"icon/hourglass_empty_white_24dp.svg",error:"icon/error_outline_white_24dp.svg",info:"icon/info_white_24dp.svg",game:"icon/sports_esports_white_24dp.svg",internet:"icon/language_FILL0_wght400_GRAD0_opsz48.svg",stop:"icon/block_white_24dp.svg",resign:"icon/flag_white_24dp.svg",research:"icon/science_white_24dp.svg",end:"icon/do_disturb_on_white_24dp.svg",quiz:"icon/quiz_FILL0_wght400_GRAD0_opsz48.svg",edit:"icon/app_registration_white_24dp.svg",check:"icon/check_circle_white_24dp.svg",swap:"icon/swap_vert_white_24dp.svg",swap_h:"icon/swap_horiz_white_24dp.svg",settings:"icon/settings_white_24dp.svg",engineSettings:"icon/settings_input_component_white_24dp.svg",flip:"icon/flip_camera_android_white_24dp.svg",file:"icon/draft_FILL0_wght400_GRAD0_opsz48.svg",open:"icon/file_open_FILL0_wght400_GRAD0_opsz48.svg",save:"icon/save_FILL0_wght400_GRAD0_opsz48.svg",saveAs:"icon/save_as_FILL0_wght400_GRAD0_opsz48.svg",paste:"icon/content_paste_white_24dp.svg",copy:"icon/content_copy_white_24dp.svg",delete:"icon/backspace_white_24dp.svg",comment:"icon/edit_note_white_24dp.svg",brain:"icon/psychology_white_24dp.svg",pv:"icon/manage_search_FILL0_wght400_GRAD0_opsz48.svg",chart:"icon/show_chart_white_24dp.svg",percent:"icon/percent_white_24dp.svg",arrowDrop:"icon/arrow_drop_down_white_24dp.svg",arrowUp:"icon/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg",first:"icon/first_page_white_24dp.svg",back:"icon/chevron_left_white_24dp.svg",next:"icon/chevron_right_white_24dp.svg",last:"icon/last_page_white_24dp.svg",question:"icon/help_white_24dp.svg",analysis:"icon/query_stats_white_24dp.svg",description:"icon/description_white_24dp.svg",play:"icon/play_arrow_FILL1_wght400_GRAD0_opsz48.svg",close:"icon/close_FILL0_wght400_GRAD0_opsz48.svg",call:"icon/record_voice_over_FILL0_wght400_GRAD0_opsz48.svg",score:"icon/scoreboard_FILL0_wght400_GRAD0_opsz48.svg",grid:"icon/grid_on_FILL0_wght400_GRAD0_opsz48.svg"};Object.values(Gf).forEach(t=>{jn(t)});const K1=["src"],ye=Ue({__name:"Icon",props:{icon:{type:String,required:!0}},setup(t){return(e,i)=>(O(),F("img",{class:"icon",src:d(Gf)[t.icon],draggable:"false"},null,8,K1))}});function Ct(t,e){t.addEventListener("cancel",i=>{i.preventDefault(),i.stopPropagation(),e&&e()}),t.addEventListener("copy",i=>{i.stopPropagation()}),t.addEventListener("paste",i=>{i.stopPropagation()}),t.showModal()}const q1={class:"groups"},Y1={class:"group"},X1={class:"label"},J1={class:"group"},Q1={class:"label"},Z1={class:"label"},ey=Ue({__name:"GameMenu",emits:["close"],setup(t,{emit:e}){const i=rt(),n=G(),s=()=>{e("close")};ot(()=>{Ct(n.value,s)});const o=()=>{i.showGameDialog(),e("close")},r=()=>{i.showCSAGameDialog(),e("close")};return(a,l)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:n,class:"menu"},[p("div",q1,[p("div",Y1,[p("button",{class:"close",onClick:s},[z(ye,{icon:d(de).CLOSE},null,8,["icon"]),p("div",X1,P(d(x).back),1)])]),p("div",J1,[p("button",{onClick:o},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Q1,P(d(x).offlineGame),1)]),p("button",{onClick:r},[z(ye,{icon:d(de).INTERNET},null,8,["icon"]),p("div",Z1,P(d(x).csaOnlineGame),1)])])])],512)]))}}),ty={class:"groups"},iy={class:"group"},ny={class:"label"},sy={class:"group"},oy=["disabled"],ry={class:"label"},ay=["disabled"],ly={class:"label"},cy=["disabled"],uy={class:"label"},hy=["disabled"],dy={class:"label"},fy=["disabled"],py={class:"label"},gy={class:"group"},my={class:"label"},_y={class:"label"},by={class:"label"},yy={class:"label"},vy=["disabled"],Sy={class:"label"},wy=Ue({__name:"FileMenu",emits:["close"],setup(t,{emit:e}){const i=rt(),n=G(),s=()=>{e("close")};ot(()=>{Ct(n.value,s)});const o=()=>{i.resetRecord(),e("close")},r=()=>{i.openRecord(),e("close")},a=()=>{i.saveRecord({overwrite:!0}),e("close")},l=()=>{i.saveRecord(),e("close")},c=()=>{i.showExportBoardImageDialog(),e("close")},u=()=>{i.copyRecordKIF(),e("close")},h=()=>{i.copyRecordCSA(),e("close")},f=()=>{i.copyRecordUSIAll(),e("close")},m=()=>{i.copyBoardSFEN(),e("close")},S=()=>{i.showPasteDialog(),e("close")},b=Te(()=>({newFile:i.appState===q.NORMAL,open:i.appState===q.NORMAL,save:i.appState===q.NORMAL,saveAs:i.appState===q.NORMAL,exportImage:i.appState===q.NORMAL,paste:i.appState===q.NORMAL}));return(v,y)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:n,class:"menu"},[p("div",ty,[p("div",iy,[p("button",{class:"close",onClick:s},[z(ye,{icon:d(de).CLOSE},null,8,["icon"]),p("div",ny,P(d(x).back),1)])]),p("div",sy,[p("button",{disabled:!d(b).newFile,onClick:o},[z(ye,{icon:d(de).FILE},null,8,["icon"]),p("div",ry,P(d(x).clear),1)],8,oy),p("button",{disabled:!d(b).open,onClick:r},[z(ye,{icon:d(de).OPEN},null,8,["icon"]),p("div",ly,P(d(x).open),1)],8,ay),p("button",{disabled:!d(b).save,onClick:a},[z(ye,{icon:d(de).SAVE},null,8,["icon"]),p("div",uy,P(d(x).saveOverwrite),1)],8,cy),p("button",{disabled:!d(b).saveAs,onClick:l},[z(ye,{icon:d(de).SAVE_AS},null,8,["icon"]),p("div",dy,P(d(x).saveAs),1)],8,hy),p("button",{disabled:!d(b).exportImage,onClick:c},[z(ye,{icon:d(de).GRID},null,8,["icon"]),p("div",py,P(d(x).positionImage),1)],8,fy)]),p("div",gy,[p("button",{onClick:u},[z(ye,{icon:d(de).COPY},null,8,["icon"]),p("div",my,P(d(x).copyAsKIF),1)]),p("button",{onClick:h},[z(ye,{icon:d(de).COPY},null,8,["icon"]),p("div",_y,P(d(x).copyAsCSA),1)]),p("button",{onClick:f},[z(ye,{icon:d(de).COPY},null,8,["icon"]),p("div",by,P(d(x).copyAsUSI),1)]),p("button",{onClick:m},[z(ye,{icon:d(de).COPY},null,8,["icon"]),p("div",yy,P(d(x).copyAsSFEN),1)]),p("button",{disabled:!d(b).paste,onClick:S},[z(ye,{icon:d(de).PASTE},null,8,["icon"]),p("div",Sy,P(d(x).paste),1)],8,vy)])])],512)]))}}),xy={class:"groups"},Ey={class:"group"},ky={class:"label"},Iy={class:"group"},Ay={class:"label"},Py={class:"label"},Cy={class:"label"},Ty={class:"label"},My={class:"label"},Ry={class:"label"},Ny={class:"label"},Oy={class:"label"},Ly={class:"label"},Dy={class:"label"},By={class:"label"},Fy={class:"label"},Hy=Ue({__name:"InitialPositionMenu",emits:["close"],setup(t,{emit:e}){const i=rt(),n=G(),s=()=>{e("close")};ot(()=>{Ct(n.value,s)});const o=()=>{i.initializePosition(Ce.STANDARD),e("close")},r=()=>{i.initializePosition(Ce.HANDICAP_LANCE),e("close")},a=()=>{i.initializePosition(Ce.HANDICAP_RIGHT_LANCE),e("close")},l=()=>{i.initializePosition(Ce.HANDICAP_BISHOP),e("close")},c=()=>{i.initializePosition(Ce.HANDICAP_ROOK),e("close")},u=()=>{i.initializePosition(Ce.HANDICAP_ROOK_LANCE),e("close")},h=()=>{i.initializePosition(Ce.HANDICAP_2PIECES),e("close")},f=()=>{i.initializePosition(Ce.HANDICAP_4PIECES),e("close")},m=()=>{i.initializePosition(Ce.HANDICAP_6PIECES),e("close")},S=()=>{i.initializePosition(Ce.HANDICAP_8PIECES),e("close")},b=()=>{i.initializePosition(Ce.TSUME_SHOGI),e("close")},v=()=>{i.initializePosition(Ce.TSUME_SHOGI_2KINGS),e("close")};return(y,E)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:n,class:"menu"},[p("div",xy,[p("div",Ey,[p("button",{class:"close",onClick:s},[z(ye,{icon:d(de).CLOSE},null,8,["icon"]),p("div",ky,P(d(x).back),1)])]),p("div",Iy,[p("button",{onClick:o},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Ay,P(d(x).nonHandicap),1)]),p("button",{onClick:r},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Py,P(d(x).lanceHandicap),1)]),p("button",{onClick:a},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Cy,P(d(x).rightLanceHandicap),1)]),p("button",{onClick:l},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Ty,P(d(x).bishopHandicap),1)]),p("button",{onClick:c},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",My,P(d(x).rookHandicap),1)]),p("button",{onClick:u},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Ry,P(d(x).rookLanceHandicap),1)]),p("button",{onClick:h},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Ny,P(d(x).twoPiecesHandicap),1)]),p("button",{onClick:f},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Oy,P(d(x).fourPiecesHandicap),1)]),p("button",{onClick:m},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Ly,P(d(x).sixPiecesHandicap),1)]),p("button",{onClick:S},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("div",Dy,P(d(x).eightPiecesHandicap),1)]),p("button",{onClick:b},[z(ye,{icon:d(de).QUIZ},null,8,["icon"]),p("div",By,P(d(x).tsumeShogi),1)]),p("button",{onClick:v},[z(ye,{icon:d(de).QUIZ},null,8,["icon"]),p("div",Fy,P(d(x).doubleKingTsumeShogi),1)])])])],512)]))}});class fl{constructor(e){this.children=[],this.parent=e}delete(e){const i=this.children.indexOf(e);return i===-1?!1:(this.children=this.children.slice(0,i).concat(this.children.slice(i+1)),this.children.length===0&&this.parent.delete(this),!0)}add(e){return this.children.push(e),this}}class Ar{constructor(e){this.parent=null,this.children={},this.parent=e||null}get(e){return this.children[e]}insert(e){let i=this;for(let n=0;n<e.length;n+=1){const s=e[n];let o=i.get(s);if(n===e.length-1)return o instanceof Ar&&(i.delete(o),o=null),o||(o=new fl(i),i.children[s]=o),o;o instanceof fl&&(o=null),o||(o=new Ar(i),i.children[s]=o),i=o}return i}delete(e){for(const i in this.children)if(this.children[i]===e){const s=delete this.children[i];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),s}return!1}}function pl(t){if(!(t instanceof HTMLElement))return!1;const e=t.nodeName.toLowerCase(),i=(t.getAttribute("type")||"").toLowerCase();return e==="select"||e==="textarea"||e==="input"&&i!=="submit"&&i!=="reset"&&i!=="checkbox"&&i!=="radio"&&i!=="file"||t.isContentEditable}function $y(t,e){const i=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:e}});t.dispatchEvent(i)&&(pl(t)?t.focus():t.click())}function Uy(t){const e=[];let i=[""],n=!1;for(let s=0;s<t.length;s++){if(n&&t[s]===","){e.push(i),i=[""],n=!1;continue}if(t[s]===" "){i.push(""),n=!1;continue}else t[s]==="+"?n=!1:n=!0;i[i.length-1]+=t[s]}return e.push(i),e.map(s=>s.filter(o=>o!=="")).filter(s=>s.length>0)}function Hu(t){const{ctrlKey:e,altKey:i,metaKey:n,key:s}=t,o=[],r=[e,i,n,zy(t)];for(const[a,l]of r.entries())l&&o.push($u[a]);return $u.includes(s)||o.push(s),o.join("+")}const $u=["Control","Alt","Meta","Shift"];function zy(t){const{shiftKey:e,code:i,key:n}=t;return e&&!(i.startsWith("Key")&&n.toUpperCase()===n)}const eo=new Ar,Wf=new WeakMap;let gl=eo,Xo=null,ml=[];function Ca(){ml=[],Xo=null,gl=eo}function Vf(t){if(t.defaultPrevented||!(t.target instanceof Node))return;if(pl(t.target)){const i=t.target;if(!i.id||!i.ownerDocument.querySelector(`[data-hotkey-scope="${i.id}"]`))return}Xo!=null&&window.clearTimeout(Xo),Xo=window.setTimeout(Ca,1500);const e=gl.get(Hu(t));if(!e){Ca();return}if(ml.push(Hu(t)),gl=e,e instanceof fl){const i=t.target;let n=!1,s;const o=pl(i);for(let r=e.children.length-1;r>=0;r-=1){s=e.children[r];const a=s.getAttribute("data-hotkey-scope");if(!o&&!a||o&&i.id===a){n=!0;break}}s&&n&&($y(s,ml),t.preventDefault()),Ca()}}function Gy(t,e){Object.keys(eo.children).length===0&&document.addEventListener("keydown",Vf);const n=Uy(e||t.getAttribute("data-hotkey")||"").map(s=>eo.insert(s).add(t));Wf.set(t,n)}function Wy(t){const e=Wf.get(t);if(e&&e.length)for(const i of e)i&&i.delete(t);Object.keys(eo.children).length===0&&document.removeEventListener("keydown",Vf)}function Pr(t){for(const e of t.querySelectorAll("[data-hotkey]"))Gy(e)}function Cr(t){for(const e of t.querySelectorAll("[data-hotkey]"))Wy(e)}const ns=[],ti=[];function ks(t){ti.length===0&&Pr(t),ns.push(t)}function Is(t){ti.length===0&&Cr(t);for(let e=0;e<ns.length;e++)if(ns[e]===t){ns.splice(e,1);break}}function Jt(t){if(ti.length===0)for(const e of ns)Cr(e);else Cr(ti[ti.length-1]);Pr(t),ti.push(t)}function Qt(t){for(let e=0;e<ti.length;e++)if(ti[e]===t){ti.splice(e,1),e===ti.length&&Cr(t);break}if(ti.length===0)for(const e of ns)Pr(e);else Pr(ti[ti.length-1])}function jf(t){return t.getStandardMetadata(te.BLACK_NAME)||t.getStandardMetadata(te.BLACK_SHORT_NAME)||x.sente}function Kf(t){return t.getStandardMetadata(te.WHITE_NAME)||t.getStandardMetadata(te.WHITE_SHORT_NAME)||x.gote}const Vy=["disabled"],jy=["disabled"],Ky=Ue({__name:"BoardPane",props:{maxSize:{type:kt,required:!0}},emits:["resize"],setup(t,{emit:e}){const i=rt(),n=Ge(),s=G(),o=G(),r=G(!1),a=G(!1),l=G(!1);ot(()=>{ks(s.value),ks(o.value)}),gs(()=>{ks(s.value),ks(o.value)}),Vd(()=>{Is(s.value),Is(o.value)}),Rt(()=>{Is(s.value),Is(o.value)});const c=ce=>{e("resize",ce)},u=ce=>{i.appState===q.GAME||i.appState===q.CSA_GAME?is.doMove(ce):i.doMove(ce)},h=ce=>{i.editPosition(ce)},f=()=>{r.value=!0},m=()=>{i.showGameResults()},S=()=>{i.stopGame()},b=()=>{is.win()},v=()=>{is.resign()},y=()=>{i.showResearchDialog()},E=()=>{i.stopResearch()},I=()=>{i.showAnalysisDialog()},k=()=>{i.stopAnalysis()},A=()=>{i.startPositionEditing()},T=()=>{i.endPositionEditing()},R=()=>{l.value=!0},N=()=>{i.changeTurn()},V=()=>{i.showAppSettingDialog()},ee=()=>{i.showUsiEngineManagementDialog()},se=()=>{n.flipBoard()},Q=()=>{a.value=!0},ae=()=>{i.removeCurrentMove()},X=Te(()=>{const ce=i.record.current.move;return ce instanceof ct?ce:void 0}),he=Te(()=>jf(i.record.metadata)),ge=Te(()=>Kf(i.record.metadata)),ne=Te(()=>{if(i.appState===q.GAME||i.csaGameState===hi.GAME)return{black:{time:i.blackTime,byoyomi:i.blackByoyomi},white:{time:i.whiteTime,byoyomi:i.whiteByoyomi}}}),ie=Te(()=>({game:i.appState===q.NORMAL,showGameResults:i.appState===q.GAME&&i.gameSetting.repeat>=2,stop:i.appState===q.GAME||i.appState===q.CSA_GAME,win:i.appState===q.CSA_GAME&&i.isMovableByUser,resign:(i.appState===q.GAME||i.appState===q.CSA_GAME)&&i.isMovableByUser,research:i.appState===q.NORMAL,endResearch:i.appState===q.RESEARCH,analysis:i.appState===q.NORMAL,endAnalysis:i.appState===q.ANALYSIS,startEditPosition:i.appState===q.NORMAL,endEditPosition:i.appState===q.POSITION_EDITING,initPosition:i.appState===q.POSITION_EDITING,removeCurrentMove:i.appState===q.NORMAL||i.appState===q.RESEARCH,engineSettings:i.appState===q.NORMAL}));return(ce,Ne)=>{var Me,xe,Ze,nt;return O(),F("div",null,[z(ec,{"piece-image-type":d(n).pieceImage,"board-image-type":d(n).boardImage,"piece-stand-image-type":d(n).pieceStandImage,"board-label-type":d(n).boardLabelType,"custom-board-image-url":d(n).boardImageFileURL,"custom-piece-stand-image-url":d(n).pieceStandImageFileURL,"max-size":t.maxSize,position:d(i).record.position,"last-move":d(X),flip:d(n).boardFlipping,"allow-move":d(i).isMovableByUser,"allow-edit":d(i).appState===d(q).POSITION_EDITING,"black-player-name":d(he),"white-player-name":d(ge),"black-player-time":(Me=d(ne))==null?void 0:Me.black.time,"black-player-byoyomi":(xe=d(ne))==null?void 0:xe.black.byoyomi,"white-player-time":(Ze=d(ne))==null?void 0:Ze.white.time,"white-player-byoyomi":(nt=d(ne))==null?void 0:nt.white.byoyomi,"next-move-label":d(x).nextTurn,onResize:c,onMove:u,onEdit:h},{"right-control":Ci(()=>[p("div",{ref_key:"rightControl",ref:s,class:it(["full column top-control",{hidden:d(n).rightSideControlType===d(Bs).NONE}])},[d(ie).game?(O(),F("button",{key:0,class:"control-item",onClick:f},[z(ye,{icon:d(de).GAME},null,8,["icon"]),p("span",null,P(d(x).game),1)])):le("",!0),d(ie).showGameResults?(O(),F("button",{key:1,class:"control-item",onClick:m},[z(ye,{icon:d(de).SCORE},null,8,["icon"]),p("span",null,P(d(x).displayGameResults),1)])):le("",!0),d(ie).stop?(O(),F("button",{key:2,class:"control-item","data-hotkey":"Escape",onClick:S},[z(ye,{icon:d(de).STOP},null,8,["icon"]),p("span",null,P(d(x).stopGame),1)])):le("",!0),d(ie).win?(O(),F("button",{key:3,class:"control-item",onClick:b},[z(ye,{icon:d(de).CALL},null,8,["icon"]),p("span",null,P(d(x).declareWinning),1)])):le("",!0),d(ie).resign?(O(),F("button",{key:4,class:"control-item",onClick:v},[z(ye,{icon:d(de).RESIGN},null,8,["icon"]),p("span",null,P(d(x).resign),1)])):le("",!0),d(ie).research?(O(),F("button",{key:5,class:"control-item","data-hotkey":"Control+r",onClick:y},[z(ye,{icon:d(de).RESEARCH},null,8,["icon"]),p("span",null,P(d(x).research),1)])):le("",!0),d(ie).endResearch?(O(),F("button",{key:6,class:"control-item","data-hotkey":"Escape",onClick:E},[z(ye,{icon:d(de).END},null,8,["icon"]),p("span",null,P(d(x).endResearch),1)])):le("",!0),d(ie).analysis?(O(),F("button",{key:7,class:"control-item","data-hotkey":"Control+a",onClick:I},[z(ye,{icon:d(de).ANALYSIS},null,8,["icon"]),p("span",null,P(d(x).analysis),1)])):le("",!0),d(ie).endAnalysis?(O(),F("button",{key:8,class:"control-item","data-hotkey":"Escape",onClick:k},[z(ye,{icon:d(de).STOP},null,8,["icon"]),p("span",null,P(d(x).stopAnalysis),1)])):le("",!0),d(ie).startEditPosition?(O(),F("button",{key:9,class:"control-item",onClick:A},[z(ye,{icon:d(de).EDIT},null,8,["icon"]),p("span",null,P(d(x).setupPosition),1)])):le("",!0),d(ie).endEditPosition?(O(),F("button",{key:10,class:"control-item",onClick:T},[z(ye,{icon:d(de).CHECK},null,8,["icon"]),p("span",null,P(d(x).completePositionSetup),1)])):le("",!0),d(ie).initPosition?(O(),F("button",{key:11,class:"control-item",onClick:N},[z(ye,{icon:d(de).SWAP},null,8,["icon"]),p("span",null,P(d(x).changeTurn),1)])):le("",!0),d(ie).initPosition?(O(),F("button",{key:12,class:"control-item",onClick:R},[p("span",null,P(d(x).initializePosition),1)])):le("",!0)],2)]),"left-control":Ci(()=>[p("div",{ref_key:"leftControl",ref:o,class:it(["full column reverse bottom-control",{hidden:d(n).leftSideControlType===d(Ds).NONE}])},[p("button",{class:"control-item","data-hotkey":"Control+,",onClick:V},[z(ye,{icon:d(de).SETTINGS},null,8,["icon"]),p("span",null,P(d(x).appSettings),1)]),p("button",{class:"control-item","data-hotkey":"Control+.",disabled:!d(ie).engineSettings,onClick:ee},[z(ye,{icon:d(de).ENGINE_SETTINGS},null,8,["icon"]),p("span",null,P(d(x).engineSettings),1)],8,Vy),p("button",{class:"control-item","data-hotkey":"Control+t",onClick:se},[z(ye,{icon:d(de).FLIP},null,8,["icon"]),p("span",null,P(d(x).flipBoard),1)]),p("button",{class:"control-item",onClick:Q},[z(ye,{icon:d(de).FILE},null,8,["icon"]),p("span",null,P(d(x).file),1)]),p("button",{class:"control-item","data-hotkey":"Control+d",disabled:!d(ie).removeCurrentMove,onClick:ae},[z(ye,{icon:d(de).DELETE},null,8,["icon"]),p("span",null,P(d(x).deleteMove),1)],8,jy)],2)]),_:1},8,["piece-image-type","board-image-type","piece-stand-image-type","board-label-type","custom-board-image-url","custom-piece-stand-image-url","max-size","position","last-move","flip","allow-move","allow-edit","black-player-name","white-player-name","black-player-time","black-player-byoyomi","white-player-time","white-player-byoyomi","next-move-label"]),r.value?(O(),We(ey,{key:0,onClose:Ne[0]||(Ne[0]=mt=>r.value=!1)})):le("",!0),a.value?(O(),We(wy,{key:1,onClose:Ne[1]||(Ne[1]=mt=>a.value=!1)})):le("",!0),l.value?(O(),We(Hy,{key:2,onClose:Ne[2]||(Ne[2]=mt=>l.value=!1)})):le("",!0)])}}});const qy=Qe(Ky,[["__scopeId","data-v-f44c2893"]]);let Uu=0;function qf(){return Uu++,`es:incremental:${Uu}`}const Yy={style:{display:"inline-block"}},Xy={class:"container"},Jy=["id","checked"],Qy=["for"],Zy=Ue({__name:"ToggleButton",props:{value:{type:Boolean,required:!0},label:{type:String,default:""},height:{type:Number,default:20},onChange:{type:Function,default:()=>{}}},emits:["change"],setup(t,{emit:e}){const i=t,n=qf(),s=Te(()=>({height:`${i.height}px`,width:`${i.height*2}px`})),o=Te(()=>({borderRadius:`${i.height*.5}px`})),r=Te(()=>({height:`${i.height}px`,width:`${i.height}px`})),a=Te(()=>({fontSize:`${i.height*.7}px`,lineHeight:`${i.height}px`})),l=c=>{const u=c.target;e("change",u.checked)};return(c,u)=>(O(),F("div",Yy,[p("div",Xy,[p("div",{class:"toggle",style:Ee(d(s))},[p("input",{id:d(n),type:"checkbox",checked:t.value,onChange:l},null,40,Jy),p("div",{class:"slider",style:Ee(d(o))},null,4),p("div",{class:"knob",style:Ee(d(r))},null,4)],4),p("div",null,[p("label",{for:d(n),style:Ee(d(a))},P(t.label),13,Qy)])])]))}});const _t=Qe(Zy,[["__scopeId","data-v-61ac46a8"]]),ev={class:"full column record-view"},tv={class:"row control"},iv=["disabled"],nv=["disabled"],sv=["disabled"],ov=["disabled"],rv=["value","onClick"],av={class:"move-number"},lv={class:"move-text"},cv={key:0,class:"move-time"},uv={key:1,class:"move-comment"},hv={class:"auto row branch-list-area"},dv=["value","onClick"],fv={class:"move-text"},pv={key:0,class:"move-comment"},gv={class:"column branch-list-control"},mv=["disabled"],_v=["disabled"],bv={class:"row wrap options"},yv={class:"option"},vv={class:"option"},Sv=Ue({__name:"RecordView",props:{record:{type:Object,required:!0},operational:{type:Boolean,required:!1},showElapsedTime:{type:Boolean,required:!1},showComment:{type:Boolean,required:!1},elapsedTimeToggleLabel:{type:String,required:!0},commentToggleLabel:{type:String,required:!0}},emits:["goBegin","goBack","goForward","goEnd","selectMove","selectBranch","swapWithPreviousBranch","swapWithNextBranch","toggleShowElapsedTime","toggleShowComment"],setup(t,{emit:e}){const i=t,n=G(null),s=G(),o=()=>{i.operational&&e("goBegin")},r=()=>{i.operational&&e("goBack")},a=()=>{i.operational&&e("goForward")},l=()=>{i.operational&&e("goEnd")},c=b=>{i.operational&&e("selectMove",Number(b))},u=b=>{i.operational&&e("selectBranch",Number(b))},h=()=>{i.operational&&e("swapWithPreviousBranch")},f=()=>{i.operational&&e("swapWithNextBranch")},m=Te(()=>{const b=[];return i.record.moves.forEach(v=>{b.push({number:v.number,text:v.displayText,time:v.number!=0?v.timeText:"",hasBranch:v.hasBranch,comment:v.comment,selected:v===i.record.current})}),b}),S=Te(()=>{if(!i.record.branchBegin.branch)return null;const b=[];let v;for(v=i.record.branchBegin;v&&v.move;v=v.branch)b.push({index:b.length,text:v.displayText,comment:v.comment,selected:v.activeBranch});return b});return gs(()=>{n.value.childNodes.forEach(y=>{y instanceof HTMLElement&&y.classList.contains("selected")&&y.scrollIntoView({behavior:"auto",block:"nearest"})}),s.value.childNodes.forEach(y=>{y instanceof HTMLElement&&y.classList.contains("selected")&&y.scrollIntoView({behavior:"auto",block:"nearest"})})}),(b,v)=>(O(),F("div",ev,[p("div",tv,[p("button",{disabled:!t.operational,"data-hotkey":"ArrowLeft",onClick:o},[z(ye,{icon:d(de).FIRST},null,8,["icon"])],8,iv),p("button",{disabled:!t.operational,"data-hotkey":"ArrowUp",onClick:v[0]||(v[0]=y=>r())},[z(ye,{icon:d(de).BACK},null,8,["icon"])],8,nv),p("button",{disabled:!t.operational,"data-hotkey":"ArrowDown",onClick:a},[z(ye,{icon:d(de).NEXT},null,8,["icon"])],8,sv),p("button",{disabled:!t.operational,"data-hotkey":"ArrowRight",onClick:l},[z(ye,{icon:d(de).LAST},null,8,["icon"])],8,ov)]),p("div",{ref_key:"moveList",ref:n,class:"move-list"},[(O(!0),F(Re,null,Ve(d(m),y=>(O(),F("div",{key:y.number,class:it(["row move-element",{"has-branch":y.hasBranch,selected:y.selected}]),value:y.number,onClick:E=>c(y.number)},[p("div",av,P(y.number!==0?y.number:""),1),p("div",lv,P(y.text),1),t.showElapsedTime?(O(),F("div",cv,P(y.time),1)):le("",!0),t.showComment?(O(),F("div",uv,P(y.comment),1)):le("",!0)],10,rv))),128))],512),p("div",hv,[p("div",{ref_key:"branchList",ref:s,class:"auto branch-list"},[(O(!0),F(Re,null,Ve(d(S),y=>(O(),F("div",{key:y.index,class:it(["row move-element",{selected:y.selected}]),value:y.index,onClick:E=>u(y.index)},[p("div",fv,P(y.text),1),t.showComment?(O(),F("div",pv,P(y.comment),1)):le("",!0)],10,dv))),128))],512),p("div",gv,[p("button",{disabled:!t.operational,onClick:v[1]||(v[1]=y=>h())},[z(ye,{icon:d(de).ARROW_UP},null,8,["icon"])],8,mv),p("button",{disabled:!t.operational,onClick:v[2]||(v[2]=y=>f())},[z(ye,{icon:d(de).ARROW_DROP},null,8,["icon"])],8,_v)])]),p("div",bv,[p("div",yv,[z(_t,{label:t.elapsedTimeToggleLabel,value:t.showElapsedTime,onChange:v[3]||(v[3]=y=>e("toggleShowElapsedTime",y))},null,8,["label","value"])]),p("div",vv,[z(_t,{label:t.commentToggleLabel,value:t.showComment,onChange:v[4]||(v[4]=y=>e("toggleShowComment",y))},null,8,["label","value"])])])]))}});const wv=Qe(Sv,[["__scopeId","data-v-e7475999"]]),xv={class:"auto record"},Ev=200,kv=Ue({__name:"RecordPane",setup(t){const e=rt(),i=Ge(),n=G();ot(()=>{ks(n.value)}),ho(()=>{Is(n.value)});const s=v=>{e.changePly(v)},o=()=>{s(0)},r=()=>{s(e.record.current.number-1)},a=()=>{s(e.record.current.number+1)},l=()=>{s(Number.MAX_SAFE_INTEGER)},c=v=>{s(v)},u=v=>{e.changeBranch(v)},h=()=>{e.swapWithPreviousBranch()},f=()=>{e.swapWithNextBranch()},m=v=>{i.updateAppSetting({showElapsedTimeInRecordView:v})},S=v=>{i.updateAppSetting({showCommentInRecordView:v})},b=Te(()=>e.appState===q.NORMAL||e.appState===q.RESEARCH);return(v,y)=>(O(),F("div",{ref_key:"root",ref:n,class:"full column record-pane"},[p("div",xv,[z(wv,{record:d(e).record,operational:d(b),"show-comment":d(i).showCommentInRecordView,"show-elapsed-time":d(i).showElapsedTimeInRecordView,"elapsed-time-toggle-label":d(x).elapsedTime,"comment-toggle-label":d(x).comments,onGoBegin:o,onGoBack:r,onGoForward:a,onGoEnd:l,onSelectMove:c,onSelectBranch:u,onSwapWithPreviousBranch:h,onSwapWithNextBranch:f,onToggleShowElapsedTime:m,onToggleShowComment:S},null,8,["record","operational","show-comment","show-elapsed-time","elapsed-time-toggle-label","comment-toggle-label"])])],512))}});const Iv=Qe(kv,[["__scopeId","data-v-fe8c9c66"]]),Av={class:"full column"},Pv={class:"row control-row"},Cv={class:"row control-row"},Tv={class:"row control-row"},Mv={class:"informations"},Rv={class:"information"},Nv=Ue({__name:"PVPreviewDialog",props:{position:{type:String,required:!0},pv:{type:Array,required:!0},infos:{type:Array,default:[],required:!1}},emits:["close"],setup(t,{emit:e}){const i=t,n=Ge(),s=G(),o=xi(new kt(0,0)),r=xi(new Mt),a=G(n.boardFlipping),l=()=>{o.width=window.innerWidth*.8,o.height=window.innerHeight*.8-80},c=()=>{const E=Dt.newBySFEN(i.position);if(E){r.clear(E);for(const I of i.pv){const k=r.position.createMoveByUSI(I);if(!k)break;r.append(k,{ignoreValidation:!0})}r.goto(1)}};ot(async()=>{l(),c(),window.addEventListener("resize",l),Ct(s.value),Jt(s.value)}),Rt(()=>{window.removeEventListener("resize",l),Qt(s.value)}),ln([()=>i.position,()=>i.pv],()=>{c(),Ct(s.value)});const u=()=>{e("close")},h=()=>{r.goto(0)},f=()=>{r.goto(Number.MAX_SAFE_INTEGER)},m=()=>{r.goBack()},S=()=>{r.goForward()},b=()=>{a.value=!a.value},v=Te(()=>r.current.move instanceof ct?r.current.move:null),y=Te(()=>r.moves.slice(1).map(E=>({text:E.displayText,selected:E.number===r.current.number})));return(E,I)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:s},[z(ec,{class:"board","piece-image-type":d(n).pieceImage,"board-image-type":d(n).boardImage,"piece-stand-image-type":d(n).pieceStandImage,"board-label-type":d(n).boardLabelType,"custom-board-image-url":d(n).boardImageFileURL,"custom-piece-stand-image-url":d(n).pieceStandImageFileURL,"max-size":o,position:r.position,"last-move":d(v),flip:a.value},{"right-control":Ci(()=>[p("div",Av,[p("div",Pv,[p("button",{class:"control-item","data-hotkey":"Control+t",onClick:b},[z(ye,{icon:d(de).FLIP},null,8,["icon"])]),p("button",{class:"control-item",autofocus:"","data-hotkey":"Escape",onClick:u},[z(ye,{icon:d(de).CLOSE},null,8,["icon"])])]),p("div",Cv,[p("button",{class:"control-item","data-hotkey":"ArrowLeft",onClick:h},[z(ye,{icon:d(de).FIRST},null,8,["icon"])]),p("button",{class:"control-item","data-hotkey":"ArrowRight",onClick:f},[z(ye,{icon:d(de).LAST},null,8,["icon"])])]),p("div",Tv,[p("button",{class:"control-item","data-hotkey":"ArrowUp",onClick:m},[z(ye,{icon:d(de).BACK},null,8,["icon"])]),p("button",{class:"control-item","data-hotkey":"ArrowDown",onClick:S},[z(ye,{icon:d(de).NEXT},null,8,["icon"])])])])]),_:1},8,["piece-image-type","board-image-type","piece-stand-image-type","board-label-type","custom-board-image-url","custom-piece-stand-image-url","max-size","position","last-move","flip"]),p("div",Mv,[(O(!0),F(Re,null,Ve(t.infos,(k,A)=>(O(),F("div",{key:A,class:"information"},P(k),1))),128)),p("div",Rv,[(O(!0),F(Re,null,Ve(d(y),(k,A)=>(O(),F("span",{key:A},[p("span",{class:it(["move-element",{selected:k.selected}])},""+P(k.text)+"",3)]))),128))])])],512)]))}});const Yf=Qe(Nv,[["__scopeId","data-v-440b0b25"]]),Ov={class:"full column"},Lv=["value","readonly"],Dv={key:0,class:"row play-buttons"},Bv=["onClick"],Fv=Ue({__name:"RecordComment",setup(t){const e=rt(),i=Te(()=>e.appState!=q.NORMAL&&e.appState!=q.RESEARCH),n=G(),s=Te(()=>e.record.current.comment),o=Te(()=>e.inCommentPVs),r=G(null),a=u=>{const h=u.target.value;e.updateRecordComment(h)},l=u=>{r.value={position:e.record.position.sfen,pv:u.map(h=>h.usi)}},c=()=>{r.value=null};return ot(()=>{n.value.addEventListener("copy",u=>{u.stopPropagation()}),n.value.addEventListener("paste",u=>{u.stopPropagation()})}),(u,h)=>(O(),F("div",null,[p("div",Ov,[p("textarea",{ref_key:"textarea",ref:n,class:"auto text",value:d(s),readonly:d(i),onInput:a},null,40,Lv),d(o).length!==0?(O(),F("div",Dv,[(O(!0),F(Re,null,Ve(d(o),(f,m)=>(O(),F("button",{key:m,class:"play",onClick:S=>l(f)},[z(ye,{icon:d(de).PLAY},null,8,["icon"]),p("span",null,P(d(x).pv)+P(d(o).length>=2?" "+(m+1):""),1)],8,Bv))),128))])):le("",!0)]),r.value?(O(),We(Yf,{key:0,position:r.value.position,pv:r.value.pv,onClose:c},null,8,["position","pv"])):le("",!0)]))}});const Hv=Qe(Fv,[["__scopeId","data-v-906b9359"]]),$v=t=>(co("data-v-b2f7ef29"),t=t(),uo(),t),Uv={class:"full column root"},zv={class:"row headers"},Gv={class:"header"},Wv={class:"label"},Vv={class:"value"},jv={class:"header"},Kv={class:"label"},qv={class:"value"},Yv={class:"header"},Xv={class:"label"},Jv={class:"value"},Qv={class:"header"},Zv=$v(()=>p("span",{class:"label"},"NPS: ",-1)),eS={class:"value"},tS={class:"header"},iS={class:"label"},nS={class:"value"},sS={class:"header"},oS={class:"label"},rS={class:"value"},aS={class:"row list-header"},lS={class:"list-column time"},cS={class:"list-column multipv-index"},uS={class:"list-column depth"},hS={class:"list-column nodes"},dS={class:"list-column score"},fS={class:"list-column time"},pS={class:"list-column multipv-index"},gS={class:"list-column depth"},mS={class:"list-column nodes"},_S={class:"list-column score"},bS={class:"list-column score-flag"},yS={class:"grow list-column text"},vS=["onClick"],SS=Ue({__name:"EngineAnalyticsElement",props:{historyMode:{type:Boolean,required:!0},name:{type:String,required:!0},info:{type:$f,required:!0},height:{type:Number,required:!0}},setup(t){const e=t,i=Te(()=>{if(!e.historyMode)return!1;for(const l of e.info.iterates)if(l.multiPV&&l.multiPV!==1)return!0;return!1}),n=G(null),s=Te(()=>Ge().evaluationViewFrom),o=(l,c,u)=>u===wr.EACH||c==U.BLACK?l:-l,r=l=>{const c=[];l.depth!==void 0&&c.push(`=${l.depth}`),l.selectiveDepth!==void 0&&c.push(`=${l.selectiveDepth}`),l.score&&(c.push(`=${o(l.score,l.color,s.value)}`),l.lowerBound&&c.push(""),l.upperBound&&c.push("")),l.scoreMate&&c.push(`=${o(l.scoreMate,l.color,s.value)}`),l.multiPV&&c.push(`=${l.multiPV}`),n.value={position:l.position,pv:l.pv||[],infos:[c.join(" / ")]}},a=()=>{n.value=null};return(l,c)=>(O(),F("div",null,[p("div",Uv,[p("div",zv,[p("div",Gv,[p("span",Wv,P(d(x).name)+": ",1),p("span",Vv,P(t.name),1)]),p("div",jv,[p("span",Kv,P(d(x).prediction)+": ",1),p("span",qv,P(t.info.ponderMove?t.info.ponderMove:"---"),1)]),p("div",Yv,[p("span",Xv,P(d(x).best)+": ",1),p("span",Jv,P(t.info.currentMoveText||"---"),1)]),p("div",Qv,[Zv,p("span",eS,P(t.info.nps||"---"),1)]),p("div",tS,[p("span",iS,P(d(x).nodes)+": ",1),p("span",nS,P(t.info.nodes||"---"),1)]),p("div",sS,[p("span",oS,P(d(x).hashUsage)+": ",1),p("span",rS,P(t.info.hashfull?(t.info.hashfull*100).toFixed(1):"---")+" % ",1)])]),p("div",aS,[p("div",lS,P(d(x).elapsed),1),p("div",cS,P(d(x).rank),1),p("div",uS,P(d(x).depth),1),p("div",hS,P(d(x).nodes),1),p("div",dS,P(d(x).eval),1)]),p("div",{class:"list",style:Ee({height:`${t.height-37}px`})},[(O(!0),F(Re,null,Ve(t.historyMode?t.info.iterates:t.info.latestIteration,(u,h)=>(O(),F("div",{key:h,class:it(["row list-item",{highlight:d(i)&&u.multiPV===1}])},[p("div",fS,P(u.timeMs?(u.timeMs/1e3).toFixed(1)+"s":""),1),p("div",pS,P(u.multiPV||""),1),p("div",gS,P(u.depth)+P(u.selectiveDepth&&u.depth?"/":"")+P(u.selectiveDepth),1),p("div",mS,P(u.nodes),1),p("div",_S,P(u.scoreMate?o(u.scoreMate,u.color,d(s)):u.score?o(u.score,u.color,d(s)):""),1),p("div",bS,P(u.lowerBound?"++":"")+" "+P(u.upperBound?"--":"")+" "+P(u.scoreMate?d(x).mateShort:""),1),p("div",yS,[u.pv&&u.pv.length!==0&&u.text?(O(),F("button",{key:0,onClick:f=>r(u)},[z(ye,{icon:d(de).PLAY},null,8,["icon"]),p("span",null,P(d(x).displayPVShort),1)],8,vS)):le("",!0),fo(" "+P(u.text),1)])],2))),128))],4),n.value?(O(),We(Yf,{key:0,position:n.value.position,pv:n.value.pv,infos:n.value.infos,onClose:a},null,8,["position","pv","infos"])):le("",!0)])]))}});const wS=Qe(SS,[["__scopeId","data-v-b2f7ef29"]]),xS={class:"full column"},zu=Ue({__name:"EngineAnalytics",props:{size:{type:kt,required:!0},historyMode:{type:Boolean,required:!0}},setup(t){const e=t,i=rt(),n=Te(()=>{const s=i.usiMonitors.length;return s!==0?e.size.height/s:0});return(s,o)=>(O(),F("div",null,[p("div",xS,[(O(!0),F(Re,null,Ve(d(i).usiMonitors,r=>(O(),We(wS,{key:r.sessionID,"history-mode":t.historyMode,name:r.name,info:r,height:d(n)},null,8,["history-mode","name","info","height"]))),128))])]))}});/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function po(t){return t+.5|0}const tn=(t,e,i)=>Math.max(Math.min(t,i),e);function As(t){return tn(po(t*2.55),0,255)}function cn(t){return tn(po(t*255),0,255)}function zi(t){return tn(po(t/2.55)/100,0,1)}function Gu(t){return tn(po(t*100),0,100)}const ri={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_l=[..."0123456789ABCDEF"],ES=t=>_l[t&15],kS=t=>_l[(t&240)>>4]+_l[t&15],Io=t=>(t&240)>>4===(t&15),IS=t=>Io(t.r)&&Io(t.g)&&Io(t.b)&&Io(t.a);function AS(t){var e=t.length,i;return t[0]==="#"&&(e===4||e===5?i={r:255&ri[t[1]]*17,g:255&ri[t[2]]*17,b:255&ri[t[3]]*17,a:e===5?ri[t[4]]*17:255}:(e===7||e===9)&&(i={r:ri[t[1]]<<4|ri[t[2]],g:ri[t[3]]<<4|ri[t[4]],b:ri[t[5]]<<4|ri[t[6]],a:e===9?ri[t[7]]<<4|ri[t[8]]:255})),i}const PS=(t,e)=>t<255?e(t):"";function CS(t){var e=IS(t)?ES:kS;return t?"#"+e(t.r)+e(t.g)+e(t.b)+PS(t.a,e):void 0}const TS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xf(t,e,i){const n=e*Math.min(i,1-i),s=(o,r=(o+t/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function MS(t,e,i){const n=(s,o=(s+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function RS(t,e,i){const n=Xf(t,1,.5);let s;for(e+i>1&&(s=1/(e+i),e*=s,i*=s),s=0;s<3;s++)n[s]*=1-e-i,n[s]+=e;return n}function NS(t,e,i,n,s){return t===s?(e-i)/n+(e<i?6:0):e===s?(i-t)/n+2:(t-e)/n+4}function lc(t){const i=t.r/255,n=t.g/255,s=t.b/255,o=Math.max(i,n,s),r=Math.min(i,n,s),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=NS(i,n,s,u,o),l=l*60+.5),[l|0,c||0,a]}function cc(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(cn)}function uc(t,e,i){return cc(Xf,t,e,i)}function OS(t,e,i){return cc(RS,t,e,i)}function LS(t,e,i){return cc(MS,t,e,i)}function Jf(t){return(t%360+360)%360}function DS(t){const e=TS.exec(t);let i=255,n;if(!e)return;e[5]!==n&&(i=e[6]?As(+e[5]):cn(+e[5]));const s=Jf(+e[2]),o=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?n=OS(s,o,r):e[1]==="hsv"?n=LS(s,o,r):n=uc(s,o,r),{r:n[0],g:n[1],b:n[2],a:i}}function BS(t,e){var i=lc(t);i[0]=Jf(i[0]+e),i=uc(i),t.r=i[0],t.g=i[1],t.b=i[2]}function FS(t){if(!t)return;const e=lc(t),i=e[0],n=Gu(e[1]),s=Gu(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${s}%, ${zi(t.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const Wu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function HS(){const t={},e=Object.keys(Vu),i=Object.keys(Wu);let n,s,o,r,a;for(n=0;n<e.length;n++){for(r=a=e[n],s=0;s<i.length;s++)o=i[s],a=a.replace(o,Wu[o]);o=parseInt(Vu[r],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}let Ao;function $S(t){Ao||(Ao=HS(),Ao.transparent=[0,0,0,0]);const e=Ao[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const US=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zS(t){const e=US.exec(t);let i=255,n,s,o;if(e){if(e[7]!==n){const r=+e[7];i=e[8]?As(r):tn(r*255,0,255)}return n=+e[1],s=+e[3],o=+e[5],n=255&(e[2]?As(n):tn(n,0,255)),s=255&(e[4]?As(s):tn(s,0,255)),o=255&(e[6]?As(o):tn(o,0,255)),{r:n,g:s,b:o,a:i}}}function GS(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${zi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ta=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Wn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function WS(t,e,i){const n=Wn(zi(t.r)),s=Wn(zi(t.g)),o=Wn(zi(t.b));return{r:cn(Ta(n+i*(Wn(zi(e.r))-n))),g:cn(Ta(s+i*(Wn(zi(e.g))-s))),b:cn(Ta(o+i*(Wn(zi(e.b))-o))),a:t.a+i*(e.a-t.a)}}function Po(t,e,i){if(t){let n=lc(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,e===0?360:1)),n=uc(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Qf(t,e){return t&&Object.assign(e||{},t)}function ju(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=cn(t[3]))):(e=Qf(t,{r:0,g:0,b:0,a:1}),e.a=cn(e.a)),e}function VS(t){return t.charAt(0)==="r"?zS(t):DS(t)}class to{constructor(e){if(e instanceof to)return e;const i=typeof e;let n;i==="object"?n=ju(e):i==="string"&&(n=AS(e)||$S(e)||VS(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Qf(this._rgb);return e&&(e.a=zi(e.a)),e}set rgb(e){this._rgb=ju(e)}rgbString(){return this._valid?GS(this._rgb):void 0}hexString(){return this._valid?CS(this._rgb):void 0}hslString(){return this._valid?FS(this._rgb):void 0}mix(e,i){if(e){const n=this.rgb,s=e.rgb;let o;const r=i===o?.5:i,a=2*r-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*s.r+.5,n.g=255&c*n.g+o*s.g+.5,n.b=255&c*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(e,i){return e&&(this._rgb=WS(this._rgb,e._rgb,i)),this}clone(){return new to(this.rgb)}alpha(e){return this._rgb.a=cn(e),this}clearer(e){const i=this._rgb;return i.a*=1-e,this}greyscale(){const e=this._rgb,i=po(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){const i=this._rgb;return i.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Po(this._rgb,2,e),this}darken(e){return Po(this._rgb,2,-e),this}saturate(e){return Po(this._rgb,1,e),this}desaturate(e){return Po(this._rgb,1,-e),this}rotate(e){return BS(this._rgb,e),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Bi(){}const jS=(()=>{let t=0;return()=>t++})();function qe(t){return t===null||typeof t>"u"}function ht(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function $e(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function yt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Zt(t,e){return yt(t)?t:e}function Le(t,e){return typeof t>"u"?e:t}const KS=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Zf=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function at(t,e,i){if(t&&typeof t.call=="function")return t.apply(i,e)}function tt(t,e,i,n){let s,o,r;if(ht(t))if(o=t.length,n)for(s=o-1;s>=0;s--)e.call(i,t[s],s);else for(s=0;s<o;s++)e.call(i,t[s],s);else if($e(t))for(r=Object.keys(t),o=r.length,s=0;s<o;s++)e.call(i,t[r[s]],r[s])}function Tr(t,e){let i,n,s,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(s=t[i],o=e[i],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Mr(t){if(ht(t))return t.map(Mr);if($e(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let s=0;for(;s<n;++s)e[i[s]]=Mr(t[i[s]]);return e}return t}function ep(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function qS(t,e,i,n){if(!ep(t))return;const s=e[t],o=i[t];$e(s)&&$e(o)?io(s,o,n):e[t]=Mr(o)}function io(t,e,i){const n=ht(e)?e:[e],s=n.length;if(!$e(t))return t;i=i||{};const o=i.merger||qS;let r;for(let a=0;a<s;++a){if(r=n[a],!$e(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],t,r,i)}return t}function $s(t,e){return io(t,e,{merger:YS})}function YS(t,e,i){if(!ep(t))return;const n=e[t],s=i[t];$e(n)&&$e(s)?$s(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Mr(s))}const Ku={"":t=>t,x:t=>t.x,y:t=>t.y};function XS(t){const e=t.split("."),i=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function JS(t){const e=XS(t);return i=>{for(const n of e){if(n==="")break;i=i&&i[n]}return i}}function fn(t,e){return(Ku[e]||(Ku[e]=JS(e)))(t)}function hc(t){return t.charAt(0).toUpperCase()+t.slice(1)}const gi=t=>typeof t<"u",pn=t=>typeof t=="function",qu=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function QS(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const gt=Math.PI,dt=2*gt,ZS=dt+gt,Rr=Number.POSITIVE_INFINITY,ew=gt/180,vt=gt/2,Sn=gt/4,Yu=gt*2/3,nn=Math.log10,Li=Math.sign;function Us(t,e,i){return Math.abs(t-e)<i}function Xu(t){const e=Math.round(t);t=Us(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(nn(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function tw(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n===0&&(e.push(n),e.push(t/n));return i===(i|0)&&e.push(i),e.sort((s,o)=>s-o).pop(),e}function ls(t){return!isNaN(parseFloat(t))&&isFinite(t)}function iw(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function tp(t,e,i){let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function vi(t){return t*(gt/180)}function dc(t){return t*(180/gt)}function Ju(t){if(!yt(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function ip(t,e){const i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i);return o<-.5*gt&&(o+=dt),{angle:o,distance:s}}function bl(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function nw(t,e){return(t-e+ZS)%dt-gt}function ii(t){return(t%dt+dt)%dt}function no(t,e,i,n){const s=ii(t),o=ii(e),r=ii(i),a=ii(o-s),l=ii(r-s),c=ii(s-o),u=ii(s-r);return s===o||s===r||n&&o===r||a>l&&c<u}function Tt(t,e,i){return Math.max(e,Math.min(i,t))}function sw(t){return Tt(t,-32768,32767)}function ji(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function fc(t,e,i){i=i||(r=>t[r]<e);let n=t.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,i(o)?s=o:n=o;return{lo:s,hi:n}}const Ki=(t,e,i,n)=>fc(t,i,n?s=>{const o=t[s][e];return o<i||o===i&&t[s+1][e]===i}:s=>t[s][e]<i),ow=(t,e,i)=>fc(t,i,n=>t[n][e]>=i);function rw(t,e,i){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>i;)s--;return n>0||s<t.length?t.slice(n,s):t}const np=["push","pop","shift","splice","unshift"];function aw(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),np.forEach(i=>{const n="_onData"+hc(i),s=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function Qu(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(np.forEach(o=>{delete t[o]}),delete t._chartjs)}function sp(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}const op=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function rp(t,e){let i=[],n=!1;return function(...s){i=s,n||(n=!0,op.call(window,()=>{n=!1,t.apply(e,i)}))}}function lw(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const pc=t=>t==="start"?"left":t==="end"?"right":"center",Nt=(t,e,i)=>t==="start"?e:t==="end"?i:(e+i)/2,cw=(t,e,i,n)=>t===(n?"left":"right")?i:t==="center"?(e+i)/2:e;function ap(t,e,i){const n=e.length;let s=0,o=n;if(t._sorted){const{iScale:r,_parsed:a}=t,l=r.axis,{min:c,max:u,minDefined:h,maxDefined:f}=r.getUserBounds();h&&(s=Tt(Math.min(Ki(a,r.axis,c).lo,i?n:Ki(e,l,r.getPixelForValue(c)).lo),0,n-1)),f?o=Tt(Math.max(Ki(a,r.axis,u,!0).hi+1,i?0:Ki(e,l,r.getPixelForValue(u),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function lp(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=s,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),o}const Co=t=>t===0||t===1,Zu=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*dt/i)),eh=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*dt/i)+1,zs={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*vt)+1,easeOutSine:t=>Math.sin(t*vt),easeInOutSine:t=>-.5*(Math.cos(gt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Co(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Co(t)?t:Zu(t,.075,.3),easeOutElastic:t=>Co(t)?t:eh(t,.075,.3),easeInOutElastic(t){return Co(t)?t:t<.5?.5*Zu(t*2,.1125,.45):.5+.5*eh(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-zs.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?zs.easeInBounce(t*2)*.5:zs.easeOutBounce(t*2-1)*.5+.5};function cp(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function th(t){return cp(t)?t:new to(t)}function Ma(t){return cp(t)?t:new to(t).saturate(.5).darken(.1).hexString()}const uw=["x","y","borderWidth","radius","tension"],hw=["color","borderColor","backgroundColor"];function dw(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:hw},numbers:{type:"number",properties:uw}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function fw(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ih=new Map;function pw(t,e){e=e||{};const i=t+JSON.stringify(e);let n=ih.get(i);return n||(n=new Intl.NumberFormat(t,e),ih.set(i,n)),n}function go(t,e,i){return pw(e,i).format(t)}const up={values(t){return ht(t)?t:""+t},numeric(t,e,i){if(t===0)return"0";const n=this.chart.options.locale;let s,o=t;if(i.length>1){const c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=gw(t,i)}const r=nn(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),go(t,n,l)},logarithmic(t,e,i){if(t===0)return"0";const n=i[e].significand||t/Math.pow(10,Math.floor(nn(t)));return[1,2,3,5,10,15].includes(n)||e>.8*i.length?up.numeric.call(this,t,e,i):""}};function gw(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var ea={formatters:up};function mw(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ea.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const $n=Object.create(null),yl=Object.create(null);function Gs(t,e){if(!e)return t;const i=e.split(".");for(let n=0,s=i.length;n<s;++n){const o=i[n];t=t[o]||(t[o]=Object.create(null))}return t}function Ra(t,e,i){return typeof e=="string"?io(Gs(t,e),i):io(Gs(t,""),e)}class _w{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Ma(s.backgroundColor),this.hoverBorderColor=(n,s)=>Ma(s.borderColor),this.hoverColor=(n,s)=>Ma(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return Ra(this,e,i)}get(e){return Gs(this,e)}describe(e,i){return Ra(yl,e,i)}override(e,i){return Ra($n,e,i)}route(e,i,n,s){const o=Gs(this,e),r=Gs(this,n),a="_"+i;Object.defineProperties(o,{[a]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],c=r[s];return $e(l)?Object.assign({},c,l):Le(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(i=>i(this))}}var St=new _w({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[dw,fw,mw]);function bw(t){return!t||qe(t.size)||qe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Nr(t,e,i,n,s){let o=e[s];return o||(o=e[s]=t.measureText(s).width,i.push(s)),o>n&&(n=o),n}function yw(t,e,i,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let r=0;const a=i.length;let l,c,u,h,f;for(l=0;l<a;l++)if(h=i[l],h!=null&&ht(h)!==!0)r=Nr(t,s,o,r,h);else if(ht(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!ht(f)&&(r=Nr(t,s,o,r,f));t.restore();const m=o.length/2;if(m>i.length){for(l=0;l<m;l++)delete s[o[l]];o.splice(0,m)}return r}function wn(t,e,i){const n=t.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((e-s)*n)/n+s}function nh(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function vl(t,e,i,n){hp(t,e,i,n,null)}function hp(t,e,i,n,s){let o,r,a,l,c,u,h,f;const m=e.pointStyle,S=e.rotation,b=e.radius;let v=(S||0)*ew;if(m&&typeof m=="object"&&(o=m.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(i,n),t.rotate(v),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),m){default:s?t.ellipse(i,n,s/2,b,0,0,dt):t.arc(i,n,b,0,dt),t.closePath();break;case"triangle":u=s?s/2:b,t.moveTo(i+Math.sin(v)*u,n-Math.cos(v)*b),v+=Yu,t.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*b),v+=Yu,t.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,r=Math.cos(v+Sn)*l,h=Math.cos(v+Sn)*(s?s/2-c:l),a=Math.sin(v+Sn)*l,f=Math.sin(v+Sn)*(s?s/2-c:l),t.arc(i-h,n-a,c,v-gt,v-vt),t.arc(i+f,n-r,c,v-vt,v),t.arc(i+h,n+a,c,v,v+vt),t.arc(i-f,n+r,c,v+vt,v+gt),t.closePath();break;case"rect":if(!S){l=Math.SQRT1_2*b,u=s?s/2:l,t.rect(i-u,n-l,2*u,2*l);break}v+=Sn;case"rectRot":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,f=Math.sin(v)*(s?s/2:b),t.moveTo(i-h,n-a),t.lineTo(i+f,n-r),t.lineTo(i+h,n+a),t.lineTo(i-f,n+r),t.closePath();break;case"crossRot":v+=Sn;case"cross":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,f=Math.sin(v)*(s?s/2:b),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+f,n-r),t.lineTo(i-f,n+r);break;case"star":h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,f=Math.sin(v)*(s?s/2:b),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+f,n-r),t.lineTo(i-f,n+r),v+=Sn,h=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,f=Math.sin(v)*(s?s/2:b),t.moveTo(i-h,n-a),t.lineTo(i+h,n+a),t.moveTo(i+f,n-r),t.lineTo(i-f,n+r);break;case"line":r=s?s/2:Math.cos(v)*b,a=Math.sin(v)*b,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(v)*(s?s/2:b),n+Math.sin(v)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function so(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function ta(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ia(t){t.restore()}function vw(t,e,i,n,s){if(!e)return t.lineTo(i.x,i.y);if(s==="middle"){const o=(e.x+i.x)/2;t.lineTo(o,e.y),t.lineTo(o,i.y)}else s==="after"!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function Sw(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Un(t,e,i,n,s,o={}){const r=ht(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,ww(t,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Ew(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),qe(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,i,n,o.maxWidth)),t.fillText(c,i,n,o.maxWidth),xw(t,i,n,c,o),n+=s.lineHeight;t.restore()}function ww(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),qe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function xw(t,e,i,n,s){if(s.strikethrough||s.underline){const o=t.measureText(n),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(r,u),t.lineTo(a,u),t.stroke()}}function Ew(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function oo(t,e){const{x:i,y:n,w:s,h:o,radius:r}=e;t.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-vt,gt,!0),t.lineTo(i,n+o-r.bottomLeft),t.arc(i+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,gt,vt,!0),t.lineTo(i+s-r.bottomRight,n+o),t.arc(i+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,vt,0,!0),t.lineTo(i+s,n+r.topRight),t.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-vt,!0),t.lineTo(i+r.topLeft,n)}const kw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Iw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Aw(t,e){const i=(""+t).match(kw);if(!i||i[1]==="normal")return e*1.2;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const Pw=t=>+t||0;function gc(t,e){const i={},n=$e(e),s=n?Object.keys(e):e,o=$e(t)?n?r=>Le(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of s)i[r]=Pw(o(r));return i}function dp(t){return gc(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Bn(t){return gc(t,["topLeft","topRight","bottomLeft","bottomRight"])}function $t(t){const e=dp(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function At(t,e){t=t||{},e=e||St.font;let i=Le(t.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let n=Le(t.style,e.style);n&&!(""+n).match(Iw)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:Le(t.family,e.family),lineHeight:Aw(Le(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:Le(t.weight,e.weight),string:""};return s.string=bw(s),s}function Ps(t,e,i,n){let s=!0,o,r,a;for(o=0,r=t.length;o<r;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),i!==void 0&&ht(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function Cw(t,e,i){const{min:n,max:s}=t,o=Zf(e,(s-n)/2),r=(a,l)=>i&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function _n(t,e){return Object.assign(Object.create(t),e)}function mc(t,e=[""],i=t,n,s=()=>t[0]){gi(n)||(n=mp("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:s,override:r=>mc([r,...t],e,i,n)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete t[0][a],!0},get(r,a){return pp(r,a,()=>Bw(a,e,t,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(r,a){return oh(r).includes(a)},ownKeys(r){return oh(r)},set(r,a,l){const c=r._storage||(r._storage=s());return r[a]=c[a]=l,delete r._keys,!0}})}function cs(t,e,i,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:fp(t,n),setContext:o=>cs(t,o,i,n),override:o=>cs(t.override(o),e,i,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete t[r],!0},get(o,r,a){return pp(o,r,()=>Mw(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(o,r,a){return t[r]=a,delete o[r],!0}})}function fp(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:i,indexable:n,isScriptable:pn(i)?i:()=>i,isIndexable:pn(n)?n:()=>n}}const Tw=(t,e)=>t?t+hc(e):e,_c=(t,e)=>$e(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pp(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=i();return t[e]=n,n}function Mw(t,e,i){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=t;let a=n[e];return pn(a)&&r.isScriptable(e)&&(a=Rw(e,a,t,i)),ht(a)&&a.length&&(a=Nw(e,a,t,r.isIndexable)),_c(e,a)&&(a=cs(a,s,o&&o[e],r)),a}function Rw(t,e,i,n){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(o,r||n),a.delete(t),_c(t,e)&&(e=bc(s._scopes,s,t,e)),e}function Nw(t,e,i,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=i;if(gi(o.index)&&n(t))e=e[o.index%e.length];else if($e(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=bc(c,s,t,u);e.push(cs(h,o,r&&r[t],a))}}return e}function gp(t,e,i){return pn(t)?t(e,i):t}const Ow=(t,e)=>t===!0?e:typeof t=="string"?fn(e,t):void 0;function Lw(t,e,i,n,s){for(const o of e){const r=Ow(i,o);if(r){t.add(r);const a=gp(r._fallback,i,s);if(gi(a)&&a!==i&&a!==n)return a}else if(r===!1&&gi(n)&&i!==n)return null}return!1}function bc(t,e,i,n){const s=e._rootScopes,o=gp(e._fallback,i,n),r=[...t,...s],a=new Set;a.add(n);let l=sh(a,r,i,o||i,n);return l===null||gi(o)&&o!==i&&(l=sh(a,r,o,l,n),l===null)?!1:mc(Array.from(a),[""],s,o,()=>Dw(e,i,n))}function sh(t,e,i,n,s){for(;i;)i=Lw(t,e,i,n,s);return i}function Dw(t,e,i){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return ht(s)&&$e(i)?i:s||{}}function Bw(t,e,i,n){let s;for(const o of e)if(s=mp(Tw(o,t),i),gi(s))return _c(t,s)?bc(i,n,t,s):s}function mp(t,e){for(const i of e){if(!i)continue;const n=i[t];if(gi(n))return n}}function oh(t){let e=t._keys;return e||(e=t._keys=Fw(t._scopes)),e}function Fw(t){const e=new Set;for(const i of t)for(const n of Object.keys(i).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}function _p(t,e,i,n){const{iScale:s}=t,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+i,u=e[c],r[a]={r:s.parse(fn(u,o),c)};return r}const Hw=Number.EPSILON||1e-14,us=(t,e)=>e<t.length&&!t[e].skip&&t[e],bp=t=>t==="x"?"y":"x";function $w(t,e,i,n){const s=t.skip?e:t,o=e,r=i.skip?e:i,a=bl(o,s),l=bl(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=n*c,f=n*u;return{previous:{x:o.x-h*(r.x-s.x),y:o.y-h*(r.y-s.y)},next:{x:o.x+f*(r.x-s.x),y:o.y+f*(r.y-s.y)}}}function Uw(t,e,i){const n=t.length;let s,o,r,a,l,c=us(t,0);for(let u=0;u<n-1;++u)if(l=c,c=us(t,u+1),!(!l||!c)){if(Us(e[u],0,Hw)){i[u]=i[u+1]=0;continue}s=i[u]/e[u],o=i[u+1]/e[u],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),i[u]=s*r*e[u],i[u+1]=o*r*e[u])}}function zw(t,e,i="x"){const n=bp(i),s=t.length;let o,r,a,l=us(t,0);for(let c=0;c<s;++c){if(r=a,a=l,l=us(t,c+1),!a)continue;const u=a[i],h=a[n];r&&(o=(u-r[i])/3,a[`cp1${i}`]=u-o,a[`cp1${n}`]=h-o*e[c]),l&&(o=(l[i]-u)/3,a[`cp2${i}`]=u+o,a[`cp2${n}`]=h+o*e[c])}}function Gw(t,e="x"){const i=bp(e),n=t.length,s=Array(n).fill(0),o=Array(n);let r,a,l,c=us(t,0);for(r=0;r<n;++r)if(a=l,l=c,c=us(t,r+1),!!l){if(c){const u=c[e]-l[e];s[r]=u!==0?(c[i]-l[i])/u:0}o[r]=a?c?Li(s[r-1])!==Li(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}Uw(t,s,o),zw(t,o,e)}function To(t,e,i){return Math.max(Math.min(t,i),e)}function Ww(t,e){let i,n,s,o,r,a=so(t[0],e);for(i=0,n=t.length;i<n;++i)r=o,o=a,a=i<n-1&&so(t[i+1],e),o&&(s=t[i],r&&(s.cp1x=To(s.cp1x,e.left,e.right),s.cp1y=To(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=To(s.cp2x,e.left,e.right),s.cp2y=To(s.cp2y,e.top,e.bottom)))}function Vw(t,e,i,n,s){let o,r,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Gw(t,s);else{let c=n?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],l=$w(c,a,t[Math.min(o+1,r-(n?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Ww(t,i)}function yp(){return typeof window<"u"&&typeof document<"u"}function yc(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Or(t,e,i){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[i])):n=t,n}const na=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function jw(t,e){return na(t).getPropertyValue(e)}const Kw=["top","right","bottom","left"];function Fn(t,e,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const o=Kw[s];n[o]=parseFloat(t[e+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const qw=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function Yw(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:s,offsetY:o}=n;let r=!1,a,l;if(qw(s,o,t.target))a=s,l=o;else{const c=e.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function In(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:n}=e,s=na(i),o=s.boxSizing==="border-box",r=Fn(s,"padding"),a=Fn(s,"border","width"),{x:l,y:c,box:u}=Yw(t,i),h=r.left+(u&&a.left),f=r.top+(u&&a.top);let{width:m,height:S}=e;return o&&(m-=r.width+a.width,S-=r.height+a.height),{x:Math.round((l-h)/m*i.width/n),y:Math.round((c-f)/S*i.height/n)}}function Xw(t,e,i){let n,s;if(e===void 0||i===void 0){const o=yc(t);if(!o)e=t.clientWidth,i=t.clientHeight;else{const r=o.getBoundingClientRect(),a=na(o),l=Fn(a,"border","width"),c=Fn(a,"padding");e=r.width-c.width-l.width,i=r.height-c.height-l.height,n=Or(a.maxWidth,o,"clientWidth"),s=Or(a.maxHeight,o,"clientHeight")}}return{width:e,height:i,maxWidth:n||Rr,maxHeight:s||Rr}}const Mo=t=>Math.round(t*10)/10;function Jw(t,e,i,n){const s=na(t),o=Fn(s,"margin"),r=Or(s.maxWidth,t,"clientWidth")||Rr,a=Or(s.maxHeight,t,"clientHeight")||Rr,l=Xw(t,e,i);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=Fn(s,"border","width"),m=Fn(s,"padding");c-=m.width+f.width,u-=m.height+f.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=Mo(Math.min(c,r,l.maxWidth)),u=Mo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Mo(c/2)),(e!==void 0||i!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=Mo(Math.floor(u*n))),{width:c,height:u}}function rh(t,e,i){const n=e||1,s=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const r=t.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(t.currentDevicePixelRatio=n,r.height=s,r.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Qw=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function ah(t,e){const i=jw(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function An(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function Zw(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:n==="middle"?i<.5?t.y:e.y:n==="after"?i<1?t.y:e.y:i>0?e.y:t.y}}function ex(t,e,i,n){const s={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=An(t,s,i),a=An(s,o,i),l=An(o,e,i),c=An(r,a,i),u=An(a,l,i);return An(c,u,i)}const tx=function(t,e){return{x(i){return t+t+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},ix=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ss(t,e,i){return t?tx(e,i):ix()}function vp(t,e){let i,n;(e==="ltr"||e==="rtl")&&(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Sp(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wp(t){return t==="angle"?{between:no,compare:nw,normalize:ii}:{between:ji,compare:(e,i)=>e-i,normalize:e=>e}}function lh({start:t,end:e,count:i,loop:n,style:s}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i===0,style:s}}function nx(t,e,i){const{property:n,start:s,end:o}=i,{between:r,normalize:a}=wp(n),l=e.length;let{start:c,end:u,loop:h}=t,f,m;if(h){for(c+=l,u+=l,f=0,m=l;f<m&&r(a(e[c%l][n]),s,o);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function xp(t,e,i){if(!i)return[t];const{property:n,start:s,end:o}=i,r=e.length,{compare:a,between:l,normalize:c}=wp(n),{start:u,end:h,loop:f,style:m}=nx(t,e,i),S=[];let b=!1,v=null,y,E,I;const k=()=>l(s,I,y)&&a(s,I)!==0,A=()=>a(o,y)===0||l(o,I,y),T=()=>b||k(),R=()=>!b||A();for(let N=u,V=u;N<=h;++N)E=e[N%r],!E.skip&&(y=c(E[n]),y!==I&&(b=l(y,s,o),v===null&&T()&&(v=a(y,s)===0?N:V),v!==null&&R()&&(S.push(lh({start:v,end:N,loop:f,count:r,style:m})),v=null),V=N,I=y));return v!==null&&S.push(lh({start:v,end:h,loop:f,count:r,style:m})),S}function Ep(t,e){const i=[],n=t.segments;for(let s=0;s<n.length;s++){const o=xp(n[s],t.points,e);o.length&&i.push(...o)}return i}function sx(t,e,i,n){let s=0,o=e-1;if(i&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,i&&(o+=s);o>s&&t[o%e].skip;)o--;return o%=e,{start:s,end:o}}function ox(t,e,i,n){const s=t.length,o=[];let r=e,a=t[e],l;for(l=e+1;l<=i;++l){const c=t[l%s];c.skip||c.stop?a.skip||(n=!1,o.push({start:e%s,end:(l-1)%s,loop:n}),e=r=c.stop?l:null):(r=l,a.skip&&(e=l)),a=c}return r!==null&&o.push({start:e%s,end:r%s,loop:n}),o}function rx(t,e){const i=t.points,n=t.options.spanGaps,s=i.length;if(!s)return[];const o=!!t._loop,{start:r,end:a}=sx(i,s,o,n);if(n===!0)return ch(t,[{start:r,end:a,loop:o}],i,e);const l=a<r?a+s:a,c=!!t._fullLoop&&r===0&&a===s-1;return ch(t,ox(i,r,l,c),i,e)}function ch(t,e,i,n){return!n||!n.setContext||!i?e:ax(t,e,i,n)}function ax(t,e,i,n){const s=t._chart.getContext(),o=uh(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=i.length,c=[];let u=o,h=e[0].start,f=h;function m(S,b,v,y){const E=a?-1:1;if(S!==b){for(S+=l;i[S%l].skip;)S-=E;for(;i[b%l].skip;)b+=E;S%l!==b%l&&(c.push({start:S%l,end:b%l,loop:v,style:y}),u=y,h=b%l)}}for(const S of e){h=a?h:S.start;let b=i[h%l],v;for(f=h+1;f<=S.end;f++){const y=i[f%l];v=uh(n.setContext(_n(s,{type:"segment",p0:b,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),lx(v,u)&&m(h,f-1,S.loop,u),b=y,u=v}h<f-1&&m(h,f-1,S.loop,u)}return c}function uh(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function lx(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class cx{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,n,s){const o=i.listeners[s],r=i.duration;o.forEach(a=>a({chart:e,initial:i.initial,numSteps:r,currentStep:Math.min(n-i.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=op.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,e,"progress")),o.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),i+=o.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){const i=this._charts;let n=i.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,n)),n}listen(e,i,n){this._getAnims(e).listeners[i].push(n)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){const i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){const i=this._charts.get(e);if(!i||!i.items.length)return;const n=i.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Hi=new cx;const hh="transparent",ux={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const n=th(t||hh),s=n.valid&&th(e||hh);return s&&s.valid?s.mix(n,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class hx{constructor(e,i,n,s){const o=i[n];s=Ps([e.to,s,o,e.from]);const r=Ps([e.from,o,s]);this._active=!0,this._fn=e.fn||ux[e.type||typeof r],this._easing=zs[e.easing]||zs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(e,i,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Ps([e.to,i,s,e.from]),this._from=Ps([e.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const i=e-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=o;return}l=i/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((i,n)=>{e.push({res:i,rej:n})})}_notify(e){const i=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}}class kp{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!$e(e))return;const i=Object.keys(St.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!$e(o))return;const r={};for(const a of i)r[a]=o[a];(ht(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(e,i){const n=i.options,s=fx(e,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&dx(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,i){const n=this._properties,s=[],o=e.$animations||(e.$animations={}),r=Object.keys(i),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,i));continue}const u=i[c];let h=o[c];const f=n.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}o[c]=h=new hx(f,e,c,u),s.push(h)}return s}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}const n=this._createAnimations(e,i);if(n.length)return Hi.add(this._chart,n),!0}}function dx(t,e){const i=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const o=t[n[s]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function fx(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function dh(t,e){const i=t&&t.options||{},n=i.reverse,s=i.min===void 0?e:0,o=i.max===void 0?e:0;return{start:n?o:s,end:n?s:o}}function px(t,e,i){if(i===!1)return!1;const n=dh(t,i),s=dh(e,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function gx(t){let e,i,n,s;return $e(t)?(e=t.top,i=t.right,n=t.bottom,s=t.left):e=i=n=s=t,{top:e,right:i,bottom:n,left:s,disabled:t===!1}}function Ip(t,e){const i=[],n=t._getSortedDatasetMetas(e);let s,o;for(s=0,o=n.length;s<o;++s)i.push(n[s].index);return i}function fh(t,e,i,n={}){const s=t.keys,o=n.mode==="single";let r,a,l,c;if(e!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===i){if(n.all)continue;break}c=t.values[l],yt(c)&&(o||e===0||Li(e)===Li(c))&&(e+=c)}return e}}function mx(t){const e=Object.keys(t),i=new Array(e.length);let n,s,o;for(n=0,s=e.length;n<s;++n)o=e[n],i[n]={x:o,y:t[o]};return i}function ph(t,e){const i=t&&t.options.stacked;return i||i===void 0&&e.stack!==void 0}function _x(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function bx(t){const{min:e,max:i,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function yx(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function gh(t,e,i,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const o=t[s.index];if(i&&o>0||!i&&o<0)return s.index}return null}function mh(t,e){const{chart:i,_cachedMeta:n}=t,s=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=_x(o,r,n),h=e.length;let f;for(let m=0;m<h;++m){const S=e[m],{[l]:b,[c]:v}=S,y=S._stacks||(S._stacks={});f=y[c]=yx(s,u,b),f[a]=v,f._top=gh(f,r,!0,n.type),f._bottom=gh(f,r,!1,n.type);const E=f._visualValues||(f._visualValues={});E[a]=v}}function Na(t,e){const i=t.scales;return Object.keys(i).filter(n=>i[n].axis===e).shift()}function vx(t,e){return _n(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Sx(t,e,i){return _n(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function _s(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const s of e){const o=s._stacks;if(!o||o[n]===void 0||o[n][i]===void 0)return;delete o[n][i],o[n]._visualValues!==void 0&&o[n]._visualValues[i]!==void 0&&delete o[n]._visualValues[i]}}}const Oa=t=>t==="reset"||t==="none",_h=(t,e)=>e?t:Object.assign({},t),wx=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Ip(i,!0),values:null};class wi{constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ph(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_s(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(h,f,m,S)=>h==="x"?f:h==="r"?S:m,o=i.xAxisID=Le(n.xAxisID,Na(e,"x")),r=i.yAxisID=Le(n.yAxisID,Na(e,"y")),a=i.rAxisID=Le(n.rAxisID,Na(e,"r")),l=i.indexAxis,c=i.iAxisID=s(l,o,r,a),u=i.vAxisID=s(l,r,o,a);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Qu(this._data,this),e._stacked&&_s(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),n=this._data;if($e(i))this._data=mx(i);else if(n!==i){if(n){Qu(n,this);const s=this._cachedMeta;_s(s),s._parsed=[]}i&&Object.isExtensible(i)&&aw(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=ph(i.vScale,i),i.stack!==n.stack&&(s=!0,_s(i),i.stack=n.stack),this._resyncElements(e),(s||o!==i._stacked)&&mh(this,i._parsed)}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=e===0&&i===s.length?!0:n._sorted,c=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=s,n._sorted=!0,f=s;else{ht(s[e])?f=this.parseArrayData(n,s,e,i):$e(s[e])?f=this.parseObjectData(n,s,e,i):f=this.parsePrimitiveData(n,s,e,i);const m=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<i;++u)n._parsed[u+e]=h=f[u],l&&(m()&&(l=!1),c=h);n._sorted=l}r&&mh(this,f)}parsePrimitiveData(e,i,n,s){const{iScale:o,vScale:r}=e,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,h=new Array(s);let f,m,S;for(f=0,m=s;f<m;++f)S=f+n,h[f]={[a]:u||o.parse(c[S],S),[l]:r.parse(i[S],S)};return h}parseArrayData(e,i,n,s){const{xScale:o,yScale:r}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+n,h=i[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(e,i,n,s){const{xScale:o,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,f,m;for(u=0,h=s;u<h;++u)f=u+n,m=i[f],c[u]={x:o.parse(fn(m,a),f),y:r.parse(fn(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,n){const s=this.chart,o=this._cachedMeta,r=i[e.axis],a={keys:Ip(s,!0),values:i._stacks[e.axis]._visualValues};return fh(a,r,o.index,{mode:n})}updateRangeFromParsed(e,i,n,s){const o=n[i.axis];let r=o===null?NaN:o;const a=s&&n._stacks[i.axis];s&&a&&(s.values=a,r=fh(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,i){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&e===n.iScale,r=s.length,a=this._getOtherScale(e),l=wx(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=bx(a);let f,m;function S(){m=s[f];const b=m[a.axis];return!yt(m[e.axis])||u>b||h<b}for(f=0;f<r&&!(!S()&&(this.updateRangeFromParsed(c,e,m,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!S()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const i=this._cachedMeta._parsed,n=[];let s,o,r;for(s=0,o=i.length;s<o;++s)r=i[s][e.axis],yt(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,n=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=gx(Le(this.options.clip,px(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],o=i.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,o,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?r.push(h):h.draw(e,o))}for(u=0;u<r.length;++u)r[u].draw(e,o)}getStyle(e,i){const n=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,i,n){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];o=r.$context||(r.$context=Sx(this.getContext(),e,r)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=vx(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",n){const s=i==="active",o=this._cachedDataOpts,r=e+"-"+i,a=o[r],l=this.enableOptionSharing&&gi(n);if(a)return _h(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),m=Object.keys(St.elements[e]),S=()=>this.getContext(n,s,i),b=c.resolveNamedOptions(f,m,S,h);return b.$shared&&(b.$shared=l,o[r]=Object.freeze(_h(b,l))),b}_resolveAnimations(e,i,n){const s=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,i),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,n,i))}const c=new kp(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||Oa(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const n=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,n),{sharedOptions:o,includeOptions:r}}updateElement(e,i,n,s){Oa(s)?Object.assign(e,n):this._resolveAnimations(i,s).update(e,n)}updateSharedOptions(e,i,n){e&&!Oa(i)&&this._resolveAnimations(void 0,i).update(e,n)}_setStyle(e,i,n,s){e.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,i,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=n.length,o=i.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,n=!0){const s=this._cachedMeta,o=s.data,r=e+i;let a;const l=c=>{for(c.length+=i,a=c.length-1;a>=r;a--)c[a]=c[a-i]};for(l(o),a=e;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,i),n&&this.updateElements(o,e,i,"reset")}updateElements(e,i,n,s){}_removeElements(e,i){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,i);n._stacked&&_s(n,s)}n.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,n,s]=e;this[i](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}L(wi,"defaults",{}),L(wi,"datasetElementType",null),L(wi,"dataElementType",null);function xx(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let s=0,o=i.length;s<o;s++)n=n.concat(i[s].controller.getAllParsedValues(t));t._cache.$bar=sp(n.sort((s,o)=>s-o))}return t._cache.$bar}function Ex(t){const e=t.iScale,i=xx(e,t.type);let n=e._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(gi(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(s=0,o=i.length;s<o;++s)r=e.getPixelForValue(i[s]),l();for(a=void 0,s=0,o=e.ticks.length;s<o;++s)r=e.getPixelForTick(s),l();return n}function kx(t,e,i,n){const s=i.barThickness;let o,r;return qe(s)?(o=e.min*i.categoryPercentage,r=i.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:e.pixels[t]-o/2}}function Ix(t,e,i,n){const s=e.pixels,o=s[t];let r=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=i.categoryPercentage;r===null&&(r=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:i.barPercentage,start:c}}function Ax(t,e,i,n){const s=i.parse(t[0],n),o=i.parse(t[1],n),r=Math.min(s,o),a=Math.max(s,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),e[i.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function Ap(t,e,i,n){return ht(t)?Ax(t,e,i,n):e[i.axis]=i.parse(t,n),e}function bh(t,e,i,n){const s=t.iScale,o=t.vScale,r=s.getLabels(),a=s===o,l=[];let c,u,h,f;for(c=i,u=i+n;c<u;++c)f=e[c],h={},h[s.axis]=a||s.parse(r[c],c),l.push(Ap(f,h,o,c));return l}function La(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Px(t,e,i){return t!==0?Li(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function Cx(t){let e,i,n,s,o;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(s="end",o="start"):(s="start",o="end"),{start:i,end:n,reverse:e,top:s,bottom:o}}function Tx(t,e,i,n){let s=e.borderSkipped;const o={};if(!s){t.borderSkipped=o;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=Cx(t);s==="middle"&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=u:(o[yh(u,r,a,l)]=!0,s=c)),o[yh(s,r,a,l)]=!0,t.borderSkipped=o}function yh(t,e,i,n){return n?(t=Mx(t,e,i),t=vh(t,i,e)):t=vh(t,e,i),t}function Mx(t,e,i){return t===e?i:t===i?e:t}function vh(t,e,i){return t==="start"?e:t==="end"?i:t}function Rx(t,{inflateAmount:e},i){t.inflateAmount=e==="auto"?i===1?.33:0:e}class Jo extends wi{parsePrimitiveData(e,i,n,s){return bh(e,i,n,s)}parseArrayData(e,i,n,s){return bh(e,i,n,s)}parseObjectData(e,i,n,s){const{iScale:o,vScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let f,m,S,b;for(f=n,m=n+s;f<m;++f)b=i[f],S={},S[o.axis]=o.parse(fn(b,c),f),h.push(Ap(fn(b,u),S,r,f));return h}updateRangeFromParsed(e,i,n,s){super.updateRangeFromParsed(e,i,n,s);const o=n._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:n,vScale:s}=i,o=this.getParsed(e),r=o._custom,a=La(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,n,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,s);for(let m=i;m<i+n;m++){const S=this.getParsed(m),b=o||qe(S[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),v=this._calculateBarIndexPixels(m,u),y=(S._stacks||{})[a.axis],E={horizontal:c,base:b.base,enableBorderRadius:!y||La(S._custom)||r===y._top||r===y._bottom,x:c?b.head:v.center,y:c?v.center:b.head,height:c?v.size:Math.abs(b.size),width:c?Math.abs(b.size):v.size};f&&(E.options=h||this.resolveDataElementOptions(m,e[m].active?"active":s));const I=E.options||e[m].options;Tx(E,I,y,r),Rx(E,I,u.ratio),this.updateElement(e[m],m,E,s)}}_getStacks(e,i){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=n.options.stacked,r=[],a=l=>{const c=l.controller.getParsed(i),u=c&&c[l.vScale.axis];if(qe(u)||isNaN(u))return!0};for(const l of s)if(!(i!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,n){const s=this._getStacks(e,n),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){const e=this.options,i=this._cachedMeta,n=i.iScale,s=[];let o,r;for(o=0,r=i.data.length;o<r;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=e.barThickness;return{min:a||Ex(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(e),c=l._custom,u=La(c);let h=l[i.axis],f=0,m=n?this.applyStack(i,l,n):h,S,b;m!==h&&(f=m-h,m=h),u&&(h=c.barStart,m=c.barEnd-c.barStart,h!==0&&Li(h)!==Li(c.barEnd)&&(f=0),f+=h);const v=!qe(o)&&!u?o:f;let y=i.getPixelForValue(v);if(this.chart.getDataVisibility(e)?S=i.getPixelForValue(f+m):S=y,b=S-y,Math.abs(b)<r){b=Px(b,i,a)*r,h===a&&(y-=b/2);const E=i.getPixelForDecimal(0),I=i.getPixelForDecimal(1),k=Math.min(E,I),A=Math.max(E,I);y=Math.max(Math.min(y,A),k),S=y+b,n&&!u&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(S)-i.getValueForPixel(y))}if(y===i.getPixelForValue(a)){const E=Li(b)*i.getLineWidthForValue(a)/2;y+=E,b-=E}return{size:b,base:y,head:S,center:S+b/2}}_calculateBarIndexPixels(e,i){const n=i.scale,s=this.options,o=s.skipNull,r=Le(s.maxBarThickness,1/0);let a,l;if(i.grouped){const c=o?this._getStackCount(e):i.stackCount,u=s.barThickness==="flex"?Ix(e,i,s,c):kx(e,i,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(r,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,i=e.vScale,n=e.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&n[o].draw(this._ctx)}}L(Jo,"id","bar"),L(Jo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),L(Jo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Qo extends wi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,n,s){const o=super.parsePrimitiveData(e,i,n,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(e,i,n,s){const o=super.parseArrayData(e,i,n,s);for(let r=0;r<o.length;r++){const a=i[n+r];o[r]._custom=Le(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(e,i,n,s){const o=super.parseObjectData(e,i,n,s);for(let r=0;r<o.length;r++){const a=i[n+r];o[r]._custom=Le(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let n=e.length-1;n>=0;--n)i=Math.max(i,e[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(e),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(i,s),u=r.axis,h=a.axis;for(let f=i;f<i+n;f++){const m=e[f],S=!o&&this.getParsed(f),b={},v=b[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(S[u]),y=b[h]=o?a.getBasePixel():a.getPixelForValue(S[h]);b.skip=isNaN(v)||isNaN(y),c&&(b.options=l||this.resolveDataElementOptions(f,m.active?"active":s),o&&(b.options.radius=0)),this.updateElement(m,f,b,s)}}resolveDataElementOptions(e,i){const n=this.getParsed(e);let s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=Le(n&&n._custom,o),s}}L(Qo,"id","bubble"),L(Qo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),L(Qo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Nx(t,e,i){let n=1,s=1,o=0,r=0;if(e<dt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),m=(I,k,A)=>no(I,a,l,!0)?1:Math.max(k,k*i,A,A*i),S=(I,k,A)=>no(I,a,l,!0)?-1:Math.min(k,k*i,A,A*i),b=m(0,c,h),v=m(vt,u,f),y=S(gt,c,h),E=S(gt+vt,u,f);n=(b-y)/2,s=(v-E)/2,o=-(b+y)/2,r=-(v+E)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}class Nn extends wi{constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=l=>+n[l];if($e(n[e])){const{key:l="value"}=this._parsing;o=c=>+fn(n[c],l)}let r,a;for(r=e,a=e+i;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return vi(this.options.rotation-90)}_getCircumference(){return vi(this.options.circumference)}_getRotationExtents(){let e=dt,i=-dt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+r)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:n}=i,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(KS(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:S,offsetY:b}=Nx(h,u,l),v=(n.width-r)/f,y=(n.height-r)/m,E=Math.max(Math.min(v,y)/2,0),I=Zf(this.options.radius,E),k=Math.max(I*l,0),A=(I-k)/this._getVisibleDatasetWeightTotal();this.offsetX=S*I,this.offsetY=b*I,s.total=this.calculateTotal(),this.outerRadius=I-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/dt)}updateElements(e,i,n,s){const o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=o&&c.animateScale,m=f?0:this.innerRadius,S=f?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(i,s);let y=this._getRotation(),E;for(E=0;E<i;++E)y+=this._circumference(E,o);for(E=i;E<i+n;++E){const I=this._circumference(E,o),k=e[E],A={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+I,circumference:I,outerRadius:S,innerRadius:m};v&&(A.options=b||this.resolveDataElementOptions(E,k.active?"active":s)),y+=I,this.updateElement(k,E,A,s)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let n=0,s;for(s=0;s<i.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?dt*(Math.abs(e)/i):0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=go(i._parsed[e],n.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0;const n=this.chart;let s,o,r,a,l;if(!e){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),e=r.data,a=r.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let n=0,s=e.length;n<s;++n){const o=this.resolveDataElementOptions(n);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(e){return Math.max(Le(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}L(Nn,"id","doughnut"),L(Nn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),L(Nn,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"}),L(Nn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return i.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});class Zo extends wi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=i,r=this.chart._animationsDisabled;let{start:a,count:l}=ap(i,s,r);this._drawStart=a,this._drawCount=l,lp(i)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(i,s),f=r.axis,m=a.axis,{spanGaps:S,segment:b}=this.options,v=ls(S)?S:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||s==="none",E=i+n,I=e.length;let k=i>0&&this.getParsed(i-1);for(let A=0;A<I;++A){const T=e[A],R=y?T:{};if(A<i||A>=E){R.skip=!0;continue}const N=this.getParsed(A),V=qe(N[m]),ee=R[f]=r.getPixelForValue(N[f],A),se=R[m]=o||V?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[m],A);R.skip=isNaN(ee)||isNaN(se)||V,R.stop=A>0&&Math.abs(N[f]-k[f])>v,b&&(R.parsed=N,R.raw=c.data[A]),h&&(R.options=u||this.resolveDataElementOptions(A,T.active?"active":s)),y||this.updateElement(T,A,R,s),k=N}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,n=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}L(Zo,"id","line"),L(Zo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),L(Zo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ws extends wi{constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=go(i._parsed[e].r,n.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,n,s){return _p.bind(this)(e,i,n,s)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,n=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/e.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,i,n,s){const o=s==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,f=c.getIndexAngle(0)-.5*gt;let m=f,S;const b=360/this.countVisibleElements();for(S=0;S<i;++S)m+=this._computeAngle(S,s,b);for(S=i;S<i+n;S++){const v=e[S];let y=m,E=m+this._computeAngle(S,s,b),I=r.getDataVisibility(S)?c.getDistanceFromCenterForValue(this.getParsed(S).r):0;m=E,o&&(l.animateScale&&(I=0),l.animateRotate&&(y=E=f));const k={x:u,y:h,innerRadius:0,outerRadius:I,startAngle:y,endAngle:E,options:this.resolveDataElementOptions(S,v.active?"active":s)};this.updateElement(v,S,k,s)}}countVisibleElements(){const e=this._cachedMeta;let i=0;return e.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,n){return this.chart.getDataVisibility(e)?vi(this.resolveDataElementOptions(e,i).angle||n):0}}L(Ws,"id","polarArea"),L(Ws,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),L(Ws,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return i.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Sl extends Nn{}L(Sl,"id","pie"),L(Sl,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class er extends wi{getLabelAndValue(e){const i=this._cachedMeta.vScale,n=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(e,i,n,s){return _p.bind(this)(e,i,n,s)}update(e){const i=this._cachedMeta,n=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(n.points=s,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(n,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,n,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let a=i;a<i+n;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:u.x,f=r?o.yCenter:u.y,m={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(l,a,m,s)}}}L(er,"id","radar"),L(er,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),L(er,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class tr extends wi{getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(e),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[e]||"",value:"("+a+", "+l+")"}}update(e){const i=this._cachedMeta,{data:n=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:r}=ap(i,n,s);if(this._drawStart=o,this._drawCount=r,lp(i)&&(o=0,r=n.length),this.options.showLine){const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}this.updateElements(n,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(u),f=this.includeOptions(s,h),m=r.axis,S=a.axis,{spanGaps:b,segment:v}=this.options,y=ls(b)?b:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||s==="none";let I=i>0&&this.getParsed(i-1);for(let k=i;k<i+n;++k){const A=e[k],T=this.getParsed(k),R=E?A:{},N=qe(T[S]),V=R[m]=r.getPixelForValue(T[m],k),ee=R[S]=o||N?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[S],k);R.skip=isNaN(V)||isNaN(ee)||N,R.stop=k>0&&Math.abs(T[m]-I[m])>y,v&&(R.parsed=T,R.raw=c.data[k]),f&&(R.options=h||this.resolveDataElementOptions(k,A.active?"active":s)),E||this.updateElement(A,k,R,s),I=T}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=e.dataset,s=n.options&&n.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,r)/2}}L(tr,"id","scatter"),L(tr,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),L(tr,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Ox=Object.freeze({__proto__:null,BarController:Jo,BubbleController:Qo,DoughnutController:Nn,LineController:Zo,PolarAreaController:Ws,PieController:Sl,RadarController:er,ScatterController:tr});function xn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class vc{static override(e){Object.assign(vc.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return xn()}parse(){return xn()}format(){return xn()}add(){return xn()}diff(){return xn()}startOf(){return xn()}endOf(){return xn()}}var Lx={_date:vc};function Dx(t,e,i,n){const{controller:s,data:o,_sorted:r}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&r&&o.length){const l=a._reversePixels?ow:Ki;if(n){if(s._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(o,e,i-u),f=l(o,e,i+u);return{lo:h.lo,hi:f.hi}}}}else return l(o,e,i)}return{lo:0,hi:o.length-1}}function mo(t,e,i,n,s){const o=t.getSortedVisibleDatasetMetas(),r=i[e];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:h,hi:f}=Dx(o[a],e,r,s);for(let m=h;m<=f;++m){const S=u[m];S.skip||n(S,c,m)}}}function Bx(t){const e=t.indexOf("x")!==-1,i=t.indexOf("y")!==-1;return function(n,s){const o=e?Math.abs(n.x-s.x):0,r=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Da(t,e,i,n,s){const o=[];return!s&&!t.isPointInArea(e)||mo(t,i,e,function(a,l,c){!s&&!so(a,t.chartArea,0)||a.inRange(e.x,e.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function Fx(t,e,i,n){let s=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:h}=ip(r,{x:e.x,y:e.y});no(h,c,u)&&s.push({element:r,datasetIndex:a,index:l})}return mo(t,i,e,o),s}function Hx(t,e,i,n,s,o){let r=[];const a=Bx(i);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const m=u.inRange(e.x,e.y,s);if(n&&!m)return;const S=u.getCenterPoint(s);if(!(!!o||t.isPointInArea(S))&&!m)return;const v=a(e,S);v<l?(r=[{element:u,datasetIndex:h,index:f}],l=v):v===l&&r.push({element:u,datasetIndex:h,index:f})}return mo(t,i,e,c),r}function Ba(t,e,i,n,s,o){return!o&&!t.isPointInArea(e)?[]:i==="r"&&!n?Fx(t,e,i,s):Hx(t,e,i,n,s,o)}function Sh(t,e,i,n,s){const o=[],r=i==="x"?"inXRange":"inYRange";let a=!1;return mo(t,i,e,(l,c,u)=>{l[r](e[i],s)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),n&&!a?[]:o}var $x={evaluateInteractionItems:mo,modes:{index(t,e,i,n){const s=In(e,t),o=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?Da(t,s,o,n,r):Ba(t,s,o,!1,n,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,i,n){const s=In(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;let a=i.intersect?Da(t,s,o,n,r):Ba(t,s,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,i,n){const s=In(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;return Da(t,s,o,n,r)},nearest(t,e,i,n){const s=In(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;return Ba(t,s,o,i.intersect,n,r)},x(t,e,i,n){const s=In(e,t);return Sh(t,s,"x",i.intersect,n)},y(t,e,i,n){const s=In(e,t);return Sh(t,s,"y",i.intersect,n)}}};const Pp=["left","top","right","bottom"];function bs(t,e){return t.filter(i=>i.pos===e)}function wh(t,e){return t.filter(i=>Pp.indexOf(i.pos)===-1&&i.box.axis===e)}function ys(t,e){return t.sort((i,n)=>{const s=e?n:i,o=e?i:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function Ux(t){const e=[];let i,n,s,o,r,a;for(i=0,n=(t||[]).length;i<n;++i)s=t[i],{position:o,options:{stack:r,stackWeight:a=1}}=s,e.push({index:i,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return e}function zx(t){const e={};for(const i of t){const{stack:n,pos:s,stackWeight:o}=i;if(!n||!Pp.includes(s))continue;const r=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function Gx(t,e){const i=zx(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];const{fullSize:l}=a.box,c=i[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&e.availableWidth,a.height=s):(a.width=n,a.height=u?u*s:l&&e.availableHeight)}return i}function Wx(t){const e=Ux(t),i=ys(e.filter(c=>c.box.fullSize),!0),n=ys(bs(e,"left"),!0),s=ys(bs(e,"right")),o=ys(bs(e,"top"),!0),r=ys(bs(e,"bottom")),a=wh(e,"x"),l=wh(e,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:bs(e,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function xh(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function Cp(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Vx(t,e,i,n){const{pos:s,box:o}=i,r=t.maxPadding;if(!$e(s)){i.size&&(t[s]-=i.size);const h=n[i.stack]||{size:0,count:1};h.size=Math.max(h.size,i.horizontal?o.height:o.width),i.size=h.size/h.count,t[s]+=i.size}o.getPadding&&Cp(r,o.getPadding());const a=Math.max(0,e.outerWidth-xh(r,t,"left","right")),l=Math.max(0,e.outerHeight-xh(r,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:c,other:u}:{same:u,other:c}}function jx(t){const e=t.maxPadding;function i(n){const s=Math.max(e[n]-t[n],0);return t[n]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function Kx(t,e){const i=e.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(e[r],i[r])}),o}return n(t?["left","right"]:["top","bottom"])}function Cs(t,e,i,n){const s=[];let o,r,a,l,c,u;for(o=0,r=t.length,c=0;o<r;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,Kx(a.horizontal,e));const{same:h,other:f}=Vx(e,i,a,n);c|=h&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&Cs(s,e,i,n)||u}function Ro(t,e,i,n,s){t.top=i,t.left=e,t.right=e+n,t.bottom=i+s,t.width=n,t.height=s}function Eh(t,e,i,n){const s=i.padding;let{x:o,y:r}=e;for(const a of t){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;gi(c.start)&&(r=c.start),l.fullSize?Ro(l,s.left,r,i.outerWidth-s.right-s.left,f):Ro(l,e.left+c.placed,r,h,f),c.start=r,c.placed+=h,r=l.bottom}else{const h=e.h*u,f=c.size||l.width;gi(c.start)&&(o=c.start),l.fullSize?Ro(l,o,s.top,f,i.outerHeight-s.bottom-s.top):Ro(l,o,e.top+c.placed,f,h),c.start=o,c.placed+=h,o=l.right}}e.x=o,e.y=r}var Ft={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;i!==-1&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const s=$t(t.options.layout.padding),o=Math.max(e-s.width,0),r=Math.max(i-s.height,0),a=Wx(t.boxes),l=a.vertical,c=a.horizontal;tt(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:i,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),f=Object.assign({},s);Cp(f,$t(n));const m=Object.assign({maxPadding:f,w:o,h:r,x:s.left,y:s.top},s),S=Gx(l.concat(c),h);Cs(a.fullSize,m,h,S),Cs(l,m,h,S),Cs(c,m,h,S)&&Cs(l,m,h,S),jx(m),Eh(a.leftAndTop,m,h,S),m.x+=m.w,m.y+=m.h,Eh(a.rightAndBottom,m,h,S),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},tt(a.chartArea,b=>{const v=b.box;Object.assign(v,t.chartArea),v.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Tp{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,n){}removeEventListener(e,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,n,s){return i=Math.max(0,i||e.width),n=n||e.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(e){return!0}updateConfig(e){}}class qx extends Tp{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ir="$chartjs",Yx={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kh=t=>t===null||t==="";function Xx(t,e){const i=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[ir]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",kh(s)){const o=ah(t,"width");o!==void 0&&(t.width=o)}if(kh(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=ah(t,"height");o!==void 0&&(t.height=o)}return t}const Mp=Qw?{passive:!0}:!1;function Jx(t,e,i){t.addEventListener(e,i,Mp)}function Qx(t,e,i){t.canvas.removeEventListener(e,i,Mp)}function Zx(t,e){const i=Yx[t.type]||t.type,{x:n,y:s}=In(t,e);return{type:i,chart:e,native:t,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Lr(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function eE(t,e,i){const n=t.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Lr(a.addedNodes,n),r=r&&!Lr(a.removedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function tE(t,e,i){const n=t.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Lr(a.removedNodes,n),r=r&&!Lr(a.addedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}const ro=new Map;let Ih=0;function Rp(){const t=window.devicePixelRatio;t!==Ih&&(Ih=t,ro.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function iE(t,e){ro.size||window.addEventListener("resize",Rp),ro.set(t,e)}function nE(t){ro.delete(t),ro.size||window.removeEventListener("resize",Rp)}function sE(t,e,i){const n=t.canvas,s=n&&yc(n);if(!s)return;const o=rp((a,l)=>{const c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(s),iE(t,o),r}function Fa(t,e,i){i&&i.disconnect(),e==="resize"&&nE(t)}function oE(t,e,i){const n=t.canvas,s=rp(o=>{t.ctx!==null&&i(Zx(o,t))},t);return Jx(n,e,s),s}class rE extends Tp{acquireContext(e,i){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Xx(e,i),n):null}releaseContext(e){const i=e.canvas;if(!i[ir])return!1;const n=i[ir].initial;["height","width"].forEach(o=>{const r=n[o];qe(r)?i.removeAttribute(o):i.setAttribute(o,r)});const s=n.style||{};return Object.keys(s).forEach(o=>{i.style[o]=s[o]}),i.width=i.width,delete i[ir],!0}addEventListener(e,i,n){this.removeEventListener(e,i);const s=e.$proxies||(e.$proxies={}),r={attach:eE,detach:tE,resize:sE}[i]||oE;s[i]=r(e,i,n)}removeEventListener(e,i){const n=e.$proxies||(e.$proxies={}),s=n[i];if(!s)return;({attach:Fa,detach:Fa,resize:Fa}[i]||Qx)(e,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,n,s){return Jw(e,i,n,s)}isAttached(e){const i=yc(e);return!!(i&&i.isConnected)}}function aE(t){return!yp()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?qx:rE}var Uo;let Ji=(Uo=class{constructor(){L(this,"active",!1)}tooltipPosition(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}hasValue(){return ls(this.x)&&ls(this.y)}getProps(e,i){const n=this.$animations;if(!i||!n)return this;const s={};return e.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},L(Uo,"defaults",{}),L(Uo,"defaultRoutes"),Uo);function lE(t,e){const i=t.options.ticks,n=cE(t),s=Math.min(i.maxTicksLimit||n,n),o=i.major.enabled?hE(e):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return dE(e,c,o,r/s),c;const u=uE(o,e,s);if(r>0){let h,f;const m=r>1?Math.round((l-a)/(r-1)):null;for(No(e,c,u,qe(m)?0:a-m,a),h=0,f=r-1;h<f;h++)No(e,c,u,o[h],o[h+1]);return No(e,c,u,l,qe(m)?e.length:l+m),c}return No(e,c,u),c}function cE(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),s=t._maxLength/i;return Math.floor(Math.min(n,s))}function uE(t,e,i){const n=fE(t),s=e.length/i;if(!n)return Math.max(s,1);const o=tw(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function hE(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}function dE(t,e,i,n){let s=0,o=i[0],r;for(n=Math.ceil(n),r=0;r<t.length;r++)r===o&&(e.push(t[r]),s++,o=i[s*n])}function No(t,e,i,n,s){const o=Le(n,0),r=Math.min(Le(s,t.length),t.length);let a=0,l,c,u;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),u=o;u<0;)a++,u=Math.round(o+a*i);for(c=Math.max(o,0);c<r;c++)c===u&&(e.push(t[c]),a++,u=Math.round(o+a*i))}function fE(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}const pE=t=>t==="left"?"right":t==="right"?"left":t,Ah=(t,e,i)=>e==="top"||e==="left"?t[e]+i:t[e]-i,Ph=(t,e)=>Math.min(e||t,t);function Ch(t,e){const i=[],n=t.length/e,s=t.length;let o=0;for(;o<s;o+=n)i.push(t[Math.floor(o)]);return i}function gE(t,e,i){const n=t.ticks.length,s=Math.min(e,n-1),o=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-o,r-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<o-a||l>r+a)))return l}function mE(t,e){tt(t,i=>{const n=i.gc,s=n.length/2;let o;if(s>e){for(o=0;o<s;++o)delete i.data[n[o]];n.splice(0,s)}})}function vs(t){return t.drawTicks?t.tickLength:0}function Th(t,e){if(!t.display)return 0;const i=At(t.font,e),n=$t(t.padding);return(ht(t.text)?t.text.length:1)*i.lineHeight+n.height}function _E(t,e){return _n(t,{scale:e,type:"scale"})}function bE(t,e,i){return _n(t,{tick:i,index:e,type:"tick"})}function yE(t,e,i){let n=pc(t);return(i&&e!=="right"||!i&&e==="right")&&(n=pE(n)),n}function vE(t,e,i,n){const{top:s,left:o,bottom:r,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,m,S;const b=r-s,v=a-o;if(t.isHorizontal()){if(m=Nt(n,o,a),$e(i)){const y=Object.keys(i)[0],E=i[y];S=u[y].getPixelForValue(E)+b-e}else i==="center"?S=(c.bottom+c.top)/2+b-e:S=Ah(t,i,e);f=a-o}else{if($e(i)){const y=Object.keys(i)[0],E=i[y];m=u[y].getPixelForValue(E)-v+e}else i==="center"?m=(c.left+c.right)/2-v+e:m=Ah(t,i,e);S=Nt(n,r,s),h=i==="left"?-vt:vt}return{titleX:m,titleY:S,maxWidth:f,rotation:h}}class zn extends Ji{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return e=Zt(e,Number.POSITIVE_INFINITY),i=Zt(i,Number.NEGATIVE_INFINITY),n=Zt(n,Number.POSITIVE_INFINITY),s=Zt(s,Number.NEGATIVE_INFINITY),{min:Zt(e,n),max:Zt(i,s),minDefined:yt(e),maxDefined:yt(i)}}getMinMax(e){let{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,e),s||(i=Math.min(i,r.min)),o||(n=Math.max(n,r.max));return i=o&&i>n?n:i,n=s&&i>n?i:n,{min:Zt(i,Zt(n,i)),max:Zt(n,Zt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){at(this.options.beforeUpdate,[this])}update(e,i,n){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Cw(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ch(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=lE(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,e=!e),this._startPixel=i,this._endPixel=n,this._reversePixels=e,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){at(this.options.afterUpdate,[this])}beforeSetDimensions(){at(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){at(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),at(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){at(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const i=this.options.ticks;let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n],o.label=at(i.callback,[o.value,n,e],this)}afterTickToLabelConversion(){at(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){at(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,i=e.ticks,n=Ph(this.ticks.length,e.ticks.maxTicksLimit),s=i.minRotation||0,o=i.maxRotation;let r=s,a,l,c;if(!this._isVisible()||!i.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Tt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/n:m/(n-1),h+6>a&&(a=m/(n-(e.offset?.5:1)),l=this.maxHeight-vs(e.grid)-i.padding-Th(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),r=dc(Math.min(Math.asin(Tt((u.highest.height+6)/a,-1,1)),Math.asin(Tt(l/c,-1,1))-Math.asin(Tt(f/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){at(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){at(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Th(s,i.options.font);if(a?(e.width=this.maxWidth,e.height=vs(o)+l):(e.height=this.maxHeight,e.width=vs(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,S=vi(this.labelRotation),b=Math.cos(S),v=Math.sin(S);if(a){const y=n.mirror?0:v*h.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+y+m)}else{const y=n.mirror?0:b*h.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+y+m)}this._calculatePadding(c,u,v,b)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,n,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=s*e.width,m=n*i.height):(f=n*e.height,m=s*i.width):o==="start"?m=i.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,m=i.width/2),this.paddingLeft=Math.max((f-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+r)*this.width/(this.width-h),0)}else{let u=i.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=i.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){at(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,n;for(i=0,n=e.length;i<n;i++)qe(e[i].label)&&(e.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=Ch(n,i)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,i,n){const{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(i/Ph(i,n));let c=0,u=0,h,f,m,S,b,v,y,E,I,k,A;for(h=0;h<i;h+=l){if(S=e[h].label,b=this._resolveTickFontOptions(h),s.font=v=b.string,y=o[v]=o[v]||{data:{},gc:[]},E=b.lineHeight,I=k=0,!qe(S)&&!ht(S))I=Nr(s,y.data,y.gc,I,S),k=E;else if(ht(S))for(f=0,m=S.length;f<m;++f)A=S[f],!qe(A)&&!ht(A)&&(I=Nr(s,y.data,y.gc,I,A),k+=E);r.push(I),a.push(k),c=Math.max(I,c),u=Math.max(k,u)}mE(o,i);const T=r.indexOf(c),R=a.indexOf(u),N=V=>({width:r[V]||0,height:a[V]||0});return{first:N(0),last:N(i-1),widest:N(T),highest:N(R),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const i=this._startPixel+e*this._length;return sw(this._alignToPixels?wn(this.chart,i,0):i)}getDecimalForPixel(e){const i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){const i=this.ticks||[];if(e>=0&&e<i.length){const n=i[e];return n.$context||(n.$context=bE(this.getContext(),e,n))}return this.$context||(this.$context=_E(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,i=vi(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const i=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=vs(o),m=[],S=a.setContext(this.getContext()),b=S.display?S.width:0,v=b/2,y=function(ge){return wn(n,ge,b)};let E,I,k,A,T,R,N,V,ee,se,Q,ae;if(r==="top")E=y(this.bottom),R=this.bottom-f,V=E-v,se=y(e.top)+v,ae=e.bottom;else if(r==="bottom")E=y(this.top),se=e.top,ae=y(e.bottom)-v,R=E+v,V=this.top+f;else if(r==="left")E=y(this.right),T=this.right-f,N=E-v,ee=y(e.left)+v,Q=e.right;else if(r==="right")E=y(this.left),ee=e.left,Q=y(e.right)-v,T=E+v,N=this.left+f;else if(i==="x"){if(r==="center")E=y((e.top+e.bottom)/2+.5);else if($e(r)){const ge=Object.keys(r)[0],ne=r[ge];E=y(this.chart.scales[ge].getPixelForValue(ne))}se=e.top,ae=e.bottom,R=E+v,V=R+f}else if(i==="y"){if(r==="center")E=y((e.left+e.right)/2);else if($e(r)){const ge=Object.keys(r)[0],ne=r[ge];E=y(this.chart.scales[ge].getPixelForValue(ne))}T=E-v,N=T-f,ee=e.left,Q=e.right}const X=Le(s.ticks.maxTicksLimit,h),he=Math.max(1,Math.ceil(h/X));for(I=0;I<h;I+=he){const ge=this.getContext(I),ne=o.setContext(ge),ie=a.setContext(ge),ce=ne.lineWidth,Ne=ne.color,Me=ie.dash||[],xe=ie.dashOffset,Ze=ne.tickWidth,nt=ne.tickColor,mt=ne.tickBorderDash||[],et=ne.tickBorderDashOffset;k=gE(this,I,l),k!==void 0&&(A=wn(n,k,ce),c?T=N=ee=Q=A:R=V=se=ae=A,m.push({tx1:T,ty1:R,tx2:N,ty2:V,x1:ee,y1:se,x2:Q,y2:ae,width:ce,color:Ne,borderDash:Me,borderDashOffset:xe,tickWidth:Ze,tickColor:nt,tickBorderDash:mt,tickBorderDashOffset:et}))}return this._ticksLength=h,this._borderValue=E,m}_computeLabelItems(e){const i=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=o,f=vs(n.grid),m=f+u,S=h?-u:m,b=-vi(this.labelRotation),v=[];let y,E,I,k,A,T,R,N,V,ee,se,Q,ae="middle";if(s==="top")T=this.bottom-S,R=this._getXAxisLabelAlignment();else if(s==="bottom")T=this.top+S,R=this._getXAxisLabelAlignment();else if(s==="left"){const he=this._getYAxisLabelAlignment(f);R=he.textAlign,A=he.x}else if(s==="right"){const he=this._getYAxisLabelAlignment(f);R=he.textAlign,A=he.x}else if(i==="x"){if(s==="center")T=(e.top+e.bottom)/2+m;else if($e(s)){const he=Object.keys(s)[0],ge=s[he];T=this.chart.scales[he].getPixelForValue(ge)+m}R=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")A=(e.left+e.right)/2-m;else if($e(s)){const he=Object.keys(s)[0],ge=s[he];A=this.chart.scales[he].getPixelForValue(ge)}R=this._getYAxisLabelAlignment(f).textAlign}i==="y"&&(l==="start"?ae="top":l==="end"&&(ae="bottom"));const X=this._getLabelSizes();for(y=0,E=a.length;y<E;++y){I=a[y],k=I.label;const he=o.setContext(this.getContext(y));N=this.getPixelForTick(y)+o.labelOffset,V=this._resolveTickFontOptions(y),ee=V.lineHeight,se=ht(k)?k.length:1;const ge=se/2,ne=he.color,ie=he.textStrokeColor,ce=he.textStrokeWidth;let Ne=R;r?(A=N,R==="inner"&&(y===E-1?Ne=this.options.reverse?"left":"right":y===0?Ne=this.options.reverse?"right":"left":Ne="center"),s==="top"?c==="near"||b!==0?Q=-se*ee+ee/2:c==="center"?Q=-X.highest.height/2-ge*ee+ee:Q=-X.highest.height+ee/2:c==="near"||b!==0?Q=ee/2:c==="center"?Q=X.highest.height/2-ge*ee:Q=X.highest.height-se*ee,h&&(Q*=-1),b!==0&&!he.showLabelBackdrop&&(A+=ee/2*Math.sin(b))):(T=N,Q=(1-se)*ee/2);let Me;if(he.showLabelBackdrop){const xe=$t(he.backdropPadding),Ze=X.heights[y],nt=X.widths[y];let mt=Q-xe.top,et=0-xe.left;switch(ae){case"middle":mt-=Ze/2;break;case"bottom":mt-=Ze;break}switch(R){case"center":et-=nt/2;break;case"right":et-=nt;break}Me={left:et,top:mt,width:nt+xe.width,height:Ze+xe.height,color:he.backdropColor}}v.push({label:k,font:V,textOffset:Q,options:{rotation:b,color:ne,strokeColor:ie,strokeWidth:ce,textAlign:Ne,textBaseline:ae,translation:[A,T],backdrop:Me}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:i}=this.options;if(-vi(this.labelRotation))return e==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:i,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=e+o,l=r.widest.width;let c,u;return i==="left"?s?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):i==="right"?s?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:i},left:n,top:s,width:o,height:r}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(n,s,o,r),e.restore())}getLineWidthForValue(e){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(o=0,r=s.length;o<r;++o){const l=s[o];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:i,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=wn(e,this.left,r)-r/2,u=wn(e,this.right,a)+a/2,h=f=l):(h=wn(e,this.top,r)-r/2,f=wn(e,this.bottom,a)+a/2,c=u=l),i.save(),i.lineWidth=o.width,i.strokeStyle=o.color,i.beginPath(),i.moveTo(c,h),i.lineTo(u,f),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&ta(n,s);const o=this.getLabelItems(e);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;Un(n,c,0,u,l,a)}s&&ia(n)}drawTitle(){const{ctx:e,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;const o=At(n.font),r=$t(n.padding),a=n.align;let l=o.lineHeight/2;i==="bottom"||i==="center"||$e(i)?(l+=r.bottom,ht(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=vE(this,l,i,a);Un(e,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:f,textAlign:yE(a,i,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,i=e.ticks&&e.ticks.z||0,n=Le(e.grid&&e.grid.z,-1),s=Le(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==zn.prototype.draw?[{z:i,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,r;for(o=0,r=i.length;o<r;++o){const a=i[o];a[n]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const i=this.options.ticks.setContext(this.getContext(e));return At(i.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Oo{constructor(e,i,n){this.type=e,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const i=Object.getPrototypeOf(e);let n;xE(i)&&(n=this.register(i));const s=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,SE(e,r,n),this.override&&St.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const i=this.items,n=e.id,s=this.scope;n in i&&delete i[n],s&&n in St[s]&&(delete St[s][n],this.override&&delete $n[n])}}function SE(t,e,i){const n=io(Object.create(null),[i?St.get(i):{},St.get(e),t.defaults]);St.set(e,n),t.defaultRoutes&&wE(e,t.defaultRoutes),t.descriptors&&St.describe(e,t.descriptors)}function wE(t,e){Object.keys(e).forEach(i=>{const n=i.split("."),s=n.pop(),o=[t].concat(n).join("."),r=e[i].split("."),a=r.pop(),l=r.join(".");St.route(o,s,l,a)})}function xE(t){return"id"in t&&"defaults"in t}class EE{constructor(){this.controllers=new Oo(wi,"datasets",!0),this.elements=new Oo(Ji,"elements"),this.plugins=new Oo(Object,"plugins"),this.scales=new Oo(zn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,n){[...i].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):tt(s,r=>{const a=n||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,i,n){const s=hc(e);at(n["before"+s],[],n),i[e](n),at(n["after"+s],[],n)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(e))return n}return this.plugins}_get(e,i,n){const s=i.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var Ai=new EE;class kE{constructor(){this._init=[]}notify(e,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(o,e,i,n);return i==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,i,n,s){s=s||{};for(const o of e){const r=o.plugin,a=r[n],l=[i,s,o.options];if(at(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){qe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){const n=e&&e.config,s=Le(n.options&&n.options.plugins,{}),o=IE(n);return s===!1&&!i?[]:PE(e,o,s,i)}_notifyStateChanges(e){const i=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),e,"stop"),this._notify(s(n,i),e,"start")}}function IE(t){const e={},i=[],n=Object.keys(Ai.plugins.items);for(let o=0;o<n.length;o++)i.push(Ai.getPlugin(n[o]));const s=t.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];i.indexOf(r)===-1&&(i.push(r),e[r.id]=!0)}return{plugins:i,localIds:e}}function AE(t,e){return!e&&t===!1?null:t===!0?{}:t}function PE(t,{plugins:e,localIds:i},n,s){const o=[],r=t.getContext();for(const a of e){const l=a.id,c=AE(n[l],s);c!==null&&o.push({plugin:a,options:CE(t.config,{plugin:a,local:i[l]},c,r)})}return o}function CE(t,{plugin:e,local:i},n,s){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(n,o);return i&&e.defaults&&r.push(e.defaults),t.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function wl(t,e){const i=St.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function TE(t,e){let i=t;return t==="_index_"?i=e:t==="_value_"&&(i=e==="x"?"y":"x"),i}function ME(t,e){return t===e?"_index_":"_value_"}function RE(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Dr(t,e){if(t==="x"||t==="y"||t==="r"||(t=e.axis||RE(e.position)||t.length>1&&Dr(t[0].toLowerCase(),e),t))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function NE(t,e){const i=$n[t.type]||{scales:{}},n=e.scales||{},s=wl(t.type,e),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!$e(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=Dr(r,a),c=ME(l,s),u=i.scales||{};o[r]=$s(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||wl(a,e),u=($n[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=TE(h,l),m=r[f+"AxisID"]||f;o[m]=o[m]||Object.create(null),$s(o[m],[{axis:f},n[m],u[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];$s(a,[St.scales[a.type],St.scale])}),o}function Np(t){const e=t.options||(t.options={});e.plugins=Le(e.plugins,{}),e.scales=NE(t,e)}function Op(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function OE(t){return t=t||{},t.data=Op(t.data),Np(t),t}const Mh=new Map,Lp=new Set;function Lo(t,e){let i=Mh.get(t);return i||(i=e(),Mh.set(t,i),Lp.add(i)),i}const Ss=(t,e,i)=>{const n=fn(e,i);n!==void 0&&t.add(n)};class LE{constructor(e){this._config=OE(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Op(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Np(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Lo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return Lo(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return Lo(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){const i=e.id,n=this.type;return Lo(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){const n=this._scopeCache;let s=n.get(e);return(!s||i)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,i,n){const{options:s,type:o}=this,r=this._cachedScopes(e,n),a=r.get(i);if(a)return a;const l=new Set;i.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ss(l,e,h))),u.forEach(h=>Ss(l,s,h)),u.forEach(h=>Ss(l,$n[o]||{},h)),u.forEach(h=>Ss(l,St,h)),u.forEach(h=>Ss(l,yl,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Lp.has(i)&&r.set(i,c),c}chartOptionScopes(){const{options:e,type:i}=this;return[e,$n[i]||{},St.datasets[i]||{},{type:i},St,yl]}resolveNamedOptions(e,i,n,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Rh(this._resolverCache,e,s);let l=r;if(BE(r,i)){o.$shared=!1,n=pn(n)?n():n;const c=this.createResolver(e,n,a);l=cs(r,n,c)}for(const c of i)o[c]=l[c];return o}createResolver(e,i,n=[""],s){const{resolver:o}=Rh(this._resolverCache,e,n);return $e(i)?cs(o,i,void 0,s):o}}function Rh(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=i.join();let o=n.get(s);return o||(o={resolver:mc(e,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}const DE=t=>$e(t)&&Object.getOwnPropertyNames(t).reduce((e,i)=>e||pn(t[i]),!1);function BE(t,e){const{isScriptable:i,isIndexable:n}=fp(t);for(const s of e){const o=i(s),r=n(s),a=(r||o)&&t[s];if(o&&(pn(a)||DE(a))||r&&ht(a))return!0}return!1}var FE="4.2.1";const HE=["top","bottom","left","right","chartArea"];function Nh(t,e){return t==="top"||t==="bottom"||HE.indexOf(t)===-1&&e==="x"}function Oh(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function Lh(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),at(i&&i.onComplete,[t],e)}function $E(t){const e=t.chart,i=e.options.animation;at(i&&i.onProgress,[t],e)}function Dp(t){return yp()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const nr={},Dh=t=>{const e=Dp(t);return Object.values(nr).filter(i=>i.canvas===e).pop()};function UE(t,e,i){const n=Object.keys(t);for(const s of n){const o=+s;if(o>=e){const r=t[s];delete t[s],(i>0||o>e)&&(t[o+i]=r)}}}function zE(t,e,i,n){return!i||t.type==="mouseout"?null:n?e:t}function GE(t){const{xScale:e,yScale:i}=t;if(e&&i)return{left:e.left,right:e.right,top:i.top,bottom:i.bottom}}class Gi{static register(...e){Ai.add(...e),Bh()}static unregister(...e){Ai.remove(...e),Bh()}constructor(e,i){const n=this.config=new LE(i),s=Dp(e),o=Dh(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||aE(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=jS(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new kE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lw(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],nr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Hi.listen(this,"complete",Lh),Hi.listen(this,"progress",$E),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:n,height:s,_aspectRatio:o}=this;return qe(e)?i&&o?o:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ai}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nh(this.canvas,this.ctx),this}stop(){return Hi.stop(this),this}resize(e,i){Hi.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,i,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,rh(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),at(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};tt(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,i=e.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];i&&(o=o.concat(Object.keys(i).map(r=>{const a=i[r],l=Dr(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),tt(o,r=>{const a=r.options,l=a.id,c=Dr(l,a),u=Le(a.type,r.dtype);(a.position===void 0||Nh(a.position,c)!==Nh(r.dposition))&&(a.position=r.dposition),s[l]=!0;let h=null;if(l in n&&n[l].type===u)h=n[l];else{const f=Ai.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,e)}),tt(s,(r,a)=>{r||delete n[a]}),tt(n,r=>{Ft.configure(this,r,r.options),Ft.addBox(this,r)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,n=e.length;if(e.sort((s,o)=>s.index-o.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);e.splice(i,n-i)}this._sortedMetasets=e.slice(0).sort(Oh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((n,s)=>{i.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){const o=i[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||wl(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=Ai.getController(a),{datasetElementType:c,dataElementType:u}=St.datasets[a];Object.assign(l,{dataElementType:Ai.getElement(u),datasetElementType:c&&Ai.getElement(c)}),r.controller=new l(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){tt(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||tt(o,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Oh("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){tt(this.scales,e=>{Ft.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!qu(i,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of i){const r=n==="_removeElements"?-o:o;UE(e,s,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=o=>new Set(e.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<i;o++)if(!qu(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ft.update(this,this.width,this.height,e);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],tt(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,pn(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Hi.has(this)?this.attached&&!Hi.running(this)&&Hi.start(this):(this.draw(),Lh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resize(n,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,n=[];let s,o;for(s=0,o=i.length;s<o;++s){const r=i[s];(!e||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,n=e._clip,s=!n.disabled,o=GE(e)||this.chartArea,r={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&ta(i,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),e.controller.draw(),s&&ia(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return so(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,n,s){const o=$x.modes[i];return typeof o=="function"?o(this,e,n,s):[]}getDatasetMeta(e){const i=this.data.datasets[e],n=this._metasets;let s=n.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=_n(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(e,i){const n=this.getDatasetMeta(e);n.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,n){const s=n?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,s);gi(i)?(o.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Hi.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),nh(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete nr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,n=(o,r)=>{i.addEventListener(this,o,r),e[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};tt(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(i.removeEventListener(this,l,c),delete e[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():r()}unbindEvents(){tt(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},tt(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,n){const s=n?"set":"remove";let o,r,a,l;for(i==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],n=e.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Tr(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(e,i,n){return this._plugins.notify(this,e,i,n)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,n){const s=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(i,e),a=n?e:o(e,i);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,i){const n={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(e,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(e,i,n){const{_active:s=[],options:o}=this,r=i,a=this._getActiveElements(e,s,n,r),l=QS(e),c=zE(e,this._lastEvent,n,l);n&&(this._lastEvent=null,at(o.onHover,[e,a,this],this),l&&at(o.onClick,[e,a,this],this));const u=!Tr(a,s);return(u||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,u}_getActiveElements(e,i,n,s){if(e.type==="mouseout")return[];if(!n)return i;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}L(Gi,"defaults",St),L(Gi,"instances",nr),L(Gi,"overrides",$n),L(Gi,"registry",Ai),L(Gi,"version",FE),L(Gi,"getChart",Dh);function Bh(){return tt(Gi.instances,t=>t._plugins.invalidate())}function WE(t,e,i){const{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(o,r,a,n-c,i+c),l>s?(c=s/l,t.arc(o,r,l,i+c,n-c,!0)):t.arc(o,r,s,i+vt,n-vt),t.closePath(),t.clip()}function VE(t){return gc(t,["outerStart","outerEnd","innerStart","innerEnd"])}function jE(t,e,i,n){const s=VE(t.options.borderRadius),o=(i-e)/2,r=Math.min(o,n*e/2),a=l=>{const c=(i-Math.min(o,l))*n/2;return Tt(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Tt(s.innerStart,0,r),innerEnd:Tt(s.innerEnd,0,r)}}function Vn(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function Br(t,e,i,n,s,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+n+i-c,0),f=u>0?u+n+i+c:0;let m=0;const S=s-l;if(n){const he=u>0?u-n:0,ge=h>0?h-n:0,ne=(he+ge)/2,ie=ne!==0?S*ne/(ne+n):S;m=(S-ie)/2}const b=Math.max(.001,S*h-i/gt)/h,v=(S-b)/2,y=l+v+m,E=s-v-m,{outerStart:I,outerEnd:k,innerStart:A,innerEnd:T}=jE(e,f,h,E-y),R=h-I,N=h-k,V=y+I/R,ee=E-k/N,se=f+A,Q=f+T,ae=y+A/se,X=E-T/Q;if(t.beginPath(),o){const he=(V+ee)/2;if(t.arc(r,a,h,V,he),t.arc(r,a,h,he,ee),k>0){const ce=Vn(N,ee,r,a);t.arc(ce.x,ce.y,k,ee,E+vt)}const ge=Vn(Q,E,r,a);if(t.lineTo(ge.x,ge.y),T>0){const ce=Vn(Q,X,r,a);t.arc(ce.x,ce.y,T,E+vt,X+Math.PI)}const ne=(E-T/f+(y+A/f))/2;if(t.arc(r,a,f,E-T/f,ne,!0),t.arc(r,a,f,ne,y+A/f,!0),A>0){const ce=Vn(se,ae,r,a);t.arc(ce.x,ce.y,A,ae+Math.PI,y-vt)}const ie=Vn(R,y,r,a);if(t.lineTo(ie.x,ie.y),I>0){const ce=Vn(R,V,r,a);t.arc(ce.x,ce.y,I,y-vt,V)}}else{t.moveTo(r,a);const he=Math.cos(V)*h+r,ge=Math.sin(V)*h+a;t.lineTo(he,ge);const ne=Math.cos(ee)*h+r,ie=Math.sin(ee)*h+a;t.lineTo(ne,ie)}t.closePath()}function KE(t,e,i,n,s){const{fullCircles:o,startAngle:r,circumference:a}=e;let l=e.endAngle;if(o){Br(t,e,i,n,l,s);for(let c=0;c<o;++c)t.fill();isNaN(a)||(l=r+(a%dt||dt))}return Br(t,e,i,n,l,s),t.fill(),l}function qE(t,e,i,n,s){const{fullCircles:o,startAngle:r,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=l.borderAlign==="inner";if(!c)return;h?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let f=e.endAngle;if(o){Br(t,e,i,n,f,s);for(let m=0;m<o;++m)t.stroke();isNaN(a)||(f=r+(a%dt||dt))}h&&WE(t,e,f),o||(Br(t,e,i,n,f,s),t.stroke())}class sr extends Ji{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,n){const s=this.getProps(["x","y"],n),{angle:o,distance:r}=ip(s,{x:e,y:i}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=this.options.spacing/2,S=Le(h,l-a)>=dt||no(o,a,l),b=ji(r,c+f,u+f);return S&&b}getCenterPoint(e){const{x:i,y:n,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(s+o)/2,h=(r+a+c+l)/2;return{x:i+Math.cos(u)*h,y:n+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:n}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,r=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>dt?Math.floor(n/dt):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(gt,n||0)),c=s*l;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,KE(e,this,c,o,r),qE(e,this,c,o,r),e.restore()}}L(sr,"id","arc"),L(sr,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),L(sr,"defaultRoutes",{backgroundColor:"backgroundColor"});function Bp(t,e,i=e){t.lineCap=Le(i.borderCapStyle,e.borderCapStyle),t.setLineDash(Le(i.borderDash,e.borderDash)),t.lineDashOffset=Le(i.borderDashOffset,e.borderDashOffset),t.lineJoin=Le(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Le(i.borderWidth,e.borderWidth),t.strokeStyle=Le(i.borderColor,e.borderColor)}function YE(t,e,i){t.lineTo(i.x,i.y)}function XE(t){return t.stepped?vw:t.tension||t.cubicInterpolationMode==="monotone"?Sw:YE}function Fp(t,e,i={}){const n=t.length,{start:s=0,end:o=n-1}=i,{start:r,end:a}=e,l=Math.max(s,r),c=Math.min(o,a),u=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!u?n+c-l:c-l}}function JE(t,e,i,n){const{points:s,options:o}=e,{count:r,start:a,loop:l,ilen:c}=Fp(s,i,n),u=XE(o);let{move:h=!0,reverse:f}=n||{},m,S,b;for(m=0;m<=c;++m)S=s[(a+(f?c-m:m))%r],!S.skip&&(h?(t.moveTo(S.x,S.y),h=!1):u(t,b,S,f,o.stepped),b=S);return l&&(S=s[(a+(f?c:0))%r],u(t,b,S,f,o.stepped)),!!l}function QE(t,e,i,n){const s=e.points,{count:o,start:r,ilen:a}=Fp(s,i,n),{move:l=!0,reverse:c}=n||{};let u=0,h=0,f,m,S,b,v,y;const E=k=>(r+(c?a-k:k))%o,I=()=>{b!==v&&(t.lineTo(u,v),t.lineTo(u,b),t.lineTo(u,y))};for(l&&(m=s[E(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=s[E(f)],m.skip)continue;const k=m.x,A=m.y,T=k|0;T===S?(A<b?b=A:A>v&&(v=A),u=(h*u+k)/++h):(I(),t.lineTo(k,A),S=T,h=0,b=v=A),y=A}I()}function xl(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!i?QE:JE}function ZE(t){return t.stepped?Zw:t.tension||t.cubicInterpolationMode==="monotone"?ex:An}function ek(t,e,i,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,i,n)&&s.closePath()),Bp(t,e.options),t.stroke(s)}function tk(t,e,i,n){const{segments:s,options:o}=e,r=xl(e);for(const a of s)Bp(t,o,a.style),t.beginPath(),r(t,e,a,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}const ik=typeof Path2D=="function";function nk(t,e,i,n){ik&&!e.options.segment?ek(t,e,i,n):tk(t,e,i,n)}class sn extends Ji{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;Vw(this._points,n,e,s,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=rx(this,this.options.segment))}first(){const e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){const e=this.segments,i=this.points,n=e.length;return n&&i[e[n-1].end]}interpolate(e,i){const n=this.options,s=e[i],o=this.points,r=Ep(this,{property:i,start:s,end:s});if(!r.length)return;const a=[],l=ZE(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:h,end:f}=r[c],m=o[h],S=o[f];if(m===S){a.push(m);continue}const b=Math.abs((s-m[i])/(S[i]-m[i])),v=l(m,S,b,n.stepped);v[i]=e[i],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,i,n){return xl(this)(e,this,i,n)}path(e,i,n){const s=this.segments,o=xl(this);let r=this._loop;i=i||0,n=n||this.points.length-i;for(const a of s)r&=o(e,this,a,{start:i,end:i+n-1});return!!r}draw(e,i,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),nk(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}L(sn,"id","line"),L(sn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),L(sn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),L(sn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Fh(t,e,i,n){const s=t.options,{[i]:o}=t.getProps([i],n);return Math.abs(e-o)<s.radius+s.hitRadius}class or extends Ji{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,n){const s=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(e-o,2)+Math.pow(i-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return Fh(this,e,"x",i)}inYRange(e,i){return Fh(this,e,"y",i)}getCenterPoint(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const n=i&&e.borderWidth||0;return(i+n)*2}draw(e,i){const n=this.options;this.skip||n.radius<.1||!so(this,i,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,vl(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}L(or,"id","point"),L(or,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),L(or,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Hp(t,e){const{x:i,y:n,base:s,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=r/2,a=Math.min(i,s),l=Math.max(i,s),c=n-h,u=n+h):(h=o/2,a=i-h,l=i+h,c=Math.min(n,s),u=Math.max(n,s)),{left:a,top:c,right:l,bottom:u}}function on(t,e,i,n){return t?0:Tt(e,i,n)}function sk(t,e,i){const n=t.options.borderWidth,s=t.borderSkipped,o=dp(n);return{t:on(s.top,o.top,0,i),r:on(s.right,o.right,0,e),b:on(s.bottom,o.bottom,0,i),l:on(s.left,o.left,0,e)}}function ok(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,o=Bn(s),r=Math.min(e,i),a=t.borderSkipped,l=n||$e(s);return{topLeft:on(!l||a.top||a.left,o.topLeft,0,r),topRight:on(!l||a.top||a.right,o.topRight,0,r),bottomLeft:on(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:on(!l||a.bottom||a.right,o.bottomRight,0,r)}}function rk(t){const e=Hp(t),i=e.right-e.left,n=e.bottom-e.top,s=sk(t,i/2,n/2),o=ok(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Ha(t,e,i,n){const s=e===null,o=i===null,a=t&&!(s&&o)&&Hp(t,n);return a&&(s||ji(e,a.left,a.right))&&(o||ji(i,a.top,a.bottom))}function ak(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function lk(t,e){t.rect(e.x,e.y,e.w,e.h)}function $a(t,e,i={}){const n=t.x!==i.x?-e:0,s=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-n,r=(t.y+t.h!==i.y+i.h?e:0)-s;return{x:t.x+n,y:t.y+s,w:t.w+o,h:t.h+r,radius:t.radius}}class rr extends Ji{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=rk(this),a=ak(r.radius)?oo:lk;e.save(),(r.w!==o.w||r.h!==o.h)&&(e.beginPath(),a(e,$a(r,i,o)),e.clip(),a(e,$a(o,-i,r)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,$a(o,i)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,i,n){return Ha(this,e,i,n)}inXRange(e,i){return Ha(this,e,null,i)}inYRange(e,i){return Ha(this,null,e,i)}getCenterPoint(e){const{x:i,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(i+s)/2:i,y:o?n:(n+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}L(rr,"id","bar"),L(rr,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),L(rr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var ck=Object.freeze({__proto__:null,ArcElement:sr,LineElement:sn,PointElement:or,BarElement:rr});const El=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Hh=El.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function $p(t){return El[t%El.length]}function Up(t){return Hh[t%Hh.length]}function uk(t,e){return t.borderColor=$p(e),t.backgroundColor=Up(e),++e}function hk(t,e){return t.backgroundColor=t.data.map(()=>$p(e++)),e}function dk(t,e){return t.backgroundColor=t.data.map(()=>Up(e++)),e}function fk(t){let e=0;return(i,n)=>{const s=t.getDatasetMeta(n).controller;s instanceof Nn?e=hk(i,e):s instanceof Ws?e=dk(i,e):s&&(e=uk(i,e))}}function $h(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function pk(t){return t&&(t.borderColor||t.backgroundColor)}var gk={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;const{data:{datasets:n},options:s}=t.config,{elements:o}=s;if(!i.forceOverride&&($h(n)||pk(s)||o&&$h(o)))return;const r=fk(t);n.forEach(r)}};function mk(t,e,i,n,s){const o=s.samples||n;if(o>=i)return t.slice(e,e+i);const r=[],a=(i-2)/(o-2);let l=0;const c=e+i-1;let u=e,h,f,m,S,b;for(r[l++]=t[u],h=0;h<o-2;h++){let v=0,y=0,E;const I=Math.floor((h+1)*a)+1+e,k=Math.min(Math.floor((h+2)*a)+1,i)+e,A=k-I;for(E=I;E<k;E++)v+=t[E].x,y+=t[E].y;v/=A,y/=A;const T=Math.floor(h*a)+1+e,R=Math.min(Math.floor((h+1)*a)+1,i)+e,{x:N,y:V}=t[u];for(m=S=-1,E=T;E<R;E++)S=.5*Math.abs((N-v)*(t[E].y-V)-(N-t[E].x)*(y-V)),S>m&&(m=S,f=t[E],b=E);r[l++]=f,u=b}return r[l++]=t[c],r}function _k(t,e,i,n){let s=0,o=0,r,a,l,c,u,h,f,m,S,b;const v=[],y=e+i-1,E=t[e].x,k=t[y].x-E;for(r=e;r<e+i;++r){a=t[r],l=(a.x-E)/k*n,c=a.y;const A=l|0;if(A===u)c<S?(S=c,h=r):c>b&&(b=c,f=r),s=(o*s+a.x)/++o;else{const T=r-1;if(!qe(h)&&!qe(f)){const R=Math.min(h,f),N=Math.max(h,f);R!==m&&R!==T&&v.push({...t[R],x:s}),N!==m&&N!==T&&v.push({...t[N],x:s})}r>0&&T!==m&&v.push(t[T]),v.push(a),u=A,o=0,S=b=c,h=f=m=r}}return v}function zp(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Uh(t){t.data.datasets.forEach(e=>{zp(e)})}function bk(t,e){const i=e.length;let n=0,s;const{iScale:o}=t,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=Tt(Ki(e,o.axis,r).lo,0,i-1)),c?s=Tt(Ki(e,o.axis,a).hi+1,n,i)-n:s=i-n,{start:n,count:s}}var yk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled){Uh(t);return}const n=t.width;t.data.datasets.forEach((s,o)=>{const{_data:r,indexAxis:a}=s,l=t.getDatasetMeta(o),c=r||s.data;if(Ps([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:f}=bk(l,c);const m=i.threshold||4*n;if(f<=m){zp(s);return}qe(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let S;switch(i.algorithm){case"lttb":S=mk(c,h,f,n,i);break;case"min-max":S=_k(c,h,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=S})},destroy(t){Uh(t)}};function vk(t,e,i){const n=t.segments,s=t.points,o=e.points,r=[];for(const a of n){let{start:l,end:c}=a;c=Sc(l,c,s);const u=kl(i,s[l],s[c],a.loop);if(!e.segments){r.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=Ep(e,u);for(const f of h){const m=kl(i,o[f.start],o[f.end],f.loop),S=xp(a,s,m);for(const b of S)r.push({source:b,target:f,start:{[i]:zh(u,m,"start",Math.max)},end:{[i]:zh(u,m,"end",Math.min)}})}}return r}function kl(t,e,i,n){if(n)return;let s=e[t],o=i[t];return t==="angle"&&(s=ii(s),o=ii(o)),{property:t,start:s,end:o}}function Sk(t,e){const{x:i=null,y:n=null}=t||{},s=e.points,o=[];return e.segments.forEach(({start:r,end:a})=>{a=Sc(r,a,s);const l=s[r],c=s[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):i!==null&&(o.push({x:i,y:l.y}),o.push({x:i,y:c.y}))}),o}function Sc(t,e,i){for(;e>t;e--){const n=i[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function zh(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function Gp(t,e){let i=[],n=!1;return ht(t)?(n=!0,i=t):i=Sk(t,e),i.length?new sn({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Gh(t){return t&&t.fill!==!1}function wk(t,e,i){let s=t[e].fill;const o=[e];let r;if(!i)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!yt(s))return s;if(r=t[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function xk(t,e,i){const n=Ak(t);if($e(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return yt(s)&&Math.floor(s)===s?Ek(n[0],e,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Ek(t,e,i,n){return(t==="-"||t==="+")&&(i=e+i),i===e||i<0||i>=n?!1:i}function kk(t,e){let i=null;return t==="start"?i=e.bottom:t==="end"?i=e.top:$e(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}function Ik(t,e,i){let n;return t==="start"?n=i:t==="end"?n=e.options.reverse?e.min:e.max:$e(t)?n=t.value:n=e.getBaseValue(),n}function Ak(t){const e=t.options,i=e.fill;let n=Le(i&&i.target,i);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Pk(t){const{scale:e,index:i,line:n}=t,s=[],o=n.segments,r=n.points,a=Ck(e,i);a.push(Gp({x:null,y:e.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)Tk(s,r[u],a)}return new sn({points:s,options:{}})}function Ck(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const o=n[s];if(o.index===e)break;o.hidden||i.unshift(o.dataset)}return i}function Tk(t,e,i){const n=[];for(let s=0;s<i.length;s++){const o=i[s],{first:r,last:a,point:l}=Mk(o,e,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(t.push(l),!a)break}}t.push(...n)}function Mk(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const s=n[i],o=t.segments,r=t.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],h=r[u.start][i],f=r[u.end][i];if(ji(s,h,f)){a=s===h,l=s===f;break}}return{first:a,last:l,point:n}}class Wp{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,i,n){const{x:s,y:o,radius:r}=this;return i=i||{start:0,end:dt},e.arc(s,o,r,i.end,i.start,!0),!n.bounds}interpolate(e){const{x:i,y:n,radius:s}=this,o=e.angle;return{x:i+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}}function Rk(t){const{chart:e,fill:i,line:n}=t;if(yt(i))return Nk(e,i);if(i==="stack")return Pk(t);if(i==="shape")return!0;const s=Ok(t);return s instanceof Wp?s:Gp(s,n)}function Nk(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}function Ok(t){return(t.scale||{}).getPointPositionForValue?Dk(t):Lk(t)}function Lk(t){const{scale:e={},fill:i}=t,n=kk(i,e);if(yt(n)){const s=e.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function Dk(t){const{scale:e,fill:i}=t,n=e.options,s=e.getLabels().length,o=n.reverse?e.max:e.min,r=Ik(i,e,o),a=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,o);return new Wp({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,r));return a}function Ua(t,e,i){const n=Rk(e),{line:s,scale:o,axis:r}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};n&&s.points.length&&(ta(t,i),Bk(t,{line:s,target:n,above:u,below:h,area:i,scale:o,axis:r}),ia(t))}function Bk(t,e){const{line:i,target:n,above:s,below:o,area:r,scale:a}=e,l=i._loop?"angle":e.axis;t.save(),l==="x"&&o!==s&&(Wh(t,n,r.top),Vh(t,{line:i,target:n,color:s,scale:a,property:l}),t.restore(),t.save(),Wh(t,n,r.bottom)),Vh(t,{line:i,target:n,color:o,scale:a,property:l}),t.restore()}function Wh(t,e,i){const{segments:n,points:s}=e;let o=!0,r=!1;t.beginPath();for(const a of n){const{start:l,end:c}=a,u=s[l],h=s[Sc(l,c,s)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,i),t.lineTo(u.x,u.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(h.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function Vh(t,e){const{line:i,target:n,property:s,color:o,scale:r}=e,a=vk(i,n,s);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:f=o}={}}=l,m=n!==!0;t.save(),t.fillStyle=f,Fk(t,r,m&&kl(s,u,h)),t.beginPath();const S=!!i.pathSegment(t,l);let b;if(m){S?t.closePath():jh(t,n,h,s);const v=!!n.pathSegment(t,c,{move:S,reverse:!0});b=S&&v,b||jh(t,n,u,s)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function Fk(t,e,i){const{top:n,bottom:s}=e.chart.chartArea,{property:o,start:r,end:a}=i||{};o==="x"&&(t.beginPath(),t.rect(r,n,a-r,s-n),t.clip())}function jh(t,e,i,n){const s=e.interpolate(i,n);s&&t.lineTo(s.x,s.y)}var Hk={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,s=[];let o,r,a,l;for(r=0;r<n;++r)o=t.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof sn&&(l={visible:t.isDatasetVisible(r),index:r,fill:xk(a,r,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=wk(s,r,i.propagate))},beforeDraw(t,e,i){const n=i.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let r=s.length-1;r>=0;--r){const a=s[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&Ua(t.ctx,a,o))}},beforeDatasetsDraw(t,e,i){if(i.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const o=n[s].$filler;Gh(o)&&Ua(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;!Gh(n)||i.drawTime!=="beforeDatasetDraw"||Ua(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Kh=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}},$k=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class qh extends Ji{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,n){this.maxWidth=e,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let i=at(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(n=>e.filter(n,this.chart.data))),e.sort&&(i=i.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=At(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Kh(n,o);let c,u;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,i,n,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((S,b)=>{const v=n+i/2+o.measureText(S.text).width;(b===0||c[c.length-1]+v+2*a>r)&&(h+=u,c[c.length-(b>0?0:1)]=0,m+=u,f++),l[b]={left:0,top:m,row:f,width:v,height:s},c[c.length-1]+=v+a}),h}_fitCols(e,i,n,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-e;let h=a,f=0,m=0,S=0,b=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:E,itemHeight:I}=Uk(n,i,o,v,s);y>0&&m+I+2*a>u&&(h+=f+a,c.push({width:f,height:m}),S+=f+a,b++,f=m=0),l[y]={left:S,top:m,col:b,width:E,height:I},f=Math.max(f,E),m+=I+a}),h+=f,c.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:o}}=this,r=ss(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Nt(n,this.left+s,this.right-this.lineWidths[a]);for(const c of i)a!==c.row&&(a=c.row,l=Nt(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=Nt(n,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of i)c.col!==a&&(a=c.col,l=Nt(n,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ta(e,this),this._draw(),ia(e)}}_draw(){const{options:e,columnSizes:i,lineWidths:n,ctx:s}=this,{align:o,labels:r}=e,a=St.color,l=ss(e.rtl,this.left,this.width),c=At(r.font),{padding:u}=r,h=c.size,f=h/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:S,boxHeight:b,itemHeight:v}=Kh(r,h),y=function(T,R,N){if(isNaN(S)||S<=0||isNaN(b)||b<0)return;s.save();const V=Le(N.lineWidth,1);if(s.fillStyle=Le(N.fillStyle,a),s.lineCap=Le(N.lineCap,"butt"),s.lineDashOffset=Le(N.lineDashOffset,0),s.lineJoin=Le(N.lineJoin,"miter"),s.lineWidth=V,s.strokeStyle=Le(N.strokeStyle,a),s.setLineDash(Le(N.lineDash,[])),r.usePointStyle){const ee={radius:b*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:V},se=l.xPlus(T,S/2),Q=R+f;hp(s,ee,se,Q,r.pointStyleWidth&&S)}else{const ee=R+Math.max((h-b)/2,0),se=l.leftForLtr(T,S),Q=Bn(N.borderRadius);s.beginPath(),Object.values(Q).some(ae=>ae!==0)?oo(s,{x:se,y:ee,w:S,h:b,radius:Q}):s.rect(se,ee,S,b),s.fill(),V!==0&&s.stroke()}s.restore()},E=function(T,R,N){Un(s,N.text,T,R+v/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},I=this.isHorizontal(),k=this._computeTitleHeight();I?m={x:Nt(o,this.left+u,this.right-n[0]),y:this.top+u+k,line:0}:m={x:this.left+u,y:Nt(o,this.top+k+u,this.bottom-i[0].height),line:0},vp(this.ctx,e.textDirection);const A=v+u;this.legendItems.forEach((T,R)=>{s.strokeStyle=T.fontColor,s.fillStyle=T.fontColor;const N=s.measureText(T.text).width,V=l.textAlign(T.textAlign||(T.textAlign=r.textAlign)),ee=S+f+N;let se=m.x,Q=m.y;l.setWidth(this.width),I?R>0&&se+ee+u>this.right&&(Q=m.y+=A,m.line++,se=m.x=Nt(o,this.left+u,this.right-n[m.line])):R>0&&Q+A>this.bottom&&(se=m.x=se+i[m.line].width+u,m.line++,Q=m.y=Nt(o,this.top+k+u,this.bottom-i[m.line].height));const ae=l.x(se);if(y(ae,Q,T),se=cw(V,se+S+f,I?se+ee:this.right,e.rtl),E(l.x(se),Q,T),I)m.x+=ee+u;else if(typeof T.text!="string"){const X=c.lineHeight;m.y+=Vp(T,X)}else m.y+=A}),Sp(this.ctx,e.textDirection)}drawTitle(){const e=this.options,i=e.title,n=At(i.font),s=$t(i.padding);if(!i.display)return;const o=ss(e.rtl,this.left,this.width),r=this.ctx,a=i.position,l=n.size/2,c=s.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Nt(e.align,h,this.right-f);else{const S=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);u=c+Nt(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const m=Nt(a,h,h+f);r.textAlign=o.textAlign(pc(a)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=n.string,Un(r,i.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,i=At(e.font),n=$t(e.padding);return e.display?i.lineHeight+n.height:0}_getLegendItemAt(e,i){let n,s,o;if(ji(e,this.left,this.right)&&ji(i,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],ji(e,s.left,s.left+s.width)&&ji(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const i=this.options;if(!Wk(e.type,i))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=$k(s,n);s&&!o&&at(i.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!o&&at(i.onHover,[e,n,this],this)}else n&&at(i.onClick,[e,n,this],this)}}function Uk(t,e,i,n,s){const o=zk(n,t,e,i),r=Gk(s,n,e.lineHeight);return{itemWidth:o,itemHeight:r}}function zk(t,e,i,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),e+i.size/2+n.measureText(s).width}function Gk(t,e,i){let n=t;return typeof e.text!="string"&&(n=Vp(e,i)),n}function Vp(t,e){const i=t.text?t.text.length+.5:0;return e*i}function Wk(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Vk={id:"legend",_element:qh,start(t,e,i){const n=t.legend=new qh({ctx:t.ctx,options:i,chart:t});Ft.configure(t,n,i),Ft.addBox(t,n)},stop(t){Ft.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;Ft.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(i?0:void 0),u=$t(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class wc extends Ji{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;const s=ht(n.text)?n.text.length:1;this._padding=$t(n.padding);const o=s*At(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:i,left:n,bottom:s,right:o,options:r}=this,a=r.align;let l=0,c,u,h;return this.isHorizontal()?(u=Nt(a,n,o),h=i+e,c=o-n):(r.position==="left"?(u=n+e,h=Nt(a,s,i),l=gt*-.5):(u=o-e,h=Nt(a,i,s),l=gt*.5),c=s-i),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,i=this.options;if(!i.display)return;const n=At(i.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Un(e,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:pc(i.align),textBaseline:"middle",translation:[r,a]})}}function jk(t,e){const i=new wc({ctx:t.ctx,options:e,chart:t});Ft.configure(t,i,e),Ft.addBox(t,i),t.titleBlock=i}var Kk={id:"title",_element:wc,start(t,e,i){jk(t,i)},stop(t){const e=t.titleBlock;Ft.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;Ft.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Do=new WeakMap;var qk={id:"subtitle",start(t,e,i){const n=new wc({ctx:t.ctx,options:i,chart:t});Ft.configure(t,n,i),Ft.addBox(t,n),Do.set(t,n)},stop(t){Ft.removeBox(t,Do.get(t)),Do.delete(t)},beforeUpdate(t,e,i){const n=Do.get(t);Ft.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ts={average(t){if(!t.length)return!1;let e,i,n=0,s=0,o=0;for(e=0,i=t.length;e<i;++e){const r=t[e].element;if(r&&r.hasValue()){const a=r.tooltipPosition();n+=a.x,s+=a.y,++o}}return{x:n/o,y:s/o}},nearest(t,e){if(!t.length)return!1;let i=e.x,n=e.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=t.length;o<r;++o){const l=t[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=bl(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function Ii(t,e){return e&&(ht(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function $i(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Yk(t,e){const{element:i,datasetIndex:n,index:s}=e,o=t.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:t,label:r,parsed:o.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function Yh(t,e){const i=t.chart.ctx,{body:n,footer:s,title:o}=t,{boxWidth:r,boxHeight:a}=e,l=At(e.bodyFont),c=At(e.titleFont),u=At(e.footerFont),h=o.length,f=s.length,m=n.length,S=$t(e.padding);let b=S.height,v=0,y=n.reduce((k,A)=>k+A.before.length+A.lines.length+A.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(b+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const k=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=m*k+(y-m)*l.lineHeight+(y-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let E=0;const I=function(k){v=Math.max(v,i.measureText(k).width+E)};return i.save(),i.font=c.string,tt(t.title,I),i.font=l.string,tt(t.beforeBody.concat(t.afterBody),I),E=e.displayColors?r+2+e.boxPadding:0,tt(n,k=>{tt(k.before,I),tt(k.lines,I),tt(k.after,I)}),E=0,i.font=u.string,tt(t.footer,I),i.restore(),v+=S.width,{width:v,height:b}}function Xk(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}function Jk(t,e,i,n){const{x:s,width:o}=n,r=i.caretSize+i.caretPadding;if(t==="left"&&s+o+r>e.width||t==="right"&&s-o-r<0)return!0}function Qk(t,e,i,n){const{x:s,width:o}=i,{width:r,chartArea:{left:a,right:l}}=t;let c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),Jk(c,t,e,i)&&(c="center"),c}function Xh(t,e,i){const n=i.yAlign||e.yAlign||Xk(t,i);return{xAlign:i.xAlign||e.xAlign||Qk(t,e,i,n),yAlign:n}}function Zk(t,e){let{x:i,width:n}=t;return e==="right"?i-=n:e==="center"&&(i-=n/2),i}function e8(t,e,i){let{y:n,height:s}=t;return e==="top"?n+=i:e==="bottom"?n-=s+i:n-=s/2,n}function Jh(t,e,i,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:l}=i,c=s+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=Bn(r);let S=Zk(e,a);const b=e8(e,l,c);return l==="center"?a==="left"?S+=c:a==="right"&&(S-=c):a==="left"?S-=Math.max(u,f)+s:a==="right"&&(S+=Math.max(h,m)+s),{x:Tt(S,0,n.width-e.width),y:Tt(b,0,n.height-e.height)}}function Bo(t,e,i){const n=$t(i.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Qh(t){return Ii([],$i(t))}function t8(t,e,i){return _n(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function Zh(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const jp={beforeTitle:Bi,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:Bi,beforeBody:Bi,beforeLabel:Bi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return qe(i)||(e+=i),e},labelColor(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Bi,afterBody:Bi,beforeFooter:Bi,footer:Bi,afterFooter:Bi};function Vt(t,e,i,n){const s=t[e].call(i,n);return typeof s>"u"?jp[e].call(i,n):s}class Il extends Ji{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,o=new kp(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=t8(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:n}=i,s=Vt(n,"beforeTitle",this,e),o=Vt(n,"title",this,e),r=Vt(n,"afterTitle",this,e);let a=[];return a=Ii(a,$i(s)),a=Ii(a,$i(o)),a=Ii(a,$i(r)),a}getBeforeBody(e,i){return Qh(Vt(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:n}=i,s=[];return tt(e,o=>{const r={before:[],lines:[],after:[]},a=Zh(n,o);Ii(r.before,$i(Vt(a,"beforeLabel",this,o))),Ii(r.lines,Vt(a,"label",this,o)),Ii(r.after,$i(Vt(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(e,i){return Qh(Vt(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:n}=i,s=Vt(n,"beforeFooter",this,e),o=Vt(n,"footer",this,e),r=Vt(n,"afterFooter",this,e);let a=[];return a=Ii(a,$i(s)),a=Ii(a,$i(o)),a=Ii(a,$i(r)),a}_createItems(e){const i=this._active,n=this.chart.data,s=[],o=[],r=[];let a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(Yk(this.chart,i[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,n))),tt(a,u=>{const h=Zh(e.callbacks,u);s.push(Vt(h,"labelColor",this,u)),o.push(Vt(h,"labelPointStyle",this,u)),r.push(Vt(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(e,i){const n=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=Ts[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=Yh(this,n),c=Object.assign({},a,l),u=Xh(this.chart,n,c),h=Jh(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,n,s){const o=this.getCaretPosition(e,n,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,n){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Bn(a),{x:f,y:m}=e,{width:S,height:b}=i;let v,y,E,I,k,A;return o==="center"?(k=m+b/2,s==="left"?(v=f,y=v-r,I=k+r,A=k-r):(v=f+S,y=v+r,I=k-r,A=k+r),E=v):(s==="left"?y=f+Math.max(l,u)+r:s==="right"?y=f+S-Math.max(c,h)-r:y=this.caretX,o==="top"?(I=m,k=I-r,v=y-r,E=y+r):(I=m+b,k=I+r,v=y+r,E=y-r),A=I),{x1:v,x2:y,x3:E,y1:I,y2:k,y3:A}}drawTitle(e,i,n){const s=this.title,o=s.length;let r,a,l;if(o){const c=ss(n.rtl,this.x,this.width);for(e.x=Bo(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",r=At(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=r.string,l=0;l<o;++l)i.fillText(s[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===o&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,i,n,s,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c,boxPadding:u}=o,h=At(o.bodyFont),f=Bo(this,"left",o),m=s.x(f),S=l<h.lineHeight?(h.lineHeight-l)/2:0,b=i.y+S;if(o.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=s.leftForLtr(m,c)+c/2,E=b+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,vl(e,v,y,E),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,vl(e,v,y,E)}else{e.lineWidth=$e(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const v=s.leftForLtr(m,c-u),y=s.leftForLtr(s.xPlus(m,1),c-u-2),E=Bn(r.borderRadius);Object.values(E).some(I=>I!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,oo(e,{x:v,y:b,w:c,h:l,radius:E}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),oo(e,{x:y,y:b+1,w:c-2,h:l-2,radius:E}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(v,b,c,l),e.strokeRect(v,b,c,l),e.fillStyle=r.backgroundColor,e.fillRect(y,b+1,c-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,i,n){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,h=At(n.bodyFont);let f=h.lineHeight,m=0;const S=ss(n.rtl,this.x,this.width),b=function(N){i.fillText(N,S.x(e.x+m),e.y+f/2),e.y+=f+o},v=S.textAlign(r);let y,E,I,k,A,T,R;for(i.textAlign=r,i.textBaseline="middle",i.font=h.string,e.x=Bo(this,v,n),i.fillStyle=n.bodyColor,tt(this.beforeBody,b),m=a&&v!=="right"?r==="center"?c/2+u:c+2+u:0,k=0,T=s.length;k<T;++k){for(y=s[k],E=this.labelTextColors[k],i.fillStyle=E,tt(y.before,b),I=y.lines,a&&I.length&&(this._drawColorBox(i,e,k,S,n),f=Math.max(h.lineHeight,l)),A=0,R=I.length;A<R;++A)b(I[A]),f=h.lineHeight;tt(y.after,b)}m=0,f=h.lineHeight,tt(this.afterBody,b),e.y-=o}drawFooter(e,i,n){const s=this.footer,o=s.length;let r,a;if(o){const l=ss(n.rtl,this.x,this.width);for(e.x=Bo(this,n.footerAlign,n),e.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",r=At(n.footerFont),i.fillStyle=n.footerColor,i.font=r.string,a=0;a<o;++a)i.fillText(s[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}drawBackground(e,i,n,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=e,{width:c,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:S}=Bn(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+h,l),r==="top"&&this.drawCaret(e,i,n,s),i.lineTo(a+c-f,l),i.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(e,i,n,s),i.lineTo(a+c,l+u-S),i.quadraticCurveTo(a+c,l+u,a+c-S,l+u),r==="bottom"&&this.drawCaret(e,i,n,s),i.lineTo(a+m,l+u),i.quadraticCurveTo(a,l+u,a,l+u-m),r==="center"&&o==="left"&&this.drawCaret(e,i,n,s),i.lineTo(a,l+h),i.quadraticCurveTo(a,l,a+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const r=Ts[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=Yh(this,e),l=Object.assign({},r,this._size),c=Xh(i,e,l),u=Jh(e,l,c,i);(s._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=$t(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,s,i),vp(e,i.textDirection),o.y+=r.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),Sp(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const n=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Tr(n,s),r=this._positionChanged(s,i);(o||r)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(e,o,i,n),a=this._positionChanged(r,e),l=i||!Tr(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),l}_getActiveElements(e,i,n,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return i;const r=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(e,i){const{caretX:n,caretY:s,options:o}=this,r=Ts[o.position].call(this,e,i);return r!==!1&&(n!==r.x||s!==r.y)}}L(Il,"positioners",Ts);var i8={id:"tooltip",_element:Il,positioners:Ts,afterInit(t,e,i){i&&(t.tooltip=new Il({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},n8=Object.freeze({__proto__:null,Colors:gk,Decimation:yk,Filler:Hk,Legend:Vk,SubTitle:qk,Title:Kk,Tooltip:i8});const s8=(t,e,i,n)=>(typeof e=="string"?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function o8(t,e,i,n){const s=t.indexOf(e);if(s===-1)return s8(t,e,i,n);const o=t.lastIndexOf(e);return s!==o?i:s}const r8=(t,e)=>t===null?null:Tt(Math.round(t),0,e);function ed(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Al extends zn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:s,label:o}of i)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(qe(e))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===e?i:o8(n,e,Le(i,e),this._addedLabels),r8(i,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,i=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=e===0&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=e;r<=i;r++)s.push({value:r});return s}getLabelForValue(e){return ed.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}L(Al,"id","category"),L(Al,"defaults",{ticks:{callback:ed}});function a8(t,e){const i=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=o||1,S=u-1,{min:b,max:v}=e,y=!qe(r),E=!qe(a),I=!qe(c),k=(v-b)/(h+1);let A=Xu((v-b)/S/m)*m,T,R,N,V;if(A<1e-14&&!y&&!E)return[{value:b},{value:v}];V=Math.ceil(v/A)-Math.floor(b/A),V>S&&(A=Xu(V*A/S/m)*m),qe(l)||(T=Math.pow(10,l),A=Math.ceil(A*T)/T),s==="ticks"?(R=Math.floor(b/A)*A,N=Math.ceil(v/A)*A):(R=b,N=v),y&&E&&o&&iw((a-r)/o,A/1e3)?(V=Math.round(Math.min((a-r)/A,u)),A=(a-r)/V,R=r,N=a):I?(R=y?r:R,N=E?a:N,V=c-1,A=(N-R)/V):(V=(N-R)/A,Us(V,Math.round(V),A/1e3)?V=Math.round(V):V=Math.ceil(V));const ee=Math.max(Ju(A),Ju(R));T=Math.pow(10,qe(l)?ee:l),R=Math.round(R*T)/T,N=Math.round(N*T)/T;let se=0;for(y&&(f&&R!==r?(i.push({value:r}),R<r&&se++,Us(Math.round((R+se*A)*T)/T,r,td(r,k,t))&&se++):R<r&&se++);se<V;++se)i.push({value:Math.round((R+se*A)*T)/T});return E&&f&&N!==a?i.length&&Us(i[i.length-1].value,a,td(a,k,t))?i[i.length-1].value=a:i.push({value:a}):(!E||N===a)&&i.push({value:N}),i}function td(t,e,{horizontal:i,minRotation:n}){const s=vi(n),o=(i?Math.sin(s):Math.cos(s))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}class Fr extends zn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return qe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=i?s:l,a=l=>o=n?o:l;if(e){const l=Li(s),c=Li(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||r(s-l)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,i=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,r=a8(s,o);return e.bounds==="ticks"&&tp(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-i)/Math.max(e.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(e){return go(e,this.chart.options.locale,this.options.ticks.format)}}class Pl extends Fr{determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=yt(e)?e:0,this.max=yt(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),i=e?this.width:this.height,n=vi(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}L(Pl,"id","linear"),L(Pl,"defaults",{ticks:{callback:ea.formatters.numeric}});const ao=t=>Math.floor(nn(t)),En=(t,e)=>Math.pow(10,ao(t)+e);function id(t){return t/Math.pow(10,ao(t))===1}function nd(t,e,i){const n=Math.pow(10,i),s=Math.floor(t/n);return Math.ceil(e/n)-s}function l8(t,e){const i=e-t;let n=ao(i);for(;nd(t,e,n)>10;)n++;for(;nd(t,e,n)<10;)n--;return Math.min(n,ao(t))}function c8(t,{min:e,max:i}){e=Zt(t.min,e);const n=[],s=ao(e);let o=l8(e,i),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((e-l)*r)/r,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,o)),f=Zt(t.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;f<i;)n.push({value:f,major:id(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),f=Math.round((l+u+h*Math.pow(10,o))*r)/r;const m=Zt(t.max,f);return n.push({value:m,major:id(m),significand:h}),n}class Cl extends zn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,i){const n=Fr.prototype.parse.apply(this,[e,i]);if(n===0){this._zero=!0;return}return yt(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=yt(e)?Math.max(0,e):null,this.max=yt(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!yt(this._userMin)&&(this.min=e===En(this.min,0)?En(this.min,-1):En(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let n=this.min,s=this.max;const o=a=>n=e?n:a,r=a=>s=i?s:a;n===s&&(n<=0?(o(1),r(10)):(o(En(n,-1)),r(En(s,1)))),n<=0&&o(En(s,-1)),s<=0&&r(En(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,i={min:this._userMin,max:this._userMax},n=c8(i,this);return e.bounds==="ticks"&&tp(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":go(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=nn(e),this._valueRange=nn(this.max)-nn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(nn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const i=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+i*this._valueRange)}}L(Cl,"id","logarithmic"),L(Cl,"defaults",{ticks:{callback:ea.formatters.logarithmic,major:{enabled:!0}}});function Tl(t){const e=t.ticks;if(e.display&&t.display){const i=$t(e.backdropPadding);return Le(e.font&&e.font.size,St.font.size)+i.height}return 0}function u8(t,e,i){return i=ht(i)?i:[i],{w:yw(t,e.string,i),h:i.length*e.lineHeight}}function sd(t,e,i,n,s){return t===n||t===s?{start:e-i/2,end:e+i/2}:t<n||t>s?{start:e-i,end:e}:{start:e,end:e+i}}function h8(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),n=[],s=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?gt/o:0;for(let l=0;l<o;l++){const c=r.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=At(c.font),f=u8(t.ctx,h,t._pointLabels[l]);n[l]=f;const m=ii(t.getIndexAngle(l)+a),S=Math.round(dc(m)),b=sd(S,u.x,f.w,0,180),v=sd(S,u.y,f.h,90,270);d8(i,e,m,b,v)}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=f8(t,n,s)}function d8(t,e,i,n,s){const o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/r,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function f8(t,e,i){const n=[],s=t._pointLabels.length,o=t.options,r=Tl(o)/2,a=t.drawingArea,l=o.pointLabels.centerPointLabels?gt/s:0;for(let c=0;c<s;c++){const u=t.getPointPosition(c,a+r+i[c],l),h=Math.round(dc(ii(u.angle+vt))),f=e[c],m=m8(u.y,f.h,h),S=p8(h),b=g8(u.x,f.w,S);n.push({x:u.x,y:m,textAlign:S,left:b,top:m,right:b+f.w,bottom:m+f.h})}return n}function p8(t){return t===0||t===180?"center":t<180?"left":"right"}function g8(t,e,i){return i==="right"?t-=e:i==="center"&&(t-=e/2),t}function m8(t,e,i){return i===90||i===270?t-=e/2:(i>270||i<90)&&(t-=e),t}function _8(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let s=e-1;s>=0;s--){const o=n.setContext(t.getPointLabelContext(s)),r=At(o.font),{x:a,y:l,textAlign:c,left:u,top:h,right:f,bottom:m}=t._pointLabelItems[s],{backdropColor:S}=o;if(!qe(S)){const b=Bn(o.borderRadius),v=$t(o.backdropPadding);i.fillStyle=S;const y=u-v.left,E=h-v.top,I=f-u+v.width,k=m-h+v.height;Object.values(b).some(A=>A!==0)?(i.beginPath(),oo(i,{x:y,y:E,w:I,h:k,radius:b}),i.fill()):i.fillRect(y,E,I,k)}Un(i,t._pointLabels[s],a,l+r.lineHeight/2,r,{color:o.color,textAlign:c,textBaseline:"middle"})}}function Kp(t,e,i,n){const{ctx:s}=t;if(i)s.arc(t.xCenter,t.yCenter,e,0,dt);else{let o=t.getPointPosition(0,e);s.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=t.getPointPosition(r,e),s.lineTo(o.x,o.y)}}function b8(t,e,i,n,s){const o=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!n||!a||!l||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),Kp(t,i,r,n),o.closePath(),o.stroke(),o.restore())}function y8(t,e,i){return _n(t,{label:i,index:e,type:"pointLabel"})}class Ms extends Fr{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=$t(Tl(this.options)/2),i=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+i/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!1);this.min=yt(e)&&!isNaN(e)?e:0,this.max=yt(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Tl(this.options))}generateTickLabels(e){Fr.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((i,n)=>{const s=at(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?h8(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,i,n,s){this.xCenter+=Math.floor((e-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,i,n,s))}getIndexAngle(e){const i=dt/(this._pointLabels.length||1),n=this.options.startAngle||0;return ii(e*i+vi(n))}getDistanceFromCenterForValue(e){if(qe(e))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*i:(e-this.min)*i}getValueForDistanceFromCenter(e){if(qe(e))return NaN;const i=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(e){const i=this._pointLabels||[];if(e>=0&&e<i.length){const n=i[e];return y8(this.getContext(),e,n)}}getPointPosition(e,i,n=0){const s=this.getIndexAngle(e)-vt+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(e,i){return this.getPointPosition(e,this.getDistanceFromCenterForValue(i))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:i,top:n,right:s,bottom:o}=this._pointLabelItems[e];return{left:i,top:n,right:s,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:i}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Kp(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,i=this.options,{angleLines:n,grid:s,border:o}=i,r=this._pointLabels.length;let a,l,c;if(i.pointLabels.display&&_8(this,r),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=s.setContext(f),S=o.setContext(f);b8(this,m,l,r,S)}}),n.display){for(e.save(),a=r-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!i.reverse)return;const c=n.setContext(this.getContext(l)),u=At(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,r=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=$t(c.backdropPadding);e.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}Un(e,a.label,0,-o,u,{color:c.color})}),e.restore()}drawTitle(){}}L(Ms,"id","radialLinear"),L(Ms,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ea.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),L(Ms,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),L(Ms,"descriptors",{angleLines:{_fallback:"grid"}});const sa={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qt=Object.keys(sa);function v8(t,e){return t-e}function od(t,e){if(qe(e))return null;const i=t._adapter,{parser:n,round:s,isoWeekday:o}=t._parseOpts;let r=e;return typeof n=="function"&&(r=n(r)),yt(r)||(r=typeof n=="string"?i.parse(r,n):i.parse(r)),r===null?null:(s&&(r=s==="week"&&(ls(o)||o===!0)?i.startOf(r,"isoWeek",o):i.startOf(r,s)),+r)}function rd(t,e,i,n){const s=qt.length;for(let o=qt.indexOf(t);o<s-1;++o){const r=sa[qt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((i-e)/(a*r.size))<=n)return qt[o]}return qt[s-1]}function S8(t,e,i,n,s){for(let o=qt.length-1;o>=qt.indexOf(i);o--){const r=qt[o];if(sa[r].common&&t._adapter.diff(s,n,r)>=e-1)return r}return qt[i?qt.indexOf(i):0]}function w8(t){for(let e=qt.indexOf(t)+1,i=qt.length;e<i;++e)if(sa[qt[e]].common)return qt[e]}function ad(t,e,i){if(!i)t[e]=!0;else if(i.length){const{lo:n,hi:s}=fc(i,e),o=i[n]>=e?i[n]:i[s];t[o]=!0}}function x8(t,e,i,n){const s=t._adapter,o=+s.startOf(e[0].value,n),r=e[e.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=i[a],l>=0&&(e[l].major=!0);return e}function ld(t,e,i){const n=[],s={},o=e.length;let r,a;for(r=0;r<o;++r)a=e[r],s[a]=r,n.push({value:a,major:!1});return o===0||!i?n:x8(t,n,s,i)}class lo extends zn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const n=e.time||(e.time={}),s=this._adapter=new Lx._date(e.adapters.date);s.init(i),$s(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:od(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,n=e.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=yt(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),o=yt(o)&&!isNaN(o)?o:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],n=e[e.length-1]),{min:i,max:n}}buildTicks(){const e=this.options,i=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=rw(s,o,r);return this._unit=i.unit||(n.autoSkip?rd(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):S8(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:w8(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),ld(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,n=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?i=1-s:i=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;i=Tt(i,0,r),n=Tt(n,0,r),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const e=this._adapter,i=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||rd(o.minUnit,i,n,this._getLabelCapacity(i)),a=Le(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=ls(l)||l===!0,u={};let h=i,f,m;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":r),e.diff(n,i,r)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+r);const S=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,a,r),m++)ad(u,f,S);return(f===n||s.bounds==="ticks"||m===1)&&ad(u,f,S),Object.keys(u).sort((b,v)=>b-v).map(b=>+b)}getLabelForValue(e){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(e,n.tooltipFormat):i.format(e,n.displayFormats.datetime)}format(e,i){const s=this.options.time.displayFormats,o=this._unit,r=i||s[o];return this._adapter.format(e,r)}_tickFormatFunction(e,i,n,s){const o=this.options,r=o.ticks.callback;if(r)return at(r,[e,i,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=n[i],m=c&&h&&f&&f.major;return this._adapter.format(e,s||(m?h:u))}generateTickLabels(e){let i,n,s;for(i=0,n=e.length;i<n;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,n=this.ctx.measureText(e).width,s=vi(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(e){const i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,o=this._tickFormatFunction(e,0,ld(this,[e],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],i,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,n;if(e.length)return e;const s=this.getLabels();for(i=0,n=s.length;i<n;++i)e.push(od(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sp(e.sort(v8))}}L(lo,"id","time"),L(lo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Fo(t,e,i){let n=0,s=t.length-1,o,r,a,l;i?(e>=t[n].pos&&e<=t[s].pos&&({lo:n,hi:s}=Ki(t,"pos",e)),{pos:o,time:a}=t[n],{pos:r,time:l}=t[s]):(e>=t[n].time&&e<=t[s].time&&({lo:n,hi:s}=Ki(t,"time",e)),{time:o,pos:a}=t[n],{time:r,pos:l}=t[s]);const c=r-o;return c?a+(l-a)*(e-o)/c:a}class Ml extends lo{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=Fo(i,this.min),this._tableRange=Fo(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:i,max:n}=this,s=[],o=[];let r,a,l,c,u;for(r=0,a=e.length;r<a;++r)c=e[r],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)u=s[r+1],l=s[r-1],c=s[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?e=this.normalize(i.concat(n)):e=i.length?i:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Fo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return Fo(this._table,n*this._tableRange+this._minPos,!0)}}L(Ml,"id","timeseries"),L(Ml,"defaults",lo.defaults);var E8=Object.freeze({__proto__:null,CategoryScale:Al,LinearScale:Pl,LogarithmicScale:Cl,RadialLinearScale:Ms,TimeScale:lo,TimeSeriesScale:Ml});const k8=[Ox,ck,n8,E8];var Rl=(t=>(t.RAW="raw",t.WIN_RATE="winRate",t))(Rl||{});const I8=Ue({__name:"EvaluationChart",props:{size:{type:kt,required:!0},type:{type:String,required:!0}},setup(t){const e=t,i=1e6,n=2e3,s=-n;function o(A){switch(A){case 0:return x.sente;case 1:return x.gote;case 2:return x.research;case 3:return x.research+"2";case 4:return x.research+"3";case 5:return x.research+"4"}}function r(A,T){const R=A.customData;if(R)switch(T){case 0:return A.nextColor===U.BLACK?void 0:R.playerSearchInfo;case 1:return A.nextColor===U.WHITE?void 0:R.playerSearchInfo;case 2:return R.researchInfo;case 3:return R.researchInfo2;case 4:return R.researchInfo3;case 5:return R.researchInfo4}}function a(A,T,R){const N=A.score!==void 0?A.score:A.mate!==void 0?A.mate>0?i:-i:void 0;if(N!==void 0)switch(T){case"raw":return Math.min(Math.max(N,s),n);case"winRate":return dl(N,R)}}function l(A){switch(A){default:return{main:"black",ticks:"dimgray",grid:"lightgray",head:"red",blackPlayer:"#1480C9",whitePlayer:"#FB7D00",researcher:"#349393",researcher2:"#FF1F4E",researcher3:"#6C22FF",researcher4:"#FFB912"};case Mn.DARK:return{main:"white",ticks:"darkgray",grid:"dimgray",head:"red",blackPlayer:"#36A2EB",whitePlayer:"#FF9F40",researcher:"#4BC0C0",researcher2:"#FF6384",researcher3:"#9966FF",researcher4:"#FFCD56"}}}const c=G(),u=rt();let h,f=n,m=s;e.type==="winRate"&&(f=100,m=0);const S=(A,T,R,N)=>{const V=[],ee=R.moves;for(const Q of ee){const ae=r(Q,T);if(!ae)continue;const X=a(ae,e.type,N.coefficientInSigmoid);X!==void 0&&V.push({x:Q.number,y:X})}const se=ee[ee.length-1];if(T===0&&se.nextColor===U.BLACK||T===1&&se.nextColor===U.WHITE){const Q=se.customData;if(Q&&Q.opponentSearchInfo){const ae=a(Q.opponentSearchInfo,e.type,N.coefficientInSigmoid);ae!==void 0&&V.push({x:se.number+1,y:ae})}}return{label:o(T),borderColor:A,data:V,showLine:!0}},b=(A,T)=>({label:x.currentPosition,borderColor:T.head,data:[{x:A.current.number,y:f},{x:A.current.number,y:m}],showLine:!0,pointBorderWidth:0,pointRadius:0}),v=(A,T,R)=>{const N=[{borderColor:R.blackPlayer,type:0},{borderColor:R.whitePlayer,type:1},{borderColor:R.researcher,type:2},{borderColor:R.researcher2,type:3},{borderColor:R.researcher3,type:4},{borderColor:R.researcher4,type:5}],V=[b(A,R)];for(const ee of N){const se=S(ee.borderColor,ee.type,A,T);se.data.length>0&&V.push(se)}return V},y=(A,T)=>({x:{min:0,max:A.length+10,ticks:{color:T.ticks},grid:{color:T.grid}},y:{min:m,max:f,ticks:{color:T.ticks},grid:{color:T.grid}}}),E=(A,T)=>{const R=l(T.thema);h.data.datasets=v(A,T,R),h.options.color=R.main,h.options.scales=y(A,R),h.update()},I=(A,T,R)=>{if(A.x===null)return;const N=R.scales.x.max-R.scales.x.min,V=R.scales.x.right-R.scales.x.left,ee=(A.x-R.scales.x.left)/V*N+R.scales.x.min,se=Math.round(ee);u.changePly(se)};ot(()=>{const A=Ge(),R=c.value.getContext("2d");h=new Gi(R,{type:"scatter",data:{datasets:[]},options:{animation:{duration:0},responsive:!0,maintainAspectRatio:!1,events:["click"],onClick:I}}),h.draw(),E(u.record,A),ln(()=>[u.record,A],([N,V])=>E(N,V),{deep:!0})}),ho(()=>{h.destroy()});const k=Te(()=>({height:`${e.size.height}px`,width:`${e.size.width}px`}));return(A,T)=>(O(),F("div",null,[p("div",{class:"full root",style:Ee(d(k))},[p("canvas",{ref_key:"canvas",ref:c,class:"full"},null,512)],4)]))}});const cd=Qe(I8,[["__scopeId","data-v-12fbb375"]]),A8={class:"full column root"},P8={class:"row element"},C8={class:"key"},T8={class:"value"},M8={class:"key"},R8=["value","onInput"],N8={class:"options"},O8=Ue({__name:"RecordInfo",props:{size:{type:kt,required:!0}},setup(t){const e=G(),i=rt(),n=Ge(),s=Te(()=>Object.values(te).map(a=>{const l=i.record.metadata;return{key:a,displayName:N_(a),value:l.getStandardMetadata(a)||""}}));ot(()=>{e.value.addEventListener("copy",a=>{a.stopPropagation()}),e.value.addEventListener("paste",a=>{a.stopPropagation()})});const o=(a,l)=>{const c=a.target;i.updateStandardRecordMetadata({key:l,value:c.value})},r=a=>{n.updateAppSetting({emptyRecordInfoVisibility:a})};return(a,l)=>(O(),F("div",null,[p("div",A8,[p("div",{ref_key:"root",ref:e,class:"full column main",style:Ee({height:`${t.size.height-25}px`})},[p("div",P8,[p("div",C8,P(d(x).file),1),p("div",T8,P(d(i).recordFilePath||d(x).newRecordWithBrackets),1)]),(O(!0),F(Re,null,Ve(d(s),c=>(O(),F("div",{key:c.key,class:it(["row element",{hidden:!d(n).emptyRecordInfoVisibility&&!c.value}])},[p("div",M8,P(c.displayName),1),p("input",{class:"value",value:c.value,onInput:u=>o(u,c.key)},null,40,R8)],2))),128))],4),p("div",N8,[z(_t,{value:d(n).emptyRecordInfoVisibility,label:d(x).displayEmptyElements,onChange:r},null,8,["value","label"])])])]))}});const L8=Qe(O8,[["__scopeId","data-v-5fd8b335"]]),D8={class:"row tabs"},B8=["onClick"],F8={class:"auto tab-contents"},ar=30,H8=Ue({__name:"TabPane",props:{size:{type:kt,required:!0},visibleTabs:{type:Array,required:!0},activeTab:{type:String,required:!0},displayMinimizeToggle:{type:Boolean,required:!1}},emits:["onChangeTab","onMinimize"],setup(t,{emit:e}){const i=t,n=a=>e("onChangeTab",a),s=()=>e("onMinimize"),o=Te(()=>i.size.reduce(new kt(0,ar))),r={[Je.RECORD_INFO]:{title:x.recordProperties,icon:de.DESCRIPTION},[Je.COMMENT]:{title:x.comments,icon:de.COMMENT},[Je.SEARCH]:{title:x.searchLog,icon:de.BRAIN},[Je.PV]:{title:x.pv,icon:de.PV},[Je.CHART]:{title:x.evaluation,icon:de.CHART},[Je.PERCENTAGE_CHART]:{title:x.estimatedWinRate,icon:de.PERCENT},[Je.INVISIBLE]:{title:x.hideTabView,icon:de.ARROW_DROP}};return(a,l)=>(O(),F("div",null,[p("div",{class:"full column",style:Ee({width:`${t.size.width}px`})},[p("div",D8,[(O(!0),F(Re,null,Ve(t.visibleTabs,c=>(O(),F("div",{key:c,class:it(["tab",{selected:t.activeTab===c}]),onClick:u=>n(c)},[z(ye,{icon:r[c].icon},null,8,["icon"]),p("span",null,P(r[c].title),1)],10,B8))),128)),t.displayMinimizeToggle?(O(),F("div",{key:0,class:"tab end",onClick:s},[z(ye,{icon:d(de).ARROW_DROP},null,8,["icon"]),p("span",null,P(d(x).hideTabView),1)])):le("",!0)]),p("div",F8,[t.activeTab===d(Je).RECORD_INFO?(O(),We(L8,{key:0,class:"full tab-content",size:d(o)},null,8,["size"])):le("",!0),t.activeTab===d(Je).COMMENT?(O(),We(Hv,{key:1,class:"full tab-content"})):le("",!0),t.activeTab===d(Je).SEARCH?(O(),We(zu,{key:2,class:"full tab-content",size:d(o),"history-mode":!0},null,8,["size"])):le("",!0),t.activeTab===d(Je).PV?(O(),We(zu,{key:3,class:"full tab-content",size:d(o),"history-mode":!1},null,8,["size"])):le("",!0),t.activeTab===d(Je).CHART?(O(),We(cd,{key:4,class:"full tab-content",size:d(o),type:d(Rl).RAW},null,8,["size","type"])):le("",!0),t.activeTab===d(Je).PERCENTAGE_CHART?(O(),We(cd,{key:5,class:"full tab-content",size:d(o),type:d(Rl).WIN_RATE},null,8,["size","type"])):le("",!0)])],4)]))}});const za=Qe(H8,[["__scopeId","data-v-57d32810"]]);class lr{constructor(){L(this,"func");L(this,"timeout")}after(e,i){this.func=e,!this.timeout&&(this.timeout=setTimeout(this.invoke.bind(this),i))}invoke(){this.func&&this.func(),this.clear()}clear(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.func=void 0}}const ud={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((t,e)=>(t[e.id]=e)&&t,{})}},methods:{updatePaneComponents(){this.panes.forEach(t=>{t.update&&t.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[t.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(t,e){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=e},onMouseMove(t){this.touch.mouseDown&&(t.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(t)),this.$emit("resize",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(t,e){"ontouchstart"in window&&(t.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===e?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(t,e),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=e,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[e])},onSplitterDblClick(t,e){let i=0;this.panes=this.panes.map((n,s)=>(n.size=s===e?n.max:n.min,s!==e&&(i+=n.min),n)),this.panes[e].size-=i,this.$emit("pane-maximize",this.panes[e]),this.$emit("resized",this.panes.map(n=>({min:n.min,max:n.max,size:n.size})))},onPaneClick(t,e){this.$emit("pane-click",this.indexedPanes[e])},getCurrentMouseDrag(t){const e=this.container.getBoundingClientRect(),{clientX:i,clientY:n}="ontouchstart"in window&&t.touches?t.touches[0]:t;return{x:i-e.left,y:n-e.top}},getCurrentDragPercentage(t){t=t[this.horizontal?"y":"x"];const e=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(t=e-t),t*100/e},calculatePanesSize(t){const e=this.touch.activeSplitter;let i={prevPanesSize:this.sumPrevPanesSize(e),nextPanesSize:this.sumNextPanesSize(e),prevReachedMinPanes:0,nextReachedMinPanes:0};const n=0+(this.pushOtherPanes?0:i.prevPanesSize),s=100-(this.pushOtherPanes?0:i.nextPanesSize),o=Math.max(Math.min(this.getCurrentDragPercentage(t),s),n);let r=[e,e+1],a=this.panes[r[0]]||null,l=this.panes[r[1]]||null;const c=a.max<100&&o>=a.max+i.prevPanesSize,u=l.max<100&&o<=100-(l.max+this.sumNextPanesSize(e+1));if(c||u){c?(a.size=a.max,l.size=Math.max(100-a.max-i.prevPanesSize-i.nextPanesSize,0)):(a.size=Math.max(100-l.max-i.prevPanesSize-this.sumNextPanesSize(e+1),0),l.size=l.max);return}if(this.pushOtherPanes){const h=this.doPushOtherPanes(i,o);if(!h)return;({sums:i,panesToResize:r}=h),a=this.panes[r[0]]||null,l=this.panes[r[1]]||null}a!==null&&(a.size=Math.min(Math.max(o-i.prevPanesSize-i.prevReachedMinPanes,a.min),a.max)),l!==null&&(l.size=Math.min(Math.max(100-o-i.nextPanesSize-i.nextReachedMinPanes,l.min),l.max))},doPushOtherPanes(t,e){const i=this.touch.activeSplitter,n=[i,i+1];return e<t.prevPanesSize+this.panes[n[0]].min&&(n[0]=this.findPrevExpandedPane(i).index,t.prevReachedMinPanes=0,n[0]<i&&this.panes.forEach((s,o)=>{o>n[0]&&o<=i&&(s.size=s.min,t.prevReachedMinPanes+=s.min)}),t.prevPanesSize=this.sumPrevPanesSize(n[0]),n[0]===void 0)?(t.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((s,o)=>{o>0&&o<=i&&(s.size=s.min,t.prevReachedMinPanes+=s.min)}),this.panes[n[1]].size=100-t.prevReachedMinPanes-this.panes[0].min-t.prevPanesSize-t.nextPanesSize,null):e>100-t.nextPanesSize-this.panes[n[1]].min&&(n[1]=this.findNextExpandedPane(i).index,t.nextReachedMinPanes=0,n[1]>i+1&&this.panes.forEach((s,o)=>{o>i&&o<n[1]&&(s.size=s.min,t.nextReachedMinPanes+=s.min)}),t.nextPanesSize=this.sumNextPanesSize(n[1]-1),n[1]===void 0)?(t.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((s,o)=>{o<this.panesCount-1&&o>=i+1&&(s.size=s.min,t.nextReachedMinPanes+=s.min)}),this.panes[n[0]].size=100-t.prevPanesSize-t.nextReachedMinPanes-this.panes[this.panesCount-1].min-t.nextPanesSize,null):{sums:t,panesToResize:n}},sumPrevPanesSize(t){return this.panes.reduce((e,i,n)=>e+(n<t?i.size:0),0)},sumNextPanesSize(t){return this.panes.reduce((e,i,n)=>e+(n>t+1?i.size:0),0)},findPrevExpandedPane(t){return[...this.panes].reverse().find(e=>e.index<t&&e.size>e.min)||{}},findNextExpandedPane(t){return this.panes.find(e=>e.index>t+1&&e.size>e.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(t=>{const e=t.classList.contains("splitpanes__pane"),i=t.classList.contains("splitpanes__splitter");!e&&!i&&(t.parentNode.removeChild(t),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},addSplitter(t,e,i=!1){const n=t-1,s=document.createElement("div");s.classList.add("splitpanes__splitter"),i||(s.onmousedown=o=>this.onMouseDown(o,n),typeof window<"u"&&"ontouchstart"in window&&(s.ontouchstart=o=>this.onMouseDown(o,n)),s.onclick=o=>this.onSplitterClick(o,n+1)),this.dblClickSplitter&&(s.ondblclick=o=>this.onSplitterDblClick(o,n+1)),e.parentNode.insertBefore(s,e)},removeSplitter(t){t.onmousedown=void 0,t.onclick=void 0,t.ondblclick=void 0,t.parentNode.removeChild(t)},redoSplitters(){const t=Array.from(this.container.children);t.forEach(i=>{i.className.includes("splitpanes__splitter")&&this.removeSplitter(i)});let e=0;t.forEach(i=>{i.className.includes("splitpanes__pane")&&(!e&&this.firstSplitter?this.addSplitter(e,i,!0):e&&this.addSplitter(e,i),e++)})},requestUpdate({target:t,...e}){const i=this.indexedPanes[t._.uid];Object.entries(e).forEach(([n,s])=>i[n]=s)},onPaneAdd(t){let e=-1;Array.from(t.$el.parentNode.children).some(s=>(s.className.includes("splitpanes__pane")&&e++,s===t.$el));const i=parseFloat(t.minSize),n=parseFloat(t.maxSize);this.panes.splice(e,0,{id:t._.uid,index:e,min:isNaN(i)?0:i,max:isNaN(n)?100:n,size:t.size===null?null:parseFloat(t.size),givenSize:t.size,update:t.update}),this.panes.forEach((s,o)=>s.index=o),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[e]}),this.$emit("pane-add",{index:e,panes:this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))})})},onPaneRemove(t){const e=this.panes.findIndex(n=>n.id===t._.uid),i=this.panes.splice(e,1)[0];this.panes.forEach((n,s)=>n.index=s),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...i,index:e}}),this.$emit("pane-remove",{removed:i,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},resetPaneSizes(t={}){!t.addedPane&&!t.removedPane?this.initialPanesSizing():this.panes.some(e=>e.givenSize!==null||e.min||e.max<100)?this.equalizeAfterAddOrRemove(t):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size})))},equalize(){const t=100/this.panesCount;let e=0;const i=[],n=[];this.panes.forEach(s=>{s.size=Math.max(Math.min(t,s.max),s.min),e-=s.size,s.size>=s.max&&i.push(s.id),s.size<=s.min&&n.push(s.id)}),e>.1&&this.readjustSizes(e,i,n)},initialPanesSizing(){let t=100;const e=[],i=[];let n=0;this.panes.forEach(o=>{t-=o.size,o.size!==null&&n++,o.size>=o.max&&e.push(o.id),o.size<=o.min&&i.push(o.id)});let s=100;t>.1&&(this.panes.forEach(o=>{o.size===null&&(o.size=Math.max(Math.min(t/(this.panesCount-n),o.max),o.min)),s-=o.size}),s>.1&&this.readjustSizes(t,e,i))},equalizeAfterAddOrRemove({addedPane:t,removedPane:e}={}){let i=100/this.panesCount,n=0;const s=[],o=[];t&&t.givenSize!==null&&(i=(100-t.givenSize)/(this.panesCount-1)),this.panes.forEach(r=>{n-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&o.push(r.id)}),!(Math.abs(n)<.1)&&(this.panes.forEach(r=>{t&&t.givenSize!==null&&t.id===r.id||(r.size=Math.max(Math.min(i,r.max),r.min)),n-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&o.push(r.id)}),n>.1&&this.readjustSizes(n,s,o))},readjustSizes(t,e,i){let n;t>0?n=t/(this.panesCount-e.length):n=t/(this.panesCount-i.length),this.panes.forEach((s,o)=>{if(t>0&&!e.includes(s.id)){const r=Math.max(Math.min(s.size+n,s.max),s.min),a=r-s.size;t-=a,s.size=r}else if(!i.includes(s.id)){const r=Math.max(Math.min(s.size+n,s.max),s.min),a=r-s.size;t-=a,s.size=r}s.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[s.id].size}%`})}),Math.abs(t)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(t){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((e,i)=>{e.ondblclick=t?n=>this.onSplitterDblClick(n,i):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return Xm("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},$8=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},U8={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(t){this.style=t}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(t){this.requestUpdate({target:this,size:t})},minSizeNumber(t){this.requestUpdate({target:this,min:t})},maxSizeNumber(t){this.requestUpdate({target:this,max:t})}}};function z8(t,e,i,n,s,o){return O(),F("div",{class:"splitpanes__pane",onClick:e[0]||(e[0]=r=>o.onPaneClick(r,t._.uid)),style:Ee(t.style)},[Ja(t.$slots,"default")],4)}const Ho=$8(U8,[["render",z8]]);const G8={class:"full column"},W8={class:"row"},V8=Ue({__name:"StandardLayout",setup(t){const s=Ge(),o=xi(new kt(window.innerWidth,window.innerHeight)),r=G(s.topPaneHeightPercentage),a=G(s.bottomLeftPaneWidthPercentage),l=xi(new kt(0,0)),c=new lr,u=()=>{c.after(()=>{o.width=window.innerWidth,o.height=window.innerHeight},100)};ot(()=>{window.addEventListener("resize",u)}),ho(()=>{window.removeEventListener("resize",u)});const h=X=>{l.width=X.width,l.height=X.height},f=X=>{s.updateAppSetting(X).catch(he=>{we.log(bt.WARN,"StandardLayout: failed to update app setting: "+rf(he))})},m=X=>{f({tab:X})},S=X=>{f({tab2:X})},b=()=>{r.value=100,f({topPaneHeightPercentage:100})},v=()=>{const X=Math.min(s.topPanePreviousHeightPercentage,(o.height-ar*2-8)/o.height*100);r.value=X,f({topPaneHeightPercentage:X})},y=new lr,E=X=>{const he=X[0].size;y.after(()=>{r.value=he},100)},I=X=>{y.clear();const he=X[0].size;r.value=he,f({topPaneHeightPercentage:he})},k=new lr,A=X=>{const he=X[0].size;k.after(()=>{a.value=he},100)},T=X=>{k.clear();const he=X[0].size;a.value=he,f({bottomLeftPaneWidthPercentage:he})},R=Te(()=>o.height*se.value/100>=ar),N=Te(()=>new kt(Math.max(o.width-Ev-10*2,0),Math.max((o.height-8)*(r.value/100)-10*2-(R.value?0:ar),0))),V=Te(()=>({margin:"10px"})),ee=Te(()=>{const X=o.width-l.width-30,he=l.height;return{margin:"10px 10px 10px 0",width:`${X}px`,height:`${he}px`}}),se=Te(()=>100-r.value),Q=Te(()=>new kt(s.tabPaneType===Zs.SINGLE?o.width:(o.width-8)*(a.value/100),(o.height-8)*(se.value/100))),ae=Te(()=>new kt((o.width-8)*(1-a.value/100),(o.height-8)*(se.value/100)));return(X,he)=>(O(),F("div",null,[z(d(ud),{class:"main-frame",horizontal:"","dbl-click-splitter":!1,onResize:E,onResized:I},{default:Ci(()=>[z(d(Ho),{size:r.value},{default:Ci(()=>[p("div",G8,[p("div",W8,[z(qy,{style:Ee(d(V)),"max-size":d(N),onResize:h},null,8,["style","max-size"]),z(Iv,{style:Ee(d(ee))},null,8,["style"])]),d(R)?le("",!0):(O(),F("button",{key:0,class:"unhide-tabview-button",onClick:v},[z(ye,{icon:d(de).ARROW_UP},null,8,["icon"]),p("span",null,P(d(x).expandTabView),1)]))])]),_:1},8,["size"]),z(d(Ho),{size:d(se)},{default:Ci(()=>[d(s).tabPaneType===d(Zs).SINGLE?(O(),We(za,{key:0,class:"full",size:d(Q),"visible-tabs":[d(Je).RECORD_INFO,d(Je).COMMENT,d(Je).SEARCH,d(Je).PV,d(Je).CHART,d(Je).PERCENTAGE_CHART],"active-tab":d(s).tab,"display-minimize-toggle":!0,onOnChangeTab:m,onOnMinimize:b},null,8,["size","visible-tabs","active-tab"])):(O(),We(d(ud),{key:1,class:"bottom-frame",vertical:"","dbl-click-splitter":!1,onResize:A,onResized:T},{default:Ci(()=>[z(d(Ho),{size:a.value},{default:Ci(()=>[z(za,{class:"full",size:d(Q),"visible-tabs":[d(Je).RECORD_INFO,d(Je).SEARCH,d(Je).PV],"active-tab":d(s).tab,onOnChangeTab:m},null,8,["size","visible-tabs","active-tab"])]),_:1},8,["size"]),z(d(Ho),null,{default:Ci(()=>[z(za,{class:"full",size:d(ae),"visible-tabs":[d(Je).COMMENT,d(Je).CHART,d(Je).PERCENTAGE_CHART],"active-tab":d(s).tab2,"display-minimize-toggle":!0,onOnChangeTab:S,onOnMinimize:b},null,8,["size","visible-tabs","active-tab"])]),_:1})]),_:1}))]),_:1},8,["size"])]),_:1})]))}});const j8=Qe(V8,[["__scopeId","data-v-e8732df8"]]);function xt(t){let e=Number(t.value);return t.max&&(e=Math.min(e,Number(t.max))),t.min&&(e=Math.max(e,Number(t.min))),e}const K8={style:{display:"inline-block"}},q8=["name","checked","value","onChange"],Y8={class:"label"},X8=Ue({__name:"HorizontalSelector",props:{value:{type:String,required:!0},items:{type:Array,required:!0},height:{type:Number,default:28}},emits:["change"],setup(t,{expose:e,emit:i}){const n=t,s=G(),o=qf(),r=Te(()=>({height:`${n.height}px`,minWidth:`${n.height*2.5}px`,fontSize:`${n.height*.5}px`,borderRadius:`${n.height*.25}px`,paddingLeft:`${n.height*.25}px`,paddingRight:`${n.height*.25}px`}));return e({setValue:c=>{s.value.querySelectorAll("input").forEach(u=>{u.value===c&&(u.checked=!0,i("change",c))})},getValue:()=>{const c=Array.from(s.value.querySelectorAll("input")).filter(u=>{if(u.checked)return u.value});return c.length>0?c[0].value:n.value}}),(c,u)=>(O(),F("div",K8,[p("div",{ref_key:"container",ref:s,class:"row wrap container"},[(O(!0),F(Re,null,Ve(t.items,h=>(O(),F("div",{key:h.value,class:"item"},[p("input",{type:"radio",name:d(o),checked:h.value===t.value,value:h.value,onChange:f=>i("change",h.value)},null,40,q8),p("div",{class:"button",style:Ee(d(r))},[p("div",Y8,P(h.label),1)],4)]))),128))],512)]))}});const Pi=Qe(X8,[["__scopeId","data-v-3118c214"]]),J8={class:"title"},Q8={class:"form-group"},Z8={class:"option-filter"},eI=["placeholder"],tI={class:"column option-list"},iI={class:"row option"},nI={class:"option-name"},sI={class:"option-unchangeable"},oI={class:"option-name"},rI={class:"option-unchangeable"},aI={class:"option-name"},lI={class:"option-unchangeable"},cI={class:"option-name"},uI={class:"option-name"},hI={key:0,class:"option-name-original"},dI=["min","max","name"],fI=["name"],pI=["name"],gI=["onClick"],mI={value:""},_I=["value"],bI=["onClick"],yI={class:"main-buttons"},vI=Ue({__name:"USIEngineOptionDialog",props:{latestEngineSetting:{type:Object,required:!0},okButtonText:{type:String,required:!1,default:"OK"}},emits:["ok","cancel"],setup(t,{emit:e}){const i=t,n=rt(),s=Ge(),o=G(),r=G(),a=G(),l=G([]),c=G({}),u=G({}),h=G(Nf());let f=!1,m=!1;n.retainBussyState(),ot(async()=>{Ct(o.value),Jt(o.value);try{const T=s.engineTimeoutSeconds;h.value=await we.getUSIEngineInfo(i.latestEngineSetting.path,T),gb(h.value,i.latestEngineSetting),r.value.value=h.value.name,f=!0}catch(T){n.pushError(T),e("cancel")}finally{n.releaseBussyState()}});const S=Te(()=>Object.values(h.value.options).sort((T,R)=>T.order<R.order?-1:1).map(T=>{const R=l.value.length>0,N={...T,value:Rn(T),visible:!R};return s.translateEngineOptionName&&(N.displayName=Vo[T.name]),R&&(N.visible=N.displayName&&gr(N.displayName,l.value)||gr(N.name,l.value)),N}));gs(()=>{if(!(!f||m)){for(const T of S.value)T.value!==void 0&&(T.type==="check"?u.value[T.name].setValue(T.value||""):c.value[T.name]&&(c.value[T.name].value=T.value+""));m=!0}}),Rt(()=>{Qt(o.value)});const b=()=>{l.value=String(a.value.value).trim().split(/ +/).filter(T=>T)},v=()=>{we.openExplorer(h.value.path)},y=async T=>{n.retainBussyState();try{const R=await we.showSelectFileDialog(),N=c.value[T];R&&N&&(N.value=R)}catch(R){n.pushError(R)}finally{n.releaseBussyState()}},E=async T=>{n.retainBussyState();try{const R=s.engineTimeoutSeconds;await we.sendUSISetOption(h.value.path,T,R)}catch(R){n.pushError(R)}finally{n.releaseBussyState()}},I=()=>{r.value.value=h.value.defaultName;for(const T of S.value){const R=h.value.options[T.name].default!==void 0?h.value.options[T.name].default+"":"";T.type==="check"?u.value[T.name].setValue(R):c.value[T.name]&&(c.value[T.name].value=R)}},k=()=>{h.value.name=r.value.value;for(const T of S.value)if(T.type==="check")h.value.options[T.name].value=u.value[T.name].getValue()||void 0;else if(c.value[T.name]){const R=c.value[T.name];h.value.options[T.name].value=R.value?T.type==="spin"?xt(R):R.value:void 0}e("ok",h.value)},A=()=>{e("cancel")};return(T,R)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:o},[p("div",J8,P(d(x).engineSettings),1),p("div",Q8,[p("div",Z8,[p("input",{ref_key:"filter",ref:a,class:"filter",placeholder:d(x).filterByOptionName,onInput:b},null,40,eI)]),p("div",tI,[p("div",iI,[p("div",nI,P(d(x).engineName),1),p("div",sI,P(h.value.defaultName),1)]),p("div",{class:it(["row option",{hidden:l.value.length}])},[p("div",oI,P(d(x).author),1),p("div",rI,P(h.value.author),1)],2),p("div",{class:it(["row option",{hidden:l.value.length}])},[p("div",aI,P(d(x).enginePath),1),p("div",lI,[p("div",null,P(h.value.path),1),p("button",{class:"thin",onClick:v},P(d(x).openDirectory),1)])],2),p("div",{class:it(["row option",{hidden:l.value.length}])},[p("div",cI,P(d(x).displayName),1),p("input",{ref_key:"engineNameInput",ref:r,class:"option-value-text",type:"text",name:"ElectronShogiEngineName"},null,512)],2),(O(!0),F(Re,null,Ve(d(S),N=>(O(),F("div",{key:N.name,class:it(["row option",{hidden:!N.visible}])},[p("div",uI,[fo(P(N.displayName||N.name)+" ",1),N.displayName?(O(),F("span",hI,P(N.name),1)):le("",!0)]),N.type==="spin"?(O(),F("input",{key:0,ref_for:!0,ref:V=>{c.value[N.name]=V},class:"option-value-number",type:"number",min:N.min,max:N.max,step:"1",name:N.name},null,8,dI)):le("",!0),N.type==="string"?(O(),F("input",{key:1,ref_for:!0,ref:V=>{c.value[N.name]=V},class:"option-value-text",type:"text",name:N.name},null,8,fI)):le("",!0),N.type==="filename"?(O(),F("input",{key:2,ref_for:!0,ref:V=>{c.value[N.name]=V},class:"option-value-filename",type:"text",name:N.name},null,8,pI)):le("",!0),N.type==="filename"?(O(),F("button",{key:3,class:"thin",onClick:V=>y(N.name)},P(d(x).select),9,gI)):le("",!0),N.type==="check"?(O(),We(Pi,{key:4,ref_for:!0,ref:V=>{u.value[N.name]=V},value:"",items:N.default?[{value:"true",label:"ON"},{value:"false",label:"OFF"}]:[{value:"",label:d(x).defaultValue},{value:"true",label:"ON"},{value:"false",label:"OFF"}]},null,8,["items"])):le("",!0),N.type==="combo"?(O(),F("select",{key:5,ref_for:!0,ref:V=>{c.value[N.name]=V},class:"option-value-combo"},[p("option",mI,P(d(x).defaultValue),1),(O(!0),F(Re,null,Ve(N.vars,V=>(O(),F("option",{key:V,value:V},P(V),9,_I))),128))],512)):le("",!0),N.type==="button"?(O(),F("button",{key:6,class:"thin",onClick:V=>E(N.name)},P(d(x).invoke),9,bI)):le("",!0)],2))),128))])]),p("button",{class:"wide",onClick:R[0]||(R[0]=N=>I())},P(d(x).resetToEngineDefaultValues),1),p("div",yI,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:R[1]||(R[1]=N=>k())},P(t.okButtonText),1),p("button",{"data-hotkey":"Escape",onClick:R[2]||(R[2]=N=>A())},P(d(x).cancel),1)])],512)]))}});const qp=Qe(vI,[["__scopeId","data-v-9ae08135"]]),SI={class:"root"},wI=["value"],xI=["value"],EI=["value"],kI={key:0,class:"row player-info"},II={class:"player-info-key"},AI={class:"player-info-value"},PI={key:1,class:"row player-info"},CI={class:"player-info-key"},TI={class:"player-info-value"},MI={key:2,class:"row player-info"},RI={class:"player-info-key"},NI={class:"player-info-value"},OI=["disabled"],LI=Ue({__name:"PlayerSelector",props:{playerUri:{type:String,required:!0},containsHuman:{type:Boolean,default:!1},engineSettings:{type:Object,required:!0},displayPonderState:{type:Boolean,default:!1},displayThreadState:{type:Boolean,default:!1},displayMultiPvState:{type:Boolean,default:!1}},emits:["select-player","update-engine-setting"],setup(t,{emit:e}){const i=t,n=rt(),s=G(),o=G(null),r=Te(()=>{if(!Wi(i.playerUri))return null;const S=i.engineSettings.getEngine(i.playerUri);return S&&Rn(S.options[Rf])==="true"?"ON":"OFF"}),a=Te(()=>{if(!Wi(i.playerUri))return null;const S=i.engineSettings.getEngine(i.playerUri);return S?Rn(S.options[hb])||Rn(S.options[db]):null}),l=Te(()=>{if(!Wi(i.playerUri))return null;const S=i.engineSettings.getEngine(i.playerUri);return S?Rn(S.options[ub])||Rn(S.options[fb]):null}),c=Te(()=>Wi(i.playerUri)),u=()=>{if(Wi(i.playerUri)){const S=i.engineSettings.getEngine(i.playerUri);if(!S){n.pushError("");return}o.value=S}},h=async S=>{o.value=null;const b=i.engineSettings.getClone();b.updateEngine(S),n.retainBussyState();try{await we.saveUSIEngineSetting(b),e("update-engine-setting",b)}catch(v){n.pushError(v)}finally{n.releaseBussyState()}},f=()=>{o.value=null},m=()=>{e("select-player",s.value.value)};return(S,b)=>(O(),F(Re,null,[p("div",null,[p("div",SI,[p("select",{ref_key:"playerSelect",ref:s,class:"player-select",size:"1",value:t.playerUri,onChange:m},[t.containsHuman?(O(),F("option",{key:0,value:ni},"",8,xI)):le("",!0),(O(!0),F(Re,null,Ve(t.engineSettings.engineList,v=>(O(),F("option",{key:v.uri,value:v.uri},P(v.name),9,EI))),128))],40,wI),t.displayPonderState?(O(),F("div",kI,[p("span",II,P(d(x).ponder)+":",1),p("span",AI,P(d(r)||"---"),1)])):le("",!0),t.displayThreadState?(O(),F("div",PI,[p("span",CI,P(d(x).numberOfThreads)+":",1),p("span",TI,P(d(a)||"---"),1)])):le("",!0),t.displayMultiPvState?(O(),F("div",MI,[p("span",RI,P(d(x).multiPV)+":",1),p("span",NI,P(d(l)||"---"),1)])):le("",!0),p("button",{class:"player-setting",disabled:!d(c),onClick:u},[z(ye,{icon:d(de).SETTINGS},null,8,["icon"]),p("span",null,P(d(x).settings),1)],8,OI)])]),o.value?(O(),We(qp,{key:0,"latest-engine-setting":o.value,"ok-button-text":d(x).save,onOk:h,onCancel:f},null,8,["latest-engine-setting","ok-button-text"])):le("",!0)],64))}});const hs=Qe(LI,[["__scopeId","data-v-28321643"]]),xc=t=>(co("data-v-b881dc33"),t=t(),uo(),t),DI={class:"title"},BI={class:"form-group players"},FI={class:"row regular-interval"},HI={class:"player"},$I={class:"top-label"},UI={class:"player"},zI={class:"top-label"},GI={class:"players-control"},WI={class:"row regular-interval"},VI={class:"form-group time-limit"},jI={class:"top-label"},KI={class:"form-item"},qI=xc(()=>p("div",{class:"form-item-label"},"",-1)),YI={class:"form-item-unit"},XI={class:"form-item-unit"},JI={class:"form-item"},QI=xc(()=>p("div",{class:"form-item-label"},"",-1)),ZI={class:"form-item-unit"},eA={class:"form-item"},tA=xc(()=>p("div",{class:"form-item-label"},"",-1)),iA={class:"form-item-unit"},nA={class:"form-item"},sA={class:"form-group others"},oA={class:"top-label"},rA={class:"form-item"},aA={class:"form-item-label"},lA={value:"current"},cA={value:"standard"},uA={value:"handicapLance"},hA={value:"handicapRightLance"},dA={value:"handicapBishop"},fA={value:"handicapRook"},pA={value:"handicapRookLance"},gA={value:"handicap2Pieces"},mA={value:"handicap4Pieces"},_A={value:"handicap6Pieces"},bA={value:"handicap8Pieces"},yA={class:"form-item"},vA={class:"form-item-label"},SA={class:"form-item"},wA={class:"form-item-label"},xA={class:"form-item"},EA={class:"form-item"},kA={class:"form-item"},IA={class:"form-item"},AA={class:"main-buttons"},PA=Ue({__name:"GameDialog",setup(t){const e=rt(),i=G(),n=G(),s=G(),o=G(),r=G(),a=G(),l=G(!1),c=G(),u=G(),h=G(!1),f=G(!1),m=G(!1),S=G(!1),b=G(xr()),v=G(new Xi),y=G(""),E=G("");let I=!1,k=!1;e.retainBussyState(),ot(async()=>{try{b.value=await we.loadGameSetting(),v.value=await we.loadUSIEngineSetting(),y.value=b.value.black.uri,E.value=b.value.white.uri,Ct(i.value),Jt(i.value),I=!0}catch(Q){e.pushError(Q),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Rt(()=>{Qt(i.value)}),gs(()=>{!I||k||(n.value.value=Math.floor(b.value.timeLimit.timeSeconds/3600),s.value.value=Math.floor(b.value.timeLimit.timeSeconds/60)%60,o.value.value=b.value.timeLimit.byoyomi,r.value.value=b.value.timeLimit.increment,a.value.value=b.value.startPosition!==void 0?b.value.startPosition:"current",l.value=b.value.enableEngineTimeout,c.value.value=b.value.maxMoves,u.value.value=b.value.repeat,h.value=b.value.swapPlayers,f.value=b.value.enableComment,m.value=b.value.enableAutoSave,S.value=b.value.humanIsFront,k=!0)});const A=Q=>{if(Wi(Q)&&v.value.hasEngine(Q)){const ae=v.value.getEngine(Q);return{name:ae.name,uri:Q,usi:ae}}return{name:"",uri:ni}},T=()=>{const Q={black:A(y.value),white:A(E.value),timeLimit:{timeSeconds:(xt(n.value)*60+xt(s.value))*60,byoyomi:xt(o.value),increment:xt(r.value)},startPosition:a.value.value!=="current"?a.value.value:void 0,enableEngineTimeout:l.value,maxMoves:xt(c.value),repeat:xt(u.value),swapPlayers:h.value,enableComment:f.value,enableAutoSave:m.value,humanIsFront:S.value},ae=Mi()?Of(Q):yb(Q);ae?e.pushError(ae):e.startGame(Q)},R=()=>{e.closeModalDialog()},N=Q=>{v.value=Q},V=Q=>{y.value=Q},ee=Q=>{E.value=Q},se=()=>{[y.value,E.value]=[E.value,y.value]};return(Q,ae)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i},[p("div",DI,P(d(x).game),1),p("div",BI,[p("div",FI,[p("div",HI,[p("div",$I,P(d(x).senteOrShitate),1),z(hs,{"player-uri":y.value,"contains-human":!0,"engine-settings":v.value,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:N,onSelectPlayer:V},null,8,["player-uri","engine-settings"])]),p("div",UI,[p("div",zI,P(d(x).goteOrUwate),1),E.value?(O(),We(hs,{key:0,"player-uri":E.value,"contains-human":!0,"engine-settings":v.value,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:N,onSelectPlayer:ee},null,8,["player-uri","engine-settings"])):le("",!0)])]),p("div",GI,[p("button",{onClick:se},[z(ye,{icon:d(de).SWAP_H},null,8,["icon"]),p("span",null,P(d(x).swapSenteGote),1)])])]),p("div",WI,[p("div",VI,[p("div",jI,P(d(x).time),1),p("div",KI,[qI,p("input",{ref_key:"hours",ref:n,class:"time",type:"number",min:"0",max:"99",step:"1"},null,512),p("div",YI,P(d(x).hoursSuffix),1),p("input",{ref_key:"minutes",ref:s,class:"time",type:"number",min:"0",max:"59",step:"1"},null,512),p("div",XI,P(d(x).minutesSuffix),1)]),p("div",JI,[QI,p("input",{ref_key:"byoyomi",ref:o,class:"time",type:"number",min:"0",max:"60",step:"1"},null,512),p("div",ZI,P(d(x).secondsSuffix),1)]),p("div",eA,[tA,p("input",{ref_key:"increment",ref:r,class:"time",type:"number",min:"0",max:"99",step:"1"},null,512),p("div",iA,P(d(x).secondsSuffix),1)]),p("div",nA,[z(_t,{label:d(x).enableEngineTimeout,value:l.value,onChange:ae[0]||(ae[0]=X=>{l.value=X})},null,8,["label","value"])])]),p("div",sA,[p("div",oA,P(d(x).others),1),p("div",rA,[p("div",aA,P(d(x).startPosition),1),p("select",{ref_key:"startPosition",ref:a},[p("option",lA,P(d(x).currentPosition),1),p("option",cA,P(d(x).nonHandicap),1),p("option",uA,P(d(x).lanceHandicap),1),p("option",hA,P(d(x).rightLanceHandicap),1),p("option",dA,P(d(x).bishopHandicap),1),p("option",fA,P(d(x).rookHandicap),1),p("option",pA,P(d(x).rookLanceHandicap),1),p("option",gA,P(d(x).twoPiecesHandicap),1),p("option",mA,P(d(x).fourPiecesHandicap),1),p("option",_A,P(d(x).sixPiecesHandicap),1),p("option",bA,P(d(x).eightPiecesHandicap),1)],512)]),p("div",yA,[p("div",vA,P(d(x).maxMoves),1),p("input",{ref_key:"maxMoves",ref:c,class:"number",type:"number",min:"1"},null,512)]),p("div",SA,[p("div",wA,P(d(x).gameRepetition),1),p("input",{ref_key:"repeat",ref:u,class:"number",type:"number",min:"1"},null,512)]),p("div",xA,[z(_t,{label:d(x).swapTurnWhenGameRepetition,value:h.value,onChange:ae[1]||(ae[1]=X=>{h.value=X})},null,8,["label","value"])]),p("div",EA,[z(_t,{label:d(x).outputComments,value:f.value,onChange:ae[2]||(ae[2]=X=>{f.value=X})},null,8,["label","value"])]),p("div",kA,[z(_t,{label:d(x).saveRecordAutomatically,value:m.value,onChange:ae[3]||(ae[3]=X=>{m.value=X})},null,8,["label","value"])]),p("div",IA,[z(_t,{label:d(x).adjustBoardToHumanPlayer,value:S.value,onChange:ae[4]||(ae[4]=X=>{S.value=X})},null,8,["label","value"])])])]),p("div",AA,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:ae[5]||(ae[5]=X=>T())},P(d(x).startGame),1),p("button",{"data-hotkey":"Escape",onClick:ae[6]||(ae[6]=X=>R())},P(d(x).cancel),1)])],512)]))}});const CA=Qe(PA,[["__scopeId","data-v-b881dc33"]]),_o=t=>(co("data-v-98134188"),t=t(),uo(),t),TA={class:"title"},MA={class:"form-group scroll"},RA={key:0,class:"form-group warning"},NA={class:"note"},OA={class:"form-group"},LA={class:"form-group"},DA={class:"form-item"},BA={class:"form-item-label-wide"},FA={key:0,value:"0"},HA=["value"],$A=_o(()=>p("hr",null,null,-1)),UA={class:"form-item"},zA={class:"form-item-label-wide"},GA=["value"],WA=["value"],VA={key:0,class:"form-group warning"},jA={class:"note"},KA={key:1,class:"form-group warning"},qA={class:"note"},YA={class:"form-item"},XA={class:"form-item-label-wide"},JA=_o(()=>p("datalist",{id:"csa-server-host"},[p("option",{value:"gserver.computer-shogi.org"}),p("option",{value:"wdoor.c.u-tokyo.ac.jp"}),p("option",{value:"localhost"})],-1)),QA={class:"form-item"},ZA={class:"form-item-label-wide"},eP=_o(()=>p("datalist",{id:"csa-server-port-number"},[p("option",{value:"4081"})],-1)),tP={class:"form-item"},iP=_o(()=>p("div",{class:"form-item-label-wide"},"ID",-1)),nP={class:"form-item"},sP={class:"form-item-label-wide"},oP={class:"form-item"},rP=_o(()=>p("div",{class:"form-item-label-wide"},null,-1)),aP={class:"form-group warning"},lP={key:0,class:"note"},cP={key:1,class:"note"},uP={class:"form-item"},hP={class:"form-item-label-wide"},dP={class:"form-group"},fP={class:"form-item"},pP={class:"form-item-label-wide number"},gP={class:"form-item"},mP={class:"form-item-label-wide"},_P={class:"form-item"},bP={class:"form-item-label-wide"},yP={class:"form-item"},vP={class:"form-item-label-wide"},SP={class:"form-item"},wP={class:"form-item-label-wide"},xP={class:"main-buttons"},EP=Ue({__name:"CSAGameDialog",setup(t){const e=rt(),i=G(),n=G(),s=G(en.V121),o=G(),r=G(),a=G(),l=G(),c=G(!0),u=G(),h=G(!1),f=G(!1),m=G(!1),S=G(!1),b=G(!1),v=G(T1()),y=G(new Xi),E=G("");let I=!1,k=!1;e.retainBussyState(),ot(async()=>{try{b.value=await we.isEncryptionAvailable(),v.value=await we.loadCSAGameSettingHistory(),y.value=await we.loadUSIEngineSetting(),Ct(i.value),Jt(i.value),I=!0}catch(X){e.pushError(X),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Rt(()=>{Qt(i.value)}),gs(()=>{if(!I||k)return;const X=M1(v.value,0);n.value.value=s.value=X.server.protocolVersion,o.value.value=X.server.host,r.value.value=X.server.port,a.value.value=X.server.id,l.value.value=X.server.password,u.value.value=X.repeat,h.value=X.autoRelogin,f.value=X.enableComment,m.value=X.enableAutoSave,S.value=X.autoFlip,E.value=X.player.uri,k=!0});const A=X=>{if(Wi(X)&&y.value.hasEngine(X)){const he=y.value.getEngine(X);return{name:he.name,uri:X,usi:he}}return{name:"",uri:ni}},T=()=>{const X={player:A(E.value),server:{protocolVersion:n.value.value,host:String(o.value.value||"").trim(),port:Number(r.value.value),id:String(a.value.value||""),password:String(l.value.value||"")},repeat:xt(u.value),autoRelogin:h.value,enableComment:f.value,enableAutoSave:m.value,autoFlip:S.value},he=C1(X);he?e.pushError(he):e.loginCSAGame(X,{saveHistory:c.value})},R=()=>{e.closeModalDialog()},N=async X=>{y.value=X},V=X=>{E.value=X},ee=X=>{l.value.type=X?"text":"password"},se=X=>{const he=X.target,ge=v.value.serverHistory[Number(he.value)];ge&&(n.value.value=ge.protocolVersion,o.value.value=ge.host,r.value.value=ge.port,a.value.value=ge.id,l.value.value=ge.password)},Q=()=>{s.value=n.value.value},ae=Te(()=>{const X=Ge();return X.enableCSALog&&X.enableAppLog&&X.enableUSILog});return(X,he)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i,class:"root"},[p("div",TA,P(d(x).csaProtocolOnlineGame),1),p("div",MA,[d(ae)?le("",!0):(O(),F("div",RA,[p("div",NA,P(d(x).someLogsDisabled)+" "+P(d(x).logsRecommendedForCSAProtocol)+" "+P(d(x).pleaseEnableLogsAndRestart),1)])),p("div",OA,[p("div",null,P(d(x).player),1),z(hs,{"player-uri":E.value,"contains-human":!0,"engine-settings":y.value,"display-ponder-state":!0,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:N,onSelectPlayer:V},null,8,["player-uri","engine-settings"])]),p("div",LA,[p("div",DA,[p("div",BA,P(d(x).selectFromHistory),1),p("select",{class:"long-text",value:"0",onChange:se},[v.value.serverHistory.length===0?(O(),F("option",FA,P(d(x).noHistory),1)):le("",!0),(O(!0),F(Re,null,Ve(v.value.serverHistory,(ge,ne)=>(O(),F("option",{key:ne,value:ne},P(ge.host)+":"+P(ge.port)+" "+P(ge.id),9,HA))),128))],32)]),$A,p("div",UA,[p("div",zA,P(d(x).version),1),p("select",{ref_key:"protocolVersion",ref:n,class:"long-text",value:"CSA_v121",onChange:Q},[p("option",{value:d(en).V121},P(d(x).csaProtocolV121),9,GA),p("option",{value:d(en).V121_FLOODGATE},P(d(x).csaProtocolV121WithPVComment),9,WA)],544)]),s.value===d(en).V121?(O(),F("div",VA,[p("div",jA,P(d(x).notSendPVOnStandardCSAProtocol),1)])):le("",!0),s.value===d(en).V121_FLOODGATE?(O(),F("div",KA,[p("div",qA,P(d(x).sendPVDoNotUseOnWCSC),1)])):le("",!0),p("div",YA,[p("div",XA,P(d(x).hostToConnect),1),p("input",{ref_key:"host",ref:o,class:"long-text",list:"csa-server-host",type:"text"},null,512),JA]),p("div",QA,[p("div",ZA,P(d(x).portNumber),1),p("input",{ref_key:"port",ref:r,class:"number",list:"csa-server-port-number",type:"number"},null,512),eP]),p("div",tP,[iP,p("input",{ref_key:"id",ref:a,class:"long-text",type:"text"},null,512)]),p("div",nP,[p("div",sP,P(d(x).password),1),p("input",{ref_key:"password",ref:l,class:"long-text",type:"password"},null,512)]),p("div",oP,[rP,z(_t,{label:d(x).showPassword,value:!1,onChange:ee},null,8,["label"])]),p("div",aP,[b.value?(O(),F("div",lP,P(d(x).csaProtocolSendPlaintextPassword),1)):(O(),F("div",cP,P(d(x).passwordWillSavedPlaintextBecauseOSSideEncryptionNotAvailable)+" "+P(d(x).pleaseUncheckSaveHistoryIfNotWantSave)+" "+P(d(x).csaProtocolSendPlaintextPasswordRegardlessOfHistory),1))]),p("div",uP,[p("div",hP,P(d(x).saveHistory),1),z(_t,{value:c.value,onChange:he[0]||(he[0]=ge=>{c.value=ge})},null,8,["value"])])]),p("div",dP,[p("div",fP,[p("div",pP,P(d(x).gameRepetition),1),p("input",{ref_key:"repeat",ref:u,class:"number",type:"number",min:"1"},null,512)]),p("div",gP,[p("div",mP,P(d(x).autoRelogin),1),z(_t,{value:h.value,onChange:he[1]||(he[1]=ge=>{h.value=ge})},null,8,["value"])]),p("div",_P,[p("div",bP,P(d(x).outputComments),1),z(_t,{value:f.value,onChange:he[2]||(he[2]=ge=>{f.value=ge})},null,8,["value"])]),p("div",yP,[p("div",vP,P(d(x).saveRecordAutomatically),1),z(_t,{value:m.value,onChange:he[3]||(he[3]=ge=>{m.value=ge})},null,8,["value"])]),p("div",SP,[p("div",wP,P(d(x).adjustBoardAutomatically),1),z(_t,{value:S.value,onChange:he[4]||(he[4]=ge=>{S.value=ge})},null,8,["value"])])])]),p("div",xP,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:he[5]||(he[5]=ge=>T())},P(d(x).startGame),1),p("button",{"data-hotkey":"Escape",onClick:he[6]||(he[6]=ge=>R())},P(d(x).cancel),1)])],512)]))}});const kP=Qe(EP,[["__scopeId","data-v-98134188"]]),IP={class:"title"},AP={class:"form-group"},PP={class:"form-group"},CP=["onClick"],TP={class:"form-item center"},MP={class:"main-buttons"},RP=Ue({__name:"ResearchDialog",setup(t){const e=rt(),i=G(),n=G(hl()),s=G(new Xi),o=G(""),r=G([]);e.retainBussyState(),ot(async()=>{var u,h;Ct(i.value),Jt(i.value);try{n.value=await we.loadResearchSetting(),s.value=await we.loadUSIEngineSetting(),o.value=((u=n.value.usi)==null?void 0:u.uri)||"",r.value=((h=n.value.secondaries)==null?void 0:h.map(f=>{var m;return((m=f.usi)==null?void 0:m.uri)||""}))||[]}catch(f){e.pushError(f),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Rt(()=>{Qt(i.value)});const a=()=>{const u=s.value.getEngine(o.value),h=[];for(const S of r.value){const b=s.value.getEngine(S);h.push({usi:b})}const f={usi:u,secondaries:h},m=vb(f);if(m){e.pushError(m);return}e.startResearch(f)},l=()=>{e.closeModalDialog()},c=async u=>{s.value=u};return(u,h)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i,class:"root"},[p("div",IP,P(d(x).research),1),p("div",AP,[p("div",PP,[z(hs,{"player-uri":o.value,"engine-settings":s.value,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:c,onSelectPlayer:h[0]||(h[0]=f=>{o.value=f})},null,8,["player-uri","engine-settings"])]),(O(!0),F(Re,null,Ve(r.value,(f,m)=>(O(),F("div",{key:m,class:"form-group"},[z(hs,{"player-uri":f,"engine-settings":s.value,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:c,onSelectPlayer:S=>{r.value[m]=S}},null,8,["player-uri","engine-settings","onSelectPlayer"]),p("button",{class:"remove-button",onClick:S=>r.value.splice(m,1)},P(d(x).remove),9,CP)]))),128)),p("div",TP,[p("button",{onClick:h[1]||(h[1]=f=>r.value.push(""))},P(d(x).addNthEngine(r.value.length+2)),1)])]),p("div",MP,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:h[2]||(h[2]=f=>a())},P(d(x).startResearch),1),p("button",{"data-hotkey":"Escape",onClick:h[3]||(h[3]=f=>l())},P(d(x).cancel),1)])],512)]))}});const NP=Qe(RP,[["__scopeId","data-v-7c566609"]]),OP={class:"title"},LP={class:"form-group"},DP={class:"engine-filter"},BP=["placeholder"],FP={class:"column engine-list"},HP={key:0,class:"engine"},$P=["value"],UP={class:"engine-name"},zP=["onClick"],GP=["onClick"],WP=["onClick"],VP={class:"main-buttons"},jP=Ue({__name:"USIEngineManagementDialog",setup(t){const e=rt(),i=G(),n=G(null),s=G(new Xi),o=G(),r=G([]);e.retainBussyState(),ot(async()=>{Ct(i.value),Jt(i.value);try{s.value=await we.loadUSIEngineSetting()}catch(y){e.pushError(y),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Rt(()=>{Qt(i.value)});const a=Te(()=>s.value.engineList.map(y=>({uri:y.uri,name:y.name,visible:r.value.length==0||gr(y.name,r.value)||gr(y.defaultName,r.value)}))),l=()=>{r.value=String(o.value.value).trim().split(/ +/).filter(y=>y)},c=async()=>{try{e.retainBussyState();const y=await we.showSelectUSIEngineDialog();if(!y)return;const I=Ge().engineTimeoutSeconds;s.value.addEngine(await we.getUSIEngineInfo(y,I))}catch(y){e.pushError(y)}finally{e.releaseBussyState()}},u=y=>{s.value.removeEngine(y)},h=y=>{n.value=s.value.getEngine(y)},f=y=>{const E=s.value.getEngine(y),I=pb(E);s.value.addEngine(I)},m=async()=>{try{e.retainBussyState(),await we.saveUSIEngineSetting(s.value),e.destroyModalDialog()}catch(y){e.pushError(y)}finally{e.releaseBussyState()}},S=()=>{e.closeModalDialog()},b=y=>{s.value.updateEngine(y),n.value=null},v=()=>{n.value=null};return(y,E)=>(O(),F(Re,null,[p("div",null,[p("dialog",{ref_key:"dialog",ref:i},[p("div",OP,P(d(x).engineManagement),1),p("div",LP,[p("div",DP,[p("input",{ref_key:"filter",ref:o,class:"filter",placeholder:d(x).filterByEngineName,onInput:l},null,40,BP)]),p("div",FP,[s.value.engineList.length===0?(O(),F("div",HP,P(d(x).noEngineRegistered),1)):le("",!0),(O(!0),F(Re,null,Ve(d(a),I=>(O(),F("div",{key:I.uri,class:it(["row engine",{hidden:!I.visible}]),value:I.uri},[p("div",UP,P(I.name),1),p("button",{onClick:k=>h(I.uri)},P(d(x).config),9,zP),p("button",{onClick:k=>f(I.uri)},P(d(x).duplicate),9,GP),p("button",{onClick:k=>u(I.uri)},P(d(x).remove),9,WP)],10,$P))),128))])]),p("button",{class:"wide",onClick:E[0]||(E[0]=I=>c())},P(d(x).add),1),p("div",VP,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:E[1]||(E[1]=I=>m())},P(d(x).saveAndClose),1),p("button",{"data-hotkey":"Escape",onClick:E[2]||(E[2]=I=>S())},P(d(x).cancel),1)])],512)]),n.value?(O(),We(qp,{key:0,"latest-engine-setting":n.value,onOk:b,onCancel:v},null,8,["latest-engine-setting"])):le("",!0)],64))}});const KP=Qe(jP,[["__scopeId","data-v-1a55690d"]]),qP=""+new URL("../board/grid_square.svg",import.meta.url).href,YP=["src"],XP=["src"],JP=["src"],QP=["src"],ZP=["src"],eC=["src"],tC=["src"],iC=Ue({__name:"SimpleBoardView",props:{maxSize:{type:kt,required:!0},position:{type:Object,required:!0},header:{type:String,required:!1,default:null},footer:{type:String,required:!1,default:null},lastMove:{type:Object,required:!1,default:null}},setup(t){const e=t,i={pawn:"./piece/gothic/pawn.png",lance:"./piece/gothic/lance.png",knight:"./piece/gothic/knight.png",silver:"./piece/gothic/silver.png",gold:"./piece/gothic/gold.png",bishop:"./piece/gothic/bishop.png",rook:"./piece/gothic/rook.png",king:"./piece/gothic/king2.png",promPawn:"./piece/gothic/prom_pawn.png",promLance:"./piece/gothic/prom_lance.png",promKnight:"./piece/gothic/prom_knight.png",promSilver:"./piece/gothic/prom_silver.png",horse:"./piece/gothic/horse.png",dragon:"./piece/gothic/dragon.png"};function n(o){return{size:o,headerX:o*.5,headerY:o*.01,footerX:o*.01,footerY:o*.83,boardLeft:o*.15,boardTop:o*.12,boardSize:o*.7,boardBorderSize:o*.004,fileLeft:o*.168,fileTop:o*.078,rankLeft:o*.85,rankTop:o*.138,labelSize:o*.04,pieceSize:o*.7/9,fontSize:o*.038,handSize:o*.053,blackHandLeft:o*.9,blackHandTop:o*.12,whiteHandLeft:o*(.1-.053),whiteHandTop:o*.82}}const s=Te(()=>{const o=n(Math.min(e.maxSize.width,e.maxSize.height));return{frameStyle:{width:`${o.size}px`,height:`${o.size}px`},headerStyle:{transform:"translate(-50%, 0%)",left:`${o.headerX}px`,top:`${o.headerY}px`,"font-size":`${o.fontSize}px`},footerStyle:{left:`${o.footerX}px`,top:`${o.footerY}px`,"font-size":`${o.fontSize}px`},boardStyle:{left:`${o.boardLeft-o.boardBorderSize}px`,top:`${o.boardTop-o.boardBorderSize}px`},boardImageStyle:{width:`${o.boardSize+o.boardBorderSize*2}px`,height:`${o.boardSize+o.boardBorderSize*2}px`},files:[1,2,3,4,5,6,7,8,9].map(r=>({style:{left:`${o.fileLeft+o.pieceSize*(9-r)}px`,top:`${o.fileTop}px`},image:`./character/arabic_numerals/${r}.png`})),fileImageStyle:{width:`${o.labelSize}px`,height:`${o.labelSize}px`},ranks:[1,2,3,4,5,6,7,8,9].map(r=>({style:{left:`${o.rankLeft}px`,top:`${o.rankTop+o.pieceSize*(r-1)}px`},image:`./character/numerals/${r}.png`})),rankImageStyle:{width:`${o.labelSize}px`,height:`${o.labelSize}px`},lastMoveStyle:function(){if(!e.lastMove)return null;const r=e.lastMove.to;return{"background-color":"gold",left:`${o.boardLeft+o.boardSize*r.x/9}px`,top:`${o.boardTop+o.boardSize*r.y/9}px`,width:`${o.pieceSize}px`,height:`${o.pieceSize}px`}}(),boardPieces:e.position.board.listNonEmptySquares().map(r=>{const a=e.position.board.at(r);return{id:`${r.x},${r.y}`,style:{left:`${o.boardLeft+o.boardSize*r.x/9}px`,top:`${o.boardTop+o.boardSize*r.y/9}px`},imageStyle:{width:`${o.pieceSize}px`,height:`${o.pieceSize}px`,transform:a.color==="white"?"rotate(180deg)":void 0},image:i[a.type]}}),blackHandImageStyle:{width:`${o.handSize}px`,height:"auto"},blackHandSymbol:{style:{left:`${o.blackHandLeft}px`,top:`${o.blackHandTop}px`},image:"./character/turns/black.png"},blackHandPieces:function(){const r=[];for(const{type:a,count:l}of e.position.blackHand.counts)l!==0&&(r.push({id:a,style:{left:`${o.blackHandLeft}px`,top:`${o.blackHandTop+o.handSize*(r.length+1)}px`},image:`./piece/gothic/${a}.png`}),l!==1&&r.push({id:`${a}-number`,style:{left:`${o.blackHandLeft}px`,top:`${o.blackHandTop+o.handSize*(r.length+1)}px`},image:`./character/numerals/${l}.png`}));return r.length===0?[{id:"empty",style:{left:`${o.blackHandLeft}px`,top:`${o.blackHandTop+o.handSize}px`},image:"./character/hand/nashi.png"}]:r}(),whiteHandImageStyle:{width:`${o.handSize}px`,height:"auto",transform:"rotate(180deg)"},whiteHandSymbol:{style:{left:`${o.whiteHandLeft}px`,top:`${o.whiteHandTop}px`,transform:"translate(0%, -100%)"},image:"./character/turns/white.png"},whiteHandPieces:function(){const r=[];for(const{type:a,count:l}of e.position.whiteHand.counts)l!==0&&(r.push({id:a,style:{left:`${o.whiteHandLeft}px`,top:`${o.whiteHandTop-o.handSize*(r.length+1)}px`,transform:"translate(0%, -100%)"},image:`./piece/gothic/${a}.png`}),l!==1&&r.push({id:`${a}-number`,style:{left:`${o.whiteHandLeft}px`,top:`${o.whiteHandTop-o.handSize*(r.length+1)}px`,transform:"translate(0%, -100%)"},image:`./character/numerals/${l}.png`}));return r.length===0?[{id:"empty",style:{left:`${o.whiteHandLeft}px`,top:`${o.whiteHandTop-o.handSize}px`,transform:"translate(0%, -100%)"},image:"./character/hand/nashi.png"}]:r}()}});return(o,r)=>(O(),F("div",null,[p("div",{class:"frame",style:Ee(d(s).frameStyle)},[t.header?(O(),F("div",{key:0,class:"header",style:Ee(d(s).headerStyle)},P(t.header),5)):le("",!0),t.footer?(O(),F("div",{key:1,class:"footer",style:Ee(d(s).footerStyle)},P(t.footer),5)):le("",!0),d(s).lastMoveStyle?(O(),F("div",{key:2,style:Ee(d(s).lastMoveStyle)},null,4)):le("",!0),p("div",{class:"board-grid",style:Ee(d(s).boardStyle)},[p("img",{src:qP,style:Ee(d(s).boardImageStyle)},null,4)],4),(O(!0),F(Re,null,Ve(d(s).files,a=>(O(),F("div",{key:a.image,style:Ee(a.style)},[p("img",{src:a.image,style:Ee(d(s).fileImageStyle)},null,12,YP)],4))),128)),(O(!0),F(Re,null,Ve(d(s).ranks,a=>(O(),F("div",{key:a.image,style:Ee(a.style)},[p("img",{src:a.image,style:Ee(d(s).rankImageStyle)},null,12,XP)],4))),128)),(O(!0),F(Re,null,Ve(d(s).boardPieces,a=>(O(),F("div",{key:a.id,style:Ee(a.style)},[p("img",{src:a.image,style:Ee(a.imageStyle)},null,12,JP)],4))),128)),p("div",{style:Ee(d(s).blackHandSymbol.style)},[p("img",{src:d(s).blackHandSymbol.image,style:Ee(d(s).blackHandImageStyle)},null,12,QP)],4),(O(!0),F(Re,null,Ve(d(s).blackHandPieces,a=>(O(),F("div",{key:a.id,style:Ee(a.style)},[p("img",{src:a.image,style:Ee(d(s).blackHandImageStyle)},null,12,ZP)],4))),128)),p("div",{style:Ee(d(s).whiteHandSymbol.style)},[p("img",{src:d(s).whiteHandSymbol.image,style:Ee(d(s).whiteHandImageStyle)},null,12,eC)],4),(O(!0),F(Re,null,Ve(d(s).whiteHandPieces,a=>(O(),F("div",{key:a.id,style:Ee(a.style)},[p("img",{src:a.image,style:Ee(d(s).whiteHandImageStyle)},null,12,tC)],4))),128))],4)]))}});const nC=Qe(iC,[["__scopeId","data-v-ca9c5577"]]),Ec=t=>(co("data-v-6e638aa2"),t=t(),uo(),t),sC={class:"form-item center"},oC=["value"],rC=["value"],aC=["value"],lC=Ec(()=>p("span",{class:"form-item-unit"},"px",-1)),cC=["placeholder"],uC={class:"form-item center"},hC=Ec(()=>p("span",null,"PNG",-1)),dC=Ec(()=>p("span",null,"JPEG",-1)),fC=Ue({__name:"ExportPositionImageDialog",setup(t){const s=1.7777777777777777,o=rt(),r=Ge(),a=Te(()=>jf(o.record.metadata)),l=Te(()=>Kf(o.record.metadata)),c=o.record,u=c.current.move instanceof ct?c.current.move:null,h=G(),f=G(),m=G(),S=G(),b=xi(new kt(window.innerWidth,window.innerHeight)),v=G(window.devicePixelRatio),y=u?`${c.current.number} ${Hn(c.position,u)}`:c.current.nextColor===U.BLACK?"":"",E=new lr,I=()=>{E.after(()=>{b.width=window.innerWidth,b.height=window.innerHeight},100),v.value=window.devicePixelRatio};ot(()=>{Ct(h.value),Jt(h.value),window.addEventListener("resize",I),m.value.value=r.positionImageSize,S.value.value=r.positionImageHeader}),Rt(()=>{Qt(h.value),window.removeEventListener("resize",I)});const k=Te(()=>{const Q=r.positionImageSize/v.value,ae=Q*s;return new kt(Math.min(ae,b.width-80),Math.min(Q,b.height-150))}),A=Q=>{const ae=Q.target;r.updateAppSetting({positionImageSize:parseInt(ae.value)||400})},T=Q=>{const ae=Q.target;r.updateAppSetting({positionImageHeader:ae.value})},R=Q=>{const ae=Q.target;r.updateAppSetting({positionImageStyle:ae.value})},N=()=>{const ae=f.value.getBoundingClientRect();return new L_(ae.x,ae.y,ae.width,ae.height)},V=()=>{we.exportCaptureAsPNG(N()).catch(Q=>{o.pushError(Q)})},ee=()=>{we.exportCaptureAsJPEG(N()).catch(Q=>{o.pushError(Q)})},se=()=>{o.closeModalDialog()};return(Q,ae)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:h},[p("div",{ref_key:"board",ref:f,class:it(["board",d(r).positionImageStyle])},[d(r).positionImageStyle===d(Es).BOOK?(O(),We(nC,{key:0,"max-size":d(k),position:d(c).position,header:d(r).positionImageHeader||d(y),footer:d(c).current.comment,"last-move":d(u)},null,8,["max-size","position","header","footer","last-move"])):(O(),We(ec,{key:1,"piece-image-type":d(r).pieceImage,"board-image-type":d(r).boardImage,"piece-stand-image-type":d(r).pieceStandImage,"board-label-type":d(r).boardLabelType,"custom-board-image-url":d(r).boardImageFileURL,"custom-piece-stand-image-url":d(r).pieceStandImageFileURL,"max-size":d(k),position:d(c).position,"last-move":d(u),flip:d(r).boardFlipping,"black-player-name":d(a),"white-player-name":d(l)},null,8,["piece-image-type","board-image-type","piece-stand-image-type","board-label-type","custom-board-image-url","custom-piece-stand-image-url","max-size","position","last-move","flip","black-player-name","white-player-name"]))],2),p("div",sC,[p("select",{value:d(r).positionImageStyle,onChange:R},[p("option",{value:d(Es).BOOK},P(d(x).bookStyle),9,rC),p("option",{value:d(Es).GAME},P(d(x).gameStyle),9,aC)],40,oC),p("input",{ref_key:"imageSize",ref:m,class:"size",type:"number",min:"400",max:"2000",onInput:A},null,544),lC,p("input",{ref_key:"headerText",ref:S,class:it([{hidden:d(r).positionImageStyle===d(Es).GAME},"header"]),placeholder:d(x).typeCustomTitleHere,onInput:T},null,42,cC)]),p("div",uC,[p("button",{autofocus:"","data-hotkey":"Enter",onClick:V},[z(ye,{icon:d(de).SAVE},null,8,["icon"]),hC]),p("button",{autofocus:"","data-hotkey":"Enter",onClick:ee},[z(ye,{icon:d(de).SAVE},null,8,["icon"]),dC]),p("button",{autofocus:"","data-hotkey":"Escape",onClick:se},[z(ye,{icon:d(de).CLOSE},null,8,["icon"]),p("span",null,P(d(x).close),1)])])],512)]))}});const pC=Qe(fC,[["__scopeId","data-v-6e638aa2"]]),gC={class:"container"},mC=["src"],_C=Ue({__name:"ImageSelector",props:{defaultUrl:{type:String,default:""}},emits:["select"],setup(t,{emit:e}){const i=t,n=rt(),s=G(i.defaultUrl),o=async()=>{n.retainBussyState();try{const r=await we.showSelectImageDialog(s.value);r&&(s.value=r,e("select",r))}catch(r){n.pushError(r)}finally{n.releaseBussyState()}};return(r,a)=>(O(),F("div",null,[p("div",gC,[p("button",{class:"thin select",onClick:o},P(d(x).select),1),s.value?(O(),F("img",{key:0,ref:"preview",class:"preview",src:s.value},null,8,mC)):le("",!0)])]))}});const Ga=Qe(_C,[["__scopeId","data-v-b16a3cda"]]),wt=t=>(co("data-v-92971c26"),t=t(),uo(),t),bC={class:"title"},yC={class:"form-group scroll settings"},vC={class:"section"},SC={class:"section-title"},wC={class:"form-item"},xC={class:"form-item-label-wide"},EC=wt(()=>p("div",{class:"form-group warning"},[p("div",{class:"note"},"  We'd like your help to translate. "),p("div",{class:"note"},"  You should restart this app to change the language. ")],-1)),kC={class:"form-item"},IC={class:"form-item-label-wide"},AC={class:"form-item"},PC={class:"form-item-label-wide"},CC=wt(()=>p("div",{class:"form-item-label-wide"},null,-1)),TC={class:"form-item"},MC={class:"form-item-label-wide"},RC={class:"form-item"},NC={class:"form-item-label-wide"},OC=wt(()=>p("div",{class:"form-item-label-wide"},null,-1)),LC={class:"form-item"},DC={class:"form-item-label-wide"},BC=wt(()=>p("div",{class:"form-item-label-wide"},null,-1)),FC={class:"form-item"},HC={class:"form-item-label-wide"},$C={class:"form-item-label-wide"},UC={class:"form-item-label-wide"},zC={class:"form-item"},GC={class:"form-item-label-wide"},WC=wt(()=>p("hr",null,null,-1)),VC={class:"section"},jC={class:"section-title"},KC={class:"form-item"},qC={class:"form-item-label-wide"},YC=["value"],XC=wt(()=>p("div",{class:"form-item-unit"},"%",-1)),JC={class:"form-item"},QC={class:"form-item-label-wide"},ZC=["value"],eT=wt(()=>p("div",{class:"form-item-unit"},"%",-1)),tT={class:"form-item"},iT={class:"form-item-label-wide"},nT=["value"],sT={class:"form-item-unit"},oT={class:"form-item"},rT={class:"form-item-label-wide"},aT=["value"],lT={value:"all"},cT={value:"onlyUser"},uT=wt(()=>p("hr",null,null,-1)),hT={class:"section"},dT={class:"section-title"},fT={class:"form-item"},pT={class:"form-item-label-wide"},gT=["value"],mT=wt(()=>p("option",{value:"crlf"},"CR + LF (Windows)",-1)),_T=wt(()=>p("option",{value:"lf"},"LF (UNIX/Mac)",-1)),bT={value:"cr"},yT={class:"form-item"},vT={class:"form-item-label-wide"},ST=["value"],wT=wt(()=>p("hr",null,null,-1)),xT={class:"section"},ET={class:"section-title"},kT={class:"form-item"},IT={class:"form-item-label-wide"},AT={class:"form-item-unit"},PT={class:"form-item"},CT={class:"form-item-label-wide"},TT=["value"],MT={class:"form-item-unit"},RT=wt(()=>p("hr",null,null,-1)),NT={class:"section"},OT={class:"section-title"},LT={class:"form-item"},DT={class:"form-item-label-wide"},BT=["value"],FT=["value"],HT=["value"],$T={class:"form-item"},UT={class:"form-item-label-wide"},zT=["value"],GT={class:"form-item-unit"},WT={class:"form-item"},VT=wt(()=>p("div",{class:"form-item-label-wide"},"",-1)),jT=["value"],KT=wt(()=>p("div",{class:"form-item-unit"},"%",-1)),qT={class:"form-item"},YT=wt(()=>p("div",{class:"form-item-label-wide"},"",-1)),XT=["value"],JT=wt(()=>p("div",{class:"form-item-unit"},"%",-1)),QT={class:"form-item"},ZT=wt(()=>p("div",{class:"form-item-label-wide"},"",-1)),eM=["value"],tM=wt(()=>p("div",{class:"form-item-unit"},"%",-1)),iM={class:"form-item"},nM=wt(()=>p("div",{class:"form-item-label-wide"},"",-1)),sM=["value"],oM=wt(()=>p("div",{class:"form-item-unit"},"%",-1)),rM=wt(()=>p("hr",null,null,-1)),aM={class:"section"},lM={class:"section-title"},cM={class:"form-group warning"},uM={key:0,class:"note"},hM={key:1,class:"note"},dM={key:2,class:"note"},fM={key:3,class:"note"},pM={class:"form-item"},gM={class:"form-item-label-wide"},mM={class:"form-item"},_M={class:"form-item-label-wide"},bM={class:"form-item"},yM={class:"form-item-label-wide"},vM={class:"form-item"},SM={class:"form-item-label-wide"},wM={class:"main-buttons"},xM=Ue({__name:"AppSettingDialog",setup(t){const e={"\r\n":"crlf","\n":"lf","\r":"cr"},i={crlf:`\r
`,lf:`
`,cr:"\r"},n=rt(),s=Ge(),o=G(),r=G(s.language),a=G(s.thema),l=G(s.backgroundImageType),c=G(),u=G(s.pieceImage),h=G(s.boardImage),f=G(),m=G(s.pieceStandImage),S=G(),b=G(s.boardLabelType!=Ls.NONE),v=G(s.leftSideControlType!=Ds.NONE),y=G(s.rightSideControlType!=Bs.NONE),E=G(s.tabPaneType),I=G(),k=G(),A=G(),T=G(),R=G(),N=G(),V=G(s.translateEngineOptionName),ee=G(),se=G(),Q=G(),ae=G(),X=G(),he=G(),ge=G(),ne=G(s.enableAppLog),ie=G(s.enableUSILog),ce=G(s.enableCSALog),Ne=G(s.logLevel),Me=G(s.backgroundImageFileURL),xe=G(s.boardImageFileURL),Ze=G(s.pieceStandImageFileURL);ot(()=>{Ct(o.value),Jt(o.value)}),Rt(()=>{Qt(o.value)});const nt=async()=>{const Xe={language:r.value,thema:a.value,backgroundImageType:l.value,pieceImage:u.value,boardImage:h.value,pieceStandImage:m.value,boardLabelType:b.value?Ls.STANDARD:Ls.NONE,leftSideControlType:v.value?Ds.STANDARD:Ds.NONE,rightSideControlType:y.value?Bs.STANDARD:Bs.NONE,tabPaneType:E.value,pieceVolume:xt(I.value),clockVolume:xt(k.value),clockPitch:xt(A.value),clockSoundTarget:T.value.value,returnCode:i[R.value.value],autoSaveDirectory:N.value.value,translateEngineOptionName:V.value,engineTimeoutSeconds:xt(ee.value),evaluationViewFrom:se.value.value,coefficientInSigmoid:xt(Q.value),badMoveLevelThreshold1:xt(ae.value),badMoveLevelThreshold2:xt(X.value),badMoveLevelThreshold3:xt(he.value),badMoveLevelThreshold4:xt(ge.value),enableAppLog:ne.value,enableUSILog:ie.value,enableCSALog:ce.value,logLevel:Ne.value};Xe.backgroundImageType!==_i.NONE&&(Xe.backgroundImageFileURL=Me.value),Xe.boardImage===ut.CUSTOM_IMAGE&&(Xe.boardImageFileURL=xe.value),Xe.pieceStandImage===Kt.CUSTOM_IMAGE&&(Xe.pieceStandImageFileURL=Ze.value),n.retainBussyState();try{await Ge().updateAppSetting(Xe),n.closeAppSettingDialog()}catch(me){n.pushError(me)}finally{n.releaseBussyState()}},mt=async()=>{n.retainBussyState();try{const Xe=await we.showSelectDirectoryDialog(N.value.value);Xe&&(N.value.value=Xe)}catch(Xe){n.pushError(Xe)}finally{n.releaseBussyState()}},et=()=>{n.closeAppSettingDialog()};return(Xe,me)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:o},[p("div",bC,P(d(x).appSettings),1),p("div",yC,[p("div",vC,[p("div",SC,P(d(x).view),1),p("div",wC,[p("div",xC,P(d(x).language),1),z(Pi,{class:"selector",value:r.value,items:[{label:"",value:d(dn).JA},{label:"English",value:d(dn).EN}],onChange:me[0]||(me[0]=Ie=>{r.value=Ie})},null,8,["value","items"])]),EC,p("div",kC,[p("div",IC,P(d(x).theme),1),z(Pi,{class:"selector",value:a.value,items:[{label:d(x).green,value:d(Mn).STANDARD},{label:d(x).cherryBlossom,value:d(Mn).CHERRY_BLOSSOM},{label:d(x).autumn,value:d(Mn).AUTUMN},{label:d(x).snow,value:d(Mn).SNOW},{label:d(x).dark,value:d(Mn).DARK}],onChange:me[1]||(me[1]=Ie=>{a.value=Ie})},null,8,["value","items"])]),p("div",AC,[p("div",PC,P(d(x).backgroundImage),1),z(Pi,{class:"selector",value:l.value,items:[{label:d(x).none,value:d(_i).NONE},{label:d(x).bgCover,value:d(_i).COVER},{label:d(x).bgContain,value:d(_i).CONTAIN},{label:d(x).bgTile,value:d(_i).TILE}],onChange:me[2]||(me[2]=Ie=>{l.value=Ie})},null,8,["value","items"])]),p("div",{ref_key:"backgroundImageSelector",ref:c,class:it(["form-item",{hidden:l.value===d(_i).NONE}])},[CC,z(Ga,{class:"image-selector","default-url":d(s).backgroundImageFileURL,onSelect:me[3]||(me[3]=Ie=>Me.value=Ie)},null,8,["default-url"])],2),p("div",TC,[p("div",MC,P(d(x).piece),1),z(Pi,{class:"selector",value:u.value,items:[{label:d(x).singleKanjiPiece,value:d(Oi).HITOMOJI},{label:d(x).singleKanjiGothicPiece,value:d(Oi).HITOMOJI_GOTHIC},{label:d(x).singleKanjiDarkPiece,value:d(Oi).HITOMOJI_DARK},{label:d(x).singleKanjiGothicDarkPiece,value:d(Oi).HITOMOJI_GOTHIC_DARK}],onChange:me[4]||(me[4]=Ie=>{u.value=Ie})},null,8,["value","items"])]),p("div",RC,[p("div",NC,P(d(x).board),1),z(Pi,{class:"selector",value:h.value,items:[{label:d(x).lightWoodyTexture,value:d(ut).LIGHT},{label:d(x).warmWoodTexture,value:d(ut).WARM},{label:d(x).regin,value:d(ut).RESIN},{label:d(x).regin+"2",value:d(ut).RESIN2},{label:d(x).regin+"3",value:d(ut).RESIN3},{label:d(x).dark,value:d(ut).DARK},{label:d(x).green,value:d(ut).GREEN},{label:d(x).cherryBlossom,value:d(ut).CHERRY_BLOSSOM},{label:d(x).customImage,value:d(ut).CUSTOM_IMAGE}],onChange:me[5]||(me[5]=Ie=>{h.value=Ie})},null,8,["value","items"])]),p("div",{ref_key:"boardImageSelector",ref:f,class:it(["form-item",{hidden:h.value!==d(ut).CUSTOM_IMAGE}])},[OC,z(Ga,{class:"image-selector","default-url":d(s).boardImageFileURL,onSelect:me[6]||(me[6]=Ie=>xe.value=Ie)},null,8,["default-url"])],2),p("div",LC,[p("div",DC,P(d(x).pieceStand),1),z(Pi,{class:"selector",value:m.value,items:[{label:d(x).standard,value:d(Kt).STANDARD},{label:d(x).dark,value:d(Kt).DARK},{label:d(x).green,value:d(Kt).GREEN},{label:d(x).cherryBlossom,value:d(Kt).CHERRY_BLOSSOM},{label:d(x).customImage,value:d(Kt).CUSTOM_IMAGE}],onChange:me[7]||(me[7]=Ie=>{m.value=Ie})},null,8,["value","items"])]),p("div",{ref_key:"pieceStandImageSelector",ref:S,class:it(["form-item",{hidden:m.value!==d(Kt).CUSTOM_IMAGE}])},[BC,z(Ga,{class:"image-selector","default-url":d(s).pieceStandImageFileURL,onSelect:me[8]||(me[8]=Ie=>Ze.value=Ie)},null,8,["default-url"])],2),p("div",FC,[p("div",HC,P(d(x).displayFileAndRank),1),z(_t,{value:b.value,onChange:me[9]||(me[9]=Ie=>b.value=Ie)},null,8,["value"])]),p("div",{class:it([{hidden:!d(Mi)()},"form-item"])},[p("div",$C,P(d(x).displayLeftControls),1),z(_t,{value:v.value,onChange:me[10]||(me[10]=Ie=>v.value=Ie)},null,8,["value"])],2),p("div",{class:it([{hidden:!d(Mi)()},"form-item"])},[p("div",UC,P(d(x).displayRightControls),1),z(_t,{value:y.value,onChange:me[11]||(me[11]=Ie=>y.value=Ie)},null,8,["value"])],2),p("div",zC,[p("div",GC,P(d(x).tabViewStyle),1),z(Pi,{class:"selector",value:E.value,items:[{label:d(x).oneColumn,value:d(Zs).SINGLE},{label:d(x).twoColumns,value:d(Zs).DOUBLE}],onChange:me[12]||(me[12]=Ie=>{E.value=Ie})},null,8,["value","items"])])]),WC,p("div",VC,[p("div",jC,P(d(x).sounds),1),p("div",KC,[p("div",qC,P(d(x).pieceLoudness),1),p("input",{ref_key:"pieceVolume",ref:I,value:d(s).pieceVolume,type:"number",max:"100",min:"0"},null,8,YC),XC]),p("div",JC,[p("div",QC,P(d(x).clockLoudness),1),p("input",{ref_key:"clockVolume",ref:k,value:d(s).clockVolume,type:"number",max:"100",min:"0"},null,8,ZC),eT]),p("div",tT,[p("div",iT,P(d(x).clockPitch),1),p("input",{ref_key:"clockPitch",ref:A,value:d(s).clockPitch,type:"number",max:"880",min:"220"},null,8,nT),p("div",sT,"Hz ("+P(d(x).between(220,880))+")",1)]),p("div",oT,[p("div",rT,P(d(x).clockSoundTarget),1),p("select",{ref_key:"clockSoundTarget",ref:T,value:d(s).clockSoundTarget},[p("option",lT,P(d(x).anyTurn),1),p("option",cT,P(d(x).onlyHumanTurn),1)],8,aT)])]),uT,p("div",hT,[p("div",dT,P(d(x).file),1),p("div",fT,[p("div",pT,P(d(x).newlineCharacter),1),p("select",{ref_key:"returnCode",ref:R,value:e[d(s).returnCode]},[mT,_T,p("option",bT,"CR ("+P(d(x).old90sMac)+")",1)],8,gT)]),p("div",yT,[p("div",vT,P(d(x).autoSavingDirectory),1),p("input",{ref_key:"autoSaveDirectory",ref:N,class:"file-path",value:d(s).autoSaveDirectory,type:"text"},null,8,ST),p("button",{class:"thin",onClick:mt},P(d(x).select),1)])]),wT,p("div",xT,[p("div",ET,P(d(x).usiProtocol),1),p("div",kT,[p("div",IT,P(d(x).translateOptionName),1),z(_t,{value:V.value,onChange:me[13]||(me[13]=Ie=>V.value=Ie)},null,8,["value"]),p("div",AT,"("+P(d(x).functionalOnJapaneseOnly)+")",1)]),p("div",PT,[p("div",CT,P(d(x).maxStartupTime),1),p("input",{ref_key:"engineTimeoutSeconds",ref:ee,value:d(s).engineTimeoutSeconds,type:"number",max:"300",min:"1"},null,8,TT),p("div",MT,P(d(x).secondsSuffix)+" ("+P(d(x).between(1,300))+") ",1)])]),RT,p("div",NT,[p("div",OT,P(d(x).evaluationAndEstimatedWinRate),1),p("div",LT,[p("div",DT,P(d(x).signOfEvaluation),1),p("select",{ref_key:"evaluationViewFrom",ref:se,value:d(s).evaluationViewFrom},[p("option",{value:d(wr).EACH},P(d(x).swapEachTurnChange),9,FT),p("option",{value:d(wr).BLACK},P(d(x).alwaysSenteIsPositive),9,HT)],8,BT)]),p("div",$T,[p("div",UT,P(d(x).winRateCoefficient),1),p("input",{ref_key:"coefficientInSigmoid",ref:Q,value:d(s).coefficientInSigmoid,type:"number",max:"10000",min:"1"},null,8,zT),p("div",GT," ("+P(d(x).recommended)+": "+P(d(x).between(600,1500))+") ",1)]),p("div",WT,[VT,p("input",{ref_key:"badMoveLevelThreshold1",ref:ae,value:d(s).badMoveLevelThreshold1,type:"number",max:"100",min:"0"},null,8,jT),KT]),p("div",qT,[YT,p("input",{ref_key:"badMoveLevelThreshold2",ref:X,value:d(s).badMoveLevelThreshold2,type:"number",max:"100",min:"0"},null,8,XT),JT]),p("div",QT,[ZT,p("input",{ref_key:"badMoveLevelThreshold3",ref:he,value:d(s).badMoveLevelThreshold3,type:"number",max:"100",min:"0"},null,8,eM),tM]),p("div",iM,[nM,p("input",{ref_key:"badMoveLevelThreshold4",ref:ge,value:d(s).badMoveLevelThreshold4,type:"number",max:"100",min:"0"},null,8,sM),oM])]),rM,p("div",aM,[p("div",lM,P(d(x).forDevelopers),1),p("div",cM,[d(Mi)()?le("",!0):(O(),F("div",uM,P(d(x).inBrowserLogsOutputToConsoleAndIgnoreThisSetting),1)),d(Mi)()?(O(),F("div",hM,P(d(x).shouldRestartToApplyLogSettings),1)):le("",!0),d(Mi)()?(O(),F("div",dM,P(d(x).canOpenLogDirectoryFromMenu),1)):le("",!0),d(Mi)()?(O(),F("div",fM,P(d(x).hasNoOldLogCleanUpFeature),1)):le("",!0)]),p("div",pM,[p("div",gM,P(d(x).enableAppLog),1),z(_t,{value:ne.value,onChange:me[14]||(me[14]=Ie=>ne.value=Ie)},null,8,["value"])]),p("div",mM,[p("div",_M,P(d(x).enableUSILog),1),z(_t,{value:ie.value,onChange:me[15]||(me[15]=Ie=>ie.value=Ie)},null,8,["value"])]),p("div",bM,[p("div",yM,P(d(x).enableCSALog),1),z(_t,{value:ce.value,onChange:me[16]||(me[16]=Ie=>ce.value=Ie)},null,8,["value"])]),p("div",vM,[p("div",SM,P(d(x).logLevel),1),z(Pi,{class:"selector",value:Ne.value,items:[{label:"DEBUG",value:d(bt).DEBUG},{label:"INFO",value:d(bt).INFO},{label:"WARN",value:d(bt).WARN},{label:"ERROR",value:d(bt).ERROR}],onChange:me[17]||(me[17]=Ie=>{Ne.value=Ie})},null,8,["value","items"])])])]),p("div",wM,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:me[18]||(me[18]=Ie=>nt())},P(d(x).saveAndClose),1),p("button",{"data-hotkey":"Escape",onClick:me[19]||(me[19]=Ie=>et())},P(d(x).cancel),1)])],512)]))}});const EM=Qe(xM,[["__scopeId","data-v-92971c26"]]),kM={ref:"content"},IM={class:"form-group"},AM={class:"message"},PM={class:"message"},CM={key:0,class:"message"},TM={key:1,class:"message"},MM={class:"main-buttons"},RM=Ue({__name:"PasteDialog",setup(t){const e=rt(),i=G(),n=G();e.retainBussyState(),ot(async()=>{try{Ct(i.value),Jt(i.value),Mi()&&(n.value.value=await navigator.clipboard.readText())}finally{e.releaseBussyState()}}),Rt(()=>{Qt(i.value)});const s=()=>{const r=n.value.value;if(!r){e.pushError(new Error(x.emptyRecordInput));return}e.closeModalDialog(),e.pasteRecord(r)},o=()=>{e.closeModalDialog()};return(r,a)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i},[p("div",kM,[p("div",IM,[p("div",AM,P(d(x).importingFollowingRecordOrPosition),1),p("div",PM,P(d(x).supportsKIFCSAUSI),1),d(Mi)()?le("",!0):(O(),F("div",CM,P(d(x).plesePasteRecordIntoTextArea),1)),d(Mi)()?le("",!0):(O(),F("div",TM,P(d(x).desktopVersionPastesAutomatically),1)),p("textarea",{ref_key:"textarea",ref:n},null,512)])],512),p("div",MM,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:s},P(d(x).import),1),p("button",{"data-hotkey":"Escape",onClick:o},P(d(x).cancel),1)])],512)]))}});const NM=Qe(RM,[["__scopeId","data-v-2908a87e"]]),OM={class:"message-box"},LM={class:"message"},DM=Ue({__name:"BussyMessage",setup(t){const e=G();return ot(()=>{Ct(e.value)}),(i,n)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:e,class:"bussy"},[p("div",OM,[z(ye,{icon:d(de).BUSSY},null,8,["icon"]),p("div",LM,P(d(x).processingPleaseWait),1)])],512)]))}});const BM=Qe(DM,[["__scopeId","data-v-76d58604"]]),FM={class:"message-box"},HM={class:"message"},$M={class:"main-buttons"},UM=Ue({__name:"ConfirmDialog",setup(t){const e=rt(),i=G(),n=()=>{e.confirmationOk()},s=()=>{e.confirmationCancel()};return ot(()=>{Ct(i.value,s),Jt(i.value)}),Rt(()=>{Qt(i.value)}),(o,r)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i,class:"confirm"},[p("div",FM,[z(ye,{icon:d(de).QUESTION},null,8,["icon"]),p("div",HM,P(d(e).confirmation),1)]),p("div",$M,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:r[0]||(r[0]=a=>n())},"OK"),p("button",{"data-hotkey":"Escape",onClick:r[1]||(r[1]=a=>s())},P(d(x).cancel),1)])],512)]))}});const zM=Qe(UM,[["__scopeId","data-v-9f781aaf"]]),GM={class:"message-box"},WM={class:"message"},VM={key:0,class:"list"},jM={class:"main-buttons"},KM=Ue({__name:"InfoMessage",setup(t){const e=rt(),i=G();ot(()=>{Ct(i.value),Jt(i.value)}),Rt(()=>{Qt(i.value)});const n=()=>{e.dequeueMessage()};return(s,o)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i,class:"info"},[p("div",GM,[z(ye,{icon:d(de).INFO},null,8,["icon"]),p("div",WM,P(d(e).message.text),1)]),(O(!0),F(Re,null,Ve(d(e).message.attachments,(r,a)=>(O(),F("div",{key:a,class:"attachment"},[r.type==="list"?(O(),F("ul",VM,[(O(!0),F(Re,null,Ve(r.items,(l,c)=>(O(),F("li",{key:c,class:"list-item"},[fo(P(l.text)+" ",1),p("ul",null,[(O(!0),F(Re,null,Ve(l.children,(u,h)=>(O(),F("li",{key:h,class:"list-child-item"},P(u),1))),128))])]))),128))])):le("",!0)]))),128)),p("div",jM,[p("button",{autofocus:"","data-hotkey":"Escape",onClick:o[0]||(o[0]=r=>n())},P(d(x).close),1)])],512)]))}});const qM=Qe(KM,[["__scopeId","data-v-08f05368"]]),YM={class:"message-box"},XM={class:"column"},JM={class:"notice"},QM={class:"index"},ZM={key:0},e4={class:"message"},t4={class:"main-buttons"},i4=Ue({__name:"ErrorMessage",setup(t){const e=rt(),i=G();ot(()=>{Ct(i.value),Jt(i.value)}),Rt(()=>{Qt(i.value)});const n=()=>{e.clearErrors()};return(s,o)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i,class:"error"},[p("div",YM,[z(ye,{icon:d(de).ERROR},null,8,["icon"]),p("div",XM,[p("div",JM,P(d(x).errorsOccurred(d(e).errors.length)),1),(O(!0),F(Re,null,Ve(d(e).errors,(r,a)=>(O(),F("div",{key:a,class:"item"},[p("p",QM,[fo(P(a+1)+" ",1),r.count>=2?(O(),F("span",ZM,"("+P(r.count)+" )",1)):le("",!0)]),p("p",e4,P(r.message),1)]))),128))])]),p("div",t4,[p("button",{autofocus:"","data-hotkey":"Escape",onClick:o[0]||(o[0]=r=>n())},P(d(x).close),1)])],512)]))}});const n4=Qe(i4,[["__scopeId","data-v-34c3016d"]]),s4={class:"title"},o4={class:"form-group"},r4={class:"form-group"},a4={class:"form-item"},l4={class:"form-item-unit"},c4=["disabled"],u4={class:"form-item-unit"},h4={class:"form-item"},d4={class:"form-item-unit"},f4=["disabled"],p4={class:"form-item-unit"},g4={class:"form-group"},m4={class:"form-item"},_4={class:"form-item-unit"},b4={class:"form-item-unit"},y4={class:"form-group"},v4={class:"form-item"},S4={class:"form-item-label-wide"},w4={class:"main-buttons"},x4=Ue({__name:"AnalysisDialog",setup(t){const e=rt(),i=G(),n=G(!1),s=G(),o=G(!1),r=G(),a=G(),l=G(di.NONE),c=G(new Xi),u=G("");e.retainBussyState(),ot(async()=>{var b;Ct(i.value),Jt(i.value);try{const v=await we.loadAnalysisSetting();c.value=await we.loadUSIEngineSetting(),u.value=((b=v.usi)==null?void 0:b.uri)||"",n.value=v.startCriteria.enableNumber,s.value.value=v.startCriteria.number,o.value=v.endCriteria.enableNumber,r.value.value=v.endCriteria.number,a.value.value=v.perMoveCriteria.maxSeconds,l.value=v.commentBehavior}catch(v){e.pushError(v),e.destroyModalDialog()}finally{e.releaseBussyState()}}),Rt(()=>{Qt(i.value)});const h=()=>{if(!u.value||!c.value.hasEngine(u.value)){e.pushError("");return}const v={usi:c.value.getEngine(u.value),startCriteria:{enableNumber:n.value,number:xt(s.value)},endCriteria:{enableNumber:o.value,number:xt(r.value)},perMoveCriteria:{maxSeconds:xt(a.value)},commentBehavior:l.value};e.startAnalysis(v)},f=()=>{e.closeModalDialog()},m=async b=>{c.value=b},S=b=>{u.value=b};return(b,v)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i,class:"root"},[p("div",s4,P(d(x).recordAnalysis),1),p("div",o4,[p("div",null,P(d(x).searchEngine),1),z(hs,{"player-uri":u.value,"engine-settings":c.value,"display-thread-state":!0,"display-multi-pv-state":!0,onUpdateEngineSetting:m,onSelectPlayer:S},null,8,["player-uri","engine-settings"])]),p("div",r4,[p("div",null,P(d(x).startEndCriteria),1),p("div",a4,[z(_t,{value:n.value,onChange:v[0]||(v[0]=y=>{s.value.disabled=!y,n.value=y})},null,8,["value"]),p("div",l4,P(d(x).fromPrefix),1),p("input",{ref_key:"startNumber",ref:s,class:"small",type:"number",min:"1",step:"1",disabled:!n.value},null,8,c4),p("div",u4,P(d(x).plySuffix)+P(d(x).fromSuffix),1)]),p("div",h4,[z(_t,{value:o.value,onChange:v[1]||(v[1]=y=>{r.value.disabled=!y,o.value=y})},null,8,["value"]),p("div",d4,P(d(x).toPrefix),1),p("input",{ref_key:"endNumber",ref:r,class:"small",type:"number",min:"1",step:"1",disabled:!o.value},null,8,f4),p("div",p4,P(d(x).plySuffix)+P(d(x).toSuffix),1)])]),p("div",g4,[p("div",null,P(d(x).endCriteria1Move),1),p("div",m4,[p("div",_4,P(d(x).toPrefix),1),p("input",{ref_key:"maxSecondsPerMove",ref:a,class:"small",type:"number",min:"0",step:"1"},null,512),p("div",b4,P(d(x).secondsSuffix)+P(d(x).toSuffix),1)])]),p("div",y4,[p("div",null,P(d(x).outputSettings),1),p("div",v4,[p("div",S4,P(d(x).moveComments),1),z(Pi,{class:"selector",items:[{value:d(di).NONE,label:d(x).noOutputs},{value:d(di).INSERT,label:d(x).insertCommentToTop},{value:d(di).APPEND,label:d(x).appendCommentToBottom},{value:d(di).OVERWRITE,label:d(x).overwrite}],value:l.value,onChange:v[2]||(v[2]=y=>{l.value=y})},null,8,["items","value"])])]),p("div",w4,[p("button",{"data-hotkey":"Enter",autofocus:"",onClick:v[3]||(v[3]=y=>h())},"  "),p("button",{"data-hotkey":"Escape",onClick:v[4]||(v[4]=y=>f())},"")])],512)]))}});const E4=Qe(x4,[["__scopeId","data-v-1938986a"]]),k4={class:"message-box"},I4={class:"message"},A4={key:0},P4={key:1},C4={key:2},T4={key:0,class:"main-buttons"},M4=Ue({__name:"CSAGameReadyDialog",setup(t){const e=rt(),i=G(),n=G(0);let s=0;ot(()=>{Ct(i.value),Jt(i.value)}),Rt(()=>{Qt(i.value),window.clearInterval(s)}),ln(()=>e.csaGameState,r=>{window.clearInterval(s),r===hi.LOGIN_RETRY_INTERVAL&&(n.value=zf,s=window.setInterval(()=>{n.value--},1e3))});const o=()=>{e.cancelCSAGame()};return(r,a)=>(O(),F("div",null,[p("dialog",{ref_key:"dialog",ref:i,class:"bussy"},[p("div",k4,[z(ye,{icon:d(de).BUSSY},null,8,["icon"]),p("div",I4,[d(e).csaGameState===d(hi).READY?(O(),F("span",A4,"  ")):le("",!0),d(e).csaGameState===d(hi).LOGIN_RETRY_INTERVAL?(O(),F("span",P4," CSA"+P(n.value)+" ",1)):le("",!0),d(e).csaGameState===d(hi).WAITING_LOGIN?(O(),F("span",C4," CSA ")):le("",!0)])]),d(e).csaGameState===d(hi).READY||d(e).csaGameState===d(hi).LOGIN_RETRY_INTERVAL?(O(),F("div",T4,[p("button",{autofocus:"","data-hotkey":"Escape",onClick:a[0]||(a[0]=l=>o())},"  ")])):le("",!0)],512)]))}});const R4=Qe(M4,[["__scopeId","data-v-027922f9"]]),N4=Ue({__name:"App",setup(t){const e=Ge(),i=rt(),n=Te(()=>({game:i.appState===q.GAME_DIALOG,csaGame:i.appState===q.CSA_GAME_DIALOG,research:i.appState===q.RESEARCH_DIALOG,analysis:i.appState===q.ANALYSIS_DIALOG,usiEngineSetting:i.appState===q.USI_ENGINE_SETTING_DIALOG,exportPositionImage:i.appState===q.EXPORT_POSITION_IMAGE_DIALOG,appSetting:i.isAppSettingDialogVisible,paste:i.appState===q.PASTE_DIALOG,bussy:i.isBussy,confirm:i.confirmation!==void 0,csaGameReady:i.csaGameState===hi.WAITING_LOGIN||i.csaGameState===hi.READY||i.csaGameState===hi.LOGIN_RETRY_INTERVAL}));ot(()=>{const o=document.getElementsByTagName("body")[0];o.addEventListener("copy",r=>{i.copyRecordKIF(),r.preventDefault()}),o.addEventListener("paste",r=>{i.showPasteDialog(),r.preventDefault()}),o.addEventListener("dragover",r=>{r.preventDefault()}),o.addEventListener("drop",r=>{if(r.dataTransfer&&r.dataTransfer.files[0]){const a=r.dataTransfer.files[0].path;i.openRecord(a)}r.preventDefault()})});const s=Te(()=>{if(e.backgroundImageType==_i.NONE||!e.backgroundImageFileURL)return{};let o="";switch(e.backgroundImageType){case _i.COVER:o="cover";break;case _i.CONTAIN:o="contain";break;case _i.TILE:o="auto";break}return{"background-image":`url("${e.backgroundImageFileURL}")`,"background-size":o}});return(o,r)=>(O(),F("div",{class:it(["root full",d(e).thema]),style:Ee(d(s))},[z(j8,{class:"full"}),d(n).game?(O(),We(CA,{key:0})):le("",!0),d(n).csaGame?(O(),We(kP,{key:1})):le("",!0),d(n).research?(O(),We(NP,{key:2})):le("",!0),d(n).analysis?(O(),We(E4,{key:3})):le("",!0),d(n).usiEngineSetting?(O(),We(KP,{key:4})):le("",!0),d(n).exportPositionImage?(O(),We(pC,{key:5})):le("",!0),d(n).appSetting?(O(),We(EM,{key:6})):le("",!0),d(n).paste?(O(),We(NM,{key:7})):le("",!0),d(n).bussy?(O(),We(BM,{key:8})):le("",!0),d(n).confirm?(O(),We(zM,{key:9})):le("",!0),d(n).csaGameReady?(O(),We(R4,{key:10})):le("",!0),d(i).hasMessage?(O(),We(qM,{key:11})):le("",!0),d(i).hasError?(O(),We(n4,{key:12})):le("",!0)],6))}});const O4=Qe(N4,[["__scopeId","data-v-9272dc72"]]);var Pe=(t=>(t.NEW_RECORD="newRecord",t.OPEN_RECORD="openRecord",t.SAVE_RECORD="saveRecord",t.SAVE_RECORD_AS="saveRecordAs",t.EXPORT_POSITION_IMAGE="exportPositionImage",t.COPY_RECORD="copyRecord",t.COPY_RECORD_CSA="copyRecordCsa",t.COPY_RECORD_USI_BEFORE="copyRecordUsiBefore",t.COPY_RECORD_USI_ALL="copyRecordUsiAll",t.COPY_BOARD_SFEN="copyRecordSfen",t.PASTE_RECORD="pasteRecord",t.INSERT_INTERRUPT="insertInterrupt",t.INSERT_RESIGN="insertResign",t.INSERT_DRAW="insertDraw",t.INSERT_IMPASS="insertImpass",t.INSERT_REPETITION_DRAW="insertRepetitionDraw",t.INSERT_MATE="insertMate",t.INSERT_TIMEOUT="insertTimeout",t.INSERT_FOUL_WIN="insertFoulWin",t.INSERT_FOUL_LOSE="insertFoulLose",t.INSERT_ENTERING_OF_KING="insertEnteringOfKing",t.INSERT_WIN_BY_DEFAULT="insertWinByDefault",t.INSERT_LOSE_BY_DEFAULT="insertLossByDefault",t.REMOVE_CURRENT_MOVE="remvoeCurrentMove",t.START_POSITION_EDITING="startPositionEditing",t.END_POSITION_EDITING="endPositionEditing",t.CHANGE_TURN="changeTurn",t.INIT_POSITION_STANDARD="initPositionStandard",t.INIT_POSITION_HANDICAP_LANCE="initPositionHandicapLance",t.INIT_POSITION_HANDICAP_RIGHT_LANCE="initPositionHandicapRightLance",t.INIT_POSITION_HANDICAP_BISHOP="initPositionHandicapBishop",t.INIT_POSITION_HANDICAP_ROOK="initPositionHandicapRook",t.INIT_POSITION_HANDICAP_ROOK_LANCE="initPositionHandicapRookLance",t.INIT_POSITION_HANDICAP_2PIECES="initPositionHandicap2Pieces",t.INIT_POSITION_HANDICAP_4PIECES="initPositionHandicap4Pieces",t.INIT_POSITION_HANDICAP_6PIECES="initPositionHandicap6Pieces",t.INIT_POSITION_HANDICAP_8PIECES="initPositionHandicap8Pieces",t.INIT_POSITION_TSUME_SHOGI="initPositionTsumeShogi",t.INIT_POSITION_TSUME_SHOGI_2KINGS="initPositionTsumeShogi2Kings",t.START_RESEARCH="startResearch",t.STOP_RESEARCH="stopResearch",t.START_ANALYSIS="startAnalysis",t.STOP_ANALYSIS="stopAnalysis",t.START_GAME="startGame",t.START_CSA_GAME="startCSAGame",t.STOP_GAME="stopGame",t.RESIGN="resign",t.WIN="win",t.LOGOUT="logout",t.FLIP_BOARD="flipBoard",t.APP_SETTING_DIALOG="appSetting",t.USI_ENGINE_SETTING_DIALOG="usiEngineSetting",t))(Pe||{});function L4(){const t=rt();je.onSendError(e=>{t.pushError(e)}),je.onMenuEvent(e=>{if(!t.isBussy)switch(e){case Pe.NEW_RECORD:t.resetRecord();break;case Pe.OPEN_RECORD:t.openRecord();break;case Pe.SAVE_RECORD:t.saveRecord({overwrite:!0});break;case Pe.SAVE_RECORD_AS:t.saveRecord();break;case Pe.EXPORT_POSITION_IMAGE:t.showExportBoardImageDialog();break;case Pe.COPY_RECORD:t.copyRecordKIF();break;case Pe.COPY_RECORD_CSA:t.copyRecordCSA();break;case Pe.COPY_RECORD_USI_BEFORE:t.copyRecordUSIBefore();break;case Pe.COPY_RECORD_USI_ALL:t.copyRecordUSIAll();break;case Pe.COPY_BOARD_SFEN:t.copyBoardSFEN();break;case Pe.PASTE_RECORD:t.showPasteDialog();break;case Pe.INSERT_INTERRUPT:t.insertSpecialMove(_e.INTERRUPT);break;case Pe.INSERT_RESIGN:t.insertSpecialMove(_e.RESIGN);break;case Pe.INSERT_DRAW:t.insertSpecialMove(_e.DRAW);break;case Pe.INSERT_IMPASS:t.insertSpecialMove(_e.IMPASS);break;case Pe.INSERT_REPETITION_DRAW:t.insertSpecialMove(_e.REPETITION_DRAW);break;case Pe.INSERT_MATE:t.insertSpecialMove(_e.MATE);break;case Pe.INSERT_TIMEOUT:t.insertSpecialMove(_e.TIMEOUT);break;case Pe.INSERT_FOUL_WIN:t.insertSpecialMove(_e.FOUL_WIN);break;case Pe.INSERT_FOUL_LOSE:t.insertSpecialMove(_e.FOUL_LOSE);break;case Pe.INSERT_ENTERING_OF_KING:t.insertSpecialMove(_e.ENTERING_OF_KING);break;case Pe.INSERT_WIN_BY_DEFAULT:t.insertSpecialMove(_e.WIN_BY_DEFAULT);break;case Pe.INSERT_LOSE_BY_DEFAULT:t.insertSpecialMove(_e.LOSE_BY_DEFAULT);break;case Pe.REMOVE_CURRENT_MOVE:t.removeCurrentMove();break;case Pe.START_POSITION_EDITING:t.startPositionEditing();break;case Pe.END_POSITION_EDITING:t.endPositionEditing();break;case Pe.CHANGE_TURN:t.changeTurn();break;case Pe.INIT_POSITION_STANDARD:t.initializePosition(Ce.STANDARD);break;case Pe.INIT_POSITION_HANDICAP_LANCE:t.initializePosition(Ce.HANDICAP_LANCE);break;case Pe.INIT_POSITION_HANDICAP_RIGHT_LANCE:t.initializePosition(Ce.HANDICAP_RIGHT_LANCE);break;case Pe.INIT_POSITION_HANDICAP_BISHOP:t.initializePosition(Ce.HANDICAP_BISHOP);break;case Pe.INIT_POSITION_HANDICAP_ROOK:t.initializePosition(Ce.HANDICAP_ROOK);break;case Pe.INIT_POSITION_HANDICAP_ROOK_LANCE:t.initializePosition(Ce.HANDICAP_ROOK_LANCE);break;case Pe.INIT_POSITION_HANDICAP_2PIECES:t.initializePosition(Ce.HANDICAP_2PIECES);break;case Pe.INIT_POSITION_HANDICAP_4PIECES:t.initializePosition(Ce.HANDICAP_4PIECES);break;case Pe.INIT_POSITION_HANDICAP_6PIECES:t.initializePosition(Ce.HANDICAP_6PIECES);break;case Pe.INIT_POSITION_HANDICAP_8PIECES:t.initializePosition(Ce.HANDICAP_8PIECES);break;case Pe.INIT_POSITION_TSUME_SHOGI:t.initializePosition(Ce.TSUME_SHOGI);break;case Pe.INIT_POSITION_TSUME_SHOGI_2KINGS:t.initializePosition(Ce.TSUME_SHOGI_2KINGS);break;case Pe.START_GAME:t.showGameDialog();break;case Pe.START_CSA_GAME:t.showCSAGameDialog();break;case Pe.STOP_GAME:t.stopGame();break;case Pe.RESIGN:is.resign();break;case Pe.WIN:is.win();break;case Pe.LOGOUT:t.cancelCSAGame();break;case Pe.START_RESEARCH:t.showResearchDialog();break;case Pe.STOP_RESEARCH:t.stopResearch();break;case Pe.START_ANALYSIS:t.showAnalysisDialog();break;case Pe.STOP_ANALYSIS:t.stopAnalysis();break;case Pe.FLIP_BOARD:Ge().flipBoard();break;case Pe.APP_SETTING_DIALOG:t.showAppSettingDialog();break;case Pe.USI_ENGINE_SETTING_DIALOG:t.showUsiEngineManagementDialog();break}}),je.onUSIBestMove(g1),je.onUSIInfo((e,i,n,s)=>{const o=JSON.parse(s);t.updateUSIInfo(e,i,n,o),Ou(e,i,o)}),je.onUSIPonderInfo((e,i,n,s)=>{const o=JSON.parse(s);t.updateUSIPonderInfo(e,i,n,o),Ou(e,i,o)}),je.onCSAGameSummary((e,i)=>{B1(e,JSON.parse(i))}),je.onCSAReject(F1),je.onCSAStart((e,i)=>{H1(e,JSON.parse(i))}),je.onCSAMove((e,i,n)=>{$1(e,i,JSON.parse(n))}),je.onCSAGameResult(U1),je.onCSAClose(z1),ln(()=>[t.appState,t.isBussy],([e,i])=>je.updateAppState(e,i)),je.updateAppState(t.appState,t.isBussy)}we.log(bt.INFO,`start renderer process: APP_VERSION=${Lf.appVersion}`);Gi.register(...k8);L4();function Yp(t){if(!document)return;const e=x.electronShogi,i=Lf.appVersion;t?document.title=`${e} Version ${i} - ${t}`:document.title=`${e} Version ${i}`}const $o=rt().addListener("changeFilePath",Yp);Promise.allSettled([Ge().loadAppSetting().catch(t=>{$o.pushError(new Error(": "+t))}),we.getRecordPathFromProcArg().then(t=>{t&&$o.openRecord(t)}).catch(t=>{$o.pushError(new Error(": "+t))})]).finally(()=>{const t=Ge().language;we.log(bt.INFO,`set language: ${t}`),O_(t),Yp($o.recordFilePath),we.log(bt.INFO,"mount app"),v0(O4).mount("#app")});
