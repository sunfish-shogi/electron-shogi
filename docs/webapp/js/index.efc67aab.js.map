{"version":3,"file":"js/index.efc67aab.js","mappings":"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AASG,MAEvB9F,KAAM,CACJkE,GAAIyB,GAASG,KACbnH,KAAMgH,GAASG,KACf/G,MAAO4G,GAASG,KAChB1B,KAAMuB,GAASG,MAEjB7F,KAAM,CACJ2E,UAAWe,GAASE,MACpBf,WAAYa,GAASE,MACrBrB,QAASmB,GAASE,MAClBnB,SAAUiB,GAASE,MACnBzB,KAAMuB,GAASE,MACflH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChB3B,GAAIyB,GAASE,OAEf3F,SAAU,CACRsE,QAASmB,GAASE,MAClB3B,GAAIyB,GAASE,MACbnB,SAAUiB,GAASE,MACnBlH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChBzB,KAAMuB,GAASE,OAEjB1F,UAAW,CACTqE,QAASmB,GAASE,MAClB3B,GAAIyB,GAASE,MACbnB,SAAUiB,GAASE,MACnBlH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChBzB,KAAMuB,GAASE,OAEjBzF,WAAY,CACVoE,QAASmB,GAASE,MAClB3B,GAAIyB,GAASE,MACbnB,SAAUiB,GAASE,MACnBlH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChBzB,KAAMuB,GAASE,OAEjBxF,WAAY,CACVmE,QAASmB,GAASE,MAClB3B,GAAIyB,GAASE,MACbnB,SAAUiB,GAASE,MACnBlH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChBzB,KAAMuB,GAASE,OAEjBvF,MAAO,CACLkE,QAASmB,GAASG,KAClBpB,SAAUiB,GAASG,KACnBlB,UAAWe,GAASG,KACpBhB,WAAYa,GAASG,KACrB5B,GAAIyB,GAASE,MACblH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChBzB,KAAMuB,GAASE,OAEjBtF,OAAQ,CACN2D,GAAIyB,GAASG,KACbnH,KAAMgH,GAASG,KACf/G,MAAO4G,GAASG,KAChB1B,KAAMuB,GAASG,KACftB,QAASmB,GAASE,MAClBnB,SAAUiB,GAASE,MACnBjB,UAAWe,GAASE,MACpBf,WAAYa,GAASE,QAGzBpC,MAAO,CACL/D,KAAM,CAAE0E,KAAMuB,GAASE,OACvBlG,MAAO,CAAEyE,KAAMuB,GAASG,MACxBlG,OAAQ,CACNwF,iBAAkBO,GAASE,MAC3BP,kBAAmBK,GAASE,OAE9BhG,OAAQ,CACN+E,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrBrB,QAASmB,GAASE,MAClBnB,SAAUiB,GAASE,OAErB/F,KAAM,CACJ8E,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrBlH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChB3B,GAAIyB,GAASE,OAEf9F,OAAQ,CACN6E,UAAWe,GAASG,KACpBhB,WAAYa,GAASG,KACrBtB,QAASmB,GAASG,KAClBpB,SAAUiB,GAASG,MAErB9F,KAAM,CACJoE,KAAMuB,GAASG,KACfnH,KAAMgH,GAASG,KACf/G,MAAO4G,GAASG,KAChB5B,GAAIyB,GAASG,MAEf7F,KAAM,CACJ2E,UAAWe,GAASE,MACpBf,WAAYa,GAASE,MACrBrB,QAASmB,GAASE,MAClBnB,SAAUiB,GAASE,MACnBzB,KAAMuB,GAASE,MACflH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChB3B,GAAIyB,GAASE,OAEf3F,SAAU,CACR0E,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrBlH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChB3B,GAAIyB,GAASE,OAEf1F,UAAW,CACTyE,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrBlH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChB3B,GAAIyB,GAASE,OAEfzF,WAAY,CACVwE,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrBlH,KAAMgH,GAASE,MACf9G,MAAO4G,GAASE,MAChB3B,GAAIyB,GAASE,OAEfxF,WAAY,CACVuE,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrBlH,KAAMgH,GAASE,MACf9G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","sources":["webpack://electron-shogi/./src/App.vue?8116","webpack://electron-shogi/./src/components/main/StandardLayout.vue?3995","webpack://electron-shogi/./src/components/main/BoardPane.vue?1f8c","webpack://electron-shogi/./src/components/primitive/BoardView.vue?5c54","webpack://electron-shogi/./src/shogi/color.ts","webpack://electron-shogi/./src/shogi/piece.ts","webpack://electron-shogi/./src/shogi/direction.ts","webpack://electron-shogi/./src/shogi/square.ts","webpack://electron-shogi/./src/shogi/move.ts","webpack://electron-shogi/./src/shogi/board.ts","webpack://electron-shogi/./src/shogi/hand.ts","webpack://electron-shogi/./src/shogi/position.ts","webpack://electron-shogi/./src/helpers/time.ts","webpack://electron-shogi/./src/shogi/record.ts","webpack://electron-shogi/./src/shogi/kakinoki.ts","webpack://electron-shogi/./src/assets/preload.ts","webpack://electron-shogi/./src/components/primitive/BoardLayout.ts","webpack://electron-shogi/./src/components/primitive/Types.ts","webpack://electron-shogi/./src/components/primitive/BoardView.vue?53c8","webpack://electron-shogi/./src/components/primitive/BoardView.vue","webpack://electron-shogi/./src/uri.ts","webpack://electron-shogi/./src/settings/usi.ts","webpack://electron-shogi/./src/menu/event.ts","webpack://electron-shogi/./src/settings/app.ts","webpack://electron-shogi/./src/ipc/web.ts","webpack://electron-shogi/./src/settings/game.ts","webpack://electron-shogi/./src/settings/research.ts","webpack://electron-shogi/./src/ipc/renderer.ts","webpack://electron-shogi/./src/audio/index.ts","webpack://electron-shogi/./src/usi/info.ts","webpack://electron-shogi/./src/store/record.ts","webpack://electron-shogi/./src/store/game.ts","webpack://electron-shogi/./src/helpers/path.ts","webpack://electron-shogi/./src/store/bussy.ts","webpack://electron-shogi/./src/store/usi.ts","webpack://electron-shogi/./src/store/mode.ts","webpack://electron-shogi/./src/store/message.ts","webpack://electron-shogi/./src/store/error.ts","webpack://electron-shogi/./src/store/index.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?eb5b","webpack://electron-shogi/./src/assets/icons.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?3913","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue","webpack://electron-shogi/./src/components/main/BoardPane.vue?7d48","webpack://electron-shogi/./src/components/main/BoardPane.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?053c","webpack://electron-shogi/./src/components/primitive/RecordView.vue?f29f","webpack://electron-shogi/./src/components/primitive/RecordView.vue?7f9e","webpack://electron-shogi/./src/components/primitive/RecordView.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?61e0","webpack://electron-shogi/./src/components/main/RecordPane.vue","webpack://electron-shogi/./src/components/main/TabPane.vue?3cda","webpack://electron-shogi/./src/components/tab/RecordComment.vue?646f","webpack://electron-shogi/./src/components/tab/RecordComment.vue?7802","webpack://electron-shogi/./src/components/tab/RecordComment.vue","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue?f3e1","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue?7556","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue?4973","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue?6e00","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue?2390","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue?37e9","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue","webpack://electron-shogi/./src/components/tab/RecordInfo.vue?4c70","webpack://electron-shogi/./src/components/tab/RecordInfo.vue?8fcb","webpack://electron-shogi/./src/components/tab/RecordInfo.vue","webpack://electron-shogi/./src/components/main/TabPane.vue?c156","webpack://electron-shogi/./src/components/main/TabPane.vue","webpack://electron-shogi/./src/components/main/StandardLayout.vue?15bf","webpack://electron-shogi/./src/components/main/StandardLayout.vue","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?d2e3","webpack://electron-shogi/./src/helpers/dialog.ts","webpack://electron-shogi/./src/helpers/form.ts","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?4613","webpack://electron-shogi/./src/components/dialog/GameDialog.vue","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?ea03","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?110e","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?02ef","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?47d0","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?6142","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?449c","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?3df2","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?12ff","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?2491","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?66a0","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?222e","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?f614","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue?583d","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue?8006","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?184d","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?f9a8","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?064a","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?13c3","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue","webpack://electron-shogi/./src/helpers/key.ts","webpack://electron-shogi/./src/App.vue?847a","webpack://electron-shogi/./src/App.vue","webpack://electron-shogi/./src/main.ts","webpack://electron-shogi/webpack/bootstrap","webpack://electron-shogi/webpack/runtime/chunk loaded","webpack://electron-shogi/webpack/runtime/compat get default export","webpack://electron-shogi/webpack/runtime/define property getters","webpack://electron-shogi/webpack/runtime/global","webpack://electron-shogi/webpack/runtime/hasOwnProperty shorthand","webpack://electron-shogi/webpack/runtime/jsonp chunk loading","webpack://electron-shogi/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_StandardLayout = _resolveComponent(\"StandardLayout\")!\n  const _component_GameDialog = _resolveComponent(\"GameDialog\")!\n  const _component_ResearchDialog = _resolveComponent(\"ResearchDialog\")!\n  const _component_USIEngineManagementDialog = _resolveComponent(\"USIEngineManagementDialog\")!\n  const _component_AppSettingDialog = _resolveComponent(\"AppSettingDialog\")!\n  const _component_PasteDialog = _resolveComponent(\"PasteDialog\")!\n  const _component_BussyMessage = _resolveComponent(\"BussyMessage\")!\n  const _component_ConfirmDialog = _resolveComponent(\"ConfirmDialog\")!\n  const _component_InfoMessage = _resolveComponent(\"InfoMessage\")!\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_StandardLayout, { class: \"main\" }),\n    (_ctx.dialogVisibilities.game)\n      ? (_openBlock(), _createBlock(_component_GameDialog, { key: 0 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.research)\n      ? (_openBlock(), _createBlock(_component_ResearchDialog, { key: 1 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.usiEngineSetting)\n      ? (_openBlock(), _createBlock(_component_USIEngineManagementDialog, { key: 2 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.appSetting)\n      ? (_openBlock(), _createBlock(_component_AppSettingDialog, { key: 3 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.paste)\n      ? (_openBlock(), _createBlock(_component_PasteDialog, { key: 4 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.bussy)\n      ? (_openBlock(), _createBlock(_component_BussyMessage, { key: 5 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.confirm)\n      ? (_openBlock(), _createBlock(_component_ConfirmDialog, { key: 6 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasMessage)\n      ? (_openBlock(), _createBlock(_component_InfoMessage, { key: 7 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasErrors)\n      ? (_openBlock(), _createBlock(_component_ErrorMessage, { key: 8 }))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6355277e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main\" }\nconst _hoisted_2 = {\n  ref: \"topPane\",\n  class: \"top-pane\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_BoardPane = _resolveComponent(\"BoardPane\")!\n  const _component_RecordPane = _resolveComponent(\"RecordPane\")!\n  const _component_TabPane = _resolveComponent(\"TabPane\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_BoardPane, {\n          class: \"top-left-pane\",\n          \"max-size\": _ctx.boardPaneMaxSize\n        }, null, 8, [\"max-size\"]),\n        _createVNode(_component_RecordPane, { class: \"top-right-pane\" })\n      ], 512),\n      _createVNode(_component_TabPane, {\n        class: \"bottom-pane\",\n        size: _ctx.bottomPaneSize\n      }, null, 8, [\"size\"])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-cd0f493c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"control top\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_10 = { class: \"control bottom\" }\nconst _hoisted_11 = [\"disabled\"]\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_13 = [\"disabled\"]\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_16 = [\"disabled\"]\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_19 = [\"disabled\"]\nconst _hoisted_20 = /*#__PURE__*/_createTextVNode(\"  \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_BoardView = _resolveComponent(\"BoardView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_BoardView, {\n      \"piece-image-type\": _ctx.pieceImageType,\n      \"board-image-type\": _ctx.boardImageType,\n      \"max-size\": _ctx.maxSize,\n      position: _ctx.position,\n      \"last-move\": _ctx.lastMove,\n      flip: _ctx.flip,\n      \"allow-move\": _ctx.allowMove,\n      \"allow-edit\": _ctx.allowEdit,\n      \"black-player-name\": _ctx.blackPlayerName,\n      \"white-player-name\": _ctx.whitePlayerName,\n      \"black-player-time-ms\": _ctx.blackPlayerTimeMs,\n      \"black-player-byoyomi\": _ctx.blackPlayerByoyomi,\n      \"white-player-time-ms\": _ctx.whitePlayerTimeMs,\n      \"white-player-byoyomi\": _ctx.whitePlayerByoyomi,\n      onMove: _ctx.onMove,\n      onEdit: _ctx.onEdit\n    }, {\n      \"right-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          (_ctx.controlStates.game)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onGame && _ctx.onGame(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"game\"\n                }),\n                _hoisted_2\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.stop)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 1,\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStop && _ctx.onStop(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"stop\"\n                }),\n                _hoisted_3\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.resign)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 2,\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onResign && _ctx.onResign(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"resign\"\n                }),\n                _hoisted_4\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.research)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 3,\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onResearch && _ctx.onResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"research\"\n                }),\n                _hoisted_5\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endResearch)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 4,\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onEndResearch && _ctx.onEndResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"end\"\n                }),\n                _hoisted_6\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.startEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 5,\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onStartEditPosition && _ctx.onStartEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"edit\"\n                }),\n                _hoisted_7\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 6,\n                onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onEndEditPosition && _ctx.onEndEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"check\"\n                }),\n                _hoisted_8\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 7,\n                onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onChangeTurn && _ctx.onChangeTurn(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"swap\"\n                }),\n                _hoisted_9\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 8,\n                onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onInitPositionStandard && _ctx.onInitPositionStandard(...args)))\n              }, \"  \"))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 9,\n                onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onInitPositionTsumeShogi && _ctx.onInitPositionTsumeShogi(...args)))\n              }, \"  \"))\n            : _createCommentVNode(\"\", true)\n        ])\n      ]),\n      \"left-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.appSettings,\n            onClick: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onOpenAppSettings && _ctx.onOpenAppSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"settings\"\n            }),\n            _hoisted_12\n          ], 8, _hoisted_11),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.engineSettings,\n            onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onOpenEngineSettings && _ctx.onOpenEngineSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"engineSettings\"\n            }),\n            _hoisted_14\n          ], 8, _hoisted_13),\n          _createElementVNode(\"button\", {\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onFlip && _ctx.onFlip(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"flip\"\n            }),\n            _hoisted_15\n          ]),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.paste,\n            onClick: _cache[13] || (_cache[13] = \n//@ts-ignore\n(...args) => (_ctx.onPaste && _ctx.onPaste(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"paste\"\n            }),\n            _hoisted_17\n          ], 8, _hoisted_16),\n          _createElementVNode(\"button\", {\n            onClick: _cache[14] || (_cache[14] = \n//@ts-ignore\n(...args) => (_ctx.onCopy && _ctx.onCopy(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"copy\"\n            }),\n            _hoisted_18\n          ]),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.removeAfter,\n            onClick: _cache[15] || (_cache[15] = \n//@ts-ignore\n(...args) => (_ctx.onRemoveAfter && _ctx.onRemoveAfter(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"delete\"\n            }),\n            _hoisted_20\n          ], 8, _hoisted_19)\n        ])\n      ]),\n      _: 1\n    }, 8, [\"piece-image-type\", \"board-image-type\", \"max-size\", \"position\", \"last-move\", \"flip\", \"allow-move\", \"allow-edit\", \"black-player-name\", \"white-player-name\", \"black-player-time-ms\", \"black-player-byoyomi\", \"white-player-time-ms\", \"white-player-byoyomi\", \"onMove\", \"onEdit\"])\n  ]))\n}","import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-46c90ba8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = { class: \"player-name-text\" }\nconst _hoisted_3 = { class: \"clock-text\" }\nconst _hoisted_4 = { class: \"player-name-text\" }\nconst _hoisted_5 = { class: \"clock-text\" }\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = [\"onClick\", \"onContextmenu\"]\nconst _hoisted_8 = [\"src\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"onClick\"]\nconst _hoisted_12 = [\"src\"]\nconst _hoisted_13 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"frame\",\n      style: _normalizeStyle(_ctx.layout.frame.style),\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.clickFrame()))\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"board\",\n        style: _normalizeStyle(_ctx.layout.board.style)\n      }, [\n        _createElementVNode(\"img\", {\n          class: \"board-image\",\n          src: _ctx.layout.board.imagePath\n        }, null, 8, _hoisted_1)\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'black' }]),\n        style: _normalizeStyle(_ctx.layout.blackPlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_2, \"\" + _toDisplayString(_ctx.blackPlayerName), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.blackPlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.blackClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.blackPlayerTimeText), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'white' }]),\n        style: _normalizeStyle(_ctx.layout.whitePlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_4, \"\" + _toDisplayString(_ctx.whitePlayerName), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.whitePlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.whiteClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.whitePlayerTimeText), 1)\n      ], 6),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.backgroundStyle)\n        }, null, 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.piece, (piece) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: piece.id,\n          class: \"piece\",\n          style: _normalizeStyle(piece.style)\n        }, [\n          _createElementVNode(\"img\", {\n            class: \"piece-image\",\n            src: piece.imagePath\n          }, null, 8, _hoisted_6)\n        ], 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.style),\n          onClick: ($event: any) => (_ctx.clickSquare($event, square.file, square.rank)),\n          onContextmenu: ($event: any) => (_ctx.clickSquareR($event, square.file, square.rank))\n        }, null, 44, _hoisted_7))\n      }), 128)),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.blackHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_8)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, 'black', pointer.type))\n          }, null, 12, _hoisted_9))\n        }), 128))\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.whiteHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_10)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, 'white', pointer.type))\n          }, null, 12, _hoisted_11))\n        }), 128))\n      ], 4),\n      (_ctx.layout.promotion)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"promotion-selector\",\n            style: _normalizeStyle(_ctx.layout.promotion.style)\n          }, [\n            _createElementVNode(\"div\", {\n              class: \"select-button promote\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.clickPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.promoteImagePath\n              }, null, 8, _hoisted_12)\n            ]),\n            _createElementVNode(\"div\", {\n              class: \"select-button not-promote\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.clickNotPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.notPromoteImagePath\n              }, null, 8, _hoisted_13)\n            ])\n          ], 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"turn\",\n        style: _normalizeStyle(_ctx.layout.turn.style)\n      }, \"\", 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.left.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"left-control\", {}, undefined, true)\n      ], 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.right.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"right-control\", {}, undefined, true)\n      ], 4)\n    ], 4)\n  ]))\n}","export enum Color {\n  BLACK = \"black\",\n  WHITE = \"white\",\n}\n\nexport function reverseColor(color: Color): Color {\n  if (color === Color.BLACK) {\n    return Color.WHITE;\n  }\n  return Color.BLACK;\n}\n\nexport function colorToSFEN(color: Color): string {\n  if (color === Color.BLACK) {\n    return \"b\";\n  }\n  return \"w\";\n}\n\nexport function isValidSFENColor(sfen: string): boolean {\n  return sfen === \"b\" || sfen === \"w\";\n}\n\nexport function parseSFENColor(sfen: string): Color {\n  return sfen === \"b\" ? Color.BLACK : Color.WHITE;\n}\n","import { Color, reverseColor } from \"./color\";\n\nexport enum PieceType {\n  PAWN = \"pawn\",\n  LANCE = \"lance\",\n  KNIGHT = \"knight\",\n  SILVER = \"silver\",\n  GOLD = \"gold\",\n  BISHOP = \"bishop\",\n  ROOK = \"rook\",\n  KING = \"king\",\n  PROM_PAWN = \"promPawn\",\n  PROM_LANCE = \"promLance\",\n  PROM_KNIGHT = \"promKnight\",\n  PROM_SILVER = \"promSilver\",\n  HORSE = \"horse\",\n  DRAGON = \"dragon\",\n}\n\nconst standardPieceNameMap: { [pieceType: string]: string } = {\n  pawn: \"\",\n  lance: \"\",\n  knight: \"\",\n  silver: \"\",\n  gold: \"\",\n  bishop: \"\",\n  rook: \"\",\n  king: \"\",\n  promPawn: \"\",\n  promLance: \"\",\n  promKnight: \"\",\n  promSilver: \"\",\n  horse: \"\",\n  dragon: \"\",\n};\n\nexport function standardPieceName(type: PieceType): string {\n  const val = standardPieceNameMap[type];\n  return val || \"\";\n}\n\nexport const pieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n  PieceType.KING,\n  PieceType.PROM_PAWN,\n  PieceType.PROM_LANCE,\n  PieceType.PROM_KNIGHT,\n  PieceType.PROM_SILVER,\n  PieceType.HORSE,\n  PieceType.DRAGON,\n];\n\nexport const handPieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n];\n\nconst promotable: { [pieceType: string]: boolean } = {\n  pawn: true,\n  lance: true,\n  knight: true,\n  silver: true,\n  gold: false,\n  bishop: true,\n  rook: true,\n  king: false,\n  promPawn: false,\n  promLance: false,\n  promKnight: false,\n  promSilver: false,\n  horse: false,\n  dragon: false,\n};\n\nconst promoteMap: { [pieceType: string]: PieceType } = {\n  pawn: PieceType.PROM_PAWN,\n  lance: PieceType.PROM_LANCE,\n  knight: PieceType.PROM_KNIGHT,\n  silver: PieceType.PROM_SILVER,\n  bishop: PieceType.HORSE,\n  rook: PieceType.DRAGON,\n};\n\nconst unpromoteMap: { [pieceType: string]: PieceType } = {\n  promPawn: PieceType.PAWN,\n  promLance: PieceType.LANCE,\n  promKnight: PieceType.KNIGHT,\n  promSilver: PieceType.SILVER,\n  horse: PieceType.BISHOP,\n  dragon: PieceType.ROOK,\n};\n\nconst toSFENCharBlack: { [pieceType: string]: string } = {\n  pawn: \"P\",\n  lance: \"L\",\n  knight: \"N\",\n  silver: \"S\",\n  gold: \"G\",\n  bishop: \"B\",\n  rook: \"R\",\n  king: \"K\",\n  promPawn: \"+P\",\n  promLance: \"+L\",\n  promKnight: \"+N\",\n  promSilver: \"+S\",\n  horse: \"+B\",\n  dragon: \"+R\",\n};\n\nexport function pieceTypeToSFEN(type: PieceType): string {\n  return toSFENCharBlack[type];\n}\n\nconst toSFENCharWhite: { [pieceType: string]: string } = {\n  pawn: \"p\",\n  lance: \"l\",\n  knight: \"n\",\n  silver: \"s\",\n  gold: \"g\",\n  bishop: \"b\",\n  rook: \"r\",\n  king: \"k\",\n  promPawn: \"+p\",\n  promLance: \"+l\",\n  promKnight: \"+n\",\n  promSilver: \"+s\",\n  horse: \"+b\",\n  dragon: \"+r\",\n};\n\nconst sfenCharToTypeMap: { [sfen: string]: PieceType } = {\n  P: PieceType.PAWN,\n  L: PieceType.LANCE,\n  N: PieceType.KNIGHT,\n  S: PieceType.SILVER,\n  G: PieceType.GOLD,\n  B: PieceType.BISHOP,\n  R: PieceType.ROOK,\n  K: PieceType.KING,\n  \"+P\": PieceType.PROM_PAWN,\n  \"+L\": PieceType.PROM_LANCE,\n  \"+N\": PieceType.PROM_KNIGHT,\n  \"+S\": PieceType.PROM_SILVER,\n  \"+B\": PieceType.HORSE,\n  \"+R\": PieceType.DRAGON,\n  p: PieceType.PAWN,\n  l: PieceType.LANCE,\n  n: PieceType.KNIGHT,\n  s: PieceType.SILVER,\n  g: PieceType.GOLD,\n  b: PieceType.BISHOP,\n  r: PieceType.ROOK,\n  k: PieceType.KING,\n  \"+p\": PieceType.PROM_PAWN,\n  \"+l\": PieceType.PROM_LANCE,\n  \"+n\": PieceType.PROM_KNIGHT,\n  \"+s\": PieceType.PROM_SILVER,\n  \"+b\": PieceType.HORSE,\n  \"+r\": PieceType.DRAGON,\n};\n\nconst sfenCharToColorMap: { [sfen: string]: Color } = {\n  P: Color.BLACK,\n  L: Color.BLACK,\n  N: Color.BLACK,\n  S: Color.BLACK,\n  G: Color.BLACK,\n  B: Color.BLACK,\n  R: Color.BLACK,\n  K: Color.BLACK,\n  \"+P\": Color.BLACK,\n  \"+L\": Color.BLACK,\n  \"+N\": Color.BLACK,\n  \"+S\": Color.BLACK,\n  \"+B\": Color.BLACK,\n  \"+R\": Color.BLACK,\n  p: Color.WHITE,\n  l: Color.WHITE,\n  n: Color.WHITE,\n  s: Color.WHITE,\n  g: Color.WHITE,\n  b: Color.WHITE,\n  r: Color.WHITE,\n  k: Color.WHITE,\n  \"+p\": Color.WHITE,\n  \"+l\": Color.WHITE,\n  \"+n\": Color.WHITE,\n  \"+s\": Color.WHITE,\n  \"+b\": Color.WHITE,\n  \"+r\": Color.WHITE,\n};\n\ntype RotateResult = {\n  type: PieceType;\n  reverseColor: boolean;\n};\n\nconst rotateMap = new Map<PieceType, RotateResult>();\nrotateMap.set(PieceType.PAWN, {\n  type: PieceType.PROM_PAWN,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.LANCE, {\n  type: PieceType.PROM_LANCE,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.KNIGHT, {\n  type: PieceType.PROM_KNIGHT,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.SILVER, {\n  type: PieceType.PROM_SILVER,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.GOLD, { type: PieceType.GOLD, reverseColor: true });\nrotateMap.set(PieceType.BISHOP, { type: PieceType.HORSE, reverseColor: false });\nrotateMap.set(PieceType.ROOK, { type: PieceType.DRAGON, reverseColor: false });\nrotateMap.set(PieceType.KING, { type: PieceType.KING, reverseColor: true });\nrotateMap.set(PieceType.PROM_PAWN, {\n  type: PieceType.PAWN,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_LANCE, {\n  type: PieceType.LANCE,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_KNIGHT, {\n  type: PieceType.KNIGHT,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_SILVER, {\n  type: PieceType.SILVER,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.HORSE, { type: PieceType.BISHOP, reverseColor: true });\nrotateMap.set(PieceType.DRAGON, { type: PieceType.ROOK, reverseColor: true });\n\nexport class Piece {\n  color: Color;\n\n  type: PieceType;\n\n  constructor(color: Color, type: PieceType) {\n    this.type = type;\n    this.color = color;\n  }\n\n  black(): Piece {\n    return this.withColor(Color.BLACK);\n  }\n\n  white(): Piece {\n    return this.withColor(Color.WHITE);\n  }\n\n  withColor(color: Color): Piece {\n    return new Piece(color, this.type);\n  }\n\n  equals(piece: Piece): boolean {\n    return this.type === piece.type && this.color === piece.color;\n  }\n\n  promoted(): Piece {\n    const type = promoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  unpromoted(): Piece {\n    const type = unpromoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  isPromotable(): boolean {\n    return !!promotable[this.type];\n  }\n\n  rotate(): Piece {\n    const r = rotateMap.get(this.type);\n    const piece = new Piece(this.color, r ? r.type : this.type);\n    if (r && r.reverseColor) {\n      piece.color = reverseColor(this.color);\n    }\n    return piece;\n  }\n\n  get id(): string {\n    return this.color + \"_\" + this.type;\n  }\n\n  get sfen(): string {\n    switch (this.color) {\n      default:\n      case Color.BLACK:\n        return toSFENCharBlack[this.type] as string;\n      case Color.WHITE:\n        return toSFENCharWhite[this.type] as string;\n    }\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    return !!sfenCharToTypeMap[sfen];\n  }\n\n  static newBySFEN(sfen: string): Piece | null {\n    const type = sfenCharToTypeMap[sfen];\n    if (!type) {\n      return null;\n    }\n    const color = sfenCharToColorMap[sfen];\n    if (!color) {\n      return null;\n    }\n    return new Piece(color, type);\n  }\n}\n","import { Piece } from \"./piece\";\n\nexport enum Direction {\n  UP = \"up\",\n  DOWN = \"down\",\n  LEFT = \"left\",\n  RIGHT = \"right\",\n  LEFT_UP = \"left_up\",\n  RIGHT_UP = \"right_up\",\n  LEFT_DOWN = \"left_down\",\n  RIGHT_DOWN = \"right_down\",\n  LEFT_UP_KNIGHT = \"left_up_knight\",\n  RIGHT_UP_KNIGHT = \"right_up_knight\",\n  LEFT_DOWN_KNIGHT = \"left_down_knight\",\n  RIGHT_DOWN_KNIGHT = \"right_down_knight\",\n}\n\nconst reverseMap = {\n  up: Direction.DOWN,\n  down: Direction.UP,\n  left: Direction.RIGHT,\n  right: Direction.LEFT,\n  left_up: Direction.RIGHT_DOWN,\n  right_up: Direction.LEFT_DOWN,\n  left_down: Direction.RIGHT_UP,\n  right_down: Direction.LEFT_UP,\n  left_up_knight: Direction.RIGHT_DOWN_KNIGHT,\n  right_up_knight: Direction.LEFT_DOWN_KNIGHT,\n  left_down_knight: Direction.RIGHT_UP_KNIGHT,\n  right_down_knight: Direction.LEFT_UP_KNIGHT,\n};\n\nexport function reverseDirection(dir: Direction): Direction {\n  return reverseMap[dir];\n}\n\nexport const directions = [\n  Direction.UP,\n  Direction.DOWN,\n  Direction.LEFT,\n  Direction.RIGHT,\n  Direction.LEFT_UP,\n  Direction.RIGHT_UP,\n  Direction.LEFT_DOWN,\n  Direction.RIGHT_DOWN,\n  Direction.LEFT_UP_KNIGHT,\n  Direction.RIGHT_UP_KNIGHT,\n  Direction.LEFT_DOWN_KNIGHT,\n  Direction.RIGHT_DOWN_KNIGHT,\n];\n\nexport enum MoveType {\n  SHORT = \"short\",\n  LONG = \"long\",\n}\n\nconst movableDirectionMap: {\n  [color: string]: {\n    [pieceType: string]: { [direction: string]: MoveType | undefined };\n  };\n} = {\n  black: {\n    pawn: { up: MoveType.SHORT },\n    lance: { up: MoveType.LONG },\n    knight: { left_up_knight: MoveType.SHORT, right_up_knight: MoveType.SHORT },\n    silver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n    gold: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    bishop: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n    },\n    rook: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promLance: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promKnight: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promSilver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    horse: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    dragon: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n  },\n  white: {\n    pawn: { down: MoveType.SHORT },\n    lance: { down: MoveType.LONG },\n    knight: {\n      left_down_knight: MoveType.SHORT,\n      right_down_knight: MoveType.SHORT,\n    },\n    silver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n    gold: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    bishop: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n    },\n    rook: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promLance: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promKnight: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promSilver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    horse: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    dragon: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n  },\n};\n\nexport function movableDirections(piece: Piece): Direction[] {\n  return Object.keys(\n    movableDirectionMap[piece.color as string][piece.type]\n  ) as Direction[];\n}\n\nexport function resolveMoveType(\n  piece: Piece,\n  direction: Direction\n): MoveType | undefined {\n  return movableDirectionMap[piece.color as string][piece.type][direction];\n}\n\nexport const directionToDeltaMap: {\n  [direction: string]: { x: number; y: number };\n} = {\n  up: { x: 0, y: -1 },\n  down: { x: 0, y: 1 },\n  left: { x: -1, y: 0 },\n  right: { x: 1, y: 0 },\n  left_up: { x: -1, y: -1 },\n  right_up: { x: 1, y: -1 },\n  left_down: { x: -1, y: 1 },\n  right_down: { x: 1, y: 1 },\n  left_up_knight: { x: -1, y: -2 },\n  right_up_knight: { x: 1, y: -2 },\n  left_down_knight: { x: -1, y: 2 },\n  right_down_knight: { x: 1, y: 2 },\n};\n\nexport function vectorToDirectionAndDistance(\n  x: number,\n  y: number\n): {\n  direction: Direction;\n  distance: number;\n  ok: boolean;\n} {\n  if (x === 1 && y === -2) {\n    return { direction: Direction.RIGHT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === -2) {\n    return { direction: Direction.LEFT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === 1 && y === 2) {\n    return { direction: Direction.RIGHT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === 2) {\n    return { direction: Direction.LEFT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x !== 0 && y !== 0 && Math.abs(x) !== Math.abs(y)) {\n    return { direction: \"\" as Direction, distance: 0, ok: false };\n  }\n  let dx = x;\n  let dy = y;\n  let distance = 0;\n  if (dx !== 0) {\n    distance = Math.abs(dx);\n    dx /= distance;\n  }\n  if (dy !== 0) {\n    distance = Math.abs(dy);\n    dy /= distance;\n  }\n  if (dx === -1 && dy === -1) {\n    return { direction: Direction.LEFT_UP, distance, ok: true };\n  }\n  if (dx === 0 && dy === -1) {\n    return { direction: Direction.UP, distance, ok: true };\n  }\n  if (dx === 1 && dy === -1) {\n    return { direction: Direction.RIGHT_UP, distance, ok: true };\n  }\n  if (dx === -1 && dy === 0) {\n    return { direction: Direction.LEFT, distance, ok: true };\n  }\n  if (dx === 1 && dy === 0) {\n    return { direction: Direction.RIGHT, distance, ok: true };\n  }\n  if (dx === -1 && dy === 1) {\n    return { direction: Direction.LEFT_DOWN, distance, ok: true };\n  }\n  if (dx === 0 && dy === 1) {\n    return { direction: Direction.DOWN, distance, ok: true };\n  }\n  if (dx === 1 && dy === 1) {\n    return { direction: Direction.RIGHT_DOWN, distance, ok: true };\n  }\n  return { direction: \"\" as Direction, distance: 0, ok: false };\n}\n","import { Direction } from \"./direction\";\n\nfunction sfenFileToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nfunction sfenRankToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"a\":\n      return 1;\n    case \"b\":\n      return 2;\n    case \"c\":\n      return 3;\n    case \"d\":\n      return 4;\n    case \"e\":\n      return 5;\n    case \"f\":\n      return 6;\n    case \"g\":\n      return 7;\n    case \"h\":\n      return 8;\n    case \"i\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nconst sfenRanks = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"];\n\nexport default class Square {\n  file: number;\n\n  rank: number;\n\n  constructor(file: number, rank: number) {\n    this.file = file;\n    this.rank = rank;\n  }\n\n  get x(): number {\n    return 9 - this.file;\n  }\n\n  get y(): number {\n    return this.rank - 1;\n  }\n\n  get index(): number {\n    return this.y * 9 + this.x;\n  }\n\n  get opposite(): Square {\n    return new Square(10 - this.file, 10 - this.rank);\n  }\n\n  neighbor(dx: number, dy: number): Square;\n  neighbor(dir: Direction): Square;\n  neighbor(arg0: number | Direction, arg1?: number): Square {\n    switch (arg0) {\n      case Direction.UP:\n        return new Square(this.file, this.rank - 1);\n      case Direction.DOWN:\n        return new Square(this.file, this.rank + 1);\n      case Direction.LEFT:\n        return new Square(this.file + 1, this.rank);\n      case Direction.RIGHT:\n        return new Square(this.file - 1, this.rank);\n      case Direction.LEFT_UP:\n        return new Square(this.file + 1, this.rank - 1);\n      case Direction.RIGHT_UP:\n        return new Square(this.file - 1, this.rank - 1);\n      case Direction.LEFT_DOWN:\n        return new Square(this.file + 1, this.rank + 1);\n      case Direction.RIGHT_DOWN:\n        return new Square(this.file - 1, this.rank + 1);\n      case Direction.LEFT_UP_KNIGHT:\n        return new Square(this.file + 1, this.rank - 2);\n      case Direction.RIGHT_UP_KNIGHT:\n        return new Square(this.file - 1, this.rank - 2);\n      case Direction.LEFT_DOWN_KNIGHT:\n        return new Square(this.file + 1, this.rank + 2);\n      case Direction.RIGHT_DOWN_KNIGHT:\n        return new Square(this.file - 1, this.rank + 2);\n    }\n    const dx = arg0 as number;\n    const dy = arg1 as number;\n    return new Square(this.file - dx, this.rank + dy);\n  }\n\n  get valid(): boolean {\n    return this.file >= 1 && this.file <= 9 && this.rank >= 1 && this.rank <= 9;\n  }\n\n  equals(square: Square | null | undefined): boolean {\n    return !!square && this.file === square.file && this.rank === square.rank;\n  }\n\n  static newByXY(x: number, y: number): Square {\n    return new Square(9 - x, y + 1);\n  }\n\n  static newByIndex(index: number): Square {\n    return new Square(9 - (index % 9), Math.trunc(index / 9) + 1);\n  }\n\n  static all: Square[] = [];\n\n  get sfen(): string {\n    return this.file + sfenRanks[this.rank - 1];\n  }\n\n  static parseSFENSquare(sfen: string): Square | null {\n    const file = sfenFileToNumber(sfen[0]);\n    const rank = sfenRankToNumber(sfen[1]);\n    if (!file || !rank) {\n      return null;\n    }\n    return new Square(file, rank);\n  }\n}\n\nfor (let index = 0; index < 81; index += 1) {\n  Square.all.push(Square.newByIndex(index));\n}\n","import { Color } from \"./color\";\nimport { Piece, PieceType, pieceTypeToSFEN, standardPieceName } from \"./piece\";\nimport Square from \"./square\";\n\nconst fileDisplayTexts = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\nconst rankDisplayTexts = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\n\nexport default class Move {\n  from: Square | PieceType;\n\n  to: Square;\n\n  promote: boolean;\n\n  color: Color;\n\n  pieceType: PieceType;\n\n  capturedPieceType: PieceType | null;\n\n  constructor(\n    from: Square | PieceType,\n    to: Square,\n    promote: boolean,\n    color: Color,\n    pieceType: PieceType,\n    capturedPieceType: PieceType | null\n  ) {\n    this.from = from;\n    this.to = to;\n    this.promote = promote;\n    this.color = color;\n    this.pieceType = pieceType;\n    this.capturedPieceType = capturedPieceType;\n  }\n\n  equals(move: Move | null | undefined): boolean {\n    if (!move) {\n      return false;\n    }\n    return (\n      ((this.from instanceof Square &&\n        move.from instanceof Square &&\n        this.from.equals(move.from)) ||\n        (!(this.from instanceof Square) &&\n          !(move.from instanceof Square) &&\n          this.from === move.from)) &&\n      this.to.equals(move.to) &&\n      this.promote === move.promote &&\n      this.color === move.color &&\n      this.pieceType === move.pieceType &&\n      this.capturedPieceType === move.capturedPieceType\n    );\n  }\n\n  withPromote(): Move {\n    return new Move(\n      this.from,\n      this.to,\n      true,\n      this.color,\n      this.pieceType,\n      this.capturedPieceType\n    );\n  }\n\n  getDisplayText(prev?: Move | null): string {\n    let text = \"\";\n    text += this.color === Color.BLACK ? \"\" : \"\";\n    if (prev && prev.to.equals(this.to)) {\n      text += \"\";\n    } else {\n      text += fileDisplayTexts[this.to.file - 1];\n      text += rankDisplayTexts[this.to.rank - 1];\n    }\n    text += standardPieceName(this.pieceType);\n    if (this.promote) {\n      text += \"\";\n    }\n    if (this.from instanceof Square) {\n      const square = this.from;\n      text += ` (${square.file}${square.rank})`;\n    } else {\n      text += \"\";\n    }\n    return text;\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    if (this.from instanceof Square) {\n      ret += this.from.sfen;\n    } else {\n      ret += pieceTypeToSFEN(this.from) + \"*\";\n    }\n    ret += this.to.sfen;\n    if (this.promote) {\n      ret += \"+\";\n    }\n    return ret;\n  }\n}\n\nexport function parseSFENMove(sfen: string): {\n  from: Square | PieceType;\n  to: Square;\n  promote: boolean;\n} | null {\n  let from: PieceType | Square;\n  if (sfen[1] === \"*\") {\n    const piece = Piece.newBySFEN(sfen[0]);\n    if (!piece) {\n      return null;\n    }\n    from = piece.type;\n  } else {\n    const square = Square.parseSFENSquare(sfen);\n    if (!square) {\n      return null;\n    }\n    from = square;\n  }\n  const to = Square.parseSFENSquare(sfen.substring(2));\n  if (!to) {\n    return null;\n  }\n  const promote = sfen.length >= 5 && sfen[4] === \"+\";\n  return { from, to, promote };\n}\n","import { Color } from \".\";\nimport { reverseColor } from \"./color\";\nimport {\n  directions,\n  MoveType,\n  resolveMoveType,\n  reverseDirection,\n} from \"./direction\";\nimport { Piece, PieceType } from \"./piece\";\nimport Square from \"./square\";\n\nexport enum InitialPositionType {\n  STANDARD = \"standard\",\n  EMPTY = \"empty\",\n  HANDICAP_LANCE = \"handicapLance\",\n  HANDICAP_RIGHT_LANCE = \"handicapRightLance\",\n  HANDICAP_BISHOP = \"handicapBishop\",\n  HANDICAP_ROOK = \"handicapRook\",\n  HANDICAP_ROOK_LANCE = \"handicapRookLance\",\n  HANDICAP_2PIECES = \"handicap2Pieces\",\n  HANDICAP_4PIECES = \"handicap4Pieces\",\n  HANDICAP_6PIECES = \"handicap6Pieces\",\n  HANDICAP_8PIECES = \"handicap8Pieces\",\n  TSUME_SHOGI = \"tsumeShogi\",\n}\n\nfunction sfenCharToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\ntype PowerDetectionOption = {\n  filled?: Square;\n  ignore?: Square;\n};\n\nexport interface ImmutableBoard {\n  at(square: Square): Piece | null;\n  listNonEmptySquares(): Array<Square>;\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean;\n  isChecked(kingColor: Color, option?: PowerDetectionOption): boolean;\n  readonly sfen: string;\n}\n\nexport default class Board {\n  private squares: Array<Piece | null>;\n\n  constructor() {\n    this.squares = new Array<Piece>();\n    for (let i = 0; i < 81; i += 1) {\n      this.squares.push(null);\n    }\n    this.reset(InitialPositionType.STANDARD);\n  }\n\n  at(square: Square): Piece | null {\n    return this.squares[square.index];\n  }\n\n  set(square: Square, piece: Piece): void {\n    this.squares[square.index] = piece;\n  }\n\n  swap(square1: Square, square2: Square): void {\n    const tmp = this.squares[square1.index];\n    this.squares[square1.index] = this.squares[square2.index];\n    this.squares[square2.index] = tmp;\n  }\n\n  remove(square: Square): Piece | null {\n    const removed = this.squares[square.index];\n    this.squares[square.index] = null;\n    return removed;\n  }\n\n  listNonEmptySquares(): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      if (this.squares[square.index]) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  listSquaresByColor(color: Color): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      const piece = this.squares[square.index];\n      if (piece && piece.color === color) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  clear(): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = null;\n    });\n  }\n\n  reset(type: InitialPositionType): void {\n    this.clear();\n    if (type === InitialPositionType.EMPTY) {\n      return;\n    }\n    this.squares[new Square(5, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      return;\n    }\n    this.squares[new Square(5, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KING\n    );\n    this.squares[new Square(2, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(2, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(4, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(4, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(3, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(3, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(2, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(2, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(1, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(1, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    switch (type) {\n      default:\n      case InitialPositionType.STANDARD:\n        return;\n      case InitialPositionType.HANDICAP_LANCE:\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_BISHOP:\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK:\n        this.squares[new Square(8, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_2PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_4PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_6PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_8PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(3, 1).index] = null;\n        this.squares[new Square(7, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n    }\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    let empty = 0;\n    for (let y = 0; y < 9; y += 1) {\n      for (let x = 0; x < 9; x += 1) {\n        const piece = this.at(Square.newByXY(x, y));\n        if (piece) {\n          if (empty) {\n            ret += empty;\n            empty = 0;\n          }\n          ret += piece.sfen;\n        } else {\n          empty += 1;\n        }\n      }\n      if (empty) {\n        ret += empty;\n        empty = 0;\n      }\n      if (y !== 8) {\n        ret += \"/\";\n      }\n    }\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Board.isValidSFEN(sfen)) {\n      return false;\n    }\n    this.clear();\n    const rows = sfen.split(\"/\");\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else {\n          this.set(Square.newByXY(x, y), Piece.newBySFEN(c) as Piece);\n          x += 1;\n        }\n      }\n    }\n    return true;\n  }\n\n  findKing(color: Color): Square | undefined {\n    const king = new Piece(color, PieceType.KING);\n    return Square.all.find((square) => {\n      const piece = this.at(square);\n      if (piece && king.equals(piece)) {\n        return true;\n      }\n      return;\n    });\n  }\n\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean {\n    return !!directions.find((dir) => {\n      let step = 0;\n      for (\n        let square = target.neighbor(dir);\n        square.valid;\n        square = square.neighbor(dir)\n      ) {\n        step += 1;\n        if (option && option.filled && square.equals(option.filled)) {\n          break;\n        }\n        if (option && option.ignore && square.equals(option.ignore)) {\n          continue;\n        }\n        const piece = this.at(square);\n        if (piece) {\n          if (piece.color !== color) {\n            return false;\n          }\n          const rdir = reverseDirection(dir);\n          const type = resolveMoveType(piece, rdir);\n          return (\n            type === MoveType.LONG || (type === MoveType.SHORT && step === 1)\n          );\n        }\n      }\n      return false;\n    });\n  }\n\n  isChecked(kingColor: Color, option?: PowerDetectionOption): boolean {\n    const square = this.findKing(kingColor);\n    if (!square) {\n      return false;\n    }\n    return this.hasPower(square, reverseColor(kingColor), {\n      filled: option && option.filled,\n      ignore: option && option.ignore,\n    });\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const rows = sfen.split(\"/\");\n    if (rows.length !== 9) {\n      return false;\n    }\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else if (Piece.isValidSFEN(c)) {\n          x += 1;\n        } else {\n          return false;\n        }\n      }\n      if (x !== 9) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  copyFrom(board: Board): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = board.at(square);\n    });\n  }\n}\n","import { Piece, PieceType } from \"./piece\";\nimport { Color } from \"./color\";\n\nfunction buildSFEN(n: number, piece: Piece): string {\n  if (n === 0) {\n    return \"\";\n  }\n  return (n !== 1 ? n : \"\") + piece.sfen;\n}\n\nexport interface ImmutableHand {\n  count(pieceType: PieceType): number;\n  forEach(handler: (pieceType: PieceType, n: number) => void): void;\n  readonly sfenBlack: string;\n  readonly sfenWhite: string;\n  formatSFEN(color: Color): string;\n}\n\nexport default class Hand {\n  private pieces: Map<PieceType, number>;\n\n  constructor() {\n    this.pieces = new Map<PieceType, number>();\n    this.pieces.set(PieceType.PAWN, 0);\n    this.pieces.set(PieceType.LANCE, 0);\n    this.pieces.set(PieceType.KNIGHT, 0);\n    this.pieces.set(PieceType.SILVER, 0);\n    this.pieces.set(PieceType.GOLD, 0);\n    this.pieces.set(PieceType.BISHOP, 0);\n    this.pieces.set(PieceType.ROOK, 0);\n  }\n\n  count(pieceType: PieceType): number {\n    return this.pieces.get(pieceType) as number;\n  }\n\n  set(pieceType: PieceType, count: number): void {\n    this.pieces.set(pieceType, count);\n  }\n\n  add(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c += n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  reduce(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c -= n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  forEach(handler: (pieceType: PieceType, n: number) => void): void {\n    handler(PieceType.PAWN, this.pieces.get(PieceType.PAWN) as number);\n    handler(PieceType.LANCE, this.pieces.get(PieceType.LANCE) as number);\n    handler(PieceType.KNIGHT, this.pieces.get(PieceType.KNIGHT) as number);\n    handler(PieceType.SILVER, this.pieces.get(PieceType.SILVER) as number);\n    handler(PieceType.GOLD, this.pieces.get(PieceType.GOLD) as number);\n    handler(PieceType.BISHOP, this.pieces.get(PieceType.BISHOP) as number);\n    handler(PieceType.ROOK, this.pieces.get(PieceType.ROOK) as number);\n  }\n\n  get sfenBlack(): string {\n    return this.formatSFEN(Color.BLACK);\n  }\n\n  get sfenWhite(): string {\n    return this.formatSFEN(Color.WHITE);\n  }\n\n  formatSFEN(color: Color): string {\n    let ret = \"\";\n    ret += buildSFEN(\n      this.count(PieceType.ROOK) as number,\n      new Piece(color, PieceType.ROOK)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.BISHOP) as number,\n      new Piece(color, PieceType.BISHOP)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.GOLD) as number,\n      new Piece(color, PieceType.GOLD)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.SILVER) as number,\n      new Piece(color, PieceType.SILVER)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.KNIGHT) as number,\n      new Piece(color, PieceType.KNIGHT)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.LANCE) as number,\n      new Piece(color, PieceType.LANCE)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.PAWN) as number,\n      new Piece(color, PieceType.PAWN)\n    );\n    if (ret === \"\") {\n      return \"-\";\n    }\n    return ret;\n  }\n\n  static formatSFEN(black: Hand, white: Hand): string {\n    const b = black.sfenBlack;\n    const w = white.sfenWhite;\n    if (b === \"-\" && w === \"-\") {\n      return \"-\";\n    }\n    if (w === \"-\") {\n      return b;\n    }\n    if (b === \"-\") {\n      return w;\n    }\n    return b + w;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    if (sfen === \"-\") {\n      return true;\n    }\n    return !!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/);\n  }\n\n  static parseSFEN(sfen: string): { black: Hand; white: Hand } | null {\n    if (sfen === \"-\") {\n      return { black: new Hand(), white: new Hand() };\n    }\n    if (!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)) {\n      return null;\n    }\n    const sections = sfen.match(\n      /([0-9]*[PLNSGBRplnsgbr])/g\n    ) as RegExpMatchArray;\n    const black = new Hand();\n    const white = new Hand();\n    for (let i = 0; i < sections.length; i += 1) {\n      const section = sections[i];\n      let n = 1;\n      if (section.length >= 2) {\n        n = Number(section.substring(0, section.length - 1));\n      }\n      const piece = Piece.newBySFEN(section[section.length - 1]) as Piece;\n      if (piece.color === Color.BLACK) {\n        black.add(piece.type, n);\n      } else {\n        white.add(piece.type, n);\n      }\n    }\n    return { black, white };\n  }\n\n  copyFrom(hand: Hand): void {\n    hand.pieces.forEach((n, pieceType) => {\n      this.pieces.set(pieceType, n);\n    });\n  }\n}\n","import Board, { ImmutableBoard, InitialPositionType } from \"./board\";\nimport {\n  Color,\n  reverseColor,\n  colorToSFEN,\n  parseSFENColor,\n  isValidSFENColor,\n} from \"./color\";\nimport Move, { parseSFENMove } from \"./move\";\nimport Square from \"./square\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  Direction,\n  directionToDeltaMap,\n  movableDirections,\n  MoveType,\n  resolveMoveType,\n  vectorToDirectionAndDistance,\n} from \"./direction\";\n\nconst invalidRankMap: {\n  [color: string]: { [pieceType: string]: { [rank: number]: boolean } };\n} = {\n  black: {\n    pawn: { 1: true },\n    lance: { 1: true },\n    knight: { 1: true, 2: true },\n  },\n  white: {\n    pawn: { 9: true },\n    lance: { 9: true },\n    knight: { 9: true, 8: true },\n  },\n};\n\nfunction isInvalidRank(color: Color, type: PieceType, rank: number): boolean {\n  const rule = invalidRankMap[color][type];\n  return rule ? rule[rank] : false;\n}\n\nfunction isPromotableRank(color: Color, rank: number): boolean {\n  if (color === Color.BLACK) {\n    return rank <= 3;\n  }\n  return rank >= 7;\n}\n\nfunction pawnExists(color: Color, board: Board, file: number): boolean {\n  for (let rank = 1; rank <= 9; rank += 1) {\n    const piece = board.at(new Square(file, rank));\n    if (piece && piece.type === PieceType.PAWN && piece.color === color) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport type PositionChange = {\n  move?: {\n    from: Square | Piece;\n    to: Square | Color;\n  };\n  rotate?: Square;\n};\n\nexport interface ImmutablePosition {\n  readonly board: ImmutableBoard;\n  readonly color: Color;\n  readonly blackHand: ImmutableHand;\n  readonly whiteHand: ImmutableHand;\n  hand(color: Color): ImmutableHand;\n  readonly checked: boolean;\n  createMove(from: Square | PieceType, to: Square): Move | null;\n  createMoveBySFEN(sfen: string): Move | null;\n  isPawnDropMate(move: Move): boolean;\n  isValidMove(move: Move): boolean;\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean;\n  readonly sfen: string;\n  getSfen(nextMoveNumber: number): string;\n  clone(): Position;\n}\n\nexport type DoMoveOption = {\n  ignoreValidation?: boolean;\n};\n\nexport default class Position {\n  private _board: Board;\n  private _color: Color;\n  private _blackHand: Hand;\n  private _whiteHand: Hand;\n\n  constructor() {\n    this._board = new Board();\n    this._color = Color.BLACK;\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n  }\n\n  get board(): Board {\n    return this._board;\n  }\n\n  get color(): Color {\n    return this._color;\n  }\n\n  get blackHand(): Hand {\n    return this._blackHand;\n  }\n\n  get whiteHand(): Hand {\n    return this._whiteHand;\n  }\n\n  reset(type: InitialPositionType): void {\n    this._board.reset(type);\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n    switch (type) {\n      case InitialPositionType.STANDARD:\n      case InitialPositionType.EMPTY:\n      case InitialPositionType.TSUME_SHOGI:\n        this._color = Color.BLACK;\n        break;\n      case InitialPositionType.HANDICAP_LANCE:\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n      case InitialPositionType.HANDICAP_BISHOP:\n      case InitialPositionType.HANDICAP_ROOK:\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n      case InitialPositionType.HANDICAP_2PIECES:\n      case InitialPositionType.HANDICAP_4PIECES:\n      case InitialPositionType.HANDICAP_6PIECES:\n      case InitialPositionType.HANDICAP_8PIECES:\n        this._color = Color.WHITE;\n        break;\n    }\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      this._whiteHand.set(PieceType.PAWN, 18);\n      this._whiteHand.set(PieceType.LANCE, 4);\n      this._whiteHand.set(PieceType.KNIGHT, 4);\n      this._whiteHand.set(PieceType.SILVER, 4);\n      this._whiteHand.set(PieceType.GOLD, 4);\n      this._whiteHand.set(PieceType.BISHOP, 2);\n      this._whiteHand.set(PieceType.ROOK, 2);\n    }\n  }\n\n  hand(color: Color): Hand {\n    return this._hand(color);\n  }\n\n  _hand(color: Color): Hand {\n    if (color === Color.BLACK) {\n      return this._blackHand;\n    }\n    return this._whiteHand;\n  }\n\n  get checked(): boolean {\n    return this._board.isChecked(this.color);\n  }\n\n  createMove(from: Square | PieceType, to: Square): Move | null {\n    let pieceType: PieceType;\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return null;\n      }\n      pieceType = piece.type;\n    } else {\n      pieceType = from;\n    }\n    const capturedPiece = this._board.at(to);\n    return new Move(\n      from,\n      to,\n      false,\n      this.color,\n      pieceType,\n      capturedPiece ? capturedPiece.type : null\n    );\n  }\n\n  createMoveBySFEN(sfen: string): Move | null {\n    const m = parseSFENMove(sfen);\n    if (!m) {\n      return null;\n    }\n    let move = this.createMove(m.from, m.to);\n    if (!move) {\n      return null;\n    }\n    if (m.promote) {\n      move = move.withPromote();\n    }\n    return move;\n  }\n\n  isPawnDropMate(move: Move): boolean {\n    if (move.from instanceof Square) {\n      return false;\n    }\n    if (move.pieceType !== PieceType.PAWN) {\n      return false;\n    }\n    const kingSquare = move.to.neighbor(\n      move.color === Color.BLACK ? Direction.UP : Direction.DOWN\n    );\n    const king = this.board.at(kingSquare);\n    if (!king || king.type !== PieceType.KING || king.color === move.color) {\n      return false;\n    }\n    const movable = movableDirections(king).find((dir) => {\n      const to = kingSquare.neighbor(dir);\n      if (!to.valid) {\n        return false;\n      }\n      const piece = this.board.at(to);\n      if (piece && piece.color == king.color) {\n        return false;\n      }\n      return !this.board.hasPower(to, move.color);\n    });\n    if (movable) {\n      return false;\n    }\n    return !this.board.listSquaresByColor(king.color).find((from) => {\n      return (\n        !from.equals(kingSquare) &&\n        this.isMovable(from, move.to) &&\n        !this.board.isChecked(king.color, {\n          filled: move.to,\n          ignore: from,\n        })\n      );\n    });\n  }\n\n  isValidMove(move: Move): boolean {\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from);\n      if (!target || target.color !== this.color) {\n        return false;\n      }\n      if (!this.isMovable(move.from, move.to)) {\n        return false;\n      }\n      const captured = this._board.at(move.to);\n      if (captured && captured.color === this.color) {\n        return false;\n      }\n      if (move.promote) {\n        if (!target.isPromotable()) {\n          return false;\n        }\n        if (\n          !isPromotableRank(this.color, move.from.rank) &&\n          !isPromotableRank(this.color, move.to.rank)\n        ) {\n          return false;\n        }\n      } else if (isInvalidRank(this.color, target.type, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.pieceType !== PieceType.KING\n          ? this._board.isChecked(this.color, {\n              filled: move.to,\n              ignore: move.from,\n            })\n          : this._board.hasPower(move.to, reverseColor(this.color), {\n              ignore: move.from,\n            })\n      ) {\n        return false;\n      }\n    } else {\n      if (move.promote) {\n        return false;\n      }\n      if (move.color !== this.color) {\n        return false;\n      }\n      if (this.hand(this.color).count(move.from) === 0) {\n        return false;\n      }\n      if (this._board.at(move.to)) {\n        return false;\n      }\n      if (isInvalidRank(this.color, move.from, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.from === PieceType.PAWN &&\n        pawnExists(this.color, this._board, move.to.file)\n      ) {\n        return false;\n      }\n      if (this._board.isChecked(this.color, { filled: move.to })) {\n        return false;\n      }\n      if (this.isPawnDropMate(move)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  doMove(move: Move, opt?: DoMoveOption): boolean {\n    if (!(opt && opt.ignoreValidation) && !this.isValidMove(move)) {\n      return false;\n    }\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from) as Piece;\n      const captured = this._board.at(move.to);\n      this._board.remove(move.from);\n      this._board.set(move.to, move.promote ? target.promoted() : target);\n      if (captured && captured.type !== PieceType.KING) {\n        this._hand(this.color).add(captured.unpromoted().type, 1);\n      }\n    } else {\n      this._hand(this.color).reduce(move.from, 1);\n      this._board.set(move.to, new Piece(this.color, move.from));\n    }\n    this._color = reverseColor(this.color);\n    return true;\n  }\n\n  undoMove(move: Move): void {\n    this._color = reverseColor(this.color);\n    if (move.from instanceof Square) {\n      this._board.set(move.from, new Piece(this.color, move.pieceType));\n      if (move.capturedPieceType) {\n        const capturedPiece = new Piece(\n          reverseColor(this.color),\n          move.capturedPieceType\n        );\n        this._board.set(move.to, capturedPiece);\n        if (capturedPiece.type !== PieceType.KING) {\n          this._hand(this.color).reduce(capturedPiece.unpromoted().type, 1);\n        }\n      } else {\n        this._board.remove(move.to);\n      }\n    } else {\n      this._hand(this.color).add(move.from, 1);\n      this._board.remove(move.to);\n    }\n  }\n\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean {\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (from.equals(to)) {\n          return false;\n        }\n      } else if (piece.type === PieceType.KING) {\n        return false;\n      }\n    } else {\n      if (!from.color) {\n        return false;\n      }\n      if (this.hand(from.color).count(from.type) === 0) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (this._board.at(to)) {\n          return false;\n        }\n      } else if (from.color === to) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  edit(change: PositionChange): boolean {\n    if (change.move) {\n      if (!this.isValidEditing(change.move.from, change.move.to)) {\n        return false;\n      }\n      if (!(change.move.from instanceof Square)) {\n        this._hand(change.move.from.color).reduce(change.move.from.type, 1);\n        if (change.move.to instanceof Square) {\n          this._board.set(change.move.to, change.move.from);\n        } else {\n          this._hand(change.move.to).add(change.move.from.type, 1);\n        }\n      } else if (!(change.move.to instanceof Square)) {\n        const piece = this._board.remove(change.move.from) as Piece;\n        this._hand(change.move.to).add(piece.unpromoted().type, 1);\n      } else {\n        this._board.swap(change.move.from, change.move.to);\n      }\n    }\n    if (change.rotate) {\n      const piece = this._board.at(change.rotate);\n      if (piece) {\n        this._board.set(change.rotate, piece.rotate());\n      }\n    }\n    return true;\n  }\n\n  get sfen(): string {\n    return this.getSfen(1);\n  }\n\n  getSfen(nextMoveNumber: number): string {\n    let ret = `sfen ${this._board.sfen} ${colorToSFEN(this.color)} `;\n    ret += Hand.formatSFEN(this._blackHand, this._whiteHand);\n    ret += \" \" + nextMoveNumber;\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Position.isValidSFEN(sfen)) {\n      return false;\n    }\n    const sections = sfen.split(\" \");\n    this._board.resetBySFEN(sections[1]);\n    this._color = parseSFENColor(sections[2]);\n    const hands = Hand.parseSFEN(sections[3]) as { black: Hand; white: Hand };\n    this._blackHand = hands.black;\n    this._whiteHand = hands.white;\n    return true;\n  }\n\n  setColor(color: Color): void {\n    this._color = color;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const sections = sfen.split(\" \");\n    if (sections.length < 5) {\n      return false;\n    }\n    if (sections[0] !== \"sfen\") {\n      return false;\n    }\n    if (!Board.isValidSFEN(sections[1])) {\n      return false;\n    }\n    if (!isValidSFENColor(sections[2])) {\n      return false;\n    }\n    if (!Hand.isValidSFEN(sections[3])) {\n      return false;\n    }\n    return true;\n  }\n\n  static newBySFEN(sfen: string): Position | null {\n    const position = new Position();\n    return position.resetBySFEN(sfen) ? position : null;\n  }\n\n  private isMovable(from: Square, to: Square): boolean {\n    const dx = to.x - from.x;\n    const dy = to.y - from.y;\n    const { direction, distance, ok } = vectorToDirectionAndDistance(dx, dy);\n    if (!ok) {\n      return false;\n    }\n    const piece = this._board.at(from);\n    if (!piece) {\n      return false;\n    }\n    switch (resolveMoveType(piece, direction)) {\n      default:\n        return false;\n      case MoveType.SHORT:\n        return distance === 1;\n      case MoveType.LONG: {\n        const d = directionToDeltaMap[direction];\n        for (\n          let square = from.neighbor(d.x, d.y);\n          square.valid;\n          square = square.neighbor(d.x, d.y)\n        ) {\n          if (square.equals(to)) {\n            return true;\n          }\n          if (this._board.at(square)) {\n            return false;\n          }\n        }\n        return false;\n      }\n    }\n  }\n\n  copyFrom(position: Position): void {\n    this._board.copyFrom(position._board);\n    this._color = position.color;\n    this._blackHand.copyFrom(position._blackHand);\n    this._whiteHand.copyFrom(position._whiteHand);\n  }\n\n  clone(): Position {\n    const position = new Position();\n    position.copyFrom(this);\n    return position;\n  }\n}\n","export function millisecondsToHMMSS(ms: number): string {\n  return secondsToHMMSS(Math.floor(ms / 1e3));\n}\n\nexport function millisecondsToMSS(ms: number): string {\n  return secondsToMSS(Math.floor(ms / 1e3));\n}\n\nexport function secondsToHMMSS(seconds: number): string {\n  const h = Math.floor(seconds / 3600);\n  const m = Math.floor((seconds - h * 3600) / 60);\n  const s = seconds % 60;\n  return (\n    h + \":\" + String(m).padStart(2, \"0\") + \":\" + String(s).padStart(2, \"0\")\n  );\n}\n\nexport function secondsToMSS(seconds: number): string {\n  const m = Math.floor(seconds / 60);\n  const s = seconds % 60;\n  return String(m).padStart(2, \" \") + \":\" + String(s).padStart(2, \"0\");\n}\n","import Position, { DoMoveOption, ImmutablePosition } from \"./position\";\nimport Move from \"./move\";\nimport { Color } from \".\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\nimport { reverseColor } from \"./color\";\n\nexport enum RecordMetadataKey {\n  // \n  BLACK_NAME = \"blackName\", // \n  WHITE_NAME = \"whiteName\", // \n  START_DATETIME = \"startDatetime\", // \n  END_DATETIME = \"endDatetime\", // \n  DATE = \"date\", // \n  TOURNAMENT = \"tournament\", // \n  STRATEGY = \"strategy\", // \n  TITLE = \"title\", // \n  TIME_LIMIT = \"timeLimit\", // \n  TIME_SPENT = \"timeSpent\", // \n  PLACE = \"place\", // \n  POSTED_ON = \"postedOn\", // \n  NOTE = \"note\", // \n  BLACK_SHORT_NAME = \"blackShortName\", // \n  WHITE_SHORT_NAME = \"whiteShortName\", // \n\n  // \n  OPUS_NO = \"opusNo\", // \n  OPUS_NAME = \"opusName\", // \n  AUTHOR = \"author\", // \n  PUBLISHED_ON = \"publishedOn\", // \n  PUBLISHED_AT = \"publishedAt\", // \n  SOURCE = \"source\", // \n  LENGTH = \"length\", // \n  INTEGRITY = \"integrity\", // \n  CATEGORY = \"category\", // \n  AWARD = \"award\", // \n}\n\nexport function getStandardMetadataDisplayName(key: RecordMetadataKey): string {\n  switch (key) {\n    case RecordMetadataKey.BLACK_NAME:\n      return \"\";\n    case RecordMetadataKey.WHITE_NAME:\n      return \"\";\n    case RecordMetadataKey.START_DATETIME:\n      return \"\";\n    case RecordMetadataKey.END_DATETIME:\n      return \"\";\n    case RecordMetadataKey.DATE:\n      return \"\";\n    case RecordMetadataKey.TOURNAMENT:\n      return \"\";\n    case RecordMetadataKey.STRATEGY:\n      return \"\";\n    case RecordMetadataKey.TITLE:\n      return \"\";\n    case RecordMetadataKey.TIME_LIMIT:\n      return \"\";\n    case RecordMetadataKey.TIME_SPENT:\n      return \"\";\n    case RecordMetadataKey.PLACE:\n      return \"\";\n    case RecordMetadataKey.POSTED_ON:\n      return \"\";\n    case RecordMetadataKey.NOTE:\n      return \"\";\n    case RecordMetadataKey.BLACK_SHORT_NAME:\n      return \"\";\n    case RecordMetadataKey.WHITE_SHORT_NAME:\n      return \"\";\n    case RecordMetadataKey.OPUS_NO:\n      return \"\";\n    case RecordMetadataKey.OPUS_NAME:\n      return \"\";\n    case RecordMetadataKey.AUTHOR:\n      return \"\";\n    case RecordMetadataKey.PUBLISHED_ON:\n      return \"\";\n    case RecordMetadataKey.PUBLISHED_AT:\n      return \"\";\n    case RecordMetadataKey.SOURCE:\n      return \"\";\n    case RecordMetadataKey.LENGTH:\n      return \"\";\n    case RecordMetadataKey.INTEGRITY:\n      return \"\";\n    case RecordMetadataKey.CATEGORY:\n      return \"\";\n    case RecordMetadataKey.AWARD:\n      return \"\";\n  }\n}\n\nexport interface ImmutableRecordMetadata {\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey>;\n  getStandardMetadata(key: RecordMetadataKey): string | undefined;\n  get customMetadataKeys(): IterableIterator<string>;\n  getCustomMetadata(key: string): string | undefined;\n}\n\nexport class RecordMetadata {\n  private standard: Map<RecordMetadataKey, string>;\n  private custom: Map<string, string>;\n\n  constructor() {\n    this.standard = new Map<RecordMetadataKey, string>();\n    this.custom = new Map<string, string>();\n  }\n\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey> {\n    return this.standard.keys();\n  }\n\n  getStandardMetadata(key: RecordMetadataKey): string | undefined {\n    return this.standard.get(key);\n  }\n\n  setStandardMetadata(key: RecordMetadataKey, value: string): void {\n    if (value) {\n      this.standard.set(key, value);\n    } else {\n      this.standard.delete(key);\n    }\n  }\n\n  get customMetadataKeys(): IterableIterator<string> {\n    return this.custom.keys();\n  }\n\n  getCustomMetadata(key: string): string | undefined {\n    return this.custom.get(key);\n  }\n\n  setCustomMetadata(key: string, value: string): void {\n    if (value) {\n      this.custom.set(key, value);\n    } else {\n      this.custom.delete(key);\n    }\n  }\n}\n\nexport enum SpecialMove {\n  START = \"start\",\n  INTERRUPT = \"interrupt\",\n  RESIGN = \"resign\",\n  DRAW = \"draw\",\n  REPETITION_DRAW = \"repetitionDraw\",\n  MATE = \"mate\",\n  TIMEOUT = \"timeout\",\n  FOUL_WIN = \"foulWin\", // ()\n  FOUL_LOSE = \"foulLose\", // \n  ENTERING_OF_KING = \"enteringOfKing\",\n  WIN_BY_DEFAULT = \"winByDefault\",\n  LOSS_BY_DEFAULT = \"lossByDefault\",\n}\n\nconst specialMoveToDisplayStringMap = {\n  start: \"\",\n  resign: \"\",\n  interrupt: \"\",\n  draw: \"\",\n  repetitionDraw: \"\",\n  mate: \"\",\n  timeout: \"\",\n  foulWin: \"\",\n  foulLose: \"\",\n  enteringOfKing: \"\",\n  winByDefault: \"\",\n  lossByDefault: \"\",\n};\n\nexport function specialMoveToDisplayString(move: SpecialMove): string {\n  return specialMoveToDisplayStringMap[move];\n}\n\nexport interface RecordEntry {\n  readonly number: number;\n  readonly prev: RecordEntry | null;\n  readonly next: RecordEntry | null;\n  readonly branch: RecordEntry | null;\n  readonly branchIndex: number;\n  readonly activeBranch: boolean;\n  readonly move: Move | SpecialMove;\n  readonly isCheck: boolean;\n  comment: string;\n  customData: string | undefined;\n  readonly displayMoveText: string;\n  readonly displayText: string;\n  readonly hasBranch: boolean;\n  readonly isFirstBranch: boolean;\n  readonly elapsedMs: number;\n  readonly totalElapsedMs: number;\n  setElapsedMs(elapsedMs: number): void;\n}\n\nclass RecordEntryImpl implements RecordEntry {\n  public next: RecordEntryImpl | null;\n  public branch: RecordEntryImpl | null;\n  public comment: string;\n  public customData: string | undefined;\n  public elapsedMs: number;\n  public totalElapsedMs: number;\n\n  constructor(\n    public number: number,\n    public prev: RecordEntryImpl | null,\n    public branchIndex: number,\n    public activeBranch: boolean,\n    public move: Move | SpecialMove,\n    public isCheck: boolean\n  ) {\n    this.next = null;\n    this.branch = null;\n    this.comment = \"\";\n    this.elapsedMs = 0;\n    this.totalElapsedMs = 0;\n  }\n\n  get displayMoveText(): string {\n    const prev =\n      this.prev && this.prev.move instanceof Move ? this.prev.move : null;\n    return this.move instanceof Move\n      ? this.move.getDisplayText(prev)\n      : specialMoveToDisplayString(this.move);\n  }\n\n  get displayText(): string {\n    let ret = this.displayMoveText;\n    if (this.number !== 0) {\n      const elapsed = millisecondsToMSS(this.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(this.totalElapsedMs);\n      ret += ` (${elapsed} / ${totalElapsed})`;\n    }\n    return ret;\n  }\n\n  get hasBranch(): boolean {\n    return !!this.prev && !!this.prev.next && !!this.prev.next.branch;\n  }\n\n  get isFirstBranch(): boolean {\n    return !this.prev || this.prev.next === this;\n  }\n\n  private updateTotalElapsedMs() {\n    this.totalElapsedMs = this.elapsedMs;\n    if (this.prev && this.prev.prev) {\n      this.totalElapsedMs += this.prev.prev.totalElapsedMs;\n    }\n  }\n\n  setElapsedMs(elapsedMs: number): void {\n    this.elapsedMs = elapsedMs;\n    this.updateTotalElapsedMs();\n    let p = this.next;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      p.updateTotalElapsedMs();\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n}\n\nexport interface ImmutableRecord {\n  readonly metadata: ImmutableRecordMetadata;\n  readonly initialPosition: ImmutablePosition;\n  readonly position: ImmutablePosition;\n  readonly first: RecordEntry;\n  readonly current: RecordEntry;\n  readonly moves: Array<RecordEntry>;\n  readonly movesBefore: Array<RecordEntry>;\n  readonly length: number;\n  readonly branchBegin: RecordEntry;\n  readonly repetition: boolean;\n  readonly perpetualCheck: Color | null;\n  readonly usi: string;\n  readonly sfen: string;\n}\n\nexport default class Record {\n  public metadata: RecordMetadata;\n  private _initialPosition: ImmutablePosition;\n  private _position: Position;\n  private _first: RecordEntryImpl;\n  private _current: RecordEntryImpl;\n  private repetitionCounts: { [sfen: string]: number };\n  private repetitionStart: { [sfen: string]: number };\n\n  constructor(position?: ImmutablePosition) {\n    this.metadata = new RecordMetadata();\n    this._initialPosition = position ? position.clone() : new Position();\n    this._position = this.initialPosition.clone();\n    this._first = new RecordEntryImpl(\n      0, // number\n      null, // prev\n      0, // branchIndex\n      true, // activeBranch\n      SpecialMove.START, // move\n      false // isCheck\n    );\n    this._current = this._first;\n    this.repetitionCounts = {};\n    this.repetitionStart = {};\n    this.incrementRepetition();\n  }\n\n  get initialPosition(): ImmutablePosition {\n    return this._initialPosition;\n  }\n\n  get position(): ImmutablePosition {\n    return this._position;\n  }\n\n  get first(): RecordEntry {\n    return this._first;\n  }\n\n  get current(): RecordEntry {\n    return this._current;\n  }\n\n  get moves(): Array<RecordEntry> {\n    const moves = this.movesBefore;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      moves.push(p);\n    }\n    return moves;\n  }\n\n  get movesBefore(): Array<RecordEntry> {\n    return this._movesBefore;\n  }\n\n  private get _movesBefore(): Array<RecordEntryImpl> {\n    const moves = new Array<RecordEntryImpl>();\n    moves.unshift(this._current);\n    for (let p = this._current.prev; p; p = p.prev) {\n      moves.unshift(p);\n    }\n    return moves;\n  }\n\n  get length(): number {\n    let len = this._current.number;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      len = p.number;\n    }\n    return len;\n  }\n\n  get branchBegin(): RecordEntry {\n    return this._current.prev\n      ? (this._current.prev.next as RecordEntry)\n      : this._current;\n  }\n\n  clear(position?: ImmutablePosition): void {\n    this.metadata = new RecordMetadata();\n    if (position) {\n      this._initialPosition = position.clone();\n    }\n    this._position = this.initialPosition.clone();\n    this._first.next = null;\n    this._current = this._first;\n    this.repetitionCounts = {};\n    this.repetitionStart = {};\n    this.incrementRepetition();\n  }\n\n  goBack(): boolean {\n    if (this._current.prev) {\n      if (this._current.move instanceof Move) {\n        this.decrementRepetition();\n        this._position.undoMove(this._current.move);\n      }\n      this._current = this._current.prev;\n      return true;\n    }\n    return false;\n  }\n\n  goForward(): boolean {\n    if (this._current.next) {\n      this._current = this._current.next;\n      while (!this._current.activeBranch) {\n        this._current = this._current.branch as RecordEntryImpl;\n      }\n      if (this._current.move instanceof Move) {\n        this._position.doMove(this._current.move, {\n          ignoreValidation: true,\n        });\n        this.incrementRepetition();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  goto(number: number): void {\n    while (number < this._current.number) {\n      if (!this.goBack()) {\n        break;\n      }\n    }\n    while (number > this._current.number) {\n      if (!this.goForward()) {\n        break;\n      }\n    }\n  }\n\n  resetAllBranchSelection(): void {\n    this._forEach((entry) => {\n      entry.activeBranch = entry.isFirstBranch;\n    });\n  }\n\n  switchBranchByIndex(index: number): boolean {\n    if (!this._current.prev) {\n      return false;\n    }\n    let ok = false;\n    for (let p = this._current.prev.next; p; p = p.branch) {\n      if (p.branchIndex === index) {\n        p.activeBranch = true;\n        if (this._current.move instanceof Move) {\n          this.decrementRepetition();\n          this._position.undoMove(this._current.move);\n        }\n        this._current = p;\n        if (this._current.move instanceof Move) {\n          this._position.doMove(this._current.move, {\n            ignoreValidation: true,\n          });\n          this.incrementRepetition();\n        }\n        ok = true;\n      } else {\n        p.activeBranch = false;\n      }\n    }\n    return ok;\n  }\n\n  append(move: Move | SpecialMove, opt?: DoMoveOption): boolean {\n    let isCheck = false;\n    if (move instanceof Move) {\n      if (!this._position.doMove(move, opt)) {\n        return false;\n      }\n      this.incrementRepetition();\n      isCheck = this.position.checked;\n    }\n    if (this._current !== this.first && !(this._current.move instanceof Move)) {\n      this.goBack();\n    }\n    if (!this._current.next) {\n      this._current.next = new RecordEntryImpl(\n        this._current.number + 1, // number\n        this._current, // prev\n        0, // branchIndex\n        true, // activeBranch\n        move,\n        isCheck\n      );\n      this._current = this._current.next;\n      return true;\n    }\n    let p: RecordEntryImpl | null;\n    for (p = this._current.next; p; p = p.branch) {\n      p.activeBranch = false;\n    }\n    let lastBranch = this._current.next;\n    for (p = this._current.next; p; p = p.branch) {\n      if (\n        (p.move instanceof Move &&\n          move instanceof Move &&\n          move.equals(p.move)) ||\n        move === p.move\n      ) {\n        this._current = p;\n        this._current.activeBranch = true;\n        return true;\n      }\n      lastBranch = p;\n    }\n    this._current = new RecordEntryImpl(\n      this._current.number + 1, // number\n      this._current, // prev\n      lastBranch.branchIndex + 1, // branchIndex\n      true, // activeBranch\n      move,\n      isCheck\n    );\n    lastBranch.branch = this._current;\n    return true;\n  }\n\n  removeAfter(): void {\n    const target = this._current;\n    if (!this.goBack()) {\n      this._current.next = null;\n      return;\n    }\n    if (this._current.next === target) {\n      this._current.next = target.branch;\n    } else {\n      for (let p = this._current.next; p; p = p.branch) {\n        if (p.branch === target) {\n          p.branch = target.branch;\n          break;\n        }\n      }\n    }\n    let branchIndex = 0;\n    for (let p = this._current.next; p; p = p.branch) {\n      p.branchIndex = branchIndex;\n      branchIndex += 1;\n    }\n    if (this._current.next) {\n      this._current.next.activeBranch = true;\n    }\n  }\n\n  private incrementRepetition(): void {\n    const sfen = this.position.sfen;\n    if (this.repetitionCounts[sfen]) {\n      this.repetitionCounts[sfen] += 1;\n    } else {\n      this.repetitionCounts[sfen] = 1;\n      this.repetitionStart[sfen] = this.current.number;\n    }\n  }\n\n  private decrementRepetition(): void {\n    const sfen = this.position.sfen;\n    this.repetitionCounts[sfen] -= 1;\n    if (this.repetitionCounts[sfen] === 0) {\n      delete this.repetitionCounts[sfen];\n      delete this.repetitionStart[sfen];\n    }\n  }\n\n  get repetition(): boolean {\n    return this.repetitionCounts[this.position.sfen] >= 4;\n  }\n\n  get perpetualCheck(): Color | null {\n    if (!this.repetition) {\n      return null;\n    }\n    const sfen = this.position.sfen;\n    const since = this.repetitionStart[sfen];\n    let black = true;\n    let white = true;\n    let color = this.position.color;\n    for (let p = this.current; p.number >= since; p = p.prev as RecordEntry) {\n      color = reverseColor(color);\n      if (p.isCheck) {\n        continue;\n      }\n      if (color === Color.BLACK) {\n        black = false;\n      } else {\n        white = false;\n      }\n    }\n    return black ? Color.BLACK : white ? Color.WHITE : null;\n  }\n\n  get usi(): string {\n    let ret = \"position \" + this.initialPosition.sfen + \" moves\";\n    this._movesBefore.forEach((entry) => {\n      if (entry.move instanceof Move) {\n        ret += \" \" + entry.move.sfen;\n      }\n    });\n    return ret;\n  }\n\n  get sfen(): string {\n    return \"position \" + this.position.getSfen(this._current.number + 1);\n  }\n\n  forEach(handler: (entry: RecordEntry) => void): void {\n    this._forEach(handler);\n  }\n\n  private _forEach(handler: (entry: RecordEntryImpl) => void): void {\n    let p: RecordEntryImpl | null = this._first;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      handler(p);\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n}\n\nexport function getNextColorFromUSI(usi: string): Color {\n  const sections = usi.trim().split(\" \");\n  if (sections[1] === \"startpos\" || sections[3] === \"b\") {\n    return sections.length % 2 === 1 ? Color.BLACK : Color.WHITE;\n  }\n  return sections.length % 2 === 0 ? Color.BLACK : Color.WHITE;\n}\n","// KIF file format (.kif or .kifu)\n// See http://kakinoki.o.oo7.jp/kif_format.html\n\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\nimport {\n  Color,\n  Move,\n  Position,\n  ImmutablePosition,\n  Record,\n  RecordMetadata,\n  RecordMetadataKey,\n  Square,\n} from \".\";\nimport Board, { InitialPositionType } from \"./board\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport { SpecialMove } from \"./record\";\n\nconst metadataKeyMap: { [key: string]: RecordMetadataKey | undefined } = {\n  : RecordMetadataKey.BLACK_NAME,\n  : RecordMetadataKey.WHITE_NAME,\n  : RecordMetadataKey.START_DATETIME,\n  : RecordMetadataKey.END_DATETIME,\n  : RecordMetadataKey.DATE,\n  : RecordMetadataKey.TOURNAMENT,\n  : RecordMetadataKey.STRATEGY,\n  : RecordMetadataKey.TITLE,\n  : RecordMetadataKey.TIME_LIMIT,\n  : RecordMetadataKey.TIME_SPENT,\n  : RecordMetadataKey.PLACE,\n  : RecordMetadataKey.POSTED_ON,\n  : RecordMetadataKey.NOTE,\n  : RecordMetadataKey.BLACK_SHORT_NAME,\n  : RecordMetadataKey.WHITE_SHORT_NAME,\n  : RecordMetadataKey.OPUS_NO,\n  : RecordMetadataKey.OPUS_NAME,\n  : RecordMetadataKey.AUTHOR,\n  : RecordMetadataKey.PUBLISHED_ON,\n  : RecordMetadataKey.PUBLISHED_AT,\n  : RecordMetadataKey.SOURCE,\n  : RecordMetadataKey.LENGTH,\n  : RecordMetadataKey.INTEGRITY,\n  : RecordMetadataKey.CATEGORY,\n  : RecordMetadataKey.AWARD,\n};\n\nconst metadataNameMap = {\n  blackName: \"\",\n  whiteName: \"\",\n  startDatetime: \"\",\n  endDatetime: \"\",\n  date: \"\",\n  tournament: \"\",\n  strategy: \"\",\n  title: \"\",\n  timeLimit: \"\",\n  timeSpent: \"\",\n  place: \"\",\n  postedOn: \"\",\n  note: \"\",\n  blackShortName: \"\",\n  whiteShortName: \"\",\n  opusNo: \"\",\n  opusName: \"\",\n  author: \"\",\n  publishedOn: \"\",\n  publishedAt: \"\",\n  source: \"\",\n  length: \"\",\n  integrity: \"\",\n  category: \"\",\n  award: \"\",\n};\n\nenum LineType {\n  METADATA,\n  HANDICAP,\n  BLACK_HAND,\n  WHITE_HAND,\n  BOARD,\n  BLACK_TURN,\n  WHITE_TURN,\n  MOVE,\n  COMMENT,\n  UNKNOWN,\n}\n\n// & \nconst linePatterns = [\n  {\n    prefix: /^/,\n    type: LineType.HANDICAP,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^/,\n    type: LineType.BLACK_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^/,\n    type: LineType.WHITE_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^\\|/,\n    type: LineType.BOARD,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^/,\n    type: LineType.BLACK_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^/,\n    type: LineType.WHITE_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^ *[0-9]+ +/,\n    type: LineType.MOVE,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^\\*/,\n    type: LineType.COMMENT,\n    removePrefix: true,\n    isPosition: false,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  data: string;\n  isPosition: boolean;\n  metadataKey: string;\n};\n\nfunction parseLine(line: string): Line {\n  let end = line.indexOf(\"#\");\n  if (end === -1) {\n    end = line.length;\n  }\n  for (let i = 0; i < linePatterns.length; i++) {\n    const pattern = linePatterns[i];\n    const matched = line.match(pattern.prefix);\n    if (matched) {\n      const begin = pattern.removePrefix ? matched[0].length : 0;\n      return {\n        type: pattern.type,\n        data: line.substring(begin, end),\n        isPosition: pattern.isPosition,\n        metadataKey: \"\",\n      };\n    }\n  }\n  const metadataPrefix = line.match(/^[^ ]+/);\n  if (metadataPrefix) {\n    const prefix = metadataPrefix[0];\n    return {\n      type: LineType.METADATA,\n      data: line.substring(prefix.length, end),\n      isPosition: false,\n      metadataKey: prefix.substring(0, prefix.length - 1),\n    };\n  }\n  return {\n    type: LineType.UNKNOWN,\n    data: line.substring(0, end),\n    isPosition: false,\n    metadataKey: \"\",\n  };\n}\n\nfunction readHandicap(position: Position, data: string): Error | undefined {\n  switch (data.trim()) {\n    case \"\":\n      position.reset(InitialPositionType.STANDARD);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_LANCE);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_BISHOP);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_ROOK);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_ROOK_LANCE);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_2PIECES);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_4PIECES);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_6PIECES);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.HANDICAP_8PIECES);\n      return;\n    case \"\":\n      position.reset(InitialPositionType.EMPTY);\n      return;\n  }\n  return new Error(\":\" + data);\n}\n\nconst fileStringToNumber: { [file: string]: number } = {\n  \"\": 1,\n  \"\": 2,\n  \"\": 3,\n  \"\": 4,\n  \"\": 5,\n  \"\": 6,\n  \"\": 7,\n  \"\": 8,\n  \"\": 9,\n};\n\nconst rankStringToNumber: { [rank: string]: number } = {\n  : 1,\n  : 2,\n  : 3,\n  : 4,\n  : 5,\n  : 6,\n  : 7,\n  : 8,\n  : 9,\n};\n\nconst kansujiStringToNumber: { [kansuji: string]: number } = {\n  : 1,\n  : 2,\n  : 3,\n  : 4,\n  : 5,\n  : 6,\n  : 7,\n  : 8,\n  : 9,\n  : 10,\n  : 11,\n  : 12,\n  : 13,\n  : 14,\n  : 15,\n  : 16,\n  : 17,\n  : 18,\n};\n\nconst stringToNumber: { [number: string]: number } = {\n  \"1\": 1,\n  \"2\": 2,\n  \"3\": 3,\n  \"4\": 4,\n  \"5\": 5,\n  \"6\": 6,\n  \"7\": 7,\n  \"8\": 8,\n  \"9\": 9,\n};\n\nconst stringToPieceType: { [kanji: string]: PieceType } = {\n  : PieceType.KING,\n  : PieceType.KING,\n  : PieceType.ROOK,\n  : PieceType.DRAGON,\n  : PieceType.DRAGON,\n  : PieceType.BISHOP,\n  : PieceType.HORSE,\n  : PieceType.GOLD,\n  : PieceType.SILVER,\n  : PieceType.PROM_SILVER,\n  : PieceType.PROM_SILVER,\n  : PieceType.KNIGHT,\n  : PieceType.PROM_KNIGHT,\n  : PieceType.PROM_KNIGHT,\n  : PieceType.LANCE,\n  : PieceType.PROM_LANCE,\n  : PieceType.PROM_LANCE,\n  : PieceType.PAWN,\n  : PieceType.PROM_PAWN,\n};\n\nconst stringToSpecialMove: { [move: string]: SpecialMove } = {\n  : SpecialMove.INTERRUPT,\n  : SpecialMove.RESIGN,\n  : SpecialMove.DRAW,\n  : SpecialMove.REPETITION_DRAW,\n  : SpecialMove.MATE,\n  : SpecialMove.TIMEOUT,\n  : SpecialMove.FOUL_WIN,\n  : SpecialMove.FOUL_LOSE,\n  : SpecialMove.ENTERING_OF_KING,\n  : SpecialMove.WIN_BY_DEFAULT,\n  : SpecialMove.LOSS_BY_DEFAULT,\n};\n\nconst moveRegExp =\n  /^ *([0-9]+) +[]?([][]|\\u3000)(|||||||||||||||||)(?)(|\\([1-9][1-9]\\)) *(.*)$/;\n\nconst timeRegExp = /\\( *([0-9]+):([0-9]+)\\/[0-9: ]*\\)/;\n\nconst specialMoveRegExp =\n  /^ *([0-9]+) +(||||||||||) *(.*)$/;\n\nfunction readBoard(board: Board, data: string): Error | undefined {\n  if (data.length < 21) {\n    return new Error(\":\" + data);\n  }\n  const rankStr = data[20];\n  const rank = rankStringToNumber[rankStr];\n  if (!rank) {\n    return new Error(\":\" + data);\n  }\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const square = new Square(file, rank);\n    const index = x * 2 + 1;\n    const pieceStr = data[index + 1];\n    const pieceType = stringToPieceType[pieceStr];\n    if (!pieceType) {\n      board.remove(square);\n      continue;\n    }\n    const color = data[index] !== \"v\" ? Color.BLACK : Color.WHITE;\n    board.set(square, new Piece(color, pieceType));\n  }\n}\n\nfunction readHand(hand: Hand, data: string): Error | undefined {\n  const sections = data.split(/[ ]/);\n  for (const section of sections) {\n    if (!section || section === \"\") {\n      continue;\n    }\n    const pieceStr = section[0];\n    const numberStr = section.substring(1);\n    const pieceType = stringToPieceType[pieceStr];\n    const n = kansujiStringToNumber[numberStr] || 1;\n    if (!pieceType) {\n      return new Error(\": \" + section);\n    }\n    hand.add(pieceType, n);\n  }\n  return;\n}\n\nfunction readMoveTime(record: Record, data: string): void {\n  const timeResult = timeRegExp.exec(data);\n  if (timeResult) {\n    const minutes = timeResult[1];\n    const seconds = timeResult[2];\n    const s = Number.parseInt(minutes) * 60 + Number.parseInt(seconds);\n    record.current.setElapsedMs(s * 1e3);\n  }\n}\n\nfunction readMove(record: Record, data: string): Error | undefined {\n  let result = specialMoveRegExp.exec(data);\n  if (result) {\n    const num = Number(result[1]);\n    const move = stringToSpecialMove[result[2]];\n    const time = result[3];\n    record.goto(num - 1);\n    record.append(move, {\n      ignoreValidation: true,\n    });\n    readMoveTime(record, time);\n    return;\n  }\n\n  result = moveRegExp.exec(data);\n  if (!result) {\n    return new Error(\":\" + data);\n  }\n  const num = Number(result[1]);\n  const toStr = result[2];\n  const pieceTypeStr = result[3];\n  const promStr = result[4];\n  const fromStr = result[5];\n  const time = result[6];\n\n  if (num === 0) {\n    return new Error(\":\" + data);\n  }\n  record.goto(num - 1);\n  let to: Square;\n  let from: Square | PieceType;\n  if (toStr === \"\") {\n    if (!(record.current.move instanceof Move)) {\n      return new Error(\": \" + data);\n    }\n    to = record.current.move.to;\n  } else {\n    const file = fileStringToNumber[toStr[0]];\n    const rank = rankStringToNumber[toStr[1]];\n    to = new Square(file, rank);\n  }\n  if (fromStr === \"\") {\n    from = stringToPieceType[pieceTypeStr];\n  } else {\n    const file = stringToNumber[fromStr[1]];\n    const rank = stringToNumber[fromStr[2]];\n    from = new Square(file, rank);\n  }\n  let move = record.position.createMove(from, to);\n  if (!move) {\n    return new Error(\": \" + data);\n  }\n  if (promStr === \"\") {\n    move = move.withPromote();\n  }\n  record.append(move, {\n    ignoreValidation: true,\n  });\n  readMoveTime(record, time);\n  return;\n}\n\nexport function importKakinoki(data: string): Record | Error {\n  const metadata = new RecordMetadata();\n  const record = new Record();\n  const lines = data.split(/\\r?\\n/);\n  const position = new Position();\n  let inMoveSection = false;\n  for (const line of lines) {\n    if (line === \"\") {\n      continue;\n    }\n    const parsed = parseLine(line);\n    if (inMoveSection && parsed.isPosition) {\n      return new Error(\": \" + line);\n    }\n    let e: Error | undefined;\n    switch (parsed.type) {\n      case LineType.METADATA: {\n        const standardKey = metadataKeyMap[parsed.metadataKey];\n        if (standardKey) {\n          metadata.setStandardMetadata(standardKey, parsed.data);\n        } else {\n          metadata.setCustomMetadata(parsed.metadataKey, parsed.data);\n        }\n        break;\n      }\n      case LineType.HANDICAP:\n        e = readHandicap(position, parsed.data);\n        break;\n      case LineType.BLACK_HAND:\n        e = readHand(position.blackHand, parsed.data);\n        break;\n      case LineType.WHITE_HAND:\n        e = readHand(position.whiteHand, parsed.data);\n        break;\n      case LineType.BOARD:\n        e = readBoard(position.board, parsed.data);\n        break;\n      case LineType.BLACK_TURN:\n        position.setColor(Color.BLACK);\n        break;\n      case LineType.WHITE_TURN:\n        position.setColor(Color.WHITE);\n        break;\n      case LineType.MOVE:\n        if (!inMoveSection) {\n          record.clear(position);\n          inMoveSection = true;\n        }\n        e = readMove(record, parsed.data);\n        break;\n      case LineType.COMMENT:\n        record.current.comment +=\n          (record.current.comment.length !== 0 ? \"\\n\" : \"\") + parsed.data;\n        break;\n      case LineType.UNKNOWN:\n        console.log(\"skip\", line);\n        break;\n    }\n    if (e) {\n      return e;\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  record.metadata = metadata;\n  return record;\n}\n\nconst kanjiNumberStrings = [\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n  \"\",\n];\nconst fileStrings = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\nconst rankStrings = kanjiNumberStrings;\n\nconst pieceTypeToStringForMove = {\n  king: \"\",\n  rook: \"\",\n  dragon: \"\",\n  bishop: \"\",\n  horse: \"\",\n  gold: \"\",\n  silver: \"\",\n  promSilver: \"\",\n  knight: \"\",\n  promKnight: \"\",\n  lance: \"\",\n  promLance: \"\",\n  pawn: \"\",\n  promPawn: \"\",\n};\n\nconst pieceTypeToStringForBoard = {\n  king: \"\",\n  rook: \"\",\n  dragon: \"\",\n  bishop: \"\",\n  horse: \"\",\n  gold: \"\",\n  silver: \"\",\n  promSilver: \"\",\n  knight: \"\",\n  promKnight: \"\",\n  lance: \"\",\n  promLance: \"\",\n  pawn: \"\",\n  promPawn: \"\",\n};\n\nconst specialMoveToString = {\n  start: \"\",\n  resign: \"\",\n  interrupt: \"\",\n  draw: \"\",\n  repetitionDraw: \"\",\n  mate: \"\",\n  timeout: \"\",\n  foulWin: \"\",\n  foulLose: \"\",\n  enteringOfKing: \"\",\n  winByDefault: \"\",\n  lossByDefault: \"\",\n};\n\ntype KakinokiExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: RecordMetadata,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (const key of metadata.standardMetadataKeys) {\n    ret +=\n      metadataNameMap[key] +\n      \"\" +\n      metadata.getStandardMetadata(key) +\n      returnCode;\n  }\n  for (const key of metadata.customMetadataKeys) {\n    ret += key + \"\" + metadata.getCustomMetadata(key) + returnCode;\n  }\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"\" + formatHand(position.whiteHand) + returnCode;\n  ret += \"          \" + returnCode;\n  ret += \"+---------------------------+\" + returnCode;\n  for (let y = 0; y < 9; y++) {\n    ret += \"|\";\n    for (let x = 0; x < 9; x++) {\n      const square = Square.newByXY(x, y);\n      const piece = position.board.at(square);\n      if (!piece) {\n        ret += \" \";\n      } else if (piece.color === Color.BLACK) {\n        ret += \" \" + pieceTypeToStringForBoard[piece.type];\n      } else {\n        ret += \"v\" + pieceTypeToStringForBoard[piece.type];\n      }\n    }\n    ret += \"|\" + rankStrings[y] + returnCode;\n  }\n  ret += \"+---------------------------+\" + returnCode;\n  ret += \"\" + formatHand(position.blackHand) + returnCode;\n  if (position.color === Color.BLACK) {\n    ret += \"\" + returnCode;\n  } else {\n    ret += \"\" + returnCode;\n  }\n  return ret;\n}\n\nfunction formatMove(move: Move): string {\n  let ret = \"\";\n  ret += fileStrings[move.to.file - 1];\n  ret += rankStrings[move.to.rank - 1];\n  ret += pieceTypeToStringForMove[move.pieceType];\n  if (move.promote) {\n    ret += \"\";\n  }\n  if (move.from instanceof Square) {\n    ret += \"(\" + move.from.file + move.from.rank + \")\";\n  } else {\n    ret += \"\";\n  }\n  return ret;\n}\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    if (n >= 1) {\n      ret += pieceTypeToStringForBoard[pieceType];\n      if (n >= 2) {\n        ret += kanjiNumberStrings[n - 1];\n      }\n      ret += \"\";\n    }\n  });\n  return ret;\n}\n\nexport function exportKakinoki(\n  record: Record,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"# KIF Generated by Electron Shogi\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  ret += \"---------------\" + returnCode;\n  record.forEach((entry) => {\n    if (entry.number !== 0) {\n      if (!entry.isFirstBranch) {\n        ret += returnCode;\n        ret += \"\" + entry.number + \"\" + returnCode;\n      }\n      ret += entry.number + \" \";\n      if (entry.move instanceof Move) {\n        ret += formatMove(entry.move);\n      } else {\n        ret += specialMoveToString[entry.move];\n      }\n      const elapsed = millisecondsToMSS(entry.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(entry.totalElapsedMs);\n      ret += ` (${elapsed}/${totalElapsed})`;\n      if (entry.isFirstBranch && entry.hasBranch) {\n        ret += \"+\";\n      }\n      ret += returnCode;\n    }\n    if (entry.comment.length !== 0) {\n      ret +=\n        \"*\" + entry.comment.replaceAll(\"\\n\", returnCode + \"*\") + returnCode;\n    }\n  });\n  return ret;\n}\n","const preloadedImages: { [path: string]: HTMLImageElement } = {};\n\nexport default function preloadImage(path: string): void {\n  if (preloadedImages[path]) {\n    return;\n  }\n  const img = document.createElement(\"img\");\n  img.src = path;\n  preloadedImages[path] = img;\n}\n","import { handPieceTypes, ImmutableHand, PieceType } from \"@/shogi\";\nimport {\n  Color,\n  Move,\n  Piece,\n  ImmutablePosition,\n  reverseColor,\n  Square,\n} from \"@/shogi\";\nimport preloadImage from \"@/assets/preload\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport enum PieceImageType {\n  HITOMOJI = \"hitomoji\",\n  HITOMOJI_GOTHIC = \"hitomojiGothic\",\n}\n\nexport enum BoardImageType {\n  LIGHT = \"light\",\n  WARM = \"warm\",\n  RESIN = \"resin\",\n}\n\ntype PieceImages = {\n  black: {\n    pawn: string;\n    lance: string;\n    knight: string;\n    silver: string;\n    gold: string;\n    bishop: string;\n    rook: string;\n    king: string;\n    king2: string;\n    promPawn: string;\n    promLance: string;\n    promKnight: string;\n    promSilver: string;\n    horse: string;\n    dragon: string;\n  };\n  white: {\n    pawn: string;\n    lance: string;\n    knight: string;\n    silver: string;\n    gold: string;\n    bishop: string;\n    rook: string;\n    king: string;\n    king2: string;\n    promPawn: string;\n    promLance: string;\n    promKnight: string;\n    promSilver: string;\n    horse: string;\n    dragon: string;\n  };\n};\n\nconst layoutTemplate = {\n  frame: {\n    width: 1471,\n    height: 959,\n  },\n  board: {\n    x: 296.5,\n    y: 0,\n    width: 878,\n    height: 960,\n    squreWidth: 94.8,\n    squreHeight: 104,\n    leftSquarePadding: 12,\n    topSquarePadding: 12.2,\n    leftPiecePadding: 17.5,\n    topPiecePadding: 18.5,\n    highlight: {\n      selected: { \"background-color\": \"#0088ff\", opacity: \"0.8\" },\n      lastMoveTo: { \"background-color\": \"#44cc44\", opacity: \"0.8\" },\n      lastMoveFrom: { \"background-color\": \"#44cc44\", opacity: \"0.4\" },\n    },\n  },\n  piece: {\n    width: 88,\n    height: 93,\n  },\n  hand: {\n    color: \"#8b4513\",\n    black: {\n      x: 1184,\n      y: 600,\n    },\n    white: {\n      x: 0,\n      y: 0,\n    },\n    width: 288,\n    height: 360,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n    },\n  },\n  turn: {\n    black: {\n      x: 1184,\n      y: 425,\n    },\n    white: {\n      x: 0,\n      y: 492,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 32,\n  },\n  playerName: {\n    black: {\n      x: 1184,\n      y: 480,\n    },\n    white: {\n      x: 0,\n      y: 370,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 25,\n  },\n  clock: {\n    black: {\n      x: 1184,\n      y: 535,\n    },\n    white: {\n      x: 0,\n      y: 425,\n    },\n    width: 288,\n    height: 55,\n    fontSize: 40,\n  },\n  control: {\n    left: {\n      x: 0,\n      y: 547,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n    right: {\n      x: 1184,\n      y: 0,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n  },\n};\n\nconst pieceImageMap: { [key: string]: PieceImages } = {\n  [PieceImageType.HITOMOJI]: {\n    black: {\n      pawn: \"./piece/hitomoji/black_pawn.png\",\n      lance: \"./piece/hitomoji/black_lance.png\",\n      knight: \"./piece/hitomoji/black_knight.png\",\n      silver: \"./piece/hitomoji/black_silver.png\",\n      gold: \"./piece/hitomoji/black_gold.png\",\n      bishop: \"./piece/hitomoji/black_bishop.png\",\n      rook: \"./piece/hitomoji/black_rook.png\",\n      king: \"./piece/hitomoji/black_king.png\",\n      king2: \"./piece/hitomoji/black_king2.png\",\n      promPawn: \"./piece/hitomoji/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji/black_prom_silver.png\",\n      horse: \"./piece/hitomoji/black_horse.png\",\n      dragon: \"./piece/hitomoji/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji/white_pawn.png\",\n      lance: \"./piece/hitomoji/white_lance.png\",\n      knight: \"./piece/hitomoji/white_knight.png\",\n      silver: \"./piece/hitomoji/white_silver.png\",\n      gold: \"./piece/hitomoji/white_gold.png\",\n      bishop: \"./piece/hitomoji/white_bishop.png\",\n      rook: \"./piece/hitomoji/white_rook.png\",\n      king: \"./piece/hitomoji/white_king.png\",\n      king2: \"./piece/hitomoji/white_king2.png\",\n      promPawn: \"./piece/hitomoji/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji/white_prom_silver.png\",\n      horse: \"./piece/hitomoji/white_horse.png\",\n      dragon: \"./piece/hitomoji/white_dragon.png\",\n    },\n  },\n  [PieceImageType.HITOMOJI_GOTHIC]: {\n    black: {\n      pawn: \"./piece/hitomoji_gothic/black_pawn.png\",\n      lance: \"./piece/hitomoji_gothic/black_lance.png\",\n      knight: \"./piece/hitomoji_gothic/black_knight.png\",\n      silver: \"./piece/hitomoji_gothic/black_silver.png\",\n      gold: \"./piece/hitomoji_gothic/black_gold.png\",\n      bishop: \"./piece/hitomoji_gothic/black_bishop.png\",\n      rook: \"./piece/hitomoji_gothic/black_rook.png\",\n      king: \"./piece/hitomoji_gothic/black_king.png\",\n      king2: \"./piece/hitomoji_gothic/black_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic/black_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic/black_horse.png\",\n      dragon: \"./piece/hitomoji_gothic/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji_gothic/white_pawn.png\",\n      lance: \"./piece/hitomoji_gothic/white_lance.png\",\n      knight: \"./piece/hitomoji_gothic/white_knight.png\",\n      silver: \"./piece/hitomoji_gothic/white_silver.png\",\n      gold: \"./piece/hitomoji_gothic/white_gold.png\",\n      bishop: \"./piece/hitomoji_gothic/white_bishop.png\",\n      rook: \"./piece/hitomoji_gothic/white_rook.png\",\n      king: \"./piece/hitomoji_gothic/white_king.png\",\n      king2: \"./piece/hitomoji_gothic/white_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic/white_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic/white_horse.png\",\n      dragon: \"./piece/hitomoji_gothic/white_dragon.png\",\n    },\n  },\n};\n\nconst boardImageMap = {\n  [BoardImageType.LIGHT]: \"./board/light.png\",\n  [BoardImageType.WARM]: \"./board/warm.png\",\n  [BoardImageType.RESIN]: \"./board/resin.png\",\n};\n\nconst handLaytoutRule = {\n  black: {\n    pawn: { row: 3, column: 0, width: 2 },\n    lance: { row: 2, column: 0, width: 1 },\n    knight: { row: 2, column: 1, width: 1 },\n    silver: { row: 1, column: 0, width: 1 },\n    gold: { row: 1, column: 1, width: 1 },\n    bishop: { row: 0, column: 0, width: 1 },\n    rook: { row: 0, column: 1, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n  white: {\n    pawn: { row: 0, column: 0, width: 2 },\n    lance: { row: 1, column: 1, width: 1 },\n    knight: { row: 1, column: 0, width: 1 },\n    silver: { row: 2, column: 1, width: 1 },\n    gold: { row: 2, column: 0, width: 1 },\n    bishop: { row: 3, column: 1, width: 1 },\n    rook: { row: 3, column: 0, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n};\n\ntype FrameLayout = {\n  style: { [key: string]: string };\n};\n\ntype BoardLayout = {\n  imagePath: string;\n  x: number;\n  y: number;\n  style: { [key: string]: string };\n};\n\ntype PieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype SquareLayout = {\n  id: number;\n  file: number;\n  rank: number;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandPieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype HandPointerLayout = {\n  id: string;\n  type: string;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandLayout = {\n  style: { [key: string]: string };\n  pieces: HandPieceLayout[];\n  pointers: HandPointerLayout[];\n};\n\ntype PromotionLayout = {\n  promoteImagePath: string;\n  notPromoteImagePath: string;\n  style: { [key: string]: string };\n};\n\ntype TurnLayout = {\n  style: { [key: string]: string };\n};\n\ntype PlayerNameLayout = {\n  style: { [key: string]: string };\n};\n\ntype ClockLayout = {\n  style: { [key: string]: string };\n};\n\ntype ControlLayout = {\n  left: {\n    style: { [key: string]: string };\n  };\n  right: {\n    style: { [key: string]: string };\n  };\n};\n\nexport type FullLayout = {\n  frame: FrameLayout;\n  board: BoardLayout;\n  piece: PieceLayout[];\n  square: SquareLayout[];\n  blackHand: HandLayout;\n  whiteHand: HandLayout;\n  promotion: PromotionLayout | null;\n  turn: TurnLayout;\n  blackPlayerName: PlayerNameLayout;\n  whitePlayerName: PlayerNameLayout;\n  blackClock: ClockLayout;\n  whiteClock: ClockLayout;\n  control: ControlLayout;\n};\n\nexport default class LayoutBuilder {\n  private pieceImages: PieceImages;\n  private boardImage: string;\n\n  constructor(pieceImageType: PieceImageType, boardImageType: BoardImageType) {\n    this.pieceImages =\n      pieceImageMap[pieceImageType] || pieceImageMap[PieceImageType.HITOMOJI];\n    this.boardImage = boardImageMap[boardImageType];\n  }\n\n  preload(): void {\n    preloadImage(this.boardImage);\n    Object.values(this.pieceImages.black).forEach(preloadImage);\n    Object.values(this.pieceImages.white).forEach(preloadImage);\n  }\n\n  build(\n    upperSizeLimit: RectSize,\n    position: ImmutablePosition,\n    lastMove: Move | null | undefined,\n    pointer: Square | Piece | null | undefined,\n    reservedMoveForPromotion: Move | null | undefined,\n    flip?: boolean\n  ): FullLayout {\n    let ratio = upperSizeLimit.width / layoutTemplate.frame.width;\n    if (layoutTemplate.frame.height * ratio > upperSizeLimit.height) {\n      ratio = upperSizeLimit.height / layoutTemplate.frame.height;\n    }\n\n    const buildFrameLayout = (): FrameLayout => {\n      return {\n        style: {\n          height: layoutTemplate.frame.height * ratio + \"px\",\n          width: layoutTemplate.frame.width * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildBoardLayout = (): BoardLayout => {\n      const imagePath = this.boardImage;\n      const x = layoutTemplate.board.x * ratio;\n      const y = layoutTemplate.board.y * ratio;\n      const width = layoutTemplate.board.width * ratio;\n      const height = layoutTemplate.board.height * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        height: height + \"px\",\n        width: width + \"px\",\n      };\n      return {\n        imagePath,\n        x,\n        y,\n        style,\n      };\n    };\n\n    const buildPieceLayout = (boardLayout: BoardLayout): PieceLayout[] => {\n      const layouts: PieceLayout[] = [];\n      position.board.listNonEmptySquares().forEach((square) => {\n        const piece = position.board.at(square) as Piece;\n        const id = piece.id + square.index;\n        const displayColor = flip ? reverseColor(piece.color) : piece.color;\n        const pieceType =\n          piece.type == PieceType.KING && piece.color == Color.BLACK\n            ? \"king2\"\n            : piece.type;\n        const imagePath = this.pieceImages[displayColor][pieceType];\n        const x =\n          boardLayout.x +\n          (layoutTemplate.board.leftPiecePadding +\n            layoutTemplate.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (layoutTemplate.board.topPiecePadding +\n            layoutTemplate.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = layoutTemplate.piece.width * ratio;\n        const height = layoutTemplate.piece.height * ratio;\n        layouts.push({\n          id,\n          imagePath,\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            width: width + \"px\",\n            height: height + \"px\",\n          },\n        });\n      });\n      return layouts;\n    };\n\n    const buildSquareLayout = (boardLayout: BoardLayout): SquareLayout[] => {\n      const layouts: SquareLayout[] = [];\n      Square.all.forEach((square) => {\n        const id = square.index;\n        const { file } = square;\n        const { rank } = square;\n        const x =\n          boardLayout.x +\n          (layoutTemplate.board.leftSquarePadding +\n            layoutTemplate.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (layoutTemplate.board.topSquarePadding +\n            layoutTemplate.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = layoutTemplate.board.squreWidth * ratio;\n        const height = layoutTemplate.board.squreHeight * ratio;\n        const style = {\n          left: x + \"px\",\n          top: y + \"px\",\n          width: width + \"px\",\n          height: height + \"px\",\n        };\n        let backgroundStyle = style;\n        if (lastMove && square.equals(lastMove.to)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.lastMoveTo,\n          };\n        }\n        if (\n          lastMove &&\n          lastMove.from instanceof Square &&\n          square.equals(lastMove.from)\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.lastMoveFrom,\n          };\n        }\n        if (pointer instanceof Square && pointer.equals(square)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.selected,\n          };\n        }\n        layouts.push({\n          id,\n          file,\n          rank,\n          style,\n          backgroundStyle,\n        });\n      });\n      return layouts;\n    };\n\n    const buildHandLayout = (color: Color, hand: ImmutableHand): HandLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      const standX = layoutTemplate.hand[displayColor].x * ratio;\n      const standY = layoutTemplate.hand[displayColor].y * ratio;\n      const standWidth = layoutTemplate.hand.width * ratio;\n      const standHeight = layoutTemplate.hand.height * ratio;\n      const standStyle = {\n        \"background-color\": layoutTemplate.hand.color,\n        left: standX + \"px\",\n        top: standY + \"px\",\n        width: standWidth + \"px\",\n        height: standHeight + \"px\",\n      };\n      const pieces: HandPieceLayout[] = [];\n      const pointers: HandPointerLayout[] = [];\n      handPieceTypes.forEach((type) => {\n        const count = hand.count(type);\n        const rule = handLaytoutRule[displayColor][type];\n        const areaWidth = (layoutTemplate.hand.width / 2) * rule.width * ratio;\n        const areaHeight = (layoutTemplate.hand.height / 4) * ratio;\n        const areaX = areaWidth * rule.column;\n        const areaY = areaHeight * rule.row;\n        const pieceWidth = layoutTemplate.piece.width * ratio;\n        const pieceHeight = layoutTemplate.piece.height * ratio;\n        const padding =\n          Math.max(areaWidth - pieceWidth * count, 0) / (count * 2);\n        const dx =\n          (areaWidth - pieceWidth - padding * 2) / Math.max(count - 1, 1);\n        for (let i = count - 1; i >= 0; i -= 1) {\n          const id = type + i;\n          const imagePath = this.pieceImages[displayColor][type];\n          const x = areaX + padding + dx * i;\n          const y = areaY;\n          pieces.push({\n            id,\n            imagePath,\n            style: {\n              left: x + \"px\",\n              top: y + \"px\",\n              width: pieceWidth + \"px\",\n              height: pieceHeight + \"px\",\n            },\n          });\n        }\n        const id = type;\n        const style = {\n          left: areaX + \"px\",\n          top: areaY + \"px\",\n          width: areaWidth + \"px\",\n          height: areaHeight + \"px\",\n        };\n        let backgroundStyle = style;\n        if (\n          pointer &&\n          pointer instanceof Piece &&\n          pointer.color === color &&\n          pointer.type === type\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.hand.highlight.selected,\n          };\n        }\n        pointers.push({\n          id,\n          type,\n          style,\n          backgroundStyle,\n        });\n      });\n      return {\n        style: standStyle,\n        pieces,\n        pointers,\n      };\n    };\n\n    const buildPromotionLayout = (\n      boardLayout: BoardLayout,\n      move: Move | null | undefined\n    ): PromotionLayout | null => {\n      if (!move) {\n        return null;\n      }\n      const color = flip ? reverseColor(move.color) : move.color;\n      const square = flip ? move.to.opposite : move.to;\n      const piece = new Piece(color, move.pieceType);\n      const promoted = piece.promoted();\n      const notPromoted = piece.unpromoted();\n      const promoteImagePath = this.pieceImages[color][promoted.type];\n      const notPromoteImagePath = this.pieceImages[color][notPromoted.type];\n      const x =\n        boardLayout.x +\n        (layoutTemplate.board.leftSquarePadding +\n          layoutTemplate.board.squreWidth * (square.x - 0.5)) *\n          ratio;\n      const y =\n        boardLayout.y +\n        (layoutTemplate.board.topSquarePadding +\n          layoutTemplate.board.squreHeight * square.y) *\n          ratio;\n      const width = layoutTemplate.board.squreWidth * 2 * ratio;\n      const height = layoutTemplate.board.squreHeight * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        width: width + \"px\",\n        height: height + \"px\",\n        \"font-size\": height / 4 + \"px\",\n      };\n      return {\n        promoteImagePath,\n        notPromoteImagePath,\n        style,\n      };\n    };\n\n    const buildTurnLayout = (): TurnLayout => {\n      const color = position.color;\n      const displayColor = flip ? reverseColor(color) : color;\n      const borderWidth = 2;\n      return {\n        style: {\n          left:\n            layoutTemplate.turn[displayColor].x * ratio - borderWidth + \"px\",\n          top: layoutTemplate.turn[displayColor].y * ratio - borderWidth + \"px\",\n          width: layoutTemplate.turn.width * ratio - borderWidth + \"px\",\n          height: layoutTemplate.turn.height * ratio - borderWidth + \"px\",\n          \"font-size\": layoutTemplate.turn.fontSize * ratio + \"px\",\n          \"border-radius\": layoutTemplate.turn.height * ratio * 0.4 + \"px\",\n          \"border-width\": borderWidth + \"px\",\n          \"border-style\": \"solid\",\n        },\n      };\n    };\n\n    const buildPlayerNameLayout = (color: Color): PlayerNameLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: layoutTemplate.playerName[displayColor].x * ratio + \"px\",\n          top: layoutTemplate.playerName[displayColor].y * ratio + \"px\",\n          width: layoutTemplate.playerName.width * ratio + \"px\",\n          height: layoutTemplate.playerName.height * ratio + \"px\",\n          \"font-size\": layoutTemplate.playerName.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildClockLayout = (color: Color): ClockLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: layoutTemplate.clock[displayColor].x * ratio + \"px\",\n          top: layoutTemplate.clock[displayColor].y * ratio + \"px\",\n          width: layoutTemplate.clock.width * ratio + \"px\",\n          height: layoutTemplate.clock.height * ratio + \"px\",\n          \"font-size\": layoutTemplate.clock.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildControlLayout = (): ControlLayout => {\n      return {\n        left: {\n          style: {\n            left: layoutTemplate.control.left.x * ratio + \"px\",\n            top: layoutTemplate.control.left.y * ratio + \"px\",\n            width: layoutTemplate.control.left.width * ratio + \"px\",\n            height: layoutTemplate.control.left.height * ratio + \"px\",\n            \"font-size\": layoutTemplate.control.left.fontSize * ratio + \"px\",\n          },\n        },\n        right: {\n          style: {\n            left: layoutTemplate.control.right.x * ratio + \"px\",\n            top: layoutTemplate.control.right.y * ratio + \"px\",\n            width: layoutTemplate.control.right.width * ratio + \"px\",\n            height: layoutTemplate.control.right.height * ratio + \"px\",\n            \"font-size\": layoutTemplate.control.right.fontSize * ratio + \"px\",\n          },\n        },\n      };\n    };\n\n    const frameLayout = buildFrameLayout();\n    const boardLayout = buildBoardLayout();\n    const pieceLayout = buildPieceLayout(boardLayout);\n    const squareLayout = buildSquareLayout(boardLayout);\n    const blackHandLayout = buildHandLayout(\n      Color.BLACK,\n      position.hand(Color.BLACK)\n    );\n    const whiteHandLayout = buildHandLayout(\n      Color.WHITE,\n      position.hand(Color.WHITE)\n    );\n    const promotionLayout = buildPromotionLayout(\n      boardLayout,\n      reservedMoveForPromotion\n    );\n    const turnLayout = buildTurnLayout();\n    const blackPlayerNameLayout = buildPlayerNameLayout(Color.BLACK);\n    const whitePlayerNameLayout = buildPlayerNameLayout(Color.WHITE);\n    const blackClockLayout = buildClockLayout(Color.BLACK);\n    const whiteClockLayout = buildClockLayout(Color.WHITE);\n    const controlLayout = buildControlLayout();\n    return {\n      frame: frameLayout,\n      board: boardLayout,\n      piece: pieceLayout,\n      square: squareLayout,\n      blackHand: blackHandLayout,\n      whiteHand: whiteHandLayout,\n      promotion: promotionLayout,\n      turn: turnLayout,\n      blackPlayerName: blackPlayerNameLayout,\n      whitePlayerName: whitePlayerNameLayout,\n      blackClock: blackClockLayout,\n      whiteClock: whiteClockLayout,\n      control: controlLayout,\n    };\n  }\n}\n","export class RectSize {\n  constructor(public width: number, public height: number) {}\n  add(size: RectSize): RectSize {\n    return new RectSize(this.width + size.width, this.height + size.height);\n  }\n  reduce(size: RectSize): RectSize {\n    return new RectSize(this.width - size.width, this.height - size.height);\n  }\n}\n","\nimport { PieceType } from \"@/shogi\";\nimport { computed, reactive, watch, defineComponent, PropType } from \"vue\";\nimport LayoutBuilder, {\n  BoardImageType,\n  PieceImageType,\n} from \"@/components/primitive/BoardLayout\";\nimport { Square, Piece, Color, Move, ImmutablePosition } from \"@/shogi\";\nimport { RectSize } from \"./Types\";\nimport { secondsToHMMSS } from \"@/helpers/time\";\n\ntype State = {\n  pointer: Square | Piece | null;\n  reservedMove: Move | null;\n};\n\nexport default defineComponent({\n  name: \"BoardView\",\n  props: {\n    pieceImageType: {\n      type: String as PropType<PieceImageType>,\n      required: true,\n    },\n    boardImageType: {\n      type: String as PropType<BoardImageType>,\n      required: true,\n    },\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n    position: {\n      type: Object as PropType<ImmutablePosition>,\n      required: true,\n    },\n    lastMove: {\n      type: Move,\n      required: false,\n      default: null,\n    },\n    flip: {\n      type: Boolean,\n      required: false,\n    },\n    allowEdit: {\n      type: Boolean,\n      required: false,\n    },\n    allowMove: {\n      type: Boolean,\n      required: false,\n    },\n    blackPlayerName: {\n      type: String,\n      required: false,\n      default: \"\",\n    },\n    whitePlayerName: {\n      type: String,\n      required: false,\n      default: \"\",\n    },\n    blackPlayerTimeMs: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    blackPlayerByoyomi: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    whitePlayerTimeMs: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    whitePlayerByoyomi: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n  },\n  emits: [\"move\", \"edit\"],\n  setup(props, context) {\n    const state = reactive({\n      pointer: null,\n      reservedMove: null,\n    } as State);\n\n    const resetState = () => {\n      state.pointer = null;\n      state.reservedMove = null;\n    };\n\n    watch(\n      [() => props.position, () => props.allowEdit, () => props.allowMove],\n      () => {\n        resetState();\n      }\n    );\n\n    const clickFrame = () => {\n      resetState();\n    };\n\n    const updatePointer = (\n      newPointer: Square | Piece,\n      empty: boolean,\n      color: Color | undefined\n    ) => {\n      const prevPointer = state.pointer;\n      resetState();\n      if (\n        newPointer instanceof Square &&\n        prevPointer instanceof Square &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (\n        newPointer instanceof Piece &&\n        prevPointer instanceof Piece &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (prevPointer) {\n        const editFrom = prevPointer;\n        const editTo =\n          newPointer instanceof Square ? newPointer : newPointer.color;\n        if (\n          props.allowEdit &&\n          props.position.isValidEditing(editFrom, editTo)\n        ) {\n          context.emit(\"edit\", {\n            move: {\n              from: prevPointer,\n              to: editTo,\n            },\n          });\n          return;\n        }\n        if (props.allowMove && newPointer instanceof Square) {\n          const moveFrom =\n            prevPointer instanceof Square ? prevPointer : prevPointer.type;\n          const moveTo = newPointer;\n          const move = props.position.createMove(moveFrom, moveTo);\n          if (!move) {\n            return;\n          }\n          const noProm = props.position.isValidMove(move);\n          const prom = props.position.isValidMove(move.withPromote());\n          if (noProm && prom) {\n            state.reservedMove = move;\n            return;\n          }\n          if (noProm) {\n            context.emit(\"move\", move);\n            return;\n          }\n          if (prom) {\n            context.emit(\"move\", move.withPromote());\n            return;\n          }\n        }\n      }\n      if ((!props.allowMove && !props.allowEdit) || empty) {\n        return;\n      }\n      if (!props.allowEdit && color !== props.position.color) {\n        return;\n      }\n      state.pointer = newPointer;\n    };\n\n    const clickSquare = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const square = new Square(file, rank);\n      const piece = props.position.board.at(square);\n      const empty = !piece;\n      updatePointer(square, empty, piece?.color);\n    };\n\n    const clickHand = (event: Event, color: Color, type: PieceType) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const empty = props.position.hand(color).count(type) === 0;\n      updatePointer(new Piece(color, type), empty, color);\n    };\n\n    const clickSquareR = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      resetState();\n      const square = new Square(file, rank);\n      if (props.allowEdit && props.position.board.at(square)) {\n        context.emit(\"edit\", { rotate: square });\n      }\n    };\n\n    const clickPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move.withPromote())) {\n        context.emit(\"move\", move.withPromote());\n      }\n    };\n\n    const clickNotPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move)) {\n        context.emit(\"move\", move);\n      }\n    };\n\n    const layoutBuilder = computed(() => {\n      const builder = new LayoutBuilder(\n        props.pieceImageType,\n        props.boardImageType\n      );\n      builder.preload();\n      return builder;\n    });\n\n    const layout = computed(() =>\n      layoutBuilder.value.build(\n        props.maxSize.reduce(new RectSize(20, 20)),\n        props.position,\n        props.lastMove,\n        state.pointer,\n        state.reservedMove,\n        props.flip\n      )\n    );\n\n    const formatTime = (timeMs?: number, byoyomi?: number): string => {\n      if (timeMs) {\n        return secondsToHMMSS(Math.ceil(timeMs / 1e3));\n      } else if (byoyomi !== undefined) {\n        return \"\" + byoyomi;\n      }\n      return \"0:00:00\";\n    };\n\n    const timeSeverity = (timeMs?: number, byoyomi?: number) => {\n      if (!timeMs && !byoyomi) {\n        return \"normal\";\n      }\n      const rem = (timeMs || 0) / 1e3 + (byoyomi || 0);\n      if (rem <= 5) {\n        return \"danger\";\n      } else if (rem <= 10) {\n        return \"warning\";\n      }\n      return \"normal\";\n    };\n\n    const blackPlayerTimeText = computed(() => {\n      return formatTime(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const blackPlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const whitePlayerTimeText = computed(() => {\n      return formatTime(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    const whitePlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    return {\n      clickFrame,\n      clickSquare,\n      clickHand,\n      clickSquareR,\n      clickPromote,\n      clickNotPromote,\n      layout,\n      blackPlayerTimeText,\n      blackPlayerTimeSeverity,\n      whitePlayerTimeText,\n      whitePlayerTimeSeverity,\n    };\n  },\n});\n","import { render } from \"./BoardView.vue?vue&type=template&id=46c90ba8&scoped=true&ts=true\"\nimport script from \"./BoardView.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardView.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardView.vue?vue&type=style&index=0&id=46c90ba8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-46c90ba8\"]])\n\nexport default __exports__","export const ES_HUMAN = \"es://human\";\nexport const ES_USI_ENGINE = \"es://usi-engine/\";\n\nexport function isUSIEngine(uri: string): boolean {\n  return uri.startsWith(ES_USI_ENGINE);\n}\n\nexport function issueEngineURI(): string {\n  const now = Date.now();\n  const rand = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16);\n  return ES_USI_ENGINE + `${now}/${rand}`;\n}\n","import { issueEngineURI } from \"@/uri\";\n\nexport type USIEngineOptionType =\n  | \"check\"\n  | \"spin\"\n  | \"combo\"\n  | \"button\"\n  | \"string\"\n  | \"filename\";\n\nexport type USIEngineOption = {\n  name: string;\n  type: USIEngineOptionType;\n  default?: string | number;\n  min?: number;\n  max?: number;\n  vars: string[];\n  value?: string | number;\n};\n\nexport function getUSIEngineOptionCurrentValue(\n  option: USIEngineOption\n): string | number | undefined {\n  if (option.value !== undefined) {\n    return option.value;\n  }\n  if (option.default !== undefined) {\n    if (option.type === \"string\" && option.default === \"<empty>\") {\n      return \"\";\n    }\n    return option.default;\n  }\n  return;\n}\n\nexport type USIEngineOptions = { [name: string]: USIEngineOption };\n\nexport type USIEngineSetting = {\n  uri: string;\n  name: string;\n  defaultName: string;\n  author: string;\n  path: string;\n  options: { [name: string]: USIEngineOption };\n};\n\nexport function duplicateEngineSetting(\n  src: USIEngineSetting\n): USIEngineSetting {\n  const engine: USIEngineSetting = JSON.parse(JSON.stringify(src));\n  engine.uri = issueEngineURI();\n  engine.name += \" \";\n  return engine;\n}\n\nexport function mergeUSIEngineSetting(\n  engine: USIEngineSetting,\n  local: USIEngineSetting\n): void {\n  engine.uri = local.uri;\n  engine.name = local.name;\n  Object.keys(local.options).forEach((name) => {\n    if (!engine.options[name]) {\n      return;\n    }\n    engine.options[name].value = local.options[name].value;\n  });\n}\n\nexport class USIEngineSettings {\n  private engines: { [uri: string]: USIEngineSetting };\n\n  constructor(json?: string) {\n    this.engines = {};\n    if (json) {\n      const src = JSON.parse(json);\n      if (src.engines instanceof Object) {\n        this.engines = src.engines;\n      }\n    }\n  }\n\n  hasEngine(uri: string): boolean {\n    return !!this.engines[uri];\n  }\n\n  addEngine(engine: USIEngineSetting): void {\n    this.engines[engine.uri] = engine;\n  }\n\n  updateEngine(engine: USIEngineSetting): boolean {\n    if (!this.engines[engine.uri]) {\n      return false;\n    }\n    this.engines[engine.uri] = engine;\n    return true;\n  }\n\n  removeEngine(uri: string): boolean {\n    if (!this.engines[uri]) {\n      return false;\n    }\n    delete this.engines[uri];\n    return true;\n  }\n\n  getEngine(uri: string): USIEngineSetting {\n    return this.engines[uri];\n  }\n\n  get engineList(): USIEngineSetting[] {\n    return Object.values(this.engines).sort((a, b): number => {\n      if (a.name !== b.name) {\n        return a.name > b.name ? 1 : -1;\n      }\n      if (a.defaultName !== b.defaultName) {\n        return a.defaultName > b.defaultName ? 1 : -1;\n      }\n      return a.uri > b.uri ? 1 : -1;\n    });\n  }\n\n  get json(): string {\n    return JSON.stringify(this);\n  }\n\n  get jsonWithIndent(): string {\n    return JSON.stringify(this, undefined, 2);\n  }\n}\n","export enum MenuEvent {\n  NEW_RECORD = \"newRecord\",\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  SAVE_RECORD_AS = \"saveRecordAs\",\n  COPY_RECORD = \"copyRecord\",\n  PASTE_RECORD = \"pasteRecord\",\n  INSERT_INTERRUPT = \"insertInterrupt\",\n  INSERT_RESIGN = \"insertResign\",\n  INSERT_DRAW = \"insertDraw\",\n  INSERT_REPETITION_DRAW = \"insertRepetitionDraw\",\n  INSERT_MATE = \"insertMate\",\n  INSERT_TIMEOUT = \"insertTimeout\",\n  INSERT_FOUL_WIN = \"insertFoulWin\",\n  INSERT_FOUL_LOSE = \"insertFoulLose\",\n  INSERT_ENTERING_OF_KING = \"insertEnteringOfKing\",\n  INSERT_WIN_BY_DEFAULT = \"insertWinByDefault\",\n  INSERT_LOSS_BY_DEFAULT = \"insertLossByDefault\",\n  REMOVE_RECORD_AFTER = \"remvoeRecordAfter\",\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n  CHANGE_TURN = \"changeTurn\",\n  INIT_POSITION_STANDARD = \"initPositionStandard\",\n  INIT_POSITION_HANDICAP_LANCE = \"initPositionHandicapLance\",\n  INIT_POSITION_HANDICAP_RIGHT_LANCE = \"initPositionHandicapRightLance\",\n  INIT_POSITION_HANDICAP_BISHOP = \"initPositionHandicapBishop\",\n  INIT_POSITION_HANDICAP_ROOK = \"initPositionHandicapRook\",\n  INIT_POSITION_HANDICAP_ROOK_LANCE = \"initPositionHandicapRookLance\",\n  INIT_POSITION_HANDICAP_2PIECES = \"initPositionHandicap2Pieces\",\n  INIT_POSITION_HANDICAP_4PIECES = \"initPositionHandicap4Pieces\",\n  INIT_POSITION_HANDICAP_6PIECES = \"initPositionHandicap6Pieces\",\n  INIT_POSITION_HANDICAP_8PIECES = \"initPositionHandicap8Pieces\",\n  INIT_POSITION_TSUME_SHOGI = \"initPositionTsumeShogi\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN = \"resign\",\n  FLIP_BOARD = \"flipBoard\",\n  APP_SETTING_DIALOG = \"appSetting\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSetting\",\n}\n","import {\n  PieceImageType,\n  BoardImageType,\n} from \"@/components/primitive/BoardLayout\";\n\nexport enum Tab {\n  RECORD_INFO = \"recordInfo\",\n  COMMENT = \"comment\",\n  SEARCH = \"search\",\n  CHART = \"chart\",\n  INVISIBLE = \"invisible\",\n}\n\nexport enum ClockSoundTarget {\n  ALL = \"all\",\n  ONLY_USER = \"onlyUser\",\n}\n\nexport type AppSetting = {\n  pieceImage: PieceImageType;\n  boardImage: BoardImageType;\n  pieceVolume: number;\n  clockVolume: number;\n  clockPitch: number;\n  clockSoundTarget: ClockSoundTarget;\n  boardFlipping: boolean;\n  tab: Tab;\n  returnCode: string;\n};\n\nexport type AppSettingUpdate = {\n  pieceImage?: PieceImageType;\n  boardImage?: BoardImageType;\n  pieceVolume?: number;\n  clockVolume?: number;\n  clockPitch?: number;\n  clockSoundTarget?: ClockSoundTarget;\n  boardFlipping?: boolean;\n  tab?: Tab;\n  returnCode?: string;\n};\n\nexport function defaultAppSetting(returnCode?: string): AppSetting {\n  return {\n    pieceImage: PieceImageType.HITOMOJI,\n    boardImage: BoardImageType.LIGHT,\n    pieceVolume: 30,\n    clockVolume: 30,\n    clockPitch: 500,\n    clockSoundTarget: ClockSoundTarget.ONLY_USER,\n    boardFlipping: false,\n    tab: Tab.RECORD_INFO,\n    returnCode: returnCode || \"\\r\\n\",\n  };\n}\n","import { defaultAppSetting } from \"@/settings/app\";\nimport { defaultGameSetting } from \"@/settings/game\";\nimport { defaultResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { API } from \"./renderer\";\n\nenum STORAGE_KEY {\n  APP_SETTING = \"appSetting\",\n  RESEARCH_SETTING = \"researchSetting\",\n  GAME_SETTING = \"gameSetting\",\n}\n\n// Electron  Web \nexport const webAPI: API = {\n  async getRecordPathFromProcArg(): Promise<string> {\n    return \"\";\n  },\n  updateMenuState(): void {\n    // DO NOTHING\n  },\n  async showOpenRecordDialog(): Promise<string> {\n    throw \"Web\";\n  },\n  async openRecord(): Promise<Buffer> {\n    throw \"Web\";\n  },\n  async showSaveRecordDialog(): Promise<string> {\n    throw \"Web\";\n  },\n  async saveRecord(): Promise<void> {\n    throw \"Web\";\n  },\n  async showSelectFileDialog(): Promise<string> {\n    throw \"Web\";\n  },\n  async loadAppSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.APP_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAppSetting());\n    }\n    return JSON.stringify({\n      ...defaultAppSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAppSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.APP_SETTING, json);\n  },\n  async loadResearchSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.RESEARCH_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultResearchSetting());\n    }\n    return JSON.stringify({\n      ...defaultResearchSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveResearchSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.RESEARCH_SETTING, json);\n  },\n  async loadGameSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.GAME_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultGameSetting());\n    }\n    return JSON.stringify({\n      ...defaultGameSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveGameSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.GAME_SETTING, json);\n  },\n  async loadUSIEngineSetting(): Promise<string> {\n    return new USIEngineSettings().json;\n  },\n  async saveUSIEngineSetting(): Promise<void> {\n    // Do Nothing\n  },\n  async showSelectUSIEngineDialog(): Promise<string> {\n    throw \"Web\";\n  },\n  async getUSIEngineInfo(): Promise<string> {\n    throw \"Web\";\n  },\n  async startResearch(): Promise<void> {\n    throw \"Web\";\n  },\n  async endResearch(): Promise<void> {\n    throw \"Web\";\n  },\n  async startGame(): Promise<void> {\n    // Do Nothing\n  },\n  async endGame(): Promise<void> {\n    // Do Nothing\n  },\n  async updateUSIPosition(): Promise<void> {\n    // Do Nothing\n  },\n  async stopUSI(): Promise<void> {\n    // Do Nothing\n  },\n  async sendUSISetOption(): Promise<void> {\n    // Do Nothing\n  },\n  onSendError(): void {\n    // Do Nothing\n  },\n  onMenuEvent(): void {\n    // Do Nothing\n  },\n  onUSIBestMove(): void {\n    // Do Nothing\n  },\n  onUSIInfo(): void {\n    // Do Nothing\n  },\n};\n","import { InitialPositionType } from \"@/shogi\";\nimport { USIEngineSetting } from \"./usi\";\nimport * as uri from \"@/uri\";\n\nexport type PlayerSetting = {\n  name: string;\n  uri: string;\n  usi?: USIEngineSetting;\n};\n\nexport type TimeLimitSetting = {\n  timeSeconds: number;\n  byoyomi: number;\n  increment: number;\n};\n\nexport type GameSetting = {\n  black: PlayerSetting;\n  white: PlayerSetting;\n  timeLimit: TimeLimitSetting;\n  startPosition?: InitialPositionType;\n  enableEngineTimeout: boolean;\n  humanIsFront: boolean;\n};\n\nexport function defaultGameSetting(): GameSetting {\n  return {\n    black: {\n      name: \"\",\n      uri: uri.ES_HUMAN,\n    },\n    white: {\n      name: \"\",\n      uri: uri.ES_HUMAN,\n    },\n    timeLimit: {\n      timeSeconds: 0,\n      byoyomi: 30,\n      increment: 0,\n    },\n    enableEngineTimeout: false,\n    humanIsFront: true,\n  };\n}\n\nexport function validateGameSetting(\n  gameSetting: GameSetting\n): Error | undefined {\n  if (\n    gameSetting.timeLimit.timeSeconds === 0 &&\n    gameSetting.timeLimit.byoyomi === 0\n  ) {\n    return new Error(\"0\");\n  }\n  if (\n    gameSetting.timeLimit.byoyomi !== 0 &&\n    gameSetting.timeLimit.increment !== 0\n  ) {\n    return new Error(\"\");\n  }\n  return;\n}\n","import { USIEngineSetting } from \"./usi\";\n\nexport type ResearchSetting = {\n  usi?: USIEngineSetting;\n};\n\nexport function defaultResearchSetting(): ResearchSetting {\n  return {};\n}\n","import { Color } from \"@/shogi\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { watch } from \"vue\";\nimport { GameSetting } from \"@/settings/game\";\nimport { AppSetting } from \"@/settings/app\";\nimport { MenuEvent } from \"@/menu/event\";\nimport { SpecialMove, InitialPositionType } from \"@/shogi\";\nimport { USIInfoSender } from \"@/usi/info\";\nimport { webAPI } from \"./web\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { Mode } from \"@/store/mode\";\nimport { useStore } from \"@/store\";\n\nexport interface API {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(mode: Mode, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Buffer>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Buffer): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  loadAppSetting(): Promise<string>;\n  saveAppSetting(setting: string): Promise<void>;\n  loadResearchSetting(): Promise<string>;\n  saveResearchSetting(setting: string): Promise<void>;\n  loadGameSetting(): Promise<string>;\n  saveGameSetting(setting: string): Promise<void>;\n  loadUSIEngineSetting(): Promise<string>;\n  saveUSIEngineSetting(setting: string): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<string>;\n  startResearch(json: string, sessionID: number): Promise<void>;\n  endResearch(): Promise<void>;\n  startGame(json: string, sessionID: number): Promise<void>;\n  endGame(usi: string, specialMove?: SpecialMove): Promise<void>;\n  updateUSIPosition(\n    usi: string,\n    gameSetting: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  stopUSI(color: Color): Promise<void>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  onSendError(callback: (e: Error) => void): void;\n  onMenuEvent(callback: (event: MenuEvent) => void): void;\n  onUSIBestMove(\n    callback: (\n      sessionID: number,\n      usi: string,\n      color: Color,\n      sfen: string\n    ) => void\n  ): void;\n  onUSIInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => void\n  ): void;\n}\n\ninterface ExtendedWindow extends Window {\n  electronShogiAPI: API;\n}\n\nfunction getWindowObject(): ExtendedWindow {\n  return window as unknown as ExtendedWindow;\n}\n\nexport function isNative(): boolean {\n  return !!getWindowObject().electronShogiAPI;\n}\n\nfunction getAPI(): API {\n  return getWindowObject().electronShogiAPI || webAPI;\n}\n\nexport async function getRecordPathFromProcArg(): Promise<string> {\n  return await getAPI().getRecordPathFromProcArg();\n}\n\nexport async function showOpenRecordDialog(): Promise<string> {\n  return await getAPI().showOpenRecordDialog();\n}\n\nexport async function openRecord(path: string): Promise<Buffer> {\n  return await getAPI().openRecord(path);\n}\n\nexport async function showSaveRecordDialog(\n  defaultPath: string\n): Promise<string> {\n  return await getAPI().showSaveRecordDialog(defaultPath);\n}\n\nexport async function saveRecord(path: string, data: Buffer): Promise<void> {\n  await getAPI().saveRecord(path, data);\n}\n\nexport async function showSelectFileDialog(): Promise<string> {\n  return await getAPI().showSelectFileDialog();\n}\n\nexport async function loadAppSetting(): Promise<AppSetting> {\n  return JSON.parse(await getAPI().loadAppSetting());\n}\n\nexport async function saveAppSetting(setting: AppSetting): Promise<void> {\n  await getAPI().saveAppSetting(JSON.stringify(setting));\n}\n\nexport async function loadResearchSetting(): Promise<ResearchSetting> {\n  return JSON.parse(await getAPI().loadResearchSetting());\n}\n\nexport async function saveResearchSetting(\n  setting: ResearchSetting\n): Promise<void> {\n  await getAPI().saveResearchSetting(JSON.stringify(setting));\n}\n\nexport async function loadGameSetting(): Promise<GameSetting> {\n  return JSON.parse(await getAPI().loadGameSetting());\n}\n\nexport async function saveGameSetting(setting: GameSetting): Promise<void> {\n  await getAPI().saveGameSetting(JSON.stringify(setting));\n}\n\nexport async function loadUSIEngineSetting(): Promise<USIEngineSettings> {\n  return new USIEngineSettings(await getAPI().loadUSIEngineSetting());\n}\n\nexport async function saveUSIEngineSetting(\n  setting: USIEngineSettings\n): Promise<void> {\n  await getAPI().saveUSIEngineSetting(setting.jsonWithIndent);\n}\n\nexport async function showSelectUSIEngineDialog(): Promise<string> {\n  return await getAPI().showSelectUSIEngineDialog();\n}\n\nexport async function getUSIEngineInfo(\n  path: string\n): Promise<USIEngineSetting> {\n  return JSON.parse(await getAPI().getUSIEngineInfo(path));\n}\n\nexport async function startResearch(\n  researchSetting: ResearchSetting,\n  sessionID: number\n): Promise<void> {\n  await getAPI().startResearch(JSON.stringify(researchSetting), sessionID);\n}\n\nexport async function endResearch(): Promise<void> {\n  await getAPI().endResearch();\n}\n\nexport async function startGame(\n  gameSetting: GameSetting,\n  sessionID: number\n): Promise<void> {\n  await getAPI().startGame(JSON.stringify(gameSetting), sessionID);\n}\n\nexport async function endGame(\n  usi: string,\n  specialMove?: SpecialMove\n): Promise<void> {\n  await getAPI().endGame(usi, specialMove);\n}\n\nexport async function updateUSIPosition(\n  usi: string,\n  gameSetting: GameSetting,\n  blackTimeMs: number,\n  whiteTimeMs: number\n): Promise<void> {\n  await getAPI().updateUSIPosition(\n    usi,\n    JSON.stringify(gameSetting),\n    blackTimeMs,\n    whiteTimeMs\n  );\n}\n\nexport async function stopUSI(color: Color): Promise<void> {\n  await getAPI().stopUSI(color);\n}\n\nexport async function sendUSISetOption(\n  path: string,\n  name: string\n): Promise<void> {\n  await getAPI().sendUSISetOption(path, name);\n}\n\nexport function setup(): void {\n  const store = useStore();\n  const api = getAPI();\n  api.onSendError((e: Error) => {\n    store.pushError(e);\n  });\n  api.onMenuEvent((event: MenuEvent) => {\n    if (store.isBussy) {\n      return;\n    }\n    switch (event) {\n      case MenuEvent.NEW_RECORD:\n        store.newRecord();\n        break;\n      case MenuEvent.OPEN_RECORD:\n        store.openRecord();\n        break;\n      case MenuEvent.SAVE_RECORD:\n        store.saveRecord({ overwrite: true });\n        break;\n      case MenuEvent.SAVE_RECORD_AS:\n        store.saveRecord();\n        break;\n      case MenuEvent.COPY_RECORD:\n        store.copyRecord();\n        break;\n      case MenuEvent.PASTE_RECORD:\n        store.showPasteDialog();\n        break;\n      case MenuEvent.INSERT_INTERRUPT:\n        store.insertSpecialMove(SpecialMove.INTERRUPT);\n        break;\n      case MenuEvent.INSERT_RESIGN:\n        store.insertSpecialMove(SpecialMove.RESIGN);\n        break;\n      case MenuEvent.INSERT_DRAW:\n        store.insertSpecialMove(SpecialMove.DRAW);\n        break;\n      case MenuEvent.INSERT_REPETITION_DRAW:\n        store.insertSpecialMove(SpecialMove.REPETITION_DRAW);\n        break;\n      case MenuEvent.INSERT_MATE:\n        store.insertSpecialMove(SpecialMove.MATE);\n        break;\n      case MenuEvent.INSERT_TIMEOUT:\n        store.insertSpecialMove(SpecialMove.TIMEOUT);\n        break;\n      case MenuEvent.INSERT_FOUL_WIN:\n        store.insertSpecialMove(SpecialMove.FOUL_WIN);\n        break;\n      case MenuEvent.INSERT_FOUL_LOSE:\n        store.insertSpecialMove(SpecialMove.FOUL_LOSE);\n        break;\n      case MenuEvent.INSERT_ENTERING_OF_KING:\n        store.insertSpecialMove(SpecialMove.ENTERING_OF_KING);\n        break;\n      case MenuEvent.INSERT_WIN_BY_DEFAULT:\n        store.insertSpecialMove(SpecialMove.WIN_BY_DEFAULT);\n        break;\n      case MenuEvent.INSERT_LOSS_BY_DEFAULT:\n        store.insertSpecialMove(SpecialMove.LOSS_BY_DEFAULT);\n        break;\n      case MenuEvent.REMOVE_RECORD_AFTER:\n        store.removeRecordAfter();\n        break;\n      case MenuEvent.START_POSITION_EDITING:\n        store.startPositionEditing();\n        break;\n      case MenuEvent.END_POSITION_EDITING:\n        store.endPositionEditing();\n        break;\n      case MenuEvent.CHANGE_TURN:\n        store.changeTurn();\n        break;\n      case MenuEvent.INIT_POSITION_STANDARD:\n        store.initializePosition(InitialPositionType.STANDARD);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_RIGHT_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_RIGHT_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_BISHOP:\n        store.initializePosition(InitialPositionType.HANDICAP_BISHOP);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK:\n        store.initializePosition(InitialPositionType.HANDICAP_ROOK);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_ROOK_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_2PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_2PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_4PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_4PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_6PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_6PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_8PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_8PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI:\n        store.initializePosition(InitialPositionType.TSUME_SHOGI);\n        break;\n      case MenuEvent.START_GAME:\n        store.showGameDialog();\n        break;\n      case MenuEvent.STOP_GAME:\n        store.stopGame();\n        break;\n      case MenuEvent.RESIGN:\n        store.resignByUser();\n        break;\n      case MenuEvent.START_RESEARCH:\n        store.showResearchDialog();\n        break;\n      case MenuEvent.STOP_RESEARCH:\n        store.stopResearch();\n        break;\n      case MenuEvent.FLIP_BOARD:\n        store.flipBoard();\n        break;\n      case MenuEvent.APP_SETTING_DIALOG:\n        store.openAppSettingDialog();\n        break;\n      case MenuEvent.USI_ENGINE_SETTING_DIALOG:\n        store.openUsiEngineManagementDialog();\n        break;\n    }\n  });\n  api.onUSIBestMove(\n    (sessionID: number, usi: string, color: Color, sfen: string) => {\n      store.doMoveByUsiEngine(sessionID, usi, color, sfen);\n    }\n  );\n  api.onUSIInfo(\n    (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => {\n      store.updateUSIInfo(sessionID, usi, sender, name, JSON.parse(json));\n    }\n  );\n  watch(\n    () => [store.mode, store.isBussy],\n    ([mode, bussy]) => {\n      api.updateMenuState(mode as Mode, bussy as boolean);\n    }\n  );\n  api.updateMenuState(store.mode, store.isBussy);\n}\n","export interface AudioEventHandler {\n  stop(): void;\n}\n\nfunction beep(options?: {\n  type?: OscillatorType;\n  frequency?: number;\n  time?: number;\n  volume?: number;\n}): AudioEventHandler {\n  const type = options?.type || \"sine\";\n  const frequency = options?.frequency || 440;\n  const volume = options?.volume || 2;\n  const context = new AudioContext();\n  const oscillator = context.createOscillator();\n  const gain = context.createGain();\n  oscillator.connect(gain);\n  gain.connect(context.destination);\n  oscillator.type = type;\n  oscillator.frequency.value = frequency;\n  gain.gain.value = volume * 0.005;\n  oscillator.onended = () => {\n    gain.disconnect(context.destination);\n    oscillator.disconnect(gain);\n  };\n  oscillator.start(context.currentTime);\n  if (options?.time) {\n    oscillator.stop(context.currentTime + options.time);\n  }\n  return {\n    stop: () => {\n      if (!options?.time) {\n        oscillator.stop();\n      }\n    },\n  };\n}\n\nexport function beepShort(options: {\n  frequency?: number;\n  volume?: number;\n}): void {\n  beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    time: 0.1,\n    volume: options.volume,\n  });\n}\n\nexport function beepUnlimited(options: {\n  frequency?: number;\n  volume?: number;\n}): AudioEventHandler {\n  return beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    volume: options.volume,\n  });\n}\n\nlet lastPieceBeatTime: number;\n\nexport function playPieceBeat(volume: number): void {\n  const time = Date.now();\n  if (lastPieceBeatTime && time < lastPieceBeatTime + 200) {\n    return;\n  }\n  const audio = new Audio(\"sound/piece.mp3\");\n  audio.volume = volume * 0.01;\n  audio.play();\n  lastPieceBeatTime = time;\n}\n","export enum USIInfoSender {\n  BLACK_PLAYER = \"blackPlayer\",\n  WHITE_PLAYER = \"whitePlayer\",\n  RESEARCHER = \"researcher\",\n}\n\nexport function stringifyUSIInfoSender(sender: USIInfoSender): string {\n  switch (sender) {\n    case USIInfoSender.BLACK_PLAYER:\n      return \"\";\n    case USIInfoSender.WHITE_PLAYER:\n      return \"\";\n    case USIInfoSender.RESEARCHER:\n      return \"\";\n  }\n}\n\nexport type InfoCommand = {\n  depth?: number;\n  seldepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  pv?: string[];\n  multipv?: number;\n  scoreCP?: number;\n  scoreMate?: number;\n  lowerbound?: boolean;\n  upperbound?: boolean;\n  currmove?: string;\n  hashfullPerMill?: number;\n  nps?: number;\n  string?: string;\n};\n","import { Color } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/usi/info\";\n\ntype Evaluation = {\n  blackPlayer?: number;\n  whitePlayer?: number;\n  researcher?: number;\n};\n\nexport const MAX_SCORE = 2000;\n\nexport const MIN_SCORE = -MAX_SCORE;\n\nexport class RecordEntryCustomData {\n  evaluation?: Evaluation;\n\n  constructor(json?: string) {\n    if (json) {\n      const obj = JSON.parse(json);\n      this.evaluation = obj.evaluation;\n    }\n  }\n\n  private updateScore(\n    color: Color,\n    sender: USIInfoSender,\n    score: number\n  ): void {\n    if (!this.evaluation) {\n      this.evaluation = {};\n    }\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        this.evaluation[USIInfoSender.BLACK_PLAYER] = score;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        this.evaluation[USIInfoSender.WHITE_PLAYER] = -score;\n        break;\n      case USIInfoSender.RESEARCHER:\n        this.evaluation[USIInfoSender.RESEARCHER] =\n          color === Color.BLACK ? score : -score;\n        break;\n    }\n  }\n\n  updateUSIInfo(\n    color: Color,\n    sender: USIInfoSender,\n    command: USIInfoCommand\n  ): void {\n    if (command.scoreCP) {\n      this.updateScore(\n        color,\n        sender,\n        Math.min(Math.max(command.scoreCP, MIN_SCORE), MAX_SCORE)\n      );\n    } else if (command.scoreMate) {\n      this.updateScore(\n        color,\n        sender,\n        command.scoreMate >= 0 ? MAX_SCORE : MIN_SCORE\n      );\n    }\n  }\n\n  stringify(): string {\n    return JSON.stringify(this);\n  }\n}\n","import { defaultGameSetting, GameSetting } from \"@/settings/game\";\nimport { Color } from \"@/shogi\";\n\nexport type PlayerState = {\n  timeMs: number;\n  byoyomi: number;\n};\n\ntype TimerHandlers = {\n  timeout: () => void;\n  onBeepShort: () => void;\n  onBeepUnlimited: () => void;\n};\n\nexport class GameStore {\n  private black: PlayerState;\n  private white: PlayerState;\n  private timerHandle: number;\n  private timerStart: Date;\n  private lastTimeMs: number;\n  private _elapsedMs: number;\n  private _setting: GameSetting;\n\n  constructor() {\n    this.black = { timeMs: 0, byoyomi: 0 };\n    this.white = { timeMs: 0, byoyomi: 0 };\n    this.timerHandle = 0;\n    this.timerStart = new Date();\n    this.lastTimeMs = 0;\n    this._elapsedMs = 0;\n    this._setting = defaultGameSetting();\n  }\n\n  get blackTimeMs(): number {\n    return this.black.timeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this.black.byoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this.white.timeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this.white.byoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this._elapsedMs;\n  }\n\n  get setting(): GameSetting {\n    return this._setting;\n  }\n\n  setup(setting: GameSetting): void {\n    this.black.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.black.byoyomi = setting.timeLimit.byoyomi;\n    this.white.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.white.byoyomi = setting.timeLimit.byoyomi;\n    this._setting = setting;\n  }\n\n  private getPlayerState(color: Color): PlayerState {\n    switch (color) {\n      case Color.BLACK:\n        return this.black;\n      case Color.WHITE:\n        return this.white;\n    }\n  }\n\n  startTimer(color: Color, handlers: TimerHandlers): void {\n    const playerState = this.getPlayerState(color);\n    this.timerStart = new Date();\n    this.lastTimeMs = playerState.timeMs;\n    playerState.byoyomi = this.setting.timeLimit.byoyomi;\n    this.timerHandle = window.setInterval(() => {\n      const lastTimeMs = playerState.timeMs;\n      const lastByoyomi = playerState.byoyomi;\n      const now = new Date();\n      this._elapsedMs = now.getTime() - this.timerStart.getTime();\n      const timeMs = this.lastTimeMs - this._elapsedMs;\n      if (timeMs >= 0) {\n        playerState.timeMs = timeMs;\n      } else {\n        playerState.timeMs = 0;\n        playerState.byoyomi = Math.max(\n          Math.ceil(this.setting.timeLimit.byoyomi + timeMs / 1e3),\n          0\n        );\n      }\n      if (playerState.timeMs === 0 && playerState.byoyomi === 0) {\n        handlers.timeout();\n        return;\n      }\n      const lastTime = Math.ceil(lastTimeMs / 1e3);\n      const time = Math.ceil(playerState.timeMs / 1e3);\n      const byoyomi = playerState.byoyomi;\n      if (time === 0 && (lastTimeMs > 0 || byoyomi !== lastByoyomi)) {\n        if (byoyomi <= 5) {\n          handlers.onBeepUnlimited();\n        } else if (byoyomi <= 10 || byoyomi % 10 === 0) {\n          handlers.onBeepShort();\n        }\n      } else if (!this.setting.timeLimit.byoyomi && time !== lastTime) {\n        if (time <= 5) {\n          handlers.onBeepUnlimited();\n        } else if (time <= 10 || time === 20 || time === 30 || time === 60) {\n          handlers.onBeepShort();\n        }\n      }\n    }, 100);\n  }\n\n  incrementTime(color: Color): void {\n    this.getPlayerState(color).timeMs += this.setting.timeLimit.increment * 1e3;\n  }\n\n  clearTimer(): void {\n    if (this.timerHandle) {\n      window.clearInterval(this.timerHandle);\n      this.timerHandle = 0;\n    }\n    this._elapsedMs = 0;\n  }\n}\n","import { RecordMetadata, RecordMetadataKey } from \"@/shogi\";\n\nexport function defaultRecordFileName(metadata: RecordMetadata): string {\n  let ret = getDateString(metadata);\n  const title =\n    metadata.getStandardMetadata(RecordMetadataKey.TITLE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.TOURNAMENT) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NO) ||\n    metadata.getStandardMetadata(RecordMetadataKey.PLACE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.POSTED_ON) ||\n    metadata.getStandardMetadata(RecordMetadataKey.AUTHOR);\n  if (title) {\n    ret += \"_\" + title;\n  }\n  const black =\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_SHORT_NAME);\n  if (black) {\n    ret += \"_\" + black;\n  }\n  const white =\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_SHORT_NAME);\n  if (white) {\n    ret += \"_\" + white;\n  }\n  return ret + \".kif\";\n}\n\nfunction getDateString(metadata: RecordMetadata): string {\n  const date = metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (date) {\n    return date\n      .trim()\n      .replaceAll(\" \", \"_\")\n      .replaceAll(\"/\", \"\")\n      .replaceAll(\":\", \"\");\n  }\n  return new Date()\n    .toLocaleDateString(undefined, {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n    })\n    .replaceAll(\"/\", \"\");\n}\n","export class BussyStore {\n  private count: number;\n\n  constructor() {\n    this.count = 0;\n  }\n\n  get isBussy(): boolean {\n    return this.count !== 0;\n  }\n\n  retain(): void {\n    this.count += 1;\n  }\n\n  release(): void {\n    this.count -= 1;\n  }\n}\n","import { ImmutablePosition, Move } from \"@/shogi\";\nimport { InfoCommand, USIInfoSender } from \"@/usi/info\";\n\nexport type USIIteration = {\n  depth?: number;\n  selectiveDepth?: number;\n  timeMs?: number;\n  score?: number;\n  scoreMate?: number;\n  lowerBound?: boolean;\n  upperBound?: boolean;\n  multiPV?: number;\n  pv?: string[];\n  text?: string;\n};\n\nfunction formatPV(position: ImmutablePosition, pv: string[]): string {\n  const p = position.clone();\n  let prev: Move | undefined;\n  let result = \"\";\n  for (const sfen of pv) {\n    const move = p.createMoveBySFEN(sfen);\n    if (!move) {\n      break;\n    }\n    p.doMove(move, {\n      ignoreValidation: true,\n    });\n    result += move.getDisplayText(prev);\n    prev = move;\n  }\n  return result;\n}\n\nexport class USIPlayerMonitor {\n  public nodes?: number;\n  public nps?: number;\n  public iterates: USIIteration[];\n  public hashfull?: number;\n  public currentMove?: string;\n  public currentMoveText?: string;\n\n  constructor(public name: string) {\n    this.iterates = [];\n  }\n\n  update(position: ImmutablePosition, update: InfoCommand): void {\n    const iterate: USIIteration = {};\n    if (update.depth !== undefined) {\n      iterate.depth = update.depth;\n    }\n    if (update.seldepth !== undefined) {\n      iterate.selectiveDepth = update.seldepth;\n    }\n    if (update.timeMs !== undefined) {\n      iterate.timeMs = update.timeMs;\n    }\n    if (update.nodes !== undefined) {\n      this.nodes = update.nodes;\n    }\n    if (update.pv) {\n      iterate.pv = update.pv;\n      iterate.text = formatPV(position, update.pv);\n    }\n    if (update.multipv !== undefined) {\n      iterate.multiPV = update.multipv;\n    }\n    if (update.scoreCP !== undefined) {\n      iterate.score = update.scoreCP;\n    }\n    if (update.scoreMate !== undefined) {\n      iterate.scoreMate = update.scoreMate;\n    }\n    if (update.lowerbound !== undefined) {\n      iterate.lowerBound = update.lowerbound;\n    }\n    if (update.upperbound !== undefined) {\n      iterate.upperBound = update.upperbound;\n    }\n    if (update.currmove !== undefined) {\n      this.currentMove = update.currmove;\n      const move = position.createMoveBySFEN(update.currmove);\n      if (move) {\n        this.currentMoveText = move.getDisplayText();\n      }\n    }\n    if (update.hashfullPerMill !== undefined) {\n      this.hashfull = update.hashfullPerMill / 1000;\n    }\n    if (update.nps !== undefined) {\n      this.nps = update.nps;\n    }\n    if (update.string) {\n      iterate.text = update.string;\n    }\n    if (Object.keys(iterate).length !== 0) {\n      this.iterates.unshift(iterate);\n    }\n  }\n}\n\nexport class USIStore {\n  private _sessionID?: number;\n  private _blackPlayer?: USIPlayerMonitor;\n  private _blackPosition?: string;\n  private _whitePlayer?: USIPlayerMonitor;\n  private _whitePosition?: string;\n  private _researcher?: USIPlayerMonitor;\n  private _researchPosition?: string;\n\n  get blackPlayer(): USIPlayerMonitor | undefined {\n    return this._blackPlayer;\n  }\n\n  get whitePlayer(): USIPlayerMonitor | undefined {\n    return this._whitePlayer;\n  }\n\n  get researcher(): USIPlayerMonitor | undefined {\n    return this._researcher;\n  }\n\n  update(\n    sessionID: number,\n    position: ImmutablePosition,\n    sender: USIInfoSender,\n    name: string,\n    info: InfoCommand\n  ): void {\n    if (this._sessionID != sessionID) {\n      this._blackPlayer = undefined;\n      this._whitePlayer = undefined;\n      this._researcher = undefined;\n      this._sessionID = sessionID;\n    }\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        if (!this._blackPlayer || this._blackPosition !== position.sfen) {\n          this._blackPlayer = new USIPlayerMonitor(name);\n          this._blackPosition = position.sfen;\n        }\n        this._blackPlayer.update(position, info);\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        if (!this._whitePlayer || this._whitePosition !== position.sfen) {\n          this._whitePlayer = new USIPlayerMonitor(name);\n          this._whitePosition = position.sfen;\n        }\n        this._whitePlayer.update(position, info);\n        break;\n      case USIInfoSender.RESEARCHER:\n        if (!this._researcher || this._researchPosition !== position.sfen) {\n          this._researcher = new USIPlayerMonitor(name);\n          this._researchPosition = position.sfen;\n        }\n        this._researcher.update(position, info);\n        break;\n    }\n  }\n}\n","export enum Mode {\n  NORMAL = \"normal\",\n  PASTE_DIALOG = \"pasteDialog\",\n  POSITION_EDITING = \"positionEditing\",\n  GAME = \"game\",\n  GAME_DIALOG = \"gameDialog\",\n  RESEARCH = \"research\",\n  RESEARCH_DIALOG = \"researchDialog\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSettingDialog\",\n  APP_SETTING_DIALOG = \"appSettingDialog\",\n  TEMPORARY = \"temporary\",\n}\n","export class MessageStore {\n  private _queue: string[];\n\n  constructor() {\n    this._queue = [];\n  }\n\n  get message(): string {\n    return this._queue[0];\n  }\n\n  get hasMessage(): boolean {\n    return this._queue.length !== 0;\n  }\n\n  enqueue(message: string): void {\n    this._queue.push(message);\n  }\n\n  dequeue(): void {\n    this._queue.shift();\n  }\n}\n\nexport type MessageState = {\n  queue: string[];\n};\n","export class ErrorStore {\n  private _queue: Error[];\n\n  constructor() {\n    this._queue = [];\n  }\n\n  get errors(): Error[] {\n    return this._queue;\n  }\n\n  get hasError(): boolean {\n    return this._queue.length !== 0;\n  }\n\n  push(e: unknown): void {\n    if (e instanceof Error) {\n      this._queue.push(e);\n    } else {\n      this._queue.push(new Error(\"\" + e));\n    }\n  }\n\n  clear(): void {\n    this._queue = [];\n  }\n}\n","import {\n  endGame,\n  endResearch,\n  openRecord,\n  saveAppSetting,\n  saveGameSetting,\n  saveRecord,\n  saveResearchSetting,\n  showOpenRecordDialog,\n  showSaveRecordDialog,\n  startGame,\n  startResearch,\n  stopUSI,\n  updateUSIPosition,\n} from \"@/ipc/renderer\";\nimport {\n  Color,\n  InitialPositionType,\n  Move,\n  Position,\n  PositionChange,\n  Record,\n  RecordMetadataKey,\n  reverseColor,\n  SpecialMove,\n  specialMoveToDisplayString,\n} from \"@/shogi\";\nimport { exportKakinoki, importKakinoki } from \"@/shogi\";\nimport { reactive, UnwrapNestedRefs, watch } from \"vue\";\nimport iconv from \"iconv-lite\";\nimport { GameSetting } from \"@/settings/game\";\nimport {\n  AppSetting,\n  AppSettingUpdate,\n  ClockSoundTarget,\n  defaultAppSetting,\n} from \"@/settings/app\";\nimport {\n  AudioEventHandler,\n  beepShort,\n  beepUnlimited,\n  playPieceBeat,\n} from \"@/audio\";\nimport { InfoCommand, USIInfoSender } from \"@/usi/info\";\nimport { RecordEntryCustomData } from \"./record\";\nimport { GameStore } from \"./game\";\nimport { defaultRecordFileName } from \"@/helpers/path\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { BussyStore } from \"./bussy\";\nimport { USIPlayerMonitor, USIStore } from \"./usi\";\nimport { Mode } from \"./mode\";\nimport { MessageStore } from \"./message\";\nimport { ErrorStore } from \"./error\";\nimport * as uri from \"@/uri\";\nimport { Confirmation } from \"./confirm\";\n\nclass Store {\n  private _bussy: BussyStore;\n  private _message: MessageStore;\n  private _error: ErrorStore;\n  private _appSetting: AppSetting;\n  private _mode: Mode;\n  private lastMode?: Mode;\n  private _confirmation?: Confirmation;\n  private _usi: USIStore;\n  private usiSessionID: number;\n  private _game: GameStore;\n  private unlimitedBeepHandler?: AudioEventHandler;\n  private _recordFilePath?: string;\n  private _record: Record;\n\n  constructor() {\n    this._bussy = new BussyStore();\n    this._message = new MessageStore();\n    this._error = new ErrorStore();\n    this._appSetting = defaultAppSetting();\n    this._mode = Mode.NORMAL;\n    this._usi = new USIStore();\n    this.usiSessionID = 0;\n    this._game = new GameStore();\n    this._record = new Record();\n  }\n\n  get isBussy(): boolean {\n    return this._bussy.isBussy;\n  }\n\n  retainBussyState(): void {\n    return this._bussy.retain();\n  }\n\n  releaseBussyState(): void {\n    return this._bussy.release();\n  }\n\n  get message(): string {\n    return this._message.message;\n  }\n\n  get hasMessage(): boolean {\n    return this._message.hasMessage;\n  }\n\n  enqueueMessage(message: string): void {\n    this._message.enqueue(message);\n  }\n\n  dequeueMessage(): void {\n    this._message.dequeue();\n  }\n\n  get errors(): Error[] {\n    return this._error.errors;\n  }\n\n  get hasError(): boolean {\n    return this._error.hasError;\n  }\n\n  pushError(e: unknown): void {\n    this._error.push(e);\n  }\n\n  clearErrors(): void {\n    this._error.clear();\n  }\n\n  get appSetting(): AppSetting {\n    return this._appSetting;\n  }\n\n  async updateAppSetting(update: AppSettingUpdate): Promise<void> {\n    await saveAppSetting({\n      ...this.appSetting,\n      ...update,\n    });\n    this._appSetting = {\n      ...this.appSetting,\n      ...update,\n    };\n  }\n\n  flipBoard(): void {\n    this._appSetting.boardFlipping = !this.appSetting.boardFlipping;\n    saveAppSetting(this.appSetting);\n  }\n\n  get mode(): Mode {\n    return this._mode;\n  }\n\n  get confirmation(): string | undefined {\n    return this._confirmation?.message;\n  }\n\n  showConfirmation(confirmation: Confirmation): void {\n    this._confirmation = confirmation;\n    this.lastMode = this.mode;\n    this._mode = Mode.TEMPORARY;\n  }\n\n  confirmationOk(): void {\n    const onOk = this._confirmation?.onOk;\n    this._confirmation = undefined;\n    if (this.lastMode) {\n      this._mode = this.lastMode;\n      this.lastMode = undefined;\n    }\n    if (onOk) {\n      onOk();\n    }\n  }\n\n  confirmationCancel(): void {\n    const onCancel = this._confirmation?.onCancel;\n    this._confirmation = undefined;\n    if (this.lastMode) {\n      this._mode = this.lastMode;\n      this.lastMode = undefined;\n    }\n    if (onCancel) {\n      onCancel();\n    }\n  }\n\n  showPasteDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.PASTE_DIALOG;\n    }\n  }\n\n  closePasteDialog(): void {\n    if (this.mode === Mode.PASTE_DIALOG) {\n      this._mode = Mode.NORMAL;\n    }\n  }\n\n  showGameDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.GAME_DIALOG;\n    }\n  }\n\n  showResearchDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.RESEARCH_DIALOG;\n    }\n  }\n\n  openAppSettingDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.APP_SETTING_DIALOG;\n    }\n  }\n\n  openUsiEngineManagementDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.USI_ENGINE_SETTING_DIALOG;\n    }\n  }\n\n  closeDialog(): void {\n    if (\n      this.mode === Mode.USI_ENGINE_SETTING_DIALOG ||\n      this.mode === Mode.APP_SETTING_DIALOG ||\n      this.mode === Mode.GAME_DIALOG ||\n      this.mode === Mode.RESEARCH_DIALOG\n    ) {\n      this._mode = Mode.NORMAL;\n    }\n  }\n\n  get usiBlackPlayerMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.blackPlayer;\n  }\n\n  get usiWhitePlayerMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.whitePlayer;\n  }\n\n  get usiResearcherMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.researcher;\n  }\n\n  updateUSIInfo(\n    sessionID: number,\n    usi: string,\n    sender: USIInfoSender,\n    name: string,\n    info: InfoCommand\n  ): void {\n    if (this.usiSessionID !== sessionID || this.record.usi != usi) {\n      return;\n    }\n    this._usi.update(sessionID, this.record.position, sender, name, info);\n    const entryData = new RecordEntryCustomData(this.record.current.customData);\n    entryData.updateUSIInfo(this.record.position.color, sender, info);\n    this.record.current.customData = entryData.stringify();\n  }\n\n  private issueUSISessionID(): void {\n    this.usiSessionID += 1;\n  }\n\n  get gameSetting(): GameSetting {\n    return this._game.setting;\n  }\n\n  get blackTimeMs(): number {\n    return this._game.blackTimeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this._game.blackByoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this._game.whiteTimeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this._game.whiteByoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this._game.elapsedMs;\n  }\n\n  async startGame(setting: GameSetting): Promise<boolean> {\n    if (this.mode !== Mode.GAME_DIALOG) {\n      return false;\n    }\n    this.retainBussyState();\n    try {\n      await saveGameSetting(setting);\n      if (setting.startPosition) {\n        const position = new Position();\n        position.reset(setting.startPosition);\n        this.record.clear(position);\n        this.clearRecordFilePath();\n      }\n      this.issueUSISessionID();\n      await startGame(setting, this.usiSessionID);\n      this._game.setup(setting);\n      this._mode = Mode.GAME;\n      this.record.metadata.setStandardMetadata(\n        RecordMetadataKey.BLACK_NAME,\n        setting.black.name\n      );\n      this.record.metadata.setStandardMetadata(\n        RecordMetadataKey.WHITE_NAME,\n        setting.white.name\n      );\n      if (setting.humanIsFront) {\n        let flip = this.appSetting.boardFlipping;\n        if (\n          setting.black.uri === uri.ES_HUMAN &&\n          setting.white.uri !== uri.ES_HUMAN\n        ) {\n          flip = false;\n        } else if (\n          setting.black.uri !== uri.ES_HUMAN &&\n          setting.white.uri === uri.ES_HUMAN\n        ) {\n          flip = true;\n        }\n        if (flip !== this.appSetting.boardFlipping) {\n          this.flipBoard();\n        }\n      }\n      return true;\n    } catch (e) {\n      this.pushError(\": \" + e);\n      return false;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  async stopGame(specialMove?: SpecialMove): Promise<boolean> {\n    if (this.mode !== Mode.GAME) {\n      return false;\n    }\n    if (specialMove) {\n      this.enqueueMessage(\n        `${specialMoveToDisplayString(specialMove)})`\n      );\n    }\n    this.retainBussyState();\n    try {\n      await endGame(this.record.usi, specialMove);\n      this.record.append(specialMove || SpecialMove.INTERRUPT);\n      this.record.current.setElapsedMs(this.elapsedMs);\n      this._mode = Mode.NORMAL;\n      return true;\n    } catch (e) {\n      this.pushError(\": \" + e);\n      return false;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  resetGameTimer(): void {\n    const color = this.record.position.color;\n    this._game.startTimer(color, {\n      timeout: () => {\n        if (this.isMovableByUser || this._game.setting.enableEngineTimeout) {\n          this.stopGame(SpecialMove.TIMEOUT);\n        } else {\n          stopUSI(color);\n        }\n      },\n      onBeepShort: () => {\n        this.beepShort();\n      },\n      onBeepUnlimited: () => {\n        this.beepUnlimited();\n      },\n    });\n  }\n\n  async resignByUser(): Promise<boolean> {\n    if (this.mode !== Mode.GAME) {\n      return false;\n    }\n    if (!this.isMovableByUser) {\n      return false;\n    }\n    return this.stopGame(SpecialMove.RESIGN);\n  }\n\n  doMoveByUser(move: Move): boolean {\n    if (!this.isMovableByUser) {\n      return false;\n    }\n    if (this.mode === Mode.GAME) {\n      this.incrementTime();\n    }\n    this.doMove(move);\n    return true;\n  }\n\n  doMoveByUsiEngine(\n    sessionID: number,\n    usi: string,\n    color: Color,\n    sfen: string\n  ): boolean {\n    if (this.mode !== Mode.GAME) {\n      return false;\n    }\n    if (this.usiSessionID !== sessionID) {\n      return false;\n    }\n    if (this.record.usi !== usi) {\n      return false;\n    }\n    if (color !== this.record.position.color) {\n      this.pushError(\":\" + sfen);\n      this.stopGame(SpecialMove.FOUL_LOSE);\n      return false;\n    }\n    if (sfen === \"resign\") {\n      this.stopGame(SpecialMove.RESIGN);\n      return true;\n    }\n    if (sfen === \"win\") {\n      // TODO: \n      this.stopGame(SpecialMove.ENTERING_OF_KING);\n      return true;\n    }\n    const move = this.record.position.createMoveBySFEN(sfen);\n    if (!move || !this.record.position.isValidMove(move)) {\n      this.pushError(\":\" + sfen);\n      this.stopGame(SpecialMove.FOUL_LOSE);\n      return false;\n    }\n    this.incrementTime();\n    this.doMove(move);\n    return true;\n  }\n\n  doMove(move: Move): void {\n    this.record.append(move, {\n      ignoreValidation: true,\n    });\n    this.record.current.setElapsedMs(this.elapsedMs);\n    playPieceBeat(this.appSetting.pieceVolume);\n    if (this.mode !== Mode.GAME) {\n      return;\n    }\n    const color = this.record.perpetualCheck;\n    if (color) {\n      if (color === this.record.position.color) {\n        this.stopGame(SpecialMove.FOUL_LOSE);\n      } else {\n        this.stopGame(SpecialMove.FOUL_WIN);\n      }\n    } else if (this.record.repetition) {\n      this.stopGame(SpecialMove.REPETITION_DRAW);\n    }\n  }\n\n  private incrementTime(): void {\n    this._game.incrementTime(this.record.position.color);\n  }\n\n  clearGameTimer(): void {\n    this._game.clearTimer();\n    this.stopBeep();\n  }\n\n  private beepUnlimited(): void {\n    if (\n      this.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n      !this.isMovableByUser\n    ) {\n      return;\n    }\n    if (this.unlimitedBeepHandler) {\n      return;\n    }\n    this.unlimitedBeepHandler = beepUnlimited({\n      frequency: this.appSetting.clockPitch,\n      volume: this.appSetting.clockVolume,\n    });\n  }\n\n  private beepShort(): void {\n    if (\n      this.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n      !this.isMovableByUser\n    ) {\n      return;\n    }\n    if (this.unlimitedBeepHandler) {\n      return;\n    }\n    beepShort({\n      frequency: this.appSetting.clockPitch,\n      volume: this.appSetting.clockVolume,\n    });\n  }\n\n  async startResearch(researchSetting: ResearchSetting): Promise<boolean> {\n    if (this.mode !== Mode.RESEARCH_DIALOG) {\n      return false;\n    }\n    this.retainBussyState();\n    try {\n      await saveResearchSetting(researchSetting);\n      this.issueUSISessionID();\n      await startResearch(researchSetting, this.usiSessionID);\n      this._mode = Mode.RESEARCH;\n      return true;\n    } catch (e) {\n      this.pushError(\": \" + e);\n      return false;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  async stopResearch(): Promise<boolean> {\n    if (this.mode !== Mode.RESEARCH) {\n      return false;\n    }\n    this.retainBussyState();\n    try {\n      await endResearch();\n      this._mode = Mode.NORMAL;\n      return true;\n    } catch (e) {\n      this.pushError(\": \" + e);\n      return false;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  get recordFilePath(): string | undefined {\n    return this._recordFilePath;\n  }\n\n  private updateRecordFilePath(recordFilePath: string): void {\n    this._recordFilePath = recordFilePath;\n  }\n\n  private clearRecordFilePath(): void {\n    this._recordFilePath = undefined;\n  }\n\n  private stopBeep(): void {\n    if (this.unlimitedBeepHandler) {\n      this.unlimitedBeepHandler.stop();\n      this.unlimitedBeepHandler = undefined;\n    }\n  }\n\n  get record(): Record {\n    return this._record;\n  }\n\n  newRecord(): void {\n    if (this.mode != Mode.NORMAL) {\n      return;\n    }\n    this.record.clear(new Position());\n    this.clearRecordFilePath();\n  }\n\n  updateRecordComment(comment: string): void {\n    this.record.current.comment = comment;\n  }\n\n  updateStandardRecordMetadata(update: {\n    key: RecordMetadataKey;\n    value: string;\n  }): void {\n    this.record.metadata.setStandardMetadata(update.key, update.value);\n  }\n\n  insertSpecialMove(specialMove: SpecialMove): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    this.record.append(specialMove);\n  }\n\n  startPositionEditing(): void {\n    if (this.mode !== Mode.NORMAL) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"\",\n      onOk: () => {\n        this._mode = Mode.POSITION_EDITING;\n        this.record.clear(this.record.position);\n        this.clearRecordFilePath();\n      },\n    });\n  }\n\n  endPositionEditing(): void {\n    // FIXME: \n    if (this.mode === Mode.POSITION_EDITING) {\n      this._mode = Mode.NORMAL;\n    }\n  }\n\n  initializePosition(initialPositionType: InitialPositionType): void {\n    if (this.mode != Mode.POSITION_EDITING) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"\",\n      onOk: () => {\n        const position = new Position();\n        position.reset(initialPositionType);\n        this.record.clear(position);\n        this.clearRecordFilePath();\n      },\n    });\n  }\n\n  changeTurn(): void {\n    if (this.mode != Mode.POSITION_EDITING) {\n      return;\n    }\n    const position = this.record.position.clone();\n    position.setColor(reverseColor(position.color));\n    this.record.clear(position);\n    this.clearRecordFilePath();\n  }\n\n  editPosition(change: PositionChange): void {\n    if (this.mode === Mode.POSITION_EDITING) {\n      const position = this.record.position.clone();\n      position.edit(change);\n      this.record.clear(position);\n      this.clearRecordFilePath();\n    }\n  }\n\n  changeMoveNumber(number: number): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    this.record.goto(number);\n  }\n\n  changeBranch(index: number): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    if (this.record.current.branchIndex === index) {\n      return;\n    }\n    this.record.switchBranchByIndex(index);\n  }\n\n  removeRecordAfter(): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    const next = this.record.current.next;\n    if (!next || !(next.move instanceof Move)) {\n      this.record.removeAfter();\n      return;\n    }\n    this.showConfirmation({\n      message: `${this.record.current.number}`,\n      onOk: () => {\n        this.record.removeAfter();\n      },\n    });\n  }\n\n  copyRecord(): void {\n    const str = exportKakinoki(this.record, {\n      returnCode: this.appSetting.returnCode,\n    });\n    navigator.clipboard.writeText(str);\n  }\n\n  pasteRecord(data: string): void {\n    if (this.mode !== Mode.NORMAL) {\n      return;\n    }\n    const recordOrError = importKakinoki(data);\n    if (recordOrError instanceof Record) {\n      this.clearRecordFilePath();\n      this._record = recordOrError;\n    } else {\n      this.pushError(recordOrError);\n    }\n  }\n\n  async openRecord(path?: string): Promise<boolean> {\n    if (this.mode !== Mode.NORMAL) {\n      return false;\n    }\n    this.retainBussyState();\n    try {\n      if (!path) {\n        path = await showOpenRecordDialog();\n        if (!path) {\n          return false;\n        }\n      }\n      const data = await openRecord(path);\n      if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n        const str = path.match(/\\.kif$/)\n          ? iconv.decode(data, \"Shift_JIS\")\n          : data.toString();\n        const recordOrError = importKakinoki(str);\n        if (recordOrError instanceof Record) {\n          this.updateRecordFilePath(path);\n          this._record = recordOrError;\n        } else {\n          this.pushError(recordOrError);\n        }\n        return true;\n      } else {\n        this.pushError(\": \" + path);\n        return false;\n      }\n    } catch (e) {\n      this.pushError(\": \" + e);\n      return false;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  async saveRecord(options?: { overwrite: boolean }): Promise<boolean> {\n    if (this.mode !== Mode.NORMAL) {\n      return false;\n    }\n    this.retainBussyState();\n    try {\n      let path = this.recordFilePath;\n      if (!options?.overwrite || !path) {\n        const defaultPath = defaultRecordFileName(this.record.metadata);\n        path = await showSaveRecordDialog(defaultPath);\n        if (!path) {\n          return false;\n        }\n      }\n      if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n        const str = exportKakinoki(this.record, {\n          returnCode: this.appSetting.returnCode,\n        });\n        const data = path.match(/\\.kif$/)\n          ? iconv.encode(str, \"Shift_JIS\")\n          : Buffer.from(str);\n        await saveRecord(path, data);\n        this.updateRecordFilePath(path);\n        return true;\n      } else {\n        this.pushError(\": \" + path);\n        return false;\n      }\n    } catch (e) {\n      this.pushError(\": \" + e);\n      return false;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  get isMovableByUser() {\n    switch (this.mode) {\n      case Mode.NORMAL:\n      case Mode.RESEARCH:\n        return true;\n      case Mode.GAME:\n        return (\n          (this.record.position.color === Color.BLACK\n            ? this.gameSetting.black.uri\n            : this.gameSetting.white.uri) === uri.ES_HUMAN\n        );\n    }\n    return false;\n  }\n}\n\nconst storeV2 = reactive<Store>(new Store());\n\nexport function useStore(): UnwrapNestedRefs<Store> {\n  return storeV2;\n}\n\nwatch(\n  [() => storeV2.mode, () => storeV2.record.position],\n  () => {\n    storeV2.clearGameTimer();\n    if (storeV2.mode === Mode.GAME) {\n      storeV2.resetGameTimer();\n    }\n    if (storeV2.mode === Mode.GAME || storeV2.mode === Mode.RESEARCH) {\n      updateUSIPosition(\n        storeV2.record.usi,\n        storeV2.gameSetting,\n        storeV2.blackTimeMs,\n        storeV2.whiteTimeMs\n      );\n    }\n  },\n  { deep: true }\n);\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"img\", {\n    class: \"icon\",\n    src: _ctx.source\n  }, null, 8, _hoisted_1))\n}","import preloadImage from \"./preload\";\n\nexport enum Icon {\n  BUSSY = \"bussy\",\n  ERROR = \"error\",\n  INFO = \"info\",\n  GAME = \"game\",\n  STOP = \"stop\",\n  RESIGN = \"resign\",\n  RESEARCH = \"research\",\n  END = \"end\",\n  EDIT = \"edit\",\n  CHECK = \"check\",\n  SWAP = \"swap\",\n  SWAP_H = \"swap_h\",\n  SETTINGS = \"settings\",\n  ENGINE_SETTINGS = \"engineSettings\",\n  FLIP = \"flip\",\n  PASTE = \"paste\",\n  COPY = \"copy\",\n  DELETE = \"delete\",\n  COMMENT = \"comment\",\n  BRAIN = \"brain\",\n  CHART = \"chart\",\n  ARROW_DROP = \"arrowDrop\",\n  FIRST = \"first\",\n  BACK = \"back\",\n  NEXT = \"next\",\n  LAST = \"last\",\n  QUESTION = \"question\",\n}\n\nexport const iconSourceMap = {\n  [Icon.BUSSY]: \"icon/hourglass_empty_white_24dp.svg\",\n  [Icon.ERROR]: \"icon/error_outline_white_24dp.svg\",\n  [Icon.INFO]: \"icon/info_white_24dp.svg\",\n  [Icon.GAME]: \"icon/sports_esports_white_24dp.svg\",\n  [Icon.STOP]: \"icon/block_white_24dp.svg\",\n  [Icon.RESIGN]: \"icon/flag_white_24dp.svg\",\n  [Icon.RESEARCH]: \"icon/science_white_24dp.svg\",\n  [Icon.END]: \"icon/do_disturb_on_white_24dp.svg\",\n  [Icon.EDIT]: \"icon/app_registration_white_24dp.svg\",\n  [Icon.CHECK]: \"icon/check_circle_white_24dp.svg\",\n  [Icon.SWAP]: \"icon/swap_vert_white_24dp.svg\",\n  [Icon.SWAP_H]: \"icon/swap_horiz_white_24dp.svg\",\n  [Icon.SETTINGS]: \"icon/settings_white_24dp.svg\",\n  [Icon.ENGINE_SETTINGS]: \"icon/settings_input_component_white_24dp.svg\",\n  [Icon.FLIP]: \"icon/flip_camera_android_white_24dp.svg\",\n  [Icon.PASTE]: \"icon/content_paste_white_24dp.svg\",\n  [Icon.COPY]: \"icon/content_copy_white_24dp.svg\",\n  [Icon.DELETE]: \"icon/backspace_white_24dp.svg\",\n  [Icon.COMMENT]: \"icon/edit_note_white_24dp.svg\",\n  [Icon.BRAIN]: \"icon/psychology_white_24dp.svg\",\n  [Icon.CHART]: \"icon/show_chart_white_24dp.svg\",\n  [Icon.ARROW_DROP]: \"icon/arrow_drop_down_white_24dp.svg\",\n  [Icon.FIRST]: \"icon/first_page_white_24dp.svg\",\n  [Icon.BACK]: \"icon/chevron_left_white_24dp.svg\",\n  [Icon.NEXT]: \"icon/chevron_right_white_24dp.svg\",\n  [Icon.LAST]: \"icon/last_page_white_24dp.svg\",\n  [Icon.QUESTION]: \"icon/help_white_24dp.svg\",\n};\n\nObject.values(iconSourceMap).forEach((source) => {\n  preloadImage(source);\n});\n","\nimport { Icon, iconSourceMap } from \"@/assets/icons\";\nimport { defineComponent, PropType } from \"vue\";\n\nexport default defineComponent({\n  name: \"ButtonIcon\",\n  props: {\n    icon: {\n      type: String as PropType<Icon>,\n      required: true,\n    },\n  },\n  setup(props) {\n    return {\n      source: iconSourceMap[props.icon],\n    };\n  },\n});\n","import { render } from \"./ButtonIcon.vue?vue&type=template&id=2be1683b&ts=true\"\nimport script from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\nexport * from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport BoardView from \"@/components/primitive/BoardView.vue\";\nimport {\n  InitialPositionType,\n  Move,\n  PositionChange,\n  RecordMetadataKey,\n} from \"@/shogi\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Mode } from \"@/store/mode\";\n\nexport default defineComponent({\n  name: \"BoardPane\",\n  components: {\n    BoardView,\n    ButtonIcon,\n  },\n  props: {\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup() {\n    const store = useStore();\n\n    const onMove = (move: Move) => {\n      store.doMoveByUser(move);\n    };\n\n    const onEdit = (change: PositionChange) => {\n      store.editPosition(change);\n    };\n\n    const onGame = () => {\n      store.showGameDialog();\n    };\n\n    const onStop = () => {\n      store.stopGame();\n    };\n\n    const onResign = () => {\n      store.resignByUser();\n    };\n\n    const onResearch = () => {\n      store.showResearchDialog();\n    };\n\n    const onEndResearch = () => {\n      store.stopResearch();\n    };\n\n    const onStartEditPosition = () => {\n      store.startPositionEditing();\n    };\n\n    const onEndEditPosition = () => {\n      store.endPositionEditing();\n    };\n\n    const onInitPositionStandard = () => {\n      store.initializePosition(InitialPositionType.STANDARD);\n    };\n\n    const onInitPositionTsumeShogi = () => {\n      store.initializePosition(InitialPositionType.TSUME_SHOGI);\n    };\n\n    const onChangeTurn = () => {\n      store.changeTurn();\n    };\n\n    const onOpenAppSettings = () => {\n      store.openAppSettingDialog();\n    };\n\n    const onOpenEngineSettings = () => {\n      store.openUsiEngineManagementDialog();\n    };\n\n    const onFlip = () => {\n      useStore().flipBoard();\n    };\n\n    const onPaste = () => {\n      store.showPasteDialog();\n    };\n\n    const onCopy = () => {\n      store.copyRecord();\n    };\n\n    const onRemoveAfter = () => {\n      store.removeRecordAfter();\n    };\n\n    const allowEdit = computed(() => store.mode === Mode.POSITION_EDITING);\n\n    const allowMove = computed(() => store.isMovableByUser);\n\n    const position = computed(() => store.record.position);\n\n    const lastMove = computed(() => {\n      const move = store.record.current.move;\n      return move instanceof Move ? move : null;\n    });\n\n    const pieceImageType = computed(() => store.appSetting.pieceImage);\n\n    const boardImageType = computed(() => store.appSetting.boardImage);\n\n    const flip = computed(() => store.appSetting.boardFlipping);\n\n    const blackPlayerName = computed(() => {\n      return store.record.metadata.getStandardMetadata(\n        RecordMetadataKey.BLACK_NAME\n      );\n    });\n\n    const whitePlayerName = computed(() => {\n      return store.record.metadata.getStandardMetadata(\n        RecordMetadataKey.WHITE_NAME\n      );\n    });\n\n    const blackPlayerTimeMs = computed(() =>\n      store.mode === Mode.GAME ? store.blackTimeMs : undefined\n    );\n    const blackPlayerByoyomi = computed(() =>\n      store.mode === Mode.GAME ? store.blackByoyomi : undefined\n    );\n    const whitePlayerTimeMs = computed(() =>\n      store.mode === Mode.GAME ? store.whiteTimeMs : undefined\n    );\n    const whitePlayerByoyomi = computed(() =>\n      store.mode === Mode.GAME ? store.whiteByoyomi : undefined\n    );\n\n    const controlStates = computed(() => {\n      return {\n        game: store.mode === Mode.NORMAL,\n        stop: store.mode === Mode.GAME,\n        resign: store.mode === Mode.GAME && store.isMovableByUser,\n        research: store.mode === Mode.NORMAL,\n        endResearch: store.mode === Mode.RESEARCH,\n        startEditPosition: store.mode === Mode.NORMAL,\n        endEditPosition: store.mode === Mode.POSITION_EDITING,\n        initPosition: store.mode === Mode.POSITION_EDITING,\n        removeAfter: store.mode === Mode.NORMAL || store.mode === Mode.RESEARCH,\n        paste: store.mode === Mode.NORMAL,\n        appSettings: store.mode === Mode.NORMAL,\n        engineSettings: store.mode === Mode.NORMAL,\n      };\n    });\n\n    return {\n      pieceImageType,\n      boardImageType,\n      position,\n      lastMove,\n      flip,\n      blackPlayerName,\n      whitePlayerName,\n      blackPlayerTimeMs,\n      blackPlayerByoyomi,\n      whitePlayerTimeMs,\n      whitePlayerByoyomi,\n      controlStates,\n      onMove,\n      onEdit,\n      onGame,\n      onStop,\n      onResign,\n      onResearch,\n      onEndResearch,\n      onStartEditPosition,\n      onEndEditPosition,\n      onInitPositionStandard,\n      onInitPositionTsumeShogi,\n      onChangeTurn,\n      onOpenAppSettings,\n      onOpenEngineSettings,\n      onFlip,\n      onPaste,\n      onCopy,\n      onRemoveAfter,\n      allowEdit,\n      allowMove,\n    };\n  },\n});\n","import { render } from \"./BoardPane.vue?vue&type=template&id=cd0f493c&scoped=true&ts=true\"\nimport script from \"./BoardPane.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardPane.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardPane.vue?vue&type=style&index=0&id=cd0f493c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cd0f493c\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_RecordView = _resolveComponent(\"RecordView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_RecordView, {\n      class: \"record\",\n      record: _ctx.record,\n      operational: _ctx.isRecordOperational,\n      onGoBegin: _ctx.goBegin,\n      onGoBack: _ctx.goBack,\n      onGoForward: _ctx.goForward,\n      onGoEnd: _ctx.goEnd,\n      onSelectMove: _ctx.selectMove,\n      onSelectBranch: _ctx.selectBranch\n    }, null, 8, [\"record\", \"operational\", \"onGoBegin\", \"onGoBack\", \"onGoForward\", \"onGoEnd\", \"onSelectMove\", \"onSelectBranch\"])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-251a274f\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"frame\" }\nconst _hoisted_2 = { class: \"controller\" }\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = [\"selected\", \"value\"]\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = [\"selected\", \"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.goBegin()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"first\"\n          })\n        ], 8, _hoisted_3),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.goBack()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"back\"\n          })\n        ], 8, _hoisted_4),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.goForward()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"next\"\n          })\n        ], 8, _hoisted_5),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.goEnd()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"last\"\n          })\n        ], 8, _hoisted_6)\n      ]),\n      _createElementVNode(\"select\", {\n        ref: \"moveList\",\n        class: \"move-list\",\n        size: \"2\",\n        disabled: !_ctx.operational,\n        onChange: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeNumber()))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.moves, (move) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: move.number,\n            selected: move.selected,\n            value: move.number\n          }, _toDisplayString(move.number !== 0 ? move.number + \" \" : \"\") + \" \" + _toDisplayString(move.text) + \" \" + _toDisplayString(move.hasBranch ? \" \" : \"\"), 9, _hoisted_8))\n        }), 128))\n      ], 40, _hoisted_7),\n      _createElementVNode(\"select\", {\n        ref: \"branchList\",\n        class: \"branch-list\",\n        size: \"2\",\n        disabled: !_ctx.operational,\n        onChange: _cache[5] || (_cache[5] = ($event: any) => (_ctx.changeBranch()))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.branches, (branch) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: branch.index,\n            selected: branch.selected,\n            value: branch.index\n          }, _toDisplayString(branch.text), 9, _hoisted_10))\n        }), 128))\n      ], 40, _hoisted_9)\n    ])\n  ]))\n}","\nimport { Record, RecordEntry } from \"@/shogi\";\nimport { computed, ref, defineComponent, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"RecordView\",\n  components: {\n    ButtonIcon,\n  },\n  props: {\n    record: {\n      type: Record,\n      required: true,\n    },\n    operational: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  emits: [\n    \"goBegin\",\n    \"goBack\",\n    \"goForward\",\n    \"goEnd\",\n    \"selectMove\",\n    \"selectBranch\",\n  ],\n  setup(props, context) {\n    const moveList: Ref = ref(null);\n    const branchList: Ref = ref(null);\n\n    const goBegin = () => {\n      context.emit(\"goBegin\");\n    };\n\n    const goBack = () => {\n      context.emit(\"goBack\");\n    };\n\n    const goForward = () => {\n      context.emit(\"goForward\");\n    };\n\n    const goEnd = () => {\n      context.emit(\"goEnd\");\n    };\n\n    const changeNumber = () => {\n      context.emit(\"selectMove\", Number(moveList.value.value));\n    };\n\n    const changeBranch = () => {\n      context.emit(\"selectBranch\", Number(branchList.value.value));\n    };\n\n    const beginPosSelected = computed(() => props.record.current.number === 0);\n\n    const moves = computed(() => {\n      const ret: {\n        text: string;\n        number: number;\n        hasBranch: boolean;\n        selected: boolean;\n      }[] = [];\n      props.record.moves.forEach((elem) => {\n        ret.push({\n          number: elem.number,\n          text: elem.displayText,\n          hasBranch: elem.hasBranch,\n          selected: elem === props.record.current,\n        });\n      });\n      return ret;\n    });\n\n    const branches = computed(() => {\n      if (!props.record.branchBegin.branch) {\n        return null;\n      }\n      const ret: {\n        index: number;\n        text: string;\n        selected: boolean;\n      }[] = [];\n      let p: RecordEntry | null;\n      for (p = props.record.branchBegin; p && p.move; p = p.branch) {\n        ret.push({\n          index: ret.length,\n          text: p.displayMoveText,\n          selected: p.activeBranch,\n        });\n      }\n      return ret;\n    });\n\n    return {\n      beginPosSelected,\n      moves,\n      branches,\n      moveList,\n      branchList,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      changeNumber,\n      changeBranch,\n    };\n  },\n});\n","import { render } from \"./RecordView.vue?vue&type=template&id=251a274f&scoped=true&ts=true\"\nimport script from \"./RecordView.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordView.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordView.vue?vue&type=style&index=0&id=251a274f&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-251a274f\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordView from \"@/components/primitive/RecordView.vue\";\nimport { useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\n\nexport const minWidth = 200;\n\nexport default defineComponent({\n  name: \"RecordPane\",\n  components: {\n    RecordView,\n  },\n  setup() {\n    const store = useStore();\n\n    const goto = (number: number) => {\n      store.changeMoveNumber(number);\n    };\n\n    const goBegin = () => {\n      goto(0);\n    };\n\n    const goBack = () => {\n      goto(store.record.current.number - 1);\n    };\n\n    const goForward = () => {\n      goto(store.record.current.number + 1);\n    };\n\n    const goEnd = () => {\n      goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const selectMove = (number: number) => {\n      goto(number);\n    };\n\n    const selectBranch = (index: number) => {\n      store.changeBranch(index);\n    };\n\n    const isRecordOperational = computed(() => {\n      return store.mode === Mode.NORMAL || store.mode === Mode.RESEARCH;\n    });\n\n    const record = computed(() => store.record);\n\n    return {\n      isRecordOperational,\n      record: record,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      selectMove,\n      selectBranch,\n    };\n  },\n});\n","import { render } from \"./RecordPane.vue?vue&type=template&id=7982776e&scoped=true&ts=true\"\nimport script from \"./RecordPane.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordPane.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordPane.vue?vue&type=style&index=0&id=7982776e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7982776e\"]])\n\nexport default __exports__","import { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7b261724\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"tab-border\" }, null, -1))\nconst _hoisted_9 = { class: \"tab-contents\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_RecordInfo = _resolveComponent(\"RecordInfo\")!\n  const _component_RecordComment = _resolveComponent(\"RecordComment\")!\n  const _component_EngineAnalytics = _resolveComponent(\"EngineAnalytics\")!\n  const _component_EvaluationChart = _resolveComponent(\"EvaluationChart\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.activeTab === 'invisible')\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            style: _normalizeStyle(`height: calc(100% - ${_ctx.headerHeight}px);`)\n          }, null, 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'recordInfo' }]),\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.changeSelect('recordInfo')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"recordInfo\"\n          }),\n          _hoisted_3\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'comment' }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.changeSelect('comment')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"comment\"\n          }),\n          _hoisted_4\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'search' }]),\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.changeSelect('search')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"brain\"\n          }),\n          _hoisted_5\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'chart' }]),\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.changeSelect('chart')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"chart\"\n          }),\n          _hoisted_6\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'invisible' }]),\n          onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeSelect('invisible')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"arrowDrop\"\n          }),\n          _hoisted_7\n        ], 2)\n      ]),\n      _hoisted_8,\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createVNode(_component_RecordInfo, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'recordInfo' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_RecordComment, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'comment' }])\n        }, null, 8, [\"class\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'search' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'chart' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"])\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-16ede82d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\", \"readonly\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"textarea\", {\n        ref: \"textarea\",\n        class: \"text\",\n        value: _ctx.comment,\n        readonly: !!_ctx.readonly,\n        onInput: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.change && _ctx.change(...args)))\n      }, null, 40, _hoisted_2)\n    ])\n  ]))\n}","\nimport { useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  setup() {\n    const store = useStore();\n    const comment = computed(() => store.record.current.comment);\n    const readonly = computed(() => store.mode != Mode.NORMAL);\n    const textarea: Ref = ref(null);\n\n    const change = (event: Event) => {\n      const comment = (event.target as HTMLTextAreaElement).value;\n      store.updateRecordComment(comment);\n    };\n\n    onMounted(() => {\n      textarea.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      textarea.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    return {\n      textarea,\n      comment,\n      readonly,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordComment.vue?vue&type=template&id=16ede82d&scoped=true&ts=true\"\nimport script from \"./RecordComment.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordComment.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordComment.vue?vue&type=style&index=0&id=16ede82d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-16ede82d\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3d2d2022\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EngineAnalyticsElement = _resolveComponent(\"EngineAnalyticsElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.blackPlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 0,\n            name: _ctx.blackPlayer.name,\n            info: _ctx.blackPlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.whitePlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 1,\n            name: _ctx.whitePlayer.name,\n            info: _ctx.whitePlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.researcher)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 2,\n            name: _ctx.researcher.name,\n            info: _ctx.researcher,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-182c61be\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"headers\" }\nconst _hoisted_3 = { class: \"header\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \": \", -1))\nconst _hoisted_5 = { class: \"value\" }\nconst _hoisted_6 = { class: \"header\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \": \", -1))\nconst _hoisted_8 = { class: \"value\" }\nconst _hoisted_9 = { class: \"header\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"(NPS): \", -1))\nconst _hoisted_11 = { class: \"value\" }\nconst _hoisted_12 = { class: \"header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \": \", -1))\nconst _hoisted_14 = { class: \"value\" }\nconst _hoisted_15 = { class: \"header\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \": \", -1))\nconst _hoisted_17 = { class: \"value\" }\nconst _hoisted_18 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"list-header\\\" data-v-182c61be><div class=\\\"list-column time\\\" data-v-182c61be></div><div class=\\\"list-column multipv-index\\\" data-v-182c61be></div><div class=\\\"list-column depth\\\" data-v-182c61be></div><div class=\\\"list-column score\\\" data-v-182c61be></div></div>\", 1)\nconst _hoisted_19 = { class: \"list-column time\" }\nconst _hoisted_20 = { class: \"list-column multipv-index\" }\nconst _hoisted_21 = { class: \"list-column depth\" }\nconst _hoisted_22 = { class: \"list-column score\" }\nconst _hoisted_23 = { class: \"list-column score-flag\" }\nconst _hoisted_24 = { class: \"list-column text\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.name), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.info.currentMoveText || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.info.nps || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_ctx.info.nodes || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _hoisted_16,\n          _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.info.hashfull ? (_ctx.info.hashfull * 100).toFixed(1) : \"---\") + \" % \", 1)\n        ])\n      ]),\n      _hoisted_18,\n      _createElementVNode(\"div\", {\n        class: \"list\",\n        style: _normalizeStyle(`height:${_ctx.height - 37}px`)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.info.iterates, (iterate, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: index,\n            class: _normalizeClass([\"list-item\", { best: iterate.multiPV === 1 }])\n          }, [\n            _createElementVNode(\"div\", _hoisted_19, _toDisplayString(iterate.timeMs ? (iterate.timeMs / 1e3).toFixed(1) + \"s\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_20, _toDisplayString(iterate.multiPV || \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_21, _toDisplayString(iterate.depth) + _toDisplayString(iterate.selectiveDepth && iterate.depth ? \"/\" : \"\") + _toDisplayString(iterate.selectiveDepth), 1),\n            _createElementVNode(\"div\", _hoisted_22, _toDisplayString(iterate.score) + \" \" + _toDisplayString(iterate.scoreMate ? iterate.scoreMate : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_23, _toDisplayString(iterate.lowerBound ? \"++\" : \"\") + \" \" + _toDisplayString(iterate.upperBound ? \"--\" : \"\") + \" \" + _toDisplayString(iterate.scoreMate ? \"\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_24, _toDisplayString(iterate.text), 1)\n          ], 2))\n        }), 128))\n      ], 4)\n    ])\n  ]))\n}","\nimport { USIPlayerMonitor } from \"@/store/usi\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EngineAnalyticsElement\",\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    info: {\n      type: USIPlayerMonitor,\n      required: true,\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n  },\n});\n","import { render } from \"./EngineAnalyticsElement.vue?vue&type=template&id=182c61be&scoped=true&ts=true\"\nimport script from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalyticsElement.vue?vue&type=style&index=0&id=182c61be&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-182c61be\"]])\n\nexport default __exports__","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport EngineAnalyticsElement from \"@/components/tab/EngineAnalyticsElement.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport default defineComponent({\n  name: \"EngineAnalytics\",\n  components: {\n    EngineAnalyticsElement,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const blackPlayer = computed(() => store.usiBlackPlayerMonitor);\n    const whitePlayer = computed(() => store.usiWhitePlayerMonitor);\n    const researcher = computed(() => store.usiResearcherMonitor);\n    const elementHeight = computed(() => {\n      const n =\n        (store.usiBlackPlayerMonitor ? 1 : 0) +\n        (store.usiWhitePlayerMonitor ? 1 : 0) +\n        (store.usiResearcherMonitor ? 1 : 0);\n      return n !== 0 ? props.size.height / n : 0;\n    });\n    return {\n      blackPlayer,\n      whitePlayer,\n      researcher,\n      elementHeight,\n    };\n  },\n});\n","import { render } from \"./EngineAnalytics.vue?vue&type=template&id=3d2d2022&scoped=true&ts=true\"\nimport script from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalytics.vue?vue&type=style&index=0&id=3d2d2022&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d2d2022\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-55fa65fc\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"width\", \"height\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"canvas\", {\n        ref: \"canvas\",\n        width: _ctx.size.width.toFixed(0),\n        height: _ctx.size.height.toFixed(0)\n      }, null, 8, _hoisted_2)\n    ])\n  ]))\n}","\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { MAX_SCORE, MIN_SCORE, RecordEntryCustomData } from \"@/store/record\";\nimport { defineComponent, onMounted, onUnmounted, ref, Ref, watch } from \"vue\";\nimport { ActiveElement, Chart, ChartEvent, Color } from \"chart.js\";\nimport { stringifyUSIInfoSender, USIInfoSender } from \"@/usi/info\";\nimport { ImmutableRecord } from \"@/shogi\";\n\nexport default defineComponent({\n  name: \"EvaluationChart\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const canvasRef: Ref = ref(null);\n    const store = useStore();\n    let chart: Chart;\n\n    const buildDataset = (\n      borderColor: Color,\n      sender: USIInfoSender,\n      record: ImmutableRecord\n    ) => {\n      const dataPoints: { x: number; y: number }[] = [];\n      record.moves.forEach((entry) => {\n        const data = new RecordEntryCustomData(entry.customData);\n        const value = data.evaluation && data.evaluation[sender];\n        if (value) {\n          dataPoints.push({\n            x: entry.number,\n            y: value,\n          });\n        }\n      });\n      return {\n        label: stringifyUSIInfoSender(sender),\n        borderColor,\n        data: dataPoints,\n        showLine: true,\n      };\n    };\n\n    const verticalLine = (record: ImmutableRecord) => {\n      return {\n        label: \"\",\n        borderColor: \"red\",\n        data: [\n          { x: record.current.number, y: MAX_SCORE },\n          { x: record.current.number, y: MIN_SCORE },\n        ],\n        showLine: true,\n        pointBorderWidth: 0,\n        pointRadius: 0,\n      };\n    };\n\n    const buildDatasets = (record: ImmutableRecord) => {\n      return [\n        verticalLine(record),\n        buildDataset(\"royalblue\", USIInfoSender.BLACK_PLAYER, record),\n        buildDataset(\"darkorange\", USIInfoSender.WHITE_PLAYER, record),\n        buildDataset(\"darkgreen\", USIInfoSender.RESEARCHER, record),\n      ];\n    };\n\n    const buildScalesOption = (record: ImmutableRecord) => {\n      return {\n        x: {\n          min: 0,\n          max: record.length + 10,\n        },\n        y: {\n          min: MIN_SCORE,\n          max: MAX_SCORE,\n        },\n      };\n    };\n\n    const onClick = (event: ChartEvent, _: ActiveElement[], chart: Chart) => {\n      if (event.x === null) {\n        return;\n      }\n      const width = chart.scales.x.max - chart.scales.x.min;\n      const displayWidth = chart.scales.x.right - chart.scales.x.left;\n      const x =\n        ((event.x - chart.scales.x.left) / displayWidth) * width +\n        chart.scales.x.min;\n      const number = Math.round(x);\n      store.changeMoveNumber(number);\n    };\n\n    onMounted(() => {\n      const canvas = canvasRef.value as HTMLCanvasElement;\n      const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n      const record = store.record;\n      chart = new Chart(context, {\n        type: \"scatter\",\n        data: {\n          datasets: buildDatasets(record),\n        },\n        options: {\n          color: \"black\",\n          animation: {\n            duration: 0,\n          },\n          maintainAspectRatio: false,\n          events: [\"click\"],\n          onClick,\n        },\n      });\n      chart.draw();\n    });\n\n    onUnmounted(() => {\n      chart.destroy();\n    });\n\n    watch(\n      () => [store.record],\n      ([record]) => {\n        chart.data.datasets = buildDatasets(record);\n        chart.options.scales = buildScalesOption(record);\n        chart.update();\n      },\n      { deep: true }\n    );\n\n    watch(\n      () => [props.size],\n      ([size]) => {\n        chart.resize(size.width, size.height);\n      },\n      { deep: true }\n    );\n\n    return {\n      canvas: canvasRef,\n    };\n  },\n});\n","import { render } from \"./EvaluationChart.vue?vue&type=template&id=55fa65fc&scoped=true&ts=true\"\nimport script from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\nexport * from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\n\nimport \"./EvaluationChart.vue?vue&type=style&index=0&id=55fa65fc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-55fa65fc\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3b8399d9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"key\" }\nconst _hoisted_2 = [\"value\", \"onInput\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"root\",\n      style: _normalizeStyle(`height:${_ctx.size.height}px`)\n    }, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.list, (element) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: element.key,\n          class: \"element\"\n        }, [\n          _createElementVNode(\"div\", _hoisted_1, _toDisplayString(element.displayName), 1),\n          _createElementVNode(\"input\", {\n            class: \"value-input\",\n            value: element.value,\n            onInput: ($event: any) => (_ctx.change($event, element.key))\n          }, null, 40, _hoisted_2)\n        ]))\n      }), 128))\n    ], 4)\n  ]))\n}","\nimport { getStandardMetadataDisplayName, RecordMetadataKey } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport { RectSize } from \"../primitive/Types\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup() {\n    const store = useStore();\n    const list = computed(() => {\n      return Object.values(RecordMetadataKey).map((key) => {\n        const metadata = store.record.metadata;\n        return {\n          key: key,\n          displayName: getStandardMetadataDisplayName(key),\n          value: metadata.getStandardMetadata(key) || \"\",\n        };\n      });\n    });\n\n    const change = (event: Event, key: RecordMetadataKey) => {\n      const input = event.target as HTMLInputElement;\n      store.updateStandardRecordMetadata({\n        key,\n        value: input.value,\n      });\n    };\n\n    return {\n      list,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordInfo.vue?vue&type=template&id=3b8399d9&scoped=true&ts=true\"\nimport script from \"./RecordInfo.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordInfo.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordInfo.vue?vue&type=style&index=0&id=3b8399d9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3b8399d9\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordComment from \"@/components/tab/RecordComment.vue\";\nimport EngineAnalytics from \"@/components/tab/EngineAnalytics.vue\";\nimport EvaluationChart from \"@/components/tab/EvaluationChart.vue\";\nimport RecordInfo from \"@/components/tab/RecordInfo.vue\";\nimport { useStore } from \"@/store\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Tab } from \"@/settings/app\";\n\nexport const headerHeight = 30;\n\nexport const minHeight = 240 + headerHeight;\n\nexport default defineComponent({\n  name: \"TabPane\",\n  components: {\n    RecordComment,\n    EngineAnalytics,\n    EvaluationChart,\n    RecordInfo,\n    ButtonIcon,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const changeSelect = (id: Tab) => {\n      store.updateAppSetting({\n        tab: id,\n      });\n    };\n    const activeTab = computed(() => store.appSetting.tab);\n    const contentSize = computed(() =>\n      props.size.reduce(new RectSize(0, headerHeight))\n    );\n    return {\n      activeTab,\n      contentSize,\n      headerHeight,\n      changeSelect,\n    };\n  },\n});\n","import { render } from \"./TabPane.vue?vue&type=template&id=7b261724&scoped=true&ts=true\"\nimport script from \"./TabPane.vue?vue&type=script&lang=ts\"\nexport * from \"./TabPane.vue?vue&type=script&lang=ts\"\n\nimport \"./TabPane.vue?vue&type=style&index=0&id=7b261724&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7b261724\"]])\n\nexport default __exports__","\nimport {\n  reactive,\n  onMounted,\n  onUnmounted,\n  defineComponent,\n  computed,\n  Ref,\n  ref,\n} from \"vue\";\nimport BoardPane from \"./BoardPane.vue\";\nimport RecordPane, { minWidth as minRecordWidth } from \"./RecordPane.vue\";\nimport TabPane, {\n  headerHeight as informationHeaderHeight,\n  minHeight as minTabHeight,\n} from \"./TabPane.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { Tab } from \"@/settings/app\";\n\nexport default defineComponent({\n  name: \"StandardLayout\",\n  components: {\n    BoardPane,\n    RecordPane,\n    TabPane,\n  },\n  setup() {\n    const windowSize = reactive(new RectSize(0, 0));\n    const topPaneHeight = ref(0);\n    const topPane: Ref = ref(null);\n\n    const updateSize = () => {\n      windowSize.width = window.innerWidth;\n      windowSize.height = window.innerHeight;\n    };\n\n    const topPaneResizeObserver = new ResizeObserver((entries) => {\n      topPaneHeight.value = entries[0].contentRect.height;\n    });\n\n    onMounted(() => {\n      updateSize();\n      window.addEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.observe(topPane.value);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.disconnect();\n    });\n\n    const boardPaneMaxSize = computed(() => {\n      const minTabPaneHeight =\n        useStore().appSetting.tab !== Tab.INVISIBLE\n          ? minTabHeight\n          : informationHeaderHeight;\n      return new RectSize(\n        windowSize.width - minRecordWidth,\n        windowSize.height - minTabPaneHeight\n      );\n    });\n\n    const bottomPaneSize = computed(() => {\n      return new RectSize(\n        windowSize.width,\n        windowSize.height - topPaneHeight.value\n      );\n    });\n\n    return {\n      topPane,\n      boardPaneMaxSize,\n      bottomPaneSize,\n    };\n  },\n});\n","import { render } from \"./StandardLayout.vue?vue&type=template&id=6355277e&scoped=true&ts=true\"\nimport script from \"./StandardLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./StandardLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./StandardLayout.vue?vue&type=style&index=0&id=6355277e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6355277e\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-48ae3ed2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"players\" }\nconst _hoisted_5 = { class: \"player\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"\", -1))\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"player\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"\", -1))\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = { class: \"players-control\" }\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_15 = { class: \"dialog-form-areas-h\" }\nconst _hoisted_16 = { class: \"dialog-form-area time-limit\" }\nconst _hoisted_17 = { class: \"dialog-form-item\" }\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"\", -1))\nconst _hoisted_19 = [\"value\"]\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"\", -1))\nconst _hoisted_21 = [\"value\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"\", -1))\nconst _hoisted_23 = { class: \"dialog-form-item\" }\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"\", -1))\nconst _hoisted_25 = [\"value\"]\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"\", -1))\nconst _hoisted_27 = { class: \"dialog-form-item\" }\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"\", -1))\nconst _hoisted_29 = [\"value\"]\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"\", -1))\nconst _hoisted_31 = { class: \"dialog-form-area flags\" }\nconst _hoisted_32 = { class: \"dialog-form-item\" }\nconst _hoisted_33 = [\"value\"]\nconst _hoisted_34 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"current\\\" data-v-48ae3ed2></option><option value=\\\"standard\\\" data-v-48ae3ed2></option><option value=\\\"handicapLance\\\" data-v-48ae3ed2></option><option value=\\\"handicapRightLance\\\" data-v-48ae3ed2></option><option value=\\\"handicapBishop\\\" data-v-48ae3ed2></option><option value=\\\"handicapRook\\\" data-v-48ae3ed2></option><option value=\\\"handicapRookLance\\\" data-v-48ae3ed2></option><option value=\\\"handicap2Pieces\\\" data-v-48ae3ed2>2</option><option value=\\\"handicap4Pieces\\\" data-v-48ae3ed2>4</option><option value=\\\"handicap6Pieces\\\" data-v-48ae3ed2>6</option><option value=\\\"handicap8Pieces\\\" data-v-48ae3ed2>8</option>\", 11)\nconst _hoisted_45 = [\n  _hoisted_34\n]\nconst _hoisted_46 = { class: \"dialog-form-item\" }\nconst _hoisted_47 = [\"checked\"]\nconst _hoisted_48 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"disable-engine-timeout\" }, \"\", -1))\nconst _hoisted_49 = { class: \"dialog-form-item\" }\nconst _hoisted_50 = [\"checked\"]\nconst _hoisted_51 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"human-is-front\" }, \"\", -1))\nconst _hoisted_52 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _hoisted_6,\n            _createElementVNode(\"select\", {\n              ref: \"blackPlayerSelect\",\n              class: \"player-select\",\n              size: \"1\",\n              value: _ctx.defaultValues.black.type\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: player.uri,\n                  value: player.uri\n                }, _toDisplayString(player.name), 9, _hoisted_8))\n              }), 128))\n            ], 8, _hoisted_7)\n          ]),\n          _createElementVNode(\"div\", _hoisted_9, [\n            _hoisted_10,\n            _createElementVNode(\"select\", {\n              ref: \"whitePlayerSelect\",\n              class: \"player-select\",\n              size: \"1\",\n              value: _ctx.defaultValues.white.type\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: player.uri,\n                  value: player.uri\n                }, _toDisplayString(player.name), 9, _hoisted_12))\n              }), 128))\n            ], 8, _hoisted_11)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onSwapColor && _ctx.onSwapColor(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"swap_h\"\n            }),\n            _hoisted_14\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_15, [\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createElementVNode(\"div\", _hoisted_17, [\n            _hoisted_18,\n            _createElementVNode(\"input\", {\n              ref: \"hours\",\n              class: \"time-input\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.hours\n            }, null, 8, _hoisted_19),\n            _hoisted_20,\n            _createElementVNode(\"input\", {\n              ref: \"minutes\",\n              class: \"time-input\",\n              type: \"number\",\n              min: \"0\",\n              max: \"59\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.minutes\n            }, null, 8, _hoisted_21),\n            _hoisted_22\n          ]),\n          _createElementVNode(\"div\", _hoisted_23, [\n            _hoisted_24,\n            _createElementVNode(\"input\", {\n              ref: \"byoyomi\",\n              class: \"time-input single\",\n              type: \"number\",\n              min: \"0\",\n              max: \"60\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.byoyomi\n            }, null, 8, _hoisted_25),\n            _hoisted_26\n          ]),\n          _createElementVNode(\"div\", _hoisted_27, [\n            _hoisted_28,\n            _createElementVNode(\"input\", {\n              ref: \"increment\",\n              class: \"time-input single\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.increment\n            }, null, 8, _hoisted_29),\n            _hoisted_30\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_31, [\n          _createElementVNode(\"div\", _hoisted_32, [\n            _createElementVNode(\"select\", {\n              ref: \"startPosition\",\n              value: _ctx.defaultValues.startPosition\n            }, _hoisted_45, 8, _hoisted_33)\n          ]),\n          _createElementVNode(\"div\", _hoisted_46, [\n            _createElementVNode(\"input\", {\n              id: \"disable-engine-timeout\",\n              ref: \"enableEngineTimeout\",\n              type: \"checkbox\",\n              checked: _ctx.defaultValues.enableEngineTimeout\n            }, null, 8, _hoisted_47),\n            _hoisted_48\n          ]),\n          _createElementVNode(\"div\", _hoisted_49, [\n            _createElementVNode(\"input\", {\n              id: \"human-is-front\",\n              ref: \"humanIsFront\",\n              type: \"checkbox\",\n              checked: _ctx.defaultValues.humanIsFront\n            }, null, 8, _hoisted_50),\n            _hoisted_51\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_52, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onStart()))\n        }, \"\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onCancel()))\n        }, \"\")\n      ])\n    ], 512)\n  ]))\n}","interface Dialog extends HTMLElement {\n  showModal(): void;\n}\n\nexport function showModalDialog(dialog: Dialog): void {\n  dialog.addEventListener(\"cancel\", (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"copy\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"paste\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.showModal();\n}\n\ninterface FormItem extends HTMLElement {\n  value: string;\n}\n\nexport function getFormItemByID(id: string): FormItem | null {\n  return document.getElementById(id) as FormItem | null;\n}\n","export function readInputAsNumber(input: HTMLInputElement): number {\n  const value = Number(input.value);\n  const max = Number(input.max);\n  const min = Number(input.min);\n  return Math.min(Math.max(value, min), max);\n}\n","\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport { loadGameSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { useStore } from \"@/store\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  PlayerSetting,\n  validateGameSetting,\n} from \"@/settings/game\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport * as uri from \"@/uri\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\n\nexport default defineComponent({\n  name: \"GameDialog\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const blackPlayerSelect: Ref = ref(null);\n    const whitePlayerSelect: Ref = ref(null);\n    const hours: Ref = ref(null);\n    const minutes: Ref = ref(null);\n    const byoyomi: Ref = ref(null);\n    const increment: Ref = ref(null);\n    const startPosition: Ref = ref(null);\n    const enableEngineTimeout: Ref = ref(null);\n    const humanIsFront: Ref = ref(null);\n    const gameSetting = ref(defaultGameSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        gameSetting.value = await loadGameSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.releaseBussyState();\n      } catch (e) {\n        store.pushError(e);\n        store.closeDialog();\n      }\n    });\n\n    const buildPlayerSetting = (playerURI: string): PlayerSetting => {\n      if (uri.isUSIEngine(playerURI)) {\n        const engine = engineSetting.value.getEngine(playerURI);\n        return {\n          name: engine.name,\n          uri: playerURI,\n          usi: engine,\n        };\n      }\n      return {\n        name: \"\",\n        uri: uri.ES_HUMAN,\n      };\n    };\n\n    const onStart = () => {\n      const gameSetting: GameSetting = {\n        black: buildPlayerSetting(blackPlayerSelect.value.value),\n        white: buildPlayerSetting(whitePlayerSelect.value.value),\n        timeLimit: {\n          timeSeconds:\n            (readInputAsNumber(hours.value) * 60 +\n              readInputAsNumber(minutes.value)) *\n            60,\n          byoyomi: readInputAsNumber(byoyomi.value),\n          increment: readInputAsNumber(increment.value),\n        },\n        startPosition:\n          startPosition.value.value !== \"current\"\n            ? startPosition.value.value\n            : undefined,\n        enableEngineTimeout: enableEngineTimeout.value.checked,\n        humanIsFront: humanIsFront.value.checked,\n      };\n      const error = validateGameSetting(gameSetting);\n      if (error) {\n        store.pushError(error);\n      } else {\n        store.startGame(gameSetting);\n      }\n    };\n\n    const onCancel = () => {\n      store.closeDialog();\n    };\n\n    const onSwapColor = () => {\n      [blackPlayerSelect.value.value, whitePlayerSelect.value.value] = [\n        whitePlayerSelect.value.value,\n        blackPlayerSelect.value.value,\n      ];\n    };\n\n    const defaultValues = computed(() => {\n      return {\n        black: { type: gameSetting.value.black.uri },\n        white: { type: gameSetting.value.white.uri },\n        timeLimit: {\n          hours: Math.floor(gameSetting.value.timeLimit.timeSeconds / 3600),\n          minutes:\n            Math.floor(gameSetting.value.timeLimit.timeSeconds / 60) % 60,\n          byoyomi: gameSetting.value.timeLimit.byoyomi,\n          increment: gameSetting.value.timeLimit.increment,\n        },\n        startPosition:\n          gameSetting.value.startPosition !== undefined\n            ? gameSetting.value.startPosition\n            : \"current\",\n        enableEngineTimeout: gameSetting.value.enableEngineTimeout,\n        humanIsFront: gameSetting.value.humanIsFront,\n      };\n    });\n\n    const players = computed(() => {\n      return [\n        { name: \"\", uri: uri.ES_HUMAN },\n        ...engineSetting.value.engineList,\n      ];\n    });\n\n    return {\n      dialog,\n      blackPlayerSelect,\n      whitePlayerSelect,\n      hours,\n      minutes,\n      byoyomi,\n      increment,\n      startPosition,\n      enableEngineTimeout,\n      humanIsFront,\n      defaultValues,\n      players,\n      onStart,\n      onCancel,\n      onSwapColor,\n    };\n  },\n});\n","import { render } from \"./GameDialog.vue?vue&type=template&id=48ae3ed2&scoped=true&ts=true\"\nimport script from \"./GameDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./GameDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./GameDialog.vue?vue&type=style&index=0&id=48ae3ed2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-48ae3ed2\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f5f3a750\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"\", -1))\nconst _hoisted_6 = { class: \"dialog-form-item-unit\" }\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createElementVNode(\"select\", {\n              ref: \"engineSelect\",\n              class: \"engine-select\",\n              size: \"1\",\n              value: _ctx.defaultValue\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: engine.uri,\n                  value: engine.uri\n                }, _toDisplayString(engine.name), 9, _hoisted_8))\n              }), 128))\n            ], 8, _hoisted_7)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onStart()))\n        }, \"\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onCancel()))\n        }, \"\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { loadResearchSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { defaultResearchSetting, ResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineSelect: Ref = ref(null);\n    const researchSetting = ref(defaultResearchSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        researchSetting.value = await loadResearchSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.releaseBussyState();\n      } catch (e) {\n        store.pushError(e);\n        store.closeDialog();\n      }\n    });\n\n    const onStart = () => {\n      const uri = engineSelect.value.value;\n      if (!engineSetting.value.hasEngine(uri)) {\n        store.pushError(\"\");\n        return;\n      }\n      const engine = engineSetting.value.getEngine(uri);\n      const researchSetting: ResearchSetting = {\n        usi: engine,\n      };\n      store.startResearch(researchSetting);\n    };\n\n    const onCancel = () => {\n      store.closeDialog();\n    };\n\n    const engines = computed(() => engineSetting.value.engineList);\n\n    const defaultValue = computed(() => {\n      if (researchSetting.value.usi) {\n        return researchSetting.value.usi.uri;\n      }\n      return \"\";\n    });\n\n    return {\n      dialog,\n      engineSelect,\n      engines,\n      defaultValue,\n      onStart,\n      onCancel,\n    };\n  },\n});\n","import { render } from \"./ResearchDialog.vue?vue&type=template&id=f5f3a750&scoped=true&ts=true\"\nimport script from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ResearchDialog.vue?vue&type=style&index=0&id=f5f3a750&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f5f3a750\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-e289221a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area engine-list\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"engine\"\n}\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = { class: \"engine-name\" }\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"dialog\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_ctx.engines.length === 0)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"  \"))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: engine.uri,\n              class: \"engine\",\n              value: engine.uri\n            }, [\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(engine.name), 1),\n              _createElementVNode(\"button\", {\n                class: \"dialog-narrow-button\",\n                onClick: ($event: any) => (_ctx.openOptions(engine.uri))\n              }, \"  \", 8, _hoisted_7),\n              _createElementVNode(\"button\", {\n                class: \"dialog-narrow-button\",\n                onClick: ($event: any) => (_ctx.duplicate(engine.uri))\n              }, \"  \", 8, _hoisted_8),\n              _createElementVNode(\"button\", {\n                class: \"dialog-narrow-button\",\n                onClick: ($event: any) => (_ctx.remove(engine.uri))\n              }, \"  \", 8, _hoisted_9)\n            ], 8, _hoisted_5))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"dialog-wide-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.add()))\n        }, \"\"),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.saveAndClose()))\n          }, \"  \"),\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n          }, \"\")\n        ])\n      ], 512)\n    ]),\n    (_ctx.optionDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          \"latest-engine-setting\": _ctx.optionDialog,\n          onOk: _ctx.optionOk,\n          onCancel: _ctx.optionCancel\n        }, null, 8, [\"latest-engine-setting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c4e7276c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area option-list\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"\", -1))\nconst _hoisted_6 = { class: \"option-unchangeable\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"\", -1))\nconst _hoisted_9 = { class: \"option-unchangeable\" }\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"\", -1))\nconst _hoisted_12 = { class: \"option-unchangeable\" }\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"\", -1))\nconst _hoisted_15 = {\n  ref: \"engineNameInput\",\n  class: \"option-value-text\",\n  type: \"text\",\n  name: \"ElectronShogiEngineName\"\n}\nconst _hoisted_16 = { class: \"option-name\" }\nconst _hoisted_17 = [\"id\", \"min\", \"max\", \"name\"]\nconst _hoisted_18 = [\"id\", \"name\"]\nconst _hoisted_19 = [\"id\", \"name\"]\nconst _hoisted_20 = [\"onClick\"]\nconst _hoisted_21 = [\"id\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"\", -1))\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"true\" }, \"ON\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"false\" }, \"OFF\", -1))\nconst _hoisted_25 = [\n  _hoisted_22,\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = [\"id\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"\", -1))\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.engine.defaultName), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _hoisted_8,\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.engine.author), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _hoisted_11,\n          _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_ctx.engine.path), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"input\", _hoisted_15, null, 512)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.options, (option) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: option.name,\n            class: \"option\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_16, _toDisplayString(option.name), 1),\n            (option.type === 'spin')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 0,\n                  id: option.inputId,\n                  class: \"option-value-number\",\n                  type: \"number\",\n                  min: option.min,\n                  max: option.max,\n                  step: \"1\",\n                  name: option.name\n                }, null, 8, _hoisted_17))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'string')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 1,\n                  id: option.inputId,\n                  class: \"option-value-text\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_18))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 2,\n                  id: option.inputId,\n                  class: \"option-value-filename\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_19))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 3,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.selectFile(option.inputId))\n                }, \"  \", 8, _hoisted_20))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'check')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 4,\n                  id: option.inputId,\n                  class: \"option-value-check\"\n                }, _hoisted_25, 8, _hoisted_21))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'combo')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 5,\n                  id: option.inputId,\n                  class: \"option-value-combo\"\n                }, [\n                  _hoisted_27,\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(option.vars, (v) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: v,\n                      value: v\n                    }, _toDisplayString(v), 9, _hoisted_28))\n                  }), 128))\n                ], 8, _hoisted_26))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'button')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 6,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.sendOption(option.name))\n                }, \"  \", 8, _hoisted_29))\n              : _createCommentVNode(\"\", true)\n          ]))\n        }), 128))\n      ]),\n      _createElementVNode(\"button\", {\n        class: \"dialog-wide-button\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.reset()))\n      }, \"  \"),\n      _createElementVNode(\"div\", _hoisted_30, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.ok()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n        }, \"\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { getFormItemByID, showModalDialog } from \"@/helpers/dialog\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport {\n  getUSIEngineInfo,\n  sendUSISetOption,\n  showSelectFileDialog,\n} from \"@/ipc/renderer\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  mergeUSIEngineSetting,\n  USIEngineSetting,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, PropType, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"USIEngineOptionDialog\",\n  props: {\n    latestEngineSetting: {\n      type: Object as PropType<USIEngineSetting>,\n      required: true,\n    },\n  },\n  emits: [\"ok\", \"cancel\"],\n  setup(props, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineNameInput: Ref = ref(null);\n    const latest = props.latestEngineSetting as USIEngineSetting;\n    let engine = ref(latest);\n\n    const options = computed(() => {\n      return Object.values(engine.value.options)\n        .sort((a, b): number => {\n          const aIsUSI = a.name.startsWith(\"USI_\");\n          const bIsUSI = b.name.startsWith(\"USI_\");\n          if (aIsUSI !== bIsUSI) {\n            return aIsUSI ? -1 : 1;\n          }\n          return a.name < b.name ? -1 : 1;\n        })\n        .map((option, index) => {\n          return {\n            ...option,\n            inputId: \"usiEngineOptionDialogOption\" + index,\n            value: getUSIEngineOptionCurrentValue(option),\n          };\n        });\n    });\n\n    store.retainBussyState();\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        engine.value = await getUSIEngineInfo(latest.path);\n        mergeUSIEngineSetting(engine.value, latest);\n        engineNameInput.value.value = engine.value.name;\n        for (const option of options.value) {\n          const elem = getFormItemByID(option.inputId);\n          if (elem && option.value !== undefined) {\n            elem.value = option.value + \"\";\n          }\n        }\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const selectFile = async (id: string) => {\n      store.retainBussyState();\n      try {\n        const path = await showSelectFileDialog();\n        const elem = getFormItemByID(id);\n        if (path && elem) {\n          elem.value = path;\n        }\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const sendOption = async (name: string) => {\n      store.retainBussyState();\n      try {\n        await sendUSISetOption(engine.value.path, name);\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const reset = () => {\n      engineNameInput.value.value = engine.value.defaultName;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          if (engine.value.options[option.name].default !== undefined) {\n            elem.value = engine.value.options[option.name].default + \"\";\n          } else {\n            elem.value = \"\";\n          }\n        }\n      }\n    };\n\n    const ok = () => {\n      engine.value.name = engineNameInput.value.value;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          engine.value.options[option.name].value = !elem.value\n            ? undefined\n            : option.type === \"spin\"\n            ? readInputAsNumber(elem as HTMLInputElement)\n            : elem.value;\n        }\n      }\n      context.emit(\"ok\", engine.value);\n    };\n\n    const cancel = () => {\n      context.emit(\"cancel\");\n    };\n\n    return {\n      engine,\n      dialog,\n      engineNameInput,\n      options,\n      selectFile,\n      sendOption,\n      reset,\n      ok,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineOptionDialog.vue?vue&type=template&id=c4e7276c&scoped=true&ts=true\"\nimport script from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineOptionDialog.vue?vue&type=style&index=0&id=c4e7276c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c4e7276c\"]])\n\nexport default __exports__","\nimport {\n  getUSIEngineInfo,\n  loadUSIEngineSetting,\n  saveUSIEngineSetting,\n  showSelectUSIEngineDialog,\n} from \"@/ipc/renderer\";\nimport {\n  duplicateEngineSetting,\n  USIEngineSetting,\n  USIEngineSettings,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"USIEngineManagementDialog\",\n  components: {\n    USIEngineOptionDialog,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const optionDialog: Ref<USIEngineSetting | null> = ref(null);\n    const setting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        setting.value = await loadUSIEngineSetting();\n        store.releaseBussyState();\n      } catch (e) {\n        store.pushError(e);\n        store.closeDialog();\n      }\n    });\n\n    const add = async () => {\n      try {\n        store.retainBussyState();\n        const path = await showSelectUSIEngineDialog();\n        if (!path) {\n          return;\n        }\n        setting.value.addEngine(await getUSIEngineInfo(path));\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const remove = (uri: string) => {\n      setting.value.removeEngine(uri);\n    };\n\n    const openOptions = (uri: string) => {\n      optionDialog.value = setting.value.getEngine(uri);\n    };\n\n    const duplicate = (uri: string) => {\n      const src = setting.value.getEngine(uri);\n      const engine = duplicateEngineSetting(src);\n      setting.value.addEngine(engine);\n    };\n\n    const saveAndClose = async () => {\n      try {\n        store.retainBussyState();\n        await saveUSIEngineSetting(setting.value as USIEngineSettings);\n        store.closeDialog();\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const cancel = () => {\n      store.closeDialog();\n    };\n\n    const optionOk = (engine: USIEngineSetting) => {\n      setting.value.updateEngine(engine);\n      optionDialog.value = null;\n    };\n\n    const optionCancel = () => {\n      optionDialog.value = null;\n    };\n\n    const engines = computed(() => setting.value.engineList);\n\n    return {\n      optionDialog,\n      dialog,\n      engines,\n      add,\n      remove,\n      openOptions,\n      duplicate,\n      saveAndClose,\n      cancel,\n      optionOk,\n      optionCancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineManagementDialog.vue?vue&type=template&id=e289221a&scoped=true&ts=true\"\nimport script from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineManagementDialog.vue?vue&type=style&index=0&id=e289221a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e289221a\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3fceaa98\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area settings\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"\", -1))\nconst _hoisted_6 = [\"value\"]\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = { class: \"dialog-form-item\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"\", -1))\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = { class: \"dialog-form-item\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"\", -1))\nconst _hoisted_14 = [\"value\"]\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_16 = { class: \"dialog-form-item\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"\", -1))\nconst _hoisted_18 = [\"value\"]\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_20 = { class: \"dialog-form-item\" }\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"\", -1))\nconst _hoisted_22 = [\"value\"]\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"Hz (220 ~ 880)\", -1))\nconst _hoisted_24 = { class: \"dialog-form-item\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"\", -1))\nconst _hoisted_26 = [\"value\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"all\" }, \"\", -1))\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"onlyUser\" }, \"\", -1))\nconst _hoisted_29 = [\n  _hoisted_27,\n  _hoisted_28\n]\nconst _hoisted_30 = { class: \"dialog-form-item\" }\nconst _hoisted_31 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"\", -1))\nconst _hoisted_32 = [\"value\"]\nconst _hoisted_33 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"crlf\" }, \"CR + LF (Windows)\", -1))\nconst _hoisted_34 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"lf\" }, \"LF (UNIX/Mac)\", -1))\nconst _hoisted_35 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"cr\" }, \"CR (90Mac)\", -1))\nconst _hoisted_36 = [\n  _hoisted_33,\n  _hoisted_34,\n  _hoisted_35\n]\nconst _hoisted_37 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"select\", {\n            ref: \"pieceImage\",\n            value: _ctx.appSetting.pieceImage\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.pieceImageTypes, (pieceImageType) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: pieceImageType,\n                value: pieceImageType.value\n              }, _toDisplayString(pieceImageType.name), 9, _hoisted_7))\n            }), 128))\n          ], 8, _hoisted_6)\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _hoisted_9,\n          _createElementVNode(\"select\", {\n            ref: \"boardImage\",\n            value: _ctx.appSetting.boardImage\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.boardImageTypes, (boardImageType) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: boardImageType,\n                value: boardImageType.value\n              }, _toDisplayString(boardImageType.name), 9, _hoisted_11))\n            }), 128))\n          ], 8, _hoisted_10)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"input\", {\n            ref: \"pieceVolume\",\n            value: _ctx.appSetting.pieceVolume,\n            type: \"number\",\n            max: \"100\",\n            min: \"0\"\n          }, null, 8, _hoisted_14),\n          _hoisted_15\n        ]),\n        _createElementVNode(\"div\", _hoisted_16, [\n          _hoisted_17,\n          _createElementVNode(\"input\", {\n            ref: \"clockVolume\",\n            value: _ctx.appSetting.clockVolume,\n            type: \"number\",\n            max: \"100\",\n            min: \"0\"\n          }, null, 8, _hoisted_18),\n          _hoisted_19\n        ]),\n        _createElementVNode(\"div\", _hoisted_20, [\n          _hoisted_21,\n          _createElementVNode(\"input\", {\n            ref: \"clockPitch\",\n            value: _ctx.appSetting.clockPitch,\n            type: \"number\",\n            max: \"880\",\n            min: \"220\"\n          }, null, 8, _hoisted_22),\n          _hoisted_23\n        ]),\n        _createElementVNode(\"div\", _hoisted_24, [\n          _hoisted_25,\n          _createElementVNode(\"select\", {\n            ref: \"clockSoundTarget\",\n            value: _ctx.appSetting.clockSoundTarget\n          }, _hoisted_29, 8, _hoisted_26)\n        ]),\n        _createElementVNode(\"div\", _hoisted_30, [\n          _hoisted_31,\n          _createElementVNode(\"select\", {\n            ref: \"returnCode\",\n            value: _ctx.appSetting.returnCode\n          }, _hoisted_36, 8, _hoisted_32)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_37, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.saveAndClose()))\n        }, \"  \"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.cancel()))\n        }, \"\")\n      ])\n    ], 512)\n  ]))\n}","\nimport {\n  PieceImageType,\n  BoardImageType,\n} from \"@/components/primitive/BoardLayout\";\nimport { AppSettingUpdate } from \"@/settings/app\";\nimport { useStore } from \"@/store\";\nimport { ref, defineComponent, onMounted, Ref, computed } from \"vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nconst returnCodeToName: { [name: string]: string } = {\n  \"\\r\\n\": \"crlf\",\n  \"\\n\": \"lf\",\n  \"\\r\": \"cr\",\n};\n\nconst nameToReturnCode: { [name: string]: string } = {\n  crlf: \"\\r\\n\",\n  lf: \"\\n\",\n  cr: \"\\r\",\n};\n\nexport default defineComponent({\n  name: \"AppSettingDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const pieceImage: Ref = ref(null);\n    const boardImage: Ref = ref(null);\n    const pieceVolume: Ref = ref(null);\n    const clockVolume: Ref = ref(null);\n    const clockPitch: Ref = ref(null);\n    const clockSoundTarget: Ref = ref(null);\n    const returnCode: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const saveAndClose = async () => {\n      const update: AppSettingUpdate = {\n        pieceImage: pieceImage.value.value,\n        boardImage: boardImage.value.value,\n        pieceVolume: readInputAsNumber(pieceVolume.value),\n        clockVolume: readInputAsNumber(clockVolume.value),\n        clockPitch: readInputAsNumber(clockPitch.value),\n        clockSoundTarget: clockSoundTarget.value.value,\n        returnCode: nameToReturnCode[returnCode.value.value],\n      };\n      store.retainBussyState();\n      try {\n        await store.updateAppSetting(update);\n        store.closeDialog();\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const cancel = () => {\n      store.closeDialog();\n    };\n\n    const appSetting = computed(() => {\n      return {\n        ...store.appSetting,\n        returnCode: returnCodeToName[store.appSetting.returnCode],\n      };\n    });\n\n    const pieceImageTypes = [\n      {\n        name: \"\",\n        value: PieceImageType.HITOMOJI,\n      },\n      {\n        name: \"\",\n        value: PieceImageType.HITOMOJI_GOTHIC,\n      },\n    ];\n\n    const boardImageTypes = [\n      {\n        name: \"\",\n        value: BoardImageType.LIGHT,\n      },\n      {\n        name: \"\",\n        value: BoardImageType.WARM,\n      },\n      {\n        name: \"\",\n        value: BoardImageType.RESIN,\n      },\n    ];\n\n    return {\n      dialog,\n      pieceImage,\n      boardImage,\n      pieceVolume,\n      clockVolume,\n      clockPitch,\n      clockSoundTarget,\n      returnCode,\n      appSetting,\n      pieceImageTypes,\n      boardImageTypes,\n      saveAndClose,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./AppSettingDialog.vue?vue&type=template&id=3fceaa98&scoped=true&ts=true\"\nimport script from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AppSettingDialog.vue?vue&type=style&index=0&id=3fceaa98&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3fceaa98\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-86898e3c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { ref: \"content\" }\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"\", -1))\nconst _hoisted_5 = {\n  key: 0,\n  class: \"message\"\n}\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" \")\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_9 = [\n  _hoisted_6,\n  _hoisted_7,\n  _hoisted_8\n]\nconst _hoisted_10 = { ref: \"textarea\" }\nconst _hoisted_11 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          (!_ctx.isNative)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _hoisted_9))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"textarea\", _hoisted_10, null, 512)\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onOk && _ctx.onOk(...args)))\n        }, \"\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onCancel && _ctx.onCancel(...args)))\n        }, \"\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { isNative } from \"@/ipc/renderer\";\nimport { useStore } from \"@/store\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"PasteDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const textarea: Ref = ref(null);\n\n    store.retainBussyState();\n    onMounted(async () => {\n      try {\n        showModalDialog(dialog.value);\n        if (isNative()) {\n          textarea.value.value = await navigator.clipboard.readText();\n        }\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const onOk = () => {\n      const data = textarea.value.value;\n      store.closePasteDialog();\n      if (data) {\n        store.pasteRecord(data);\n      }\n    };\n\n    const onCancel = () => {\n      store.closePasteDialog();\n    };\n\n    return {\n      dialog,\n      textarea,\n      onOk,\n      onCancel,\n      isNative: isNative(),\n    };\n  },\n});\n","import { render } from \"./PasteDialog.vue?vue&type=template&id=86898e3c&scoped=true&ts=true\"\nimport script from \"./PasteDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PasteDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PasteDialog.vue?vue&type=style&index=0&id=86898e3c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-86898e3c\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4939dcf2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"bussy\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: \"bussy\"\n        }),\n        _hoisted_3\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"BussyMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    return {\n      dialog,\n    };\n  },\n});\n","import { render } from \"./BussyMessage.vue?vue&type=template&id=4939dcf2&scoped=true&ts=true\"\nimport script from \"./BussyMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./BussyMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./BussyMessage.vue?vue&type=style&index=0&id=4939dcf2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4939dcf2\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: \"question\"\n        }),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onOk()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onClose()))\n        }, \"\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { useStore } from \"@/store\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const message = computed(() => store.confirmation);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const onOk = () => {\n      store.confirmationOk();\n    };\n\n    const onClose = () => {\n      store.confirmationCancel();\n    };\n\n    return {\n      dialog,\n      message,\n      onOk,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./ConfirmDialog.vue?vue&type=template&id=33f81aea&ts=true\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: \"info\"\n        }),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const message = computed(() => store.message);\n\n    const onClose = () => {\n      store.dequeueMessage();\n    };\n\n    return {\n      dialog,\n      message,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./InfoMessage.vue?vue&type=template&id=3f599863&ts=true\"\nimport script from \"./InfoMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoMessage.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-53994b82\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"error\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"items\" }\nconst _hoisted_4 = { class: \"notice\" }\nconst _hoisted_5 = { class: \"index\" }\nconst _hoisted_6 = { class: \"message\" }\nconst _hoisted_7 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: \"error\"\n        }),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.errors.length) + \"  \", 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, (error) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: error.index,\n              class: \"item\"\n            }, [\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(error.index + 1) + \" \", 1),\n              _createElementVNode(\"p\", _hoisted_6, _toDisplayString(error.message), 1)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const errors = computed(() => {\n      return store.errors.map((error, index) => {\n        return {\n          message: error.message,\n          index,\n        };\n      });\n    });\n\n    const onClose = () => {\n      store.clearErrors();\n    };\n\n    return {\n      dialog,\n      errors,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./ErrorMessage.vue?vue&type=template&id=53994b82&scoped=true&ts=true\"\nimport script from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ErrorMessage.vue?vue&type=style&index=0&id=53994b82&scoped=true&lang=css\"\nimport \"./ErrorMessage.vue?vue&type=style&index=1&id=53994b82&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53994b82\"]])\n\nexport default __exports__","function shouldPreventArrowKeyEventHandling(): boolean {\n  const activeElement = document.activeElement;\n  return (\n    activeElement instanceof HTMLTextAreaElement ||\n    activeElement instanceof HTMLInputElement ||\n    activeElement instanceof HTMLSelectElement\n  );\n}\n\ninterface KeyEventHandler {\n  onArrowUp?(): void;\n  onArrowDown?(): void;\n  onArrowLeft?(): void;\n  onArrowRight?(): void;\n}\n\nfunction resolveHandlerFunc(\n  key: string,\n  handler: KeyEventHandler\n): (() => void) | undefined {\n  if (!shouldPreventArrowKeyEventHandling()) {\n    switch (key) {\n      case \"ArrowUp\":\n        return handler.onArrowUp;\n      case \"ArrowDown\":\n        return handler.onArrowDown;\n      case \"ArrowLeft\":\n        return handler.onArrowLeft;\n      case \"ArrowRight\":\n        return handler.onArrowRight;\n    }\n  }\n}\n\nexport function handleKeyDownEvent(handler: KeyEventHandler): void {\n  document.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n    const f = resolveHandlerFunc(event.key, handler);\n    if (f) {\n      event.preventDefault();\n      f();\n    }\n  });\n}\n","\nimport { defineComponent, computed, onMounted } from \"vue\";\nimport StandardLayout from \"@/components/main/StandardLayout.vue\";\nimport GameDialog from \"@/components/dialog/GameDialog.vue\";\nimport ResearchDialog from \"@/components/dialog/ResearchDialog.vue\";\nimport USIEngineManagementDialog from \"@/components/dialog/USIEngineManagementDialog.vue\";\nimport AppSettingDialog from \"@/components/dialog/AppSettingDialog.vue\";\nimport PasteDialog from \"@/components/dialog/PasteDialog.vue\";\nimport BussyMessage from \"@/components/dialog/BussyMessage.vue\";\nimport ConfirmDialog from \"@/components/dialog/ConfirmDialog.vue\";\nimport InfoMessage from \"@/components/dialog/InfoMessage.vue\";\nimport ErrorMessage from \"@/components/dialog/ErrorMessage.vue\";\nimport { useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\nimport { handleKeyDownEvent } from \"@/helpers/key\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    StandardLayout,\n    GameDialog,\n    ResearchDialog,\n    USIEngineManagementDialog,\n    AppSettingDialog,\n    PasteDialog,\n    BussyMessage,\n    ConfirmDialog,\n    InfoMessage,\n    ErrorMessage,\n  },\n  setup() {\n    const store = useStore();\n\n    const dialogVisibilities = computed(() => {\n      return {\n        game: store.mode === Mode.GAME_DIALOG,\n        research: store.mode === Mode.RESEARCH_DIALOG,\n        usiEngineSetting: store.mode === Mode.USI_ENGINE_SETTING_DIALOG,\n        appSetting: store.mode === Mode.APP_SETTING_DIALOG,\n        paste: store.mode === Mode.PASTE_DIALOG,\n        bussy: store.isBussy,\n        confirm: store.confirmation !== undefined,\n      };\n    });\n\n    const hasMessage = computed(() => store.hasMessage);\n\n    const hasErrors = computed(() => store.hasError);\n\n    onMounted(() => {\n      const body = document.getElementsByTagName(\"body\")[0];\n      body.addEventListener(\"copy\", (event) => {\n        store.copyRecord();\n        event.preventDefault();\n      });\n      body.addEventListener(\"paste\", (event) => {\n        store.showPasteDialog();\n        event.preventDefault();\n      });\n      body.addEventListener(\"dragover\", (event: DragEvent) => {\n        event.preventDefault();\n      });\n      body.addEventListener(\"drop\", (event: DragEvent) => {\n        if (event.dataTransfer && event.dataTransfer.files[0]) {\n          const path = event.dataTransfer.files[0].path;\n          store.openRecord(path);\n        }\n        event.preventDefault();\n      });\n      handleKeyDownEvent({\n        onArrowUp(): void {\n          const moveNumber = store.record.current.number;\n          store.changeMoveNumber(moveNumber - 1);\n        },\n        onArrowDown(): void {\n          const moveNumber = store.record.current.number;\n          store.changeMoveNumber(moveNumber + 1);\n        },\n        onArrowLeft(): void {\n          store.changeMoveNumber(0);\n        },\n        onArrowRight(): void {\n          store.changeMoveNumber(Number.MAX_SAFE_INTEGER);\n        },\n      });\n    });\n\n    return {\n      dialogVisibilities,\n      hasMessage,\n      hasErrors,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=0484e980&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0484e980&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport {\n  getRecordPathFromProcArg,\n  loadAppSetting,\n  setup as setupIPC,\n} from \"./ipc/renderer\";\nimport { useStore } from \"./store\";\nimport { Chart, registerables } from \"chart.js\";\n\nChart.register(...registerables);\n\nsetupIPC();\n\nconst store = useStore();\nPromise.allSettled([\n  loadAppSetting()\n    .then((setting) => {\n      store.updateAppSetting(setting);\n    })\n    .catch((e) => {\n      store.pushError(\n        new Error(\" :\" + e)\n      );\n    }),\n  (async function (): Promise<void> {\n    const path = await getRecordPathFromProcArg();\n    if (path) {\n      await store.openRecord(path);\n    }\n  })(),\n]).finally(() => {\n  createApp(App).mount(\"#app\");\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkelectron_shogi\"] = self[\"webpackChunkelectron_shogi\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(7818); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_StandardLayout","_resolveComponent","_component_GameDialog","_component_ResearchDialog","_component_USIEngineManagementDialog","_component_AppSettingDialog","_component_PasteDialog","_component_BussyMessage","_component_ConfirmDialog","_component_InfoMessage","_component_ErrorMessage","_openBlock","_createElementBlock","_Fragment","_createVNode","class","dialogVisibilities","game","_createBlock","key","_createCommentVNode","research","usiEngineSetting","appSetting","paste","bussy","confirm","hasMessage","hasErrors","_hoisted_1","_hoisted_2","ref","_component_BoardPane","_component_RecordPane","_component_TabPane","_createElementVNode","boardPaneMaxSize","size","bottomPaneSize","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_component_ButtonIcon","_component_BoardView","pieceImageType","boardImageType","maxSize","position","lastMove","flip","allowMove","allowEdit","blackPlayerName","whitePlayerName","blackPlayerTimeMs","blackPlayerByoyomi","whitePlayerTimeMs","whitePlayerByoyomi","onMove","onEdit","_withCtx","controlStates","onClick","args","onGame","icon","stop","onStop","resign","onResign","onResearch","endResearch","onEndResearch","startEditPosition","onStartEditPosition","endEditPosition","onEndEditPosition","initPosition","onChangeTurn","onInitPositionStandard","onInitPositionTsumeShogi","disabled","appSettings","onOpenAppSettings","engineSettings","onOpenEngineSettings","onFlip","onPaste","onCopy","removeAfter","onRemoveAfter","_","style","_normalizeStyle","layout","frame","$event","clickFrame","board","src","imagePath","_normalizeClass","active","color","_toDisplayString","blackPlayerTimeSeverity","blackClock","blackPlayerTimeText","whitePlayerTimeSeverity","whiteClock","whitePlayerTimeText","_renderList","square","id","backgroundStyle","piece","clickSquare","file","rank","onContextmenu","clickSquareR","blackHand","pointers","pointer","pieces","clickHand","type","whiteHand","promotion","clickPromote","promoteImagePath","clickNotPromote","notPromoteImagePath","turn","control","left","_renderSlot","$slots","undefined","right","Color","PieceType","reverseColor","BLACK","WHITE","colorToSFEN","isValidSFENColor","sfen","parseSFENColor","standardPieceNameMap","pawn","lance","knight","silver","gold","bishop","rook","king","promPawn","promLance","promKnight","promSilver","horse","dragon","standardPieceName","val","PAWN","LANCE","KNIGHT","SILVER","GOLD","BISHOP","ROOK","KING","PROM_PAWN","PROM_LANCE","PROM_KNIGHT","PROM_SILVER","HORSE","DRAGON","handPieceTypes","promotable","promoteMap","unpromoteMap","toSFENCharBlack","pieceTypeToSFEN","toSFENCharWhite","sfenCharToTypeMap","P","L","N","S","G","B","R","K","p","l","n","s","g","b","r","k","sfenCharToColorMap","rotateMap","Map","set","Piece","constructor","this","black","withColor","white","equals","promoted","unpromoted","isPromotable","rotate","get","Direction","reverseMap","up","DOWN","down","UP","RIGHT","LEFT","left_up","RIGHT_DOWN","right_up","LEFT_DOWN","left_down","RIGHT_UP","right_down","LEFT_UP","left_up_knight","RIGHT_DOWN_KNIGHT","right_up_knight","LEFT_DOWN_KNIGHT","left_down_knight","RIGHT_UP_KNIGHT","right_down_knight","LEFT_UP_KNIGHT","reverseDirection","dir","directions","MoveType","movableDirectionMap","SHORT","LONG","movableDirections","Object","keys","resolveMoveType","direction","directionToDeltaMap","x","y","vectorToDirectionAndDistance","distance","ok","Math","abs","dx","dy","sfenFileToNumber","sfenRankToNumber","sfenRanks","Square","index","opposite","neighbor","arg0","arg1","valid","trunc","all","push","newByIndex","fileDisplayTexts","rankDisplayTexts","Move","from","to","promote","pieceType","capturedPieceType","move","withPromote","getDisplayText","prev","text","ret","parseSFENMove","newBySFEN","parseSFENSquare","substring","length","InitialPositionType","sfenCharToNumber","Board","squares","Array","i","reset","STANDARD","at","swap","square1","square2","tmp","remove","removed","listNonEmptySquares","forEach","listSquaresByColor","clear","EMPTY","TSUME_SHOGI","HANDICAP_LANCE","HANDICAP_RIGHT_LANCE","HANDICAP_BISHOP","HANDICAP_ROOK","HANDICAP_ROOK_LANCE","HANDICAP_2PIECES","HANDICAP_4PIECES","HANDICAP_6PIECES","HANDICAP_8PIECES","empty","newByXY","resetBySFEN","isValidSFEN","rows","split","c","findKing","find","hasPower","target","option","step","filled","ignore","rdir","isChecked","kingColor","copyFrom","buildSFEN","Hand","count","add","reduce","handler","sfenBlack","formatSFEN","sfenWhite","w","match","sections","section","Number","hand","invalidRankMap","isInvalidRank","rule","isPromotableRank","pawnExists","Position","_board","_color","_blackHand","_whiteHand","_hand","checked","createMove","capturedPiece","createMoveBySFEN","m","isPawnDropMate","kingSquare","movable","isMovable","isValidMove","captured","doMove","opt","ignoreValidation","undoMove","isValidEditing","edit","change","getSfen","nextMoveNumber","hands","parseSFEN","setColor","d","clone","millisecondsToHMMSS","ms","secondsToHMMSS","floor","millisecondsToMSS","secondsToMSS","seconds","h","String","padStart","RecordMetadataKey","SpecialMove","getStandardMetadataDisplayName","BLACK_NAME","WHITE_NAME","START_DATETIME","END_DATETIME","DATE","TOURNAMENT","STRATEGY","TITLE","TIME_LIMIT","TIME_SPENT","PLACE","POSTED_ON","NOTE","BLACK_SHORT_NAME","WHITE_SHORT_NAME","OPUS_NO","OPUS_NAME","AUTHOR","PUBLISHED_ON","PUBLISHED_AT","SOURCE","LENGTH","INTEGRITY","CATEGORY","AWARD","RecordMetadata","standard","custom","standardMetadataKeys","getStandardMetadata","setStandardMetadata","value","delete","customMetadataKeys","getCustomMetadata","setCustomMetadata","specialMoveToDisplayStringMap","start","interrupt","draw","repetitionDraw","mate","timeout","foulWin","foulLose","enteringOfKing","winByDefault","lossByDefault","specialMoveToDisplayString","RecordEntryImpl","number","branchIndex","activeBranch","isCheck","next","branch","comment","elapsedMs","totalElapsedMs","displayMoveText","displayText","elapsed","totalElapsed","hasBranch","isFirstBranch","updateTotalElapsedMs","setElapsedMs","stack","pop","Record","metadata","_initialPosition","_position","initialPosition","_first","START","_current","repetitionCounts","repetitionStart","incrementRepetition","first","current","moves","movesBefore","_movesBefore","unshift","len","branchBegin","goBack","decrementRepetition","goForward","goto","resetAllBranchSelection","_forEach","entry","switchBranchByIndex","append","lastBranch","repetition","perpetualCheck","since","usi","metadataKeyMap","","","","","","","","","","","","","","","","","","","","","","","","","","metadataNameMap","blackName","whiteName","startDatetime","endDatetime","date","tournament","strategy","title","timeLimit","timeSpent","place","postedOn","note","blackShortName","whiteShortName","opusNo","opusName","author","publishedOn","publishedAt","source","integrity","category","award","LineType","linePatterns","prefix","HANDICAP","removePrefix","isPosition","BLACK_HAND","WHITE_HAND","BOARD","BLACK_TURN","WHITE_TURN","MOVE","COMMENT","parseLine","line","end","indexOf","pattern","matched","begin","data","metadataKey","metadataPrefix","METADATA","UNKNOWN","readHandicap","trim","Error","fileStringToNumber","rankStringToNumber","","","","","","","","","","kansujiStringToNumber","","","","","","","","","","stringToNumber","stringToPieceType","","","","","","","","","","","","","","","","","","","","stringToSpecialMove","","INTERRUPT","","RESIGN","","DRAW","","REPETITION_DRAW","","MATE","","TIMEOUT","","FOUL_WIN","","FOUL_LOSE","","ENTERING_OF_KING","","WIN_BY_DEFAULT","","LOSS_BY_DEFAULT","moveRegExp","timeRegExp","specialMoveRegExp","readBoard","rankStr","pieceStr","readHand","numberStr","readMoveTime","record","timeResult","exec","minutes","parseInt","readMove","result","num","time","toStr","pieceTypeStr","promStr","fromStr","importKakinoki","lines","inMoveSection","parsed","e","standardKey","console","log","kanjiNumberStrings","fileStrings","rankStrings","pieceTypeToStringForMove","pieceTypeToStringForBoard","specialMoveToString","formatMetadata","options","returnCode","formatPosition","formatHand","formatMove","exportKakinoki","replaceAll","preloadedImages","preloadImage","path","img","document","createElement","PieceImageType","BoardImageType","layoutTemplate","width","height","squreWidth","squreHeight","leftSquarePadding","topSquarePadding","leftPiecePadding","topPiecePadding","highlight","selected","opacity","lastMoveTo","lastMoveFrom","fontSize","playerName","clock","pieceImageMap","HITOMOJI","king2","HITOMOJI_GOTHIC","boardImageMap","LIGHT","WARM","RESIN","handLaytoutRule","row","column","LayoutBuilder","pieceImages","boardImage","preload","values","build","upperSizeLimit","reservedMoveForPromotion","ratio","buildFrameLayout","buildBoardLayout","top","buildPieceLayout","boardLayout","layouts","displayColor","buildSquareLayout","buildHandLayout","standX","standY","standWidth","standHeight","standStyle","areaWidth","areaHeight","areaX","areaY","pieceWidth","pieceHeight","padding","max","buildPromotionLayout","notPromoted","buildTurnLayout","borderWidth","buildPlayerNameLayout","buildClockLayout","buildControlLayout","frameLayout","pieceLayout","squareLayout","blackHandLayout","whiteHandLayout","promotionLayout","turnLayout","blackPlayerNameLayout","whitePlayerNameLayout","blackClockLayout","whiteClockLayout","controlLayout","RectSize","defineComponent","name","props","required","default","Boolean","emits","setup","context","state","reactive","reservedMove","resetState","watch","updatePointer","newPointer","prevPointer","editFrom","editTo","emit","moveFrom","moveTo","noProm","prom","event","stopPropagation","preventDefault","layoutBuilder","computed","builder","formatTime","timeMs","byoyomi","ceil","timeSeverity","rem","__exports__","ES_HUMAN","ES_USI_ENGINE","isUSIEngine","uri","startsWith","issueEngineURI","now","Date","rand","random","MAX_SAFE_INTEGER","toString","getUSIEngineOptionCurrentValue","duplicateEngineSetting","engine","JSON","parse","stringify","mergeUSIEngineSetting","local","USIEngineSettings","json","engines","hasEngine","addEngine","updateEngine","removeEngine","getEngine","engineList","sort","a","defaultName","jsonWithIndent","MenuEvent","Tab","ClockSoundTarget","STORAGE_KEY","defaultAppSetting","pieceImage","pieceVolume","clockVolume","clockPitch","clockSoundTarget","ONLY_USER","boardFlipping","tab","RECORD_INFO","defaultGameSetting","timeSeconds","increment","enableEngineTimeout","humanIsFront","validateGameSetting","gameSetting","defaultResearchSetting","webAPI","async","updateMenuState","localStorage","getItem","APP_SETTING","setItem","RESEARCH_SETTING","GAME_SETTING","onSendError","onMenuEvent","onUSIBestMove","onUSIInfo","getWindowObject","window","isNative","electronShogiAPI","getAPI","getRecordPathFromProcArg","showOpenRecordDialog","openRecord","showSaveRecordDialog","defaultPath","saveRecord","showSelectFileDialog","loadAppSetting","saveAppSetting","setting","loadResearchSetting","saveResearchSetting","loadGameSetting","saveGameSetting","loadUSIEngineSetting","saveUSIEngineSetting","showSelectUSIEngineDialog","getUSIEngineInfo","startResearch","researchSetting","sessionID","startGame","endGame","specialMove","updateUSIPosition","blackTimeMs","whiteTimeMs","stopUSI","sendUSISetOption","store","useStore","api","pushError","isBussy","NEW_RECORD","newRecord","OPEN_RECORD","SAVE_RECORD","overwrite","SAVE_RECORD_AS","COPY_RECORD","copyRecord","PASTE_RECORD","showPasteDialog","INSERT_INTERRUPT","insertSpecialMove","INSERT_RESIGN","INSERT_DRAW","INSERT_REPETITION_DRAW","INSERT_MATE","INSERT_TIMEOUT","INSERT_FOUL_WIN","INSERT_FOUL_LOSE","INSERT_ENTERING_OF_KING","INSERT_WIN_BY_DEFAULT","INSERT_LOSS_BY_DEFAULT","REMOVE_RECORD_AFTER","removeRecordAfter","START_POSITION_EDITING","startPositionEditing","END_POSITION_EDITING","endPositionEditing","CHANGE_TURN","changeTurn","INIT_POSITION_STANDARD","initializePosition","INIT_POSITION_HANDICAP_LANCE","INIT_POSITION_HANDICAP_RIGHT_LANCE","INIT_POSITION_HANDICAP_BISHOP","INIT_POSITION_HANDICAP_ROOK","INIT_POSITION_HANDICAP_ROOK_LANCE","INIT_POSITION_HANDICAP_2PIECES","INIT_POSITION_HANDICAP_4PIECES","INIT_POSITION_HANDICAP_6PIECES","INIT_POSITION_HANDICAP_8PIECES","INIT_POSITION_TSUME_SHOGI","START_GAME","showGameDialog","STOP_GAME","stopGame","resignByUser","START_RESEARCH","showResearchDialog","STOP_RESEARCH","stopResearch","FLIP_BOARD","flipBoard","APP_SETTING_DIALOG","openAppSettingDialog","USI_ENGINE_SETTING_DIALOG","openUsiEngineManagementDialog","doMoveByUsiEngine","sender","updateUSIInfo","mode","beep","frequency","volume","AudioContext","oscillator","createOscillator","gain","createGain","connect","destination","onended","disconnect","currentTime","beepShort","beepUnlimited","lastPieceBeatTime","playPieceBeat","audio","Audio","play","USIInfoSender","stringifyUSIInfoSender","BLACK_PLAYER","WHITE_PLAYER","RESEARCHER","MAX_SCORE","MIN_SCORE","RecordEntryCustomData","obj","evaluation","updateScore","score","command","scoreCP","min","scoreMate","GameStore","timerHandle","timerStart","lastTimeMs","_elapsedMs","_setting","blackByoyomi","whiteByoyomi","getPlayerState","startTimer","handlers","playerState","setInterval","lastByoyomi","getTime","lastTime","onBeepUnlimited","onBeepShort","incrementTime","clearTimer","clearInterval","defaultRecordFileName","getDateString","toLocaleDateString","year","month","day","BussyStore","retain","release","formatPV","pv","USIPlayerMonitor","iterates","update","iterate","depth","seldepth","selectiveDepth","nodes","multipv","multiPV","lowerbound","lowerBound","upperbound","upperBound","currmove","currentMove","currentMoveText","hashfullPerMill","hashfull","nps","string","USIStore","blackPlayer","_blackPlayer","whitePlayer","_whitePlayer","researcher","_researcher","info","_sessionID","_blackPosition","_whitePosition","_researchPosition","Mode","MessageStore","_queue","message","enqueue","dequeue","shift","ErrorStore","errors","hasError","Store","_bussy","_message","_error","_appSetting","_mode","NORMAL","_usi","usiSessionID","_game","_record","retainBussyState","releaseBussyState","enqueueMessage","dequeueMessage","clearErrors","confirmation","_confirmation","showConfirmation","lastMode","TEMPORARY","confirmationOk","onOk","confirmationCancel","onCancel","PASTE_DIALOG","closePasteDialog","GAME_DIALOG","RESEARCH_DIALOG","closeDialog","usiBlackPlayerMonitor","usiWhitePlayerMonitor","usiResearcherMonitor","entryData","customData","issueUSISessionID","startPosition","clearRecordFilePath","GAME","resetGameTimer","isMovableByUser","doMoveByUser","clearGameTimer","stopBeep","unlimitedBeepHandler","RESEARCH","recordFilePath","_recordFilePath","updateRecordFilePath","updateRecordComment","updateStandardRecordMetadata","POSITION_EDITING","initialPositionType","editPosition","changeMoveNumber","changeBranch","str","navigator","clipboard","writeText","pasteRecord","recordOrError","iconv","Buffer","storeV2","deep","Icon","iconSourceMap","BUSSY","ERROR","INFO","STOP","END","EDIT","CHECK","SWAP","SWAP_H","SETTINGS","ENGINE_SETTINGS","FLIP","PASTE","COPY","DELETE","BRAIN","CHART","ARROW_DROP","FIRST","BACK","NEXT","LAST","QUESTION","components","BoardView","ButtonIcon","_component_RecordView","operational","isRecordOperational","onGoBegin","goBegin","onGoBack","onGoForward","onGoEnd","goEnd","onSelectMove","selectMove","onSelectBranch","selectBranch","onChange","changeNumber","branches","moveList","branchList","beginPosSelected","elem","minWidth","RecordView","_withScopeId","_pushScopeId","_popScopeId","_component_RecordInfo","_component_RecordComment","_component_EngineAnalytics","_component_EvaluationChart","activeTab","headerHeight","changeSelect","contentSize","readonly","onInput","textarea","onMounted","addEventListener","_component_EngineAnalyticsElement","elementHeight","_createStaticVNode","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","toFixed","best","EngineAnalyticsElement","canvasRef","chart","buildDataset","borderColor","dataPoints","label","showLine","verticalLine","pointBorderWidth","pointRadius","buildDatasets","buildScalesOption","scales","displayWidth","round","canvas","getContext","Chart","datasets","animation","duration","maintainAspectRatio","events","onUnmounted","destroy","resize","list","element","displayName","map","input","minHeight","RecordComment","EngineAnalytics","EvaluationChart","RecordInfo","updateAppSetting","BoardPane","RecordPane","TabPane","windowSize","topPaneHeight","topPane","updateSize","innerWidth","innerHeight","topPaneResizeObserver","ResizeObserver","entries","contentRect","observe","removeEventListener","minTabPaneHeight","INVISIBLE","minTabHeight","informationHeaderHeight","minRecordWidth","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","for","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","defaultValues","players","player","onSwapColor","hours","onStart","showModalDialog","dialog","showModal","getFormItemByID","getElementById","readInputAsNumber","blackPlayerSelect","whitePlayerSelect","engineSetting","buildPlayerSetting","playerURI","error","defaultValue","engineSelect","_component_USIEngineOptionDialog","openOptions","duplicate","saveAndClose","cancel","optionDialog","optionOk","optionCancel","inputId","selectFile","vars","v","sendOption","latestEngineSetting","engineNameInput","latest","aIsUSI","bIsUSI","USIEngineOptionDialog","_hoisted_35","_hoisted_36","_hoisted_37","pieceImageTypes","boardImageTypes","returnCodeToName","nameToReturnCode","crlf","lf","cr","readText","onClose","shouldPreventArrowKeyEventHandling","activeElement","HTMLTextAreaElement","HTMLInputElement","HTMLSelectElement","resolveHandlerFunc","onArrowUp","onArrowDown","onArrowLeft","onArrowRight","handleKeyDownEvent","f","StandardLayout","GameDialog","ResearchDialog","USIEngineManagementDialog","AppSettingDialog","PasteDialog","BussyMessage","ConfirmDialog","InfoMessage","ErrorMessage","body","getElementsByTagName","dataTransfer","files","moveNumber","registerables","setupIPC","Promise","allSettled","then","catch","finally","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","o","defineProperty","enumerable","globalThis","Function","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}